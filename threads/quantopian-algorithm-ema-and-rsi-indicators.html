<!DOCTYPE html>
<html>
<head>
<link href='i1.wp.com' rel='dns-prefetch'>
<link href='i2.wp.com' rel='dns-prefetch'>
<link href='i3.wp.com' rel='dns-prefetch'>
<meta content='2HgX9mcLHaPOX6sfaaAkhWtblhEB9yUNw4l6l46e1k4' name='google-site-verification'>
<link rel="shortcut icon" type="image/x-icon" href="external/favicon-q-ac1a76f2c200e9026b5b1147519bb4fab6256910588b831e2411bc6c7c1218c3.png" />
<title>
Quantopian Algorithm, EMA and RSI Indicators
</title>
<meta content='This is my algorithm I developed on Quantopian. It buys stocks based on fundamentals using the the fundamental filter. I wanted to find stocks with low P/E ratios, low book value, and free cash flow. Once these are filtered I use technical analysis to find stocks above their moving averages and an rsi&lt;50 each day. These stocks are sold at the end of the month if they are below there moving averages. The algorithm manages leverage decently, but does have some high leverage fluctuations. This...' name='description'>
<link rel="stylesheet" media="all" href="external/quanto-base-bundle-e8eb6050172aa0d24124d5c24bac90b2cccd88b5b9c7742026c0e9efab038c6e.css" />
<link rel="stylesheet" media="all" href="external/quanto-posts-bundle-aab01368d3f82d8dafc94ee9eabb82e77dc8c9fbbffa952fdcdc744dfa523cf3.css" />
<script src="external/quanto_global-057218867db29d5768131af5d6fb3476cef098e7d9e655108befb903c7ee985e.js"></script>
<script src="external/posts_bundle-3dfd82fa469c393d752e461d837aec9e4e364ae39f49198e34a6626f2180fdf7.js"></script>
<link href='external/logo-q-180x180-0f5a6a439c99203ed4aea6f656e7604c543d287be43d8b17c7591c1131f09a59.png' rel='apple-touch-icon'>
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="EXx0iw3nGsJudVApJ0dFJOy90Cfi8ogxoIW5uLJA+aptGgLGrxHIIddoCRhoqO1Q1DPzTpg+nSoiimLSGAWbEQ==" />
<meta content='width=device-width, initial-scale=1.0' name='viewport'>
<script>
//<![CDATA[
window.quanto_data={};quanto_data.bounce_back_params={"show_modal":null,"feedback_text":null};quanto_data.namespace="public";quanto_data.talib_info={"ADOSC":["Chaikin A/D Oscillator (Volume Indicators)",["fastperiod","3"],["slowperiod","10"]],"ADX":["Average Directional Movement Index (Momentum Indicators)",["timeperiod","14"]],"ADXR":["Average Directional Movement Index Rating (Momentum Indicators)",["timeperiod","14"]],"APO":["Absolute Price Oscillator (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["matype","0"]],"AROON":["Aroon (Momentum Indicators)",["timeperiod","14"]],"AROONOSC":["Aroon Oscillator (Momentum Indicators)",["timeperiod","14"]],"ATR":["Average True Range (Volatility Indicators)",["timeperiod","14"]],"BBANDS":["Bollinger Bands (Overlap Studies)",["timeperiod","5"],["nbdevup","2"],["nbdevdn","2"],["matype","0"]],"BETA":["Beta (Statistic Functions)",["timeperiod","5"]],"CCI":["Commodity Channel Index (Momentum Indicators)",["timeperiod","14"]],"CMO":["Chande Momentum Oscillator (Momentum Indicators)",["timeperiod","14"]],"CORREL":["Pearson's Correlation Coefficient (r) (Statistic Functions)",["timeperiod","30"]],"DEMA":["Double Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"DX":["Average Directional Movement Index (Momentum Indicators)",["timeperiod","14"]],"EMA":["Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"KAMA":["Kaufman Adaptive Moving Average (Overlap Studies)",["timeperiod","30"]],"LINEARREG":["Linear Regression (Statistic Functions)",["timeperiod","14"]],"LINEARREG_ANGLE":["Linear Regression Angle (Statistic Functions)",["timeperiod","14"]],"LINEARREG_INTERCEPT":["Linear Regression Intercept (Statistic Functions)",["timeperiod","14"]],"LINEARREG_SLOPE":["Linear Regression Slope (Statistic Functions)",["timeperiod","14"]],"MA":["Moving average (Overlap Studies)",["timeperiod","30"],["matype","0"]],"MACD":["Moving Average Convergence/Divergence (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["signalperiod","9"]],"MACDEXT":["MACD with controllable MA type (Momentum Indicators)",["fastperiod","12"],["fastmatype","0"],["slowperiod","26"],["slowmatype","0"],["signalperiod","9"],["signalmatype","0"]],"MACDFIX":["Moving Average Convergence/Divergence Fix 12/26 (Momentum Indicators)",["signalperiod","9"]],"MAX":["Highest values over a specified period (Math Operators)",["timeperiod","30"]],"MAXINDEX":["Index of highest value over a specified period (Math Operators)",["timeperiod","30"]],"MFI":["Money Flow Index (Momentum Indicators)",["timeperiod","14"]],"MIDPOINT":["Midpoint over period (Overlap Studies)",["timeperiod","14"]],"MIDPRICE":["Midpoint Price over period (Overlap Studies)",["timeperiod","14"]],"MIN":["Lowest value over a specified period (Math Operators)",["timeperiod","30"]],"MININDEX":["Index of lowest value over a specified period (Math Operators)",["timeperiod","30"]],"MINMAX":["Lowest and highest values over a specified period (Math Operators)",["timeperiod","30"]],"MINMAXINDEX":["Indexes of lowest and highest values over a specified period (Math Operators)",["timeperiod","30"]],"MINUS_DI":["Minus Directional Indicator (Momentum Indicators)",["timeperiod","14"]],"MINUS_DM":["Minus Directional Movement (Momentum Indicators)",["timeperiod","14"]],"MOM":["Momentum (Momentum Indicators)",["timeperiod","10"]],"NATR":["Normalized Average True Range (Volatility Indicators)",["timeperiod","14"]],"PLUS_DI":["Plus Directional Indicator (Momentum Indicators)",["timeperiod","14"]],"PLUS_DM":["Plus Directional Movement (Momentum Indicators)",["timeperiod","14"]],"PPO":["Percentage Price Oscillator (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["matype","0"]],"ROC":["Rate of change: ((price/prevPrice)-1)*100 (Momentum Indicators)",["timeperiod","10"]],"ROCP":["Rate of change Percentage: (price-prevPrice)/prevPrice (Momentum Indicators)",["timeperiod","10"]],"ROCR":["Rate of change ratio: (price/prevPrice) (Momentum Indicators)",["timeperiod","10"]],"ROCR100":["Rate of change ratio 100 scale: (price/prevPrice)*100 (Momentum Indicators)",["timeperiod","10"]],"RSI":["Relative Strength Index (Momentum Indicators)",["timeperiod","14"]],"SMA":["Simple Moving Average (Overlap Studies)",["timeperiod","30"]],"STDDEV":["Standard Deviation (Statistic Functions)",["timeperiod","5"],["nbdev","1"]],"STOCH":["Stochastic (Momentum Indicators)",["fastk_period","5"],["slowk_period","3"],["slowk_matype","0"],["slowd_period","3"],["slowd_matype","0"]],"STOCHF":["Stochastic Fast (Momentum Indicators)",["fastk_period","5"],["fastd_period","3"],["fastd_matype","0"]],"STOCHRSI":["Stochastic Relative Strength Index (Momentum Indicators)",["timeperiod","14"],["fastk_period","5"],["fastd_period","3"],["fastd_matype","0"]],"T3":["Triple Exponential Moving Average (T3) (Overlap Studies)",["timeperiod","5"],["vfactor","0.7"]],"TEMA":["Triple Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"TRIMA":["Triangular Moving Average (Overlap Studies)",["timeperiod","30"]],"TRIX":["1-day Rate-Of-Change (ROC) of a Triple Smooth EMA (Momentum Indicators)",["timeperiod","30"]],"TSF":["Time Series Forecast (Statistic Functions)",["timeperiod","14"]],"ULTOSC":["Ultimate Oscillator (Momentum Indicators)",["timeperiod1","7"],["timeperiod2","14"],["timeperiod3","28"]],"VAR":["Variance (Statistic Functions)",["timeperiod","5"],["nbdev","1"]],"WILLR":["Williams' %R (Momentum Indicators)",["timeperiod","14"]],"WMA":["Weighted Moving Average (Overlap Studies)",["timeperiod","30"]]};quanto_data.nb_preview_url="https://notebooks-preview.prd.pub.quantopian.com";quanto_data.delay_nb_preview_load=false;
//]]>
</script>
<meta content='https://www.quantopian.com/posts/quantopian-algorithm-ema-and-rsi-indicators' property='og:url'>
<meta content='Quantopian Algorithm, EMA and RSI Indicators' property='og:title'>

<input type="hidden" name="env" id="quanto-env" value="production" />
<meta content='550580758292093' property='fb:app_id'>
<meta content='https://www.quantopian.com/posts/quantopian-algorithm-ema-and-rsi-indicators' property='og:url'>
<meta content='https://media.quantopian.com/public/og-image-default.png' property='og:image'>
<meta content='Quantopian Algorithm, EMA and RSI Indicators' property='og:title'>
<meta content='This is my algorithm I developed on Quantopian. It buys stocks based on fundamentals using the the fundamental filter. I wanted to find stocks with low P/E ratios, low book value, and free cash flow. Once these are filtered I use technical analysis to find stocks above their moving averages and an rsi&lt;50 each day. These stocks are sold at the end of the month if they are below there moving averages. The algorithm manages leverage decently, but does have some high leverage fluctuations. This...' property='og:description'>
</head>
<script type='application/ld+json'>
  {
    "@context": "http://schema.org",
    "@type": "Organization",
    "url": "https://www.quantopian.com",
    "logo": "https://media.quantopian.com/logos/logo-q-press-red.png"
  }
</script>
<body class='' ontouchstart=''>
<div id='fb-root'></div>
<div class='wrapper'>
<div class='alert-v2 error'>
<div class='message'>
Quantopian's community platform is shutting down. Please read <a href="/posts/quantopians-community-services-are-closing">this post</a> for more information and <a href='/account#account'>download your code</a>.
</div>
</div>
<div class='navbar navbar-default navbar-static-top' id='app-navbar'>
<div class='container-fluid'>
<div class='navbar-header'>
<button class='navbar-toggle collapsed' data-target='#app-navbar-collapse' data-toggle='collapse'>
<span class='icon hamburger-menu'></span>
</button>
<a class='navbar-brand' href='/home'>
<img class='logo-image async-image' data-src='external/logo-q-white-b141ea6018546e5a4ecc3d10d8440ec076fc4385764e948b322828cc70950a76.svg'>
</a>
</div>
<div class='collapse navbar-collapse' id='app-navbar-collapse'>
<ul class='nav navbar-nav navbar-right'>
<li class='dropdown quanto-dropdown-new'>
<li>
<a class='header' href='/docs'>
Documentation
</a>
</li>
<li class='dropdown quanto-dropdown-new'>
<a class='header' data-toggle='dropdown' href='#'>
Learn
</a>
<ul class='dropdown-menu'>
<li>
<a class='mixpanel-button' data-event='main nav getting started clicked' href='/tutorials/getting-started'>Getting Started</a>
</li>
<li>
<a class='mixpanel-button' data-event='main nav tutorials clicked' href='/tutorials'>Tutorials</a>
</li>
<li>
<a class='mixpanel-button' data-event='main nav lectures clicked' href='/lectures'>Lectures</a>
</li>
</ul>
</li>
<li>
<a class='header' href='/posts' id='forum-link'>
Forum
</a>
</li>
<li>
<a class="header" href="/signin?return_to=/posts/quantopian-algorithm-ema-and-rsi-indicators">Log In</a>
</li>
</li>

</ul>
</div>
</div>
</div>
<script>
  $(document).ready(function () {
    quanto.instances.fm = new quanto.FeedbackManager();
    quanto.instances.hm = new quanto.headerManager();
  })
</script>


<div class='content content-area new-style'>
<input type="hidden" name="page-id" id="page-id" value="postatomic" />
<script src="external/MathJax.js?config=TeX-AMS_HTML-full.js,Safe" async="async"></script>
<div class='container page-container post-atomic'>
<input id='parent-post-id-val' type='hidden' value='56902ec0a83cdaf27200002a'>
<div class='post-container' data-post-id='56902ec0a83cdaf27200002a' id='56902ec0a83cdaf27200002a'>
<div class='back-button back-to-community'>Back to Community</div>
<div class='post-title'>Quantopian Algorithm, EMA and RSI Indicators</div>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/556675f3f33e8953ae0003c7'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/beb0dadad0d564c32346b21296d91b2f?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/556675f3f33e8953ae0003c7'>Eric Bell </a>
</div>
<span class='posted-at'>posted </span>
<span UTCms='1452289728000' class='quanto-date posted-at'></span>
<div class='pull-right other-actions'>
<div class='dropup inline-block'>
<div class='dropdown share-control other-action-link'>
<div data-toggle='dropdown'>
<div class='share-image'></div>
Share
</div>
<ul class='dropdown-menu share-options-menu'>
<li>
<a class='share-row' href='https://twitter.com/intent/tweet?text=Quantopian Algorithm, EMA and RSI Indicators&amp;url=https%3A%2F%2Fwww.quantopian.com%2Fposts%2Fquantopian-algorithm-ema-and-rsi-indicators%3Futm_source%3Dwebsite_share%26utm_campaign%3Dquantopian-algorithm-ema-and-rsi-indicators%26utm_medium%3Dtwitter&amp;via=quantopian'>
<i class='icon icon-twitter'></i>
Share on Twitter
</a>
</li>
<li>
<div class='share-row facebook-button'>
<i class='icon icon-facebook'></i>
Share on Facebook
</div>
</li>
<li>
<div class='share-row linkedin-button' data-share-url='https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Fwww.quantopian.com%2Fposts%2Fquantopian-algorithm-ema-and-rsi-indicators%3Futm_source%3Dwebsite_share%26utm_campaign%3Dquantopian-algorithm-ema-and-rsi-indicators%26utm_medium%3Dlinkedin&amp;title=Quantopian+Algorithm%2C+EMA+and+RSI+Indicators+%28Eric+Bell+%29&amp;source=Quantopian'>
<i class='icon icon-linkedin'></i>
Share on LinkedIn
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>

<input type="hidden" name="social_fb_post_link" id="social_fb_post_link" value="https://www.quantopian.com/posts/quantopian-algorithm-ema-and-rsi-indicators?utm_source=website_share&amp;utm_campaign=quantopian-algorithm-ema-and-rsi-indicators&amp;utm_medium=facebook" />
<input type="hidden" name="social_post_image" id="social_post_image" value="external/logo-q-red-outline.png" />
<input type="hidden" name="social_post_author" id="social_post_author" value="Eric Bell " />
<div class='body-text'>
<div class='body-text-container post-body'><p>This is my algorithm I developed on Quantopian. It buys stocks based on fundamentals using the the fundamental filter. I wanted to find stocks with low P/E ratios, low book value, and free cash flow. Once these are filtered I use technical analysis to find stocks above their moving averages and an rsi&lt;50 each day. These stocks are sold at the end of the month if they are below there moving averages. The algorithm manages leverage decently, but does have some high leverage fluctuations. This is my best back test over a 13 year period.  </p>
</div>
</div>
</div>

</div>

<div class='container page-container post-atomic'>
<div class='section-header reply-header'>
<div class='reply-title'>19 responses</div>
</div>
<div class='replies'>
<div class='post-container response-container' data-post-id='5690842ebf9648c5b8000432' id='5690842ebf9648c5b8000432'>
<a href='#5690842ebf9648c5b8000432'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/52b0e0e0271a27fc88000049'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e5451406e743420c700eb2b054b2fc57?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/52b0e0e0271a27fc88000049'>Blue Seahawk</a>
</div>
<a UTCms='1452311601000' class='quanto-date posted-at response-posted-at' href='#5690842ebf9648c5b8000432'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>That hit a leverage of 1.9, see <a href="https://www.quantopian.com/posts/max-intraday-leverage">Max Intraday Leverage</a> or <a href="https://www.quantopian.com/posts/pvr">PvR</a> for a couple of options/ways to watch out for that.<br>
As a result, profited $1.12M on $1.85M activated/transacted for PvR of 60.6%. Chart shows 112%.</p>

<p>I think it could be interesting if you make the sell a trailing stop/sell, holding that stock as long as the price is going up, selling any time the price goes down a certain amount, locking in that profit and freeing up cash to buy others. I played around with this <a href="https://www.quantopian.com/posts/trailing-stop-loss#56907f361f924e1f0700005f">trailing trades code</a> in your algo resulting in higher returns, even lower beta (suitable for the contest), even lower than you have there, before I messed it up and ran out of steam. Was also doing trailing buy.</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56913def1f924e4a38000519' id='56913def1f924e4a38000519'>
<a href='#56913def1f924e4a38000519'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/556675f3f33e8953ae0003c7'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/beb0dadad0d564c32346b21296d91b2f?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/556675f3f33e8953ae0003c7'>Eric Bell </a>
</div>
<a UTCms='1452359155000' class='quanto-date posted-at response-posted-at' href='#56913def1f924e4a38000519'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thanks for your feedback,<br>
 I don&#39;t like the way it sells at the end of the month if it is below their moving average at the end of the month.  It doesn&#39;t sell well in paper-trading. I would also like to implement something to make it only hold a certain amount of stocks at the same time. I don&#39;t think I would buy upwards to 50 stocks. I&#39;ll work with it today to see where I can get. </p>

<p>On another note, do you know a way I can share my backtest and code with future employers? I am graduating soon  and I am looking for jobs. I want to share my work with them so they see I can code and stuff?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56c2caf1b7300b848f00033e' id='56c2caf1b7300b848f00033e'>
<a href='#56c2caf1b7300b848f00033e'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/556675f3f33e8953ae0003c7'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/beb0dadad0d564c32346b21296d91b2f?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/556675f3f33e8953ae0003c7'>Eric Bell </a>
</div>
<a UTCms='1455606519000' class='quanto-date posted-at response-posted-at' href='#56c2caf1b7300b848f00033e'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Here is my most profitable backtest. This buys and holds the stock over the time period. I wanted to create fundamentals that limited the drawdown by looking for companies with free cash flow and low p/e ratios. I am currently working on developing a trailing stop loss that gives a better sell signal, then the ema25 at the end of the month.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58caabd8836b38000adfbbb7' id='58caabd8836b38000adfbbb7'>
<a href='#58caabd8836b38000adfbbb7'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5847522904d4c600150003f9'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/bf91c4231625f9896145a877ea25eab9?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5847522904d4c600150003f9'>Sam Khorsand</a>
</div>
<a UTCms='1489677272000' class='quanto-date posted-at response-posted-at' href='#58caabd8836b38000adfbbb7'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Eric,</p>

<p>Interesting code I like how you are doing the filters. Unfortunately when I attempt to backtest this it is abnormally slow and eventually runs into many errors (maybe because its from a year back). The errors are as follows:</p>

<p>&quot;It looks like this backtest is using deprecated API methods. Check the &#39;Log Output&#39; tab for more.&quot;
2016-08-15 06:31 DEPRECATION WARNING Line 48: The <code>history</code> method is deprecated.  Use <code>data.history</code> instead.  Learn more here.<br>
2016-08-15 06:31 DEPRECATION WARNING Line 49: Checking whether an asset is in data is deprecated.  Learn more here.<br>
2016-08-15 06:31 DEPRECATION WARNING Line 58: Iterating over the assets in <code>data</code> is deprecated.  Learn more here.<br>
2016-08-15 06:31 DEPRECATION WARNING Line 63: The <code>history</code> method is deprecated.  Use <code>data.history</code> instead.  Learn more here.<br>
2016-08-15 06:31 DEPRECATION WARNING Line 66: The <code>history</code> method is deprecated.  Use <code>data.history</code> instead.  Learn more here.<br>
2016-08-15 06:31 DEPRECATION WARNING Line 73: <code>data[sid(N)]</code> is deprecated. Use <code>data.current</code>.  Learn more here.<br>
2016-08-15 06:31 DEPRECATION WARNING Line 94: Iterating over the assets in <code>data</code> is deprecated.  Learn more here. </p>

<p>Would you happen to have any updated version of this code since that might not have any errors? I am looking to play around with something very similar that basically takes a fundamental screen criteria such as yours and if the screen passes, will apply a moving average and RSI filter to identify stocks to buy and short. Please let me know when you have a chance. And once again great job getting this idea going. Thanks Eric.</p>

<p>Sam  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58d0301d5db6513d97a15756' id='58d0301d5db6513d97a15756'>
<a href='#58d0301d5db6513d97a15756'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/556675f3f33e8953ae0003c7'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/beb0dadad0d564c32346b21296d91b2f?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/556675f3f33e8953ae0003c7'>Eric Bell </a>
</div>
<a UTCms='1490038813000' class='quanto-date posted-at response-posted-at' href='#58d0301d5db6513d97a15756'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>So you cannot use this way to upload stocks anymore. Use pipeline. Here is my code for Benjamin Graham Fundamentals. It doesn&#39;t have the RSI, but it has the moving averages.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58d054b3177005000a061227' id='58d054b3177005000a061227'>
<a href='#58d054b3177005000a061227'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5847522904d4c600150003f9'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/bf91c4231625f9896145a877ea25eab9?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5847522904d4c600150003f9'>Sam Khorsand</a>
</div>
<a UTCms='1490048179000' class='quanto-date posted-at response-posted-at' href='#58d054b3177005000a061227'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Eric sounds good thanks for this. Had a quick question for you on the code I am working below that has had me stumped now for hours:</p>

<p>Hello I have a quick question. I am attempting to create an argument in code that require the first for loop to return a true value before the second for loop can even take place. And if the first for loop fails to return a true value for the signal, I want the algorithm to not even go to the second for loop and thus have nothing happened. Basically first for loop must return a signal = true before the algo goes to second for loop. and if signal is not true algo takes on no trade. I have my brief code below but does not seem to work as I am getting a syntax error (probably because setting signal =True) doesn&#39;t make sense. Any idea as to how I can create this? Basically how can I tell the system that the second for loop only happens if the signal from the first is a true value? Thanks for the help as always!</p>

<h4>first for loop</h4>

<p>for security, signal in context.signalshort.items():  # screen for signal generated in before trading starts function for shorting based on 50ma below 200ma<br>
       if signal and (security not in context.portfolio.positions) and (security in context.shorts.index):<br>
            signal = True<br>
            continue  </p>

<pre><code>   if (not signal) and (security in context.portfolio.positions):  
      if data.can_trade(security) and security not in context.security_list: # if stock is available to be traded and not restricted, but it is not in the context.security_list for longs and shorts, exit out of position. # Recall context.security_list is a list of our long and short baskets  
         order_target_percent(security, 0)  
</code></pre>

<h6># second for loop (to only happen if signal is returned as true from first for loop)</h6>

<pre><code>for security in context.shorts.index and (signal = True): # for stocks pulled in the indexing for short positions only  
      if get_open_orders(security): #shows a list of all open short orders for a particular stock  
             continue # put in order  
      if data.can_trade(security): # checks to see if the stock is available to be traded and not restricted  
             order_target_percent(security, -context.shorts[security])  
</code></pre>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58d153cf7627c5699b643cd9' id='58d153cf7627c5699b643cd9'>
<a href='#58d153cf7627c5699b643cd9'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/556675f3f33e8953ae0003c7'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/beb0dadad0d564c32346b21296d91b2f?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/556675f3f33e8953ae0003c7'>Eric Bell </a>
</div>
<a UTCms='1490113487000' class='quanto-date posted-at response-posted-at' href='#58d153cf7627c5699b643cd9'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>My recommendation would be to avoid using a for loop. Are you trying to have longs and shorts? If you want to do a moving average crossover strategy I would use  pipeline.  </p>

<h1>Conditional Statements, Added Moving Average crossover,</h1>

<pre><code>    mean_50 = SimpleMovingAverage(inputs=[USEquityPricing.close], window_length=50)  
    mean_200 = SimpleMovingAverage(inputs=[USEquityPricing.close], window_length=200)  
    ma_cross = mean_50&gt;mean_200
</code></pre>

<p>Then use set screen if you are long only, I am not quite sure how you would do it if you had shorts. </p>

<p>pipe=Pipeline(<br>
        columns={&quot;fin_health&quot;: fin_health ,<br>
                 },<br>
            screen= (spy &amp; eps &amp; div  &amp; pe &amp; ma_cross)  </p>

<pre><code>       )  

    attach_pipeline(pipe,&#39;my_pipeline&#39;)  
</code></pre>

<p>Not quite sure  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58d154f37627c5768d643c4b' id='58d154f37627c5768d643c4b'>
<a href='#58d154f37627c5768d643c4b'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5847522904d4c600150003f9'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/bf91c4231625f9896145a877ea25eab9?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5847522904d4c600150003f9'>Sam Khorsand</a>
</div>
<a UTCms='1490113779000' class='quanto-date posted-at response-posted-at' href='#58d154f37627c5768d643c4b'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Yes worked out something very similar to that. Thanks for your help Eric!  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58d158337627c5768d643c8d' id='58d158337627c5768d643c8d'>
<a href='#58d158337627c5768d643c8d'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/556675f3f33e8953ae0003c7'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/beb0dadad0d564c32346b21296d91b2f?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/556675f3f33e8953ae0003c7'>Eric Bell </a>
</div>
<a UTCms='1490114611000' class='quanto-date posted-at response-posted-at' href='#58d158337627c5768d643c8d'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>This is a good example of pipeline for longs/short strategy.</p>

<p><a href="https://www.quantopian.com/posts/long-short-pipeline-multi-factor">https://www.quantopian.com/posts/long-short-pipeline-multi-factor</a>  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58d15c398eabab7292798e46' id='58d15c398eabab7292798e46'>
<a href='#58d15c398eabab7292798e46'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5847522904d4c600150003f9'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/bf91c4231625f9896145a877ea25eab9?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5847522904d4c600150003f9'>Sam Khorsand</a>
</div>
<a UTCms='1490115641000' class='quanto-date posted-at response-posted-at' href='#58d15c398eabab7292798e46'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Eric,</p>

<p>I actually saw this; its a great example and I took away a lot from it. There are a couple specific things going on in this example though that have me confused. Maybe you could add some clarification if you have  a moment:</p>

<ol>
<li>It seems that 4 factors are being passed through; however why is the code filtering specifically only on &#39;Momentum&#39; being &gt;1 or &lt;1 when it is creating what it calls to be  the actual long and short baskets (or long.index and short.index) that eventually create the union for context.security_list? </li>
</ol>

<p>And then it goes to rank them after checking for whether Momentum is &gt;1 or &lt;1. Does this mean Momentum has more &#39;weight&#39; than volatility, value, and quality in the code and is the driving factor? I am just confused that if Momentum is the driver to create the actual long and short baskets (or indexes) that the author refers to, then what is the purpose of even having the other three factors in there? Do they not serve weight to the pipeline screen? I just do not see their relevance if Momentum is driving the ranks of the long and short baskets that create the ultimate context.security_list </p>

<ol>
<li>And secondly, when the trades are being triggered for both long and short side, the author used Order Target Percentage. However, for this particular example, how much of each stock is actually being longed or short when a signal occurs to put a trade on? I know what the definition of Order Target Percentage is (in that If there is no existing position in the security, an order is placed for the full target percentage, equivalent to a % value of entire portfolio (cash + open positions). If there is a position in the security, an order is placed for the difference between the target percent and the current percent. Placing a negative target percent order will result in a short position equal to the negative target percent.).</li>
</ol>

<p>However I am confused on how many actual shares are being added or shorted in this code for each signal that occurs? And specifically when the algo knows when to not long or short (if it is at capacity). </p>

<p>Any clarification on these would be greatly appreciated. And I cannot thank you enough for the guidance; I am relatively new to coding in Python (however have found a tremendous passion in doing it). I really enjoy it and am still learning. Any insight on these two points is greatly appreciated. Thanks again Eric, and hope you have a great rest of your day.</p>

<p>Sam  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58d173c764a6bb000de4f62f' id='58d173c764a6bb000de4f62f'>
<a href='#58d173c764a6bb000de4f62f'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/556675f3f33e8953ae0003c7'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/beb0dadad0d564c32346b21296d91b2f?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/556675f3f33e8953ae0003c7'>Eric Bell </a>
</div>
<a UTCms='1490121671000' class='quanto-date posted-at response-posted-at' href='#58d173c764a6bb000de4f62f'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><ol>
<li> 
It&#39;s a momentum strategy. You take the mom=ma_long/ma_short. If mom less then 1, it gives a short signal. He only wants to rank stocks to short if the momentum is less than 1. Similarly he only wants to long if mom greater then 1.  He then ranks given these conditions. He calls all of the conditions in initialize.</li>
</ol>

<p>def initialize(context):<br>
    pipe = Pipeline()<br>
    pipe = attach_pipeline(pipe, name=&#39;factors&#39;)<br>
 He attaches all four to the pipeline and calls them factors. </p>

<p>He uses them when he puts them into results. And then ranks each of the factors by taking the axis=1 mean which is horizontal. Axis=0 is vertical.</p>

<h1>Compute final rank and assign long and short baskets.</h1>

<p>def before_trading_start(context, data):<br>
    results = pipeline_output(&#39;factors&#39;).dropna()<br>
    ranks = results.rank().mean(axis=1).order()  </p>

<ol>
<li> 
This line of code puts each of the stocks in a dictionary file.<br>
context.security_list = context.longs.index.union(context.shorts.index).tolist()<br></li>
</ol>

<p>Then he can say </p>

<pre><code>for security in context.shorts.index:  
    if get_open_orders(security):  
        continue  
    if data.can_trade(security):  
        order_target_percent(security, -context.shorts[security])  

for security in context.longs.index:  
    if get_open_orders(security):  
        continue  
    if data.can_trade(security):  
        order_target_percent(security, context.longs[security])  
</code></pre>

<p>Something that confused me, is the before_trading_start function does not have to be before the initialize. I would probably switch it the other way. So he creates the pipeline in initialize and the weights in before_trading_start. </p>

<p>This is how he gets the weights for how many longs or shorts.I am not sure what /= means? </p>

<pre><code>context.shorts /= context.shorts.sum()  

context.longs /= context.longs.sum()  
</code></pre>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58d17f7a0d7817000a27da2d' id='58d17f7a0d7817000a27da2d'>
<a href='#58d17f7a0d7817000a27da2d'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5847522904d4c600150003f9'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/bf91c4231625f9896145a877ea25eab9?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5847522904d4c600150003f9'>Sam Khorsand</a>
</div>
<a UTCms='1490124666000' class='quanto-date posted-at response-posted-at' href='#58d17f7a0d7817000a27da2d'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Eric, </p>

<p>Yes you are right about him leaving before trading start out of initialize. That didn&#39;t make sense to me either.<br>
I understand what you mean when you say the context.shorts and context.longs gets weights for how many longs or shorts. </p>

<p>What still confuses me on this code though is when he calls Order_target_percentage for longs and shorts, how do we know (based on our portfolio capital amount) how many shares to long or short for each of the weights created in the long and short indexes we create? I get that the .index creates the weights for each long or short in the day before trading start function. However, once we have those weights, I do not understand how the program knows immediately how many shares to long and short each day in the &#39;rebalance&#39; function? That is what is confusing me most I think........  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58d1989234c52c4f2f41e480' id='58d1989234c52c4f2f41e480'>
<a href='#58d1989234c52c4f2f41e480'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/556675f3f33e8953ae0003c7'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/beb0dadad0d564c32346b21296d91b2f?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/556675f3f33e8953ae0003c7'>Eric Bell </a>
</div>
<a UTCms='1490131090000' class='quanto-date posted-at response-posted-at' href='#58d1989234c52c4f2f41e480'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>This is how he gets the weights for how many longs or shorts.I am not sure what /= means?</p>

<p>context.shorts /= context.shorts.sum()  </p>

<p>context.longs /= context.longs.sum()  </p>

<p>Every function in quantopian is usually a function of context and data. You can say context.shorts, and since all the functions have context it knows those are the shorts. If he said notaparameter.shorts , it wouldn&#39;t know the function. Only really good programmers usually make functions with other parameters. </p>

<p>def before_trading_start(context, data):</p>

<p>def handle_data(context, data):  </p>

<p>def cancel_open_orders(context, data):  </p>

<p>def rebalance(context, data):  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58d1a333b6a061264fb760a5' id='58d1a333b6a061264fb760a5'>
<a href='#58d1a333b6a061264fb760a5'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5847522904d4c600150003f9'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/bf91c4231625f9896145a877ea25eab9?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5847522904d4c600150003f9'>Sam Khorsand</a>
</div>
<a UTCms='1490133811000' class='quanto-date posted-at response-posted-at' href='#58d1a333b6a061264fb760a5'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Ok that makes sense. </p>

<p>But for his particular example when he specifically calls &#39;Order_Target_Percentage&#39; for either shorts or longs (whichever), how does order_target_percentage in this particular code know exactly how much money is available to either buy or short a name, and how many shares does it know to do so? I mean if I defined order_target_percentage in the code to be 0.30 for example, I assume it means to tell the code never have more than 30% of portfolio in one stock (on long or short side). So for this case, no specific order_target_percentage was assigned; thus I am not clear how it knows how many shares of one particular name to long or short when there is a signal to do so?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58d1be2d8ace685189cbf162' id='58d1be2d8ace685189cbf162'>
<a href='#58d1be2d8ace685189cbf162'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/556675f3f33e8953ae0003c7'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/beb0dadad0d564c32346b21296d91b2f?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/556675f3f33e8953ae0003c7'>Eric Bell </a>
</div>
<a UTCms='1490140717000' class='quanto-date posted-at response-posted-at' href='#58d1be2d8ace685189cbf162'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I am unexperienced with this type of weighting structure, but it seems better. In the past they have been equally weighted portfolios.<br>
If my leverage is 1.0 and I have 10 stocks in my basket. I used to take 1.0/10 for 0.10 portfolio weight. </p>

<p>Here is the link to the thread on the weighting</p>

<p><a href="https://www.quantopian.com/posts/what-is-this-slash-equals-for-portfolio-weighting?utm_campaign=what-is-this-slash-equals-for-portfolio-weighting&amp;utm_medium=email&amp;utm_source=forums">https://www.quantopian.com/posts/what-is-this-slash-equals-for-portfolio-weighting?utm_campaign=what-is-this-slash-equals-for-portfolio-weighting&amp;utm_medium=email&amp;utm_source=forums</a>  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58d1c1c4b6a0611f16b75d14' id='58d1c1c4b6a0611f16b75d14'>
<a href='#58d1c1c4b6a0611f16b75d14'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/556675f3f33e8953ae0003c7'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/beb0dadad0d564c32346b21296d91b2f?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/556675f3f33e8953ae0003c7'>Eric Bell </a>
</div>
<a UTCms='1490141636000' class='quanto-date posted-at response-posted-at' href='#58d1c1c4b6a0611f16b75d14'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>If you put a print after context.longs, you can see the weights. It is equally weighted at 1/200 for the longs and 1/200 for the shorts making the leverage approximately 2.0.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58d1d1b1ce89e9000d114335' id='58d1d1b1ce89e9000d114335'>
<a href='#58d1d1b1ce89e9000d114335'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5847522904d4c600150003f9'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/bf91c4231625f9896145a877ea25eab9?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5847522904d4c600150003f9'>Sam Khorsand</a>
</div>
<a UTCms='1490145713000' class='quanto-date posted-at response-posted-at' href='#58d1d1b1ce89e9000d114335'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>That makes sense I think. I assume that is what the .head(200) for the context.shorts references and the .tail(200) for the context.longs references?</p>

<p>What else is bizzare though is is why is context.shorts being divided by &#39;1&#39;, whereby context.longs is not? See below:</p>

<p>context.shorts = 1 / ranks[results[&quot;momentum&quot;] &lt; 1].head(200)<br>
context.longs = ranks[results[&quot;momentum&quot;] &gt; 1].tail(200)  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58d28ba48ace681fe2cbeebb' id='58d28ba48ace681fe2cbeebb'>
<a href='#58d28ba48ace681fe2cbeebb'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/556675f3f33e8953ae0003c7'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/beb0dadad0d564c32346b21296d91b2f?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/556675f3f33e8953ae0003c7'>Eric Bell </a>
</div>
<a UTCms='1490193316000' class='quanto-date posted-at response-posted-at' href='#58d28ba48ace681fe2cbeebb'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Not quite sure, I think it has something to do with the weighting and the momentum being less than 1.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5cd249375f6b2d39616afb58' id='5cd249375f6b2d39616afb58'>
<a href='#5cd249375f6b2d39616afb58'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5c082dc0e7860d004a3af258'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/4a17eab4852c1636633395e848291874?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5c082dc0e7860d004a3af258'>Tomas G</a>
</div>
<a UTCms='1557285175000' class='quanto-date posted-at response-posted-at' href='#5cd249375f6b2d39616afb58'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Who test in live ?  </p>
</div>
</div>
</div>

</div>
<div class='sign-in-please'>
Please <a href='/signin?return_to=/posts/quantopian-algorithm-ema-and-rsi-indicators'>sign in</a> or
<a href='/users/sign_up?redirect_to=/posts/quantopian-algorithm-ema-and-rsi-indicators'>join Quantopian</a> to
post a reply.
</div>
</div>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId: "550580758292093",
      status: false,
      cookie: true,
      xfbml: true
    });
  };
  
  (function(d, debug){
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) {return;}
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
    ref.parentNode.insertBefore(js, ref);
  }(document, /*debug*/ false));
  
  window.twttr = (function (d,s,id) {
    var t, js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return; js=d.createElement(s); js.id=id;
    js.src="//platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs);
    return window.twttr || (t = { _e: [], ready: function(f){ t._e.push(f) } });
  }(document, "script", "twitter-wjs"));
</script>
<script>
  $(document).ready(function () {
    quanto.instances.pm = new quanto.PostManager(false)
  });
</script>

<div class='login-footer'>
<div class='container'>
<div class='login-footer-text'>
Become an expert in quant finance through Quantopian's hands-on education.
</div>
<div class='login-footer-button'>
<button class='btn btn-v2 stroke join-modal-link mixpanel-button' data-event='anon join footer click posts' data-mixpanel='click'>
Join Now
</button>
</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='error-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'>Error</span>
</div>
<div class='modal-body body-content'>
<p>Sorry, something went wrong.  Try again or contact us by <a class='feedback-link'>sending feedback</a>.</p>
</div>
<div class='modal-footer'>
<button class='btn btn-v2 blue action-button' data-dismiss='modal' href='#'>Close</button>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='confirmation-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'></span>
</div>
<div class='modal-body body-content'></div>
<div class='modal-footer'>
<div class='pull-right'>
<button class='btn btn-v2 border' data-dismiss='modal'>Cancel</button>
<button class='btn btn-v2 blue action-button' data-dismiss='modal'></button>
</div>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='message-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'></span>
</div>
<div class='modal-body body-content'></div>
<div class='modal-footer'>
<button class='btn btn-v2 blue action-button' data-dismiss='modal' id='message-modal-close'>Close</button>
</div>

</div>
</div>
</div>

<div class='always-bootstrap3-modals'>
<div class='fade modal quanto-modal-v2' id='join-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header visible-small'>
<span class='title'>
Join Quantopian.  It's Free!
</span>
<div class='modal-x-out visible-xs'></div>
</div>
<div class='modal-body'>
<div class='flex-wrap'>
<div class='join-left-pane hidden-small'>
<div class='margin_30l'>
<div class='join-hero-text'>
Join Quantopian.  It's Free!
</div>
<div class='join-benefits'>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image code'></div>
</div>
<div class='join-text'>
Use our research platform, backtester, and dozens of clean data sets.
</div>
</div>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image learn'></div>
</div>
<div class='join-text'>
Learn with our hands-on education and community forums.
</div>
</div>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image win'></div>
</div>
<div class='join-text'>
Enter to win cash prizes in our contest.
</div>
</div>
</div>
<div class='hidden saved-reminder'>
Don't worry, all your work is already saved.
</div>
</div>
</div>
<div class='join-right-pane'>
<div class='hidden-small'>
<div class='button-pane'>
<a class="button btn-v2 user-form-btn" href="/signin">Already a Quantopian member?</a>
</div>
</div>
<div class='visible-small'>
<div class='already-member'>
<a href='/signin'>Already a Quantopian member?</a>
</div>
</div>
<form class="quanto-form-v2" id="new-user-modal-form" action="/users" accept-charset="UTF-8" data-remote="true" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><div class='error-message hidden'>
<div class='message'></div>
</div>
<div class='name-group'>
<div class='form-group inline-block'>
<label for="user_firstname">First Name</label>
<input class="form-control firstname" pattern=".*" required="required" autocomplete="off" autofocus="autofocus" type="text" name="user[firstname]" id="user_firstname" />
</div>
<div class='form-group inline-block'>
<label for="user_lastname">Last Name</label>
<input class="form-control" value="" pattern=".*" required="required" autocomplete="off" type="text" name="user[lastname]" id="user_lastname" />
</div>
</div>
<div class='form-group'>
<label for="user_email">Email</label>
<input class="form-control" value="" pattern=".*" required="required" autocomplete="off" type="email" name="user[email]" id="user_email" />
</div>
<div class='form-group'>
<label for="user_password">Password</label>
<input autocomplete="off" class="form-control" pattern=".*" required="required" type="password" name="user[password]" id="user_password" />
</div>
<div class='checkbox eula'>
<input id='eula-checkbox' type='checkbox'>
<div class='quanto-checkbox'></div>
<label for='eula-checkbox' id='checkbox-label'>I accept the <a href='/policies/terms' target='_blank'>Terms Of Use</a> and <a href='/policies/privacy' target='_blank'>Privacy Policy</a>.</label>
</div>
<div class='checkbox mailchimp-box'>
<input name="user[allow_marketing_emails]" type="hidden" value="0" /><input type="checkbox" value="1" name="user[allow_marketing_emails]" id="user_allow_marketing_emails" />
<div class='quanto-checkbox'></div>
<label for='user_allow_marketing_emails'>
Send me email updates with the latest news from the Quantopian community. We send these emails about once a month.
</label>
</div>
<div class='button-row'>
<button class='btn-v2 blue full' data-redirect-to='/tutorials/getting-started' id='sign-up-button' type='Submit'>Join Quantopian</button>
</div>
</form></div>
</div>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='feedback-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title'>Contact Support</span>
</div>
<div class='modal-body'>
<form class='anon-user controls quanto-form-v2' id='feedback-form'>
<div class='feedback-inputs'>
<div class='form-group'>
<input autofocus class='form-control' id='feedback-email-box' name='email' placeholder='Email Address' type='email'>
</div>
<div class='form-group'>
<input class='form-control' id='feedback-name-box' placeholder='Name' type='name'>
</div>
<div class='form-group'>
<textarea class='form-control' id='feedback-box' name='feedback' placeholder='What may we help you with?' rows='10'></textarea>
</div>
</div>
</form>
<form class='hidden quanto-form-v2 select-resource-area'>
<div class='select-step select-type-step'>
<div class='form-group'>
<select class='form-control select-resource-dropdown' title='Select the item you need help with'>
<option value='algorithm'>Algorithm</option>
<option value='backtest'>Backtest</option>
<option value='notebook'>Notebook</option>
</select>
</div>
</div>
<div class='select-step loading-area hidden'>
<div class='loading-text'>
Loading...
</div>
</div>
<div class='select-step empty-list-area hidden'>
<div class='back-button'>Go Back</div>
<div class='empty-text'>
No <span class='empty-list-resource-text'>algorithms</span> found
</div>
</div>
<div class='select-algo-area select-step hidden'>
<div class='back-button'>Go Back</div>
<table class='select-algo-table select-item-table'>
<thead>
<tr>
<th>
Algorithm
<span class='sort-icon'></span>
</th>
<th>
Last Modified
<span class='sort-icon'></span>
</th>
</tr>
</thead>
</table>
</div>
<div class='select-backtest-area select-step hidden'>
<div class='back-button'>Go Back</div>
<table class='select-backtest-table select-item-table'>
<thead>
<tr>
<th>
Backtest
<span class='sort-icon'></span>
</th>
<th>
Started At
<span class='sort-icon'></span>
</th>
<th>
Overall Return
<span class='sort-icon'></span>
</th>
<th>
Status
<span class='sort-icon'></span>
</th>
</tr>
</thead>
</table>
</div>
<div class='select-notebook-area select-step hidden'>
<div class='back-button'>Go Back</div>
<div class='subtitle select-cell-step'>
Choose a cell to use as the preview for this notebook:
</div>
<div class='iframe-wrapper'>
<iframe class='notebook-list-iframe slow-fade' src=''></iframe>
</div>
<div class='progress-area slow-fade in'>
<div class='progress-container'>
<div class='progress-title'>
<div class='quanto-loader gray'></div>
</div>
</div>
</div>
<div class='maintenance-area'>
<div class='error-container'>
<div class='row'>
<div class='col-md-14 msg-title h1'>
Sorry, research is currently undergoing maintenance.
</div>
</div>
<div class='row'>
<div class='col-md-14 msg-subtitle'>
Please check back shortly. If the maintenance period lasts longer than expected,
you can find updates on <a href='https://status.quantopian.com/'>status.quantopian.com</a>.
</div>
</div>

</div>
</div>
<div class='error-area'>
<div class='error-container'>
<div class='row'>
<div class='col-md-14 msg-title h1'>
Sorry, something went wrong on our end.
</div>
</div>
<div class='row'>
<div class='col-md-14 msg-subtitle'>
Please try again or contact <a class='open-feedback-link'>Quantopian support</a>.
</div>
</div>

</div>
</div>

</div>
<div class='selected-item-area select-step hidden'>
<div class='selected-item-group form-group'>
<div class='selected-item-control'>
<input class='disabled form-control selected-item-box' type='text'>
<span class='secure-icon icon'></span>
<button class='btn change change-primary-item-button change-selection-button new-btn transparent' type='button'>
<span class='refresh-icon icon'></span>
</button>
</div>
<div class='selected-backtest-control'>
<input class='disabled form-control selected-backtest-box' type='text'>
<span class='secure-icon icon'></span>
<button class='btn change-backtest-button change-selection-button new-btn transparent' type='button'>
<span class='refresh-icon icon'></span>
</button>
</div>
</div>
<div class='checkbox-group form-group'>
<div class='checkbox give-permission'>
<input class='give-permission-checkbox' id='feedback-give-permission-checkbox' type='checkbox'>
<div class='quanto-checkbox'></div>
<label for='feedback-give-permission-checkbox'>
I permit Quantopian to view <span class='item-type-text'>this algorithm,
backtest or notebook and their imported datasets</span> for the purpose of providing support.
</label>
</div>
</div>
</div>
</form>

<div class='loading-step hidden'>
<div class='loading-text'>
Submitting your support ticket...
</div>
</div>
<div class='success-step invisible'>
<h2 class='title center'>
You've successfully submitted a support ticket.
</h2>
<p>
Our support team will be in touch soon.
</p>
<div class='confirmation-image'></div>
</div>
</div>
<div class='modal-footer'>
<button class='btn-v2 blue' id='send-feedback-button'>Send</button>
<div class='error-message hidden'>
Error submitting support request.
</div>
</div>

</div>
</div>
</div>

</div>
</div>
<div class='footer' id='quanto-footer-container'>
<div class='container'>
<div class='row header-row'>
<div class='col-sm-fourth span3'>
<img class='async-image logotype-image' data-src='https://qf.quantopian.com/assets/logos/logo-q-full-b23bda5ac757691b9259d396d0dfef91567165868b8c955a836649686e6d2248.svg'>
</div>
<div class='col-sm-fourth span3'></div>
<div class='col-sm-fourth span3'></div>
<div class='col-sm-fourth span3'>
<div class='feedback-email'>
Need help?
<a href="/cdn-cgi/l/email-protection#583e3d3d3c3a393b3318292d39362c3728313936763b3735">Contact support.</a>
</div>
</div>
</div>
<div class='row'>
<div class='col-sm-fourth span3'>
<div class='header'>Company</div>
<div class='footer-row'>
<a href='/about'>About</a>
</div>
<div class='footer-row'>
<a href='/academia'>Academia</a>
</div>
<div class='footer-row'>
<a href='/jobs'>Careers</a>
</div>
<div class='footer-row'>
<a href='/posts'>Community</a>
</div>
<div class='footer-row'>
<a href='/events'>Events</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Learn &amp; Support</div>
<div class='footer-row'>
<a href='/faq'>FAQ</a>
</div>
<div class='footer-row'>
<a href='/tutorials/getting-started'>Getting Started</a>
</div>
<div class='footer-row'>
<a href='/docs'>Documentation</a>
</div>
<div class='footer-row'>
<a href='/tutorials'>Tutorials</a>
</div>
<div class='footer-row'>
<a href='/lectures'>Lectures</a>
</div>
<div class='footer-row'>
<a href='/opensource'>Open Source</a>
</div>
<div class='footer-row'>
<a href='https://status.quantopian.com/'>Site Status</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Notices</div>
<div class='footer-row'>
<a href='/policies/terms'>Terms of Use</a>
</div>
<div class='footer-row'>
<a href='/policies/privacy'>Privacy Policy</a>
</div>
<div class='footer-row'>
<a href='/security'>Security</a>
</div>
<div class='footer-row'>
<a href='/policies/code-of-conduct'>Code of Conduct</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Follow Us</div>
<div class='footer-row'>
<a href='https://www.twitter.com/quantopian'>Twitter</a>
</div>
<div class='footer-row'>
<a href='https://www.facebook.com/quantopian'>Facebook</a>
</div>
<div class='footer-row'>
<a href='https://www.linkedin.com/company/quantopian'>LinkedIn</a>
</div>
<div class='footer-row'>
<a href='https://www.youtube.com/channel/UC606MUq45P3zFLa4VGKbxsg'>YouTube</a>
</div>
</div>
</div>
<div class='row'>
<div class='col-xs-14 span12'>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian.
</p>
<p>
In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>

</div>
</div>
</div>
</div>
</div>
<div class='mobile-footer'>
<div class='mobile-nav-category main-links'>
<div class='mobile-nav-row-footer'>
<a href='/about'>About Quantopian</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/jobs'>Careers</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/posts'>Community</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/events'>Events</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/docs'>Documentation</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/academia'>Academia</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/lectures'>Lectures</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://status.quantopian.com/'>Status</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.facebook.com/quantopian'>Facebook</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.twitter.com/quantopian'>Twitter</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.linkedin.com/company/quantopian'>LinkedIn</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.youtube.com/channel/UC606MUq45P3zFLa4VGKbxsg'>YouTube</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/policies/terms'>Terms of Use</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/policies/privacy'>Privacy Policy</a>
</div>
</div>
<div class='mobile-nav-category'>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian.
</p>
<p>
In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>

</div>
</div>
</div>

</div>
<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script></body>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', "UA-8519877-1", {
    cookieDomain: "quantopian.com"
  });
  ga('set', 'dimension1', 'session_5f9dc7425d387f00077e48e4');
  
  ga('send', 'pageview');
</script>

<input type="hidden" name="is_mac" id="is_mac" value="false" />
<input type="hidden" name="mp" id="mp" value="75873953cd404bcc1da88a55ff51e3b4" />
<script>
  (function(e,a){if(!a.__SV){var b=window;try{var c,l,i,j=b.location,g=j.hash;c=function(a,b){return(l=a.match(RegExp(b+"=([^&]*)")))?l[1]:null};g&&c(g,"state")&&(i=JSON.parse(decodeURIComponent(c(g,"state"))),"mpeditor"===i.action&&(b.sessionStorage.setItem("_mpcehash",g),history.replaceState(i.desiredHash||"",e.title,j.pathname+j.search)))}catch(m){}var k,h;window.mixpanel=a;a._i=[];a.init=function(b,c,f){function e(b,a){var c=a.split(".");2==c.length&&(b=b[c[0]],a=c[1]);b[a]=function(){b.push([a].concat(Array.prototype.slice.call(arguments,
  0)))}}var d=a;"undefined"!==typeof f?d=a[f]=[]:f="mixpanel";d.people=d.people||[];d.toString=function(b){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);b||(a+=" (stub)");return a};d.people.toString=function(){return d.toString(1)+".people (stub)"};k="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
  for(h=0;h<k.length;h++)e(d,k[h]);a._i.push([b,c,f])};a.__SV=1.2;b=e.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";c=e.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}})(document,window.mixpanel||[]);
  mixpanel.init("75873953cd404bcc1da88a55ff51e3b4");
</script>
<script>
  mixpanel.track("view page", {"page": window.location.pathname});
</script>
</html>
