<!DOCTYPE html>
<html>
<head>
<link href='i1.wp.com' rel='dns-prefetch'>
<link href='i2.wp.com' rel='dns-prefetch'>
<link href='i3.wp.com' rel='dns-prefetch'>
<meta content='2HgX9mcLHaPOX6sfaaAkhWtblhEB9yUNw4l6l46e1k4' name='google-site-verification'>
<link rel="shortcut icon" type="image/x-icon" href="external/favicon-q-ac1a76f2c200e9026b5b1147519bb4fab6256910588b831e2411bc6c7c1218c3.png" />
<title>
Trying on for size: a technical framework
</title>
<meta content='Attached below (so that I may replace it with updates as I see fit) is a simple framework for technical type strategies.The various parts are divided into discrete code blocks that are added to the logic tree using schedule_function.The entry mechanism uses a simple additive trigger mechanism. If all of the technical metrics have signaled an entry, an entry will occur.It&#39;s setup to expand security wise for set universe or update universe, and to switch to use minutely as desired.Logic tree: ...' name='description'>
<link rel="stylesheet" media="all" href="external/quanto-base-bundle-e8eb6050172aa0d24124d5c24bac90b2cccd88b5b9c7742026c0e9efab038c6e.css" />
<link rel="stylesheet" media="all" href="external/quanto-posts-bundle-aab01368d3f82d8dafc94ee9eabb82e77dc8c9fbbffa952fdcdc744dfa523cf3.css" />
<script src="external/quanto_global-057218867db29d5768131af5d6fb3476cef098e7d9e655108befb903c7ee985e.js"></script>
<script src="external/posts_bundle-3dfd82fa469c393d752e461d837aec9e4e364ae39f49198e34a6626f2180fdf7.js"></script>
<link href='external/logo-q-180x180-0f5a6a439c99203ed4aea6f656e7604c543d287be43d8b17c7591c1131f09a59.png' rel='apple-touch-icon'>
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="5WaYMndynmsWZ0jsOyAGLs+gkR4WnXBtkVFeFmSiv1+ZAO5/1YRMiK96Ed10z65a9y6yd2xRZXYTXoV8zufd5A==" />
<meta content='width=device-width, initial-scale=1.0' name='viewport'>
<script>
//<![CDATA[
window.quanto_data={};quanto_data.bounce_back_params={"show_modal":null,"feedback_text":null};quanto_data.namespace="public";quanto_data.talib_info={"ADOSC":["Chaikin A/D Oscillator (Volume Indicators)",["fastperiod","3"],["slowperiod","10"]],"ADX":["Average Directional Movement Index (Momentum Indicators)",["timeperiod","14"]],"ADXR":["Average Directional Movement Index Rating (Momentum Indicators)",["timeperiod","14"]],"APO":["Absolute Price Oscillator (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["matype","0"]],"AROON":["Aroon (Momentum Indicators)",["timeperiod","14"]],"AROONOSC":["Aroon Oscillator (Momentum Indicators)",["timeperiod","14"]],"ATR":["Average True Range (Volatility Indicators)",["timeperiod","14"]],"BBANDS":["Bollinger Bands (Overlap Studies)",["timeperiod","5"],["nbdevup","2"],["nbdevdn","2"],["matype","0"]],"BETA":["Beta (Statistic Functions)",["timeperiod","5"]],"CCI":["Commodity Channel Index (Momentum Indicators)",["timeperiod","14"]],"CMO":["Chande Momentum Oscillator (Momentum Indicators)",["timeperiod","14"]],"CORREL":["Pearson's Correlation Coefficient (r) (Statistic Functions)",["timeperiod","30"]],"DEMA":["Double Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"DX":["Average Directional Movement Index (Momentum Indicators)",["timeperiod","14"]],"EMA":["Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"KAMA":["Kaufman Adaptive Moving Average (Overlap Studies)",["timeperiod","30"]],"LINEARREG":["Linear Regression (Statistic Functions)",["timeperiod","14"]],"LINEARREG_ANGLE":["Linear Regression Angle (Statistic Functions)",["timeperiod","14"]],"LINEARREG_INTERCEPT":["Linear Regression Intercept (Statistic Functions)",["timeperiod","14"]],"LINEARREG_SLOPE":["Linear Regression Slope (Statistic Functions)",["timeperiod","14"]],"MA":["Moving average (Overlap Studies)",["timeperiod","30"],["matype","0"]],"MACD":["Moving Average Convergence/Divergence (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["signalperiod","9"]],"MACDEXT":["MACD with controllable MA type (Momentum Indicators)",["fastperiod","12"],["fastmatype","0"],["slowperiod","26"],["slowmatype","0"],["signalperiod","9"],["signalmatype","0"]],"MACDFIX":["Moving Average Convergence/Divergence Fix 12/26 (Momentum Indicators)",["signalperiod","9"]],"MAX":["Highest values over a specified period (Math Operators)",["timeperiod","30"]],"MAXINDEX":["Index of highest value over a specified period (Math Operators)",["timeperiod","30"]],"MFI":["Money Flow Index (Momentum Indicators)",["timeperiod","14"]],"MIDPOINT":["Midpoint over period (Overlap Studies)",["timeperiod","14"]],"MIDPRICE":["Midpoint Price over period (Overlap Studies)",["timeperiod","14"]],"MIN":["Lowest value over a specified period (Math Operators)",["timeperiod","30"]],"MININDEX":["Index of lowest value over a specified period (Math Operators)",["timeperiod","30"]],"MINMAX":["Lowest and highest values over a specified period (Math Operators)",["timeperiod","30"]],"MINMAXINDEX":["Indexes of lowest and highest values over a specified period (Math Operators)",["timeperiod","30"]],"MINUS_DI":["Minus Directional Indicator (Momentum Indicators)",["timeperiod","14"]],"MINUS_DM":["Minus Directional Movement (Momentum Indicators)",["timeperiod","14"]],"MOM":["Momentum (Momentum Indicators)",["timeperiod","10"]],"NATR":["Normalized Average True Range (Volatility Indicators)",["timeperiod","14"]],"PLUS_DI":["Plus Directional Indicator (Momentum Indicators)",["timeperiod","14"]],"PLUS_DM":["Plus Directional Movement (Momentum Indicators)",["timeperiod","14"]],"PPO":["Percentage Price Oscillator (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["matype","0"]],"ROC":["Rate of change: ((price/prevPrice)-1)*100 (Momentum Indicators)",["timeperiod","10"]],"ROCP":["Rate of change Percentage: (price-prevPrice)/prevPrice (Momentum Indicators)",["timeperiod","10"]],"ROCR":["Rate of change ratio: (price/prevPrice) (Momentum Indicators)",["timeperiod","10"]],"ROCR100":["Rate of change ratio 100 scale: (price/prevPrice)*100 (Momentum Indicators)",["timeperiod","10"]],"RSI":["Relative Strength Index (Momentum Indicators)",["timeperiod","14"]],"SMA":["Simple Moving Average (Overlap Studies)",["timeperiod","30"]],"STDDEV":["Standard Deviation (Statistic Functions)",["timeperiod","5"],["nbdev","1"]],"STOCH":["Stochastic (Momentum Indicators)",["fastk_period","5"],["slowk_period","3"],["slowk_matype","0"],["slowd_period","3"],["slowd_matype","0"]],"STOCHF":["Stochastic Fast (Momentum Indicators)",["fastk_period","5"],["fastd_period","3"],["fastd_matype","0"]],"STOCHRSI":["Stochastic Relative Strength Index (Momentum Indicators)",["timeperiod","14"],["fastk_period","5"],["fastd_period","3"],["fastd_matype","0"]],"T3":["Triple Exponential Moving Average (T3) (Overlap Studies)",["timeperiod","5"],["vfactor","0.7"]],"TEMA":["Triple Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"TRIMA":["Triangular Moving Average (Overlap Studies)",["timeperiod","30"]],"TRIX":["1-day Rate-Of-Change (ROC) of a Triple Smooth EMA (Momentum Indicators)",["timeperiod","30"]],"TSF":["Time Series Forecast (Statistic Functions)",["timeperiod","14"]],"ULTOSC":["Ultimate Oscillator (Momentum Indicators)",["timeperiod1","7"],["timeperiod2","14"],["timeperiod3","28"]],"VAR":["Variance (Statistic Functions)",["timeperiod","5"],["nbdev","1"]],"WILLR":["Williams' %R (Momentum Indicators)",["timeperiod","14"]],"WMA":["Weighted Moving Average (Overlap Studies)",["timeperiod","30"]]};quanto_data.nb_preview_url="https://notebooks-preview.prd.pub.quantopian.com";quanto_data.delay_nb_preview_load=false;
//]]>
</script>
<meta content='https://www.quantopian.com/posts/trying-on-for-size-a-technical-framework' property='og:url'>
<meta content='Trying on for size: a technical framework' property='og:title'>

<input type="hidden" name="env" id="quanto-env" value="production" />
<meta content='550580758292093' property='fb:app_id'>
<meta content='https://www.quantopian.com/posts/trying-on-for-size-a-technical-framework' property='og:url'>
<meta content='https://media.quantopian.com/public/og-image-default.png' property='og:image'>
<meta content='Trying on for size: a technical framework' property='og:title'>
<meta content='Attached below (so that I may replace it with updates as I see fit) is a simple framework for technical type strategies.The various parts are divided into discrete code blocks that are added to the logic tree using schedule_function.The entry mechanism uses a simple additive trigger mechanism. If all of the technical metrics have signaled an entry, an entry will occur.It&#39;s setup to expand security wise for set universe or update universe, and to switch to use minutely as desired.Logic tree: ...' property='og:description'>
</head>
<script type='application/ld+json'>
  {
    "@context": "http://schema.org",
    "@type": "Organization",
    "url": "https://www.quantopian.com",
    "logo": "https://media.quantopian.com/logos/logo-q-press-red.png"
  }
</script>
<body class='' ontouchstart=''>
<div id='fb-root'></div>
<div class='wrapper'>
<div class='alert-v2 error'>
<div class='message'>
Quantopian's community platform is shutting down. Please read <a href="/posts/quantopians-community-services-are-closing">this post</a> for more information and <a href='/account#account'>download your code</a>.
</div>
</div>
<div class='navbar navbar-default navbar-static-top' id='app-navbar'>
<div class='container-fluid'>
<div class='navbar-header'>
<button class='navbar-toggle collapsed' data-target='#app-navbar-collapse' data-toggle='collapse'>
<span class='icon hamburger-menu'></span>
</button>
<a class='navbar-brand' href='/home'>
<img class='logo-image async-image' data-src='external/logo-q-white-b141ea6018546e5a4ecc3d10d8440ec076fc4385764e948b322828cc70950a76.svg'>
</a>
</div>
<div class='collapse navbar-collapse' id='app-navbar-collapse'>
<ul class='nav navbar-nav navbar-right'>
<li class='dropdown quanto-dropdown-new'>
<li>
<a class='header' href='/docs'>
Documentation
</a>
</li>
<li class='dropdown quanto-dropdown-new'>
<a class='header' data-toggle='dropdown' href='#'>
Learn
</a>
<ul class='dropdown-menu'>
<li>
<a class='mixpanel-button' data-event='main nav getting started clicked' href='/tutorials/getting-started'>Getting Started</a>
</li>
<li>
<a class='mixpanel-button' data-event='main nav tutorials clicked' href='/tutorials'>Tutorials</a>
</li>
<li>
<a class='mixpanel-button' data-event='main nav lectures clicked' href='/lectures'>Lectures</a>
</li>
</ul>
</li>
<li>
<a class='header' href='/posts' id='forum-link'>
Forum
</a>
</li>
<li>
<a class="header" href="/signin?return_to=/posts/trying-on-for-size-a-technical-framework">Log In</a>
</li>
</li>

</ul>
</div>
</div>
</div>
<script>
  $(document).ready(function () {
    quanto.instances.fm = new quanto.FeedbackManager();
    quanto.instances.hm = new quanto.headerManager();
  })
</script>


<div class='content content-area new-style'>
<input type="hidden" name="page-id" id="page-id" value="postatomic" />
<script src="external/MathJax.js?config=TeX-AMS_HTML-full.js,Safe" async="async"></script>
<div class='container page-container post-atomic'>
<input id='parent-post-id-val' type='hidden' value='54dd98e172a75eef2100029b'>
<div class='post-container' data-post-id='54dd98e172a75eef2100029b' id='54dd98e172a75eef2100029b'>
<div class='back-button back-to-community'>Back to Community</div>
<div class='post-title'>Trying on for size: a technical framework</div>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/53d46cdb75f57a2832005a6b'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/62b39881ee19f936224017339779d9d4?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/53d46cdb75f57a2832005a6b'>Market Tech</a>
</div>
<span class='posted-at'>edited </span>
<span UTCms='1423854173000' class='quanto-date posted-at'></span>
<div class='pull-right other-actions'>
<div class='dropup inline-block'>
<div class='dropdown share-control other-action-link'>
<div data-toggle='dropdown'>
<div class='share-image'></div>
Share
</div>
<ul class='dropdown-menu share-options-menu'>
<li>
<a class='share-row' href='https://twitter.com/intent/tweet?text=Trying on for size: a technical framework&amp;url=https%3A%2F%2Fwww.quantopian.com%2Fposts%2Ftrying-on-for-size-a-technical-framework%3Futm_source%3Dwebsite_share%26utm_campaign%3Dtrying-on-for-size-a-technical-framework%26utm_medium%3Dtwitter&amp;via=quantopian'>
<i class='icon icon-twitter'></i>
Share on Twitter
</a>
</li>
<li>
<div class='share-row facebook-button'>
<i class='icon icon-facebook'></i>
Share on Facebook
</div>
</li>
<li>
<div class='share-row linkedin-button' data-share-url='https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Fwww.quantopian.com%2Fposts%2Ftrying-on-for-size-a-technical-framework%3Futm_source%3Dwebsite_share%26utm_campaign%3Dtrying-on-for-size-a-technical-framework%26utm_medium%3Dlinkedin&amp;title=Trying+on+for+size%3A+a+technical+framework+%28Market+Tech%29&amp;source=Quantopian'>
<i class='icon icon-linkedin'></i>
Share on LinkedIn
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>

<input type="hidden" name="social_fb_post_link" id="social_fb_post_link" value="https://www.quantopian.com/posts/trying-on-for-size-a-technical-framework?utm_source=website_share&amp;utm_campaign=trying-on-for-size-a-technical-framework&amp;utm_medium=facebook" />
<input type="hidden" name="social_post_image" id="social_post_image" value="external/logo-q-red-outline.png" />
<input type="hidden" name="social_post_author" id="social_post_author" value="Market Tech" />
<div class='body-text'>
<div class='body-text-container post-body'><p>Attached below (so that I may replace it with updates as I see fit) is a simple framework for technical type strategies.<br>
The various parts are divided into discrete code blocks that are added to the logic tree using schedule_function.<br>
The entry mechanism uses a simple additive trigger mechanism. If all of the technical metrics have signaled an entry, an entry will occur.<br>
It&#39;s setup to expand security wise for set universe or update universe, and to switch to use minutely as desired.</p>

<p>Logic tree:  </p>

<pre><code>def initialize(context):  
    context.ZZZ = symbol(&#39;SPY&#39;,&#39;QQQ&#39;,&#39;EFA&#39;,&#39;AGG&#39;,&#39;VNQ&#39;,&#39;GLD&#39;)[0]  
    set_benchmark(context.ZZZ)

    # Establish state  
    schedule_function(EstablishState)

    # Calculate indicators  
    schedule_function(HighestHigh)  
    schedule_function(CalculateLongMA)  
    schedule_function(CalculateRSI)  
    schedule_function(CalculateHMA)  
    schedule_function(CalculateVolatilityVariance)

    # Handle exits  
    schedule_function(PeriodStop)  
    schedule_function(TrailingStop)  
    schedule_function(VolBiasProfitStop)  
    schedule_function(VolatilityStop)

    # Handle entries  
    schedule_function(HandleEntry)

</code></pre>

<p>Entry logic:</p>

<pre><code>def HandleEntry(context, data):  
    eligible = []  
    positions = context.portfolio.positions  
    openPositions = [stock for stock in positions if positions[stock].amount != 0]  
    for stock in context.S:  
        if (context.S[stock].Trigger &gt;= EntryTrigger and stock not in openPositions):  
            eligible.append(stock)

    eligible += openPositions  
    eligibleCount = float(len(eligible))  
    for stock in eligible:  
        if (get_open_orders(stock)):  
            continue  
        if (stock not in openPositions):  
            order_target_percent(stock, 1.0 / eligibleCount)  
            PrintEntry(data[stock], &quot;ThresholdEntry&quot;, stock.symbol)  
</code></pre>
</div>
</div>
</div>

</div>

<div class='container page-container post-atomic'>
<div class='section-header reply-header'>
<div class='reply-title'>14 responses</div>
</div>
<div class='replies'>
<div class='post-container response-container' data-post-id='54f670de09eadaea6f000013' id='54f670de09eadaea6f000013'>
<a href='#54f670de09eadaea6f000013'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51d8b187832967b44b00002f'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/fd782cc7fef5bcc0ac8cc703bfbacb8e?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51d8b187832967b44b00002f'>Easan Katir</a>
</div>
<a UTCms='1425436897000' class='quanto-date posted-at response-posted-at' href='#54f670de09eadaea6f000013'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thank you.  This framework is very helpful.   I wonder if you would post a cloneable working example of this code.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='556013148b4135a4540004aa' id='556013148b4135a4540004aa'>
<a href='#556013148b4135a4540004aa'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/52dee27218e58d7c0d00024e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/31b871ce370dbc3bea7a96038a80467c?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/52dee27218e58d7c0d00024e'>Brian Christopher</a>
</div>
<a UTCms='1432359703000' class='quanto-date posted-at response-posted-at' href='#556013148b4135a4540004aa'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Market Tech, thanks for posting this. I&#39;ve definitely borrowed code from you before as a significant hurdle in developing these algos is often not the idea&#39;s themselves but the idiosyncrasies of implementation. Of particular use is the filtering of empty data sets that causes the dreaded pink screen/algo crash and portfolio management to handle exits.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5567a266d69d51a5ae0001bf' id='5567a266d69d51a5ae0001bf'>
<a href='#5567a266d69d51a5ae0001bf'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/550b97655b83ee32fd000132'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/1f9775d029ff45e78e133f3379a9299a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/550b97655b83ee32fd000132'>Tristan Rhodes</a>
</div>
<a UTCms='1432855146000' class='quanto-date posted-at response-posted-at' href='#5567a266d69d51a5ae0001bf'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Market Tech, </p>

<p>Coding has always been a struggle for me.  I only invest the time and effort when there is a large benefit.  Creating algorithmic trading strategies with Quantopian is one of these cases.  Because of my steep learning curve, I appreciate when competent coders provide a template that I can tweak and adjust to accomplish my goal.  Thank you for this post, and your many other contributions!</p>

<p>With that said, I have some ideas to improve your algorithm template.  Consider this to be psuedocode, since I don&#39;t fully understand the syntax required.  When you find a mistake, please correct me.</p>

<p>1) Provide the ability to adjust the impact of each criteria, using weights.  (The code below shows how the variables might be used, but doesn&#39;t provide the logic.)</p>

<pre><code># Criteria Weighting  
# Provides the ability to change the impact of each criteria when making a decision.  
# Range: 0 to 10  
# 0 = Prevents an indicator from having any impact in the decision process  
# 5 = Default setting  
# 10 = Gives an indicator twice as much impact compared to the default, and 10 times the impact of a criteria with a weight of 1.

weightPctPriceChange = 5  
weightRelativeVolume = 5  
weightStochastics = 5

weightKeltnerChannels = 5  
weightChoppiness = 5  
weightMFI = 5  
weightOBV = 5  
weightROC = 5  
weightMACD = 5  
weightHighestHigh = 5  
weightLongMA = 5  
weightRSI = 5  
weightHMA = 5  
weightVolatilityVariance = 5  
</code></pre>

<p>2)  Due to the recently added low-beta requirement, many algorithms need to add the ability to short stocks to lower their beta.  Do you think it would be a good idea to keep a LongScore and a ShortScore for each stock?  Here is an example using two new functions:</p>

<pre><code> #~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  
def calcRelativeVolumeScore(context, data):  
    # Calculate the relative volume based on the 50 day moving average of volume, and the volume of the previous day  
    volumes = history(50, &#39;1d&#39;, field=&#39;volume&#39;)  
    # Calculate the 50-day average volume  
    AverageVolumes = volumes.mean()  
    for stock in data:  
        # Divide the previous day&#39;s volume by the average volume  
        RelativeVolume = volumes[stock][iloc[-1]].volume() / AverageVolumes[stock]  
        if RelativeVolume &gt;= 48:  
            context.S[stock].LongScore =+ (5 * weightRelativeVolume)  
            context.S[stock].ShortScore =+ (5 * weightRelativeVolume)  
        elif RelativeVolume &gt;= 24:  
            context.S[stock].LongScore =+ (4 * weightRelativeVolume)  
            context.S[stock].ShortScore =+ (4 * weightRelativeVolume)  
        elif RelativeVolume &gt;= 12:  
            context.S[stock].LongScore =+ (3 * weightRelativeVolume)  
            context.S[stock].ShortScore =+ (3 * weightRelativeVolume)  
        elif RelativeVolume &gt;= 6:  
            context.S[stock].LongScore =+ (2 * weightRelativeVolume)  
            context.S[stock].ShortScore =+ (2 * weightRelativeVolume)  
        elif RelativeVolume &gt;= 3:  
            context.S[stock].LongScore =+ (1 * weightRelativeVolume)  
            context.S[stock].ShortScore =+ (1 * weightRelativeVolume)  
        else: # RelativeVolumes[stock] &lt; 3  
           # Stock doesn&#39;t meet minimum requirements  
            context.S[stock].Eligible = No  
#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  
def calcPctPriceChangeScore(context, data):

    # Calculate the percent price change from the previous close to the current price  
    closing_prices = history(2, &#39;1d&#39;, &#39;close_price&#39;)  
    PctPriceChange = closing_prices.iloc[-1, -2].pct_change()  
    for stock in data:  
        # Add weighted values to Long scores  
        if PctPriceChange[stock] &gt;= 80:  
            context.S[stock].LongScore =+ (5 * weightPctPriceChange)  
        elif PctPriceChange[stock] &gt;= 40:  
            context.S[stock].LongScore =+ (4 * weightPctPriceChange)  
        elif PctPriceChange[stock] &gt;= 20:  
            context.S[stock].LongScore =+ (3 * weightPctPriceChange)  
        elif PctPriceChange[stock] &gt;= 10:  
            context.S[stock].LongScore =+ (2 * weightPctPriceChange)  
        elif PctPriceChange[stock] &gt;= 5:  
            context.S[stock].LongScore =+ (1 * weightPctPriceChange)  
        # Add weighted values to Short scores  
        if PctPriceChange[stock] &lt;= -80:  
            context.S[stock].ShortScore =+ (5 * weightPctPriceChange)  
        elif PctPriceChange[stock] &lt;= -40:  
            context.S[stock].ShortScore =+ (4 * weightPctPriceChange)  
        elif PctPriceChange[stock] &lt;= -20:  
           context.S[stock].ShortScore =+ (3 * weightPctPriceChange)  
        elif PctPriceChange[stock] &lt;= -10:  
           context.S[stock].ShortScore =+ (2 * weightPctPriceChange)  
        elif PctPriceChange[stock] &gt;= -5:  
           context.S[stock].ShortScore =+ (1 * weightPctPriceChange)  
        else: # -5% &lt; PctPriceChange &gt; 5%  
            # Stock doesn&#39;t meet minimum requirements  
            context.S[stock].Eligible = No  
</code></pre>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5567c4cbd913a84d4700028c' id='5567c4cbd913a84d4700028c'>
<a href='#5567c4cbd913a84d4700028c'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/53d46cdb75f57a2832005a6b'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/62b39881ee19f936224017339779d9d4?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/53d46cdb75f57a2832005a6b'>Market Tech</a>
</div>
<a UTCms='1432863950000' class='quanto-date posted-at response-posted-at' href='#5567c4cbd913a84d4700028c'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Tristan R., An excellent extension of this framework (such as it is).  </p>

<p>What you&#39;ll find as you try to expand your technique however, is that it quickly becomes unwieldy. So you might shoot for collapsing your range classification into a single method which can interpret the values, any values, that you feed it. It would figure out the range, find the slice where the current value falls and perform a scaled normalized approximation selection of the value. Here I&#39;ll show you:</p>

<pre><code>#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  
def CalculateRSI(context, data):  
    closeDeck = history(RSIPeriods + 2, &quot;1d&quot;, &quot;close_price&quot;).dropna(axis=1)  
    closeDeck = closeDeck[[sid for sid in closeDeck if sid in data]]  
    rsi       = closeDeck.apply(talib.RSI, timeperiod = RSIPeriods).dropna()  
    for stock in rsi:  
        context.S[stock].RSI = rsi[stock][-1]  
        context.S[stock].Weight += GetScaledWeighting(0, 100, context.S[stock].RSI)

#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  
def GetScaledWeighting(originalRangeStart, originalRangeEnd, valueToPlace):  
    targetRangeStart = -10; targetRangeEnd = 10  
    scaledRange      = (originalRangeEnd - originalRangeStart) / (targetRangeEnd - targetRangeStart)  
    scaledResult     = targetRangeStart + (valueToPlace - originalRangeStart) // scaledRange # // = floor division  
    return scaledResult

</code></pre>

<p>If you apply such a scaling, changing the originalRangeStart and end with values appropriate to the indicator (one would have to normalize those a bit, like the highest high or longMA would need some math applied). But then any Weight &gt; 0 is a long and &lt; 0 a short, and the weight itself becomes a position scaling weight. I&#39;d have to spend some time refactoring the framework but you get the picture.<br>
~~~<br>
And if you wanted to apply special weighting per an indicator you&#39;d add that to the method such that your scaled result would be tuned per the various indicator weights.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='556949006138e6fa240001fa' id='556949006138e6fa240001fa'>
<a href='#556949006138e6fa240001fa'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/55663cfe2c263bcac60002d7'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/9550b5d67700d806ac5f2ba7cc6d5378?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/55663cfe2c263bcac60002d7'>Jedouard Pernot</a>
</div>
<a UTCms='1432963330000' class='quanto-date posted-at response-posted-at' href='#556949006138e6fa240001fa'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi,</p>

<p>Thank you for all the code!</p>

<p>I have a few questions regarding the Keltner Channels, and I want to apologize in advance if the answers are obvious as I am rather new to coding.</p>

<p>(1) I noticed that the KC code here use the SMA. I was under the impression that Keltner Channels use EMA. Is the code somehow modifying the SMA to turn it into an EMA? </p>

<p>(2A) KC traditionally has three variables: the EMA period, the ATR period, and the ATR multiplier. I see that the EMA (SMA?) period and the ATR period are both done through the code&#39;s &quot;KeltnerPeriods&quot;. If  I wanted to separate these, would it be as simple as dividing the code term up earlier, as in &quot;KeltnerATRPeriod&quot; and &quot;KeltnerEMAPeriod&quot;?</p>

<p>(2B) I didn&#39;t see the multiplier for the ATR. If I wanted to add this into the code could I do it as one of the following: &quot;KeltnerLow  = sma[stock][-1] - ( x * atr[-1] )&quot;, where &quot;x&quot; is the multipler; or &quot;KeltnerLow = sma[stock][-1] - (KeltnerATRModifier * atr[-1])&quot;, where KeltnerATRModifier was earlier defined in the code.</p>

<p>I&#39;m very interested in this, so any help or advice would be greatly appreciated.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='55695a9d008284a21d00026f' id='55695a9d008284a21d00026f'>
<a href='#55695a9d008284a21d00026f'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/53d46cdb75f57a2832005a6b'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/62b39881ee19f936224017339779d9d4?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/53d46cdb75f57a2832005a6b'>Market Tech</a>
</div>
<a UTCms='1432967841000' class='quanto-date posted-at response-posted-at' href='#55695a9d008284a21d00026f'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Jedouard P.,<br>
1) You can use any moving average that you feel is appropriate. No there is no translation going on.<br>
2) and 3) -- spot on approach. </p>

<p>You&#39;ll find that most of these price interpretation technical indicator aids were built for the human visual cortex and its handy-dandy pattern matching engine. Our minds can see channel breakouts and instantly grok them AND the context in which they appear. Thinking that if you tune the Keltner channels &quot;just right&quot; that it will somehow divine golden signals is, in my opinion (and thousands of hours of writing this stuff), a misleading approach. Sure technical indicators can assist you in adding probability flavors to your spicy algorithms. But the meat of the dish cannot be found within them. But, hey, what do I know. I&#39;m a failed strategy writer who has never written an algo he would trust.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='55695edb6138e6fa24000242' id='55695edb6138e6fa24000242'>
<a href='#55695edb6138e6fa24000242'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/55663cfe2c263bcac60002d7'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/9550b5d67700d806ac5f2ba7cc6d5378?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/55663cfe2c263bcac60002d7'>Jedouard Pernot</a>
</div>
<a UTCms='1432968925000' class='quanto-date posted-at response-posted-at' href='#55695edb6138e6fa24000242'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Market Tech,</p>

<p>Thanks for the help and advice.</p>

<p>I&#39;m very bullish, and, on top of this, I stick with the high-volume ETFs with top ratings from professional firms (Morning Star, etc.). I&#39;m hoping to never get an inflated idea, much less head about my trading skill.</p>

<p>I&#39;ve been doing a lot of work on a particular strategy and I&#39;ve had a lot of good backtesting with a partial version of this on another platform, but the limitations of either the coding language or my skill in using it prevented me from coding the whole strategy. The reason I&#39;m saying this is that I don&#39;t want you to think that I think a Keltner based on EMA will be a magic bullet or anything or even that my strategy will be, but on a five-year back-test, that simplified strategy has been getting better than average returns most weeks and, I hope, it should be better when I can code the whole thing.</p>

<p>I appreciate all the work you did on the code above. It really helps.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5718fc3028b7a26128000aff' id='5718fc3028b7a26128000aff'>
<a href='#5718fc3028b7a26128000aff'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57117fec0b580437f0000764'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/44603c7fab9163be69ab8814a442e5f2?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57117fec0b580437f0000764'>Peter Reggio</a>
</div>
<a UTCms='1461255222000' class='quanto-date posted-at response-posted-at' href='#5718fc3028b7a26128000aff'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Market Tech-</p>

<p>Thank you so much for offering up this code to the public!</p>

<p>I have a question regarding an error I encounter when running the algo: &quot;Runtime exception: AttributeError: &#39;module&#39; object has no attribute &#39;SIDData&#39;&quot;</p>

<p>This occurs in reference to this portion of the code:</p>

<p>class DataStock(zipline.protocol.SIDData):<br>
    def <strong>init</strong>(this, sid, dataSid):<br>
        this.Update(dataSid)  </p>

<pre><code>def Update(this, dataSid):  
    this.Open   = dataSid.open_price  
    this.High   = dataSid.high  
    this.Low    = dataSid.low  
    this.Close  = dataSid.close_price  
    this.Volume = dataSid.volume
</code></pre>

<p>Please bear with me as I&#39;m new to Python, any help you (or others) could offer in correcting this would be greatly appreciated! :)</p>

<p>Have a good one.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='571909d4bb3e7daff0000ba3' id='571909d4bb3e7daff0000ba3'>
<a href='#571909d4bb3e7daff0000ba3'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/53d46cdb75f57a2832005a6b'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/62b39881ee19f936224017339779d9d4?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/53d46cdb75f57a2832005a6b'>Market Tech</a>
</div>
<a UTCms='1461258717000' class='quanto-date posted-at response-posted-at' href='#571909d4bb3e7daff0000ba3'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Peter, I&#39;m no longer active on the Q, more productive things to do with my time...</p>

<p>However, searching the github zipline repo for SIDData I see that they did not document the change that may have been done to SIDData (zipline.protocol.SIDData)</p>

<p>So, I have no idea what has happened to cause this &quot;module&quot; error. </p>

<p>Maybe you might get lucky and one of the zipline engineers can chime in regarding this undocumented change.</p>

<p>MT  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='571910a64ab5334dd20005a1' id='571910a64ab5334dd20005a1'>
<a href='#571910a64ab5334dd20005a1'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57117fec0b580437f0000764'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/44603c7fab9163be69ab8814a442e5f2?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57117fec0b580437f0000764'>Peter Reggio</a>
</div>
<a UTCms='1461260459000' class='quanto-date posted-at response-posted-at' href='#571910a64ab5334dd20005a1'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>MT-</p>

<p>Thanks for the timely response, especially since you&#39;re no longer active here.</p>

<p>I just wanted to make sure that it wasn&#39;t something with my setup (i.e., needed to input manual data into one of the fields). Appreciate the confirmation.</p>

<p>-Peter  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5776fe8f6b78e14b1e0000db' id='5776fe8f6b78e14b1e0000db'>
<a href='#5776fe8f6b78e14b1e0000db'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51d125a71144e60865000044'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/b7dd86784deedc047d5ad0fb30378bdd?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51d125a71144e60865000044'>Peter Bakker</a>
</div>
<a UTCms='1467416211000' class='quanto-date posted-at response-posted-at' href='#5776fe8f6b78e14b1e0000db'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>this screams for a pipeline port ;)  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='57771640c66cad07a30001c9' id='57771640c66cad07a30001c9'>
<a href='#57771640c66cad07a30001c9'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/53d46cdb75f57a2832005a6b'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/62b39881ee19f936224017339779d9d4?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/53d46cdb75f57a2832005a6b'>Market Tech</a>
</div>
<a UTCms='1467422279000' class='quanto-date posted-at response-posted-at' href='#57771640c66cad07a30001c9'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Oh yeah? Blimey, but I do not relish having to learn YATSA (yet another trading system architecture).</p>

<p>But... seeing how futures may (or may not) be coming online here soon, and futures are much more entertaining than droll equities, I might be cajoled into learning the paraphernalia of pipeline processing, (pptttiiinnggg!)</p>

<p>Surely someone has created a developer friendly (that means non-pythonic) pipeline example that might be the springboard one might use to begin such a port...???</p>

<p>(Oh, and yeah, my year long project is over and I&#39;m now out of hiding.)</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5777a3f2979eb89a65000314' id='5777a3f2979eb89a65000314'>
<a href='#5777a3f2979eb89a65000314'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1467458552000' class='quanto-date posted-at response-posted-at' href='#5777a3f2979eb89a65000314'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Market Tech -</p>

<p>Welcome back (cue Welcome Back, Kotter theme song...).</p>

<p>See <a href="https://www.quantopian.com/tutorials/pipeline">https://www.quantopian.com/tutorials/pipeline</a>.  Maybe Q could do an Esperanto translation for you, since you don&#39;t speak Python.</p>

<p>Note that 
<code>get_fundamentals</code> will eventually be deprecated, in favor of its pipeline manifestation (see <a href="https://www.quantopian.com/posts/fundamentals-fundamentally-broken">https://www.quantopian.com/posts/fundamentals-fundamentally-broken</a>).</p>

<p>See also <a href="https://www.quantopian.com/posts/pipeline-trading-universe-best-practice">https://www.quantopian.com/posts/pipeline-trading-universe-best-practice</a>.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='57b1f99a913f63b46a000166' id='57b1f99a913f63b46a000166'>
<a href='#57b1f99a913f63b46a000166'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/53d46cdb75f57a2832005a6b'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/62b39881ee19f936224017339779d9d4?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/53d46cdb75f57a2832005a6b'>Market Tech</a>
</div>
<a UTCms='1471281568000' class='quanto-date posted-at response-posted-at' href='#57b1f99a913f63b46a000166'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Plugable code block strategy</p>

<p>Note: this strategy is for reference only. Various extensions are added as they come to mind. Pick out what you find useful (if anything).</p>

<p>Update: 8/14/2016<br>
Added TRO<br>
Fixed the history deprecation warnings</p>

<p>Update: 6/30/2016<br>
Swapped in an expando object instead of the lost SidData.<br>
Still get all those noisome deprecation alerts. But it runs.</p>

<p>Update: 5/11/2015<br>
Added Keltner Channels, Choppiness Index (Tangx Peter Bakker)</p>

<p>Update: 4/30/2015<br>
Added OBV and MFI indicators</p>

<p>Update: 4/5/2015<br>
Uses context.S[stock].DynamicProperty rather than data[stock].DynamicProperty now.</p>

<p>Still have these to fix...</p>

<p>Line 517: Function <code>update_universe</code> is deprecated.<br>
Line 429: Iterating over the assets in <code>data</code> is deprecated.<br>
Line 431: <code>data[sid(N)]</code> is deprecated. Use <code>data.current</code>.<br>
Line 438: Checking whether an asset is in data is deprecated.<br>
Line 486: Iterating over the assets in <code>data</code> is deprecated.<br>
Line 433: <code>data[sid(N)]</code> is deprecated. Use <code>data.current</code>.<br>
Line 331: Iterating over the assets in <code>data</code> is deprecated.<br>
Line 326: Checking whether an asset is in data is deprecated.  </p>
</div>
</div>
</div>

</div>
<div class='sign-in-please'>
Please <a href='/signin?return_to=/posts/trying-on-for-size-a-technical-framework'>sign in</a> or
<a href='/users/sign_up?redirect_to=/posts/trying-on-for-size-a-technical-framework'>join Quantopian</a> to
post a reply.
</div>
</div>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId: "550580758292093",
      status: false,
      cookie: true,
      xfbml: true
    });
  };
  
  (function(d, debug){
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) {return;}
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
    ref.parentNode.insertBefore(js, ref);
  }(document, /*debug*/ false));
  
  window.twttr = (function (d,s,id) {
    var t, js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return; js=d.createElement(s); js.id=id;
    js.src="//platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs);
    return window.twttr || (t = { _e: [], ready: function(f){ t._e.push(f) } });
  }(document, "script", "twitter-wjs"));
</script>
<script>
  $(document).ready(function () {
    quanto.instances.pm = new quanto.PostManager(false)
  });
</script>

<div class='login-footer'>
<div class='container'>
<div class='login-footer-text'>
Become an expert in quant finance through Quantopian's hands-on education.
</div>
<div class='login-footer-button'>
<button class='btn btn-v2 stroke join-modal-link mixpanel-button' data-event='anon join footer click posts' data-mixpanel='click'>
Join Now
</button>
</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='error-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'>Error</span>
</div>
<div class='modal-body body-content'>
<p>Sorry, something went wrong.  Try again or contact us by <a class='feedback-link'>sending feedback</a>.</p>
</div>
<div class='modal-footer'>
<button class='btn btn-v2 blue action-button' data-dismiss='modal' href='#'>Close</button>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='confirmation-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'></span>
</div>
<div class='modal-body body-content'></div>
<div class='modal-footer'>
<div class='pull-right'>
<button class='btn btn-v2 border' data-dismiss='modal'>Cancel</button>
<button class='btn btn-v2 blue action-button' data-dismiss='modal'></button>
</div>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='message-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'></span>
</div>
<div class='modal-body body-content'></div>
<div class='modal-footer'>
<button class='btn btn-v2 blue action-button' data-dismiss='modal' id='message-modal-close'>Close</button>
</div>

</div>
</div>
</div>

<div class='always-bootstrap3-modals'>
<div class='fade modal quanto-modal-v2' id='join-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header visible-small'>
<span class='title'>
Join Quantopian.  It's Free!
</span>
<div class='modal-x-out visible-xs'></div>
</div>
<div class='modal-body'>
<div class='flex-wrap'>
<div class='join-left-pane hidden-small'>
<div class='margin_30l'>
<div class='join-hero-text'>
Join Quantopian.  It's Free!
</div>
<div class='join-benefits'>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image code'></div>
</div>
<div class='join-text'>
Use our research platform, backtester, and dozens of clean data sets.
</div>
</div>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image learn'></div>
</div>
<div class='join-text'>
Learn with our hands-on education and community forums.
</div>
</div>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image win'></div>
</div>
<div class='join-text'>
Enter to win cash prizes in our contest.
</div>
</div>
</div>
<div class='hidden saved-reminder'>
Don't worry, all your work is already saved.
</div>
</div>
</div>
<div class='join-right-pane'>
<div class='hidden-small'>
<div class='button-pane'>
<a class="button btn-v2 user-form-btn" href="/signin">Already a Quantopian member?</a>
</div>
</div>
<div class='visible-small'>
<div class='already-member'>
<a href='/signin'>Already a Quantopian member?</a>
</div>
</div>
<form class="quanto-form-v2" id="new-user-modal-form" action="/users" accept-charset="UTF-8" data-remote="true" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><div class='error-message hidden'>
<div class='message'></div>
</div>
<div class='name-group'>
<div class='form-group inline-block'>
<label for="user_firstname">First Name</label>
<input class="form-control firstname" pattern=".*" required="required" autocomplete="off" autofocus="autofocus" type="text" name="user[firstname]" id="user_firstname" />
</div>
<div class='form-group inline-block'>
<label for="user_lastname">Last Name</label>
<input class="form-control" value="" pattern=".*" required="required" autocomplete="off" type="text" name="user[lastname]" id="user_lastname" />
</div>
</div>
<div class='form-group'>
<label for="user_email">Email</label>
<input class="form-control" value="" pattern=".*" required="required" autocomplete="off" type="email" name="user[email]" id="user_email" />
</div>
<div class='form-group'>
<label for="user_password">Password</label>
<input autocomplete="off" class="form-control" pattern=".*" required="required" type="password" name="user[password]" id="user_password" />
</div>
<div class='checkbox eula'>
<input id='eula-checkbox' type='checkbox'>
<div class='quanto-checkbox'></div>
<label for='eula-checkbox' id='checkbox-label'>I accept the <a href='/policies/terms' target='_blank'>Terms Of Use</a> and <a href='/policies/privacy' target='_blank'>Privacy Policy</a>.</label>
</div>
<div class='checkbox mailchimp-box'>
<input name="user[allow_marketing_emails]" type="hidden" value="0" /><input type="checkbox" value="1" name="user[allow_marketing_emails]" id="user_allow_marketing_emails" />
<div class='quanto-checkbox'></div>
<label for='user_allow_marketing_emails'>
Send me email updates with the latest news from the Quantopian community. We send these emails about once a month.
</label>
</div>
<div class='button-row'>
<button class='btn-v2 blue full' data-redirect-to='/tutorials/getting-started' id='sign-up-button' type='Submit'>Join Quantopian</button>
</div>
</form></div>
</div>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='feedback-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title'>Contact Support</span>
</div>
<div class='modal-body'>
<form class='anon-user controls quanto-form-v2' id='feedback-form'>
<div class='feedback-inputs'>
<div class='form-group'>
<input autofocus class='form-control' id='feedback-email-box' name='email' placeholder='Email Address' type='email'>
</div>
<div class='form-group'>
<input class='form-control' id='feedback-name-box' placeholder='Name' type='name'>
</div>
<div class='form-group'>
<textarea class='form-control' id='feedback-box' name='feedback' placeholder='What may we help you with?' rows='10'></textarea>
</div>
</div>
</form>
<form class='hidden quanto-form-v2 select-resource-area'>
<div class='select-step select-type-step'>
<div class='form-group'>
<select class='form-control select-resource-dropdown' title='Select the item you need help with'>
<option value='algorithm'>Algorithm</option>
<option value='backtest'>Backtest</option>
<option value='notebook'>Notebook</option>
</select>
</div>
</div>
<div class='select-step loading-area hidden'>
<div class='loading-text'>
Loading...
</div>
</div>
<div class='select-step empty-list-area hidden'>
<div class='back-button'>Go Back</div>
<div class='empty-text'>
No <span class='empty-list-resource-text'>algorithms</span> found
</div>
</div>
<div class='select-algo-area select-step hidden'>
<div class='back-button'>Go Back</div>
<table class='select-algo-table select-item-table'>
<thead>
<tr>
<th>
Algorithm
<span class='sort-icon'></span>
</th>
<th>
Last Modified
<span class='sort-icon'></span>
</th>
</tr>
</thead>
</table>
</div>
<div class='select-backtest-area select-step hidden'>
<div class='back-button'>Go Back</div>
<table class='select-backtest-table select-item-table'>
<thead>
<tr>
<th>
Backtest
<span class='sort-icon'></span>
</th>
<th>
Started At
<span class='sort-icon'></span>
</th>
<th>
Overall Return
<span class='sort-icon'></span>
</th>
<th>
Status
<span class='sort-icon'></span>
</th>
</tr>
</thead>
</table>
</div>
<div class='select-notebook-area select-step hidden'>
<div class='back-button'>Go Back</div>
<div class='subtitle select-cell-step'>
Choose a cell to use as the preview for this notebook:
</div>
<div class='iframe-wrapper'>
<iframe class='notebook-list-iframe slow-fade' src=''></iframe>
</div>
<div class='progress-area slow-fade in'>
<div class='progress-container'>
<div class='progress-title'>
<div class='quanto-loader gray'></div>
</div>
</div>
</div>
<div class='maintenance-area'>
<div class='error-container'>
<div class='row'>
<div class='col-md-14 msg-title h1'>
Sorry, research is currently undergoing maintenance.
</div>
</div>
<div class='row'>
<div class='col-md-14 msg-subtitle'>
Please check back shortly. If the maintenance period lasts longer than expected,
you can find updates on <a href='https://status.quantopian.com/'>status.quantopian.com</a>.
</div>
</div>

</div>
</div>
<div class='error-area'>
<div class='error-container'>
<div class='row'>
<div class='col-md-14 msg-title h1'>
Sorry, something went wrong on our end.
</div>
</div>
<div class='row'>
<div class='col-md-14 msg-subtitle'>
Please try again or contact <a class='open-feedback-link'>Quantopian support</a>.
</div>
</div>

</div>
</div>

</div>
<div class='selected-item-area select-step hidden'>
<div class='selected-item-group form-group'>
<div class='selected-item-control'>
<input class='disabled form-control selected-item-box' type='text'>
<span class='secure-icon icon'></span>
<button class='btn change change-primary-item-button change-selection-button new-btn transparent' type='button'>
<span class='refresh-icon icon'></span>
</button>
</div>
<div class='selected-backtest-control'>
<input class='disabled form-control selected-backtest-box' type='text'>
<span class='secure-icon icon'></span>
<button class='btn change-backtest-button change-selection-button new-btn transparent' type='button'>
<span class='refresh-icon icon'></span>
</button>
</div>
</div>
<div class='checkbox-group form-group'>
<div class='checkbox give-permission'>
<input class='give-permission-checkbox' id='feedback-give-permission-checkbox' type='checkbox'>
<div class='quanto-checkbox'></div>
<label for='feedback-give-permission-checkbox'>
I permit Quantopian to view <span class='item-type-text'>this algorithm,
backtest or notebook and their imported datasets</span> for the purpose of providing support.
</label>
</div>
</div>
</div>
</form>

<div class='loading-step hidden'>
<div class='loading-text'>
Submitting your support ticket...
</div>
</div>
<div class='success-step invisible'>
<h2 class='title center'>
You've successfully submitted a support ticket.
</h2>
<p>
Our support team will be in touch soon.
</p>
<div class='confirmation-image'></div>
</div>
</div>
<div class='modal-footer'>
<button class='btn-v2 blue' id='send-feedback-button'>Send</button>
<div class='error-message hidden'>
Error submitting support request.
</div>
</div>

</div>
</div>
</div>

</div>
</div>
<div class='footer' id='quanto-footer-container'>
<div class='container'>
<div class='row header-row'>
<div class='col-sm-fourth span3'>
<img class='async-image logotype-image' data-src='https://qf.quantopian.com/assets/logos/logo-q-full-b23bda5ac757691b9259d396d0dfef91567165868b8c955a836649686e6d2248.svg'>
</div>
<div class='col-sm-fourth span3'></div>
<div class='col-sm-fourth span3'></div>
<div class='col-sm-fourth span3'>
<div class='feedback-email'>
Need help?
<a href="/cdn-cgi/l/email-protection#c0a6a5a5a4a2a1a3ab80b1b5a1aeb4afb0a9a1aeeea3afad">Contact support.</a>
</div>
</div>
</div>
<div class='row'>
<div class='col-sm-fourth span3'>
<div class='header'>Company</div>
<div class='footer-row'>
<a href='/about'>About</a>
</div>
<div class='footer-row'>
<a href='/academia'>Academia</a>
</div>
<div class='footer-row'>
<a href='/jobs'>Careers</a>
</div>
<div class='footer-row'>
<a href='/posts'>Community</a>
</div>
<div class='footer-row'>
<a href='/events'>Events</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Learn &amp; Support</div>
<div class='footer-row'>
<a href='/faq'>FAQ</a>
</div>
<div class='footer-row'>
<a href='/tutorials/getting-started'>Getting Started</a>
</div>
<div class='footer-row'>
<a href='/docs'>Documentation</a>
</div>
<div class='footer-row'>
<a href='/tutorials'>Tutorials</a>
</div>
<div class='footer-row'>
<a href='/lectures'>Lectures</a>
</div>
<div class='footer-row'>
<a href='/opensource'>Open Source</a>
</div>
<div class='footer-row'>
<a href='https://status.quantopian.com/'>Site Status</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Notices</div>
<div class='footer-row'>
<a href='/policies/terms'>Terms of Use</a>
</div>
<div class='footer-row'>
<a href='/policies/privacy'>Privacy Policy</a>
</div>
<div class='footer-row'>
<a href='/security'>Security</a>
</div>
<div class='footer-row'>
<a href='/policies/code-of-conduct'>Code of Conduct</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Follow Us</div>
<div class='footer-row'>
<a href='https://www.twitter.com/quantopian'>Twitter</a>
</div>
<div class='footer-row'>
<a href='https://www.facebook.com/quantopian'>Facebook</a>
</div>
<div class='footer-row'>
<a href='https://www.linkedin.com/company/quantopian'>LinkedIn</a>
</div>
<div class='footer-row'>
<a href='https://www.youtube.com/channel/UC606MUq45P3zFLa4VGKbxsg'>YouTube</a>
</div>
</div>
</div>
<div class='row'>
<div class='col-xs-14 span12'>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian.
</p>
<p>
In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>

</div>
</div>
</div>
</div>
</div>
<div class='mobile-footer'>
<div class='mobile-nav-category main-links'>
<div class='mobile-nav-row-footer'>
<a href='/about'>About Quantopian</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/jobs'>Careers</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/posts'>Community</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/events'>Events</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/docs'>Documentation</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/academia'>Academia</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/lectures'>Lectures</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://status.quantopian.com/'>Status</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.facebook.com/quantopian'>Facebook</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.twitter.com/quantopian'>Twitter</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.linkedin.com/company/quantopian'>LinkedIn</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.youtube.com/channel/UC606MUq45P3zFLa4VGKbxsg'>YouTube</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/policies/terms'>Terms of Use</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/policies/privacy'>Privacy Policy</a>
</div>
</div>
<div class='mobile-nav-category'>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian.
</p>
<p>
In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>

</div>
</div>
</div>

</div>
<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script></body>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', "UA-8519877-1", {
    cookieDomain: "quantopian.com"
  });
  ga('set', 'dimension1', 'session_5f9dc7425d387f00077e48e4');
  
  ga('send', 'pageview');
</script>

<input type="hidden" name="is_mac" id="is_mac" value="false" />
<input type="hidden" name="mp" id="mp" value="75873953cd404bcc1da88a55ff51e3b4" />
<script>
  (function(e,a){if(!a.__SV){var b=window;try{var c,l,i,j=b.location,g=j.hash;c=function(a,b){return(l=a.match(RegExp(b+"=([^&]*)")))?l[1]:null};g&&c(g,"state")&&(i=JSON.parse(decodeURIComponent(c(g,"state"))),"mpeditor"===i.action&&(b.sessionStorage.setItem("_mpcehash",g),history.replaceState(i.desiredHash||"",e.title,j.pathname+j.search)))}catch(m){}var k,h;window.mixpanel=a;a._i=[];a.init=function(b,c,f){function e(b,a){var c=a.split(".");2==c.length&&(b=b[c[0]],a=c[1]);b[a]=function(){b.push([a].concat(Array.prototype.slice.call(arguments,
  0)))}}var d=a;"undefined"!==typeof f?d=a[f]=[]:f="mixpanel";d.people=d.people||[];d.toString=function(b){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);b||(a+=" (stub)");return a};d.people.toString=function(){return d.toString(1)+".people (stub)"};k="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
  for(h=0;h<k.length;h++)e(d,k[h]);a._i.push([b,c,f])};a.__SV=1.2;b=e.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";c=e.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}})(document,window.mixpanel||[]);
  mixpanel.init("75873953cd404bcc1da88a55ff51e3b4");
</script>
<script>
  mixpanel.track("view page", {"page": window.location.pathname});
</script>
</html>
