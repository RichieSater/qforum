<!DOCTYPE html>
<html>
<head>
<link href='i1.wp.com' rel='dns-prefetch'>
<link href='i2.wp.com' rel='dns-prefetch'>
<link href='i3.wp.com' rel='dns-prefetch'>
<meta content='2HgX9mcLHaPOX6sfaaAkhWtblhEB9yUNw4l6l46e1k4' name='google-site-verification'>
<link rel="shortcut icon" type="image/x-icon" href="external/favicon-q-ac1a76f2c200e9026b5b1147519bb4fab6256910588b831e2411bc6c7c1218c3.png" />
<title>
batch transform w/ set_universe - problem?
</title>
<meta content='With the attached backtest, I find that the batch transform is returning a trailing window length that starts at 1, and increases by 1 each minute.  For the batch transform, I am using:R_P = 0  # refresh period  W_L = 1 # window length  So, the window length should be fixed at 390 minute bars, right?--Grant1970-01-01initialize:17INFOuniverse is 46 to 48  2013-05-10PRINT ----------------------------  2013-05-10PRINT2013-05-10 13:31:00+00:00  2013-05-10PRINT ---------------------------- ...' name='description'>
<link rel="stylesheet" media="all" href="external/quanto-base-bundle-e8eb6050172aa0d24124d5c24bac90b2cccd88b5b9c7742026c0e9efab038c6e.css" />
<link rel="stylesheet" media="all" href="external/quanto-posts-bundle-aab01368d3f82d8dafc94ee9eabb82e77dc8c9fbbffa952fdcdc744dfa523cf3.css" />
<script src="external/quanto_global-057218867db29d5768131af5d6fb3476cef098e7d9e655108befb903c7ee985e.js"></script>
<script src="external/posts_bundle-3dfd82fa469c393d752e461d837aec9e4e364ae39f49198e34a6626f2180fdf7.js"></script>
<link href='external/logo-q-180x180-0f5a6a439c99203ed4aea6f656e7604c543d287be43d8b17c7591c1131f09a59.png' rel='apple-touch-icon'>
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="32b/qC8a6xgEgleb7NLH3dpkh8HguBZDaNmtj42o7a2jAInljew5+72fDqqjPW+p4uqkqJp0A1jq1nblJ+2PFg==" />
<meta content='width=device-width, initial-scale=1.0' name='viewport'>
<script>
//<![CDATA[
window.quanto_data={};quanto_data.bounce_back_params={"show_modal":null,"feedback_text":null};quanto_data.namespace="public";quanto_data.talib_info={"ADOSC":["Chaikin A/D Oscillator (Volume Indicators)",["fastperiod","3"],["slowperiod","10"]],"ADX":["Average Directional Movement Index (Momentum Indicators)",["timeperiod","14"]],"ADXR":["Average Directional Movement Index Rating (Momentum Indicators)",["timeperiod","14"]],"APO":["Absolute Price Oscillator (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["matype","0"]],"AROON":["Aroon (Momentum Indicators)",["timeperiod","14"]],"AROONOSC":["Aroon Oscillator (Momentum Indicators)",["timeperiod","14"]],"ATR":["Average True Range (Volatility Indicators)",["timeperiod","14"]],"BBANDS":["Bollinger Bands (Overlap Studies)",["timeperiod","5"],["nbdevup","2"],["nbdevdn","2"],["matype","0"]],"BETA":["Beta (Statistic Functions)",["timeperiod","5"]],"CCI":["Commodity Channel Index (Momentum Indicators)",["timeperiod","14"]],"CMO":["Chande Momentum Oscillator (Momentum Indicators)",["timeperiod","14"]],"CORREL":["Pearson's Correlation Coefficient (r) (Statistic Functions)",["timeperiod","30"]],"DEMA":["Double Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"DX":["Average Directional Movement Index (Momentum Indicators)",["timeperiod","14"]],"EMA":["Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"KAMA":["Kaufman Adaptive Moving Average (Overlap Studies)",["timeperiod","30"]],"LINEARREG":["Linear Regression (Statistic Functions)",["timeperiod","14"]],"LINEARREG_ANGLE":["Linear Regression Angle (Statistic Functions)",["timeperiod","14"]],"LINEARREG_INTERCEPT":["Linear Regression Intercept (Statistic Functions)",["timeperiod","14"]],"LINEARREG_SLOPE":["Linear Regression Slope (Statistic Functions)",["timeperiod","14"]],"MA":["Moving average (Overlap Studies)",["timeperiod","30"],["matype","0"]],"MACD":["Moving Average Convergence/Divergence (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["signalperiod","9"]],"MACDEXT":["MACD with controllable MA type (Momentum Indicators)",["fastperiod","12"],["fastmatype","0"],["slowperiod","26"],["slowmatype","0"],["signalperiod","9"],["signalmatype","0"]],"MACDFIX":["Moving Average Convergence/Divergence Fix 12/26 (Momentum Indicators)",["signalperiod","9"]],"MAX":["Highest values over a specified period (Math Operators)",["timeperiod","30"]],"MAXINDEX":["Index of highest value over a specified period (Math Operators)",["timeperiod","30"]],"MFI":["Money Flow Index (Momentum Indicators)",["timeperiod","14"]],"MIDPOINT":["Midpoint over period (Overlap Studies)",["timeperiod","14"]],"MIDPRICE":["Midpoint Price over period (Overlap Studies)",["timeperiod","14"]],"MIN":["Lowest value over a specified period (Math Operators)",["timeperiod","30"]],"MININDEX":["Index of lowest value over a specified period (Math Operators)",["timeperiod","30"]],"MINMAX":["Lowest and highest values over a specified period (Math Operators)",["timeperiod","30"]],"MINMAXINDEX":["Indexes of lowest and highest values over a specified period (Math Operators)",["timeperiod","30"]],"MINUS_DI":["Minus Directional Indicator (Momentum Indicators)",["timeperiod","14"]],"MINUS_DM":["Minus Directional Movement (Momentum Indicators)",["timeperiod","14"]],"MOM":["Momentum (Momentum Indicators)",["timeperiod","10"]],"NATR":["Normalized Average True Range (Volatility Indicators)",["timeperiod","14"]],"PLUS_DI":["Plus Directional Indicator (Momentum Indicators)",["timeperiod","14"]],"PLUS_DM":["Plus Directional Movement (Momentum Indicators)",["timeperiod","14"]],"PPO":["Percentage Price Oscillator (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["matype","0"]],"ROC":["Rate of change: ((price/prevPrice)-1)*100 (Momentum Indicators)",["timeperiod","10"]],"ROCP":["Rate of change Percentage: (price-prevPrice)/prevPrice (Momentum Indicators)",["timeperiod","10"]],"ROCR":["Rate of change ratio: (price/prevPrice) (Momentum Indicators)",["timeperiod","10"]],"ROCR100":["Rate of change ratio 100 scale: (price/prevPrice)*100 (Momentum Indicators)",["timeperiod","10"]],"RSI":["Relative Strength Index (Momentum Indicators)",["timeperiod","14"]],"SMA":["Simple Moving Average (Overlap Studies)",["timeperiod","30"]],"STDDEV":["Standard Deviation (Statistic Functions)",["timeperiod","5"],["nbdev","1"]],"STOCH":["Stochastic (Momentum Indicators)",["fastk_period","5"],["slowk_period","3"],["slowk_matype","0"],["slowd_period","3"],["slowd_matype","0"]],"STOCHF":["Stochastic Fast (Momentum Indicators)",["fastk_period","5"],["fastd_period","3"],["fastd_matype","0"]],"STOCHRSI":["Stochastic Relative Strength Index (Momentum Indicators)",["timeperiod","14"],["fastk_period","5"],["fastd_period","3"],["fastd_matype","0"]],"T3":["Triple Exponential Moving Average (T3) (Overlap Studies)",["timeperiod","5"],["vfactor","0.7"]],"TEMA":["Triple Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"TRIMA":["Triangular Moving Average (Overlap Studies)",["timeperiod","30"]],"TRIX":["1-day Rate-Of-Change (ROC) of a Triple Smooth EMA (Momentum Indicators)",["timeperiod","30"]],"TSF":["Time Series Forecast (Statistic Functions)",["timeperiod","14"]],"ULTOSC":["Ultimate Oscillator (Momentum Indicators)",["timeperiod1","7"],["timeperiod2","14"],["timeperiod3","28"]],"VAR":["Variance (Statistic Functions)",["timeperiod","5"],["nbdev","1"]],"WILLR":["Williams' %R (Momentum Indicators)",["timeperiod","14"]],"WMA":["Weighted Moving Average (Overlap Studies)",["timeperiod","30"]]};quanto_data.nb_preview_url="https://notebooks-preview.prd.pub.quantopian.com";quanto_data.delay_nb_preview_load=false;
//]]>
</script>
<meta content='https://www.quantopian.com/posts/batch-transform-w-slash-set-universe-problem' property='og:url'>
<meta content='batch transform w/ set_universe - problem?' property='og:title'>

<input type="hidden" name="env" id="quanto-env" value="production" />
<meta content='550580758292093' property='fb:app_id'>
<meta content='https://www.quantopian.com/posts/batch-transform-w-slash-set-universe-problem' property='og:url'>
<meta content='https://media.quantopian.com/public/og-image-default.png' property='og:image'>
<meta content='batch transform w/ set_universe - problem?' property='og:title'>
<meta content='With the attached backtest, I find that the batch transform is returning a trailing window length that starts at 1, and increases by 1 each minute.  For the batch transform, I am using:R_P = 0  # refresh period  W_L = 1 # window length  So, the window length should be fixed at 390 minute bars, right?--Grant1970-01-01initialize:17INFOuniverse is 46 to 48  2013-05-10PRINT ----------------------------  2013-05-10PRINT2013-05-10 13:31:00+00:00  2013-05-10PRINT ---------------------------- ...' property='og:description'>
</head>
<script type='application/ld+json'>
  {
    "@context": "http://schema.org",
    "@type": "Organization",
    "url": "https://www.quantopian.com",
    "logo": "https://media.quantopian.com/logos/logo-q-press-red.png"
  }
</script>
<body class='' ontouchstart=''>
<div id='fb-root'></div>
<div class='wrapper'>
<div class='alert-v2 error'>
<div class='message'>
Quantopian's community platform is shutting down. Please read <a href="/posts/quantopians-community-services-are-closing">this post</a> for more information and <a href='/account#account'>download your code</a>.
</div>
</div>
<div class='navbar navbar-default navbar-static-top' id='app-navbar'>
<div class='container-fluid'>
<div class='navbar-header'>
<button class='navbar-toggle collapsed' data-target='#app-navbar-collapse' data-toggle='collapse'>
<span class='icon hamburger-menu'></span>
</button>
<a class='navbar-brand' href='/home'>
<img class='logo-image async-image' data-src='external/logo-q-white-b141ea6018546e5a4ecc3d10d8440ec076fc4385764e948b322828cc70950a76.svg'>
</a>
</div>
<div class='collapse navbar-collapse' id='app-navbar-collapse'>
<ul class='nav navbar-nav navbar-right'>
<li class='dropdown quanto-dropdown-new'>
<li>
<a class='header' href='/docs'>
Documentation
</a>
</li>
<li class='dropdown quanto-dropdown-new'>
<a class='header' data-toggle='dropdown' href='#'>
Learn
</a>
<ul class='dropdown-menu'>
<li>
<a class='mixpanel-button' data-event='main nav getting started clicked' href='/tutorials/getting-started'>Getting Started</a>
</li>
<li>
<a class='mixpanel-button' data-event='main nav tutorials clicked' href='/tutorials'>Tutorials</a>
</li>
<li>
<a class='mixpanel-button' data-event='main nav lectures clicked' href='/lectures'>Lectures</a>
</li>
</ul>
</li>
<li>
<a class='header' href='/posts' id='forum-link'>
Forum
</a>
</li>
<li>
<a class="header" href="/signin?return_to=/posts/batch-transform-w-slash-set-universe-problem">Log In</a>
</li>
</li>

</ul>
</div>
</div>
</div>
<script>
  $(document).ready(function () {
    quanto.instances.fm = new quanto.FeedbackManager();
    quanto.instances.hm = new quanto.headerManager();
  })
</script>


<div class='content content-area new-style'>
<input type="hidden" name="page-id" id="page-id" value="postatomic" />
<script src="external/MathJax.js?config=TeX-AMS_HTML-full.js,Safe" async="async"></script>
<div class='container page-container post-atomic'>
<input id='parent-post-id-val' type='hidden' value='5192d14533bd44e440000081'>
<div class='post-container' data-post-id='5192d14533bd44e440000081' id='5192d14533bd44e440000081'>
<div class='back-button back-to-community'>Back to Community</div>
<div class='post-title'>batch transform w/ set_universe - problem?</div>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<span class='posted-at'>posted </span>
<span UTCms='1368576325000' class='quanto-date posted-at'></span>
<div class='pull-right other-actions'>
<div class='dropup inline-block'>
<div class='dropdown share-control other-action-link'>
<div data-toggle='dropdown'>
<div class='share-image'></div>
Share
</div>
<ul class='dropdown-menu share-options-menu'>
<li>
<a class='share-row' href='https://twitter.com/intent/tweet?text=batch transform w/ set_universe - problem?&amp;url=https%3A%2F%2Fwww.quantopian.com%2Fposts%2Fbatch-transform-w-slash-set-universe-problem%3Futm_source%3Dwebsite_share%26utm_campaign%3Dbatch-transform-w-slash-set-universe-problem%26utm_medium%3Dtwitter&amp;via=quantopian'>
<i class='icon icon-twitter'></i>
Share on Twitter
</a>
</li>
<li>
<div class='share-row facebook-button'>
<i class='icon icon-facebook'></i>
Share on Facebook
</div>
</li>
<li>
<div class='share-row linkedin-button' data-share-url='https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Fwww.quantopian.com%2Fposts%2Fbatch-transform-w-slash-set-universe-problem%3Futm_source%3Dwebsite_share%26utm_campaign%3Dbatch-transform-w-slash-set-universe-problem%26utm_medium%3Dlinkedin&amp;title=batch+transform+w%2F+set_universe+-+problem%3F+%28Grant+Kiehne%29&amp;source=Quantopian'>
<i class='icon icon-linkedin'></i>
Share on LinkedIn
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>

<input type="hidden" name="social_fb_post_link" id="social_fb_post_link" value="https://www.quantopian.com/posts/batch-transform-w-slash-set-universe-problem?utm_source=website_share&amp;utm_campaign=batch-transform-w-slash-set-universe-problem&amp;utm_medium=facebook" />
<input type="hidden" name="social_post_image" id="social_post_image" value="external/logo-q-red-outline.png" />
<input type="hidden" name="social_post_author" id="social_post_author" value="Grant Kiehne" />
<div class='body-text'>
<div class='body-text-container post-body'><p>With the attached backtest, I find that the batch transform is returning a trailing window length that starts at 1, and increases by 1 each minute.  For the batch transform, I am using:</p>

<pre><code>R_P = 0  # refresh period  
W_L = 1 # window length  
</code></pre>

<p>So, the window length should be fixed at 390 minute bars, right?</p>

<p>--Grant</p>

<pre><code>1970-01-01initialize:17INFOuniverse is 46 to 48  
2013-05-10PRINT ----------------------------  
2013-05-10PRINT2013-05-10 13:31:00+00:00  
2013-05-10PRINT ----------------------------  
2013-05-10PRINT Securities  
2013-05-10PRINT[10753, 25605, 30380, 40976, 36369, 26542, 38425, 40478, 42018, 16934, 18183, 26157, 3124, 38454, 12553, 35897, 25661, 32840, 42060, 27215, 37970, 14420, 24664, 16476, 25182, 34414, 42100, 1144, 24704, 43653, 39563, 22156, 20624, 32917, 27803, 32419, 26277, 4265, 40106, 41644, 17584, 4792, 7877, 39622, 8394, 9421, 39634, 26324, 24793, 26332, 40673, 20713, 27370, 12011, 27884, 26860, 39673, 35201, 18184, 39177, 42763, 42767, 35088, 24853, 33046, 20763, 20765, 15136, 28450, 7465, 26924, 23857, 35128, 19259, 38721, 23947, 9028, 4421, 27974, 33580, 39479, 36237, 25424, 20818, 27280, 18786, 40763, 21870, 8566, 21879, 6009, 38782, 40319, 42369, 15752, 393, 8586, 7563, 34701, 38296, 38290, 5016, 10054, 41384, 39342, 18863, 7609, 31162, 15306, 27084, 16333, 677, 26593, 5090, 42983, 28144, 41460, 17401]  
2013-05-10PRINT Current prices  
2013-05-10PRINT[ 31.81 5.5 13.56 19.26 18.45 8.65 22.16 28.91 59.97 8.44 9.06 9.47 12.32 81.85 10.1 4.97 25.6 64.2 14.85 6.98 35.14 19.06 25.53 12.78 5.05 27.15 16.5 3.93 15.25 20. 13.76 4.5 12.16 13.61 40.12 4.96 10.73 4.98 79.45 4.2701 3.53 13.25 30.08 14.2 23.33 13.87 5.25 10.43 13.09 22.73 41.24 23.79 3.26 3.7101 3.75 10.81 21.47 25.99 3.3 17.02 27.33 27.62 0.8732 1.06 33.55 8.12 7.01 3.738 17.29 2.36 14.04 29.12 7.9401 22.436 60.64 24.26 12.65 9.45 20.16 42.08 93.16 26.08 14.37 9.25 12.79 21.57 18.61 2.3 23.85 4.4199 24.15 3.01 2.41 29.76 2.77 2.46 43.13 29.97 1.76 16.45 1.51 13.61 19.53 13.5 19.9499 3.65 21.6 1.78 1.14 4.9 4.8 2.42 16.1 14.42 25.3 4...  
2013-05-10PRINT Trailing price window  
2013-05-10PRINT[[ 31.81 5.5 13.56 19.26 18.45 8.65 22.16 28.91 59.97 8.44 9.06 9.47 12.32 81.85 10.1 4.97 25.6 64.2 14.85 6.98 35.14 19.06 25.53 12.78 5.05 27.15 16.5 3.93 15.25 20. 13.76 4.5 12.16 13.61 40.12 4.96 10.73 4.98 79.45 4.2701 3.53 13.25 30.08 14.2 23.33 13.87 5.25 10.43 13.09 22.73 41.24 23.79 3.26 3.7101 3.75 10.81 21.47 25.99 3.3 17.02 27.33 27.62 0.8732 1.06 33.55 8.12 7.01 3.738 17.29 2.36 14.04 29.12 7.9401 22.436 60.64 24.26 12.65 9.45 20.16 42.08 93.16 26.08 14.37 9.25 12.79 21.57 18.61 2.3 23.85 4.4199 24.15 3.01 2.41 29.76 2.77 2.46 43.13 29.97 1.76 16.45 1.51 13.61 19.53 13.5 19.9499 3.65 21.6 1.78 1.14 4.9 4.8 2.42 16.1 14.42...  
2013-05-10PRINT Trailing window length  
2013-05-10PRINT1  
2013-05-10PRINT ----------------------------  
2013-05-10PRINT2013-05-10 13:31:00+00:00  
2013-05-10PRINT ----------------------------  
2013-05-10PRINT Securities  
2013-05-10PRINT[10753, 39938, 25605, 30380, 40976, 36369, 26542, 38425, 40478, 42018, 16934, 18183, 26157, 3124, 38454, 12553, 35897, 25661, 32840, 42060, 27215, 37970, 14420, 24664, 16476, 25182, 34414, 42100, 1144, 24704, 43653, 39563, 22156, 20624, 32917, 27803, 38597, 32419, 26277, 4265, 40106, 41644, 17584, 4792, 7877, 39622, 8394, 9421, 39634, 26324, 24793, 26332, 40673, 20713, 27370, 12011, 27884, 26860, 39673, 35201, 18184, 39177, 42763, 42767, 35088, 24853, 33046, 20763, 20765, 15136, 28450, 7465, 26924, 23857, 35128, 19259, 38721, 23947, 9028, 4421, 27974, 33580, 39479, 36237, 25424, 20818, 27280, 18786, 40763, 21870, 8566, 21879, 6009, 38782, 40319, 42369, 15752, 393, 8586, 7563, 34701, 38296, 38290, 5016, 28058, 10054, 41384, 39342, 18863, 7609, 31162, 15306, 27084, 16333, 677, 26593, 5090, 42983, 28144, 41460, 17401]  
2013-05-10PRINT Current prices  
2013-05-10PRINT[ 31.81 16.03 5.5 13.56 19.26 18.45 8.65 22.07 28.91 60.09 8.44 9.06 9.4611 12.32 81.85 10.1 4.97 25.6 64.2 14.77 6.98 35.14 19.06 25.53 12.78 5.08 27.14 16.5 3.93 15.25 20.0601 13.76 4.5 12.16 13.61 40.12 12.63 4.96 10.73 4.96 79.45 4.2701 3.53 13.22 30.08 14.2432 23.33 13.87 5.25 10.43 13.09 22.75 41.24 23.79 3.38 3.73 3.72 10.81 21.47 25.99 3.3 17. 27.33 27.62 0.86 1.06 33.55 8.12 7.01 3.72 17.29 2.36 14.04 28.84 7.9401 22.436 60.64 24.26 12.65 9.45 20.16 42.08 93.16 26.08 14.37 9.24 12.79 21.57 18.61 2.3 23.85 4.44 24.15 3.01 2.42 29.76 2.77 2.46 43.13 30.16 1.74 16.41 1.51 13.61 25.46 19.53 13.5001 19.9499 3.65 21.6 1.78 1.14 4.9 4.8 2.45 16...  
2013-05-10PRINT Trailing price window  
2013-05-10PRINT[[ 31.81 nan 5.5 13.56 19.26 18.45 8.65 22.16 28.91 59.97 8.44 9.06 9.47 12.32 81.85 10.1 4.97 25.6 64.2 14.85 6.98 35.14 19.06 25.53 12.78 5.05 27.15 16.5 3.93 15.25 20. 13.76 4.5 12.16 13.61 40.12 nan 4.96 10.73 4.98 79.45 4.2701 3.53 13.25 30.08 14.2 23.33 13.87 5.25 10.43 13.09 22.73 41.24 23.79 3.26 3.7101 3.75 10.81 21.47 25.99 3.3 17.02 27.33 27.62 0.8732 1.06 33.55 8.12 7.01 3.738 17.29 2.36 14.04 29.12 7.9401 22.436 60.64 24.26 12.65 9.45 20.16 42.08 93.16 26.08 14.37 9.25 12.79 21.57 18.61 2.3 23.85 4.4199 24.15 3.01 2.41 29.76 2.77 2.46 43.13 29.97 1.76 16.45 1.51 13.61 nan 19.53 13.5 19.9499 3.65 21.6 1.78 1.14 4.9 4....  
2013-05-10PRINT Trailing window length  
2013-05-10PRINT2  
</code></pre>
</div>
</div>
</div>

</div>

<div class='container page-container post-atomic'>
<div class='section-header reply-header'>
<div class='reply-title'>26 responses</div>
</div>
<div class='replies'>
<div class='post-container response-container' data-post-id='5193ecb87768ff8f8f000031' id='5193ecb87768ff8f8f000031'>
<a href='#5193ecb87768ff8f8f000031'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f1edd0b03b228000d000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/81292895877c628963a3b56b408533e7?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f1edd0b03b228000d000001'>Thomas Wiecki</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1368648889000' class='quanto-date posted-at response-posted-at' href='#5193ecb87768ff8f8f000031'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>And this does not occur without a universe?  </p>
</div>
<div class='disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='51940d85771128239c000008' id='51940d85771128239c000008'>
<a href='#51940d85771128239c000008'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1368657286000' class='quanto-date posted-at response-posted-at' href='#51940d85771128239c000008'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hello Thomas,</p>

<p>I see the same behavior with a list of securities:</p>

<pre><code>2013-05-10PRINT ----------------------------  
2013-05-10PRINT2013-05-10 13:31:00+00:00  
2013-05-10PRINT ----------------------------  
2013-05-10PRINT Securities  
2013-05-10PRINT[24, 8229, 8554, 5061, 8459]  
2013-05-10PRINT Current prices  
2013-05-10PRINT[ 457.23 78.47 163. 32.58 59.52]  
2013-05-10PRINT Trailing price window  
2013-05-10PRINT[[ 457.23 78.47 163. 32.58 59.52]]  
2013-05-10PRINT Trailing window length  
2013-05-10PRINT1  
2013-05-10PRINT ----------------------------  
2013-05-10PRINT2013-05-10 13:32:00+00:00  
2013-05-10PRINT ----------------------------  
2013-05-10PRINT Securities  
2013-05-10PRINT[24, 8229, 8554, 5061, 8459]  
2013-05-10PRINT Current prices  
2013-05-10PRINT[ 457.401 78.39 162.89 32.405 59.56 ]  
2013-05-10PRINT Trailing price window  
2013-05-10PRINT[[ 457.23 78.47 163. 32.58 59.52 ] [ 457.401 78.39 162.89 32.405 59.56 ]]  
2013-05-10PRINT Trailing window length  
2013-05-10PRINT2  
</code></pre>

<p>I&#39;ve attached the backtest so you can try it yourself.  Is my code incorrect, or is there a bug in the batch transform?</p>

<p>Grant  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5194ce2bca58a0319f000039' id='5194ce2bca58a0319f000039'>
<a href='#5194ce2bca58a0319f000039'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f1edd0b03b228000d000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/81292895877c628963a3b56b408533e7?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f1edd0b03b228000d000001'>Thomas Wiecki</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1368706604000' class='quanto-date posted-at response-posted-at' href='#5194ce2bca58a0319f000039'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Grant,</p>

<p>OK, I see what the problem is. We are checking if there&#39;s a new day event. Thus with a window_length of 1 and daily bars you will update the batch_transform on the first day which is correct. But with minutes you update with the first minute bar of the day which is not correct. Figuring out a fix for that now.</p>

<p>It is a current short-coming of zipline that most unittests test for correct behavior with daily bars although we are working on adding more minute tests to catch the issues in the future. Sorry about that.</p>

<p>Thomas  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='5194da42a6e2e6535b000069' id='5194da42a6e2e6535b000069'>
<a href='#5194da42a6e2e6535b000069'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f1edd0b03b228000d000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/81292895877c628963a3b56b408533e7?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f1edd0b03b228000d000001'>Thomas Wiecki</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1368709699000' class='quanto-date posted-at response-posted-at' href='#5194da42a6e2e6535b000069'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>OK, I have a fix here:<br>
<a href="https://github.com/quantopian/zipline/pull/163">https://github.com/quantopian/zipline/pull/163</a>  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='519601663b14cd66a2000001' id='519601663b14cd66a2000001'>
<a href='#519601663b14cd66a2000001'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1368785255000' class='quanto-date posted-at response-posted-at' href='#519601663b14cd66a2000001'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thanks Thomas,</p>

<p>I don&#39;t have any visibility of when changes get rolled into Quantopian.  I just tried the algorithm again, and the problem persists.  Should it be gone?</p>

<p>This flags a potential improvement...engineering change control with some level of end-user visibility/notification (and possibly participation).  As I mentioned in another post, you probably need a public test instance, as well.  Do you have an internal test instance that matches the current release?  </p>

<p>Grant  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5196130f4262ae410300000a' id='5196130f4262ae410300000a'>
<a href='#5196130f4262ae410300000a'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f1edd0b03b228000d000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/81292895877c628963a3b56b408533e7?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f1edd0b03b228000d000001'>Thomas Wiecki</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1368789775000' class='quanto-date posted-at response-posted-at' href='#5196130f4262ae410300000a'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Sorry, the fix just made it into zipline, there are often a couple of days until we update the zipline that&#39;s running on Quantopian.</p>

<p>Personally, I really like your idea of a testing server where a set of beta users can try to break things before we ship them to production, especially with live-trading there is an even greater need for stability.  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='51973cd0e83ecddded000068' id='51973cd0e83ecddded000068'>
<a href='#51973cd0e83ecddded000068'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1368866001000' class='quanto-date posted-at response-posted-at' href='#51973cd0e83ecddded000068'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thanks Thomas,</p>

<p>I confirmed the fix (see below and attached).</p>

<p>Grant</p>

<pre><code>2013-05-10PRINT ----------------------------  
2013-05-10PRINT2013-05-10 20:00:00+00:00  
2013-05-10PRINT ----------------------------  
2013-05-10PRINT Securities  
2013-05-10PRINT[24, 8229, 8554, 5061, 8459]  
2013-05-10PRINT Current prices  
2013-05-10PRINT[ 452.88 78.88 163.45 32.6862 61.64 ]  
2013-05-10PRINT Trailing price window  
2013-05-10PRINT[[ 457.23 78.47 163. 32.58 59.52 ] [ 457.401 78.39 162.89 32.405 59.56 ] [ 459.24 78.479 163.11 32.47 60.02 ] ..., [ 452.51 78.82 163.45 32.675 61.61 ] [ 452.65 78.85 163.43 32.67 61.63 ] [ 452.88 78.88 163.45 32.6862 61.64 ]]  
2013-05-10PRINT Trailing window length  
2013-05-10PRINT390  
2013-05-13PRINT ----------------------------  
2013-05-13PRINT2013-05-13 13:31:00+00:00  
2013-05-13PRINT ----------------------------  
2013-05-13PRINT Securities  
2013-05-13PRINT[24, 8229, 8554, 5061, 8459]  
2013-05-13PRINT Current prices  
2013-05-13PRINT[ 453.52 78.71 163.12 32.63 61.32]  
2013-05-13PRINT Trailing price window  
2013-05-13PRINT[[ 457.401 78.39 162.89 32.405 59.56 ] [ 459.24 78.479 163.11 32.47 60.02 ] [ 458.995 78.36 163.12 32.451 60.13 ] ..., [ 452.65 78.85 163.43 32.67 61.63 ] [ 452.88 78.88 163.45 32.6862 61.64 ] [ 453.52 78.71 163.12 32.63 61.32 ]]  
2013-05-13PRINT Trailing window length  
2013-05-13PRINT390  
</code></pre>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5197589f8f4ab6f97b000088' id='5197589f8f4ab6f97b000088'>
<a href='#5197589f8f4ab6f97b000088'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f1edd0b03b228000d000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/81292895877c628963a3b56b408533e7?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f1edd0b03b228000d000001'>Thomas Wiecki</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1368873119000' class='quanto-date posted-at response-posted-at' href='#5197589f8f4ab6f97b000088'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Great, thanks for checking. Any outstanding issues?  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='519760264348aafcac00007c' id='519760264348aafcac00007c'>
<a href='#519760264348aafcac00007c'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1368875047000' class='quanto-date posted-at response-posted-at' href='#519760264348aafcac00007c'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thomas,</p>

<p>I don&#39;t know of anything else, but I&#39;ll be sure to let you know if I find other problems.</p>

<p>Grant  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5197690f4348aa710b000055' id='5197690f4348aa710b000055'>
<a href='#5197690f4348aa710b000055'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1368877327000' class='quanto-date posted-at response-posted-at' href='#5197690f4348aa710b000055'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hello Thomas,</p>

<p>One thing (which I can test) is a detail about how the batch transform works.  As I understand, it is actually a data accumulator, and as such, builds up a full window of data the then delivers it once it is full (e.g. 390 minute bars).  It then iteratively adds the most recent bar, and drops the oldest.  In order for the accumulator to work, does the batch transform need to be called every time handle_data is called?  Or could the batch transform be part of a conditional statement (e.g. if Wednesday at 10 am, then call the batch transform)?  And if it is a conditional call, will it have accumulated the data?</p>

<p>Grant  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5197d2d9e83ecd9e950000d2' id='5197d2d9e83ecd9e950000d2'>
<a href='#5197d2d9e83ecd9e950000d2'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f1edd0b03b228000d000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/81292895877c628963a3b56b408533e7?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f1edd0b03b228000d000001'>Thomas Wiecki</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1368904410000' class='quanto-date posted-at response-posted-at' href='#5197d2d9e83ecd9e950000d2'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Grant,</p>

<p>Yes, it&#39;s an accumulator. The name is a little unfortunate in retrospect, we might change or alias it.</p>

<p>If you don&#39;t pass an event it will not get accumulated, so using it in an if-statement would work.</p>

<p>Thomas  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='5197e2e10a029e6054000007' id='5197e2e10a029e6054000007'>
<a href='#5197e2e10a029e6054000007'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1368908513000' class='quanto-date posted-at response-posted-at' href='#5197e2e10a029e6054000007'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thomas,</p>

<p>I don&#39;t understand.  You say that if I &quot;don&#39;t pass don&#39;t pass an event it will not get accumulated, so using it in an if-statement would work.&quot;  It seems that an if-statement would not work.  For example, within handle_data, I would have (with the globals R_P &amp; W_L):</p>

<pre><code>R_P = 0  # refresh period  
W_L = 1 # window length

if run_batch_transform:  
    d = get_data(data, context.stocks)

@batch_transform(refresh_period=R_P, window_length=W_L) # set globals R_P &amp; W_L above  
def get_data(datapanel,sids):  
    return datapanel[&#39;price&#39;].as_matrix(sids)  
</code></pre>

<p>So, say that I am using minute data, and run_batch_transform = True only at 10 am on Weds.  What happens?  The batch transform is only called once per week, so it will not accumulate 390 minute bars, right?</p>

<p>Grant  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5197e53bcce00adc71000006' id='5197e53bcce00adc71000006'>
<a href='#5197e53bcce00adc71000006'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f1edd0b03b228000d000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/81292895877c628963a3b56b408533e7?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f1edd0b03b228000d000001'>Thomas Wiecki</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1368909116000' class='quanto-date posted-at response-posted-at' href='#5197e53bcce00adc71000006'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Oh, that&#39;s how you meant -- sorry. No, it will only accumulate what you pass in. I have plans for making the batch_transform better integrated so that you don&#39;t have to call it explicitly each time. Also nice might be an accumulate function that just returns a dataframe and doesn&#39;t require a decorator which seems to cause some confusion.  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='5197ebe9cce00adc7100001b' id='5197ebe9cce00adc7100001b'>
<a href='#5197ebe9cce00adc7100001b'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1368910826000' class='quanto-date posted-at response-posted-at' href='#5197ebe9cce00adc7100001b'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>O.K.  I&#39;ll do some testing and report back.  If I understand you correctly, a batch transform will only accumulate data if called.  So, for example, with minute data, in order to get a window of 390 bars, I need to call the batch transform 390 times, correct?</p>

<p>Also, using my example above, what will happen if I only call the batch transform once per week in minute mode?  Will it accumulate until it has 390 minute bars, and then start returning the trailing window?  If so, this could lead to some whacky results...after 390 weeks it will start returning.</p>

<p>--Grant  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='519803a60a029e815f000013' id='519803a60a029e815f000013'>
<a href='#519803a60a029e815f000013'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f1edd0b03b228000d000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/81292895877c628963a3b56b408533e7?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f1edd0b03b228000d000001'>Thomas Wiecki</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1368916902000' class='quanto-date posted-at response-posted-at' href='#519803a60a029e815f000013'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Yes, that&#39;s correct. If you wanted, say, to only accumulate the first minute bar of each day you could do a conditional. But otherwise you have to pass it every time.</p>

<p>I suppose accumulate and calling of the batch_transform could be split into separate operations. That way it&#39;d be more explicit.</p>

<p>Thomas  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='519b3cc290a522a3730000a2' id='519b3cc290a522a3730000a2'>
<a href='#519b3cc290a522a3730000a2'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1369128130000' class='quanto-date posted-at response-posted-at' href='#519b3cc290a522a3730000a2'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hello Thomas,</p>

<p>I just did a bit more testing of the batch transform on minute bars with set_universe.  It is pretty sluggish, taking &gt; 200 ms just to return the data:</p>

<pre><code>1970-01-01initialize:18INFOuniverse is 32 to 34  
2013-05-17handle_data:34INFOget_data 234.745025635 ms  
2013-05-20handle_data:34INFOget_data 237.904071808 ms  
2013-05-20handle_data:34INFOget_data 234.466075897 ms  
2013-05-20handle_data:34INFOget_data 234.211921692 ms  
2013-05-20handle_data:34INFOget_data 231.967926025 ms  
2013-05-20handle_data:34INFOget_data 233.593940735 ms  
2013-05-20handle_data:34INFOget_data 229.863166809 ms  
2013-05-20handle_data:34INFOget_data 229.838848114 ms  
2013-05-20handle_data:34INFOget_data 231.215953827 ms  
2013-05-20handle_data:34INFOget_data 229.033946991 ms  
2013-05-20handle_data:34INFOget_data 231.724977493 ms  
2013-05-20handle_data:34INFOget_data 231.696844101 ms  
2013-05-20handle_data:34INFOget_data 230.749845505 ms  
</code></pre>

<p>With a smaller universe, I get the same result:</p>

<pre><code>1970-01-01initialize:18INFOuniverse is 92 to 92.2  
2013-05-17handle_data:34INFOget_data 258.349895477 ms  
2013-05-20handle_data:34INFOget_data 315.945863724 ms  
2013-05-20handle_data:34INFOget_data 256.926059723 ms  
2013-05-20handle_data:34INFOget_data 254.40788269 ms  
2013-05-20handle_data:34INFOget_data 313.712835312 ms  
2013-05-20handle_data:34INFOget_data 258.793115616 ms  
2013-05-20handle_data:34INFOget_data 254.894971848 ms  
2013-05-20handle_data:34INFOget_data 314.038038254 ms  
2013-05-20handle_data:34INFOget_data 258.286952972 ms  
2013-05-20handle_data:34INFOget_data 256.145954132 ms  
2013-05-20handle_data:34INFOget_data 318.190097809 ms  
2013-05-20handle_data:34INFOget_data 259.150028229 ms  
2013-05-20handle_data:34INFOget_data 256.146907806 ms  
2013-05-20handle_data:34INFOget_data 313.978910446 ms  
2013-05-20handle_data:34INFOget_data 257.718086243 ms  
</code></pre>

<p>However, if I run on a list of sids (context.stocks = [sid(24),sid(8229),sid(8554),sid(5061),sid(8459)]), the batch transform delivers the data quickly:</p>

<pre><code>2013-05-17handle_data:34INFOget_data 4.87780570984 ms  
2013-05-20handle_data:34INFOget_data 4.50301170349 ms  
2013-05-20handle_data:34INFOget_data 4.37092781067 ms  
2013-05-20handle_data:34INFOget_data 4.19592857361 ms  
2013-05-20handle_data:34INFOget_data 4.29201126099 ms  
2013-05-20handle_data:34INFOget_data 4.22501564026 ms  
2013-05-20handle_data:34INFOget_data 4.46891784668 ms  
2013-05-20handle_data:34INFOget_data 4.20308113098 ms  
2013-05-20handle_data:34INFOget_data 4.75120544434 ms  
2013-05-20handle_data:34INFOget_data 4.15802001953 ms  
2013-05-20handle_data:34INFOget_data 4.22501564026 ms  
2013-05-20handle_data:34INFOget_data 4.22096252441 ms  
2013-05-20handle_data:34INFOget_data 4.20904159546 ms  
2013-05-20handle_data:34INFOget_data 5.10597229004 ms  
</code></pre>

<p>So, it seems that the batch transform runs considerably more slowly in combination with set_universe.  Is this expected?</p>

<p>Grant  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='519d3c604a23065fa1000026' id='519d3c604a23065fa1000026'>
<a href='#519d3c604a23065fa1000026'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f1edd0b03b228000d000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/81292895877c628963a3b56b408533e7?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f1edd0b03b228000d000001'>Thomas Wiecki</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1369259104000' class='quanto-date posted-at response-posted-at' href='#519d3c604a23065fa1000026'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Grant,</p>

<p>That&#39;s indeed pretty slow. The reason is probably that with a universe we set up an internal data panel that holds all sids that will be used during the backtest. Those might be quite a lot. Not sure there&#39;s an easy fix for that but I&#39;ll think some more about it.</p>

<p>Thomas  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='519dd4a866611b0a2000004a' id='519dd4a866611b0a2000004a'>
<a href='#519dd4a866611b0a2000004a'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1369298089000' class='quanto-date posted-at response-posted-at' href='#519dd4a866611b0a2000004a'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thanks Thomas,</p>

<p>Please note that in my test results above, even with a relatively small universe of securities, the batch transform execution time is ~ 250-350 ms (see &quot;1970-01-01initialize:18INFOuniverse is 92 to 92.2&quot;).  This duration is similar to that of the executing the batch transform on a list of sids, prior to your recent speed-up.  With a universe, are you perhaps re-creating an entire data panel every tic, rather than using the new iterative one?  Just a guess...</p>

<p>Grant  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='519dffeb4a23069bab00008d' id='519dffeb4a23069bab00008d'>
<a href='#519dffeb4a23069bab00008d'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f1edd0b03b228000d000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/81292895877c628963a3b56b408533e7?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f1edd0b03b228000d000001'>Thomas Wiecki</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1369309164000' class='quanto-date posted-at response-posted-at' href='#519dffeb4a23069bab00008d'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>How many Sids are in this small universe? You&#39;d have to include all sids ever to appear in this universe too, might that make it larger?</p>

<p>I don&#39;t think it&#39;s that but it does seem curious. I&#39;ll have to profile the code.  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='519eb266f7ffbda83f00004c' id='519eb266f7ffbda83f00004c'>
<a href='#519eb266f7ffbda83f00004c'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1369354854000' class='quanto-date posted-at response-posted-at' href='#519eb266f7ffbda83f00004c'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hello Thomas,</p>

<p>In the attached example, there are 14 SIDS in the small universe:</p>

<pre><code>1970-01-01initialize:18INFOuniverse is 84 to 84.2  
2013-05-21handle_data:34INFOget_data 220.268964767 ms  
2013-05-21PRINT ----------------------------  
2013-05-21PRINT2013-05-21 20:00:00+00:00  
2013-05-21PRINT ----------------------------  
2013-05-21PRINT SIDS &amp; No. of SIDS  
2013-05-21PRINT[8352, 2470, 33127, 4809, 25002, 36907, 624, 4220, 15638, 20759, 40376, 19898, 22844, 1374]  
2013-05-21PRINT14  
2013-05-21PRINT Current prices  
2013-05-21PRINT[ 42.31 53.4 25.35 15.73 47.27 43. 55.63 82.36 112.59 63.61 46.69 96.64 22.47 13.67]  
2013-05-21PRINT Trailing price window  
2013-05-21PRINT[[ 42.2975 53.37 25.274 ..., 97. 22.4 13.7 ] [ 42.26 53.2 25.274 ..., 97. 22.38 13.69 ] [ 42.26 53.2 25.274 ..., 97. 22.41 13.69 ] ..., [ 42.31 53.365 25.34 ..., 96.7105 22.47 13.66 ] [ 42.31 53.395 25.34 ..., 96.7405 22.47 13.66 ] [ 42.31 53.4 25.35 ..., 96.64 22.47 13.67 ]]  
2013-05-21PRINT Trailing window length  
2013-05-21PRINT390  
</code></pre>

<p>It takes &gt; 200 ms for the batch transform to return price data.</p>

<p>Hope this helps.</p>

<p>Grant  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='51b303594ea552598b000095' id='51b303594ea552598b000095'>
<a href='#51b303594ea552598b000095'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1370686298000' class='quanto-date posted-at response-posted-at' href='#51b303594ea552598b000095'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hello Thomas,</p>

<p>Thought I&#39;d follow up on this issue.  Any insights?  Let me know if you need more information.</p>

<p>Thanks,</p>

<p>Grant  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='51b32dc230059960e0000087' id='51b32dc230059960e0000087'>
<a href='#51b32dc230059960e0000087'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f1edd0b03b228000d000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/81292895877c628963a3b56b408533e7?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f1edd0b03b228000d000001'>Thomas Wiecki</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1370697155000' class='quanto-date posted-at response-posted-at' href='#51b32dc230059960e0000087'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Grant,</p>

<p>I&#39;m actually working on some batchtransform changes that might help with this (but I can&#39;t say for sure that it will). Stay tuned!</p>

<p>Thomas  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='51c8bb31ab454f6d1f00001f' id='51c8bb31ab454f6d1f00001f'>
<a href='#51c8bb31ab454f6d1f00001f'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f1edd0b03b228000d000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/81292895877c628963a3b56b408533e7?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f1edd0b03b228000d000001'>Thomas Wiecki</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1372109626000' class='quanto-date posted-at response-posted-at' href='#51c8bb31ab454f6d1f00001f'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Grant,</p>

<p>Can you try again to see whether the recent fix sped up the batchtransform?</p>

<p>Thanks,<br>
Thomas  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='51c8dd5f7d2c8a858d00006b' id='51c8dd5f7d2c8a858d00006b'>
<a href='#51c8dd5f7d2c8a858d00006b'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1372118370000' class='quanto-date posted-at response-posted-at' href='#51c8dd5f7d2c8a858d00006b'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hello Thomas,</p>

<p>Still pretty slow:</p>

<pre><code>1970-01-01initialize:18INFOuniverse is 51 to 51.2  
2013-06-20handle_data:34INFOget_data 201.071977615 ms  
2013-06-20PRINT ----------------------------  
2013-06-20PRINT2013-06-20 20:00:00+00:00  
2013-06-20PRINT ----------------------------  
2013-06-20PRINT SIDS &amp; No. of SIDS  
2013-06-20PRINT[39714, 28327, 42413, 7597, 22865, 25682, 28149, 42838, 33431, 39000, 39227, 27740, 43583]  
2013-06-20PRINT13  
2013-06-20PRINT Current prices  
2013-06-20PRINT[ 21.26 35.4197 22.23 5.33 13.58 2.98 59.51 26.2999 3.65 24.6345 2.92 22.87 18.23 ]  
2013-06-20PRINT Trailing price window  
2013-06-20PRINT[[ 21.21 36.4299 23.41 ..., 2.96 23.09 nan] [ 21.21 36.4299 22.82 ..., 2.97 23.09 nan] [ 21.21 36.4299 22.82 ..., 2.96 23.09 nan] ..., [ 21.274 35.311 22.35 ..., 2.92 22.85 18.2299] [ 21.274 35.311 22.36 ..., 2.92 22.88 18.2299] [ 21.26 35.4197 22.23 ..., 2.92 22.87 18.23 ]]  
2013-06-20PRINT Trailing window length  
2013-06-20PRINT390  
</code></pre>

<p>Appears to be running at about 200 ms per call to the batch transform (which grabs a 1-day minute-level trailing window for each sid).</p>

<p>So, there appears to be no improvement over my most recent May 23, 2013 posting above.</p>

<p>Hmm?</p>

<p>Grant  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='51c8e5d77d2c8a88f2000052' id='51c8e5d77d2c8a88f2000052'>
<a href='#51c8e5d77d2c8a88f2000052'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f1edd0b03b228000d000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/81292895877c628963a3b56b408533e7?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f1edd0b03b228000d000001'>Thomas Wiecki</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1372120537000' class='quanto-date posted-at response-posted-at' href='#51c8e5d77d2c8a88f2000052'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Huh, indeed. I tested your earlier version a couple of days ago and it was much faster. But I can&#39;t replicate that now. I&#39;ll have to investigate...  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='51c8e65eab454f15ff000179' id='51c8e65eab454f15ff000179'>
<a href='#51c8e65eab454f15ff000179'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5129325375c044927f00003b'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f0d31a4138a1940012b68dbb3e54074c?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5129325375c044927f00003b'>Dennis C</a>
</div>
<a UTCms='1372120671000' class='quanto-date posted-at response-posted-at' href='#51c8e65eab454f15ff000179'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Thomas, are you benchmarking batch transform <em>vs.</em> the other method?  I find that server load can affect my runtime by an order of magnitude at heavy load.  </p>
</div>
</div>
</div>

</div>
<div class='sign-in-please'>
Please <a href='/signin?return_to=/posts/batch-transform-w-slash-set-universe-problem'>sign in</a> or
<a href='/users/sign_up?redirect_to=/posts/batch-transform-w-slash-set-universe-problem'>join Quantopian</a> to
post a reply.
</div>
</div>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId: "550580758292093",
      status: false,
      cookie: true,
      xfbml: true
    });
  };
  
  (function(d, debug){
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) {return;}
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
    ref.parentNode.insertBefore(js, ref);
  }(document, /*debug*/ false));
  
  window.twttr = (function (d,s,id) {
    var t, js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return; js=d.createElement(s); js.id=id;
    js.src="//platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs);
    return window.twttr || (t = { _e: [], ready: function(f){ t._e.push(f) } });
  }(document, "script", "twitter-wjs"));
</script>
<script>
  $(document).ready(function () {
    quanto.instances.pm = new quanto.PostManager(false)
  });
</script>

<div class='login-footer'>
<div class='container'>
<div class='login-footer-text'>
Become an expert in quant finance through Quantopian's hands-on education.
</div>
<div class='login-footer-button'>
<button class='btn btn-v2 stroke join-modal-link mixpanel-button' data-event='anon join footer click posts' data-mixpanel='click'>
Join Now
</button>
</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='error-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'>Error</span>
</div>
<div class='modal-body body-content'>
<p>Sorry, something went wrong.  Try again or contact us by <a class='feedback-link'>sending feedback</a>.</p>
</div>
<div class='modal-footer'>
<button class='btn btn-v2 blue action-button' data-dismiss='modal' href='#'>Close</button>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='confirmation-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'></span>
</div>
<div class='modal-body body-content'></div>
<div class='modal-footer'>
<div class='pull-right'>
<button class='btn btn-v2 border' data-dismiss='modal'>Cancel</button>
<button class='btn btn-v2 blue action-button' data-dismiss='modal'></button>
</div>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='message-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'></span>
</div>
<div class='modal-body body-content'></div>
<div class='modal-footer'>
<button class='btn btn-v2 blue action-button' data-dismiss='modal' id='message-modal-close'>Close</button>
</div>

</div>
</div>
</div>

<div class='always-bootstrap3-modals'>
<div class='fade modal quanto-modal-v2' id='join-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header visible-small'>
<span class='title'>
Join Quantopian.  It's Free!
</span>
<div class='modal-x-out visible-xs'></div>
</div>
<div class='modal-body'>
<div class='flex-wrap'>
<div class='join-left-pane hidden-small'>
<div class='margin_30l'>
<div class='join-hero-text'>
Join Quantopian.  It's Free!
</div>
<div class='join-benefits'>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image code'></div>
</div>
<div class='join-text'>
Use our research platform, backtester, and dozens of clean data sets.
</div>
</div>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image learn'></div>
</div>
<div class='join-text'>
Learn with our hands-on education and community forums.
</div>
</div>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image win'></div>
</div>
<div class='join-text'>
Enter to win cash prizes in our contest.
</div>
</div>
</div>
<div class='hidden saved-reminder'>
Don't worry, all your work is already saved.
</div>
</div>
</div>
<div class='join-right-pane'>
<div class='hidden-small'>
<div class='button-pane'>
<a class="button btn-v2 user-form-btn" href="/signin">Already a Quantopian member?</a>
</div>
</div>
<div class='visible-small'>
<div class='already-member'>
<a href='/signin'>Already a Quantopian member?</a>
</div>
</div>
<form class="quanto-form-v2" id="new-user-modal-form" action="/users" accept-charset="UTF-8" data-remote="true" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><div class='error-message hidden'>
<div class='message'></div>
</div>
<div class='name-group'>
<div class='form-group inline-block'>
<label for="user_firstname">First Name</label>
<input class="form-control firstname" pattern=".*" required="required" autocomplete="off" autofocus="autofocus" type="text" name="user[firstname]" id="user_firstname" />
</div>
<div class='form-group inline-block'>
<label for="user_lastname">Last Name</label>
<input class="form-control" value="" pattern=".*" required="required" autocomplete="off" type="text" name="user[lastname]" id="user_lastname" />
</div>
</div>
<div class='form-group'>
<label for="user_email">Email</label>
<input class="form-control" value="" pattern=".*" required="required" autocomplete="off" type="email" name="user[email]" id="user_email" />
</div>
<div class='form-group'>
<label for="user_password">Password</label>
<input autocomplete="off" class="form-control" pattern=".*" required="required" type="password" name="user[password]" id="user_password" />
</div>
<div class='checkbox eula'>
<input id='eula-checkbox' type='checkbox'>
<div class='quanto-checkbox'></div>
<label for='eula-checkbox' id='checkbox-label'>I accept the <a href='/policies/terms' target='_blank'>Terms Of Use</a> and <a href='/policies/privacy' target='_blank'>Privacy Policy</a>.</label>
</div>
<div class='checkbox mailchimp-box'>
<input name="user[allow_marketing_emails]" type="hidden" value="0" /><input type="checkbox" value="1" name="user[allow_marketing_emails]" id="user_allow_marketing_emails" />
<div class='quanto-checkbox'></div>
<label for='user_allow_marketing_emails'>
Send me email updates with the latest news from the Quantopian community. We send these emails about once a month.
</label>
</div>
<div class='button-row'>
<button class='btn-v2 blue full' data-redirect-to='/tutorials/getting-started' id='sign-up-button' type='Submit'>Join Quantopian</button>
</div>
</form></div>
</div>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='feedback-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title'>Contact Support</span>
</div>
<div class='modal-body'>
<form class='anon-user controls quanto-form-v2' id='feedback-form'>
<div class='feedback-inputs'>
<div class='form-group'>
<input autofocus class='form-control' id='feedback-email-box' name='email' placeholder='Email Address' type='email'>
</div>
<div class='form-group'>
<input class='form-control' id='feedback-name-box' placeholder='Name' type='name'>
</div>
<div class='form-group'>
<textarea class='form-control' id='feedback-box' name='feedback' placeholder='What may we help you with?' rows='10'></textarea>
</div>
</div>
</form>
<form class='hidden quanto-form-v2 select-resource-area'>
<div class='select-step select-type-step'>
<div class='form-group'>
<select class='form-control select-resource-dropdown' title='Select the item you need help with'>
<option value='algorithm'>Algorithm</option>
<option value='backtest'>Backtest</option>
<option value='notebook'>Notebook</option>
</select>
</div>
</div>
<div class='select-step loading-area hidden'>
<div class='loading-text'>
Loading...
</div>
</div>
<div class='select-step empty-list-area hidden'>
<div class='back-button'>Go Back</div>
<div class='empty-text'>
No <span class='empty-list-resource-text'>algorithms</span> found
</div>
</div>
<div class='select-algo-area select-step hidden'>
<div class='back-button'>Go Back</div>
<table class='select-algo-table select-item-table'>
<thead>
<tr>
<th>
Algorithm
<span class='sort-icon'></span>
</th>
<th>
Last Modified
<span class='sort-icon'></span>
</th>
</tr>
</thead>
</table>
</div>
<div class='select-backtest-area select-step hidden'>
<div class='back-button'>Go Back</div>
<table class='select-backtest-table select-item-table'>
<thead>
<tr>
<th>
Backtest
<span class='sort-icon'></span>
</th>
<th>
Started At
<span class='sort-icon'></span>
</th>
<th>
Overall Return
<span class='sort-icon'></span>
</th>
<th>
Status
<span class='sort-icon'></span>
</th>
</tr>
</thead>
</table>
</div>
<div class='select-notebook-area select-step hidden'>
<div class='back-button'>Go Back</div>
<div class='subtitle select-cell-step'>
Choose a cell to use as the preview for this notebook:
</div>
<div class='iframe-wrapper'>
<iframe class='notebook-list-iframe slow-fade' src=''></iframe>
</div>
<div class='progress-area slow-fade in'>
<div class='progress-container'>
<div class='progress-title'>
<div class='quanto-loader gray'></div>
</div>
</div>
</div>
<div class='maintenance-area'>
<div class='error-container'>
<div class='row'>
<div class='col-md-14 msg-title h1'>
Sorry, research is currently undergoing maintenance.
</div>
</div>
<div class='row'>
<div class='col-md-14 msg-subtitle'>
Please check back shortly. If the maintenance period lasts longer than expected,
you can find updates on <a href='https://status.quantopian.com/'>status.quantopian.com</a>.
</div>
</div>

</div>
</div>
<div class='error-area'>
<div class='error-container'>
<div class='row'>
<div class='col-md-14 msg-title h1'>
Sorry, something went wrong on our end.
</div>
</div>
<div class='row'>
<div class='col-md-14 msg-subtitle'>
Please try again or contact <a class='open-feedback-link'>Quantopian support</a>.
</div>
</div>

</div>
</div>

</div>
<div class='selected-item-area select-step hidden'>
<div class='selected-item-group form-group'>
<div class='selected-item-control'>
<input class='disabled form-control selected-item-box' type='text'>
<span class='secure-icon icon'></span>
<button class='btn change change-primary-item-button change-selection-button new-btn transparent' type='button'>
<span class='refresh-icon icon'></span>
</button>
</div>
<div class='selected-backtest-control'>
<input class='disabled form-control selected-backtest-box' type='text'>
<span class='secure-icon icon'></span>
<button class='btn change-backtest-button change-selection-button new-btn transparent' type='button'>
<span class='refresh-icon icon'></span>
</button>
</div>
</div>
<div class='checkbox-group form-group'>
<div class='checkbox give-permission'>
<input class='give-permission-checkbox' id='feedback-give-permission-checkbox' type='checkbox'>
<div class='quanto-checkbox'></div>
<label for='feedback-give-permission-checkbox'>
I permit Quantopian to view <span class='item-type-text'>this algorithm,
backtest or notebook and their imported datasets</span> for the purpose of providing support.
</label>
</div>
</div>
</div>
</form>

<div class='loading-step hidden'>
<div class='loading-text'>
Submitting your support ticket...
</div>
</div>
<div class='success-step invisible'>
<h2 class='title center'>
You've successfully submitted a support ticket.
</h2>
<p>
Our support team will be in touch soon.
</p>
<div class='confirmation-image'></div>
</div>
</div>
<div class='modal-footer'>
<button class='btn-v2 blue' id='send-feedback-button'>Send</button>
<div class='error-message hidden'>
Error submitting support request.
</div>
</div>

</div>
</div>
</div>

</div>
</div>
<div class='footer' id='quanto-footer-container'>
<div class='container'>
<div class='row header-row'>
<div class='col-sm-fourth span3'>
<img class='async-image logotype-image' data-src='https://qf.quantopian.com/assets/logos/logo-q-full-b23bda5ac757691b9259d396d0dfef91567165868b8c955a836649686e6d2248.svg'>
</div>
<div class='col-sm-fourth span3'></div>
<div class='col-sm-fourth span3'></div>
<div class='col-sm-fourth span3'>
<div class='feedback-email'>
Need help?
<a href="/cdn-cgi/l/email-protection#294f4c4c4d4b484a4269585c48475d4659404847074a4644">Contact support.</a>
</div>
</div>
</div>
<div class='row'>
<div class='col-sm-fourth span3'>
<div class='header'>Company</div>
<div class='footer-row'>
<a href='/about'>About</a>
</div>
<div class='footer-row'>
<a href='/academia'>Academia</a>
</div>
<div class='footer-row'>
<a href='/jobs'>Careers</a>
</div>
<div class='footer-row'>
<a href='/posts'>Community</a>
</div>
<div class='footer-row'>
<a href='/events'>Events</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Learn &amp; Support</div>
<div class='footer-row'>
<a href='/faq'>FAQ</a>
</div>
<div class='footer-row'>
<a href='/tutorials/getting-started'>Getting Started</a>
</div>
<div class='footer-row'>
<a href='/docs'>Documentation</a>
</div>
<div class='footer-row'>
<a href='/tutorials'>Tutorials</a>
</div>
<div class='footer-row'>
<a href='/lectures'>Lectures</a>
</div>
<div class='footer-row'>
<a href='/opensource'>Open Source</a>
</div>
<div class='footer-row'>
<a href='https://status.quantopian.com/'>Site Status</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Notices</div>
<div class='footer-row'>
<a href='/policies/terms'>Terms of Use</a>
</div>
<div class='footer-row'>
<a href='/policies/privacy'>Privacy Policy</a>
</div>
<div class='footer-row'>
<a href='/security'>Security</a>
</div>
<div class='footer-row'>
<a href='/policies/code-of-conduct'>Code of Conduct</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Follow Us</div>
<div class='footer-row'>
<a href='https://www.twitter.com/quantopian'>Twitter</a>
</div>
<div class='footer-row'>
<a href='https://www.facebook.com/quantopian'>Facebook</a>
</div>
<div class='footer-row'>
<a href='https://www.linkedin.com/company/quantopian'>LinkedIn</a>
</div>
<div class='footer-row'>
<a href='https://www.youtube.com/channel/UC606MUq45P3zFLa4VGKbxsg'>YouTube</a>
</div>
</div>
</div>
<div class='row'>
<div class='col-xs-14 span12'>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian.
</p>
<p>
In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>

</div>
</div>
</div>
</div>
</div>
<div class='mobile-footer'>
<div class='mobile-nav-category main-links'>
<div class='mobile-nav-row-footer'>
<a href='/about'>About Quantopian</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/jobs'>Careers</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/posts'>Community</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/events'>Events</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/docs'>Documentation</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/academia'>Academia</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/lectures'>Lectures</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://status.quantopian.com/'>Status</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.facebook.com/quantopian'>Facebook</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.twitter.com/quantopian'>Twitter</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.linkedin.com/company/quantopian'>LinkedIn</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.youtube.com/channel/UC606MUq45P3zFLa4VGKbxsg'>YouTube</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/policies/terms'>Terms of Use</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/policies/privacy'>Privacy Policy</a>
</div>
</div>
<div class='mobile-nav-category'>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian.
</p>
<p>
In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>

</div>
</div>
</div>

</div>
<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script></body>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', "UA-8519877-1", {
    cookieDomain: "quantopian.com"
  });
  ga('set', 'dimension1', 'session_5f9dc7425d387f00077e48e4');
  
  ga('send', 'pageview');
</script>

<input type="hidden" name="is_mac" id="is_mac" value="false" />
<input type="hidden" name="mp" id="mp" value="75873953cd404bcc1da88a55ff51e3b4" />
<script>
  (function(e,a){if(!a.__SV){var b=window;try{var c,l,i,j=b.location,g=j.hash;c=function(a,b){return(l=a.match(RegExp(b+"=([^&]*)")))?l[1]:null};g&&c(g,"state")&&(i=JSON.parse(decodeURIComponent(c(g,"state"))),"mpeditor"===i.action&&(b.sessionStorage.setItem("_mpcehash",g),history.replaceState(i.desiredHash||"",e.title,j.pathname+j.search)))}catch(m){}var k,h;window.mixpanel=a;a._i=[];a.init=function(b,c,f){function e(b,a){var c=a.split(".");2==c.length&&(b=b[c[0]],a=c[1]);b[a]=function(){b.push([a].concat(Array.prototype.slice.call(arguments,
  0)))}}var d=a;"undefined"!==typeof f?d=a[f]=[]:f="mixpanel";d.people=d.people||[];d.toString=function(b){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);b||(a+=" (stub)");return a};d.people.toString=function(){return d.toString(1)+".people (stub)"};k="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
  for(h=0;h<k.length;h++)e(d,k[h]);a._i.push([b,c,f])};a.__SV=1.2;b=e.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";c=e.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}})(document,window.mixpanel||[]);
  mixpanel.init("75873953cd404bcc1da88a55ff51e3b4");
</script>
<script>
  mixpanel.track("view page", {"page": window.location.pathname});
</script>
</html>
