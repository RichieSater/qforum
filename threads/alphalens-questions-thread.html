<!DOCTYPE html>
<html>
<head>
<link href='i1.wp.com' rel='dns-prefetch'>
<link href='i2.wp.com' rel='dns-prefetch'>
<link href='i3.wp.com' rel='dns-prefetch'>
<meta content='2HgX9mcLHaPOX6sfaaAkhWtblhEB9yUNw4l6l46e1k4' name='google-site-verification'>
<link rel="shortcut icon" type="image/x-icon" href="external/favicon-q-ac1a76f2c200e9026b5b1147519bb4fab6256910588b831e2411bc6c7c1218c3.png" />
<title>
Alphalens Questions Thread
</title>
<meta content='Hello Folks, TL;DR Ask questions about Alphalens here and we&#39;ll answer them in comments and/or webinars. During a recent chat with community member Joakim, it became apparent that a similar thread to our  Tearsheet Feedback Thread  would help people understand  Alphalens . Alphalens is currently underused by our community members, but is an incredibly powerful tool that allows you to eliminate a lot of frustration and time from the strategy development process. Every trading strategy depends...' name='description'>
<link rel="stylesheet" media="all" href="external/quanto-base-bundle-e8eb6050172aa0d24124d5c24bac90b2cccd88b5b9c7742026c0e9efab038c6e.css" />
<link rel="stylesheet" media="all" href="external/quanto-posts-bundle-aab01368d3f82d8dafc94ee9eabb82e77dc8c9fbbffa952fdcdc744dfa523cf3.css" />
<script src="external/quanto_global-057218867db29d5768131af5d6fb3476cef098e7d9e655108befb903c7ee985e.js"></script>
<script src="external/posts_bundle-3dfd82fa469c393d752e461d837aec9e4e364ae39f49198e34a6626f2180fdf7.js"></script>
<link href='external/logo-q-180x180-0f5a6a439c99203ed4aea6f656e7604c543d287be43d8b17c7591c1131f09a59.png' rel='apple-touch-icon'>
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="n5IGgYx6gBEUpF7B3W//mujmEbf25a1bKWHdwAzccDnj9HDMLoxS8q25B/CSgFfu0Ggy3owpuECrbgaqppkSgg==" />
<meta content='width=device-width, initial-scale=1.0' name='viewport'>
<script>
//<![CDATA[
window.quanto_data={};quanto_data.bounce_back_params={"show_modal":null,"feedback_text":null};quanto_data.namespace="public";quanto_data.talib_info={"ADOSC":["Chaikin A/D Oscillator (Volume Indicators)",["fastperiod","3"],["slowperiod","10"]],"ADX":["Average Directional Movement Index (Momentum Indicators)",["timeperiod","14"]],"ADXR":["Average Directional Movement Index Rating (Momentum Indicators)",["timeperiod","14"]],"APO":["Absolute Price Oscillator (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["matype","0"]],"AROON":["Aroon (Momentum Indicators)",["timeperiod","14"]],"AROONOSC":["Aroon Oscillator (Momentum Indicators)",["timeperiod","14"]],"ATR":["Average True Range (Volatility Indicators)",["timeperiod","14"]],"BBANDS":["Bollinger Bands (Overlap Studies)",["timeperiod","5"],["nbdevup","2"],["nbdevdn","2"],["matype","0"]],"BETA":["Beta (Statistic Functions)",["timeperiod","5"]],"CCI":["Commodity Channel Index (Momentum Indicators)",["timeperiod","14"]],"CMO":["Chande Momentum Oscillator (Momentum Indicators)",["timeperiod","14"]],"CORREL":["Pearson's Correlation Coefficient (r) (Statistic Functions)",["timeperiod","30"]],"DEMA":["Double Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"DX":["Average Directional Movement Index (Momentum Indicators)",["timeperiod","14"]],"EMA":["Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"KAMA":["Kaufman Adaptive Moving Average (Overlap Studies)",["timeperiod","30"]],"LINEARREG":["Linear Regression (Statistic Functions)",["timeperiod","14"]],"LINEARREG_ANGLE":["Linear Regression Angle (Statistic Functions)",["timeperiod","14"]],"LINEARREG_INTERCEPT":["Linear Regression Intercept (Statistic Functions)",["timeperiod","14"]],"LINEARREG_SLOPE":["Linear Regression Slope (Statistic Functions)",["timeperiod","14"]],"MA":["Moving average (Overlap Studies)",["timeperiod","30"],["matype","0"]],"MACD":["Moving Average Convergence/Divergence (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["signalperiod","9"]],"MACDEXT":["MACD with controllable MA type (Momentum Indicators)",["fastperiod","12"],["fastmatype","0"],["slowperiod","26"],["slowmatype","0"],["signalperiod","9"],["signalmatype","0"]],"MACDFIX":["Moving Average Convergence/Divergence Fix 12/26 (Momentum Indicators)",["signalperiod","9"]],"MAX":["Highest values over a specified period (Math Operators)",["timeperiod","30"]],"MAXINDEX":["Index of highest value over a specified period (Math Operators)",["timeperiod","30"]],"MFI":["Money Flow Index (Momentum Indicators)",["timeperiod","14"]],"MIDPOINT":["Midpoint over period (Overlap Studies)",["timeperiod","14"]],"MIDPRICE":["Midpoint Price over period (Overlap Studies)",["timeperiod","14"]],"MIN":["Lowest value over a specified period (Math Operators)",["timeperiod","30"]],"MININDEX":["Index of lowest value over a specified period (Math Operators)",["timeperiod","30"]],"MINMAX":["Lowest and highest values over a specified period (Math Operators)",["timeperiod","30"]],"MINMAXINDEX":["Indexes of lowest and highest values over a specified period (Math Operators)",["timeperiod","30"]],"MINUS_DI":["Minus Directional Indicator (Momentum Indicators)",["timeperiod","14"]],"MINUS_DM":["Minus Directional Movement (Momentum Indicators)",["timeperiod","14"]],"MOM":["Momentum (Momentum Indicators)",["timeperiod","10"]],"NATR":["Normalized Average True Range (Volatility Indicators)",["timeperiod","14"]],"PLUS_DI":["Plus Directional Indicator (Momentum Indicators)",["timeperiod","14"]],"PLUS_DM":["Plus Directional Movement (Momentum Indicators)",["timeperiod","14"]],"PPO":["Percentage Price Oscillator (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["matype","0"]],"ROC":["Rate of change: ((price/prevPrice)-1)*100 (Momentum Indicators)",["timeperiod","10"]],"ROCP":["Rate of change Percentage: (price-prevPrice)/prevPrice (Momentum Indicators)",["timeperiod","10"]],"ROCR":["Rate of change ratio: (price/prevPrice) (Momentum Indicators)",["timeperiod","10"]],"ROCR100":["Rate of change ratio 100 scale: (price/prevPrice)*100 (Momentum Indicators)",["timeperiod","10"]],"RSI":["Relative Strength Index (Momentum Indicators)",["timeperiod","14"]],"SMA":["Simple Moving Average (Overlap Studies)",["timeperiod","30"]],"STDDEV":["Standard Deviation (Statistic Functions)",["timeperiod","5"],["nbdev","1"]],"STOCH":["Stochastic (Momentum Indicators)",["fastk_period","5"],["slowk_period","3"],["slowk_matype","0"],["slowd_period","3"],["slowd_matype","0"]],"STOCHF":["Stochastic Fast (Momentum Indicators)",["fastk_period","5"],["fastd_period","3"],["fastd_matype","0"]],"STOCHRSI":["Stochastic Relative Strength Index (Momentum Indicators)",["timeperiod","14"],["fastk_period","5"],["fastd_period","3"],["fastd_matype","0"]],"T3":["Triple Exponential Moving Average (T3) (Overlap Studies)",["timeperiod","5"],["vfactor","0.7"]],"TEMA":["Triple Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"TRIMA":["Triangular Moving Average (Overlap Studies)",["timeperiod","30"]],"TRIX":["1-day Rate-Of-Change (ROC) of a Triple Smooth EMA (Momentum Indicators)",["timeperiod","30"]],"TSF":["Time Series Forecast (Statistic Functions)",["timeperiod","14"]],"ULTOSC":["Ultimate Oscillator (Momentum Indicators)",["timeperiod1","7"],["timeperiod2","14"],["timeperiod3","28"]],"VAR":["Variance (Statistic Functions)",["timeperiod","5"],["nbdev","1"]],"WILLR":["Williams' %R (Momentum Indicators)",["timeperiod","14"]],"WMA":["Weighted Moving Average (Overlap Studies)",["timeperiod","30"]]};quanto_data.nb_preview_url="https://notebooks-preview.prd.pub.quantopian.com";quanto_data.delay_nb_preview_load=true;
//]]>
</script>
<meta content='https://www.quantopian.com/posts/alphalens-questions-thread' property='og:url'>
<meta content='Alphalens Questions Thread' property='og:title'>

<input type="hidden" name="env" id="quanto-env" value="production" />
<meta content='550580758292093' property='fb:app_id'>
<meta content='https://www.quantopian.com/posts/alphalens-questions-thread' property='og:url'>
<meta content='https://media.quantopian.com/public/og-image-default.png' property='og:image'>
<meta content='Alphalens Questions Thread' property='og:title'>
<meta content='Hello Folks, TL;DR Ask questions about Alphalens here and we&#39;ll answer them in comments and/or webinars. During a recent chat with community member Joakim, it became apparent that a similar thread to our  Tearsheet Feedback Thread  would help people understand  Alphalens . Alphalens is currently underused by our community members, but is an incredibly powerful tool that allows you to eliminate a lot of frustration and time from the strategy development process. Every trading strategy depends...' property='og:description'>
</head>
<script type='application/ld+json'>
  {
    "@context": "http://schema.org",
    "@type": "Organization",
    "url": "https://www.quantopian.com",
    "logo": "https://media.quantopian.com/logos/logo-q-press-red.png"
  }
</script>
<body class='' ontouchstart=''>
<div id='fb-root'></div>
<div class='wrapper'>
<div class='alert-v2 error'>
<div class='message'>
Quantopian's community platform is shutting down. Please read <a href="/posts/quantopians-community-services-are-closing">this post</a> for more information and <a href='/account#account'>download your code</a>.
</div>
</div>
<div class='navbar navbar-default navbar-static-top' id='app-navbar'>
<div class='container-fluid'>
<div class='navbar-header'>
<button class='navbar-toggle collapsed' data-target='#app-navbar-collapse' data-toggle='collapse'>
<span class='icon hamburger-menu'></span>
</button>
<a class='navbar-brand' href='/home'>
<img class='logo-image async-image' data-src='external/logo-q-white-b141ea6018546e5a4ecc3d10d8440ec076fc4385764e948b322828cc70950a76.svg'>
</a>
</div>
<div class='collapse navbar-collapse' id='app-navbar-collapse'>
<ul class='nav navbar-nav navbar-right'>
<li class='dropdown quanto-dropdown-new'>
<li>
<a class='header' href='/docs'>
Documentation
</a>
</li>
<li class='dropdown quanto-dropdown-new'>
<a class='header' data-toggle='dropdown' href='#'>
Learn
</a>
<ul class='dropdown-menu'>
<li>
<a class='mixpanel-button' data-event='main nav getting started clicked' href='/tutorials/getting-started'>Getting Started</a>
</li>
<li>
<a class='mixpanel-button' data-event='main nav tutorials clicked' href='/tutorials'>Tutorials</a>
</li>
<li>
<a class='mixpanel-button' data-event='main nav lectures clicked' href='/lectures'>Lectures</a>
</li>
</ul>
</li>
<li>
<a class='header' href='/posts' id='forum-link'>
Forum
</a>
</li>
<li>
<a class="header" href="/signin?return_to=/posts/alphalens-questions-thread">Log In</a>
</li>
</li>

</ul>
</div>
</div>
</div>
<script>
  $(document).ready(function () {
    quanto.instances.fm = new quanto.FeedbackManager();
    quanto.instances.hm = new quanto.headerManager();
  })
</script>


<div class='content content-area new-style'>
<input type="hidden" name="page-id" id="page-id" value="postatomic" />
<script src="external/MathJax.js?config=TeX-AMS_HTML-full.js,Safe" async="async"></script>
<div class='container page-container post-atomic'>
<input id='parent-post-id-val' type='hidden' value='5b61ff80306123003dba9f4b'>
<div class='post-container' data-post-id='5b61ff80306123003dba9f4b' id='5b61ff80306123003dba9f4b'>
<div class='back-button back-to-community'>Back to Community</div>
<div class='post-title'>Alphalens Questions Thread</div>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5346083a839ff34e1400010a'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e2319a353b35eac99e765c836ba72044?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5346083a839ff34e1400010a'>Delaney Mackenzie</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<span class='posted-at'>posted </span>
<span UTCms='1533149056000' class='quanto-date posted-at'></span>
<div class='pull-right other-actions'>
<div class='dropup inline-block'>
<div class='dropdown share-control other-action-link'>
<div data-toggle='dropdown'>
<div class='share-image'></div>
Share
</div>
<ul class='dropdown-menu share-options-menu'>
<li>
<a class='share-row' href='https://twitter.com/intent/tweet?text=Alphalens Questions Thread&amp;url=https%3A%2F%2Fwww.quantopian.com%2Fposts%2Falphalens-questions-thread%3Futm_source%3Dwebsite_share%26utm_campaign%3Dalphalens-questions-thread%26utm_medium%3Dtwitter&amp;via=quantopian'>
<i class='icon icon-twitter'></i>
Share on Twitter
</a>
</li>
<li>
<div class='share-row facebook-button'>
<i class='icon icon-facebook'></i>
Share on Facebook
</div>
</li>
<li>
<div class='share-row linkedin-button' data-share-url='https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Fwww.quantopian.com%2Fposts%2Falphalens-questions-thread%3Futm_source%3Dwebsite_share%26utm_campaign%3Dalphalens-questions-thread%26utm_medium%3Dlinkedin&amp;title=Alphalens+Questions+Thread+%28Delaney+Mackenzie%29&amp;source=Quantopian'>
<i class='icon icon-linkedin'></i>
Share on LinkedIn
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>

<div class='tags tag-row'>
<a class='tag mixpanel-button' data-event='tag click' data-mixpanel='Finance Theory' data-tag-id='55c50e7d8d4710ec6e000002' href='/posts/tag/Finance-Theory/newest'>Finance Theory</a>
<a class='tag mixpanel-button' data-event='tag click' data-mixpanel='Seeking Help' data-tag-id='55c50e7d8d4710ec6e000003' href='/posts/tag/Seeking-Help/newest'>Seeking Help</a>
<a class='tag mixpanel-button' data-event='tag click' data-mixpanel='Tools and Tips' data-tag-id='55c50e7d8d4710ec6e000011' href='/posts/tag/Tools-and-Tips/newest'>Tools and Tips</a>
<a class='tag mixpanel-button' data-event='tag click' data-mixpanel='Research' data-tag-id='55c50e7d8d4710ec6e000018' href='/posts/tag/Research/newest'>Research</a>
<a class='tag mixpanel-button' data-event='tag click' data-mixpanel='Alphalens' data-tag-id='5b61da7da902a275124a9372' href='/posts/tag/Alphalens/newest'>Alphalens</a>
</div>
<input type="hidden" name="social_fb_post_link" id="social_fb_post_link" value="https://www.quantopian.com/posts/alphalens-questions-thread?utm_source=website_share&amp;utm_campaign=alphalens-questions-thread&amp;utm_medium=facebook" />
<input type="hidden" name="social_post_image" id="social_post_image" value="external/logo-q-red-outline.png" />
<input type="hidden" name="social_post_author" id="social_post_author" value="Delaney Mackenzie" />
<div class='body-text'>
<div class='body-text-container post-body'><p>Hello Folks,</p>

<p>TL;DR Ask questions about Alphalens here and we&#39;ll answer them in comments and/or webinars.</p>

<p>During a recent chat with community member Joakim, it became apparent that a similar thread to our <a href="https://www.quantopian.com/posts/tearsheet-feedback-thread">Tearsheet Feedback Thread</a> would help people understand <a href="https://www.quantopian.com/posts/alphalens-a-new-tool-for-analyzing-alpha-factors">Alphalens</a>. Alphalens is currently underused by our community members, but is an incredibly powerful tool that allows you to eliminate a lot of frustration and time from the strategy development process.</p>

<p>Every trading strategy depends on a predictive model, Alphalens tests whether a model is predictive without getting bogged down with any of the details associated with a full backtest. Our <a href="https://www.quantopian.com/tutorials/getting-started">Getting Started Tutorial</a> and <a href="https://www.quantopian.com/lectures/factor-analysis-with-alphalens">Factor Analysis with Alphalens Lecture</a> are both resources you can use to learn more about Alphalens on your own.</p>

<p>If you develop a strategy in the backtester, you&#39;re going to spend a ton of time debugging an algorithm and making sure the portfolio optimizer works well, plus running long backtests. With Alphalens, you can just quickly test whether your model is predictive. Most ideas fail at this testing stage, so with alphalens you can fail faster and iterate, versus spending way more time testing each idea. Max talks about this workflow in <a href="https://www.youtube.com/watch?v=jPYffE6RvKg">this video</a>. If you want a deeper dive, I go through the whole process of turning an idea into an algorithm in <a href="https://www.youtube.com/watch?v=J_kzoZOxsZ0&list=PLRFLF1OxMm_VdDSn1BVd7bGKGak5Uss89&index=19">this webinar</a>.</p>

<p>Once you&#39;ve determined your model/models are predictive, you can drop them into <a href="https://www.quantopian.com/lectures/example-long-short-equity-algorithm">our template</a> to further test whether they survives real market conditions like slippage and transaction costs.</p>

<p>Please leave your questions on Alphalens here so that one of us, can respond via a comment and/or via a recorded webinar or video. We&#39;ll run webinars or record videos whenever we have enough questions to go through, up to a reasonable total numbe. We&#39;re not sure of the response we&#39;ll get here so please work with us as we adapt to the level of interest. If you&#39;d like you can also attach the specific Alphalens output or tearsheet that you&#39;d like help with.</p>
</div>
</div>
<div class='disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>

</div>

<div class='container page-container post-atomic'>
<div class='section-header reply-header'>
<div class='reply-title'>127 responses</div>
</div>
<div class='replies'>
<div class='post-container response-container' data-post-id='5b6289223061230040baa477' id='5b6289223061230040baa477'>
<a href='#5b6289223061230040baa477'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5971e2308bc634000d022f24'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3fff8e67995978b6170deb9d9001a7b6?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5971e2308bc634000d022f24'>Joakim Arvidsson (Cream Mongoose)</a>
<span class='badge medal'></span>
</div>
<a UTCms='1533184290000' class='quanto-date posted-at response-posted-at' href='#5b6289223061230040baa477'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thanks for this!</p>

<p>I do have a lot of questions around Alphalens and its associated statistics when researching alpha. Hopefully I&#39;m not the only one. Most of my questions are related to the &#39;Information Analysis&#39; table (see top of second to last cell output in the attached Alphalens Template).</p>

<ol>
<li>Does a positive IC skew mean that there&#39;s more predictive information in the top quantile (for longs) and vice versa for negative skew? If not, what does the IC skew tell me?<br></li>
<li>If I set the &#39;null hypothesis&#39; threshold to 5%, and if the p-value is below 5% for the 5 day holding period but above 5% for 1 day (or vice versa), do I accept or reject the &#39;null hypothesis?&#39; What &#39;bias&#39; am I vulnerable to if I &#39;cherrypick&#39; holding period based on what the IC p-value tell me?<br></li>
<li>Does choosing a longer test period reduce the likelihood of getting a false-negative p-value? (maybe I should be more concerned with false-positives?) What&#39;s a good balance? Is one year + one month of future returns sufficient?<br></li>
<li>If I still &#39;believe&#39; in a factor, but p-value &gt; 0.05, is it wrong / bad practice to test a different time series to see if it returns a p-value &lt; 0.05? Essentially p-value hunting to &#39;fit&#39; my hypothesis (did I just answer my own question there?). It&#39;s possible that a factor has predictive power during some time periods, and not during others though, correct? (<a href="https://www.investopedia.com/articles/trading/07/stationary.asp">non-stationarity</a> (?))<br></li>
<li>Similar to above, for &#39;false-positive&#39; p-values (below 0.05) and IC, in general, is it a good idea to re-test a &#39;good&#39; factor (p-value of &lt;0.05 and high IC) during a different time period (cross-validation(?)), to ensure it wasn&#39;t just a &#39;false-positive&#39; during the first test? If so, by how much does a second test reduce the likelihood of a &#39;false-positive&#39; if both tests have p-value of &lt;0.05 and high-ish IC?<br></li>
<li>If a &#39;combined_factor&#39; has some individual factors with p_values above 0.05 and/or negative IC during the test period, but when removing them from the &#39;combined_factor&#39; results in significantly lower returns in backtests (i.e. fitted to market noise), what should I do with the &#39;bad&#39; factors? Should I try to see if any combination of non-predictive factors, when combined have a p-value of &lt; 0.05? Or just remove them altogether?<br></li>
<li>Does a higher IC <a href="https://en.wikipedia.org/wiki/Kurtosis">Kurtosis</a> mean that there are more extreme outliers and therefore a stronger case for &#39;winzorizing&#39; the factor? My factors tend to have fairly low IC Kurtosis values (well below 3, which I believe is the peak for a normal distribution (?)). Is this good or bad?<br></li>
<li>IC Std. - the lower the better in relation to the IC Mean?? What does IC Std. actually tell me?<br></li>
<li>Risk-adjusted IC - is this &#39;volatility&#39; adjusted IC? If so, is it essentially: IC / IC Std.?<br></li>
<li><a href="https://en.wikipedia.org/wiki/T-statistic">T-stat</a>(IC) - what does this tell me, in relation to alpha research? Higher the better?<br></li>
<li>In this <a href="https://www.youtube.com/watch?v=JRuPx6lhP9M">Q Short video on IC and P-values</a>, Delaney mentions at around 3:15 in the video that there&#39;s currently a lot of debate whether p-value analysis is meaningful or not. Could you expand a bit on this please? Is there a school of thought that argues that p-values should be seen as &#39;relative&#39; (i.e. the lower the better) rather than binary?<br></li>
<li>In the graph, IC Observed Quantile (y-axis) to Normal Distribution Quantile (x-axis), does one wand to see the bottom left tail of the S-shaped plot to be above the divider line, and the upper right S-tail to be below the line? Or it doesn&#39;t matter as long as it&#39;s a clear S-shape?<br></li>
<li>Does an IC value of 0.1 mean that the factor if predictive 10% of the time, and the other 90% of the time it&#39;s just random noise / coin-flipping? And an IC value of 1.0 means the factor is predictive 100% of the time?</li>
</ol>

<p>Sorry for the many (basic) stats questions but I&#39;d like to understand all of this better in relation to alpha research in Alphalens.</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b628b816c85c53bb31a0b0d' id='5b628b816c85c53bb31a0b0d'>
<a href='#5b628b816c85c53bb31a0b0d'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5971e2308bc634000d022f24'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3fff8e67995978b6170deb9d9001a7b6?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5971e2308bc634000d022f24'>Joakim Arvidsson (Cream Mongoose)</a>
<span class='badge medal'></span>
</div>
<a UTCms='1533184897000' class='quanto-date posted-at response-posted-at' href='#5b628b816c85c53bb31a0b0d'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Here&#39;s the Alphalens notebook template...  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b6296f73061230049baa4c5' id='5b6296f73061230049baa4c5'>
<a href='#5b6296f73061230049baa4c5'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5971e2308bc634000d022f24'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3fff8e67995978b6170deb9d9001a7b6?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5971e2308bc634000d022f24'>Joakim Arvidsson (Cream Mongoose)</a>
<span class='badge medal'></span>
</div>
<a UTCms='1533187831000' class='quanto-date posted-at response-posted-at' href='#5b6296f73061230049baa4c5'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Sorry, a few more:</p>

<p>&#39;14. How can I check the correlation of two different alpha factors?</p>

<p>&#39;15. If I combine two uncorrelated alpha factors that I&#39;ve found, is there any need to run the combined factor through Alphalens (over a different training period?)?</p>

<p>&#39;16. By combining two uncorrelated (and seemingly conflicting) alpha factors, for example one Momentum factor and one ST Reversal factor, wouldn&#39;t you lose alpha by combining them?</p>

<p>&#39;17. Taking the above example again, one Momentum Factor and one ST Reversal factor combined into one. The &#39;Strategic Intent&#39; for the Momentum factor is the Newtonian idea that &#39;stocks in motion tend to stay in motion&#39; whereas the &#39;Strategic Intent&#39; for the ST Reversal factor is essentially the opposite (Mr. Market overreacts in the short-term). Is it ok to have separate Economic Rational for each factor, or is it not a good idea to combine two factors that have conflicting rationale (as they might be negatively correlated (?))?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b62aac2e100bb0041075e81' id='5b62aac2e100bb0041075e81'>
<a href='#5b62aac2e100bb0041075e81'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5971e2308bc634000d022f24'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3fff8e67995978b6170deb9d9001a7b6?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5971e2308bc634000d022f24'>Joakim Arvidsson (Cream Mongoose)</a>
<span class='badge medal'></span>
</div>
<a UTCms='1533192898000' class='quanto-date posted-at response-posted-at' href='#5b62aac2e100bb0041075e81'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thanks @OC!</p>

<p>Will be reading that second paper you linked to.</p>

<p>All,</p>

<p>I also just wanted to mention that I&#39;ve found many of the lectures very helpful in explaining a lot of this (though I still have those above questions), especially &#39;<a href="https://www.quantopian.com/lectures/p-hacking-and-multiple-comparisons-bias#watch">P-hacking and Multiple Comparisons Bias</a>&#39; and &#39;<a href="https://www.quantopian.com/lectures/spearman-rank-correlation#watch">Spearman Rank Correlation</a>&#39; lectures. </p>

<p>I wish there were videos available for the &#39;<a href="https://www.quantopian.com/lectures/hypothesis-testing">Hypothesis Testing</a>&#39; and the &#39;<a href="https://www.quantopian.com/lectures/confidence-intervals">Confidence Intervals</a>&#39;  lectures as well, though the Notebooks and Exercises are very helpful too.</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b62c999e100bb3a4f075d7d' id='5b62c999e100bb3a4f075d7d'>
<a href='#5b62c999e100bb3a4f075d7d'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1533200793000' class='quanto-date posted-at response-posted-at' href='#5b62c999e100bb3a4f075d7d'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>It would seem that for Alphalens to be helpful, the risk model would need to be incorporated.  For example, say I decide to cook up a factor, and it just happens to be similar to one of these:</p>

<pre><code>from quantopian.pipeline.experimental import Momentum, ShortTermReversal, Size, Value, Volatility  
</code></pre>

<p>I could spend a lot of time analyzing and perfecting my factor, only to have a very unpleasant surprise when I try to use it in an algo for the contest/fund.</p>

<p>Any thoughts on how to address this problem?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b643a90c6a738004a433e9f' id='5b643a90c6a738004a433e9f'>
<a href='#5b643a90c6a738004a433e9f'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1533295248000' class='quanto-date posted-at response-posted-at' href='#5b643a90c6a738004a433e9f'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Would there be any way to roll up all of the information spit out by Alphalens into a single figure of merit?  This would allow it to be used for screening a large number of factors (e.g. factors such as the ones described here: <a href="https://www.quantopian.com/posts/the-101-alphas-project">https://www.quantopian.com/posts/the-101-alphas-project</a>).  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b68b77d79929c004e1b32ca' id='5b68b77d79929c004e1b32ca'>
<a href='#5b68b77d79929c004e1b32ca'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5346083a839ff34e1400010a'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e2319a353b35eac99e765c836ba72044?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5346083a839ff34e1400010a'>Delaney Mackenzie</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1533589373000' class='quanto-date posted-at response-posted-at' href='#5b68b77d79929c004e1b32ca'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thanks a ton for all the questions, I&#39;m working internally to set up a time to get them answered. Been a bit busy with the recent news:</p>

<p><a href="https://www.quantopian.com/posts/quantopian-funds-over-50-dollars-million-to-a-single-strategy-155-dollars-million-overall">https://www.quantopian.com/posts/quantopian-funds-over-50-dollars-million-to-a-single-strategy-155-dollars-million-overall</a>  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='5b68e8689d597000424c119d' id='5b68e8689d597000424c119d'>
<a href='#5b68e8689d597000424c119d'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5971e2308bc634000d022f24'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3fff8e67995978b6170deb9d9001a7b6?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5971e2308bc634000d022f24'>Joakim Arvidsson (Cream Mongoose)</a>
<span class='badge medal'></span>
</div>
<a UTCms='1533601896000' class='quanto-date posted-at response-posted-at' href='#5b68e8689d597000424c119d'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Great news from Fawce! Congratulations to everyone!</p>

<p>A few more Alphalens and alpha research related questions from me. Sorry for the multiple posts. I hope it&#39;s ok to just post questions here for now as they come up?</p>

<p>&#39;18. If I get a p-value below my cutoff (say &lt; 0.05) and a reasonably positive IC and risk adjusted IC (say 0.01 and 0.1 respectively), what might be the reason for getting negative Annual Alpha numbers? What&#39;s a recommended action to take if IC is positive but annual alpha is negative? </p>

<p>&#39;19. Is there a way to &#39;hide&#39; a cell in an Alphalens Jupyter notebook, e.g. the cell containing the &#39;alpha factor&#39;? People might be more comfortable sharing Alphalens notebooks if there&#39;s a way to not disclose the actual alpha factor.</p>

<p>&#39;20. Am I at risk of overfitting if I &#39;tweak&#39; an alpha factor (or its parameters) to either get the p-value below my cutoff, to maximize IC (or volatility adjusted IC), or to maximize Annual Alpha?</p>

<p>&#39;21. Is there a good balance of recommended number of time-series to cross validate against (to minimize the risk of false positives) without risking &#39;multiple comparison&#39; biasing?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b690b93c513b6003ff17d60' id='5b690b93c513b6003ff17d60'>
<a href='#5b690b93c513b6003ff17d60'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57bcf8e194cdba3f02000188'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/a38b0c01bf4db11e9e022f95f69899b8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57bcf8e194cdba3f02000188'>Michael Matthews</a>
</div>
<a UTCms='1533610899000' class='quanto-date posted-at response-posted-at' href='#5b690b93c513b6003ff17d60'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Joakim,</p>

<p>To answer a few of your questions on the IC:</p>

<p>&#39;9. Risk-adjusted IC = (Mean of the daily ICs / Standard Deviation of daily ICs)</p>

<p>&#39;10. t-stat is inversely related to the P-value. The higher the t-stat, the lower the p-value. (assuming a constant degrees of freedom)</p>

<p>&#39;14. There is currently a feature in development on Github to measure correlations and interactions of factors in alphalens (although the development has been going slowly as I haven&#39;t had time to work on it recently). That said, you can simply use numpy&#39;s or pandas&#39; built-in correlation function to calculate the correlation either between the factor values themselves or the returns of the factors (e.g. maybe you set the factor return = highest quantile - lowest quantile. Put these in two columns and calculate the correlation). You can also do a rolling correlation as well. Additionally, for comparing multiple factors you can run a multi-variate regression between them to evaluate the strength of any linear relation.</p>

<p>I noticed a lot of your questions focused a lot on the p-value of the information coefficient. I wouldn&#39;t give much weight to this based on the alphalens output of this value for periods greater than 1-day. If you increase the return period to greater than a day, you run into the &quot;overlapping data problem&quot;. Essentially,  what this means is that your observations of the IC are no longer independent (which is an assumption of the t-test that is used in alphalens). Therefore, you are going to overestimate the confidence level that you have in your result (i.e. you will get an artificially low p-value). The ICs are not independent because if you calculate the IC of your prediction/weights with say a 5-period return at time t=0. At time t=1, you are going to be using 4 of the same time periods that were used in the prior calculation (this is why it is called the &quot;overlapping&quot; data problem). I would submit a fix for this, but I would need to research the best way to solve it. If anyone reading this has a suggestion, please submit it to Github!</p>

<p>Also, if you weren&#39;t aware already, you can take a look at how a lot of these things are calculated in the tearsheet by looking at the source code on the <a href="https://github.com/quantopian/alphalens">alphalens Github</a> (as long as you don&#39;t mind digging through the code a little bit).</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b691694a4841800494ceea5' id='5b691694a4841800494ceea5'>
<a href='#5b691694a4841800494ceea5'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5971e2308bc634000d022f24'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3fff8e67995978b6170deb9d9001a7b6?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5971e2308bc634000d022f24'>Joakim Arvidsson (Cream Mongoose)</a>
<span class='badge medal'></span>
</div>
<a UTCms='1533613716000' class='quanto-date posted-at response-posted-at' href='#5b691694a4841800494ceea5'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Michael,</p>

<p>Thank you - very much appreciated! Are you one of the developers of Alphalens?</p>

<p>Regarding the p-value of IC and the &#39;overlapping data problem&#39;, thanks for making me aware of this issue. I should have made it more clear that most of my questions are for 1-day holding periods (except for Q2. essentially I believe).</p>

<p>For Q9. would you say that the Risk adjusted IC value is more important than the Mean IC. Or in other words, should be significantly higher than the Mean IC?</p>

<p>For Q10. do you know what a reasonably high t-value is for a p-value cutoff of 0.05? </p>

<p>Thanks again for your help!  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b69367001ef0d0045e14c71' id='5b69367001ef0d0045e14c71'>
<a href='#5b69367001ef0d0045e14c71'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/58a629bc0ee39f0736043f98'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/00f9ef5a775629cae60a12144bb83ec5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/58a629bc0ee39f0736043f98'>Indigo Monkey</a>
<span class='badge medal'></span>
</div>
<a UTCms='1533621872000' class='quanto-date posted-at response-posted-at' href='#5b69367001ef0d0045e14c71'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Joakim,</p>

<p>For Q10. Usually t-values larger than 2 for a p-value &lt; 0.05, and a t-value less than -2 for negative relationship(i.e. negative correlation). T-values are easier to read when p-values get too small.</p>

<p>For Q16. You want uncorrelated alphas as long as the alphas are both positive. For example, 12 month momentum and 1 month mean reversion(negative 1 month momentum) sometimes have positive alpha. The holy grail is finding negatively correlated alphas that have positive alphas which is very hard to find in the stock market. An example might be the SP500 and US treasuries in times of market crashes.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b6939d501ef0d0048e14c91' id='5b6939d501ef0d0048e14c91'>
<a href='#5b6939d501ef0d0048e14c91'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5971e2308bc634000d022f24'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3fff8e67995978b6170deb9d9001a7b6?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5971e2308bc634000d022f24'>Joakim Arvidsson (Cream Mongoose)</a>
<span class='badge medal'></span>
</div>
<a UTCms='1533622741000' class='quanto-date posted-at response-posted-at' href='#5b6939d501ef0d0048e14c91'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi @IM,</p>

<p>Thank you! I appreciate you taking the time answering these for me!</p>

<p>Q10. Thanks! Makes sense and is in line with what I&#39;ve seen in my research.</p>

<p>Q16. Also makes sense, thank you! When you say &#39;positive alpha&#39; do you mean &#39;positive IC&#39; or &#39;positive IC&#39; in combination with &#39;positive Annual Alpha&#39; (both assuming p-value(IC) is below the cutoff), or something completely different?</p>

<p>Thanks!!  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b69a24ac513b60048f180ca' id='5b69a24ac513b60048f180ca'>
<a href='#5b69a24ac513b60048f180ca'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57bcf8e194cdba3f02000188'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/a38b0c01bf4db11e9e022f95f69899b8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57bcf8e194cdba3f02000188'>Michael Matthews</a>
</div>
<a UTCms='1533649482000' class='quanto-date posted-at response-posted-at' href='#5b69a24ac513b60048f180ca'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>The risk-adjusted IC is very similar to the t-stat. The t-stat is simply the risk-adjusted t-stat times the square root of the number of samples. You are trying to get a sense for how likely is it that the &quot;true population IC&quot; is different from 0. So, if you want to simplify things, use the t-stat along side the mean IC.</p>

<p>As Indigo Monkey said, a t-stat greater than 2 will yield p-values less than  0.05 for large sample sizes. For smaller sample sizes, you may need a t-stat greater than 2 to get a p-value less than 0.05. </p>

<p>Regarding your question as to whether I am a developer on the alphalens project, I have made a few small contributions to the project, but they are relatively insignificant compared to the work others have done on the project.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b69d261c513b6003ff182a8' id='5b69d261c513b6003ff182a8'>
<a href='#5b69d261c513b6003ff182a8'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5afd721c2520a0003f4d1d64'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/d18c2cbd4cecb772f3696cb11d9623da?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5afd721c2520a0003f4d1d64'>Ma Ak</a>
</div>
<a UTCms='1533661793000' class='quanto-date posted-at response-posted-at' href='#5b69d261c513b6003ff182a8'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Is there any way to see cumulative returns for  long only portfolio? the alphalens.tears.create_full_tear_sheet(factor_data) shows me factor weighted long/short with detailed axes. It also shows quantile-wise returns, but often there is only one tickmark on the vertical axis (if at all).</p>

<p>I&#39;d like to see returns by quantile, but with more information than the current graph produces. Here&#39;s a picture of what it shows right now, I want to actually see the numbers on the vertical axis: <a href="https://imgur.com/a/YszS7yh">https://imgur.com/a/YszS7yh</a>  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b69d8f0a4841800464cf38e' id='5b69d8f0a4841800464cf38e'>
<a href='#5b69d8f0a4841800464cf38e'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/593c2d9313c42156e6c604f4'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/29d123ef96bf1c898a4f5bacef8d6981?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/593c2d9313c42156e6c604f4'>Vasilis Nikolaou</a>
<span class='badge medal'></span>
</div>
<a UTCms='1533663472000' class='quanto-date posted-at response-posted-at' href='#5b69d8f0a4841800464cf38e'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi,</p>

<p>I&#39;m new to Quantopian and have used alphalens, although I think there are of no use. For instance, how do you explain a backtest showing negative or small positive returns while the alphalens&#39; alphas are all positive with values ranging from 0.042 to 0.069 and ICs above 0.01 and significant? How do you choose the number of quantiles to use and the number periods? If Alphalens can predict  forward returns of 1, 5 and 10 days, how can this be useful in the long run.</p>

<p>Thanks  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b6a2ecba4841815574cf0dc' id='5b6a2ecba4841815574cf0dc'>
<a href='#5b6a2ecba4841815574cf0dc'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5346083a839ff34e1400010a'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e2319a353b35eac99e765c836ba72044?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5346083a839ff34e1400010a'>Delaney Mackenzie</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1533685451000' class='quanto-date posted-at response-posted-at' href='#5b6a2ecba4841815574cf0dc'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Please keep posting questions as they come up, I&#39;ve started gathering questions and will go through and prepare answers as fast as I can. It&#39;s going to be first come first served for now.  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='5b6a8a01843f450047aeb61c' id='5b6a8a01843f450047aeb61c'>
<a href='#5b6a8a01843f450047aeb61c'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/58a629bc0ee39f0736043f98'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/00f9ef5a775629cae60a12144bb83ec5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/58a629bc0ee39f0736043f98'>Indigo Monkey</a>
<span class='badge medal'></span>
</div>
<a UTCms='1533708801000' class='quanto-date posted-at response-posted-at' href='#5b6a8a01843f450047aeb61c'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Joakim</p>

<p>To answer your follow up question. I think a positive ic and a positive alpha are both important and are related to each other when building a factor models. A high risk adjusted ic seems to be more important when you need to describe a large group of stocks. With a smaller group of stocks, you mostly care about the upper and lower quantiles. Thus, ic becomes less important than alpha (spread) between upper and lower quantiles. But both are important in either case.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b6abea6159c104e223efe08' id='5b6abea6159c104e223efe08'>
<a href='#5b6abea6159c104e223efe08'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1533722278000' class='quanto-date posted-at response-posted-at' href='#5b6abea6159c104e223efe08'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Delaney -</p>

<p>I suggest rather than providing general feedback as a series of posts to this thread, incorporate it into your original post by editing it (see Jamie&#39;s example <a href="https://www.quantopian.com/posts/a-new-contest-is-coming-more-winners-and-a-new-scoring-system">here</a>).</p>

<p>For the framework y&#39;all have in mind, I get the impression that each Pipeline factor should be run on the entire <code>QTradableStocksUS</code> universe, however, one could also pick a different universe for each factor, which makes the problem considerably more complex.  It would seem that for certain types of factors, simply running over the entire universe would be fine, but for others, restricting the universe would be important (at this point, this is intuitive on my part...I&#39;ll try to explain after some mental percolation).  For the latter, how would one use Alphalens to figure out how to restrict the universe to the ideal one for a given factor (in an optimal fashion, versus just fiddling with the universe definition manually)?</p>

<p>A suggestion for illustrative purposes would be to consider how to leverage your new <a href="https://www.quantopian.com/help#self_serve_data">Self-Serve Data API</a> to synthesize data and factors with controllable characteristics.  This way, we aren&#39;t always dealing with sketchy, real-world factors, that don&#39;t do diddly, and nobody cares about, and lead to confusion, etc.  Just synthesize the factors with &quot;knobs&quot; so that you can illustrate specific points, without all of the noise of the real-world.</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b6bec6f4ee123003c81bd5f' id='5b6bec6f4ee123003c81bd5f'>
<a href='#5b6bec6f4ee123003c81bd5f'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5b28c0a664a3301a721666a1'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/8d3f58ec4d128bc43846e02bf4fb9dc4?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5b28c0a664a3301a721666a1'>Michael Watson</a>
</div>
<a UTCms='1533799535000' class='quanto-date posted-at response-posted-at' href='#5b6bec6f4ee123003c81bd5f'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi,<br>
This is a duplicate question from another thread I made but I took advice from a Cream Mongoose who told me to post it here.<br>
Sorry for the likely very basic question as I am new to this. Nevertheless...</p>

<p>I am using Quantopian to make my first algorithm and have been stuck on doing some factor analysis for the past few days. In the lecture on fundamental factor models, they show how to estimate the risk premiums for your factors, using some code for regressions on returns.<br>
I understand that the estimates for risk premia is the additional reward in your algorithm you get for exposing yourself to that fundamental factor. However, when analysing a basic 6-month momentum factor I get a negative risk premium coefficient using the code in the lecture. Despite this, when analysing the factor individually using alphalens over the same time frame, it clearly has some positive predictive power of returns,  (the 5th and 1st quantiles of equities have clear positive (0.59) and negative (-0.16) mean averages of returns).</p>

<p>Why is this?<br>
and...<br>
Should you t-test the risk premiums to decide if factors are statistically significant, or the coefficients from the initial regression of your factors against returns?</p>

<p>Thanks for the help.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b6d519bf2b773004429ba56' id='5b6d519bf2b773004429ba56'>
<a href='#5b6d519bf2b773004429ba56'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1533890971000' class='quanto-date posted-at response-posted-at' href='#5b6d519bf2b773004429ba56'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@ Joakim (or anyone who can answer) -</p>

<p>Above, you <a href="https://www.quantopian.com/posts/alphalens-questions-thread#5b628b816c85c53bb31a0b0d" rel="nofollow">post</a> &quot;the Alphalens notebook template&quot; but where did you get it?  Did you grab it from <a href="https://www.quantopian.com/lectures/factor-analysis-with-alphalens" rel="nofollow">https://www.quantopian.com/lectures/factor-analysis-with-alphalens</a> and strip out all of the comments?  Or is there a separate template somewhere?</p>

<p>Also, I&#39;d like to run as far back as possible.  I recall that one has to do something special in the research platform, so that Pipeline chunks data (in the backtester, it is done automatically).  Does anyone know how to do it?</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b6d5a57e58f57004478a2e0' id='5b6d5a57e58f57004478a2e0'>
<a href='#5b6d5a57e58f57004478a2e0'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56ed38379b1e7efbfb0006f8'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/7fe429093818ef2b5c8f29dc274a188b?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56ed38379b1e7efbfb0006f8'>Karl Mun</a>
</div>
<a UTCms='1533893207000' class='quanto-date posted-at response-posted-at' href='#5b6d5a57e58f57004478a2e0'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>How far back is that OLMAR mean reversion factor that can run as far in Alphalens, Grant?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b6d5b362b15b7004805394a' id='5b6d5b362b15b7004805394a'>
<a href='#5b6d5b362b15b7004805394a'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5971e2308bc634000d022f24'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3fff8e67995978b6170deb9d9001a7b6?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5971e2308bc634000d022f24'>Joakim Arvidsson (Cream Mongoose)</a>
<span class='badge medal'></span>
</div>
<a UTCms='1533893430000' class='quanto-date posted-at response-posted-at' href='#5b6d5b362b15b7004805394a'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Grant,</p>

<p>Yeah, basically a lot of cutting and pasting from the notebook in that lecture to get something close to what I wanted. You or someone else might come up with a better one. If I come up with a better one I’ll share it in the forums. </p>

<p>Basically I just want the table with the IC and p-values as a start. If that looks good then the Ann. Alpha with quantile spread mean returns etc. If that also looks good then all the graphs. </p>

<p>Think I can probably figure this out from the docs, just need to spend some time with it.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b6d6b4e2b15b7004b053978' id='5b6d6b4e2b15b7004b053978'>
<a href='#5b6d6b4e2b15b7004b053978'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1533897550000' class='quanto-date posted-at response-posted-at' href='#5b6d6b4e2b15b7004b053978'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Karl -</p>

<p>For folks unfamiliar with the &quot;OLMAR&quot; reference, see this paper:</p>

<p><a href="https://icml.cc/2012/papers/168.pdf" rel="nofollow">https://icml.cc/2012/papers/168.pdf</a></p>

<p>Note that it is long-only.</p>

<p>Note also that if you write a Pipeline factor, it may not run optimally, since you&#39;ll only have access to the last closing price.  I would write a factor using minutely data (smoothed), and run it through Alphalens (which is possible, as I understand...perhaps Delaney can provide an example/template).</p>

<p>Since it is based on price only, it can run as far back as the Q price data will support (~2002, I think).  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b6d6b92e58f57004178a3f0' id='5b6d6b92e58f57004178a3f0'>
<a href='#5b6d6b92e58f57004178a3f0'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1533897618000' class='quanto-date posted-at response-posted-at' href='#5b6d6b92e58f57004178a3f0'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thanks Joakim - I guess I&#39;ll hack something together, since there appears to be no general template.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b6d806e2866e51fe08011b9' id='5b6d806e2866e51fe08011b9'>
<a href='#5b6d806e2866e51fe08011b9'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1533902958000' class='quanto-date posted-at response-posted-at' href='#5b6d806e2866e51fe08011b9'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@ Delaney -</p>

<p>Would there be any way, either by Q or by other users, to get paid for individual Pipeline factors, in addition to compensation for the contest or the fund?  My thinking is that within the framework of a <a href="https://blog.quantopian.com/a-professional-quant-equity-workflow/" rel="nofollow">multi-factor strategy</a>, much of the value is in the factors, and the rest can kinda be reduced to practice.  Basically, if I focused all of my time researching factors in Alphalens, and came up with some good ones, do you see any path for me to get paid for my efforts?  Or would I need to combine them in an algo, enter the contest, wait six months, etc.?  I&#39;m thinking that out-of-the-box, without any out-of-sample data whatsoever, there ought to be a a market value for raw factors.  And then if there were a way, within the Q system, to have them age, as for algos, they could appreciate in value (e.g. like art, cheese, wine, and Scotch).  It just seems that if Q quants were incentivized to focus on the alpha factors (the <code>alpha1</code>, <code>alpha2</code>, etc. in the <a href="https://blog.quantopian.com/a-professional-quant-equity-workflow/" rel="nofollow">flow diagram</a>), then y&#39;all could sort out how to do the rest (and probably do it much better than individual quants would).  I recognize that this is a significant departure from your current system, but I keep getting the message that it&#39;s all about the alpha factors and their predictability, so why not reward production of good alpha factors directly?  I also figure that traditional &quot;brick-and-mortar&quot; hedge funds approach things this way.  There&#39;s incentive to individual quants for delivering specialized alpha factors (e.g. sector, style, individual company, market, alternative data, etc.), but then each alpha gets melded with the rest, into a big-honkin&#39; portfolio.  There&#39;s the problem of how to attribute which returns to which factors, but I&#39;m sure there&#39;s some way to sort an equitable compensation scheme.</p>

<p>Maybe the new Factset arrangement will facilitate this?  If I come up with a nice factor, I could contact them, and sort out how it could be licensed, and then provided, for a fee, to the Quantopian Community?</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b6d8853b1b1c3004bd86f29' id='5b6d8853b1b1c3004bd86f29'>
<a href='#5b6d8853b1b1c3004bd86f29'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/50842732cb5e1a02000000d1'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f86535a7fafab6b7d903fc1461362f0a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/50842732cb5e1a02000000d1'>James Villa</a>
<span class='badge medal'></span>
</div>
<a UTCms='1533904979000' class='quanto-date posted-at response-posted-at' href='#5b6d8853b1b1c3004bd86f29'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Grant,</p>

<p>I believe Q already has the infrastructure to do exactly what you are proposing with Self Serve Data and AlphaLens. The framework of Self Serve Data is an offshoot of what Q already uses with their Premium Dataset vendors. AlphaLens can serve as a validation mechanism of your discovered alpha. If you submit both and it passes Q&#39;s stress test then it is possible to sell your discovered alphas as a premium dataset to the general users and get compensated for your efforts. Just a thought.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b6d8a6b2b15b70042053ad2' id='5b6d8a6b2b15b70042053ad2'>
<a href='#5b6d8a6b2b15b70042053ad2'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5929c5f4a76c22000d329d92'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/5ec18483d35ccb497ca800f820998851?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5929c5f4a76c22000d329d92'>Leo M</a>
<span class='badge medal'></span>
</div>
<a UTCms='1533905515000' class='quanto-date posted-at response-posted-at' href='#5b6d8a6b2b15b70042053ad2'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@James, would you think AlphaLens can be used to discover alpha? Appears that is the intent &quot;as a substitute to running extensive time consuming backtests&quot;.  From first impressions it appears to be a platform that can be used to validate your alpha just like you mentioned.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b6d8b852866e522df800fc9' id='5b6d8b852866e522df800fc9'>
<a href='#5b6d8b852866e522df800fc9'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1533905798000' class='quanto-date posted-at response-posted-at' href='#5b6d8b852866e522df800fc9'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@ James -</p>

<p>Yeah.  It&#39;s a bit of a tangent for this thread, but I figure that the basic gist here is that if AlphaLens can show the goodness of factors, then perhaps that goodness could be turned directly into dollars.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b6d90cfe58f57004178a54e' id='5b6d90cfe58f57004178a54e'>
<a href='#5b6d90cfe58f57004178a54e'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/50842732cb5e1a02000000d1'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f86535a7fafab6b7d903fc1461362f0a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/50842732cb5e1a02000000d1'>James Villa</a>
<span class='badge medal'></span>
</div>
<a UTCms='1533907151000' class='quanto-date posted-at response-posted-at' href='#5b6d90cfe58f57004178a54e'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Leo,</p>

<p>To me, a long backtest that takes into account different market regimes and a multiyear holdout period for validation would be the preferred approach for discovering and validating alphas. While AlphaLens may appear to be a subsitute to extensive backtests, it does not consider transaction costs and therefore I prefer to look at it more of a validating mechanism of discovered alpha after running it through the extensive backtest. I always prefer to analyze alphas as simulated to as close to actual trading as possible then verify results with the statistics of 1 day forward returns of Alphalens.</p>

<p>@Grant,</p>

<p>Yeah, why not. If one can make money off discovered alphas it&#39;s a win-win-win for all.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b6d97cb2866e559e180134a' id='5b6d97cb2866e559e180134a'>
<a href='#5b6d97cb2866e559e180134a'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5929c5f4a76c22000d329d92'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/5ec18483d35ccb497ca800f820998851?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5929c5f4a76c22000d329d92'>Leo M</a>
<span class='badge medal'></span>
</div>
<a UTCms='1533908939000' class='quanto-date posted-at response-posted-at' href='#5b6d97cb2866e559e180134a'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@James,</p>

<p>Thanks. Yeah, your suggestion makes perfect sense to me to analyze/discover alpha using a process as close to actual trading as possible. </p>

<p>I will use AlphaLens for final validation along with holdout data.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b6d9be82b15b70042053b7a' id='5b6d9be82b15b70042053b7a'>
<a href='#5b6d9be82b15b70042053b7a'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1533909992000' class='quanto-date posted-at response-posted-at' href='#5b6d9be82b15b70042053b7a'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Delaney -</p>

<p>Another question -</p>

<p>How does one know what the &quot;default&quot; (presumably preferred) settings are for an AlphaLens analysis?  I just gave Joakim&#39;s notebook above a run, with a different factor, and got an error (see <a href="https://www.quantopian.com/posts/alphalens-maxlossexceedederror" rel="nofollow">https://www.quantopian.com/posts/alphalens-maxlossexceedederror</a>).  Is there some way to set the thing up so that it runs for a typical factor (I used the risk model Momentum factor, which is nothing fancy), without barfing?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b6df01db1b1c3004bd872f1' id='5b6df01db1b1c3004bd872f1'>
<a href='#5b6df01db1b1c3004bd872f1'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1533931549000' class='quanto-date posted-at response-posted-at' href='#5b6df01db1b1c3004bd872f1'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Just starting to get a feel for the AlphaLens thingy.  Here, I run the style risk factors, combined:</p>

<pre><code>test_factor = Momentum(mask=base_universe).zscore() + \  
              ShortTermReversal(mask=base_universe).zscore() - \  
              Size(mask=base_universe).zscore() + \  
              Value(mask=base_universe).zscore() - \  
              Volatility(mask=base_universe).zscore()  
</code></pre>

<p>I set the sign of Size and Volatility to -1, since based on the returns, this is appropriate for the analysis period (long-term, maybe it isn&#39;t justified).</p>

<p>One interesting exercise would be to hear from the Q team:supposing one wanted to create the best possible algo from the result, how one would go about it?  How would one translate the AlphaLens results to actual implementation in an algo?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b6e3d58fed5e30047598420' id='5b6e3d58fed5e30047598420'>
<a href='#5b6e3d58fed5e30047598420'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5971e2308bc634000d022f24'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3fff8e67995978b6170deb9d9001a7b6?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5971e2308bc634000d022f24'>Joakim Arvidsson (Cream Mongoose)</a>
<span class='badge medal'></span>
</div>
<a UTCms='1533951320000' class='quanto-date posted-at response-posted-at' href='#5b6e3d58fed5e30047598420'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>&#39;22. One of my factors have the following Information and Return analysis. Should this factor be rebalanced daily, weekly, monthly, or some other period? Is the increasing IC mean and risk adjusted values likely due to the &#39;data overlapping issue&#39; that Michael informed us of above? Or is there likely something else &#39;funny&#39; going on here? Some of it looks a bit &#39;too good to be true&#39; in my very limited experience with AL.</p>

<p>Information Analysis<br>
1D  5D  10D 21D 42D 63D<br>
IC Mean 0.015   0.029   0.035   0.034   0.044   0.054<br>
IC Std. 0.109   0.112   0.103   0.089   0.087   0.090<br>
Risk-Adjusted IC    0.134   0.258   0.339   0.384   0.508   0.595<br>
t-stat(IC)  3.054   5.867   7.716   8.739   11.553  13.535<br>
p-value(IC) 0.002   0.000   0.000   0.000   0.000   0.000<br>
IC Skew 0.077   0.059   -0.059  -0.227  0.073   0.088<br>
IC Kurtosis 0.029   -0.016  -0.364  -0.195  -0.437  -0.600</p>

<p>Returns Analysis<br>
1D  5D  10D 21D 42D 63D<br>
Ann. alpha  0.091   0.089   0.075   0.043   0.029   0.038<br>
beta    0.083   0.017   0.041   0.051   0.018   -0.051<br>
Mean Period Wise Return Top Quantile (bps)  2.920   2.470   2.090   1.169   0.944   1.153<br>
Mean Period Wise Return Bottom Quantile (bps)   -4.282  -4.385  -3.822  -2.672  -2.197  -2.084<br>
Mean Period Wise Spread (bps)   7.191   6.877   5.930   3.814   3.122   3.246</p>

<p>&#39;23. Is a high Autocorrelation value a good or a bad thing, and how does it relate to the &#39;turnover&#39; figure? Does one want both to be as low as possible? </p>

<p>&#39;24. Autocorrelation seems to be decreasing with longer holding periods (with Turnover increasing). Is this normal/expected behaviour? Good/bad?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b6ee9685f7809003d1b7bd4' id='5b6ee9685f7809003d1b7bd4'>
<a href='#5b6ee9685f7809003d1b7bd4'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1533995368000' class='quanto-date posted-at response-posted-at' href='#5b6ee9685f7809003d1b7bd4'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>For the periods, e.g. 1D, 3D, 5D, 10D, 21D, are the stats computed every day on a rolling basis?  Or for the 10D time frame, for example, would the stats be computed every 10 days, skipping days in between?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b6ef130e88d57003ee66f55' id='5b6ef130e88d57003ee66f55'>
<a href='#5b6ef130e88d57003ee66f55'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5a131e5ef8d2481e3e44e64f'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/415ae6f75d17c9d6407e6654e6ab1ef8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5a131e5ef8d2481e3e44e64f'>Luke Bianculli</a>
</div>
<a UTCms='1533997360000' class='quanto-date posted-at response-posted-at' href='#5b6ef130e88d57003ee66f55'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Grant,</p>

<p>I believe it is a rolling basis. Was running some tests earlier and the cumulative &#39;returns&#39; calculated from a daily 63D series were absurd. </p>

<p>That being said I got a question for anyone with input. I have been running basic tests -- correlation, cumulative returns, etc. -- based on the Factor Risk Exposure lecture (i.e running a single combined pipe w/ the best and worst performers for each factor, and subtracting the returns). Is there any merit to using the AL 1D series to calculate factor correlations and run MLRs w/ other factors? Would this be a supplement to the original strategy or a replacement?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b701fa9b1f7f4004885fd9c' id='5b701fa9b1f7f4004885fd9c'>
<a href='#5b701fa9b1f7f4004885fd9c'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1534074793000' class='quanto-date posted-at response-posted-at' href='#5b701fa9b1f7f4004885fd9c'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@ Delaney -</p>

<p>More questions for your list.</p>

<p>For the Information Coefficient (IC), there are plots of the Observed Quantile versus the Normal Distribution Quantile.  Here is an example:</p>

<p><img src="https://image-proxy.quantopian.com/1f89c36ff6af6e24a8ff3bc9c1cd437917d5f60a/68747470733a2f2f692e696d6775722e636f6d2f77454d754a4a4b2e706e67" /></p>

<p>What is one to make of the red line?  Is it a fit to the data?  Or just a guide to the eye, representing an ideal normal distribution?  Generally, would one expect the IC to conform to a normal distribution?  What are we to make of deviations from normality (e.g. so-called &quot;fat tails&quot;)?</p>

<p>In the plot, are all the time series data shown?  If not, what is shown?</p>

<p>Since the data come from a time series, does AlphaLens provide an easy way to identify where in time the points are coming from?  For the example I&#39;ve provided, how can I pinpoint the origin of the fat tail (e.g. a certain period of time, perhaps related to the Great Recession period, or just distributed uniformly over the whole time period)?</p>

<p>There are some statistics provided:</p>

<p><img src="https://image-proxy.quantopian.com/814397d2850d41030c98c949171d80c5ec4036aa/68747470733a2f2f692e696d6775722e636f6d2f6b506743774c4e2e706e67" /></p>

<p>Presumably, there is a normality assumption in some of them.  If the IC data don&#39;t fall on a straight line, indicating perfect normality, how can one determine whether that stats are valid?  As I recall, one has to be careful that normality is a valid assumption, before applying certain statistics.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b70572a6777570044e183a3' id='5b70572a6777570044e183a3'>
<a href='#5b70572a6777570044e183a3'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1534089002000' class='quanto-date posted-at response-posted-at' href='#5b70572a6777570044e183a3'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Delaney -</p>

<p>Any guidance on what to use for <code>price</code> for AlphaLens?  There would seem to be a lot of options here, beyond the daily open price.  Particularly for the longer time frames, it would seem to make more sense to use smoothed prices, versus the open (which is derived from a single trade, as I understand).  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b708affaf0a9f00444e72fb' id='5b708affaf0a9f00444e72fb'>
<a href='#5b708affaf0a9f00444e72fb'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5afd721c2520a0003f4d1d64'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/d18c2cbd4cecb772f3696cb11d9623da?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5afd721c2520a0003f4d1d64'>Ma Ak</a>
</div>
<a UTCms='1534102271000' class='quanto-date posted-at response-posted-at' href='#5b708affaf0a9f00444e72fb'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Does alphalens take into account dividends? If so, how?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b714d839de4f300436e0abc' id='5b714d839de4f300436e0abc'>
<a href='#5b714d839de4f300436e0abc'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1534152067000' class='quanto-date posted-at response-posted-at' href='#5b714d839de4f300436e0abc'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Here&#39;s AlphaLens run on:</p>

<pre><code>class RandomFactor(CustomFactor):  
        &quot;&quot;&quot; Random factor &quot;&quot;&quot;  
        inputs = [USEquityPricing.close]  
        window_length = 1  
        def compute(self, today, assets, out, prices):  
            out[:] = np.random.random(size=prices[-1,:].shape)  
</code></pre>

<p>Thought I&#39;d show what a monkey-on-a-keyboard looks like.</p>

<p>I&#39;m not sure how to interpret the sector results.  I&#39;d think that for a random factor, AlphaLens would not show systematic overall gains/losses, by sector.  However, it does.  So, another question for Delaney is why?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b7162e902ecb6004ecf4c73' id='5b7162e902ecb6004ecf4c73'>
<a href='#5b7162e902ecb6004ecf4c73'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5b32da9a3ef854003ea5ee91'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/30c0b67219231de686d5692739edad32?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5b32da9a3ef854003ea5ee91'>David Daverio</a>
</div>
<a UTCms='1534157545000' class='quanto-date posted-at response-posted-at' href='#5b7162e902ecb6004ecf4c73'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>A small question:<br>
Is there a way to get the correlation between n factor using alphalens?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b72787c4751b7004497859e' id='5b72787c4751b7004497859e'>
<a href='#5b72787c4751b7004497859e'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5971e2308bc634000d022f24'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3fff8e67995978b6170deb9d9001a7b6?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5971e2308bc634000d022f24'>Joakim Arvidsson (Cream Mongoose)</a>
<span class='badge medal'></span>
</div>
<a UTCms='1534228604000' class='quanto-date posted-at response-posted-at' href='#5b72787c4751b7004497859e'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Would it be possible to use AL (or otherwise) to analyze a factor&#39;s predictive power of <strong><em>future</em></strong> <strong><em>volatility</em></strong> (rather than future returns) and/or <strong><em>future risk adjusted</em></strong> <strong><em>returns</em></strong>? Stupid question perhaps, I haven&#39;t really thought this through and don&#39;t know if/how this would be useful even if it&#39;s possible. Ignore if so.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b72a82de83ae9003d8db5e8' id='5b72a82de83ae9003d8db5e8'>
<a href='#5b72a82de83ae9003d8db5e8'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1534240813000' class='quanto-date posted-at response-posted-at' href='#5b72a82de83ae9003d8db5e8'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I&#39;ve been wondering if Pipeline can be set up, for multiple factors, to spit out a trailing window of returns per factor and the variability in returns per factor?  These data could potentially be used in combining the factors (e.g. minimize the variance).  Also, effectively, this would allow one to embed AlphaLens-like analysis in an algo (e.g. to automatically manage &quot;alpha decay&quot; across factors).  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b72c73476dbd50040a32d59' id='5b72c73476dbd50040a32d59'>
<a href='#5b72c73476dbd50040a32d59'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5b32da9a3ef854003ea5ee91'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/30c0b67219231de686d5692739edad32?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5b32da9a3ef854003ea5ee91'>David Daverio</a>
</div>
<a UTCms='1534248756000' class='quanto-date posted-at response-posted-at' href='#5b72c73476dbd50040a32d59'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@me @Joakim<br>
So I am trying to compute the correlation between factors. One simple way is to just compute the correlation of the output of alphalens. But I would be happy to have a more specific correlator (by sector,  equity, or period). </p>

<p>I tried to do a selection using Panda DataFrame.filter but the selection is extremely slow, take around 30 per filter which make it nearly useless!<br>
Does someone knows a way to build corraletors using panda with some filters?</p>

<p>Probably useless (as trivial) but here is the notebook.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b734a0876dbd5032ca32bc8' id='5b734a0876dbd5032ca32bc8'>
<a href='#5b734a0876dbd5032ca32bc8'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5346083a839ff34e1400010a'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e2319a353b35eac99e765c836ba72044?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5346083a839ff34e1400010a'>Delaney Mackenzie</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1534282248000' class='quanto-date posted-at response-posted-at' href='#5b734a0876dbd5032ca32bc8'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thanks to everybody who submitted questions. I&#39;ve gone through an initial batch below in the order in which they were asked. I will work to get another batch answered in the next week or two. I&#39;m going to try to run some webinars and record some videos on the topics below, so watch out for those.</p>

<blockquote>
<p>Does a positive IC skew mean that there&#39;s more predictive information in the top quantile (for longs) and vice versa for negative skew? If not, what does the IC skew tell me?</p>
</blockquote>

<p>We have found that this statistic is not super useful in practice and will likely remove it from Alphalens in the future Alphalens. IC Skew refers to the distribution of information coefficients, not anything about the percentiles. The IC is computed each day, which means we have a whole set of measurements of the predictiveness of the model. Each IC alone is likely not that informative, as rarely are strategies highly predictive on one day. Often they become more and more predictive as you average together more and more predictions. Given that, we look at the distribution of IC estimates and try to decide if the IC is drawn from a distribution with a mean of zero (not predictive), or not zero (predictive). <a href="https://www.quantopian.com/lectures/statistical-moments">Skew is one moment of that distribution</a>, and refers to how the mass is distributed in the histogram. The explanation of skew is a bit unintuitive, but I recommend reading up on it if you’re curious. It informs you about the distribution of times your model is and isn’t predictive.</p>

<blockquote>
<p>If I set the &#39;null hypothesis&#39; threshold to 5%, and if the p-value is below 5% for the 5 day holding period but above 5% for 1 day (or vice versa), do I accept or reject the &#39;null hypothesis?&#39; What &#39;bias&#39; am I vulnerable to if I &#39;cherrypick&#39; holding period based on what the IC p-value tell me?</p>
</blockquote>

<p>Generally, models will have a predictive ‘sweet spot’ at which they work best. You can think about the days-forward as a parameter to the model, and you’re trying to decide the best value of that parameter without <a href="https://www.quantopian.com/lectures/the-dangers-of-overfitting">overfitting</a>. You are definitely vulnerable to <a href="https://www.quantopian.com/lectures/p-hacking-and-multiple-comparisons-bias">p-hacking</a> (multiple comparisons bias) if you look at a ton of horizons and pick one that happens to pass your null hypothesis test. As such, you wanna think about it no differently from any other parameter choice. I would start by picking wide parameters, like 1, 5, 20, then zooming in on the one that works best to see if it’s indeed a smooth local peak, or that number of days just happened to randomly work well. For instance, if 5 works best, then try 3, 5, 7 and get a better sense of the total parameter space. Then, once you’re chosen what you believe to be the best number of days, run an out of sample test on new data and check the ranges again to make sure that the same structure exists in that parameter space.</p>

<blockquote>
<p>Does choosing a longer test period reduce the likelihood of getting a false-negative p-value? (maybe I should be more concerned with false-positives?) What&#39;s a good balance? Is one year + one month of future returns sufficient?</p>
</blockquote>

<p>Yes, more data while running the same number of tests reduces the chance of a false negative and false positive by upping your certainty in general. However if you also run more tests, you’re back to the same level of risk (<a href="https://www.quantopian.com/lectures/p-hacking-and-multiple-comparisons-bias">p-hacking</a>). The amount of time you need to validate depends on how often your strategy trades. If it trades many securities each day, you build up confidence in the predictive power much quicker and a month might be okay. A slower strategy will need more time. In general you wanna pick a confidence level that makes sense in your situation. If this is the only strategy you are personally investing in, then you wanna be super confident. If this is one of 100 strategies being invested in by an institutional investor, you probably actually are okay with more false positives, because the flip-side is you’ll discard fewer good strategies. There’s some <a href="https://papers.ssrn.com/sol3/papers.cfm?abstract_id=3193697">recent research on this here</a>. Sorry I don’t have an easy answer, it’s very context dependent and there’s no general rule.</p>

<blockquote>
<p>If I still &#39;believe&#39; in a factor, but p-value &gt; 0.05, is it wrong / bad practice to test a different time series to see if it returns a p-value &lt; 0.05? Essentially p-value hunting to &#39;fit&#39; my hypothesis (did I just answer my own question there?). It&#39;s possible that a factor has predictive power during some time periods, and not during others though, correct? (non-stationarity (?))</p>
</blockquote>

<p>Generally yes, tweaking something until it works is textbook <a href="https://www.quantopian.com/lectures/p-hacking-and-multiple-comparisons-bias">p-hacking</a>. It’s okay to test and idea, notice it doesn’t quite work yet, but then use what you learned to improve the idea. But you definitely have to out-of-sample test it afterwards to make sure you didn’t just <a href="https://www.quantopian.com/lectures/the-dangers-of-overfitting">overfit</a> to the in-sample data. Just make sure you aren’t repeatedly testing (a few times is probably okay) on out-of-sample data, as that just puts you back to square one.</p>

<blockquote>
<p>Similar to above, for &#39;false-positive&#39; p-values (below 0.05) and IC, in general, is it a good idea to re-test a &#39;good&#39; factor (p-value of &lt;0.05 and high IC) during a different time period (cross-validation(?)), to ensure it wasn&#39;t just a &#39;false-positive&#39; during the first test? If so, by how much does a second test reduce the likelihood of a &#39;false-positive&#39; if both tests have p-value of &lt;0.05 and high-ish IC?</p>
</blockquote>

<p>Yes, <a href="https://en.wikipedia.org/wiki/Cross-validation_%28statistics%29">cross-validation</a> is a specific technique, I think you’re thinking of generic out-of-sample testing. A model that holds up with similar accuracy statistics in out-of-sample data is a very strong indication that you have found a good model. Just make sure you aren’t repeatedly testing (a few times is probably okay) on out-of-sample data, as that just puts you back to square one.</p>

<blockquote>
<p>If a &#39;combined_factor&#39; has some individual factors with p_values above 0.05 and/or negative IC during the test period, but when removing them from the &#39;combined_factor&#39; results in significantly lower returns in backtests (i.e. fitted to market noise), what should I do with the &#39;bad&#39; factors? Should I try to see if any combination of non-predictive factors, when combined have a p-value of &lt; 0.05? Or just remove them altogether?</p>
</blockquote>

<p>This is a very interesting case. It’s very possible that models, not predictive alone, are predictive in combination. This is known as non-linearity. What that means is that there’s some combination in the models that’s acting as predictive, or that you just happen to be <a href="https://www.quantopian.com/lectures/the-dangers-of-overfitting">overfit</a>. In order to investigate this more, I would look at all the possible combinations of your individual models. Watch what happens as you add and subtract different ones and notice if there’s a specific combination which is causing the predictiveness. Also look at the IC and returns as you add and subtract, not just the p-value. Some research has been done looking at alpha factor interactions. Think about the ranking of two factors, when you combine both each stock gets assigned a point in 2D space, so now instead of quintiles you have a 5x5 grid of buckets into which stocks can fit. Whereas it’s definitely true that adding complexity increases your risk of <a href="https://www.quantopian.com/lectures/the-dangers-of-overfitting">overfitting</a>, if you start from a hypothesis that two models should interact in an interesting way, there are definitely some cool effects you can explore here. For instance, you might hypothesize that whereas price/equity ratio is not related with returns, stocks with a high price/equity ratio and high amounts of debt will have negative excess returns in the future.</p>

<blockquote>
<p>Does a higher IC Kurtosis mean that there are more extreme outliers and therefore a stronger case for &#39;winzorizing&#39; the factor? My factors tend to have fairly low IC Kurtosis values (well below 3, which I believe is the peak for a normal distribution (?)). Is this good or bad?</p>
</blockquote>

<p>As before in the skewness question, the <a href="https://www.quantopian.com/lectures/statistical-moments">kurtosis</a> here refers to the distribution of the IC values, and not to the specific values of the factor itself. If it’s particularly high, then it’s worth investigating why that’s the case. It means that the model is not uniformly predictive day over day, and that there may be structures governing the days on which it predicts better.</p>

<blockquote>
<p>IC Std. - the lower the better in relation to the IC Mean?? What does IC Std. actually tell me?</p>
</blockquote>

<p>The lower the better. A low IC standard deviation means that you can have higher confidence in the mean value of the IC. A large amount of variance means you can’t be as certain. This is really no different from standard concepts around <a href="https://www.quantopian.com/lectures/confidence-intervals">confidence intervals</a>.</p>

<blockquote>
<p>Risk-adjusted IC - is this &#39;volatility&#39; adjusted IC? If so, is it essentially: IC / IC Std.?</p>
</blockquote>

<p>The nice part of Alphalens being <a href="https://github.com/quantopian/alphalens/blob/e076eff5cd946aba7ebdcbf72ff66e1216ec854e/alphalens/plotting.py#L171">open-source is one can just check</a>, which is precisely what I did. It is the IC mean / IC standard deviation. Again coming back to notions of confidence intervals, it just describes the IC mean as a number of standard deviations away from 0. No different from a z-score. However, you need to be careful not to assume anything about the distribution of IC values, as you don’t know if they’re normal. Basically it’s a way of comparing two different models. If one has a mean IC of 0.1, but a IC std. of 0.1, then it will get a volatility adjusted IC score of 1. If another one has a mean IC of 0.05, but a IC std. of 0.01, then it will get a IC score of 5. This doesn’t mean that the second is definitely better, it just means that you have relatively more confidence that the second IC is meaningfully different from 0, and less in the first case.</p>

<blockquote>
<p>T-stat(IC) - what does this tell me, in relation to alpha research? Higher the better?</p>
</blockquote>

<p>This is just the raw t-stat from the t-test that checks to see whether the IC values were likely drawn from a distribution with a mean of 0 (not predictive) or not (predictive). Remember that a t-test assumes a t-distribution, so this test is certainly not perfect. More of a rule of thumb estimate. The t-stat is not particularly useful, I would mostly just look at the p-value.</p>

<blockquote>
<p>In this Q Short video on IC and P-values, Delaney mentions at around 3:15 in the video that there&#39;s currently a lot of debate whether p-value analysis is meaningful or not. Could you expand a bit on this please? Is there a school of thought that argues that p-values should be seen as &#39;relative&#39; (i.e. the lower the better) rather than binary?</p>
</blockquote>

<p>Here is a series of <a href="http://economistjourney.blogspot.com/2018/06/what-is-sampling-noise.html">blog posts</a> discussing why the author thinks that p-values are not a great way to test hypotheses. One of the most compelling ones in my opinion is just how little they are fully understood, and how much they are consequently misused. P-values are delicate and complex things, and they are only as useful as your interpretation of them. Be careful, read up if you want, but for now it’s probably enough to just think of them as binary and greater than or less than 0.05. Make sure you check the effect size, in this case the volatility adjusted IC and mean IC.</p>

<blockquote>
<p>In the graph, IC Observed Quantile (y-axis) to Normal Distribution Quantile (x-axis), does one wand to see the bottom left tail of the S-shaped plot to be above the divider line, and the upper right S-tail to be below the line? Or it doesn&#39;t matter as long as it&#39;s a clear S-shape?</p>
</blockquote>

<p>Quantile-Quantile plots just tell you how closely your data follow a baseline distribution. In our case we use the normal distribution as the baseline. If you notice a deviation, it’s because the distribution of IC values is not behaving in a normal fashion. That’s generally to be expected in real data I think, but the plots can give you clues as to how it might be deviating. A normal distribution will just be a straight line exactly, any deviation from the straight line indicates a dearth or surplus of observations in that quantile.</p>

<blockquote>
<p>Does an IC value of 0.1 mean that the factor if predictive 10% of the time, and the other 90% of the time it&#39;s just random noise / coin-flipping? And an IC value of 1.0 means the factor is predictive 100% of the time?</p>
</blockquote>

<p>Basically yes, but be careful about taking this too far without checking the actual math. A mean IC of 0.1 means that on average the correlation between your model’s predictions and real returns is 0.1. A perfect model which have a mean of 1.0 and an std. of 0.0. A coinflip will have a mean IC of 0.0 and I’m not actually sure what std. you’d get.</p>

<blockquote>
<p>How can I check the correlation of two different alpha factors?</p>
</blockquote>

<p>I’m attaching a notebook that does this in a separate comment. Basically you construct a portfolio based on each factor, then you check the correlation of the returns. This methodology relies on your choice of portfolio, but generally choosing a portfolio that longs the top quintile and shorts the bottom is common in industry. If you’re worried you can try it for a variety of portfolio methods, or a method that fits how you actually trade better.</p>

<blockquote>
<p>If I combine two uncorrelated alpha factors that I&#39;ve found, is there any need to run the combined factor through Alphalens (over a different training period?)?</p>
</blockquote>

<p>Yes absolutely. You don’t know what kind of non-linear effects are introduced by combining your models, you want to check that the stats are at least as good as each model independently, ideally the mean IC will be the average of the two independent mean ICs, and the IC std. Will be strictly lower than the average of the independent IC stds. </p>

<blockquote>
<p>By combining two uncorrelated (and seemingly conflicting) alpha factors, for example one Momentum factor and one ST Reversal factor, wouldn&#39;t you lose alpha by combining them?</p>
</blockquote>

<p>Certainly possible. To the extent that the factors are based on contradictory models you will definitely lose alpha. To be clear, when we talk about combining factors, it’s factors that are independent and have no reason not to be combined. Another thing to think about is predictive time frame of factors, you probably want to combine factors with similar time frames, or at least make sure that they help each other. Momentum factors tend to be slower than short term reversal in my experience, so combining the two might not ever be a problem. However, the frequency at which you’re trading would decide which factor’s signal you’re actually using and complicate things. It’s certainly possible to combine some slightly slower (say weekly) factors with some faster ones (say daily) and get benefits. This can be especially helpful if you have a weekly model and need to increase turnover to get to within our contest criteria bounds.</p>

<blockquote>
<p>Taking the above example again, one Momentum Factor and one ST Reversal factor combined into one. The &#39;Strategic Intent&#39; for the Momentum factor is the Newtonian idea that &#39;stocks in motion tend to stay in motion&#39; whereas the &#39;Strategic Intent&#39; for the ST Reversal factor is essentially the opposite (Mr. Market overreacts in the short-term). Is it ok to have separate Economic Rational for each factor, or is it not a good idea to combine two factors that have conflicting rationale (as they might be negatively correlated (?))?</p>
</blockquote>

<p>Conflicting rationale is definitely a worrying issue, but again let’s think about the time frames. Momentum will generally target weekly/monthly timeframes from what I’ve seen. Momentum says that an upwards swing is indicative of a long term upwards trend. You can still trade on the up/down noise that happens on that upwards trend. So you could even combine momentum and mean reversion models in an intelligent way by using momentum to effectively detrend the series.</p>

<blockquote>
<p>It would seem that for Alphalens to be helpful, the risk model would need to be incorporated. For example, say I decide to cook up a factor, and it just happens to be similar to one of these:<br>
from quantopian.pipeline.experimental import Momentum, ShortTermReversal, Size, Value, Volatility<br>
I could spend a lot of time analyzing and perfecting my factor, only to have a very unpleasant surprise when I try to use it in an algo for the contest/fund.<br>
Any thoughts on how to address this problem?</p>
</blockquote>

<p>We&#39;ve built an integration between Alphalens and Pyfolio that allows you to construct a basic portfolio based on your alpha factor and then run that portfolio&#39;s returns through Pyfolio&#39;s risk exposure. We&#39;d love to build a more integrated risk breakdown into Alphalens, this is what we currently have. As mentioned above I&#39;m attaching a notebook in a separate comment that shows how to do this.</p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='5b734a72a11ee4003fd3790c' id='5b734a72a11ee4003fd3790c'>
<a href='#5b734a72a11ee4003fd3790c'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5346083a839ff34e1400010a'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e2319a353b35eac99e765c836ba72044?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5346083a839ff34e1400010a'>Delaney Mackenzie</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1534282354000' class='quanto-date posted-at response-posted-at' href='#5b734a72a11ee4003fd3790c'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Here is a notebook I built that allows you to check the correlation between two alpha factors, plus run an alpha factor through our Pyfolio integration to see what the risk exposures look like. You probably want to do this as you&#39;re building alpha factors so you can see if the effect you found is actually super correlated with a known risk factor, or correlated with another model you&#39;re already working on. If it is that isn&#39;t necessarily a bad thing, two models which are 50% correlated with still be 50% uncorrelated and adding them should help diversify your portfolio.  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='5b73550b12fa9f58c0bd9d40' id='5b73550b12fa9f58c0bd9d40'>
<a href='#5b73550b12fa9f58c0bd9d40'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/52b0e0e0271a27fc88000049'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e5451406e743420c700eb2b054b2fc57?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/52b0e0e0271a27fc88000049'>Blue Seahawk</a>
</div>
<a UTCms='1534285067000' class='quanto-date posted-at response-posted-at' href='#5b73550b12fa9f58c0bd9d40'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><blockquote>
<p>I&#39;ve been wondering if Pipeline can be set up, for multiple factors, to spit out a trailing window of returns per factor and the variability in returns per factor? These data could potentially be used in combining the factors (e.g. minimize the variance). Also, effectively, this would allow one to embed AlphaLens-like analysis in an algo (e.g. to automatically manage &quot;alpha decay&quot; across factors).</p>
</blockquote>

<p>Sounds like a good idea keeping it simple as overall returns per factor but one route as a <strong>start</strong> involving per stock might be correlating yesterday&#39;s pipeline output containing ranks for each factor per stock to current PnL&#39;s also ranked, in BTS.<br>
Then, for record(), how can an overall score of some sort be calculated for each factor and charted? To make sense of shorting (presumably those below mean rank), could their PnL just be multiplied by -1 for pandas .corr()?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b735e594751b73c7b978510' id='5b735e594751b73c7b978510'>
<a href='#5b735e594751b73c7b978510'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1534287449000' class='quanto-date posted-at response-posted-at' href='#5b735e594751b73c7b978510'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I&#39;m wondering if there is a systematic way to investigate a given data set, without cooking up a <em>specific</em> factor.  For example, we have the <a href="https://www.quantopian.com/data/psychsignal/aggregated_twitter_withretweets_stocktwits" rel="nofollow">https://www.quantopian.com/data/psychsignal/aggregated_twitter_withretweets_stocktwits</a> free data set.  So, I could try to be clever and formulate some hypothesis (and another and another...), and cast it into a Pipeline custom factor formula and then test it using AlphaLens.  However, what I&#39;d really like to know, is in a general sense, is there <em>any</em> formulation of the available data that might be worthwhile trading.  In mathematical terms, is there <em>any</em> transformation like this that would be profitable:</p>

<pre><code>F(bull_scored_messages, bear_scored_messages, total_scanned_messages)  
</code></pre>

<p>Of course, there is an infinite number of ways of formulating the transformation, but is there a systematic way of doing it, that would answer the question once and for all that there is or isn&#39;t any way to eke any alpha out of <code>bull_scored_messages, bear_scored_messages, total_scanned_messages</code>?</p>

<p>As a ground rule, say that the transformation is run across the entire QTU, and no other data can be brought into play, in a ranking scheme (I think this is the prescribed approach, versus trying to identify a sub-universe for which the factor would work).  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b73d04ab91ad0004245efed' id='5b73d04ab91ad0004245efed'>
<a href='#5b73d04ab91ad0004245efed'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5b32da9a3ef854003ea5ee91'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/30c0b67219231de686d5692739edad32?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5b32da9a3ef854003ea5ee91'>David Daverio</a>
</div>
<a UTCms='1534316618000' class='quanto-date posted-at response-posted-at' href='#5b73d04ab91ad0004245efed'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Grant </p>

<p>I think your wonder/question should not be in the thread. It is more about how to automatically build a factor rather than how to analysis its performance.<br>
But then I was thinking the exact same thing :-).</p>

<p>So let say we have a factor F(a_i, p_j), where a_i are some values from some datasets, and p_i a list of parameters.<br>
First as you said, the parameter space of F(a_i) is infinite (as it can be an arbitrary function, depending on arbitrary parameters). Therefore fitting F will be damn but really damn computationally expensive, and worst there is very high probability that the solution you find is completely &quot;overfited&quot;.</p>

<p>So basically you have 2 way of constructing F.<br>
First one: decide a simple function (linear or quadratic). Then you construct a fitting tool which would run as follow:<br>
1) A fonction which return alpha for a given set of parameter (run a pipeline, run alphalens, extract alpha and the other things you want to maximize)<br>
2)  A fitting tool, which optimize the outputs obtain in 1). (plenty of different way to do it, a markov chain (a bit as in a MCMC), a gradient descent, ..... (I think the best here is look in neural net how to perform the optimization)<br>
Second one: You would prefer a &quot;highly&quot; non-linear function:<br>
Do it with a neural network: but that will not be trivial, and its the same step than the first solution. The only difference is that your function of point 1) is now describe by a neural network (which contains logs,exp,sync,arctan,.. any crap you want to put in). But then the training will not be straightforward, as it have to be unsupervised (you dont know the alpha...), maybe reinforcement learning might be a way.</p>

<p>But I would say, a tool like that is the holy grail! If you manage to have such a tool, you can fully automatize strategy building.... I am sure than more than one person in the world would be quite happy to buy it!  holy grail are beautiful, but at the end, if they exist, its never trivial to find them.....  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b73ec75210d6b00475740af' id='5b73ec75210d6b00475740af'>
<a href='#5b73ec75210d6b00475740af'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1534323829000' class='quanto-date posted-at response-posted-at' href='#5b73ec75210d6b00475740af'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@ Delaney -</p>

<p>Thanks for your feedback and the new notebook.  Hopefully y&#39;all are finding our questions useful.</p>

<p>One thing I&#39;m realizing, and attempted to articulate <a href="https://www.quantopian.com/posts/alphalens-questions-thread#5b735e594751b73c7b978510" rel="nofollow">above</a>, is that there should be some way to treat any time series data set that has been classified/derived in a certain fashion (e.g. &quot;mood&quot; of traders based on an algo that analyzes Twitter data) and characterize it in a general sense, prior to attempting to write down a model using the data.  For example, if my general approach is to take price data and construct a model (i.e. write a Pipeline custom factor), then across the QTU (to be specific), there should be evidence that prices are something other than noise, and that future prices bear some relation to past prices, in a general sense.  I&#39;d want to do this before getting all worked up about developing a specific model using the data.  What is your recommendation, at a gross level, to see if there is anything other than noise in a given data set, without formulating a specific model?</p>

<p>It is also necessary to check that the data have not been biased, e.g. over-fit, such as we see for <a href="https://www.quantopian.com/posts/alpha-vertex-precog-test" rel="nofollow">Alpha Vertex PreCog data</a>.  I think this requires knowledge of the in-sample/out-of-sample periods (which we don&#39;t have for the Twitter data), but maybe there is a way to look for certain regime changes in the data?  Given the Q interest in detecting over-fitting in algos, perhaps you have expertise in this area?</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b747bb5f9d6fb003d34d164' id='5b747bb5f9d6fb003d34d164'>
<a href='#5b747bb5f9d6fb003d34d164'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5346083a839ff34e1400010a'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e2319a353b35eac99e765c836ba72044?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5346083a839ff34e1400010a'>Delaney Mackenzie</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1534360501000' class='quanto-date posted-at response-posted-at' href='#5b747bb5f9d6fb003d34d164'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Questions are very helpful. The adage &quot;If you have a question, someone else probably has the same question.&quot; holds true in my experience. You also prompted me to make a correlation and risk checker notebook, which I&#39;m happy is finally out.</p>

<p>Like I said, I&#39;m working on making time for the next batch. I count 8 pages of questions in my google doc I use to track my backlog, which is awesome. I wanted to thank all the other folks who&#39;ve been stepping in to answer questions. If I provide an answer to the same question it&#39;s not because I think yours wasn&#39;t good, it&#39;s because I just go through the questions in order and don&#39;t keep track of which ones have been answered by other folks on this thread. Thanks a bunch to Michael Matthews in particular.  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='5b77f2bcb02a92003d1e92fc' id='5b77f2bcb02a92003d1e92fc'>
<a href='#5b77f2bcb02a92003d1e92fc'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1534587580000' class='quanto-date posted-at response-posted-at' href='#5b77f2bcb02a92003d1e92fc'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><blockquote>
<p>Another thing to think about is predictive time frame of factors, you probably want to combine factors with similar time frames, or at least make sure that they help each other. Momentum factors tend to be slower than short term reversal in my experience, so combining the two might not ever be a problem. However, the frequency at which you’re trading would decide which factor’s signal you’re actually using and complicate things. It’s certainly possible to combine some slightly slower (say weekly) factors with some faster ones (say daily) and get benefits. This can be especially helpful if you have a weekly model and need to increase turnover to get to within our contest criteria bounds.</p>
</blockquote>

<p>This touches on the topic of factors on disparate time scales, which Joakim asked about <a href="https://www.quantopian.com/posts/daily-and-weekly-rebalancing-of-separate-alpha-factors-using-optimize-api" rel="nofollow">here</a>.  Jamie took a crack at a response <a href="https://www.quantopian.com/posts/daily-and-weekly-rebalancing-of-separate-alpha-factors-using-optimize-api#5b3f7cae4edd9673c00969a5" rel="nofollow">here</a>, but there was no further Q engagement on what would seem to be an important topic.  I&#39;m guessing this is a &quot;solved problem&quot; in the professional quant community.  Combining N factors, with M respective trading time scales is basically the thing that needs to be done.  How might it be done on Quantopian?  I gather that AlphaLens can be used to find the optimal trading frequency for a set of factors, but then it would seem challenging to incorporate them into a single algo if all of the time scales are not identical.</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b78057000b7d30040b2ff1b' id='5b78057000b7d30040b2ff1b'>
<a href='#5b78057000b7d30040b2ff1b'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1534592368000' class='quanto-date posted-at response-posted-at' href='#5b78057000b7d30040b2ff1b'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Any guidance on what I think is termed &quot;guards against bad data?&quot;  I see custom factors with various <code>np.nanmean</code>, <code>np.nanstd</code>, etc. and other nan guards scattered around code.  And then we have non-nan data that has errors, etc., which one has to guard against in writing factors for input to AlphLens.  Is there a lecture/tutorial/help page section on how to approach this problem systematically?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b79d74e8b8b8e0040b88588' id='5b79d74e8b8b8e0040b88588'>
<a href='#5b79d74e8b8b8e0040b88588'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57bcf8e194cdba3f02000188'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/a38b0c01bf4db11e9e022f95f69899b8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57bcf8e194cdba3f02000188'>Michael Matthews</a>
</div>
<a UTCms='1534711630000' class='quanto-date posted-at response-posted-at' href='#5b79d74e8b8b8e0040b88588'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Grant,</p>

<p>I was looking at your notebook evaluating the random factor. I don&#39;t see  systematic gains/losses by sector as a result of the factor. That said, some sectors did perform better or worse over the sample period (as would be expected). The &quot;systematic&quot; out/under-performance you were referring to may simply have been due to this.</p>

<p>Note: There is a <code>group_neutral</code> option in the <code>al.tears.create_full_tear_sheet</code> function (see attached notebook). This may help in evaluating strategies where you want to be sector neutral.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b7a097ba7a0050045ad6630' id='5b7a097ba7a0050045ad6630'>
<a href='#5b7a097ba7a0050045ad6630'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5971e2308bc634000d022f24'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3fff8e67995978b6170deb9d9001a7b6?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5971e2308bc634000d022f24'>Joakim Arvidsson (Cream Mongoose)</a>
<span class='badge medal'></span>
</div>
<a UTCms='1534724475000' class='quanto-date posted-at response-posted-at' href='#5b7a097ba7a0050045ad6630'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>A few more from me. Grateful for the answers provided so far!</p>

<ul>
<li><p>If a factor model has a mean IC of 0.04 from <strong>In-Sample</strong> (IS) data, but when tested <strong>OOS</strong> (same length of time series data, e.g. 1 year + 1 month returns each) it has a mean IC of 0.03, does that mean the model was likely &#39;overfit&#39; by 25% (0.01/0.04) on the training data? Or would one need to take more OOS samples (to get a mean and variance of the &#39;overfit&#39; IC mean(?)) rather than just rely on a single OOS test? Is there a better way of measuring how &#39;overfit&#39; a model might be, when comparing IS vs OOS output from AL?</p></li>
<li><p>Is there a difference between overfitting on &#39;Random-Walk&#39; noise vs. overfitting on a certain non-stationary market regime? If there is, the latter may have at least <em>some</em> value as the market regime may return/continue in the future? Is there any way of measuring the difference in AL?</p></li>
<li><p>How can I measure, using AL, the &#39;break-even&#39; point that a model needs in order to survive Q&#39;s default trading costs (both default commission and slippage)? E.g. is there a minimum mean spread (in bps) between the upper and lower quantile that&#39;s required in order for the model to survive trading costs? (my hunch is that it may not be this simple)  </p></li>
</ul>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b7a4223ecdb80003fef0ec6' id='5b7a4223ecdb80003fef0ec6'>
<a href='#5b7a4223ecdb80003fef0ec6'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57bcf8e194cdba3f02000188'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/a38b0c01bf4db11e9e022f95f69899b8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57bcf8e194cdba3f02000188'>Michael Matthews</a>
</div>
<a UTCms='1534738980000' class='quanto-date posted-at response-posted-at' href='#5b7a4223ecdb80003fef0ec6'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Joakim,</p>

<p>On your first question, I don’t know that the interpretation of the IC works that way. However, in general, it is typical for out of sample performance to deteriorate somewhat. Additionally, performance may deteriorate due to other factors besides overfitting. For example, you may experience a regime shift in the out of sample data that may cause your model to be miscalibrated (and possibly underfit). I guess you could say that an IC of .03 means your model explains .09% of the variation in ranks (think R-squared). Whereas your 0.04 IC indicates that your model explains .16% of the variation in ranks, so maybe you could say you saw a 43.75% deterioration in the explanatory power of your model. (To any statisticians, please correct me if my interpretation is wrong there).</p>

<p>Regarding overfitting and regime shifts, if you can predict the regime shifts on out of sample data, then I would argue this is not overfitting at all. You are simply picking up on a signal, and not on noise. Overfitting by definition is simply fitting to random noise. Alphalens can help in this case because it shows you how the factor performed over time. It also shows seasonality plots. This is where you can use your judgement as a researcher to determine whether periods of under/out-performance of your factor were due to randomness, or if there is possibly a fundamental or structural reason for this cyclicality. </p>

<p>Regarding transaction costs, my impression is that Alphalens was not created to do transaction cost/implementation analysis. The goal of alphalens, as I understand it, is to determine whether a factor is predictive or not, irrespective of transaction costs. Even if a factor is weakly predictive, it can potentially be valuable when combined with other uncorrelated factors, or could even interact “multiplicatively” with other factors. In this case, while the factor would not be able to overcome transaction costs on its own, you still wouldn’t want to throw it out. (See this <a href="https://blog.quantopian.com/a-professional-quant-equity-workflow/" rel="nofollow">blog post</a> on the quant workflow by Quantopian).</p>

<p>I have also attached an example notebook that illustrates the concept of overfitting. It&#39;s not well explained because I&#39;m a bit tired, but feel free to ask questions. Quantopian also has a lecture on <a href="https://www.quantopian.com/lectures/the-dangers-of-overfitting" rel="nofollow">overfitting</a> if you haven&#39;t seen it already.</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b7a4cfe47e8480049f16ac0' id='5b7a4cfe47e8480049f16ac0'>
<a href='#5b7a4cfe47e8480049f16ac0'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5971e2308bc634000d022f24'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3fff8e67995978b6170deb9d9001a7b6?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5971e2308bc634000d022f24'>Joakim Arvidsson (Cream Mongoose)</a>
<span class='badge medal'></span>
</div>
<a UTCms='1534741758000' class='quanto-date posted-at response-posted-at' href='#5b7a4cfe47e8480049f16ac0'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Michael,</p>

<p>Wow, that is one cool notebook! Thank you for taking the time putting that together and for sharing it. I&#39;ll need to spends some time playing around with it.</p>

<p>Regarding my question on &#39;overfitting on a specific market regime&#39; I probably didn&#39;t explain it very well. </p>

<p>Let&#39;s say I train my model on 2017 full year dataset (a fairly low volatile market regime), and my factor therefore, inadvertently, gets fitted on a low volatile market (or trending market, or a market where large-caps on average outperform small-caps, technology stocks on average outperform utility stocks, etc.). Since financial time-series is non-stationary, couldn&#39;t you say that my factor was &#39;overfitted&#39; to work better during a low volatile market (or whatever the market regime was during the time-series when I was training my model), especially if that was not my intention? And so when tested on 2018 data (a much higher volatile market), the factor works less well due to the market regime shift. Does that make sense?</p>

<p>Good point on AL not being intended for transaction cost analysis, and that one may want to still keep weaker alpha factors that, on their own wouldn&#39;t survive transaction costs, but in aggregate would still be net alpha-positive when combined in the right overall model.</p>

<p>Thanks again, I appreciate you taking the time answering these!  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b7a9a524fed7c0041a1bb26' id='5b7a9a524fed7c0041a1bb26'>
<a href='#5b7a9a524fed7c0041a1bb26'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/598a1a0d40da7032bc27e6f6'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3d7776b021cbcd0f62b56acb7de7a354?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/598a1a0d40da7032bc27e6f6'>Ivory Ant</a>
</div>
<a UTCms='1534761554000' class='quanto-date posted-at response-posted-at' href='#5b7a9a524fed7c0041a1bb26'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Regarding trading costs: you need roughly &gt; 10bps to make money.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b7aba1747e848003df16d5e' id='5b7aba1747e848003df16d5e'>
<a href='#5b7aba1747e848003df16d5e'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1534769687000' class='quanto-date posted-at response-posted-at' href='#5b7aba1747e848003df16d5e'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I’m wondering how one can tackle the alpha combination evaluation step.  At some point, one has N decent factors (on the same trading time scale, to keep things simple).  So one then has to study the best approach to combine them.  Q has shown sum of z scores and ML techniques, and probably others and the  101 Alphas project was to explore the combination step (it was never finished, for some unreported reason).</p>

<p>As a general note to Q and Delaney, there’s a lot of preaching that combining factors is the way to go (good advice) but the tools aren’t adequate.  One really needs a version of Alphalens that takes in N factors individually and in combination and analyzes the whole thing in an integrated fashion.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b7b0d94ecdb802c99ef0dd6' id='5b7b0d94ecdb802c99ef0dd6'>
<a href='#5b7b0d94ecdb802c99ef0dd6'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57bcf8e194cdba3f02000188'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/a38b0c01bf4db11e9e022f95f69899b8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57bcf8e194cdba3f02000188'>Michael Matthews</a>
</div>
<a UTCms='1534791060000' class='quanto-date posted-at response-posted-at' href='#5b7b0d94ecdb802c99ef0dd6'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Joakim,</p>

<p>Regarding different regimes, I think you have the right idea. If you only build and train your model on one type of market condition, then you might have a model that only works on that type of market. In some sense, the model might properly be fit to that regime (as opposed to overfit), but it still have poor performance out of sample. This wouldn&#39;t be bad if you could identify ex ante what type of regime you are in, but that is a challenge in itself.</p>

<p>This also highlights the importance of sample selection. I think it absolutely makes sense to test your model over different time periods with differing market conditions to see if your model holds up. As always, there is a trade off between sample period size and data relevance due to the possibility of permanent structural breaks in the market (e.g. the effect of decimalization on short-term scalping strategies). This part of where the skill and experience of the researcher comes into play.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b7b532eaa894d004b34aa39' id='5b7b532eaa894d004b34aa39'>
<a href='#5b7b532eaa894d004b34aa39'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5971e2308bc634000d022f24'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3fff8e67995978b6170deb9d9001a7b6?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5971e2308bc634000d022f24'>Joakim Arvidsson (Cream Mongoose)</a>
<span class='badge medal'></span>
</div>
<a UTCms='1534808878000' class='quanto-date posted-at response-posted-at' href='#5b7b532eaa894d004b34aa39'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thanks Michael,</p>

<p>I fully agree with that. I&#39;m not trying to do any sort of market timing though, which I think is quite difficult, though could be very profitable if possible at all.  </p>

<p>Basically I&#39;d like to avoid, as much as possible, to fit my models on any specific market regime (and on noise), whether I&#39;m aware of it or not. &#39;Overfit&#39; might be the wrong word for it, if &#39;overfit&#39; only means &#39;fitted on noise.&#39;  Perhaps &#39;over-exposure&#39; is a better word?</p>

<p>I suppose this is where the Q Risk Model comes into play in my AL research (pennies are slowly starting to drop). If my model is &#39;over-exposed&#39; to a certain sector or style, and a lot of the returns in my model are coming from being exposed to a certain style/sector, then it&#39;s likely that my model is &#39;over-exposed&#39; to a certain &#39;market regime&#39; that perhaps worked well during the training period, but may not hold up as well during other (OOS) time-series where there&#39;s other market regimes at play?</p>

<p>Basically, if it&#39;s possible, I&#39;d like to find a way of <strong><em>measuring</em></strong> how much of my model&#39;s returns can be attributed to market regime &#39;over-exposure&#39;, how much of my model is &#39;overfitted&#39; on just random walk noise, and how much is likely to be &#39;pure alpha.&#39;</p>

<p>I&#39;m looking for the Holy Grail essentially... Ni!</p>

<p>:)</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b7d59a5a2e3ca0dbeede3c9' id='5b7d59a5a2e3ca0dbeede3c9'>
<a href='#5b7d59a5a2e3ca0dbeede3c9'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1534941605000' class='quanto-date posted-at response-posted-at' href='#5b7d59a5a2e3ca0dbeede3c9'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Delaney -</p>

<p>Did ya&#39;ll ever pursue trying to understand this paper:</p>

<p><a href="https://arxiv.org/ftp/arxiv/papers/1601/1601.00991.pdf" rel="nofollow">https://arxiv.org/ftp/arxiv/papers/1601/1601.00991.pdf</a></p>

<p>In the appendix, the 101 Alphas are published, and they&#39;ve largely been translated into the Q API.  The whole thing is a bit perplexing, since the paper seems to claim that they can somehow be combined into a profitable &quot;mega-alpha&quot; and asserts:</p>

<blockquote>
<p>We emphasize that the 101 alphas we present here are not “toy” alphas but real-life trading<br>
alphas used in production. In fact, 80 of these alphas are in production as of this writing.</p>
</blockquote>

<p>This would say that the Q workflow should be capable of taking the alphas as an input, in an attempt to substantiate the claims.</p>

<p>My guess is that individually, most if not all of the alphas look pretty bad using Alphalens, yet there is the possibility that when combined, one could somehow eke out some consistent alpha.  This would say that with the right alpha combination technique, factors that would normally be rejected could have some value (e.g. contain &quot;ephemeral&quot; alpha as the paper says).  Any insights?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b7e2005aa5dce6a7ccc83c3' id='5b7e2005aa5dce6a7ccc83c3'>
<a href='#5b7e2005aa5dce6a7ccc83c3'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57bcf8e194cdba3f02000188'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/a38b0c01bf4db11e9e022f95f69899b8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57bcf8e194cdba3f02000188'>Michael Matthews</a>
</div>
<a UTCms='1534992389000' class='quanto-date posted-at response-posted-at' href='#5b7e2005aa5dce6a7ccc83c3'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Joakim,</p>

<p>I think the Q Risk Model will help you with what you are describing. It will measure your exposures to given factors/sectors, and then give you an “attribution analysis” of what drove the algorithm’s performance. You can then asses whether the drivers of your performance are actually what is driving the logic of your algorithm. If these do not align, then that may be a sign that the results are less likely to hold up out of sample. </p>

<p>I think this is a slightly different problem than the volatility regime example you gave above. For this I would refer you to Quantopian’s <a href="https://blog.quantopian.com/risk-on-measuring-algorithm-sensitivity-to-volatility-regime-switching/" rel="nofollow">blog post</a> and <a href="https://www.quantopian.com/posts/does-your-algorithm-perform-better-in-a-low-or-high-volatility-regime-see-how-to-measure-its-sensitivity" rel="nofollow">notebook</a> outlining a process for evaluating whether an algo performs better or worse in a calm vs. volatile market.</p>

<p>Hope this helps!</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b7e974d8f085e0046875aa3' id='5b7e974d8f085e0046875aa3'>
<a href='#5b7e974d8f085e0046875aa3'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/50842732cb5e1a02000000d1'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f86535a7fafab6b7d903fc1461362f0a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/50842732cb5e1a02000000d1'>James Villa</a>
<span class='badge medal'></span>
</div>
<a UTCms='1535022925000' class='quanto-date posted-at response-posted-at' href='#5b7e974d8f085e0046875aa3'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Michael Matthews,</p>

<p>Thanks for the link on volatility regime sensitivity analysis. Dr. Jess Stauth had mentioned this Q study to me earlier in another thread but was not directed to the reference. This is a great stress test for long backtests (10+ years) as it highlights the attributable performance metrics to a particular regime, in this case high / low volatility regimes as defined. One can extend this analysis to other regime conditions / definition. For example, Bull / Bear regimes, Bull is define as current SPY close &gt; 200 MA SPY close and Bear as current SPY close &lt; 200 MA SPY. It can even be further extended to multiple regime conditions such as Bull/high volatility, Bull/low volatility, Bear/high volatility and Bear/low volatility.  If your long backtests survives it, you might have just found what might be the closest to the &quot;Holy Grail&quot; is!  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b925e5d1aa458004222d148' id='5b925e5d1aa458004222d148'>
<a href='#5b925e5d1aa458004222d148'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1536319069000' class='quanto-date posted-at response-posted-at' href='#5b925e5d1aa458004222d148'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Delaney -</p>

<p>I thought this was a good thread.  Are you planning to sustain it?  Generally, Q has all but given up on the forum, as far as I can tell.  You are the last great hope, my man!</p>

<p>So, I&#39;ve been plugging away, using AL exclusively.  It is a broad question, but how do I know that I&#39;m done, vis-a-vis results that would suggest a shot at contest winnings and a fund allocation?  I&#39;m happy to spend 90% of my time in the research platform, as Fawce recommended, but how do I know I&#39;m done, and can move onto the remaining 10% of my precious hobby time?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b943841addef30049291ab5' id='5b943841addef30049291ab5'>
<a href='#5b943841addef30049291ab5'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1536440385000' class='quanto-date posted-at response-posted-at' href='#5b943841addef30049291ab5'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Delaney -</p>

<p>Is there anything in the AlphaLens output that would scream &quot;Winsorize me, baby!&quot;?  &quot;To clip or not to clip: that is the question...&quot;</p>

<p>Maybe there is a standard way of interpreting the AlphaLens output that would indicate that <a href="https://en.wikipedia.org/wiki/Winsorizing" rel="nofollow">winsorization</a> (or something similar) is called for.  Any guidance?</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b98a1913e700100420cec8a' id='5b98a1913e700100420cec8a'>
<a href='#5b98a1913e700100420cec8a'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5971e2308bc634000d022f24'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3fff8e67995978b6170deb9d9001a7b6?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5971e2308bc634000d022f24'>Joakim Arvidsson (Cream Mongoose)</a>
<span class='badge medal'></span>
</div>
<a UTCms='1536729489000' class='quanto-date posted-at response-posted-at' href='#5b98a1913e700100420cec8a'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>A few more from me. Hopefully we&#39;ll get to these eventually. I really appreciate this thread!</p>

<ul>
<li>Is it &#39;wrong&#39; / &#39;bad practice&#39; to have a less strict p-value cutoff for OOS vs IS? For example, a 0.01 cutoff for IS but a 0.05 cutoff for the OOS test?<br></li>
<li>Would you be able to provide a &#39;reasonable&#39; range (or Max) for the AutoCorrelation (AC) metric? For example, anything above 0.95 is bad(?)  and why a high AC is &#39;bad&#39;? I understand (somewhat) <em>what</em> AC is but not <em>why</em> it&#39;s &#39;bad&#39;. Do you have any general advice on how one might be able to reduce this figure?<br></li>
<li>Sometimes I get a positive Mean IC (and risk adjusted IC), a p-value below my cutoff, decent spread between top/bottom quantiles (seeming to spread away from each-other), <strong><em>BUT</em></strong> a negative Annual Alpha and a negatively trending &#39;Factor weighted long/short Portfolio Cumulative Returns&#39; graph... How is this possible, and what might be the cause(s) of the negative returns? Should I still keep this factor, or try to &#39;tweak&#39; it to get positive returns, or discard altogether?<br></li>
<li>Would you be able to provide a general &#39;reasonable&#39; range/max for the Mean Turnover value for the top/bottom quantiles? This metric is mostly for trying to minimize unnecessary trading costs, correct? Do you have any general advice on how one might be able to reduce this figure?<br></li>
<li>Similar to Grant&#39;s question above, would you be able to provide examples on when to do a complete cutoff of outliers (e.g. .percentile_between(1, 99), and when to do winzorise, and when one might want to do both, and hopefully still have some remaining alpha?<br></li>
<li>Is there any way of measuring &#39;Alpha decay&#39; of a factor using AL?</li>
</ul>

<p>Just as general feedback, I really find the below videos/lectures very helpful. Since they are all about 3 years old, and some things have changed on Q (new tools, APIs, etc) it might be quite useful to revisit them and do new webinars for a new audience?</p>

<ul>
<li><a href="http://Quantopian%20Summer%20Lecture%20Series:%20The%20Good,%20The%20Bad,%20and%20The%20Correlated" rel="nofollow">Quantopian Summer Lecture Series: The Good, The Bad, and The Correlated</a><br></li>
<li><a href="https://www.youtube.com/watch?v=YiDfbYtgUPc&t=9s" rel="nofollow">Quantopian Lecture Series: p-Hacking and Multiple Comparisons Bias</a><br></li>
<li><a href="https://www.youtube.com/watch?v=Af0l3TQJ3h8" rel="nofollow">Quantopian Summer Lecture: The Art of Not Following the Market</a><br></li>
<li><a href="https://www.youtube.com/watch?v=2pbu3_6lF40" rel="nofollow">Quantopian Lecture Series: Instability of Parameters</a><br></li>
<li><a href="https://www.youtube.com/watch?v=Ep8Y5JfQoRg" rel="nofollow">Quantopian Lecture Series: Risk Factor Expsosure</a></li>
</ul>

<p>While I&#39;m writing a &#39;webinar wish-list&#39; I think it might also be nice to have a multi-part series of &#39;deep-dives&#39; into each of the steps in this webinar: <a href="https://blog.quantopian.com/idea-algorithm/" rel="nofollow">Idea to Algorithm.</a> Just cause I know you guys are not busy enough as it is with FactSet datasets and global EQ market rollouts, etc. :)</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b9916c08bd65f004a070dd7' id='5b9916c08bd65f004a070dd7'>
<a href='#5b9916c08bd65f004a070dd7'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5b9459cf4ba7f60046fdaa1d'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/59dc511bed0b221a119a47f296997746?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5b9459cf4ba7f60046fdaa1d'>Fabio Gomez</a>
</div>
<a UTCms='1536759488000' class='quanto-date posted-at response-posted-at' href='#5b9916c08bd65f004a070dd7'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I&#39;m learning how to use Alphalens but I don&#39;t get the logic of the &quot;demeaned&quot; argument, I have two questions:</p>

<ol>
<li><p>When I use the method &quot;alphalens.performance.mean_return_by_quantile&quot; with the demeaned argument equal &quot;False&quot; is to simulate a Long Short portfolio, but I don&#39;t understand why the two factors (in this case) have the same values (in absolute value), indeed when I put &quot;demeaned = False&quot;, the values are quite different.</p></li>
<li><p>With &quot;alphalens.performance.factor_returns&quot; I see that the &quot;demeaned&quot; argument has no effect in the result of the function, why?</p></li>
</ol>

<p>I attached the notebook with the both problems, thanks for the help!  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b994bbc8bd65f004a070eff' id='5b994bbc8bd65f004a070eff'>
<a href='#5b994bbc8bd65f004a070eff'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5a131e5ef8d2481e3e44e64f'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/415ae6f75d17c9d6407e6654e6ab1ef8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5a131e5ef8d2481e3e44e64f'>Luke Bianculli</a>
</div>
<a UTCms='1536773052000' class='quanto-date posted-at response-posted-at' href='#5b994bbc8bd65f004a070eff'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Fabio,<br>
As I understand it the purpose of demeaned=False is not to simulate a long/short portfolio. Demeaning the data has the effect of reducing the sample mean to 0 (by subtracting it from each sample observation). I believe what you are looking for are the results of your factor depending on whether it is used in a long/short portfolio? If this is the case I recommend looking into the AL documentation so you can see which functions are the most convenient for what exactly you are looking for. For example, you could try create_summary_tear_sheet with long_short =True and long_short=False to see the effect this has on your alpha signal. </p>

<p>Hope that answers your question.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b9aaba776059a0361b7efde' id='5b9aaba776059a0361b7efde'>
<a href='#5b9aaba776059a0361b7efde'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57bcf8e194cdba3f02000188'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/a38b0c01bf4db11e9e022f95f69899b8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57bcf8e194cdba3f02000188'>Michael Matthews</a>
</div>
<a UTCms='1536863143000' class='quanto-date posted-at response-posted-at' href='#5b9aaba776059a0361b7efde'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Fabio,</p>

<p>For the first part of your question, to elaborate on Luke&#39;s answer, setting <code>demaned=True</code> takes the returns and subtracts them by the universe mean return before calculating the mean return by quantile. In other words, it is an &quot;excess&quot; return over the mean universe return (similar to if you went long the quantile and short the entire equal-weighted universe). </p>

<p>For part 2, in the <code>performance.factor_returns</code> function, when you set <code>equal_weighted=True</code>, it is mathematically equivalent irrespective of whether you set <code>demeaned=True</code>. If you are interested in the math, I have included the proof below. Note, when <code>equal_weighted=True</code>, alphalens uses the median to demean instead of the mean. This makes sure you have the same number of longs and shorts and thus shorts have the opposite weight of longs (but same magnitude).</p>

<p>\(m=\) number of longs </p>

<p>\(n=\) number of shorts</p>

<p>\(i=\) asset \(i\) in long basket</p>

<p>\(j=\) asset \(j\)  in short basket</p>

<p>\(w_i=\) weight of asset \(i\) </p>

<p>\(r_i=\)  return of asset \(i\) </p>

<p>\(w_j=\) weight of asset \(j\) </p>

<p>\(r_j=\) return of asset \(j\) </p>

<p>\(r=\) median return</p>

<p>Note, since equal weighted demeaning uses the median, \(m = n\), so I will simply use the variable \(m\).</p>

<p>Without Demeaning, the return for date \(t\) is:</p>

<p>$$r_t = \sum_{i=1}^{m}w_ir_i + \sum_{j=1}^{m}w_jr_j$$ (Note: \(w_j\) is negative)</p>

<p>With Demeaning, the return for date \(t\) is:</p>

<p>$$r_t = \sum_{i=1}^{m}w_i(r_i-r) + \sum_{j=1}^{m}w_j(r_j-r)$$ </p>

<p>$$r_t = \sum (w_ir_i- w_ir) + \sum (w_jr_j- w_jr)$$</p>

<p>$$r_t = \sum w_ir_i- \sum w_ir + \sum w_jr_j- \sum w_jr$$</p>

<p>$$r_t = \sum w_ir_i  + \sum w_jr_j - \sum w_ir - \sum w_jr$$</p>

<p>$$r_t = \sum w_ir_i  + \sum w_jr_j - (\sum w_ir + \sum w_jr)$$</p>

<p>$$r_t = \sum w_ir_i  + \sum w_jr_j - (r\sum w_i + r\sum w_j)$$</p>

<p>Since portfolio is Equal Weighted Dollar Neutral:<br>
$$\sum w_i = -\sum w_j$$ </p>

<p>$$r_t = \sum w_ir_i  + \sum w_jr_j - (r\sum w_i - r\sum w_i)$$</p>

<p>$$r_t = \sum w_ir_i  + \sum w_jr_j$$</p>

<p>And this is the same result as without demeaning.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b9ac6344e6de600480cfae4' id='5b9ac6344e6de600480cfae4'>
<a href='#5b9ac6344e6de600480cfae4'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57bcf8e194cdba3f02000188'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/a38b0c01bf4db11e9e022f95f69899b8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57bcf8e194cdba3f02000188'>Michael Matthews</a>
</div>
<a UTCms='1536869940000' class='quanto-date posted-at response-posted-at' href='#5b9ac6344e6de600480cfae4'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Joakim,</p>

<p>Here are some of my thoughts on your questions.  As always, these are just my opinions, so take it for what it is worth.</p>

<blockquote>
<p>Is it &#39;wrong&#39; / &#39;bad practice&#39; to have a less strict p-value cutoff for OOS vs IS? For example, a 0.01 cutoff for IS but a 0.05 cutoff for the OOS test?</p>
</blockquote>

<p>I don’t know whether it is wrong or right, but one approach would be to adjust your p-value for the number of tests run. <a href="https://en.wikipedia.org/wiki/Multiple_comparisons_problem#Controlling_procedures" rel="nofollow">https://en.wikipedia.org/wiki/Multiple_comparisons_problem#Controlling_procedures</a></p>

<blockquote>
<p>Would you be able to provide a &#39;reasonable&#39; range (or Max) for the AutoCorrelation (AC) metric? For example, anything above 0.95 is bad(?) and why a high AC is &#39;bad&#39;? I understand (somewhat) what AC is but not why it&#39;s &#39;bad&#39;. Do you have any general advice on how one might be able to reduce this figure?</p>
</blockquote>

<p>I think this would depend on the context. Check out this video by Quantopian at <a href="https://youtu.be/bvUdDFpsZ3o?t=2393" rel="nofollow">39:53</a>. They give some rationale for how to think of it. In the example of the factor being analyzed, the factor values show a high autocorrelation, and Dr. Stauth goes through her thought process for why this might need to be investigated further. Essentially if autocorrelation of your factor is too high, you aren’t really getting a large number of “independent” bets. (Note: A point I think they miss in the videos is that the main reason for the high autocorrelation is due to how they constructed the factor (it is a 5 period moving average of sentiment). By its nature, since you are only dropping 1 day in the average and adding a new day, prior day’s values will be highly correlated with the next value.) Regarding a &quot;reasonable range&quot; for autocorrelation, I think it depends on the context/situation, and/or factors being analyzed.</p>

<blockquote>
<p>Sometimes I get a positive Mean IC (and risk adjusted IC), a p-value below my cutoff, decent spread between top/bottom quantiles (seeming to spread away from each-other), BUT a negative Annual Alpha and a negatively trending &#39;Factor weighted long/short Portfolio Cumulative Returns&#39; graph... How is this possible, and what might be the cause(s) of the negative returns? Should I still keep this factor, or try to &#39;tweak&#39; it to get positive returns, or discard altogether?</p>
</blockquote>

<p>I am not really sure on this, but keep in mind that both the alpha calculation and the factor weighted long/short cumulative returns chart use all stocks in the computation and weight returns proportional to the factor value. Therefore, it would be possible to have a positive high minus low spread, a negative alpha, and negative factor-weighted returns if the “middle quantiles” provided a drag on the long-short portfolio. That said, the IC coefficient should take into account those mid-range factor values as well, so it is a little puzzling without seeing a specific example.</p>

<blockquote>
<p>Would you be able to provide a general &#39;reasonable&#39; range/max for the Mean Turnover value for the top/bottom quantiles? This metric is mostly for trying to minimize unnecessary trading costs, correct? Do you have any general advice on how one might be able to reduce this figure?</p>
</blockquote>

<p>Again, I think this is situation specific. A signal will have to have relatively greater predictive power if it has higher turnover. But saying exactly how much turnover is okay depends on how strong the signal is. </p>

<p>Too low turnover may mean that you need larger amounts of data to accumulate the desired number of independent bets to prove your signal is robust.  Also, if you have a large amount of intraday turnover, the slippage model in the IDE may not do a great job of modeling this (think high frequency trading), particularly since bid/ask data is not available. </p>

<p>In terms of how to reduce turnover, I’m not really sure in general terms but maybe look at:</p>

<ul>
<li>Increasing time between rebalancing<br></li>
<li>Smooth the factor values<br></li>
</ul>

<p>Also, see contest rules for their guidelines on Turnover. <a href="https://www.quantopian.com/contest/rules" rel="nofollow">https://www.quantopian.com/contest/rules</a></p>

<blockquote>
<p>Similar to Grant&#39;s question above, would you be able to provide examples on when to do a complete cutoff of outliers (e.g. .percentile_between(1, 99), and when to do winzorise, and when one might want to do both, and hopefully still have some remaining alpha?</p>
</blockquote>

<p>If you are weighting assets proportional to factor weights, it might make sense to winsorize, especially if you think a small handful of assets may end up being responsible for a large portion of your alpha. Note, if you use factor ranks or quantiles, winsorizing is likely unnecessary. Regarding removing outliers, I would lean toward not removing outliers unless if you think it is bad data. Otherwise, you would need an economic rationale for why doing this is a good idea. (e.g. Maybe you are testing a momentum factor and you think that stocks with extremely high returns signify an event like a takeover (assuming these aren’t already screened out)). </p>

<blockquote>
<p>Is there any way of measuring &#39;Alpha decay&#39; of a factor using AL?</p>
</blockquote>

<p>Assuming you are talking about how long of a forward period the signal is predictive for, think about using the alphalens event tearsheet. They also talk about this in the video I referenced before at <a href="https://youtu.be/bvUdDFpsZ3o?t=2176" rel="nofollow">36:16</a>.</p>

<p>Hope this helps.</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b9af562a19c4e004723ae9c' id='5b9af562a19c4e004723ae9c'>
<a href='#5b9af562a19c4e004723ae9c'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5971e2308bc634000d022f24'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3fff8e67995978b6170deb9d9001a7b6?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5971e2308bc634000d022f24'>Joakim Arvidsson (Cream Mongoose)</a>
<span class='badge medal'></span>
</div>
<a UTCms='1536882018000' class='quanto-date posted-at response-posted-at' href='#5b9af562a19c4e004723ae9c'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thanks Michael, super helpful as always! Would be great to get @Delaney&#39;s take on them as well, though your answers do make a lot of sense to me. </p>

<p>A few follow-up questions/comments if you don&#39;t mind:</p>

<blockquote>
<p>That said, the IC coefficient should take into account those mid-range<br>
factor values as well, so it is a little puzzling without seeing a<br>
specific example.</p>
</blockquote>

<p>I&#39;ll see if I can find a somewhat &#39;generic&#39; example of this (positive alpha but negative returns) and attach the AL notebook.</p>

<blockquote>
<p>Again, I think this is situation specific. A signal will have to have<br>
relatively greater predictive power if it has higher turnover. But<br>
saying exactly how much turnover is okay depends on how strong the<br>
signal is.</p>
</blockquote>

<p>Great answer! I&#39;m slowly starting to get my head around this. Would a &#39;signal-to-turnover&#39; ratio make sense you think, and if so, what would such a ratio look like? </p>

<p>Mean IC [or Risk Adjusted IC]   /  (Bottom Quantile Mean Turnover + Top Quantile Mean Turnover)? </p>

<p>Or:</p>

<p>Mean Period Wise Spread (bps)     /  (Bottom Quantile Mean Turnover + Top Quantile Mean Turnover)? </p>

<p>Or something else? (same holding period for both the numerator and denominator, e.g. 1D or 5D, etc). If any of this makes sense, is it possible to get this &#39;signal/turnover&#39; ratio from AL somehow?</p>

<p>Really appreciate your help and insights! I&#39;m quite new to all this and a bit of a slow learner (and a quick forgetter) so appreciate your patience and helpful explanations!  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b9bdc6ee80dfa0046264b12' id='5b9bdc6ee80dfa0046264b12'>
<a href='#5b9bdc6ee80dfa0046264b12'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57bcf8e194cdba3f02000188'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/a38b0c01bf4db11e9e022f95f69899b8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57bcf8e194cdba3f02000188'>Michael Matthews</a>
</div>
<a UTCms='1536941166000' class='quanto-date posted-at response-posted-at' href='#5b9bdc6ee80dfa0046264b12'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Joakim,</p>

<p>I think your second idea for a signal/turnover ratio makes some intuitive sense . Here is my thought process:</p>

<p>\(r=\) return for the period in question </p>

<p>\(t=\) mean turnover rate (as a decimal)</p>

<p>\(c=\) transaction cost for each dollar traded</p>

<p>\(\theta_{tc}=\) signal/transaction cost ratio</p>

<p>\(\theta_t=\) signal/turnover ratio</p>

<p>Essentially, what we are trying to measure is whether the return more than compensates us for our transaction costs. Therefore, your total transaction cost as a fraction of your portfolio will equal \(tc\). Our signal to transaction cost ratio would be:</p>

<p>$$\theta_{tc} = \frac{r}{tc}$$</p>

<p>In this case, if \(\theta&gt;1\), it means your return is greater than your transaction costs. Now, to make this analysis more general, let&#39;s assume we don&#39;t know the user&#39;s transaction cost, so let&#39;s just remove \(c\) from the equation to get our signal to turnover ratio:</p>

<p>$$\theta_t = \frac{r}{t}$$</p>

<p>An alternative interpretation of this \(\theta_t\) is the breakeven transaction cost rate \(c\). In other words, if your return was 0.01 (1%) and your turnover was 100% (or simply 1.0), your break-even transaction cost rate would be 0.01 (1%). If your transaction cost rate was less than 0.1, you would theoret be making money.</p>

<p>I&#39;ll try and see if I can code an example using alphalens a bit later.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b9bed3ec02b6029e1f97110' id='5b9bed3ec02b6029e1f97110'>
<a href='#5b9bed3ec02b6029e1f97110'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57bcf8e194cdba3f02000188'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/a38b0c01bf4db11e9e022f95f69899b8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57bcf8e194cdba3f02000188'>Michael Matthews</a>
</div>
<a UTCms='1536945470000' class='quanto-date posted-at response-posted-at' href='#5b9bed3ec02b6029e1f97110'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Here is the example I coded up using a basic mean reversion factor. The function at the end calculates the signal/turnover ratio. It could probably use a look from another pair of eyes, but it seems to be calculating correctly.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b9fd7bfb70a92456557b6f9' id='5b9fd7bfb70a92456557b6f9'>
<a href='#5b9fd7bfb70a92456557b6f9'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5346083a839ff34e1400010a'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e2319a353b35eac99e765c836ba72044?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5346083a839ff34e1400010a'>Delaney Mackenzie</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1537202111000' class='quanto-date posted-at response-posted-at' href='#5b9fd7bfb70a92456557b6f9'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hey folks, as you can tell a few others have been doing an amazing job of stepping in and answering questions. The last several weeks have been super busy for me, but I&#39;m working on another batch of answers now.  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='5ba0782fe0a615003fa52f23' id='5ba0782fe0a615003fa52f23'>
<a href='#5ba0782fe0a615003fa52f23'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5971e2308bc634000d022f24'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3fff8e67995978b6170deb9d9001a7b6?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5971e2308bc634000d022f24'>Joakim Arvidsson (Cream Mongoose)</a>
<span class='badge medal'></span>
</div>
<a UTCms='1537243183000' class='quanto-date posted-at response-posted-at' href='#5ba0782fe0a615003fa52f23'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thanks Michael, very useful notebook!</p>

<p>I think I understand why a high turnover (when compared to signal strength) is a bad thing (due to trading costs). However, in the (very helpful) video you linked to, Jess says that a too low turnover value is also a bad thing... Honestly I don&#39;t understand this, but I think it&#39;s related to a low turnover value means it will take a long time for the factor &#39;prediction&#39; to materialize(?). Doesn&#39;t this contradict the Mean IC value for each respective holding period though? </p>

<p>Take the below AL summary factor analysis (1D column) as an example:</p>

<p><img src="https://image-proxy.quantopian.com/654696b16f0cfd09ab4040f0dbedd6216c471ea3/68747470733a2f2f692e696d6775722e636f6d2f446876456831772e6a70672e" /></p>

<p>If the Mean IC value is 0.008 for the 1 day holding period, doesn&#39;t that mean that about 0.8% of the times, the factor is predictive (up or down) after each 1 day holding period? However, from what I can tell from Jess&#39; explanation in the video, a low turnover means that it may take a much longer time (than just 1 day) for the factor to materialize (I&#39;m probably misunderstanding her somehow, I just don&#39;t know how). </p>

<p>This is basically why I asked for a &#39;reasonable range&#39; for the factor mean turnover value, since a too high value appears bad (which I can understand), but a too low value is also bad (which I don&#39;t fully understand).</p>

<p>In the above example, if you or anyone else could explain (in a simple way) why the low factor mean turnover, and the super high factor AutoCorrelation value are both a bad thing, I&#39;d be very grateful!</p>

<p>@Delaney,</p>

<p>Thanks for the update! I&#39;m looking forward to the next batch!  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5ba0bc23443bcc003f23c3f9' id='5ba0bc23443bcc003f23c3f9'>
<a href='#5ba0bc23443bcc003f23c3f9'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1537260579000' class='quanto-date posted-at response-posted-at' href='#5ba0bc23443bcc003f23c3f9'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><blockquote>
<p>This is basically why I asked for a &#39;reasonable range&#39; for the factor mean turnover value, since a too high value appears bad (which I can understand), but a too low value is also bad (which I don&#39;t fully understand).</p>
</blockquote>

<p>An interesting point.  I&#39;m sure there are lots of hand-wavy explanations, but one would wonder if, based on some basic statistical/information theoretic measures, one could back out a kind of natural turnover sweet spot for Quantopian&#39;s <code>QTradeableUS</code>?  This would be irrespective of any specific factor or set of factors.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5ba135af443bcc004823c6d7' id='5ba135af443bcc004823c6d7'>
<a href='#5ba135af443bcc004823c6d7'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57bcf8e194cdba3f02000188'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/a38b0c01bf4db11e9e022f95f69899b8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57bcf8e194cdba3f02000188'>Michael Matthews</a>
</div>
<a UTCms='1537291695000' class='quanto-date posted-at response-posted-at' href='#5ba135af443bcc004823c6d7'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Joakim,</p>

<p>A factor with high autocorrelation (and most likely lower turnover) means that it does not change frequently. Therefore, you will have fewer independent bets. As a quant, if you have an edge, you want as many independent bets as possible so that the law of large numbers starts to kick in. Furthermore, as it relates to research and backtesting, you need more independent bets to generate confidence in your results. </p>

<p>Also, regarding the interpretation of the mean IC, the IC is a correlation coefficient of the factor &quot;ranks&quot; vs. the &quot;rank&quot; of returns on a daily basis (in other words, it is the spearman rank correlation coefficient of factor values vs. return values). Alphalens reports the mean of these daily ICs. This does not equate to saying the factor is predictive IC% of the time. Alternatively, if you square each IC and then take the mean, I believe you could say that on average your factor ranks explain \(IC^2\) of the variation in return ranks. However, for better intuition about the IC, I would recommend reading about the Fundamental Law of Active Management. It relates your information coefficient to your Information Ratio (or Sharpe Ratio). Basically, it says that your Information Ratio equals your IC times the number of independent bets:</p>

<p>$$ IR = IC * \sqrt{N} $$ </p>

<p>In other words, we want high predictability, and we want to make a lot of independent predictions in order to obtain a higher risk adjusted return. </p>

<p>To summarize, it is not that low turnover is such a bad thing (hence the popularity of passive index funds/ETFs). It is just that it makes it hard to prove statistically with confidence that you actually have an edge that works and is not just due to random chance.</p>

<p>P.S. - To Grant&#39;s point, it may be possible to come up with a theoretical model that takes into account turnover/autocorrelation, number of independent bets, desired statistical confidence, and signal strength to find a reasonable range for a given factor. I don&#39;t have a model for you here, but maybe it is something to think about.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5ba19bd4443bcc62bc23c4c7' id='5ba19bd4443bcc62bc23c4c7'>
<a href='#5ba19bd4443bcc62bc23c4c7'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5971e2308bc634000d022f24'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3fff8e67995978b6170deb9d9001a7b6?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5971e2308bc634000d022f24'>Joakim Arvidsson (Cream Mongoose)</a>
<span class='badge medal'></span>
</div>
<a UTCms='1537317844000' class='quanto-date posted-at response-posted-at' href='#5ba19bd4443bcc62bc23c4c7'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Michael,</p>

<p>Thank you! I think it&#39;s slowly starting to sink in to the old melon. Delaney appears to be saying the same thing in the <a href="https://www.quantopian.com/lectures/autocorrelation-and-ar-models#watch" rel="nofollow">Autocorrelation and AR Models</a> lecture. I really appreciate how you are able to explain in simple terms something quite complicated (to me anyway).</p>

<p>When you say:</p>

<blockquote>
<p>A factor with high autocorrelation (and most likely lower turnover)<br>
means that it does not change frequently.</p>
</blockquote>

<p>Do you mean that the factor value itself doesn&#39;t change frequently? For example, a &#39;quality&#39; factor, such as ROIC, I would then expect to change quarterly (when companies release their 10-Qs), and therefore have a high Autocorrelation value, and a low Turnover value(?). However, a &#39;value&#39; factor that has &#39;price&#39; in it in the denominator, such as the Earnings Yield (inverse of P/E ratio), I would expect to change quite frequently (daily for most companies). </p>

<p>However, both the &#39;quality&#39; and &#39;value&#39; factors appear to have very high Autocorrelation, and low turnover? Since the &#39;value&#39; factor should change almost daily, what&#39;s the reason for the &#39;value factor&#39; having such high Autocorrelation (and low Turnover)? See attached based on your previous NB.</p>

<p>@Delaney,</p>

<p>Just a suggestion, but perhaps it might be useful to have a (curated) FAQ section after each Lecture?</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5ba211366dae9f004376e09d' id='5ba211366dae9f004376e09d'>
<a href='#5ba211366dae9f004376e09d'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1537347894000' class='quanto-date posted-at response-posted-at' href='#5ba211366dae9f004376e09d'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>For AlphaLens, the <em>Mean Factor Rank Autocorrelation</em> is described in the <a href="https://github.com/quantopian/alphalens/blob/master/alphalens/performance.py" rel="nofollow">code</a> as:</p>

<blockquote>
<p>Computes autocorrelation of mean factor ranks in specified time spans.<br>
    We must compare period to period factor ranks rather than factor values<br>
    to account for systematic shifts in the factor values of all names or names<br>
    within a group. This metric is useful for measuring the turnover of a<br>
    factor. If the value of a factor for each name changes randomly from period<br>
    to period, we&#39;d expect an autocorrelation of 0.</p>
</blockquote>

<p>Here&#39;s my interpretation:</p>

<ul>
<li><p>It sounds like the starting point is, for each stock, to have a trailing window of raw factor values (a time series of trading days, ignoring weekends and holidays, I suppose).  But then is the ranking done along the time axis, or across the stocks at each point in time?</p></li>
<li><p>Then, presumably, the autocorrelation of factor values for each stock is computed for various lag values (e.g. 1D, 5D, etc.).  Once we have these data, then for each lag, the mean autocorrelation is computed for each lag value (e.g. 1D, 5D, etc.).</p></li>
<li><p>For the plots, the same computation is applied, but only using a rolling trailing window, not the whole data set.  What is the length of the trailing window?</p></li>
</ul>

<p>The author of the <a href="https://github.com/quantopian/alphalens/blob/master/alphalens/performance.py" rel="nofollow">code</a> states &quot;This metric is useful for measuring the turnover of a factor&quot; so how is this done?  Can I actually compute the turnover from the autocorrelation via a relation (e.g. TURNOVER = FUNCTION(AUTOCORRELATION))?</p>

<p>Overall, a bit of feedback to Delaney on this thread is that in the end, we need guidance on how to accept/reject factors, either on an individual basis or in combination (and what alpha combination techniques to consider), vis-a-vis what might work for contest/fund-worthy algos.  In the end, it is a go/no-go decision on a given factor (or combination of factors).  It is easy to lose sight of the big picture with all of the discussion on the statistical minutiae.</p>

<p>The other consideration is that as the number of factors grows, the manual AlphaLens process breaks down.  One really needs a machine to assess factors.  It would be interesting to hear how this might be done (apparently, in the context of the 101 Alphas project, y&#39;all started to think about this, and for the Q fund, you certainly must be noodling on it, since in theory, you could have hundreds, if not thousands, of algos to assess and combine...although with less than 200 contest participants and ~20 algos in the fund, you have a way to go).</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5ba2a47e4d32bd0045fecfd9' id='5ba2a47e4d32bd0045fecfd9'>
<a href='#5ba2a47e4d32bd0045fecfd9'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57bcf8e194cdba3f02000188'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/a38b0c01bf4db11e9e022f95f69899b8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57bcf8e194cdba3f02000188'>Michael Matthews</a>
</div>
<a UTCms='1537385598000' class='quanto-date posted-at response-posted-at' href='#5ba2a47e4d32bd0045fecfd9'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Joakim,</p>

<p>It is the factor &quot;ranks&quot; that are used in calculating the autocorrelation. These ranks tend to change relatively slowly for a value factor. In the example you gave with the earnings yield, the earnings only change quarterly, but most stocks tend to go up and down with the market. So, for a stock to get more expensive relative to the rest of the universe, one of two things has to happen, the stock has to have a significant decline in earnings relative to everything else (which as we mentioned only happens quarterly), or the stock has to outperform the rest of the market. Outperformance can happen slowly or quickly. </p>

<p>I think it is useful to understand how the factor rank autocorrelation is calculated. First, I think it is helpful to understand the difference between pearson&#39;s correlation coefficient, and the spearman rank correlation coefficient. (This will help you understand the IC calculation better, too). Here are a couple links to familiarize yourself with the concept:</p>

<ul>
<li><a href="https://www.economicsnetwork.ac.uk/statistics/pearson_spearman.htm" rel="nofollow">Interactive Example</a> that allows you to change data points and see how the two correlation measures change.<br></li>
<li><a href="https://statistics.laerd.com/statistical-guides/spearmans-rank-order-correlation-statistical-guide.php" rel="nofollow">Explanation  of the concept and calculation.</a></li>
</ul>

<p>I also took the notebook you attached and pulled the code from Github line by line to illustrate and explain how Alphalens is arriving at this number so you can better understand it. It calculates the ranks of the factors grouped by day. It then calculates the rank correlation of each day&#39;s values with a prior day&#39;s values. You end up with T-p correlation coefficients (T=Number of days in sample; p = lag of number of days). Alphalens plots this timeseries and also reports the mean in the Turnover/Autocorrelation table.</p>

<p>Regarding Grant&#39;s point on guidance on how to accept/reject factors, I think that Quantopian has done a good job putting a lot of information out there. That said, I don&#39;t think it is in the spirit of the company to provide an exact formula for when to accept or reject factors. The goal is to have a crowd-sourced fund where hopefully each person does something unique and different. In other words, hopefully people will come up with many different formulas. If Quantopian did have a formula(s) for this, I imagine they wouldn&#39;t need us. But that is just my 2 cents.</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5ba2f6804d32bd0045fed1aa' id='5ba2f6804d32bd0045fed1aa'>
<a href='#5ba2f6804d32bd0045fed1aa'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5971e2308bc634000d022f24'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3fff8e67995978b6170deb9d9001a7b6?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5971e2308bc634000d022f24'>Joakim Arvidsson (Cream Mongoose)</a>
<span class='badge medal'></span>
</div>
<a UTCms='1537406592000' class='quanto-date posted-at response-posted-at' href='#5ba2f6804d32bd0045fed1aa'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Michael,</p>

<p>What can I say other than a big THANK YOU! Your above explanation, the two links, and your very helpful NB all helps me to finally (slowly) understand all of this. It will take me a while to digest it all, but I already feel I have a better understanding of the factor rank autocorrelation. </p>

<p>I also think the the educational material (all FREE) on Q is excellent, but sometimes no matter how many times I watch a lecture or go through the notebook I don&#39;t fully grasp the material unless I can ask specific questions I have about the material and have the answers explained to me just like you&#39;ve done above. So again, a big thank you for taking the time putting this together!  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5ba36d7db25f33003e62c4ea' id='5ba36d7db25f33003e62c4ea'>
<a href='#5ba36d7db25f33003e62c4ea'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1537437053000' class='quanto-date posted-at response-posted-at' href='#5ba36d7db25f33003e62c4ea'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I still don&#39;t understand how the autocorrelation computation normalizes the alpha factor.  If, for each point in time, the factor is ranked across stocks, then one could have dramatic jumps for a given stock versus time, since the number of stocks is not constrained.  For example, if at one point in time, there are 100 stocks, and at another point, there are 10 stocks, then the ranks versus time will not be comparable.  Is there an implicit assumption here that the number of stocks versus time will be roughly constant (e.g. only change by a few percent)?  Or is there some under-the-hood normalization that makes the computations independent of the number of stocks?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5ba3e7fcd562330049e17331' id='5ba3e7fcd562330049e17331'>
<a href='#5ba3e7fcd562330049e17331'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57bcf8e194cdba3f02000188'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/a38b0c01bf4db11e9e022f95f69899b8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57bcf8e194cdba3f02000188'>Michael Matthews</a>
</div>
<a UTCms='1537468412000' class='quanto-date posted-at response-posted-at' href='#5ba3e7fcd562330049e17331'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Grant,</p>

<p>I don&#39;t think the autocorrelation computation will normalize for the change in number of stocks. It can only compute an autocorrelation for stocks that exist in both the current period and the lagged period. So in your example, the autocorrelation would only take into account stocks that were in both the lagged and current period.</p>

<p>However, it does normalize in the sense that it only picks up changes in factor values &quot;relative&quot; to all the stocks in the universe. In other words, let&#39;s say you had a mean reversion factor based on 1-day return. Let&#39;s just assume we are trading a universe that shows negative autocorrelation of time series returns (i.e. if today&#39;s universe average return is positive, tomorrow&#39;s return tends to be negative).  However, this does not mean the &quot;ranking&quot; of individual returns of stocks are negatively autocorrelated. For example, you could still have a tendency for a stock that is stronger than the rest of the group be stronger than the rest of the group tomorrow (i.e. positive rank autocorrelation). Alphalens is designed to analyze cross-sectional  factors. I believe this is what the documentation means when it says:</p>

<blockquote>
<p>We must compare period to period factor ranks rather than factor values<br>
    to account for systematic shifts in the factor values of all names or names<br>
    within a group.  </p>
</blockquote>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5ba42139d562330043e1751e' id='5ba42139d562330043e1751e'>
<a href='#5ba42139d562330043e1751e'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1537483065000' class='quanto-date posted-at response-posted-at' href='#5ba42139d562330043e1751e'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@ Michael -</p>

<p>Say I have stocks A, B, C, X, Y, Z, with ranks 1, 2, 3, 4, 5, 6.  For 100 trading days, all is good, and then X drops out of the universe.  Then, I&#39;m left with A, B, C, Y, Z with ranks 1, 2, 3, 4, 5.  Well, A, B, C are just fine, but Y jumped from 5 to 4, and Z jumped from 6 to 5.  The jumps would seem problematic as stocks go in and out of the universe.</p>

<p>Another question for Delaney is why ranks and not z-scores or some other normalization?  It would seem that ranking throws out information.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5ba4650bd562330040e17613' id='5ba4650bd562330040e17613'>
<a href='#5ba4650bd562330040e17613'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57bcf8e194cdba3f02000188'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/a38b0c01bf4db11e9e022f95f69899b8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57bcf8e194cdba3f02000188'>Michael Matthews</a>
</div>
<a UTCms='1537500427000' class='quanto-date posted-at response-posted-at' href='#5ba4650bd562330040e17613'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Grant, </p>

<p>I can see your point.  It will make a difference, although it is quite small in the example you give (from 1.0 to .99). You might could say it is a bug in the code. In your example, you would treat the X entry for both days as a NaN. This still messes with the correlation coefficient. However, my guess is that the effect would be immaterial. Maybe if you had large shifts in your universe, this could become an issue. That said, the fix is easy, and can be done in one of two ways. Drop the symbols that don&#39;t exist in both days, next rank the two days, then calculate correlation, or more simply, keep everything the same, and just use the spearman rank correlation coefficient at the end of the computation. This will not be affected by the missing value. In your example, you would get an exact 1.0 correlation.</p>

<p>Regarding your question about ranks for z-scores, here is my 2 cents if you care to hear it. Ranks tend to be more robust to outliers. It prevents your model from giving too much weight to some extreme value/factor, and thus protects a bit from overfitting. I believe this is similar to one of the reasons machine learning practitioners in finance will often setup a problem as a classification problem instead of a regression problem. Essentially, we are trying to predict a continuous variable (return), which lends itself as a regression setup. However, since data availability is a problem in finance (i.e. we can&#39;t just get more of it), labeling your data as a positive return or negative return (or some other labelling method, e.g. Prado&#39;s triple barrier method) reduces the possibility of overfitting the model.  Whereas a regression model might heavily weight the features that were associated with a stock that had an outlier return due to some random noise, or non-repeatable event, the classification method simply treats it as a positive label, just like all the other positive labels. In summary, using ranks and classification is one way to deal with possible overfitting (or the bias/variance trade-off).</p>

<p>You are correct though. You do lose information by ranking. You lose the magnitude of the difference between factor values. There may be signal in that extreme factor value that you want to capture. I think this should be up to the judgement of the analyst, and it will depend on the use case.</p>

<p>Also, I should note, the spearman rank correlation coefficient uses ranks to measure the monotonic relationship between variables, as opposed to just measuring the strength of a linear relationship. This can be desirable for measuring correlation between variables that may have a relatively positive monotonic relation, but might not be linear.</p>

<p>Hope this helps.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5ba4c328e7edcf213736f8bd' id='5ba4c328e7edcf213736f8bd'>
<a href='#5ba4c328e7edcf213736f8bd'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1537524520000' class='quanto-date posted-at response-posted-at' href='#5ba4c328e7edcf213736f8bd'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I understand the roll of ranking a factor and stock returns in the information coefficient (IC) calculation (see discussion of <a href="https://en.wikipedia.org/wiki/Spearman%27s_rank_correlation_coefficient" rel="nofollow">Spearman&#39;s rank correlation coefficient</a>).  However, my assumption is that ranked factor values are not used in subsequent calculations in AlphaLens.  I was figuring that the returns analyses is based on treating the raw factor values as long-short portfolio weights, after the following normalization (in pseudo-code):</p>

<pre><code>alpha_demeaned = (alpha - mean(alpha))  
alpha_normalized = alpha_demeaned/sum(abs(alpha_demeaned))  
</code></pre>

<p>So, why one then jumps back to ranks for the autocorrelation computations is a mystery.</p>

<p>One suggestion to Delaney would be to use this forum discussion thread as a springboard for improving the AlphaLens documentation.  One approach would be to build it right into AlphaLens itself and have a <code>doc</code> mode flag, with all the detail an analyst would ever want (in words and standard mathematical/statistical symbols, not Python code...just make sure the code does what you say it does).  Something like:</p>

<pre><code>al.tears.create_information_tear_sheet(factor_data, doc=True)  
</code></pre>

<p>Then, your efforts here could take on some permanence.</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5ba4c6a33f1a63421549e170' id='5ba4c6a33f1a63421549e170'>
<a href='#5ba4c6a33f1a63421549e170'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1537525411000' class='quanto-date posted-at response-posted-at' href='#5ba4c6a33f1a63421549e170'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>What changes to AlphaLens will be required to accommodate the FactSet integration and addition of global equities?  And if changes are required, when will they be done, relative to the upcoming FactSet/global equity launch?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5ba5221a3f1a6332f649e138' id='5ba5221a3f1a6332f649e138'>
<a href='#5ba5221a3f1a6332f649e138'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57bcf8e194cdba3f02000188'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/a38b0c01bf4db11e9e022f95f69899b8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57bcf8e194cdba3f02000188'>Michael Matthews</a>
</div>
<a UTCms='1537548826000' class='quanto-date posted-at response-posted-at' href='#5ba5221a3f1a6332f649e138'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Grant,</p>

<p>You have a point. That could be a possible option added to the autocorrelation functions in alphalens where you give the user the option to use a different normalization method. Why don&#39;t you submit an <a href="https://github.com/quantopian/alphalens/issues" rel="nofollow">issue</a> on the Github page? That way you can get some thoughts from the developers and/or submit a pull request.</p>

<p>Any reason you would create a <code>doc</code> flag as opposed to just adding to the doc strings of the alphalens function. This way you can use Jupyter&#39;s functionality by either pressing SHIFT+TAB or using the <code>?</code> after a function to look at the doc string. Alphalens generally uses the numpy style doc strings (<a href="https://numpydoc.readthedocs.io/en/latest/format.html#docstring-standard" rel="nofollow">see here</a>). If you look down to &quot;Section #12 Notes&quot; in the link, I believe this would be where you would add details using mathematical notation in LaTeX format.</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5ba523d9d919ae003f79d522' id='5ba523d9d919ae003f79d522'>
<a href='#5ba523d9d919ae003f79d522'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1537549273000' class='quanto-date posted-at response-posted-at' href='#5ba523d9d919ae003f79d522'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Well, there&#39;s another question for Delaney--are there AlphaLens docstrings?</p>

<p>I tried this:</p>

<pre><code>import alphalens as al  
al?  
</code></pre>

<p>and got:</p>

<pre><code>Type:        ModuleWrapper  
String form: &lt;module &#39;alphalens&#39; from &#39;__init__.pyc&#39;&gt;  
File:        /usr/local/lib/python2.7/dist-packages/alphalens/__init__.py  
Docstring:   &lt;no docstring&gt;  
</code></pre>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5ba527f23f1a632ab149e2b6' id='5ba527f23f1a632ab149e2b6'>
<a href='#5ba527f23f1a632ab149e2b6'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57bcf8e194cdba3f02000188'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/a38b0c01bf4db11e9e022f95f69899b8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57bcf8e194cdba3f02000188'>Michael Matthews</a>
</div>
<a UTCms='1537550322000' class='quanto-date posted-at response-posted-at' href='#5ba527f23f1a632ab149e2b6'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>There aren&#39;t any doc strings at the package or module level, but there are docstrings for the individual functions, as you seem to be aware of since you pulled documentation from one of them in your post above.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5ba538aafae3eb003e778d77' id='5ba538aafae3eb003e778d77'>
<a href='#5ba538aafae3eb003e778d77'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1537554602000' class='quanto-date posted-at response-posted-at' href='#5ba538aafae3eb003e778d77'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I went to github and did a copy-paste, but maybe the docstrings are accessible directly from within a notebook?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5ba545753f1a63004449e4ec' id='5ba545753f1a63004449e4ec'>
<a href='#5ba545753f1a63004449e4ec'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57bcf8e194cdba3f02000188'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/a38b0c01bf4db11e9e022f95f69899b8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57bcf8e194cdba3f02000188'>Michael Matthews</a>
</div>
<a UTCms='1537557877000' class='quanto-date posted-at response-posted-at' href='#5ba545753f1a63004449e4ec'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Grant,</p>

<p>Yes, see the attached notebook for examples on how to navigate modules and inspect doc strings.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5ba551e061a8b5003eaa519f' id='5ba551e061a8b5003eaa519f'>
<a href='#5ba551e061a8b5003eaa519f'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1537561056000' class='quanto-date posted-at response-posted-at' href='#5ba551e061a8b5003eaa519f'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Michael -</p>

<p>Thanks - I cloned and will review at some point.</p>

<p>@ Delaney - in your Q &amp; A spreadsheet, perhaps you should add a column to capture if any docstring addition/revision might be in order?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5ba575fa3f1a63775c49e12e' id='5ba575fa3f1a63775c49e12e'>
<a href='#5ba575fa3f1a63775c49e12e'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5971e2308bc634000d022f24'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3fff8e67995978b6170deb9d9001a7b6?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5971e2308bc634000d022f24'>Joakim Arvidsson (Cream Mongoose)</a>
<span class='badge medal'></span>
</div>
<a UTCms='1537570298000' class='quanto-date posted-at response-posted-at' href='#5ba575fa3f1a63775c49e12e'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Another awesome NB - thank you! Helps a rookie python-coder like myself immensely!  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5bb96317777013004145985e' id='5bb96317777013004145985e'>
<a href='#5bb96317777013004145985e'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5971e2308bc634000d022f24'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3fff8e67995978b6170deb9d9001a7b6?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5971e2308bc634000d022f24'>Joakim Arvidsson (Cream Mongoose)</a>
<span class='badge medal'></span>
</div>
<a UTCms='1538876183000' class='quanto-date posted-at response-posted-at' href='#5bb96317777013004145985e'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi @Michael,</p>

<p>Regarding my below question, and your answer:</p>

<blockquote>
<p>Sometimes I get a positive Mean IC (and risk adjusted IC), a p-value<br>
below my cutoff, decent spread between top/bottom quantiles (seeming<br>
to spread away from each-other), BUT a negative Annual Alpha and a<br>
negatively trending &#39;Factor weighted long/short Portfolio Cumulative<br>
Returns&#39; graph... How is this possible, and what might be the cause(s)<br>
of the negative returns? Should I still keep this factor, or try to<br>
&#39;tweak&#39; it to get positive returns, or discard altogether?  </p>

<p>I am not really sure on this, but keep in mind that both the alpha<br>
calculation and the factor weighted long/short cumulative returns<br>
chart use all stocks in the computation and weight returns<br>
proportional to the factor value. Therefore, it would be possible to<br>
have a positive high minus low spread, a negative alpha, and negative<br>
factor-weighted returns if the “middle quantiles” provided a drag on<br>
the long-short portfolio. That said, the IC coefficient should take<br>
into account those mid-range factor values as well, so it is a little<br>
puzzling without seeing a specific example.</p>
</blockquote>

<p>Attached is a very simple example of what I described above. The factor, ROIC (a &#39;quality-type&#39; factor in my book) appears to (in sample at least) have decent positive mean IC, p-value below my cutoff of 0.05, top bottom quantiles spreading away from each other (sometimes at least, and on average?), but quite a negative Ann. Alpha, and pretty consistent negative return slope... Would you know what in the world is going on here?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5bba6227c8482a004d3c4d8d' id='5bba6227c8482a004d3c4d8d'>
<a href='#5bba6227c8482a004d3c4d8d'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5ae9fc7db16b9339bf0d4997'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/96d136f0830e9bd9d16be17119689cc0?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5ae9fc7db16b9339bf0d4997'>Leo c</a>
<span class='badge medal'></span>
</div>
<a UTCms='1538941479000' class='quanto-date posted-at response-posted-at' href='#5bba6227c8482a004d3c4d8d'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I think IC is just one screen. Sometimes high IC does not translate to high performance =(  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5bbac13ff44feb5e69424b43' id='5bbac13ff44feb5e69424b43'>
<a href='#5bbac13ff44feb5e69424b43'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5684267ee3ebb6d460000036'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e725c8419e4a6c63ec7d41aa3d26c79f?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5684267ee3ebb6d460000036'>Mai Yang</a>
</div>
<a UTCms='1538965823000' class='quanto-date posted-at response-posted-at' href='#5bbac13ff44feb5e69424b43'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>A bit confused by the demeaned method used in al.performance.mean_return_by_quantile.</p>

<p>My understanding is the spread between two quantiles&#39; forward return should be the same no matter using demeaned or not, but confused by below testing:</p>

<p>I got a factor_data, for 5D forward return, if demeaned=False, quantile 1 has lower return than quantile 2; if set demeaned=True, quantile1 has higher return.</p>

<p>Any idea?</p>

<p>Thanks!</p>

<p>mean_return_by_q, std_err_by_q = al.performance.mean_return_by_quantile(factor_data,demeaned=False)<br>
mean_return_by_q  </p>

<p>factor_quantile 1D  5D  10D<br>
1   0.000513    0.002653    0.005372<br>
2   0.000484    0.002780    0.005221</p>

<p>mean_return_by_q, std_err_by_q = al.performance.mean_return_by_quantile(factor_data,demeaned=True)<br>
mean_return_by_q  </p>

<p>factor_quantile 1D  5D  10D<br>
1   0.000029    0.00009 0.000352<br>
2   -0.000042   -0.00013    -0.000513  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5bbd7b4ce0fa1c02794e578a' id='5bbd7b4ce0fa1c02794e578a'>
<a href='#5bbd7b4ce0fa1c02794e578a'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57bcf8e194cdba3f02000188'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/a38b0c01bf4db11e9e022f95f69899b8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57bcf8e194cdba3f02000188'>Michael Matthews</a>
</div>
<a UTCms='1539144524000' class='quanto-date posted-at response-posted-at' href='#5bbd7b4ce0fa1c02794e578a'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Joakim,</p>

<p>It took me a little bit of thinking, but I believe I have figured out what is causing your issue. I have attached a notebook to aid in the explanation.</p>

<p>Your factor values had extreme outliers. This is not a problem for the mean return spread. However, for any calculation that uses factor-weighted returns, it becomes an issue. (The two main areas in the tearsheet that come to mind are the alpha calculation and the cumulative factor-weighted returns chart). On more than half of the days, one asset had a 20+% weight! It even got as high as 45%.</p>

<p>You could probably solve this in a number of ways (factor winsorizing, factor ranking, etc.). It is really up to you.</p>

<p>See the notebook for some of the code I used to figure out the problem. Note, to simplify the problem, I only focused on the 1-period return values, but the same analysis could be done for the other return periods. </p>

<p>Also, Leo is correct, I believe there are possible situations where a positive IC may not lead to positive performance, in part because it is only measuring the correlation in ranks and doesn&#39;t take into account the magnitude of the top-bottom spread. In other words, you might do a good job predicting the ranks overall, but you do better predicting the ranks when the spread is narrow and a poor job predicting the ranks when the spread is wide. However, I don&#39;t think this is the case here.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5bbd9a4dcdf1383bf4ff9191' id='5bbd9a4dcdf1383bf4ff9191'>
<a href='#5bbd9a4dcdf1383bf4ff9191'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5971e2308bc634000d022f24'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3fff8e67995978b6170deb9d9001a7b6?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5971e2308bc634000d022f24'>Joakim Arvidsson (Cream Mongoose)</a>
<span class='badge medal'></span>
</div>
<a UTCms='1539152461000' class='quanto-date posted-at response-posted-at' href='#5bbd9a4dcdf1383bf4ff9191'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Michael,</p>

<p>Such an awesome answer and NB - Thank you!! </p>

<p>I now got this ROIC factor to indeed &#39;work&#39; (during this &#39;in-sample&#39; period at least) after removing the worst outliers (filtering by .percentile_between(1,99)) and &#39;winsorizing&#39; the rest of the tails. </p>

<p>Regarding &#39;winsorizing&#39;, does results.MyFactor.<strong>clip(-30,30)</strong> do the same thing on a pandas series, as winsorize (from scipy.stats.mstats) does on an array? (notice how I&#39;m pretending to know the difference between a series and an array).</p>

<p>Also, is it at all possible to increase the number of &#39;bins&#39; in the histogram graphs? I&#39;m just barely able to &#39;see&#39; the outliers on the graph, even after increasing the figsize (matplotlib.pyplot is another one of my many weaknesses - I&#39;m just full of them!). It would be great to be able to &#39;visualize&#39; the outliers better on the distribution plot I think.</p>

<pre><code>plt.figure(figsize=(18,12))  
sns.distplot(results.MyFactorZ, kde=False)  
stats.describe(results.MyFactorZ)  
</code></pre>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5bbe7cd96f25de00416f066f' id='5bbe7cd96f25de00416f066f'>
<a href='#5bbe7cd96f25de00416f066f'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57bcf8e194cdba3f02000188'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/a38b0c01bf4db11e9e022f95f69899b8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57bcf8e194cdba3f02000188'>Michael Matthews</a>
</div>
<a UTCms='1539210457000' class='quanto-date posted-at response-posted-at' href='#5bbe7cd96f25de00416f066f'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hey Joakim, </p>

<p>I have attached a notebook that should give you some options on how to visualize the distribution. Note, I did not realize that pipeline factors have a winsorize method. In this new notebook, I used this method instead of the pandas clip method. Regarding winsorize from scipy.stats.mstats vs. pandas clip, the main difference is the inputs they take. In the mstats version, it looks like you input a lower and upper percentile (i.e. in the range of 0 to 1) at which you want to winsorize the data. In the pandas clip method, you input &quot;values&quot; for the limits. Let me know if this is not clear. (Note, the pipeline factor.winsorize method is similar to mstats in that it also takes percentile inputs).  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5bbe90c78d0479003f217f97' id='5bbe90c78d0479003f217f97'>
<a href='#5bbe90c78d0479003f217f97'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5971e2308bc634000d022f24'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3fff8e67995978b6170deb9d9001a7b6?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5971e2308bc634000d022f24'>Joakim Arvidsson (Cream Mongoose)</a>
<span class='badge medal'></span>
</div>
<a UTCms='1539215559000' class='quanto-date posted-at response-posted-at' href='#5bbe90c78d0479003f217f97'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>So awesome Michael, thank you!!!</p>

<p>Thank you also for including the Q-Q plot code and description! Is the red line on the first graph the probability of a normal distribution? I.e. what you&#39;re referring to below:</p>

<blockquote>
<p>The theoretical distribution in the plot below is the normal<br>
distribution.</p>
</blockquote>

<p>Honestly I don&#39;t quite understand these Q-Q probability plots. When searching for &#39;alpha&#39; I thought one would <em>want</em> to see these S shaped curves, as the &#39;alpha&#39; can be found at the tails (and the further away from the normal distribution, the higher the alpha)? The more extreme S-shape, the better I thought?</p>

<p>Just looking at either the earlier histogram distribution plot, or the Q-Q probability plot, or both, is there a way to: </p>

<ol>
<li>Associate the extreme outliers with negative returns (or non-alpha?)?<br></li>
<li>Make a reasonable judgement call as to &#39;where&#39; one might want to either a) exclude/filter-out the extreme outliers, b) reduce the impact of the outliers (winsorizing), or c) both? Your earlier decision to winsorize at -30 and 30 appear to be a good call, but how did you come to this conclusion? </li>
</ol>

<p>In short, how does one determine <em>where</em> the &#39;bad&#39; outliers are, so one can make a reasonable judgement where to exclude and/or winsorize the tails, without leaving too much alpha on the table?</p>

<p><img src="https://image-proxy.quantopian.com/d217d6f77bc7f2ee33ed037745940b51f969d596/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f71696e676b61696b6f6e672f626c6f672f6d61737465722f323031375f31325f6d616368696e655f6c6561726e696e675f66756e6e795f70696374757265732f666967757265732f6669677572655f362e6a7067" />  </p>

<p>Again, thank you for all your help! I find all of it extremely helpful!  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5bbf537f8d047968fa218144' id='5bbf537f8d047968fa218144'>
<a href='#5bbf537f8d047968fa218144'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57bcf8e194cdba3f02000188'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/a38b0c01bf4db11e9e022f95f69899b8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57bcf8e194cdba3f02000188'>Michael Matthews</a>
</div>
<a UTCms='1539265407000' class='quanto-date posted-at response-posted-at' href='#5bbf537f8d047968fa218144'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>The red line in the q-q plot is just a regression line. (Note: sometimes a 45 degree line will be used instead if we are concerned about the differences in location and scale of the distribution). If the distribution on the y-axis matches the distribution on the x-axis, the points will lie on a straight line. So, since we are comparing to the normal distribution in our example, if the points lie on a straight line, we can infer that the distribution is normal. </p>

<p>In the attached notebook, I give some examples of what different types of distributions look like on the q-q plot. Basically, if the points are more dispersed/spread out than the normal distribution on a certain interval of the graph, the slope of the points will be steeper than the regression line (and vice versa). Here is a <a href="https://www.youtube.com/watch?v=IgIN9-4-kSg" rel="nofollow">link to a youtube video</a> that explains how to interpret these plots using an analogy of filling up a vase with water.</p>

<p>When you talk about the desirable &quot;S-Curve&quot; shape, I believe you are referring to the IC Q-Q plots in alphalens. I have seen some of the videos where Quantopian says this curve is desirable. I believe the theory here is that if your information coefficients have a distribution with an s-shape, similar to the Leptokurtic example in my notebook, it means that more extreme values of the IC occur with a higher frequency than would be assumed by a normal distribution. This is good since higher IC values mean that our factor is more predictive. However, I believe we would prefer to have a longer right tail than left tail, so maybe we really only prefer a &quot;half S&quot;. This is just my interpretation. Someone, please let me know if I am off base here.</p>

<p>In response to your question 1, if you are trying to analyze the information content of extreme outliers, first and foremost, think about why these outliers exist. Is there an economic rationale for why an extreme value might be informative and thus predictive of future returns out of sample? If there isn&#39;t a great reason for this, then maybe it just make sense to use factor ranks or larger quantile buckets. To test it, you can always split your alphalens quantiles into more granular buckets (i.e. maybe use 10 quantiles instead of 5). Or instead of using quantiles, use the bins argument when creating your <code>factor_data</code> dataframe. That way you can specify cutoffs, so you can create bins that only contain the very extreme values. </p>

<p>In response to question 2, I didn&#39;t put much thought into my cutoff values for winzorizing. I just picked some values for illustration purposes (note, the factor ranking worked better than winsorizing in my example). But to be honest, I think this is something where you just have to use your judgement. Use a similar thought process I described in the prior paragraph, and also look at the distribution of values in your in-sample data to see if maybe there are any &quot;natural&quot; dividing points.</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5bbf9dfe1695b300465b00fb' id='5bbf9dfe1695b300465b00fb'>
<a href='#5bbf9dfe1695b300465b00fb'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57bcf8e194cdba3f02000188'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/a38b0c01bf4db11e9e022f95f69899b8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57bcf8e194cdba3f02000188'>Michael Matthews</a>
</div>
<a UTCms='1539284478000' class='quanto-date posted-at response-posted-at' href='#5bbf9dfe1695b300465b00fb'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Mai Yang,</p>

<p>I&#39;m looking into your question, but I was curious as to if you could provide some more detail. When creating <code>factor_data</code>, are you using any grouping settings (e.g. calculating quantiles by group). Also, if you are able, please provide a notebook example. It would be easier to isolate the problem that way.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5bc003757f0051004224c016' id='5bc003757f0051004224c016'>
<a href='#5bc003757f0051004224c016'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5971e2308bc634000d022f24'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3fff8e67995978b6170deb9d9001a7b6?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5971e2308bc634000d022f24'>Joakim Arvidsson (Cream Mongoose)</a>
<span class='badge medal'></span>
</div>
<a UTCms='1539310453000' class='quanto-date posted-at response-posted-at' href='#5bc003757f0051004224c016'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Sooooooo good, thank you Michael!!</p>

<p>I can&#39;t claim to really understand it all yet, but I do find these NBs incredibly helpful (both the code but especially your commentary and the plots) in trying to get my head around these statistics and probability concepts. So again, a big thank you!!</p>

<p>@Delaney,</p>

<p>Regarding Michael&#39;s comment below (from above), it would be great to hear your (or @Max&#39;s or any other data science guru&#39;s) thoughts on this. Michael&#39;s comment does make intuitive sense to me (as we&#39;re mostly interested in positive ICs(?)), but really I wouldn&#39;t have a clue...</p>

<blockquote>
<p>However, I believe we would prefer to have a longer right tail than<br>
left tail, so maybe we really only prefer a &quot;half S&quot;. This is just my<br>
interpretation. Someone, please let me know if I am off base here.  </p>
</blockquote>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5bc1ff4af6b319004358f099' id='5bc1ff4af6b319004358f099'>
<a href='#5bc1ff4af6b319004358f099'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5684267ee3ebb6d460000036'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e725c8419e4a6c63ec7d41aa3d26c79f?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5684267ee3ebb6d460000036'>Mai Yang</a>
</div>
<a UTCms='1539440458000' class='quanto-date posted-at response-posted-at' href='#5bc1ff4af6b319004358f099'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Michael,</p>

<p>Attached is my notebook.  Thanks for picking it up.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5bc2ff437f7eef003f291935' id='5bc2ff437f7eef003f291935'>
<a href='#5bc2ff437f7eef003f291935'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5b32da9a3ef854003ea5ee91'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/30c0b67219231de686d5692739edad32?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5b32da9a3ef854003ea5ee91'>David Daverio</a>
</div>
<a UTCms='1539505987000' class='quanto-date posted-at response-posted-at' href='#5bc2ff437f7eef003f291935'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>A bit technical, but might be usefull:</p>

<p>In alphalens when one compute the returns using &quot;factor_returns&quot; the weight are computed by &quot;factor_weights&quot;. This method compute the weight as follow:</p>

<p>Computes asset weights by factor values and dividing by the sum of their<br>
absolute value (achieving gross leverage of 1). Positive factor values will<br>
results in positive weights and negative values in negative weights.<br>
&quot;
or using equal weight (if the arg is set to True)</p>

<p>Then in a real algorithm the weight would be computed using the optimise method, but this method have an &quot;obscure&quot; way of computing it (i say obscure as one cannot see the source code :-(  and its a much more complex way than the method in alphalens).</p>

<p>But obviously those 2 methods do not return the same weight  (one can compute the weight and compare.... not the same at all :-) ).</p>

<p>My current solution is to call manually &quot;optimise&quot; methods for the computation of the weight. An interesting fact is that I see a significant different in most of the metrics outputed by alphalens when I change the method of computing the weight (especially when I set some constrain (ok &quot;some&quot; might not be very exact, more accuratly &quot;lot&quot;))  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5bc3870a1932580046d1ffa7' id='5bc3870a1932580046d1ffa7'>
<a href='#5bc3870a1932580046d1ffa7'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57bcf8e194cdba3f02000188'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/a38b0c01bf4db11e9e022f95f69899b8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57bcf8e194cdba3f02000188'>Michael Matthews</a>
</div>
<a UTCms='1539540746000' class='quanto-date posted-at response-posted-at' href='#5bc3870a1932580046d1ffa7'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Mai Yang,</p>

<p>I believe I figured out the cause of your issue. As you suggested, the issue was that the mean return &quot;spread&quot; should be the same regardless of whether you are demeaning or not demeaning quantile returns by the universe mean:</p>

<p>Without demeaning, the spread should be: \(r_{top} - r_{bottom}\) .<br>
With demeaning, the spread should be \(  (r_{top} - r_{universe}) - (r_{bottom} - r_{universe}) =&gt;  r_{top} - r_{bottom}\). So, mathematically, they simplify to be the same expression.</p>

<p>There is actually a minor bug in the <code>al.performance.mean_return_by_quantile</code> version that is used on the Quantopian platform. See the following issue on GitHub for details of the bug: <a href="https://github.com/quantopian/alphalens/issues/309" rel="nofollow">https://github.com/quantopian/alphalens/issues/309</a>. Once Quantopian updates alphalens on the platform, this should be resolved. </p>

<p>In the attached notebook, I pasted in the updated <code>mean_return_by_quantile</code> function from GitHub. You should see from the output that the issue is resolved with this function.</p>

<p>Let me know if you have any questions or if I missed anything.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5bc389e51932580040d20005' id='5bc389e51932580040d20005'>
<a href='#5bc389e51932580040d20005'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57bcf8e194cdba3f02000188'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/a38b0c01bf4db11e9e022f95f69899b8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57bcf8e194cdba3f02000188'>Michael Matthews</a>
</div>
<a UTCms='1539541477000' class='quanto-date posted-at response-posted-at' href='#5bc389e51932580040d20005'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi David,</p>

<p>In response to your above post, there were a few things I wanted to clear up so nobody gets confused. The <code>factor_weights</code> method only uses the median when shifting the factor values when the <code>equal_weight</code> option is set to <code>True</code>. I believe this is so that the negative weights will be equal in magnitude to the positive weights. The only way to do this is to make sure there are an equal amount of negative and positive weights; hence, the median must be used instead of the mean. </p>

<p>The <code>al.performance.mean_return_by_quantile</code> does not make use of the <code>factor_weights</code> function. It computes a simple arithmetic mean with equal weights in each quantile. If demeaned is true, it subtracts the mean of the asset universe.</p>

<p>As I write this, I just refreshed the browser where I was referencing your post, and it seems that your post was taken down, so forgive me if I&#39;m just repeating what you already know.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5bc41cb7ddd7140048928a9a' id='5bc41cb7ddd7140048928a9a'>
<a href='#5bc41cb7ddd7140048928a9a'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5971e2308bc634000d022f24'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3fff8e67995978b6170deb9d9001a7b6?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5971e2308bc634000d022f24'>Joakim Arvidsson (Cream Mongoose)</a>
<span class='badge medal'></span>
</div>
<a UTCms='1539579063000' class='quanto-date posted-at response-posted-at' href='#5bc41cb7ddd7140048928a9a'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi @Michael, @Dan, @Delaney, @Anyone else,</p>

<p>In the attached NB, I&#39;m trying to apply (or exclude really) specific sectors for two different factors (value and quality), based on the idea that some factors may only have predictive power on stocks in certain sectors.</p>

<p>I then try to normalize and combine these two factors, with scores only on stocks in sectors that are applicable to each individual factor, hoping that the combined_factor will be stronger. Not having much luck though. What am I doing wrong? </p>

<p>I&#39;m asking a few questions in the NB too, but <strong>the main thing I&#39;m trying to achieve is to get a &#39;combined_factor&#39; score for stocks that have a valid &#39;value&#39; or &#39;quality&#39; score, and to only score stocks for the individual factor if they are in the specified (factor specific) universe.</strong> </p>

<p>Take sector 103 (Financial Services) for example. In this &#39;example model&#39; I&#39;m claiming that only the &#39;value&#39; factor is predictive on &#39;Financial Services&#39; stocks, so the &#39;combined_factor&#39; should only include the score from the &#39;value&#39; factor. Does that make sense, and is this possible at all? What I&#39;m doing is obviously not working... :(</p>

<p>I&#39;m probably making a ton of mistakes here so I apologize in advance. Also, not really sure what&#39;s going on with some of the graphs. The high top/bottom quantile spread (for the value factor) and high mean IC for both I&#39;m assuming are due to massive overfitting...?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5bc42e8ba23faa00445e68ea' id='5bc42e8ba23faa00445e68ea'>
<a href='#5bc42e8ba23faa00445e68ea'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56ed38379b1e7efbfb0006f8'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/7fe429093818ef2b5c8f29dc274a188b?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56ed38379b1e7efbfb0006f8'>Karl Mun</a>
</div>
<a UTCms='1539583627000' class='quanto-date posted-at response-posted-at' href='#5bc42e8ba23faa00445e68ea'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Joakim,</p>

<p>As we discussed and shared our experiences, there is OOS evidence in live algorithms to improve performance by excluding/modifying sector weights, say constraining from 0~100% the tricks is how to compute the weights on the fly.. there may be some bright ideas from the community :)  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5bc43405774fd900464a1e6c' id='5bc43405774fd900464a1e6c'>
<a href='#5bc43405774fd900464a1e6c'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5971e2308bc634000d022f24'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3fff8e67995978b6170deb9d9001a7b6?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5971e2308bc634000d022f24'>Joakim Arvidsson (Cream Mongoose)</a>
<span class='badge medal'></span>
</div>
<a UTCms='1539585029000' class='quanto-date posted-at response-posted-at' href='#5bc43405774fd900464a1e6c'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Karl,</p>

<p>I&#39;m not even trying to do anything that fancy. All I&#39;m trying to do here is to limit the factor to only score stocks in sectors where I think each individual factor has predictive power, then combine the factors with equal weight, hoping that the combined factor, in aggregate, has higher predictive power on all stocks in all sectors. Not sure I&#39;m making sense here, but hope so... :)  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5bc44345ddd7140051928b44' id='5bc44345ddd7140051928b44'>
<a href='#5bc44345ddd7140051928b44'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5b32da9a3ef854003ea5ee91'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/30c0b67219231de686d5692739edad32?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5b32da9a3ef854003ea5ee91'>David Daverio</a>
</div>
<a UTCms='1539588933000' class='quanto-date posted-at response-posted-at' href='#5bc44345ddd7140051928b44'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Joakim</p>

<p>You are computing the zscore of a zscore. Remove the . zscore from the combined factore and then the sum will be the sum :-)<br>
combined_factor = value + quality</p>

<p>For the nan, you can use np.nan_to_num (it replace a nan by a 0).  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5bc455ce774fd900414a1f46' id='5bc455ce774fd900414a1f46'>
<a href='#5bc455ce774fd900414a1f46'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5971e2308bc634000d022f24'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3fff8e67995978b6170deb9d9001a7b6?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5971e2308bc634000d022f24'>Joakim Arvidsson (Cream Mongoose)</a>
<span class='badge medal'></span>
</div>
<a UTCms='1539593678000' class='quanto-date posted-at response-posted-at' href='#5bc455ce774fd900414a1f46'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Good catch @David, thank you!  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5bc49862a23faa00445e6bc3' id='5bc49862a23faa00445e6bc3'>
<a href='#5bc49862a23faa00445e6bc3'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57bcf8e194cdba3f02000188'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/a38b0c01bf4db11e9e022f95f69899b8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57bcf8e194cdba3f02000188'>Michael Matthews</a>
</div>
<a UTCms='1539610722000' class='quanto-date posted-at response-posted-at' href='#5bc49862a23faa00445e6bc3'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Joakim,</p>

<p>I didn&#39;t have a chance to look through your methodology and figure out why it wasn&#39;t working, but I have attached an alternative solution using pandas to combine the factors after getting the individual factors from Pipeline. </p>

<p>Basically, I created a sector mapping DataFrame that tells which sectors use which factors. Then I grouped the Pipeline results by sector. I then multiplied each group by the appropriate row in the sector mapping DataFrame. The combo factor is the average of the two columns. Let me know if this doesn&#39;t do what you are looking for or if you have any questions. If I get a chance, I&#39;ll take a look at your implementation and try to figure out what was going on.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5bc4bbb266fe60003eae2a1c' id='5bc4bbb266fe60003eae2a1c'>
<a href='#5bc4bbb266fe60003eae2a1c'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57bcf8e194cdba3f02000188'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/a38b0c01bf4db11e9e022f95f69899b8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57bcf8e194cdba3f02000188'>Michael Matthews</a>
</div>
<a UTCms='1539619762000' class='quanto-date posted-at response-posted-at' href='#5bc4bbb266fe60003eae2a1c'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Joakim,</p>

<p>I just realized that inspecting the new results would be a good use case for qgrid. See the attached updated notebook  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5bc610477f87e120d4ee624c' id='5bc610477f87e120d4ee624c'>
<a href='#5bc610477f87e120d4ee624c'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/591bc8b2ecca0e6e262ff735'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/6a5b68737ea2c70b879b80a9d49e2ebf?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/591bc8b2ecca0e6e262ff735'>Bjarke Riis Larsen</a>
<span class='badge medal'></span>
</div>
<a UTCms='1539706951000' class='quanto-date posted-at response-posted-at' href='#5bc610477f87e120d4ee624c'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi there,</p>

<p>What a great and informative thread. I especially enjoyed the inquisitive nature of Joakim Arvidsson and Michael Matthews&#39; answers and notebooks.  </p>

<p>I would like to share my two centavos&#39; worth of thoughts on outliers in the data. I think it&#39;s best to go on a case by case basis as outliers in some cases will be nonsensical whereas in other cases they&#39;ll contain valuable information. I&#39;d like to share four made up but hopefully illustrative examples of what I mean.</p>

<p>Ex.1 Price/earning ratio: Imagine a company that has a price earnings ratio of 10,000 with a market cap of e.g. 10 million. This outlier doesn&#39;t contain much relevant information as the earnings were only 1,000 $ and therefore very close to zero. Removing that outlier like people traditionally do in case of negative earnings seems to make a lot of sense, since the information value of that outlier is ~null.  Even if you do feel it contains some value it doesn&#39;t merit its outsize influence on e.g. the mean in a distribution where let&#39;s say +99% of the values are between 3 and 50 (or negative nonsensical). </p>

<p>Ex.2 Return on invested capital: Let&#39;s say a company has invested 10,000 dollars and turned that into a billion dollars (Mark Zuckerberg comes to mind without knowing exactly how much he invested originally). Again the small number will have an out-sized effect on the mean of the distribution and although it does contain some information on the impressiveness of having turned 10,000 dollars into a billion it  probably doesn&#39;t make much sense when you compare it to for instance industrial companies investing in machinery or factories.</p>

<p>Ex.3 Daily returns of stocks: If you take a 1000 stocks&#39; daily returns on  a specific day where 999 of the stocks are between -10% and +10% (and the vast majority just around 0 returns) but one stock is up 200% you may not want to exclude or winsorize that return as it is very likely to contain some relevant information, e.g. a biotech company getting a drug FDA-approved or a cannabis company being granted rights to sell its products in a big state like California. You may choose to exclude it anyway, but you&#39;ll have to be aware that you may be throwing away very valuable information.</p>

<p>Ex.4 Market cap: Say in an alternative universe a big stock&#39;s market cap makes up 20% of the combined market cap of the 500 biggest companies, let&#39;s call that company FANG Skynet (or maybe Samsung on the South Korean market?). The second biggest company has only 1% of the combined market capitalization so FANG Skynet&#39;s market cap is an outlier in the data. This outlier does contain a lot of information however, whether that information is about increased pricing power in the markets it operates or about impending apocalypse it may be relevant, so excluding it or minimizing doesn&#39;t seem be a good solution.</p>

<p>The reason you may want to exclude the information and make your factor resemble a normal distribution is that the normal distribution has some nice qualities for instance if you want to use the weighting of the factor as an input in the position sizing of the bets.<br>
To summarize, you likely need to apply case/factor/domain specific knowledge to determine whether you let outliers stay in  or out (or diminish their influence) making some sensible choices depending on the specific problem at hand and whether the information the outlier provides is important for your specific purpose.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5bc6a79526e4ab6b58a74d0a' id='5bc6a79526e4ab6b58a74d0a'>
<a href='#5bc6a79526e4ab6b58a74d0a'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57bcf8e194cdba3f02000188'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/a38b0c01bf4db11e9e022f95f69899b8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57bcf8e194cdba3f02000188'>Michael Matthews</a>
</div>
<a UTCms='1539745685000' class='quanto-date posted-at response-posted-at' href='#5bc6a79526e4ab6b58a74d0a'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Bjarke,</p>

<p>Great post. It does a good job illustrating the thought process that I think a researcher should use when looking at outliers. It also shows the value of having a fundamental understanding of what you are trying to model in addition to solid quantitative skills.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5bc7cc3d26e4ab004bd6bfa7' id='5bc7cc3d26e4ab004bd6bfa7'>
<a href='#5bc7cc3d26e4ab004bd6bfa7'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5b32da9a3ef854003ea5ee91'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/30c0b67219231de686d5692739edad32?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5b32da9a3ef854003ea5ee91'>David Daverio</a>
</div>
<a UTCms='1539820605000' class='quanto-date posted-at response-posted-at' href='#5bc7cc3d26e4ab004bd6bfa7'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi everyone,</p>

<p>So I have done quite lot of work in factor analysis lately. My first step was to create a dataframe which is close to the ouput of &quot;get_clean_factor_and_forward_returns&quot; with the difference that it take the output of a pipeline as input (instead of a factor dataframe) and can handle multiple factors. The list of factor is pass using a list containing the pipeline column names one want to put. It return a dataframe very similare that the Alphalens usual one, but the column factor and factor_quantiles have different names for each factor. Then a small utility all to get back the usual data used by alphalens.</p>

<p>Might be useful, lol dont know... Sorry I will not share the data analysis tools which take this data as input (I might create a fork of Alphalens to include those tools in a far far future)</p>

<p>Happy hacking :-)  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5bc7ea08439bfa0045db1285' id='5bc7ea08439bfa0045db1285'>
<a href='#5bc7ea08439bfa0045db1285'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57bcf8e194cdba3f02000188'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/a38b0c01bf4db11e9e022f95f69899b8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57bcf8e194cdba3f02000188'>Michael Matthews</a>
</div>
<a UTCms='1539828232000' class='quanto-date posted-at response-posted-at' href='#5bc7ea08439bfa0045db1285'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hey David,</p>

<p>Take a look at these two threads on Github. It may be of some interest to you, and it would be great if you had ideas to contribute!</p>

<ul>
<li><a href="https://github.com/quantopian/alphalens/issues/219" rel="nofollow">Interaction and Correlation Features</a><br></li>
<li><a href="https://github.com/quantopian/alphalens/issues/276" rel="nofollow">API: breaking apart factor_data into fwd returns and factor value/quantile</a> (This thread was opened to discuss how the API might handle work with multiple factors).</li>
</ul>

<p>There is a development branch called &quot;factors_interactions&quot; in the Alphalens GitHub repository. The idea for this branch was to add functionality to Alphalens to aid in the analysis of how multiple factors combine and interact with each other (which would be a nice complement to the current functionality which helps analyze the predictive ability of a single alpha factor). I haven&#39;t pushed any commits recently. However, I have been doing some  work in the research environment to brainstorm ideas on what I would like to add. I will probably share more on this in the near future, but I showed a little bit of the work in <a href="https://www.quantopian.com/posts/factor-combination-theory-tools-and-examples" rel="nofollow">this post</a>. </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5bc7f4c089340c003c2a4cb4' id='5bc7f4c089340c003c2a4cb4'>
<a href='#5bc7f4c089340c003c2a4cb4'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5b32da9a3ef854003ea5ee91'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/30c0b67219231de686d5692739edad32?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5b32da9a3ef854003ea5ee91'>David Daverio</a>
</div>
<a UTCms='1539830976000' class='quanto-date posted-at response-posted-at' href='#5bc7f4c089340c003c2a4cb4'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I had seen the branch :-). Look not so active lately :-)</p>

<p>Currently I am more focused on ranking the factors. My goal is to create a large factor library (now I am around 250) then rank them for each groups (I have grouped thing by sector, but also by other metrics). </p>

<p>About your post,  on factor combination:<br>
I really like the figue &quot;Evaluate Correlation between Factor Values&quot;, an idea to make it even better:<br>
Instead of plotting the point with the same color, one could plot them with a color map to the returns... or a plot in 3d.  All the thing is to try to figure out if 2 factor worst to be combined.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5d3a11fc9b88c8003ee6df21' id='5d3a11fc9b88c8003ee6df21'>
<a href='#5d3a11fc9b88c8003ee6df21'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5bbc687e15eec10043e837cb'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/1ca50a75082cabe0df3dcbc1144ce0e3?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5bbc687e15eec10043e837cb'>Bruce Vanstone</a>
</div>
<a UTCms='1564086780000' class='quanto-date posted-at response-posted-at' href='#5d3a11fc9b88c8003ee6df21'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi,<br>
I&#39;m just working through create_full_tear_sheet output, and am confused about the very first output it gives, labelled &quot;Quantiles Statistics&quot;... what are these the statistics of?  I originally assumed they were the returns for the factor_quantile over the forward evaluation period, but they are not.  The values for the means in this table are not the same as the first graph, labelled &quot;Mean Period Wise Returns by Factor Quantile&quot;.<br>
I have had a good search through the docs and videos, but can&#39;t seem to see any discussion of what the very first table actually represents... any ideas?<br>
Cheers,<br>
Bruce  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5d41c108a1aab45e59d97176' id='5d41c108a1aab45e59d97176'>
<a href='#5d41c108a1aab45e59d97176'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57bcf8e194cdba3f02000188'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/a38b0c01bf4db11e9e022f95f69899b8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57bcf8e194cdba3f02000188'>Michael Matthews</a>
</div>
<a UTCms='1564590344000' class='quanto-date posted-at response-posted-at' href='#5d41c108a1aab45e59d97176'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Bruce,</p>

<p>The Quantiles statistics are describing the actual factor values themselves. For example, if you were using a price-to-earnings factor, the mean in that table would be the average of the price to earnings ratios of the stocks grouped by quantile.</p>

<p>Mike  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5d8837eb6eb4350043faac12' id='5d8837eb6eb4350043faac12'>
<a href='#5d8837eb6eb4350043faac12'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/55f9ea41c51f6fe282000166'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/09d3ca2aba7e225443d1f3eab69d67ae?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/55f9ea41c51f6fe282000166'>Maxim Girbu</a>
</div>
<a UTCms='1569208299000' class='quanto-date posted-at response-posted-at' href='#5d8837eb6eb4350043faac12'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Is there  a way to use Alphalens with factors such as economic indicators which are not assigned to each individual stock?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5e4a27a33d646b003f03393f' id='5e4a27a33d646b003f03393f'>
<a href='#5e4a27a33d646b003f03393f'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5dde3bfceebfd87fde1b466c'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/a87994efe7f64d216ae976398f450ee3?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5dde3bfceebfd87fde1b466c'>rainer jaeger</a>
</div>
<a UTCms='1581918115000' class='quanto-date posted-at response-posted-at' href='#5e4a27a33d646b003f03393f'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi,</p>

<p>I was wondering what exactly &quot;Ann. alpha&quot; is? </p>

<p>assuming:</p>

<p>Market Return = 12%<br>
Strategy Return = 14.4%<br>
Beta = 1.2<br>
=&gt; Alpha = 0</p>

<p>what is the &#39;Market Return&quot; in Alphalens? Is it the  self-defined universe or a specific universe (like SnP500)?</p>

<p>example:</p>

<p>start: 1/1/2018<br>
end: 1/1/2020<br>
Market Return = 100%<br>
Strategy Return = 50%<br>
Beta = 0</p>

<p><strong>=&gt; &quot;Ann. alpha&quot;= 22.47% ?</strong></p>

<p>(1.2247^2=1.5 i.e. 50%)</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5e4c2170dadac4003c112c67' id='5e4c2170dadac4003c112c67'>
<a href='#5e4c2170dadac4003c112c67'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57bcf8e194cdba3f02000188'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/a38b0c01bf4db11e9e022f95f69899b8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57bcf8e194cdba3f02000188'>Michael Matthews</a>
</div>
<a UTCms='1582047600000' class='quanto-date posted-at response-posted-at' href='#5e4c2170dadac4003c112c67'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Rainer,</p>

<p>As you may already have guessed &quot;Ann. alpha&quot; stands for annualized alpha. It is going to be calculated as the intercept term of a regression where the dependent variable is the return of a portfolio weighted by your factor values provided in the <code>factor_data</code> DataFrame that you pass into the alphalens tearsheet functions. The independent variable is the &quot;Market Return&quot;.  In this case, Alphalens calculates the &quot;Market Return&quot; as the mean return (grouped by time interval) of all the securities in your <code>factor_data</code>DataFrame. The intercept from this regression is then annualized to get your annualized alpha.</p>

<p>As a reference, here is a link to the function (<code>factor_alpha_beta</code>) in the alphalens code that is responsible for computing alpha.<br>
<a href="https://github.com/quantopian/alphalens/blob/master/alphalens/performance.py#L257" rel="nofollow">https://github.com/quantopian/alphalens/blob/master/alphalens/performance.py#L257</a>  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5e4ce0ca9d4ff4004b4ea435' id='5e4ce0ca9d4ff4004b4ea435'>
<a href='#5e4ce0ca9d4ff4004b4ea435'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5dde3bfceebfd87fde1b466c'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/a87994efe7f64d216ae976398f450ee3?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5dde3bfceebfd87fde1b466c'>rainer jaeger</a>
</div>
<a UTCms='1582096586000' class='quanto-date posted-at response-posted-at' href='#5e4ce0ca9d4ff4004b4ea435'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thanks, Michael Matthews.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5e6b342d916c0d00485df616' id='5e6b342d916c0d00485df616'>
<a href='#5e6b342d916c0d00485df616'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5e3235bd1af452004809b57f'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/374a89db61da4e515eaf2a8eb131d3f2?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5e3235bd1af452004809b57f'>RY eo</a>
</div>
<a UTCms='1584084013000' class='quanto-date posted-at response-posted-at' href='#5e6b342d916c0d00485df616'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Not sure if others have already posted this link, but just to share anyway:</p>

<p><a href="https://github.com/quantopian/alphalens/blob/master/alphalens/examples/alphalens_tutorial_on_quantopian.ipynb" rel="nofollow">https://github.com/quantopian/alphalens/blob/master/alphalens/examples/alphalens_tutorial_on_quantopian.ipynb</a> </p>

<p>(Explanation on interpreting the Alphalens tearsheet and some other related advanced topic)</p>
</div>
</div>
</div>

</div>
<div class='sign-in-please'>
Please <a href='/signin?return_to=/posts/alphalens-questions-thread'>sign in</a> or
<a href='/users/sign_up?redirect_to=/posts/alphalens-questions-thread'>join Quantopian</a> to
post a reply.
</div>
</div>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId: "550580758292093",
      status: false,
      cookie: true,
      xfbml: true
    });
  };
  
  (function(d, debug){
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) {return;}
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
    ref.parentNode.insertBefore(js, ref);
  }(document, /*debug*/ false));
  
  window.twttr = (function (d,s,id) {
    var t, js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return; js=d.createElement(s); js.id=id;
    js.src="//platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs);
    return window.twttr || (t = { _e: [], ready: function(f){ t._e.push(f) } });
  }(document, "script", "twitter-wjs"));
</script>
<script>
  $(document).ready(function () {
    quanto.instances.pm = new quanto.PostManager(false)
  });
</script>

<div class='login-footer'>
<div class='container'>
<div class='login-footer-text'>
Become an expert in quant finance through Quantopian's hands-on education.
</div>
<div class='login-footer-button'>
<button class='btn btn-v2 stroke join-modal-link mixpanel-button' data-event='anon join footer click posts' data-mixpanel='click'>
Join Now
</button>
</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='error-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'>Error</span>
</div>
<div class='modal-body body-content'>
<p>Sorry, something went wrong.  Try again or contact us by <a class='feedback-link'>sending feedback</a>.</p>
</div>
<div class='modal-footer'>
<button class='btn btn-v2 blue action-button' data-dismiss='modal' href='#'>Close</button>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='confirmation-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'></span>
</div>
<div class='modal-body body-content'></div>
<div class='modal-footer'>
<div class='pull-right'>
<button class='btn btn-v2 border' data-dismiss='modal'>Cancel</button>
<button class='btn btn-v2 blue action-button' data-dismiss='modal'></button>
</div>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='message-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'></span>
</div>
<div class='modal-body body-content'></div>
<div class='modal-footer'>
<button class='btn btn-v2 blue action-button' data-dismiss='modal' id='message-modal-close'>Close</button>
</div>

</div>
</div>
</div>

<div class='always-bootstrap3-modals'>
<div class='fade modal quanto-modal-v2' id='join-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header visible-small'>
<span class='title'>
Join Quantopian.  It's Free!
</span>
<div class='modal-x-out visible-xs'></div>
</div>
<div class='modal-body'>
<div class='flex-wrap'>
<div class='join-left-pane hidden-small'>
<div class='margin_30l'>
<div class='join-hero-text'>
Join Quantopian.  It's Free!
</div>
<div class='join-benefits'>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image code'></div>
</div>
<div class='join-text'>
Use our research platform, backtester, and dozens of clean data sets.
</div>
</div>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image learn'></div>
</div>
<div class='join-text'>
Learn with our hands-on education and community forums.
</div>
</div>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image win'></div>
</div>
<div class='join-text'>
Enter to win cash prizes in our contest.
</div>
</div>
</div>
<div class='hidden saved-reminder'>
Don't worry, all your work is already saved.
</div>
</div>
</div>
<div class='join-right-pane'>
<div class='hidden-small'>
<div class='button-pane'>
<a class="button btn-v2 user-form-btn" href="/signin">Already a Quantopian member?</a>
</div>
</div>
<div class='visible-small'>
<div class='already-member'>
<a href='/signin'>Already a Quantopian member?</a>
</div>
</div>
<form class="quanto-form-v2" id="new-user-modal-form" action="/users" accept-charset="UTF-8" data-remote="true" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><div class='error-message hidden'>
<div class='message'></div>
</div>
<div class='name-group'>
<div class='form-group inline-block'>
<label for="user_firstname">First Name</label>
<input class="form-control firstname" pattern=".*" required="required" autocomplete="off" autofocus="autofocus" type="text" name="user[firstname]" id="user_firstname" />
</div>
<div class='form-group inline-block'>
<label for="user_lastname">Last Name</label>
<input class="form-control" value="" pattern=".*" required="required" autocomplete="off" type="text" name="user[lastname]" id="user_lastname" />
</div>
</div>
<div class='form-group'>
<label for="user_email">Email</label>
<input class="form-control" value="" pattern=".*" required="required" autocomplete="off" type="email" name="user[email]" id="user_email" />
</div>
<div class='form-group'>
<label for="user_password">Password</label>
<input autocomplete="off" class="form-control" pattern=".*" required="required" type="password" name="user[password]" id="user_password" />
</div>
<div class='checkbox eula'>
<input id='eula-checkbox' type='checkbox'>
<div class='quanto-checkbox'></div>
<label for='eula-checkbox' id='checkbox-label'>I accept the <a href='/policies/terms' target='_blank'>Terms Of Use</a> and <a href='/policies/privacy' target='_blank'>Privacy Policy</a>.</label>
</div>
<div class='checkbox mailchimp-box'>
<input name="user[allow_marketing_emails]" type="hidden" value="0" /><input type="checkbox" value="1" name="user[allow_marketing_emails]" id="user_allow_marketing_emails" />
<div class='quanto-checkbox'></div>
<label for='user_allow_marketing_emails'>
Send me email updates with the latest news from the Quantopian community. We send these emails about once a month.
</label>
</div>
<div class='button-row'>
<button class='btn-v2 blue full' data-redirect-to='/tutorials/getting-started' id='sign-up-button' type='Submit'>Join Quantopian</button>
</div>
</form></div>
</div>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='feedback-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title'>Contact Support</span>
</div>
<div class='modal-body'>
<form class='anon-user controls quanto-form-v2' id='feedback-form'>
<div class='feedback-inputs'>
<div class='form-group'>
<input autofocus class='form-control' id='feedback-email-box' name='email' placeholder='Email Address' type='email'>
</div>
<div class='form-group'>
<input class='form-control' id='feedback-name-box' placeholder='Name' type='name'>
</div>
<div class='form-group'>
<textarea class='form-control' id='feedback-box' name='feedback' placeholder='What may we help you with?' rows='10'></textarea>
</div>
</div>
</form>
<form class='hidden quanto-form-v2 select-resource-area'>
<div class='select-step select-type-step'>
<div class='form-group'>
<select class='form-control select-resource-dropdown' title='Select the item you need help with'>
<option value='algorithm'>Algorithm</option>
<option value='backtest'>Backtest</option>
<option value='notebook'>Notebook</option>
</select>
</div>
</div>
<div class='select-step loading-area hidden'>
<div class='loading-text'>
Loading...
</div>
</div>
<div class='select-step empty-list-area hidden'>
<div class='back-button'>Go Back</div>
<div class='empty-text'>
No <span class='empty-list-resource-text'>algorithms</span> found
</div>
</div>
<div class='select-algo-area select-step hidden'>
<div class='back-button'>Go Back</div>
<table class='select-algo-table select-item-table'>
<thead>
<tr>
<th>
Algorithm
<span class='sort-icon'></span>
</th>
<th>
Last Modified
<span class='sort-icon'></span>
</th>
</tr>
</thead>
</table>
</div>
<div class='select-backtest-area select-step hidden'>
<div class='back-button'>Go Back</div>
<table class='select-backtest-table select-item-table'>
<thead>
<tr>
<th>
Backtest
<span class='sort-icon'></span>
</th>
<th>
Started At
<span class='sort-icon'></span>
</th>
<th>
Overall Return
<span class='sort-icon'></span>
</th>
<th>
Status
<span class='sort-icon'></span>
</th>
</tr>
</thead>
</table>
</div>
<div class='select-notebook-area select-step hidden'>
<div class='back-button'>Go Back</div>
<div class='subtitle select-cell-step'>
Choose a cell to use as the preview for this notebook:
</div>
<div class='iframe-wrapper'>
<iframe class='notebook-list-iframe slow-fade' src=''></iframe>
</div>
<div class='progress-area slow-fade in'>
<div class='progress-container'>
<div class='progress-title'>
<div class='quanto-loader gray'></div>
</div>
</div>
</div>
<div class='maintenance-area'>
<div class='error-container'>
<div class='row'>
<div class='col-md-14 msg-title h1'>
Sorry, research is currently undergoing maintenance.
</div>
</div>
<div class='row'>
<div class='col-md-14 msg-subtitle'>
Please check back shortly. If the maintenance period lasts longer than expected,
you can find updates on <a href='https://status.quantopian.com/'>status.quantopian.com</a>.
</div>
</div>

</div>
</div>
<div class='error-area'>
<div class='error-container'>
<div class='row'>
<div class='col-md-14 msg-title h1'>
Sorry, something went wrong on our end.
</div>
</div>
<div class='row'>
<div class='col-md-14 msg-subtitle'>
Please try again or contact <a class='open-feedback-link'>Quantopian support</a>.
</div>
</div>

</div>
</div>

</div>
<div class='selected-item-area select-step hidden'>
<div class='selected-item-group form-group'>
<div class='selected-item-control'>
<input class='disabled form-control selected-item-box' type='text'>
<span class='secure-icon icon'></span>
<button class='btn change change-primary-item-button change-selection-button new-btn transparent' type='button'>
<span class='refresh-icon icon'></span>
</button>
</div>
<div class='selected-backtest-control'>
<input class='disabled form-control selected-backtest-box' type='text'>
<span class='secure-icon icon'></span>
<button class='btn change-backtest-button change-selection-button new-btn transparent' type='button'>
<span class='refresh-icon icon'></span>
</button>
</div>
</div>
<div class='checkbox-group form-group'>
<div class='checkbox give-permission'>
<input class='give-permission-checkbox' id='feedback-give-permission-checkbox' type='checkbox'>
<div class='quanto-checkbox'></div>
<label for='feedback-give-permission-checkbox'>
I permit Quantopian to view <span class='item-type-text'>this algorithm,
backtest or notebook and their imported datasets</span> for the purpose of providing support.
</label>
</div>
</div>
</div>
</form>

<div class='loading-step hidden'>
<div class='loading-text'>
Submitting your support ticket...
</div>
</div>
<div class='success-step invisible'>
<h2 class='title center'>
You've successfully submitted a support ticket.
</h2>
<p>
Our support team will be in touch soon.
</p>
<div class='confirmation-image'></div>
</div>
</div>
<div class='modal-footer'>
<button class='btn-v2 blue' id='send-feedback-button'>Send</button>
<div class='error-message hidden'>
Error submitting support request.
</div>
</div>

</div>
</div>
</div>

</div>
</div>
<div class='footer' id='quanto-footer-container'>
<div class='container'>
<div class='row header-row'>
<div class='col-sm-fourth span3'>
<img class='async-image logotype-image' data-src='https://qf.quantopian.com/assets/logos/logo-q-full-b23bda5ac757691b9259d396d0dfef91567165868b8c955a836649686e6d2248.svg'>
</div>
<div class='col-sm-fourth span3'></div>
<div class='col-sm-fourth span3'></div>
<div class='col-sm-fourth span3'>
<div class='feedback-email'>
Need help?
<a href="/cdn-cgi/l/email-protection#35535050515754565e754440545b415a455c545b1b565a58">Contact support.</a>
</div>
</div>
</div>
<div class='row'>
<div class='col-sm-fourth span3'>
<div class='header'>Company</div>
<div class='footer-row'>
<a href='/about'>About</a>
</div>
<div class='footer-row'>
<a href='/academia'>Academia</a>
</div>
<div class='footer-row'>
<a href='/jobs'>Careers</a>
</div>
<div class='footer-row'>
<a href='/posts'>Community</a>
</div>
<div class='footer-row'>
<a href='/events'>Events</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Learn &amp; Support</div>
<div class='footer-row'>
<a href='/faq'>FAQ</a>
</div>
<div class='footer-row'>
<a href='/tutorials/getting-started'>Getting Started</a>
</div>
<div class='footer-row'>
<a href='/docs'>Documentation</a>
</div>
<div class='footer-row'>
<a href='/tutorials'>Tutorials</a>
</div>
<div class='footer-row'>
<a href='/lectures'>Lectures</a>
</div>
<div class='footer-row'>
<a href='/opensource'>Open Source</a>
</div>
<div class='footer-row'>
<a href='https://status.quantopian.com/'>Site Status</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Notices</div>
<div class='footer-row'>
<a href='/policies/terms'>Terms of Use</a>
</div>
<div class='footer-row'>
<a href='/policies/privacy'>Privacy Policy</a>
</div>
<div class='footer-row'>
<a href='/security'>Security</a>
</div>
<div class='footer-row'>
<a href='/policies/code-of-conduct'>Code of Conduct</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Follow Us</div>
<div class='footer-row'>
<a href='https://www.twitter.com/quantopian'>Twitter</a>
</div>
<div class='footer-row'>
<a href='https://www.facebook.com/quantopian'>Facebook</a>
</div>
<div class='footer-row'>
<a href='https://www.linkedin.com/company/quantopian'>LinkedIn</a>
</div>
<div class='footer-row'>
<a href='https://www.youtube.com/channel/UC606MUq45P3zFLa4VGKbxsg'>YouTube</a>
</div>
</div>
</div>
<div class='row'>
<div class='col-xs-14 span12'>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian.
</p>
<p>
In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>

</div>
</div>
</div>
</div>
</div>
<div class='mobile-footer'>
<div class='mobile-nav-category main-links'>
<div class='mobile-nav-row-footer'>
<a href='/about'>About Quantopian</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/jobs'>Careers</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/posts'>Community</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/events'>Events</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/docs'>Documentation</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/academia'>Academia</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/lectures'>Lectures</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://status.quantopian.com/'>Status</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.facebook.com/quantopian'>Facebook</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.twitter.com/quantopian'>Twitter</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.linkedin.com/company/quantopian'>LinkedIn</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.youtube.com/channel/UC606MUq45P3zFLa4VGKbxsg'>YouTube</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/policies/terms'>Terms of Use</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/policies/privacy'>Privacy Policy</a>
</div>
</div>
<div class='mobile-nav-category'>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian.
</p>
<p>
In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>

</div>
</div>
</div>

</div>
<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script></body>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', "UA-8519877-1", {
    cookieDomain: "quantopian.com"
  });
  ga('set', 'dimension1', 'session_5f9dc7425d387f00077e48e4');
  
  ga('send', 'pageview');
</script>

<input type="hidden" name="is_mac" id="is_mac" value="false" />
<input type="hidden" name="mp" id="mp" value="75873953cd404bcc1da88a55ff51e3b4" />
<script>
  (function(e,a){if(!a.__SV){var b=window;try{var c,l,i,j=b.location,g=j.hash;c=function(a,b){return(l=a.match(RegExp(b+"=([^&]*)")))?l[1]:null};g&&c(g,"state")&&(i=JSON.parse(decodeURIComponent(c(g,"state"))),"mpeditor"===i.action&&(b.sessionStorage.setItem("_mpcehash",g),history.replaceState(i.desiredHash||"",e.title,j.pathname+j.search)))}catch(m){}var k,h;window.mixpanel=a;a._i=[];a.init=function(b,c,f){function e(b,a){var c=a.split(".");2==c.length&&(b=b[c[0]],a=c[1]);b[a]=function(){b.push([a].concat(Array.prototype.slice.call(arguments,
  0)))}}var d=a;"undefined"!==typeof f?d=a[f]=[]:f="mixpanel";d.people=d.people||[];d.toString=function(b){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);b||(a+=" (stub)");return a};d.people.toString=function(){return d.toString(1)+".people (stub)"};k="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
  for(h=0;h<k.length;h++)e(d,k[h]);a._i.push([b,c,f])};a.__SV=1.2;b=e.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";c=e.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}})(document,window.mixpanel||[]);
  mixpanel.init("75873953cd404bcc1da88a55ff51e3b4");
</script>
<script>
  mixpanel.track("view page", {"page": window.location.pathname});
</script>
</html>
