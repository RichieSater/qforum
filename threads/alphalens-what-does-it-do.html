<!DOCTYPE html>
<html>
<head>
<link href='i1.wp.com' rel='dns-prefetch'>
<link href='i2.wp.com' rel='dns-prefetch'>
<link href='i3.wp.com' rel='dns-prefetch'>
<meta content='2HgX9mcLHaPOX6sfaaAkhWtblhEB9yUNw4l6l46e1k4' name='google-site-verification'>
<link rel="shortcut icon" type="image/x-icon" href="external/favicon-q-ac1a76f2c200e9026b5b1147519bb4fab6256910588b831e2411bc6c7c1218c3.png" />
<title>
alphalens - what does it do?
</title>
<meta content='Is there a tutorial on what alphalens does under-the-hood?  I understand that it is a signal screening tool, that spits out a lot of visuals, but how does it accomplish this?  And what are the limitations?' name='description'>
<link rel="stylesheet" media="all" href="external/quanto-base-bundle-e8eb6050172aa0d24124d5c24bac90b2cccd88b5b9c7742026c0e9efab038c6e.css" />
<link rel="stylesheet" media="all" href="external/quanto-posts-bundle-aab01368d3f82d8dafc94ee9eabb82e77dc8c9fbbffa952fdcdc744dfa523cf3.css" />
<script src="external/quanto_global-057218867db29d5768131af5d6fb3476cef098e7d9e655108befb903c7ee985e.js"></script>
<script src="external/posts_bundle-3dfd82fa469c393d752e461d837aec9e4e364ae39f49198e34a6626f2180fdf7.js"></script>
<link href='external/logo-q-180x180-0f5a6a439c99203ed4aea6f656e7604c543d287be43d8b17c7591c1131f09a59.png' rel='apple-touch-icon'>
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="NR6MLlVoBwDKYmyqEO1V+MKUeE4t0ig8Vtj1M3mcI+ZJePpj957V43N/NZtfAv2M+hpbJ1cePSfU1y5Z09lBXQ==" />
<meta content='width=device-width, initial-scale=1.0' name='viewport'>
<script>
//<![CDATA[
window.quanto_data={};quanto_data.bounce_back_params={"show_modal":null,"feedback_text":null};quanto_data.namespace="public";quanto_data.talib_info={"ADOSC":["Chaikin A/D Oscillator (Volume Indicators)",["fastperiod","3"],["slowperiod","10"]],"ADX":["Average Directional Movement Index (Momentum Indicators)",["timeperiod","14"]],"ADXR":["Average Directional Movement Index Rating (Momentum Indicators)",["timeperiod","14"]],"APO":["Absolute Price Oscillator (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["matype","0"]],"AROON":["Aroon (Momentum Indicators)",["timeperiod","14"]],"AROONOSC":["Aroon Oscillator (Momentum Indicators)",["timeperiod","14"]],"ATR":["Average True Range (Volatility Indicators)",["timeperiod","14"]],"BBANDS":["Bollinger Bands (Overlap Studies)",["timeperiod","5"],["nbdevup","2"],["nbdevdn","2"],["matype","0"]],"BETA":["Beta (Statistic Functions)",["timeperiod","5"]],"CCI":["Commodity Channel Index (Momentum Indicators)",["timeperiod","14"]],"CMO":["Chande Momentum Oscillator (Momentum Indicators)",["timeperiod","14"]],"CORREL":["Pearson's Correlation Coefficient (r) (Statistic Functions)",["timeperiod","30"]],"DEMA":["Double Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"DX":["Average Directional Movement Index (Momentum Indicators)",["timeperiod","14"]],"EMA":["Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"KAMA":["Kaufman Adaptive Moving Average (Overlap Studies)",["timeperiod","30"]],"LINEARREG":["Linear Regression (Statistic Functions)",["timeperiod","14"]],"LINEARREG_ANGLE":["Linear Regression Angle (Statistic Functions)",["timeperiod","14"]],"LINEARREG_INTERCEPT":["Linear Regression Intercept (Statistic Functions)",["timeperiod","14"]],"LINEARREG_SLOPE":["Linear Regression Slope (Statistic Functions)",["timeperiod","14"]],"MA":["Moving average (Overlap Studies)",["timeperiod","30"],["matype","0"]],"MACD":["Moving Average Convergence/Divergence (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["signalperiod","9"]],"MACDEXT":["MACD with controllable MA type (Momentum Indicators)",["fastperiod","12"],["fastmatype","0"],["slowperiod","26"],["slowmatype","0"],["signalperiod","9"],["signalmatype","0"]],"MACDFIX":["Moving Average Convergence/Divergence Fix 12/26 (Momentum Indicators)",["signalperiod","9"]],"MAX":["Highest values over a specified period (Math Operators)",["timeperiod","30"]],"MAXINDEX":["Index of highest value over a specified period (Math Operators)",["timeperiod","30"]],"MFI":["Money Flow Index (Momentum Indicators)",["timeperiod","14"]],"MIDPOINT":["Midpoint over period (Overlap Studies)",["timeperiod","14"]],"MIDPRICE":["Midpoint Price over period (Overlap Studies)",["timeperiod","14"]],"MIN":["Lowest value over a specified period (Math Operators)",["timeperiod","30"]],"MININDEX":["Index of lowest value over a specified period (Math Operators)",["timeperiod","30"]],"MINMAX":["Lowest and highest values over a specified period (Math Operators)",["timeperiod","30"]],"MINMAXINDEX":["Indexes of lowest and highest values over a specified period (Math Operators)",["timeperiod","30"]],"MINUS_DI":["Minus Directional Indicator (Momentum Indicators)",["timeperiod","14"]],"MINUS_DM":["Minus Directional Movement (Momentum Indicators)",["timeperiod","14"]],"MOM":["Momentum (Momentum Indicators)",["timeperiod","10"]],"NATR":["Normalized Average True Range (Volatility Indicators)",["timeperiod","14"]],"PLUS_DI":["Plus Directional Indicator (Momentum Indicators)",["timeperiod","14"]],"PLUS_DM":["Plus Directional Movement (Momentum Indicators)",["timeperiod","14"]],"PPO":["Percentage Price Oscillator (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["matype","0"]],"ROC":["Rate of change: ((price/prevPrice)-1)*100 (Momentum Indicators)",["timeperiod","10"]],"ROCP":["Rate of change Percentage: (price-prevPrice)/prevPrice (Momentum Indicators)",["timeperiod","10"]],"ROCR":["Rate of change ratio: (price/prevPrice) (Momentum Indicators)",["timeperiod","10"]],"ROCR100":["Rate of change ratio 100 scale: (price/prevPrice)*100 (Momentum Indicators)",["timeperiod","10"]],"RSI":["Relative Strength Index (Momentum Indicators)",["timeperiod","14"]],"SMA":["Simple Moving Average (Overlap Studies)",["timeperiod","30"]],"STDDEV":["Standard Deviation (Statistic Functions)",["timeperiod","5"],["nbdev","1"]],"STOCH":["Stochastic (Momentum Indicators)",["fastk_period","5"],["slowk_period","3"],["slowk_matype","0"],["slowd_period","3"],["slowd_matype","0"]],"STOCHF":["Stochastic Fast (Momentum Indicators)",["fastk_period","5"],["fastd_period","3"],["fastd_matype","0"]],"STOCHRSI":["Stochastic Relative Strength Index (Momentum Indicators)",["timeperiod","14"],["fastk_period","5"],["fastd_period","3"],["fastd_matype","0"]],"T3":["Triple Exponential Moving Average (T3) (Overlap Studies)",["timeperiod","5"],["vfactor","0.7"]],"TEMA":["Triple Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"TRIMA":["Triangular Moving Average (Overlap Studies)",["timeperiod","30"]],"TRIX":["1-day Rate-Of-Change (ROC) of a Triple Smooth EMA (Momentum Indicators)",["timeperiod","30"]],"TSF":["Time Series Forecast (Statistic Functions)",["timeperiod","14"]],"ULTOSC":["Ultimate Oscillator (Momentum Indicators)",["timeperiod1","7"],["timeperiod2","14"],["timeperiod3","28"]],"VAR":["Variance (Statistic Functions)",["timeperiod","5"],["nbdev","1"]],"WILLR":["Williams' %R (Momentum Indicators)",["timeperiod","14"]],"WMA":["Weighted Moving Average (Overlap Studies)",["timeperiod","30"]]};quanto_data.nb_preview_url="https://notebooks-preview.prd.pub.quantopian.com";quanto_data.delay_nb_preview_load=false;
//]]>
</script>
<meta content='https://www.quantopian.com/posts/alphalens-what-does-it-do' property='og:url'>
<meta content='alphalens - what does it do?' property='og:title'>

<input type="hidden" name="env" id="quanto-env" value="production" />
<meta content='550580758292093' property='fb:app_id'>
<meta content='https://www.quantopian.com/posts/alphalens-what-does-it-do' property='og:url'>
<meta content='https://media.quantopian.com/public/og-image-default.png' property='og:image'>
<meta content='alphalens - what does it do?' property='og:title'>
<meta content='Is there a tutorial on what alphalens does under-the-hood?  I understand that it is a signal screening tool, that spits out a lot of visuals, but how does it accomplish this?  And what are the limitations?' property='og:description'>
</head>
<script type='application/ld+json'>
  {
    "@context": "http://schema.org",
    "@type": "Organization",
    "url": "https://www.quantopian.com",
    "logo": "https://media.quantopian.com/logos/logo-q-press-red.png"
  }
</script>
<body class='' ontouchstart=''>
<div id='fb-root'></div>
<div class='wrapper'>
<div class='alert-v2 error'>
<div class='message'>
Quantopian's community platform is shutting down. Please read <a href="/posts/quantopians-community-services-are-closing">this post</a> for more information and <a href='/account#account'>download your code</a>.
</div>
</div>
<div class='navbar navbar-default navbar-static-top' id='app-navbar'>
<div class='container-fluid'>
<div class='navbar-header'>
<button class='navbar-toggle collapsed' data-target='#app-navbar-collapse' data-toggle='collapse'>
<span class='icon hamburger-menu'></span>
</button>
<a class='navbar-brand' href='/home'>
<img class='logo-image async-image' data-src='external/logo-q-white-b141ea6018546e5a4ecc3d10d8440ec076fc4385764e948b322828cc70950a76.svg'>
</a>
</div>
<div class='collapse navbar-collapse' id='app-navbar-collapse'>
<ul class='nav navbar-nav navbar-right'>
<li class='dropdown quanto-dropdown-new'>
<li>
<a class='header' href='/docs'>
Documentation
</a>
</li>
<li class='dropdown quanto-dropdown-new'>
<a class='header' data-toggle='dropdown' href='#'>
Learn
</a>
<ul class='dropdown-menu'>
<li>
<a class='mixpanel-button' data-event='main nav getting started clicked' href='/tutorials/getting-started'>Getting Started</a>
</li>
<li>
<a class='mixpanel-button' data-event='main nav tutorials clicked' href='/tutorials'>Tutorials</a>
</li>
<li>
<a class='mixpanel-button' data-event='main nav lectures clicked' href='/lectures'>Lectures</a>
</li>
</ul>
</li>
<li>
<a class='header' href='/posts' id='forum-link'>
Forum
</a>
</li>
<li>
<a class="header" href="/signin?return_to=/posts/alphalens-what-does-it-do">Log In</a>
</li>
</li>

</ul>
</div>
</div>
</div>
<script>
  $(document).ready(function () {
    quanto.instances.fm = new quanto.FeedbackManager();
    quanto.instances.hm = new quanto.headerManager();
  })
</script>


<div class='content content-area new-style'>
<input type="hidden" name="page-id" id="page-id" value="postatomic" />
<script src="external/MathJax.js?config=TeX-AMS_HTML-full.js,Safe" async="async"></script>
<div class='container page-container post-atomic'>
<input id='parent-post-id-val' type='hidden' value='59d54c3c14f729000d1e516b'>
<div class='post-container' data-post-id='59d54c3c14f729000d1e516b' id='59d54c3c14f729000d1e516b'>
<div class='back-button back-to-community'>Back to Community</div>
<div class='post-title'>alphalens - what does it do?</div>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<span class='posted-at'>posted </span>
<span UTCms='1507150908000' class='quanto-date posted-at'></span>
<div class='pull-right other-actions'>
<div class='dropup inline-block'>
<div class='dropdown share-control other-action-link'>
<div data-toggle='dropdown'>
<div class='share-image'></div>
Share
</div>
<ul class='dropdown-menu share-options-menu'>
<li>
<a class='share-row' href='https://twitter.com/intent/tweet?text=alphalens - what does it do?&amp;url=https%3A%2F%2Fwww.quantopian.com%2Fposts%2Falphalens-what-does-it-do%3Futm_source%3Dwebsite_share%26utm_campaign%3Dalphalens-what-does-it-do%26utm_medium%3Dtwitter&amp;via=quantopian'>
<i class='icon icon-twitter'></i>
Share on Twitter
</a>
</li>
<li>
<div class='share-row facebook-button'>
<i class='icon icon-facebook'></i>
Share on Facebook
</div>
</li>
<li>
<div class='share-row linkedin-button' data-share-url='https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Fwww.quantopian.com%2Fposts%2Falphalens-what-does-it-do%3Futm_source%3Dwebsite_share%26utm_campaign%3Dalphalens-what-does-it-do%26utm_medium%3Dlinkedin&amp;title=alphalens+-+what+does+it+do%3F+%28Grant+Kiehne%29&amp;source=Quantopian'>
<i class='icon icon-linkedin'></i>
Share on LinkedIn
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>

<div class='tags tag-row'>
<a class='tag mixpanel-button' data-event='tag click' data-mixpanel='API' data-tag-id='55c50e7d8d4710ec6e000001' href='/posts/tag/API/newest'>API</a>
<a class='tag mixpanel-button' data-event='tag click' data-mixpanel='Seeking Help' data-tag-id='55c50e7d8d4710ec6e000003' href='/posts/tag/Seeking-Help/newest'>Seeking Help</a>
<a class='tag mixpanel-button' data-event='tag click' data-mixpanel='Using Data' data-tag-id='55c50e7d8d4710ec6e000008' href='/posts/tag/Using-Data/newest'>Using Data</a>
<a class='tag mixpanel-button' data-event='tag click' data-mixpanel='Visualization' data-tag-id='56d0b532f8f0e57992000001' href='/posts/tag/Visualization/newest'>Visualization</a>
</div>
<input type="hidden" name="social_fb_post_link" id="social_fb_post_link" value="https://www.quantopian.com/posts/alphalens-what-does-it-do?utm_source=website_share&amp;utm_campaign=alphalens-what-does-it-do&amp;utm_medium=facebook" />
<input type="hidden" name="social_post_image" id="social_post_image" value="external/logo-q-red-outline.png" />
<input type="hidden" name="social_post_author" id="social_post_author" value="Grant Kiehne" />
<div class='body-text'>
<div class='body-text-container post-body'><p>Is there a tutorial on what alphalens does under-the-hood?  I understand that it is a signal screening tool, that spits out a lot of visuals, but how does it accomplish this?  And what are the limitations?  </p>
</div>
</div>
</div>

</div>

<div class='container page-container post-atomic'>
<div class='section-header reply-header'>
<div class='reply-title'>30 responses</div>
</div>
<div class='replies'>
<div class='post-container response-container' data-post-id='59d9ffa78c3e52000d4aacdc' id='59d9ffa78c3e52000d4aacdc'>
<a href='#59d9ffa78c3e52000d4aacdc'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/511a4ad4ae6ea8dd87000062'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/5299bb9bef75de6bdcde4730c7ce4120?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/511a4ad4ae6ea8dd87000062'>João Aparício</a>
</div>
<a UTCms='1507458983000' class='quanto-date posted-at response-posted-at' href='#59d9ffa78c3e52000d4aacdc'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Not sure what you mean by &quot;under-the-hood&quot;. If you&#39;re asking about implementation details, I suggest you just read the code <a href="https://github.com/quantopian/alphalens">here</a>. It&#39;s surprisingly short and very educational.</p>

<p>If you have other kind of questions, ask away; I&#39;ve used it a bit.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='59da23e57e45b54a1d68672f' id='59da23e57e45b54a1d68672f'>
<a href='#59da23e57e45b54a1d68672f'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1507468261000' class='quanto-date posted-at response-posted-at' href='#59da23e57e45b54a1d68672f'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thanks João -</p>

<p>I gather that Alphalens takes as an input a factor that takes a single numeric value per stock every day, and also prices per stock every day, and then attempts to say something about the predictive power of the factor.</p>

<p>Looking at <a href="https://github.com/quantopian/alphalens">https://github.com/quantopian/alphalens</a>, the term &quot;returns&quot; is used, but how are the portfolio returns computed?  How does alphalens determine the portfolio weights versus time from the factors?  Or is it equal-weight?  For alphalens to work, does the factor need to be formulated in a certain way (e.g. factor values predict returns with a linear model)?  Does the factor need to be demeaned, and range between -1 and +1?  And normalized, to gross leverage of 1.0?  Or does alphalens take care of this (overriding the factor, which at any point in time may call for all long or all short or some mix)?</p>

<p>On <a href="https://blog.quantopian.com/a-professional-quant-equity-workflow/">https://blog.quantopian.com/a-professional-quant-equity-workflow/</a>, it says:</p>

<blockquote>
<p>An alpha is an expression, applied to the cross-section of your<br>
universe of stocks, which returns a vector of real numbers where these<br>
values are predictive of the relative magnitude of future returns.</p>
</blockquote>

<p>Is alphalens intended to help sort out a model (possibly nonlinear) that relates the factor values to future returns?  Or is there an assumption that the factor effectively linearizes the relationship, so that returns are proportional to factor values?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='59da2e2e1aa2bd000d5600ab' id='59da2e2e1aa2bd000d5600ab'>
<a href='#59da2e2e1aa2bd000d5600ab'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/511a4ad4ae6ea8dd87000062'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/5299bb9bef75de6bdcde4730c7ce4120?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/511a4ad4ae6ea8dd87000062'>João Aparício</a>
</div>
<a UTCms='1507470894000' class='quanto-date posted-at response-posted-at' href='#59da2e2e1aa2bd000d5600ab'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>From what I understand it works as follows. You pass alphalens two things: one is the time-series of the factor, the other is &quot;the portfolio&quot;. The way I&#39;ve seen it used this portfolio is passed to alphalens as a DataFrame, the columns of which are just the stocks prices. The relevant function here is <code>utils.get_clean_factor_and_forward_returns</code>. Nothing better than reading the documentation of the function <a href="https://github.com/quantopian/alphalens/blob/master/alphalens/utils.py#L223">here</a>. Pay special attention to the description of the variables <code>factor</code> and <code>prices</code>. So I guess that to answer one of your questions, Yes, it&#39;s just equal-weighted stocks.</p>

<pre><code>factor_data = get_clean_factor_and_forward_returns(factor, prices)  
</code></pre>

<p>Then that function returns a DataFrame with a shape that alphalens likes, lets call it <code>factor_data</code>. Your job as you study a factor is to then pass <code>factor_data</code> into different alphalens functions. For example to compute your factor&#39;s alpha and beta you can take that <code>factor_data</code> and call <code>performance.factor_alpha_beta(factor_data)</code>. See code <a href="https://github.com/quantopian/alphalens/blob/master/alphalens/performance.py#L182">here</a>.</p>

<pre><code>print factor_alpha_beta(factor_data)  
</code></pre>

<p>Regarding factor returns, there&#39;s a function for just that: <code>performance.factor_returns</code>, which you can see <a href="https://github.com/quantopian/alphalens/blob/master/alphalens/performance.py#L128">here</a>. I&#39;ve never used it myself, but from what I understand it computes returns for the stocks as if they were weighted by the factor. I imagine that in this case it&#39;s important to have the factor ordered so that higher values of the factor are the &quot;good&quot; ones, and lower (negative) values of the factor are the bad ones. According to <code>factor_returns</code> docs, you don&#39;t need to demean the factor or anything, that function does it all.</p>

<p>In addition to this you can do other nice things on top, like segment your set of stocks by quantile, or by some grouper function which you define.</p>

<blockquote>
<p>Is alphalens intended to help sort out a model (possibly nonlinear) that relates the factor values to future returns? Or is there an assumption that the factor effectively linearizes the relationship, so that returns are proportional to factor values?</p>
</blockquote>

<p>At core the predictiveness of the factor is given by some linear regression: in the function <code>factor_alpha_beta</code> you can find this code:</p>

<pre><code>        reg_fit = OLS(y, x).fit()  
        alpha, beta = reg_fit.params  
</code></pre>

<p>where <code>OLS</code> stands for &quot;Ordinary Least Squares&quot;.</p>

<p>Let me know if you have more questions.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='59da374be6e75900101c5da0' id='59da374be6e75900101c5da0'>
<a href='#59da374be6e75900101c5da0'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1507473227000' class='quanto-date posted-at response-posted-at' href='#59da374be6e75900101c5da0'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thanks João -</p>

<p>I&#39;ll have to spend some more time with this, when I get the chance.</p>

<p>Regarding this:</p>

<blockquote>
<p>it computes returns for the stocks as if they were weighted by the factor</p>
</blockquote>

<p>I think this implies that factors should be written as portfolio weights?  Or is it simply good enough that return be a monotonic function of the factor (which would be fixed by ranking?)?  I guess before I get into alphalens, I need to understand the requirements for an alpha factor, in the context of Quantopian...  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='59da40c07b9ddd0010e26df1' id='59da40c07b9ddd0010e26df1'>
<a href='#59da40c07b9ddd0010e26df1'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/511a4ad4ae6ea8dd87000062'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/5299bb9bef75de6bdcde4730c7ce4120?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/511a4ad4ae6ea8dd87000062'>João Aparício</a>
</div>
<a UTCms='1507475648000' class='quanto-date posted-at response-posted-at' href='#59da40c07b9ddd0010e26df1'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><blockquote>
<p>I think this implies that factors should be written as portfolio weights? </p>
</blockquote>

<p>I&#39;m not sure what this means. What I meant by the phrase you quote is <a href="https://github.com/quantopian/alphalens/blob/master/alphalens/performance.py#L167">this</a> bit of code in function <code>factor_returns</code>:</p>

<pre><code>    weights = factor_data.groupby(grouper)[&#39;factor&#39;] \  
        .apply(to_weights, long_short)  
</code></pre>

<p>That is, if you have a bunch of stocks and their daily prices on the one hand, and you have a &quot;factor&quot; (which is a number of each day and each stock) on the other hand, then you can define a &quot;portfolio return&quot; which is the return of a portfolio made of those stocks where you&#39;re long stocks with positive factor and short stocks with negative factor.</p>

<p>EDIT: If I remember correctly the Sentdex tutorial talks about alphalens at some point. <a href="https://www.quantopian.com/tutorials/algorithmic-trading-sentdex">https://www.quantopian.com/tutorials/algorithmic-trading-sentdex</a>  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='59da63674b37400010d5b6ba' id='59da63674b37400010d5b6ba'>
<a href='#59da63674b37400010d5b6ba'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1507484519000' class='quanto-date posted-at response-posted-at' href='#59da63674b37400010d5b6ba'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Presumably, alphalens takes the raw factor values, demeans and normalizes and then uses these as the portfolio weights, correct?  It doesn&#39;t rank and then demean and normalize (which I recall seeing in some example algos).  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='59da66501aa2bd00105606fd' id='59da66501aa2bd00105606fd'>
<a href='#59da66501aa2bd00105606fd'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/511a4ad4ae6ea8dd87000062'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/5299bb9bef75de6bdcde4730c7ce4120?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/511a4ad4ae6ea8dd87000062'>João Aparício</a>
</div>
<a UTCms='1507485264000' class='quanto-date posted-at response-posted-at' href='#59da66501aa2bd00105606fd'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>The function <code>get_clean_factor_and_forward_returns</code>  also ranks. There&#39;s a <code>quantiles</code> parameter (default 5, but you can change) which requires ranking and then binning the stocks according to the ranking quantiles.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='59da6fbe700935001016b42f' id='59da6fbe700935001016b42f'>
<a href='#59da6fbe700935001016b42f'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1507487678000' class='quanto-date posted-at response-posted-at' href='#59da6fbe700935001016b42f'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hmm?  I guess I need to understand that detail.  If my algo uses raw factor values (not ranked and not demeaned, passed to the Optimize API), but alphalens is working with ranked, demeaned factors, then it might not do a good job of predicting algo performance.</p>

<p>At the other end of the process, I&#39;m wondering if all of the output from alphalens can be rolled up into one or a few simple figures of merit.  Say I had lots of factors to evaluate, and wanted to score them without looking at each one individually using alphalens.  For example, how would I automatically analyze the 101 Alphas (see <a href="https://www.quantopian.com/posts/alpha-compiler">https://www.quantopian.com/posts/alpha-compiler</a>)?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='59da793b79ed120010ec0b3d' id='59da793b79ed120010ec0b3d'>
<a href='#59da793b79ed120010ec0b3d'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/54460194d718f327fd000380'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e511e4eeb9334ef82f1caa7bd66c36dc?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/54460194d718f327fd000380'>Luca</a>
</div>
<a UTCms='1507490107000' class='quanto-date posted-at response-posted-at' href='#59da793b79ed120010ec0b3d'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Grant, probably alphalens.tears.create_summary_tear_sheet is enough to understand the quality of your factor, so you might use that with the 101 Alphas and then call alphalens.tears.create_full_tear_sheet only on those factors that show good performance.</p>

<blockquote>
<p>If my algo uses raw factor values (not ranked and not demeaned, passed<br>
to the Optimize API), but alphalens is working with ranked, demeaned<br>
factors, then it might not do a good job of predicting algo<br>
performance.</p>
</blockquote>

<p>The forward returns demeaning is performed only if 
<code>long_short=True</code> and it is useful to adjust the factor performance for a dollar neutral algo, but it doesn&#39;t mean you have to modify your factor values before passing it to the Optimize API. You also don&#39;t have to perform any ranking. </p>

<p>Briefly this is what Alphalens does: if you know the factor value for each stock and also their future price  you actually know what are the expected returns for each factor value. So Alphalens compute the mean future (forward) return for the factor values, but it does so by dividing the factor in quantiles first, then averaging the future return of each quantile. Those are the values you see pretty much everywhere in the factor returns analysis, except for the plot called &quot;&#39;Factor Weighted Long/Short Portfolio Cumulative Return&quot;, that is the plot you and João Aparício   talked about. In that articular plot the simulated portfolio is non based on quantiles but each stock forward return is weighted by the stock factor value and the weight is like <a href="https://github.com/quantopian/alphalens/blob/master/alphalens/performance.py#L156">this</a>:<br>
 <code>
factor_demeaned_vals / factor_demeaned_vals.abs().sum()  
</code></p>

<p>In your algorithm you can actually use the same method to compute the weighting for your stocks (or zscore that gives you a similar weighting and it is already implemented as pipeline factor&#39;s method) but you can also use equal weighting. You can decide from the Alphalens output what is the best, just compare &quot;&#39;Factor Weighted Long/Short Portfolio Cumulative Return&quot; plot to &quot;&quot;Cumulative Return by Quantile&quot;</p>

<p>It is actually worth looking at the code as it is really linear and you can follow very easily what alphalens does.</p>

<p><a href="https://www.youtube.com/watch?v=bvUdDFpsZ3o">This video</a> is also very interesting (from minute 28)</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='59da85bf655e91001060e38a' id='59da85bf655e91001060e38a'>
<a href='#59da85bf655e91001060e38a'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1507493311000' class='quanto-date posted-at response-posted-at' href='#59da85bf655e91001060e38a'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thanks Luca -</p>

<p>So I gather that aside from the Spearman rank correlation monotonicity test, the factor is raw, demeaned and normalized, but not ranked?  Or does alphalens manage outliers by ranking?</p>

<p>I&#39;ll look at the code at some point, but generally I don&#39;t like attempting to read code (and having to unravel unfamiliar Python), when words and equations would be better.  I was hoping for a write-up, but I guess none exists.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='59da8c9ffd3ac600109ec7c5' id='59da8c9ffd3ac600109ec7c5'>
<a href='#59da8c9ffd3ac600109ec7c5'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/54460194d718f327fd000380'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e511e4eeb9334ef82f1caa7bd66c36dc?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/54460194d718f327fd000380'>Luca</a>
</div>
<a UTCms='1507495071000' class='quanto-date posted-at response-posted-at' href='#59da8c9ffd3ac600109ec7c5'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><blockquote>
<p>So I gather that aside from the Spearman rank correlation monotonicity<br>
test, the factor is raw, demeaned and normalized, but not ranked? Or<br>
does alphalens manage outliers by ranking?</p>
</blockquote>

<p>Yes it is raw and also the demeaning and normalization is done only in &quot;&#39;Factor Weighted Long/Short Portfolio Cumulative Return&quot; plot. The other return analysis plots deal with quantiles mean return, so once the grouping of the stocks by quantiles is done (on the raw factor as it wouldn&#39;t change the result doing so on a ranked or normalized or demeaned factor), the functions can forget about the factor values, they simply average the forward returns of the stocks (by quantile) using equal weighting.</p>

<p>Also, the long_short option I meantioned earlier is used to demean the forward returns, not the factor values (except for &quot;&#39;Factor Weighted Long/Short Portfolio Cumulative Return&quot; plot). </p>

<p>The outliers are handled by the quantiles, once the outliers end up in one of the quantiles they get equal weight, so they are not a problem. This is not true for &#39;Factor Weighted Long/Short Portfolio Cumulative Return&quot; where the factor value is used to compute the stock weighting, but there is one option that might help with that:</p>

<pre><code>    filter_zscore : int or float  
        Sets forward returns greater than X standard deviations  
        from the the mean to nan.  
        Caution: this outlier filtering incorporates lookahead bias.  
</code></pre>

<p>Or you can simply pre-filter your factor dataframe before calling alphalens, you can so remove the outliers by yourself.</p>

<p>EDIT:  the factor alpha and beta are computed on a portfolio weighted by factor values, where the factor raw data is demeaned and  normalized in the same way is done in &quot;&#39;Factor Weighted Long/Short Portfolio Cumulative Return&quot; plot  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='59db37a6116ec6000d04efa0' id='59db37a6116ec6000d04efa0'>
<a href='#59db37a6116ec6000d04efa0'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/511a4ad4ae6ea8dd87000062'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/5299bb9bef75de6bdcde4730c7ce4120?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/511a4ad4ae6ea8dd87000062'>João Aparício</a>
</div>
<a UTCms='1507538854000' class='quanto-date posted-at response-posted-at' href='#59db37a6116ec6000d04efa0'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hey Grant, I&#39;ll have some free time later today, wanna discuss over skype or something similar? To be honest I could use some refreshing these ideas again.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='59db674f384c9200104f45b1' id='59db674f384c9200104f45b1'>
<a href='#59db674f384c9200104f45b1'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1507551055000' class='quanto-date posted-at response-posted-at' href='#59db674f384c9200104f45b1'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thanks João and Luca -</p>

<p>I think I now understand the &quot;Factor Weighted Long/Short Portfolio Cumulative Return&quot; plot--it is simply akin to an ideal backtest using the daily point-in-time raw factor as the portfolio weights, which has been demeaned and normalized (to a gross leverage of 1.0).  </p>

<p>In the &quot;Returns Analysis&quot; table, I&#39;d assumed that the first three values (Ann. alpha, t-stat(alpha), &amp; beta) are computed from the &quot;Factor Weighted Long/Short Portfolio Cumulative Return&quot; plot, but I&#39;m not so sure, since there is only one plot (I&#39;d expect three plots--one for each of the three trading frequencies: 1-, 5-, &amp; 10-day).  Presumably, the columns labeled 1, 5, &amp; 10 mean that the portfolio is rebalanced on a 1-, 5-, or 10-day frequency, with instantaneous daily factor values (not averaged over the 5- or 10-day periods).  However, there is only one &quot;Factor Weighted Long/Short Portfolio Cumulative Return&quot; plot, so does it represent the &quot;1&quot; column in the &quot;Returns Analysis&quot; table?  Why not show three plots in the &quot;Factor Weighted Long/Short Portfolio Cumulative Return&quot;--one for each of the frequencies, 1-, 5-, and 10-day?  Or am I misinterpreting?</p>

<p>Also, I&#39;m curious how alphalens handles the potential bias of the start date of the analysis (since the 5- and 10-day frequencies select out specific days)?  Presumably, nothing is built in; the user would run alphalens using a bunch of start dates to see the effect.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='59db6da633698f00103d14d7' id='59db6da633698f00103d14d7'>
<a href='#59db6da633698f00103d14d7'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/54460194d718f327fd000380'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e511e4eeb9334ef82f1caa7bd66c36dc?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/54460194d718f327fd000380'>Luca</a>
</div>
<a UTCms='1507552678000' class='quanto-date posted-at response-posted-at' href='#59db6da633698f00103d14d7'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><blockquote>
<p>I think I now understand the &quot;Factor Weighted Long/Short Portfolio<br>
Cumulative Return&quot; plot--it is simply akin to an ideal backtest using<br>
the daily point-in-time raw factor as the portfolio weights, which has<br>
been demeaned and normalized (to a gross leverage of 1.0).</p>
</blockquote>

<p>Exactly</p>

<blockquote>
<p>In the &quot;Returns Analysis&quot; table, I&#39;d assumed that the first three<br>
values (Ann. alpha, t-stat(alpha), &amp; beta) are computed from the<br>
&quot;Factor Weighted Long/Short Portfolio Cumulative Return&quot; plot, </p>
</blockquote>

<p>Exactly </p>

<blockquote>
<p>but I&#39;m not so sure, since there is only one plot (I&#39;d expect three plots--one<br>
for each of the three trading frequencies: 1-, 5-, &amp; 10-day).<br>
Presumably, the columns labeled 1, 5, &amp; 10 mean that the portfolio is<br>
rebalanced on a 1-, 5-, or 10-day frequency, with instantaneous daily<br>
factor values (not averaged over the 5- or 10-day periods). However,<br>
there is only one &quot;Factor Weighted Long/Short Portfolio Cumulative<br>
Return&quot; plot, so does it represent the &quot;1&quot; column in the &quot;Returns<br>
Analysis&quot; table? Why not show three plots in the &quot;Factor Weighted<br>
Long/Short Portfolio Cumulative Return&quot;--one for each of the<br>
frequencies, 1-, 5-, and 10-day? Or am I misinterpreting?</p>
</blockquote>

<p>Maybe you are looking at an old plot?Check <a href="https://github.com/quantopian/alphalens/blob/master/alphalens/examples/predictive_vs_non-predictive_factor.ipynb">this</a> out , you&#39;ll see a &quot;Factor Weighted Long/Short Portfolio Cumulative Return&quot; plot for each period 1, 5 and 10</p>

<blockquote>
<p>Also, I&#39;m curious how alphalens handles the potential bias of the start<br>
date of the analysis (since the 5- and 10-day frequencies select out<br>
specific days)? Presumably, nothing is built in; the user would run<br>
alphalens using a bunch of start dates to see the effect.</p>
</blockquote>

<p>Have a look at this discussion: <a href="https://github.com/quantopian/alphalens/issues/187">How to interpret the cumulative return for N forward period in cumulative factor return plots?</a></p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='59db7ca6116ec6000d04f723' id='59db7ca6116ec6000d04f723'>
<a href='#59db7ca6116ec6000d04f723'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/511a4ad4ae6ea8dd87000062'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/5299bb9bef75de6bdcde4730c7ce4120?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/511a4ad4ae6ea8dd87000062'>João Aparício</a>
</div>
<a UTCms='1507556518000' class='quanto-date posted-at response-posted-at' href='#59db7ca6116ec6000d04f723'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><blockquote>
<p>Presumably, the columns labeled 1, 5, &amp; 10 mean that the portfolio is rebalanced on a 1-, 5-, or 10-day frequency</p>
</blockquote>

<p>No, Grant. In alphalens the &quot;periods&quot; refer to the time periods over which you want alphalens to investigate whether some predictive power exists. There is no re-balancing going on (and because of this, no sensitivity to frequencies selecting out specific days).</p>

<p><a href="https://github.com/quantopian/alphalens/blob/master/alphalens/utils.py#L105">Here&#39;s</a> the code of what alphalens does internally:</p>

<pre><code>    for period in periods:  
        delta = prices.pct_change(period).shift(-period)  
</code></pre>

<p>it&#39;s a simple <code>pct_change()</code> followed by <code>.shift(-period)</code>.</p>

<p>Anyway, I&#39;ve made a notebook studying the predictive power of the forward_earning_yield using alphalens.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='59db7eaa5e8a5d000da6aed6' id='59db7eaa5e8a5d000da6aed6'>
<a href='#59db7eaa5e8a5d000da6aed6'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/54460194d718f327fd000380'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e511e4eeb9334ef82f1caa7bd66c36dc?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/54460194d718f327fd000380'>Luca</a>
</div>
<a UTCms='1507557034000' class='quanto-date posted-at response-posted-at' href='#59db7eaa5e8a5d000da6aed6'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@João Aparício , in the context of  &quot;Factor Weighted Long/Short Portfolio Cumulative Return&quot; plot the periods correspond to the rebalancing period of the simulated portfolio, so Grant assumption is correct if he was referring to  &quot;Factor Weighted Long/Short Portfolio Cumulative Return&quot; plot. In general the meaning of periods is what you described though.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='59db8232655e91001060fdde' id='59db8232655e91001060fdde'>
<a href='#59db8232655e91001060fdde'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1507557938000' class='quanto-date posted-at response-posted-at' href='#59db8232655e91001060fdde'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thanks again -</p>

<p>I had been looking at <a href="https://github.com/quantopian/alphalens">https://github.com/quantopian/alphalens</a> where only one plot is shown for &quot;Factor Weighted Long/Short Portfolio Cumulative Return&quot;.</p>

<p>So, I gather that one piece of info provided by alphalens is to get some sense if the factor will fly for trading at 1-, 5-, &amp; 10-day frequencies.  However, it sounds like for this to make sense, the factor should be formulated to set the portfolio weights directly in the first place.  It is a more restrictive definition than I&#39;d been considering, but it seems to be inherent in the Q framework.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='59db86ff655e91000d60fdff' id='59db86ff655e91000d60fdff'>
<a href='#59db86ff655e91000d60fdff'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/54460194d718f327fd000380'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e511e4eeb9334ef82f1caa7bd66c36dc?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/54460194d718f327fd000380'>Luca</a>
</div>
<a UTCms='1507559167000' class='quanto-date posted-at response-posted-at' href='#59db86ff655e91000d60fdff'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><blockquote>
<p>However, it sounds like for this to make sense, the factor should be<br>
formulated to set the portfolio weights directly in the first place.</p>
</blockquote>

<p>I am not sure to follow what you mean.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='59db88765e8a5d000fa6b033' id='59db88765e8a5d000fa6b033'>
<a href='#59db88765e8a5d000fa6b033'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/511a4ad4ae6ea8dd87000062'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/5299bb9bef75de6bdcde4730c7ce4120?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/511a4ad4ae6ea8dd87000062'>João Aparício</a>
</div>
<a UTCms='1507559542000' class='quanto-date posted-at response-posted-at' href='#59db88765e8a5d000fa6b033'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Luca that is not clear to me...</p>

<p>You said</p>

<blockquote>
<p>In that articular plot the simulated portfolio is non based on quantiles but each stock forward return is weighted by the stock factor value and the weight is like this:  ( ... )</p>
</blockquote>

<p>The function that you link to, named <code>factor_returns</code> calculates the weights in the following way:  </p>

<pre><code>    weights = factor_data.groupby(grouper)[&#39;factor&#39;] \  
        .apply(to_weights, long_short)  
</code></pre>

<p>That means that the weights will be different for each day! Try it out. Compute a <code>factor_data</code> DataFrame and do the steps inside <code>factor_returns</code> one by one.</p>

<p>In other words, if you ask alphalens eg <code>periods=(5,10)</code> it is NOT true that alpha lens will internally calculate two weight arrays, one with a rebalancing frequency of 5 days the other with a rebalancing frequency of 10. Instead, it calculates one weights array which changes DAILY, and then sum the returns across each asset given by those weights. Periods aren&#39;t rebalancing frequencies. They&#39;re the time-horizon on which you want to test for predictive power. If anything, this should be called daily rebalancing.</p>

<p>Am I missing something here? (I could link the updated notebook, but I&#39;m afraid of spamming the thread even more. Do you want it? I could be wrong, I&#39;m genuinely trying to understand this. But from the internal calculations I can&#39;t find the rebalancing you claim.)  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='59db8bfd700935197a16b429' id='59db8bfd700935197a16b429'>
<a href='#59db8bfd700935197a16b429'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/54460194d718f327fd000380'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e511e4eeb9334ef82f1caa7bd66c36dc?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/54460194d718f327fd000380'>Luca</a>
</div>
<a UTCms='1507560445000' class='quanto-date posted-at response-posted-at' href='#59db8bfd700935197a16b429'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@João Aparício   I agree with you that  periods are the time-horizon on which you want to test for predictive power. Anyway, solely in the context of  &quot;Factor Weighted Long/Short Portfolio Cumulative Return&quot; plot they can be considered <strong>intuitively</strong> as rebalancing periods. How factor values that are computed daily can be used in an algorithm that rebalances every 5 or 10 days is explained here: <a href="https://github.com/quantopian/alphalens/issues/187">How to interpret the cumulative return for N forward period in cumulative factor return plots?</a>. It is also briefly explained in <a href="https://github.com/quantopian/alphalens/blob/master/alphalens/plotting.py#L714">plot_cumulative_returns</a>, the function that accepts in input the daily factor values and plot the cumulative returns plot.</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='59db8c48fd3ac6000d9ee298' id='59db8c48fd3ac6000d9ee298'>
<a href='#59db8c48fd3ac6000d9ee298'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/511a4ad4ae6ea8dd87000062'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/5299bb9bef75de6bdcde4730c7ce4120?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/511a4ad4ae6ea8dd87000062'>João Aparício</a>
</div>
<a UTCms='1507560520000' class='quanto-date posted-at response-posted-at' href='#59db8c48fd3ac6000d9ee298'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Luca In fact, it makes more sense that it is the way I&#39;m describing. You have one factor per day (and per stock). If (for example) <code>periods=(5,10)</code> what alphalens is telling you are the returns on horizons <code>(5,10)</code> if you bought and sold every day according to the factor of that day, NOT the returns that you&#39;d have if you bought and sold with frequencies <code>(5,10)</code>. It&#39;s telling you the returns of ONE portfolio (rebalanced daily) on different horizons, not the returns of portfolios rebalanced with different frequencies.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='59db8cd0700935197a16b440' id='59db8cd0700935197a16b440'>
<a href='#59db8cd0700935197a16b440'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/511a4ad4ae6ea8dd87000062'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/5299bb9bef75de6bdcde4730c7ce4120?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/511a4ad4ae6ea8dd87000062'>João Aparício</a>
</div>
<a UTCms='1507560656000' class='quanto-date posted-at response-posted-at' href='#59db8cd0700935197a16b440'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Luca thanks for the link. I have to go now, I&#39;ll come back to you with more thoughts after I&#39;ve read it :-)  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='59dba89d33698f31173cfb96' id='59dba89d33698f31173cfb96'>
<a href='#59dba89d33698f31173cfb96'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1507567773000' class='quanto-date posted-at response-posted-at' href='#59dba89d33698f31173cfb96'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>To be specific, on <a href="https://github.com/quantopian/alphalens/blob/master/alphalens/examples/predictive_vs_non-predictive_factor.ipynb">https://github.com/quantopian/alphalens/blob/master/alphalens/examples/predictive_vs_non-predictive_factor.ipynb</a>, we have the plots:</p>

<p>&quot;Factor Weighted Long/Short Portfolio Cumulative Return (1 Fwd Period)&quot;</p>

<p>&quot;Factor Weighted Long/Short Portfolio Cumulative Return (5 Fwd Period)&quot;</p>

<p>&quot;Factor Weighted Long/Short Portfolio Cumulative Return (10 Fwd Period)&quot;</p>

<p>Intuitively, I&#39;d think that these would represent portfolio updates at 1-, 5-, and 10-day frequencies, using the demeaned and normalized factor values as portfolio weights (1.0 gross leverage constraint).  Is this correct?</p>

<p>This would seem to be the simplest thing done by alphalens--a back-of-the-envelope trading simulation.  Once I understand it, then I&#39;ll move on to more complicated slicing and dicing.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='59dbac8f5e8a5d000fa6b42d' id='59dbac8f5e8a5d000fa6b42d'>
<a href='#59dbac8f5e8a5d000fa6b42d'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5346083a839ff34e1400010a'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e2319a353b35eac99e765c836ba72044?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5346083a839ff34e1400010a'>Delaney Mackenzie</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1507568783000' class='quanto-date posted-at response-posted-at' href='#59dbac8f5e8a5d000fa6b42d'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hey all,</p>

<p>Max made a lecture that goes over how to interpret the output of the plots. <a href="https://www.quantopian.com/lectures/factor-analysis">https://www.quantopian.com/lectures/factor-analysis</a></p>

<p>In general I think about it this way:</p>

<p>Thinking leads to hypothesis. Hypothesis leads to model. Model is tested in alphalens to see if it forecasts future prices, this is done primarily by checking if model&#39;s weights are linearly correlated with future returns. If yes then model&#39;s weights are fed into optimize, which take the alpha and apply risk constraints. The alpha will ideally survive constraining without losing all signal, but sometimes it won&#39;t. The full process is available for newer folks here:<br>
<a href="https://www.quantopian.com/lectures/example-long-short-equity-algorithm">https://www.quantopian.com/lectures/example-long-short-equity-algorithm</a>  </p>
</div>
<div class='disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='59dbb2ef655e910010610379' id='59dbb2ef655e910010610379'>
<a href='#59dbb2ef655e910010610379'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/54460194d718f327fd000380'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e511e4eeb9334ef82f1caa7bd66c36dc?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/54460194d718f327fd000380'>Luca</a>
</div>
<a UTCms='1507570415000' class='quanto-date posted-at response-posted-at' href='#59dbb2ef655e910010610379'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Grant </p>

<blockquote>
<p>Intuitively, I&#39;d think that these would represent portfolio updates at<br>
1-, 5-, and 10-day frequencies, using the demeaned and normalized<br>
factor values as portfolio weights (1.0 gross leverage constraint). Is<br>
this correct?</p>
</blockquote>

<p>Yes and the details on how the updates are done at frequencies higher than 1 are in the links I provided earlier.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='59dc036d34bb200010e01be8' id='59dc036d34bb200010e01be8'>
<a href='#59dc036d34bb200010e01be8'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1507591021000' class='quanto-date posted-at response-posted-at' href='#59dc036d34bb200010e01be8'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Luca -</p>

<p>Regarding:</p>

<blockquote>
<p>However, it sounds like for this to make sense, the factor should be<br>
formulated to set the portfolio weights directly in the first place.</p>
</blockquote>

<p>I&#39;m just saying that for the alphalens alpha &amp; beta values to be representative, then a Q alpha factor simply needs to be the portfolio weights point-in-time.  If it is not, then the alphalens prediction and the algo could be quite different.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='59dc0ac24273ed001068f35c' id='59dc0ac24273ed001068f35c'>
<a href='#59dc0ac24273ed001068f35c'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5346083a839ff34e1400010a'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e2319a353b35eac99e765c836ba72044?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5346083a839ff34e1400010a'>Delaney Mackenzie</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1507592898000' class='quanto-date posted-at response-posted-at' href='#59dc0ac24273ed001068f35c'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Keep in mind that alpha is just leftover returns when beta is removed. I wouldn&#39;t really use alphalens to determine the alpha and beta of your factor. Alphalens determines whether a hypothetical alpha has any returns period. Once you&#39;ve determined it does, you go to the next step of unbraiding what is alpha and what is beta. That is accomplished using more than just the market as a risk factor. We&#39;re working on tooling to enable people to do this better.  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='59dc87b60add163c5287292a' id='59dc87b60add163c5287292a'>
<a href='#59dc87b60add163c5287292a'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/54460194d718f327fd000380'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e511e4eeb9334ef82f1caa7bd66c36dc?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/54460194d718f327fd000380'>Luca</a>
</div>
<a UTCms='1507624886000' class='quanto-date posted-at response-posted-at' href='#59dc87b60add163c5287292a'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Grant</p>

<blockquote>
<p>I&#39;m just saying that for the alphalens alpha &amp; beta values to be<br>
representative, then a Q alpha factor simply needs to be the portfolio<br>
weights point-in-time. If it is not, then the alphalens prediction and<br>
the algo could be quite different.</p>
</blockquote>

<p>Actually before computing alpha and beta Alphalens demeans and normalizes the raw factor in the same way as it does when computing  &quot;Factor Weighted Long/Short Portfolio Cumulative Return&quot;. So the alpha and beta are relative to that particular method of demeaning and normalizing and if the algorithm does it differently it might get slightly different results.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='59dc8da9ce0bf2000dbe173c' id='59dc8da9ce0bf2000dbe173c'>
<a href='#59dc8da9ce0bf2000dbe173c'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1507626409000' class='quanto-date posted-at response-posted-at' href='#59dc8da9ce0bf2000dbe173c'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Delaney -</p>

<p>I don&#39;t understand:</p>

<blockquote>
<p>I wouldn&#39;t really use alphalens to determine the alpha and beta of your factor</p>
</blockquote>

<p>I&#39;d expect that if I demean and normalize a factor, and then use it to set the portfolio weights in an algo, I&#39;d get an alpha &amp; beta similar to what I&#39;d get using alphalens.  Or am I misinterpreting?  If this is not the case, how should one interpret the alpha &amp; beta provided by alphalens?</p>

<p>I don&#39;t have time, but if someone wanted to give this a go, it would be interesting to see the comparison between alphalens and an algo, for a single factor.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='59dde1bcf248cf0010243d54' id='59dde1bcf248cf0010243d54'>
<a href='#59dde1bcf248cf0010243d54'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/580d82d24e82e056aa00026c'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/54ea9828452c6f4ae1187ecc8e6a1889?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/580d82d24e82e056aa00026c'>Lex</a>
</div>
<a UTCms='1507713468000' class='quanto-date posted-at response-posted-at' href='#59dde1bcf248cf0010243d54'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Do you guys know if you can run Alphalens on infrequent data i.e. Economic Data released weekly or monthly? I have posted about this on the thread below. Sorry I am not technical enough to be able to decipher the input format &amp; &#39;how it works&#39; outside of the standard equity fundamentals.<br>
<a href="https://www.quantopian.com/posts/help-with-alphalens-on-infrequent-data">https://www.quantopian.com/posts/help-with-alphalens-on-infrequent-data</a>  </p>
</div>
</div>
</div>

</div>
<div class='sign-in-please'>
Please <a href='/signin?return_to=/posts/alphalens-what-does-it-do'>sign in</a> or
<a href='/users/sign_up?redirect_to=/posts/alphalens-what-does-it-do'>join Quantopian</a> to
post a reply.
</div>
</div>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId: "550580758292093",
      status: false,
      cookie: true,
      xfbml: true
    });
  };
  
  (function(d, debug){
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) {return;}
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
    ref.parentNode.insertBefore(js, ref);
  }(document, /*debug*/ false));
  
  window.twttr = (function (d,s,id) {
    var t, js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return; js=d.createElement(s); js.id=id;
    js.src="//platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs);
    return window.twttr || (t = { _e: [], ready: function(f){ t._e.push(f) } });
  }(document, "script", "twitter-wjs"));
</script>
<script>
  $(document).ready(function () {
    quanto.instances.pm = new quanto.PostManager(false)
  });
</script>

<div class='login-footer'>
<div class='container'>
<div class='login-footer-text'>
Become an expert in quant finance through Quantopian's hands-on education.
</div>
<div class='login-footer-button'>
<button class='btn btn-v2 stroke join-modal-link mixpanel-button' data-event='anon join footer click posts' data-mixpanel='click'>
Join Now
</button>
</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='error-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'>Error</span>
</div>
<div class='modal-body body-content'>
<p>Sorry, something went wrong.  Try again or contact us by <a class='feedback-link'>sending feedback</a>.</p>
</div>
<div class='modal-footer'>
<button class='btn btn-v2 blue action-button' data-dismiss='modal' href='#'>Close</button>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='confirmation-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'></span>
</div>
<div class='modal-body body-content'></div>
<div class='modal-footer'>
<div class='pull-right'>
<button class='btn btn-v2 border' data-dismiss='modal'>Cancel</button>
<button class='btn btn-v2 blue action-button' data-dismiss='modal'></button>
</div>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='message-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'></span>
</div>
<div class='modal-body body-content'></div>
<div class='modal-footer'>
<button class='btn btn-v2 blue action-button' data-dismiss='modal' id='message-modal-close'>Close</button>
</div>

</div>
</div>
</div>

<div class='always-bootstrap3-modals'>
<div class='fade modal quanto-modal-v2' id='join-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header visible-small'>
<span class='title'>
Join Quantopian.  It's Free!
</span>
<div class='modal-x-out visible-xs'></div>
</div>
<div class='modal-body'>
<div class='flex-wrap'>
<div class='join-left-pane hidden-small'>
<div class='margin_30l'>
<div class='join-hero-text'>
Join Quantopian.  It's Free!
</div>
<div class='join-benefits'>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image code'></div>
</div>
<div class='join-text'>
Use our research platform, backtester, and dozens of clean data sets.
</div>
</div>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image learn'></div>
</div>
<div class='join-text'>
Learn with our hands-on education and community forums.
</div>
</div>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image win'></div>
</div>
<div class='join-text'>
Enter to win cash prizes in our contest.
</div>
</div>
</div>
<div class='hidden saved-reminder'>
Don't worry, all your work is already saved.
</div>
</div>
</div>
<div class='join-right-pane'>
<div class='hidden-small'>
<div class='button-pane'>
<a class="button btn-v2 user-form-btn" href="/signin">Already a Quantopian member?</a>
</div>
</div>
<div class='visible-small'>
<div class='already-member'>
<a href='/signin'>Already a Quantopian member?</a>
</div>
</div>
<form class="quanto-form-v2" id="new-user-modal-form" action="/users" accept-charset="UTF-8" data-remote="true" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><div class='error-message hidden'>
<div class='message'></div>
</div>
<div class='name-group'>
<div class='form-group inline-block'>
<label for="user_firstname">First Name</label>
<input class="form-control firstname" pattern=".*" required="required" autocomplete="off" autofocus="autofocus" type="text" name="user[firstname]" id="user_firstname" />
</div>
<div class='form-group inline-block'>
<label for="user_lastname">Last Name</label>
<input class="form-control" value="" pattern=".*" required="required" autocomplete="off" type="text" name="user[lastname]" id="user_lastname" />
</div>
</div>
<div class='form-group'>
<label for="user_email">Email</label>
<input class="form-control" value="" pattern=".*" required="required" autocomplete="off" type="email" name="user[email]" id="user_email" />
</div>
<div class='form-group'>
<label for="user_password">Password</label>
<input autocomplete="off" class="form-control" pattern=".*" required="required" type="password" name="user[password]" id="user_password" />
</div>
<div class='checkbox eula'>
<input id='eula-checkbox' type='checkbox'>
<div class='quanto-checkbox'></div>
<label for='eula-checkbox' id='checkbox-label'>I accept the <a href='/policies/terms' target='_blank'>Terms Of Use</a> and <a href='/policies/privacy' target='_blank'>Privacy Policy</a>.</label>
</div>
<div class='checkbox mailchimp-box'>
<input name="user[allow_marketing_emails]" type="hidden" value="0" /><input type="checkbox" value="1" name="user[allow_marketing_emails]" id="user_allow_marketing_emails" />
<div class='quanto-checkbox'></div>
<label for='user_allow_marketing_emails'>
Send me email updates with the latest news from the Quantopian community. We send these emails about once a month.
</label>
</div>
<div class='button-row'>
<button class='btn-v2 blue full' data-redirect-to='/tutorials/getting-started' id='sign-up-button' type='Submit'>Join Quantopian</button>
</div>
</form></div>
</div>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='feedback-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title'>Contact Support</span>
</div>
<div class='modal-body'>
<form class='anon-user controls quanto-form-v2' id='feedback-form'>
<div class='feedback-inputs'>
<div class='form-group'>
<input autofocus class='form-control' id='feedback-email-box' name='email' placeholder='Email Address' type='email'>
</div>
<div class='form-group'>
<input class='form-control' id='feedback-name-box' placeholder='Name' type='name'>
</div>
<div class='form-group'>
<textarea class='form-control' id='feedback-box' name='feedback' placeholder='What may we help you with?' rows='10'></textarea>
</div>
</div>
</form>
<form class='hidden quanto-form-v2 select-resource-area'>
<div class='select-step select-type-step'>
<div class='form-group'>
<select class='form-control select-resource-dropdown' title='Select the item you need help with'>
<option value='algorithm'>Algorithm</option>
<option value='backtest'>Backtest</option>
<option value='notebook'>Notebook</option>
</select>
</div>
</div>
<div class='select-step loading-area hidden'>
<div class='loading-text'>
Loading...
</div>
</div>
<div class='select-step empty-list-area hidden'>
<div class='back-button'>Go Back</div>
<div class='empty-text'>
No <span class='empty-list-resource-text'>algorithms</span> found
</div>
</div>
<div class='select-algo-area select-step hidden'>
<div class='back-button'>Go Back</div>
<table class='select-algo-table select-item-table'>
<thead>
<tr>
<th>
Algorithm
<span class='sort-icon'></span>
</th>
<th>
Last Modified
<span class='sort-icon'></span>
</th>
</tr>
</thead>
</table>
</div>
<div class='select-backtest-area select-step hidden'>
<div class='back-button'>Go Back</div>
<table class='select-backtest-table select-item-table'>
<thead>
<tr>
<th>
Backtest
<span class='sort-icon'></span>
</th>
<th>
Started At
<span class='sort-icon'></span>
</th>
<th>
Overall Return
<span class='sort-icon'></span>
</th>
<th>
Status
<span class='sort-icon'></span>
</th>
</tr>
</thead>
</table>
</div>
<div class='select-notebook-area select-step hidden'>
<div class='back-button'>Go Back</div>
<div class='subtitle select-cell-step'>
Choose a cell to use as the preview for this notebook:
</div>
<div class='iframe-wrapper'>
<iframe class='notebook-list-iframe slow-fade' src=''></iframe>
</div>
<div class='progress-area slow-fade in'>
<div class='progress-container'>
<div class='progress-title'>
<div class='quanto-loader gray'></div>
</div>
</div>
</div>
<div class='maintenance-area'>
<div class='error-container'>
<div class='row'>
<div class='col-md-14 msg-title h1'>
Sorry, research is currently undergoing maintenance.
</div>
</div>
<div class='row'>
<div class='col-md-14 msg-subtitle'>
Please check back shortly. If the maintenance period lasts longer than expected,
you can find updates on <a href='https://status.quantopian.com/'>status.quantopian.com</a>.
</div>
</div>

</div>
</div>
<div class='error-area'>
<div class='error-container'>
<div class='row'>
<div class='col-md-14 msg-title h1'>
Sorry, something went wrong on our end.
</div>
</div>
<div class='row'>
<div class='col-md-14 msg-subtitle'>
Please try again or contact <a class='open-feedback-link'>Quantopian support</a>.
</div>
</div>

</div>
</div>

</div>
<div class='selected-item-area select-step hidden'>
<div class='selected-item-group form-group'>
<div class='selected-item-control'>
<input class='disabled form-control selected-item-box' type='text'>
<span class='secure-icon icon'></span>
<button class='btn change change-primary-item-button change-selection-button new-btn transparent' type='button'>
<span class='refresh-icon icon'></span>
</button>
</div>
<div class='selected-backtest-control'>
<input class='disabled form-control selected-backtest-box' type='text'>
<span class='secure-icon icon'></span>
<button class='btn change-backtest-button change-selection-button new-btn transparent' type='button'>
<span class='refresh-icon icon'></span>
</button>
</div>
</div>
<div class='checkbox-group form-group'>
<div class='checkbox give-permission'>
<input class='give-permission-checkbox' id='feedback-give-permission-checkbox' type='checkbox'>
<div class='quanto-checkbox'></div>
<label for='feedback-give-permission-checkbox'>
I permit Quantopian to view <span class='item-type-text'>this algorithm,
backtest or notebook and their imported datasets</span> for the purpose of providing support.
</label>
</div>
</div>
</div>
</form>

<div class='loading-step hidden'>
<div class='loading-text'>
Submitting your support ticket...
</div>
</div>
<div class='success-step invisible'>
<h2 class='title center'>
You've successfully submitted a support ticket.
</h2>
<p>
Our support team will be in touch soon.
</p>
<div class='confirmation-image'></div>
</div>
</div>
<div class='modal-footer'>
<button class='btn-v2 blue' id='send-feedback-button'>Send</button>
<div class='error-message hidden'>
Error submitting support request.
</div>
</div>

</div>
</div>
</div>

</div>
</div>
<div class='footer' id='quanto-footer-container'>
<div class='container'>
<div class='row header-row'>
<div class='col-sm-fourth span3'>
<img class='async-image logotype-image' data-src='https://qf.quantopian.com/assets/logos/logo-q-full-b23bda5ac757691b9259d396d0dfef91567165868b8c955a836649686e6d2248.svg'>
</div>
<div class='col-sm-fourth span3'></div>
<div class='col-sm-fourth span3'></div>
<div class='col-sm-fourth span3'>
<div class='feedback-email'>
Need help?
<a href="/cdn-cgi/l/email-protection#c6a0a3a3a2a4a7a5ad86b7b3a7a8b2a9b6afa7a8e8a5a9ab">Contact support.</a>
</div>
</div>
</div>
<div class='row'>
<div class='col-sm-fourth span3'>
<div class='header'>Company</div>
<div class='footer-row'>
<a href='/about'>About</a>
</div>
<div class='footer-row'>
<a href='/academia'>Academia</a>
</div>
<div class='footer-row'>
<a href='/jobs'>Careers</a>
</div>
<div class='footer-row'>
<a href='/posts'>Community</a>
</div>
<div class='footer-row'>
<a href='/events'>Events</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Learn &amp; Support</div>
<div class='footer-row'>
<a href='/faq'>FAQ</a>
</div>
<div class='footer-row'>
<a href='/tutorials/getting-started'>Getting Started</a>
</div>
<div class='footer-row'>
<a href='/docs'>Documentation</a>
</div>
<div class='footer-row'>
<a href='/tutorials'>Tutorials</a>
</div>
<div class='footer-row'>
<a href='/lectures'>Lectures</a>
</div>
<div class='footer-row'>
<a href='/opensource'>Open Source</a>
</div>
<div class='footer-row'>
<a href='https://status.quantopian.com/'>Site Status</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Notices</div>
<div class='footer-row'>
<a href='/policies/terms'>Terms of Use</a>
</div>
<div class='footer-row'>
<a href='/policies/privacy'>Privacy Policy</a>
</div>
<div class='footer-row'>
<a href='/security'>Security</a>
</div>
<div class='footer-row'>
<a href='/policies/code-of-conduct'>Code of Conduct</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Follow Us</div>
<div class='footer-row'>
<a href='https://www.twitter.com/quantopian'>Twitter</a>
</div>
<div class='footer-row'>
<a href='https://www.facebook.com/quantopian'>Facebook</a>
</div>
<div class='footer-row'>
<a href='https://www.linkedin.com/company/quantopian'>LinkedIn</a>
</div>
<div class='footer-row'>
<a href='https://www.youtube.com/channel/UC606MUq45P3zFLa4VGKbxsg'>YouTube</a>
</div>
</div>
</div>
<div class='row'>
<div class='col-xs-14 span12'>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian.
</p>
<p>
In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>

</div>
</div>
</div>
</div>
</div>
<div class='mobile-footer'>
<div class='mobile-nav-category main-links'>
<div class='mobile-nav-row-footer'>
<a href='/about'>About Quantopian</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/jobs'>Careers</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/posts'>Community</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/events'>Events</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/docs'>Documentation</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/academia'>Academia</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/lectures'>Lectures</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://status.quantopian.com/'>Status</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.facebook.com/quantopian'>Facebook</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.twitter.com/quantopian'>Twitter</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.linkedin.com/company/quantopian'>LinkedIn</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.youtube.com/channel/UC606MUq45P3zFLa4VGKbxsg'>YouTube</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/policies/terms'>Terms of Use</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/policies/privacy'>Privacy Policy</a>
</div>
</div>
<div class='mobile-nav-category'>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian.
</p>
<p>
In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>

</div>
</div>
</div>

</div>
<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script></body>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', "UA-8519877-1", {
    cookieDomain: "quantopian.com"
  });
  ga('set', 'dimension1', 'session_5f9dc7425d387f00077e48e4');
  
  ga('send', 'pageview');
</script>

<input type="hidden" name="is_mac" id="is_mac" value="false" />
<input type="hidden" name="mp" id="mp" value="75873953cd404bcc1da88a55ff51e3b4" />
<script>
  (function(e,a){if(!a.__SV){var b=window;try{var c,l,i,j=b.location,g=j.hash;c=function(a,b){return(l=a.match(RegExp(b+"=([^&]*)")))?l[1]:null};g&&c(g,"state")&&(i=JSON.parse(decodeURIComponent(c(g,"state"))),"mpeditor"===i.action&&(b.sessionStorage.setItem("_mpcehash",g),history.replaceState(i.desiredHash||"",e.title,j.pathname+j.search)))}catch(m){}var k,h;window.mixpanel=a;a._i=[];a.init=function(b,c,f){function e(b,a){var c=a.split(".");2==c.length&&(b=b[c[0]],a=c[1]);b[a]=function(){b.push([a].concat(Array.prototype.slice.call(arguments,
  0)))}}var d=a;"undefined"!==typeof f?d=a[f]=[]:f="mixpanel";d.people=d.people||[];d.toString=function(b){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);b||(a+=" (stub)");return a};d.people.toString=function(){return d.toString(1)+".people (stub)"};k="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
  for(h=0;h<k.length;h++)e(d,k[h]);a._i.push([b,c,f])};a.__SV=1.2;b=e.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";c=e.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}})(document,window.mixpanel||[]);
  mixpanel.init("75873953cd404bcc1da88a55ff51e3b4");
</script>
<script>
  mixpanel.track("view page", {"page": window.location.pathname});
</script>
</html>
