<!DOCTYPE html>
<html>
<head>
<link href='i1.wp.com' rel='dns-prefetch'>
<link href='i2.wp.com' rel='dns-prefetch'>
<link href='i3.wp.com' rel='dns-prefetch'>
<meta content='2HgX9mcLHaPOX6sfaaAkhWtblhEB9yUNw4l6l46e1k4' name='google-site-verification'>
<link rel="shortcut icon" type="image/x-icon" href="external/favicon-q-ac1a76f2c200e9026b5b1147519bb4fab6256910588b831e2411bc6c7c1218c3.png" />
<title>
How to calculate the cash available
</title>
<meta content='I&#39;m sure this has been answered somewhere before but I&#39;ve have no luck in finding it. I would like to calculate the number of shares to place a buy order for based on how much cash is available. It seems to keep placing orders based on my starting amount + profits and not whats actually available when using context.portfolio.cash . I tried using context.portfolio.cash + context.portfolio.capital_used and still not the results I&#39;m looking for (keep in mind capital_used is a negative number)....' name='description'>
<link rel="stylesheet" media="all" href="external/quanto-base-bundle-e8eb6050172aa0d24124d5c24bac90b2cccd88b5b9c7742026c0e9efab038c6e.css" />
<link rel="stylesheet" media="all" href="external/quanto-posts-bundle-aab01368d3f82d8dafc94ee9eabb82e77dc8c9fbbffa952fdcdc744dfa523cf3.css" />
<script src="external/quanto_global-057218867db29d5768131af5d6fb3476cef098e7d9e655108befb903c7ee985e.js"></script>
<script src="external/posts_bundle-3dfd82fa469c393d752e461d837aec9e4e364ae39f49198e34a6626f2180fdf7.js"></script>
<link href='external/logo-q-180x180-0f5a6a439c99203ed4aea6f656e7604c543d287be43d8b17c7591c1131f09a59.png' rel='apple-touch-icon'>
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="SiZSWcZwIOmMk5un9lPCrN2J1asiyRhzOVUH82BR3DE2QCQUZIbyCjWOwpa5vGrY5Qf2wlgFDWi7WtyZyhS+ig==" />
<meta content='width=device-width, initial-scale=1.0' name='viewport'>
<script>
//<![CDATA[
window.quanto_data={};quanto_data.bounce_back_params={"show_modal":null,"feedback_text":null};quanto_data.namespace="public";quanto_data.talib_info={"ADOSC":["Chaikin A/D Oscillator (Volume Indicators)",["fastperiod","3"],["slowperiod","10"]],"ADX":["Average Directional Movement Index (Momentum Indicators)",["timeperiod","14"]],"ADXR":["Average Directional Movement Index Rating (Momentum Indicators)",["timeperiod","14"]],"APO":["Absolute Price Oscillator (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["matype","0"]],"AROON":["Aroon (Momentum Indicators)",["timeperiod","14"]],"AROONOSC":["Aroon Oscillator (Momentum Indicators)",["timeperiod","14"]],"ATR":["Average True Range (Volatility Indicators)",["timeperiod","14"]],"BBANDS":["Bollinger Bands (Overlap Studies)",["timeperiod","5"],["nbdevup","2"],["nbdevdn","2"],["matype","0"]],"BETA":["Beta (Statistic Functions)",["timeperiod","5"]],"CCI":["Commodity Channel Index (Momentum Indicators)",["timeperiod","14"]],"CMO":["Chande Momentum Oscillator (Momentum Indicators)",["timeperiod","14"]],"CORREL":["Pearson's Correlation Coefficient (r) (Statistic Functions)",["timeperiod","30"]],"DEMA":["Double Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"DX":["Average Directional Movement Index (Momentum Indicators)",["timeperiod","14"]],"EMA":["Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"KAMA":["Kaufman Adaptive Moving Average (Overlap Studies)",["timeperiod","30"]],"LINEARREG":["Linear Regression (Statistic Functions)",["timeperiod","14"]],"LINEARREG_ANGLE":["Linear Regression Angle (Statistic Functions)",["timeperiod","14"]],"LINEARREG_INTERCEPT":["Linear Regression Intercept (Statistic Functions)",["timeperiod","14"]],"LINEARREG_SLOPE":["Linear Regression Slope (Statistic Functions)",["timeperiod","14"]],"MA":["Moving average (Overlap Studies)",["timeperiod","30"],["matype","0"]],"MACD":["Moving Average Convergence/Divergence (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["signalperiod","9"]],"MACDEXT":["MACD with controllable MA type (Momentum Indicators)",["fastperiod","12"],["fastmatype","0"],["slowperiod","26"],["slowmatype","0"],["signalperiod","9"],["signalmatype","0"]],"MACDFIX":["Moving Average Convergence/Divergence Fix 12/26 (Momentum Indicators)",["signalperiod","9"]],"MAX":["Highest values over a specified period (Math Operators)",["timeperiod","30"]],"MAXINDEX":["Index of highest value over a specified period (Math Operators)",["timeperiod","30"]],"MFI":["Money Flow Index (Momentum Indicators)",["timeperiod","14"]],"MIDPOINT":["Midpoint over period (Overlap Studies)",["timeperiod","14"]],"MIDPRICE":["Midpoint Price over period (Overlap Studies)",["timeperiod","14"]],"MIN":["Lowest value over a specified period (Math Operators)",["timeperiod","30"]],"MININDEX":["Index of lowest value over a specified period (Math Operators)",["timeperiod","30"]],"MINMAX":["Lowest and highest values over a specified period (Math Operators)",["timeperiod","30"]],"MINMAXINDEX":["Indexes of lowest and highest values over a specified period (Math Operators)",["timeperiod","30"]],"MINUS_DI":["Minus Directional Indicator (Momentum Indicators)",["timeperiod","14"]],"MINUS_DM":["Minus Directional Movement (Momentum Indicators)",["timeperiod","14"]],"MOM":["Momentum (Momentum Indicators)",["timeperiod","10"]],"NATR":["Normalized Average True Range (Volatility Indicators)",["timeperiod","14"]],"PLUS_DI":["Plus Directional Indicator (Momentum Indicators)",["timeperiod","14"]],"PLUS_DM":["Plus Directional Movement (Momentum Indicators)",["timeperiod","14"]],"PPO":["Percentage Price Oscillator (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["matype","0"]],"ROC":["Rate of change: ((price/prevPrice)-1)*100 (Momentum Indicators)",["timeperiod","10"]],"ROCP":["Rate of change Percentage: (price-prevPrice)/prevPrice (Momentum Indicators)",["timeperiod","10"]],"ROCR":["Rate of change ratio: (price/prevPrice) (Momentum Indicators)",["timeperiod","10"]],"ROCR100":["Rate of change ratio 100 scale: (price/prevPrice)*100 (Momentum Indicators)",["timeperiod","10"]],"RSI":["Relative Strength Index (Momentum Indicators)",["timeperiod","14"]],"SMA":["Simple Moving Average (Overlap Studies)",["timeperiod","30"]],"STDDEV":["Standard Deviation (Statistic Functions)",["timeperiod","5"],["nbdev","1"]],"STOCH":["Stochastic (Momentum Indicators)",["fastk_period","5"],["slowk_period","3"],["slowk_matype","0"],["slowd_period","3"],["slowd_matype","0"]],"STOCHF":["Stochastic Fast (Momentum Indicators)",["fastk_period","5"],["fastd_period","3"],["fastd_matype","0"]],"STOCHRSI":["Stochastic Relative Strength Index (Momentum Indicators)",["timeperiod","14"],["fastk_period","5"],["fastd_period","3"],["fastd_matype","0"]],"T3":["Triple Exponential Moving Average (T3) (Overlap Studies)",["timeperiod","5"],["vfactor","0.7"]],"TEMA":["Triple Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"TRIMA":["Triangular Moving Average (Overlap Studies)",["timeperiod","30"]],"TRIX":["1-day Rate-Of-Change (ROC) of a Triple Smooth EMA (Momentum Indicators)",["timeperiod","30"]],"TSF":["Time Series Forecast (Statistic Functions)",["timeperiod","14"]],"ULTOSC":["Ultimate Oscillator (Momentum Indicators)",["timeperiod1","7"],["timeperiod2","14"],["timeperiod3","28"]],"VAR":["Variance (Statistic Functions)",["timeperiod","5"],["nbdev","1"]],"WILLR":["Williams' %R (Momentum Indicators)",["timeperiod","14"]],"WMA":["Weighted Moving Average (Overlap Studies)",["timeperiod","30"]]};quanto_data.nb_preview_url="https://notebooks-preview.prd.pub.quantopian.com";quanto_data.delay_nb_preview_load=false;
//]]>
</script>
<meta content='https://www.quantopian.com/posts/how-to-calculate-the-cash-available' property='og:url'>
<meta content='How to calculate the cash available' property='og:title'>

<input type="hidden" name="env" id="quanto-env" value="production" />
<meta content='550580758292093' property='fb:app_id'>
<meta content='https://www.quantopian.com/posts/how-to-calculate-the-cash-available' property='og:url'>
<meta content='https://media.quantopian.com/public/og-image-default.png' property='og:image'>
<meta content='How to calculate the cash available' property='og:title'>
<meta content='I&#39;m sure this has been answered somewhere before but I&#39;ve have no luck in finding it. I would like to calculate the number of shares to place a buy order for based on how much cash is available. It seems to keep placing orders based on my starting amount + profits and not whats actually available when using context.portfolio.cash . I tried using context.portfolio.cash + context.portfolio.capital_used and still not the results I&#39;m looking for (keep in mind capital_used is a negative number)....' property='og:description'>
</head>
<script type='application/ld+json'>
  {
    "@context": "http://schema.org",
    "@type": "Organization",
    "url": "https://www.quantopian.com",
    "logo": "https://media.quantopian.com/logos/logo-q-press-red.png"
  }
</script>
<body class='' ontouchstart=''>
<div id='fb-root'></div>
<div class='wrapper'>
<div class='alert-v2 error'>
<div class='message'>
Quantopian's community platform is shutting down. Please read <a href="/posts/quantopians-community-services-are-closing">this post</a> for more information and <a href='/account#account'>download your code</a>.
</div>
</div>
<div class='navbar navbar-default navbar-static-top' id='app-navbar'>
<div class='container-fluid'>
<div class='navbar-header'>
<button class='navbar-toggle collapsed' data-target='#app-navbar-collapse' data-toggle='collapse'>
<span class='icon hamburger-menu'></span>
</button>
<a class='navbar-brand' href='/home'>
<img class='logo-image async-image' data-src='external/logo-q-white-b141ea6018546e5a4ecc3d10d8440ec076fc4385764e948b322828cc70950a76.svg'>
</a>
</div>
<div class='collapse navbar-collapse' id='app-navbar-collapse'>
<ul class='nav navbar-nav navbar-right'>
<li class='dropdown quanto-dropdown-new'>
<li>
<a class='header' href='/docs'>
Documentation
</a>
</li>
<li class='dropdown quanto-dropdown-new'>
<a class='header' data-toggle='dropdown' href='#'>
Learn
</a>
<ul class='dropdown-menu'>
<li>
<a class='mixpanel-button' data-event='main nav getting started clicked' href='/tutorials/getting-started'>Getting Started</a>
</li>
<li>
<a class='mixpanel-button' data-event='main nav tutorials clicked' href='/tutorials'>Tutorials</a>
</li>
<li>
<a class='mixpanel-button' data-event='main nav lectures clicked' href='/lectures'>Lectures</a>
</li>
</ul>
</li>
<li>
<a class='header' href='/posts' id='forum-link'>
Forum
</a>
</li>
<li>
<a class="header" href="/signin?return_to=/posts/how-to-calculate-the-cash-available">Log In</a>
</li>
</li>

</ul>
</div>
</div>
</div>
<script>
  $(document).ready(function () {
    quanto.instances.fm = new quanto.FeedbackManager();
    quanto.instances.hm = new quanto.headerManager();
  })
</script>


<div class='content content-area new-style'>
<input type="hidden" name="page-id" id="page-id" value="postatomic" />
<script src="external/MathJax.js?config=TeX-AMS_HTML-full.js,Safe" async="async"></script>
<div class='container page-container post-atomic'>
<input id='parent-post-id-val' type='hidden' value='586fee532c2c812c1f7ebeb5'>
<div class='post-container' data-post-id='586fee532c2c812c1f7ebeb5' id='586fee532c2c812c1f7ebeb5'>
<div class='back-button back-to-community'>Back to Community</div>
<div class='post-title'>How to calculate the cash available</div>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/584da0c18ab6f572050000c4'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/48796fcbbbeb695ef822ea241b9c713c?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/584da0c18ab6f572050000c4'>Andy Visser</a>
</div>
<span class='posted-at'>posted </span>
<span UTCms='1483730515000' class='quanto-date posted-at'></span>
<div class='pull-right other-actions'>
<div class='dropup inline-block'>
<div class='dropdown share-control other-action-link'>
<div data-toggle='dropdown'>
<div class='share-image'></div>
Share
</div>
<ul class='dropdown-menu share-options-menu'>
<li>
<a class='share-row' href='https://twitter.com/intent/tweet?text=How to calculate the cash available&amp;url=https%3A%2F%2Fwww.quantopian.com%2Fposts%2Fhow-to-calculate-the-cash-available%3Futm_source%3Dwebsite_share%26utm_campaign%3Dhow-to-calculate-the-cash-available%26utm_medium%3Dtwitter&amp;via=quantopian'>
<i class='icon icon-twitter'></i>
Share on Twitter
</a>
</li>
<li>
<div class='share-row facebook-button'>
<i class='icon icon-facebook'></i>
Share on Facebook
</div>
</li>
<li>
<div class='share-row linkedin-button' data-share-url='https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Fwww.quantopian.com%2Fposts%2Fhow-to-calculate-the-cash-available%3Futm_source%3Dwebsite_share%26utm_campaign%3Dhow-to-calculate-the-cash-available%26utm_medium%3Dlinkedin&amp;title=How+to+calculate+the+cash+available+%28Andy+Visser%29&amp;source=Quantopian'>
<i class='icon icon-linkedin'></i>
Share on LinkedIn
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>

<div class='tags tag-row'>
<a class='tag mixpanel-button' data-event='tag click' data-mixpanel='Seeking Help' data-tag-id='55c50e7d8d4710ec6e000003' href='/posts/tag/Seeking-Help/newest'>Seeking Help</a>
<a class='tag mixpanel-button' data-event='tag click' data-mixpanel='Getting Started' data-tag-id='55c50e7d8d4710ec6e000004' href='/posts/tag/Getting-Started/newest'>Getting Started</a>
</div>
<input type="hidden" name="social_fb_post_link" id="social_fb_post_link" value="https://www.quantopian.com/posts/how-to-calculate-the-cash-available?utm_source=website_share&amp;utm_campaign=how-to-calculate-the-cash-available&amp;utm_medium=facebook" />
<input type="hidden" name="social_post_image" id="social_post_image" value="external/logo-q-red-outline.png" />
<input type="hidden" name="social_post_author" id="social_post_author" value="Andy Visser" />
<div class='body-text'>
<div class='body-text-container post-body'><p>I&#39;m sure this has been answered somewhere before but I&#39;ve have no luck in finding it. I would like to calculate the number of shares to place a buy order for based on how much cash is available. It seems to keep placing orders based on my starting amount + profits and not whats actually available when using context.portfolio.cash . I tried using context.portfolio.cash + context.portfolio.capital_used and still not the results I&#39;m looking for (keep in mind capital_used is a negative number). Excuse me if this seems like a &quot;stupid&quot; question, I&#39;m very new to python and Quantopian. Thanks!  </p>
</div>
</div>
</div>

</div>

<div class='container page-container post-atomic'>
<div class='section-header reply-header'>
<div class='reply-title'>16 responses</div>
</div>
<div class='replies'>
<div class='post-container response-container' data-post-id='5e0f22d67b93aa0043f5334b' id='5e0f22d67b93aa0043f5334b'>
<a href='#5e0f22d67b93aa0043f5334b'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5df5a74c8199e900431efb67'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/6f2c424d8767abea9b6c7971bcb08c77?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5df5a74c8199e900431efb67'>mark maker</a>
</div>
<a UTCms='1578050262000' class='quanto-date posted-at response-posted-at' href='#5e0f22d67b93aa0043f5334b'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Can some one please respond?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5e0f9de890d782004ade69a4' id='5e0f9de890d782004ade69a4'>
<a href='#5e0f9de890d782004ade69a4'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5cb4fc8571ef9572db85c0af'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/a8d078cb83e513809bab0e31eabfa4fc?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5cb4fc8571ef9572db85c0af'>Dan Whitnable</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1578081768000' class='quanto-date posted-at response-posted-at' href='#5e0f9de890d782004ade69a4'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Good question. How much cash do I have? One doesn&#39;t generally need the amount of cash if ordering is done with <code>order_optimal_portfolio</code>. That method takes care of the gritty details. However, if you are calculating the number of shares to order on your own, then the available cash is important to keep leverage under control.</p>

<p>If one doesn&#39;t have any short positions then <code>context.portfolio.cash</code> will be the actual cash in the account. If there is the potential for short positions then the following is a better approach</p>

<pre><code>    actual_cash = context.portfolio.portfolio_value - context.portfolio.positions_value  
    available_cash = max(actual_cash, 0)

</code></pre>

<p>There is the possibility the actual cash could be negative (ie you&#39;ve dipped into margin) so the cash available to open new positions would be only if it&#39;s positive. This of course assumes you are trying to maintain a margin of 0 or less. It get&#39;s a bit more involved if you want to consider margin in your &#39;buying power&#39;. </p>

<p>The other thing this assumes is there are no open orders. If one places orders only once a day then this will be the case. However, if there is the chance of open orders then this available cash needs to be reduced by the anticipated cost of those orders. Again, this is a bit more involved because one needs to guess at what those orders will actually fill at along with calculating the commissions on those orders. If one is placing orders once a day then this isn&#39;t an issue.  </p>
</div>
<div class='disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='5e1002997f78bf0049f9c2a2' id='5e1002997f78bf0049f9c2a2'>
<a href='#5e1002997f78bf0049f9c2a2'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5df5a74c8199e900431efb67'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/6f2c424d8767abea9b6c7971bcb08c77?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5df5a74c8199e900431efb67'>mark maker</a>
</div>
<a UTCms='1578107545000' class='quanto-date posted-at response-posted-at' href='#5e1002997f78bf0049f9c2a2'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thank you for your prompt response. I implanted the code you mentioned, yet the algo is still buying 5x the amount of starting capital that I gave to it. In other words, starting capital is 10,000 (through the input, not through my code); and on day one it is buying up $50k of stock.</p>

<p>I am not familiar with optimal function. I use the standard order because that is transferable to a platform that allows for live trading.</p>

<p>Let me know if you can diagnose with this or if you need more code:<br>
(It does run - no errors) but doesn&#39;t spit out what I was expecting). Perhaps I should also mention that I want to use $500 per company - however many shares that may be ONLY if the portfolio has $500 available. </p>

<p>def order_picks(context,data):  </p>

<pre><code>context.total_cost_per_trade = 500  
actual_cash = (context.portfolio.portfolio_value - context.portfolio.positions_value)  
available_cash = max(actual_cash, 0)  

for stock in context.stocks.index:  
        if available_cash &gt; 500:  
            order_value(stock, 500)  

for stock in context.portfolio.positions.keys():  
    if stock not in context.stocks:  
        if data.can_trade(stock):  
            order_target_percent(stock,0)  
</code></pre>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5e101fa7bbbe1c7c25cdefb4' id='5e101fa7bbbe1c7c25cdefb4'>
<a href='#5e101fa7bbbe1c7c25cdefb4'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5df5a74c8199e900431efb67'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/6f2c424d8767abea9b6c7971bcb08c77?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5df5a74c8199e900431efb67'>mark maker</a>
</div>
<a UTCms='1578114983000' class='quanto-date posted-at response-posted-at' href='#5e101fa7bbbe1c7c25cdefb4'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Ok so I verified that it does buy $500 worth of each company, the problem is that it buys every stock in my pipeline. I am wondering if with the code you provided, because everything is being bought at one time it thinks the funds are still there because they haven&#39;t been technically purchased yet?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5e10b2ae7f78bf5622f9c4fd' id='5e10b2ae7f78bf5622f9c4fd'>
<a href='#5e10b2ae7f78bf5622f9c4fd'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5cb4fc8571ef9572db85c0af'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/a8d078cb83e513809bab0e31eabfa4fc?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5cb4fc8571ef9572db85c0af'>Dan Whitnable</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1578152622000' class='quanto-date posted-at response-posted-at' href='#5e10b2ae7f78bf5622f9c4fd'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>The backtesting framework is a discrete simulation. Events, such as filling orders, happen at discrete minute intervals. So, in the code above, an order is placed for each stock in &#39;context.stocks.index&#39; all at one time. Those orders do not begin to be executed and filled until the next minute. Depending upon the slippage model and liquidity of a security, orders may not be completely filled for many minutes (or sometimes not at all). This is also very typical of how orders would be entered and filled in actual trading.</p>

<p>The code above does not take into account cash that has been &#39;committed&#39; to orders. So, you are correct that the cash is still in the account.</p>

<p>You could maybe just open a fixed number of positions. Something like this</p>

<pre><code>context.total_cost_per_trade = 500  
actual_cash = (context.portfolio.portfolio_value - context.portfolio.positions_value)  
available_cash = max(actual_cash, 0)  

qty_of_positions_to_open = available_cash // context.total_cost_per_trade  
positions_to_open = context.stocks.head(qty_of_positions_to_open).index

for stock in positions_to_open:  
    if data.can_trade(stock):  
        order_value(stock, context.total_cost_per_trade)  

for stock in context.portfolio.positions.keys():  
    if stock not in context.stocks.index:  
        if data.can_trade(stock):  
            order_target_percent(stock,0)  
</code></pre>

<p>You maybe want to be a bit more selective which positions to open. Above simply takes the first ones in the index which is by default sorted by SID. Maybe select the securities based upon some more relevant condition. </p>

<p>Typically algos do not order a fixed dollar amount. The issue is they don&#39;t scale as you backtest over a long period and different portfolio sizes. Ordering as a percent of the portfolio value mitigates some of these issues. One other comment about the code above is how existing holdings are dealt with. The algo will increase the position size of an existing holding. This may be intentional?  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='5e120af37b417a0046c541b9' id='5e120af37b417a0046c541b9'>
<a href='#5e120af37b417a0046c541b9'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5df5a74c8199e900431efb67'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/6f2c424d8767abea9b6c7971bcb08c77?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5df5a74c8199e900431efb67'>mark maker</a>
</div>
<a UTCms='1578240755000' class='quanto-date posted-at response-posted-at' href='#5e120af37b417a0046c541b9'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>from quantopian.pipeline.data.builtin import USEquityPricing<br>
from quantopian.pipeline.factors import RSI<br>
from quantopian.pipeline.factors import SimpleMovingAverage<br>
from quantopian.pipeline.factors import AverageDollarVolume<br>
from quantopian.algorithm import attach_pipeline, pipeline_output<br>
from quantopian.pipeline import Pipeline<br>
import talib<br>
import pandas as pd<br>
import numpy as np<br>
from scipy import stats</p>

<p>def initialize(context):<br>
    pipe = Pipeline()<br>
    attach_pipeline(pipe, name=&#39;my_pipeline&#39;)<br>
    SMA_20 = SimpleMovingAverage(inputs=[USEquityPricing.close], window_length=20)<br>
    price = USEquityPricing.close.latest<br>
    price_above_SMA20 = (price &gt;= SMA_20)<br>
    volume = USEquityPricing.volume.latest<br>
    volume_1m = (volume &gt; 1000000)<br>
    pipe.add(SMA_20, &#39;SMA_20&#39;)<br>
    pipe.set_screen(volume_1m &amp; price_above_SMA20)  </p>

<pre><code>context.SL_Manager = StopLoss_Manager()

schedule_function(order_picks, date_rules.every_day(), time_rules.market_open())  
schedule_function(context.SL_Manager.manage_orders, date_rules.every_day(), time_rules.market_open())
</code></pre>

<p>def before_trading_start(context, data):<br>
    # Access results using the name passed to <code>attach_pipeline</code>.<br>
    results = pipeline_output(&#39;my_pipeline&#39;)<br>
    print(results.head(40))  </p>

<pre><code># Store pipeline results for use by the rest of the algorithm.  
context.stocks = results  
</code></pre>

<p>def order_picks(context,data):  </p>

<pre><code>context.total_cost_per_trade = 500  
actual_cash = (context.portfolio.portfolio_value - context.portfolio.positions_value)  
available_cash = max(actual_cash, 0)  

qty_of_positions_to_open = available_cash // context.total_cost_per_trade  
positions_to_open = context.stocks.head(qty_of_positions_to_open).index

for stock in positions_to_open:  
    if data.can_trade(stock):  
        order_value(stock, context.total_cost_per_trade)  

for stock in context.portfolio.positions.keys():  
    if stock not in context.stocks.index:  
        if data.can_trade(stock):  
            order_target_percent(stock,0)  
</code></pre>

<p>class StopLoss_Manager:<br>
    &quot;&quot;&quot;<br>
    Class to manage to stop-orders for any open position or open (non-stop)-order. This will be done for long- and short-positions.  </p>

<pre><code>Parameters:  
    pct_init (optional),  
    pct_trail (optional),  
    (a detailed description can be found in the set_params function)  

Example Usage:  
    context.SL = StopLoss_Manager(pct_init=0.005, pct_trail=0.03)  
    context.SL.manage_orders(context, data)  
&quot;&quot;&quot;  

def set_params(self, **params):  
    &quot;&quot;&quot;  
    Set values of parameters:  

    pct_init (optional float between 0 and 1):  
        - After opening a new position, this value  
          is the percentage above or below price,  
          where the first stop will be place.  
    pct_trail (optional float between 0 and 1):  
        - For any existing position the price of the stop  
          will be trailed by this percentage.  
    &quot;&quot;&quot;  
    additionals = set(params.keys()).difference(set(self.params.keys()))  
    if len(additionals)&gt;1:  
        log.warn(&#39;Got additional parameter, which will be ignored!&#39;)  
        del params[additionals]  
    self.params.update(params)  

def manage_orders(self, context, data):  
    &quot;&quot;&quot;  
    This will:  
        - identify any open positions and orders with no stop (short and long)  
        - create new stop levels  
        - manage existing stop levels  
        - create StopOrders with appropriate price and amount  
    &quot;&quot;&quot;  
    self._refresh_amounts(context)  

    for sec in self.stops.index:  
        cancel_order(self.stops[&#39;id&#39;][sec])  
        if not data.can_trade(sec): continue  
        if self._np.isnan(self.stops[&#39;price&#39;][sec]):  
            stop = (1-self.params[&#39;pct_init&#39;])*data.current(sec, &#39;close&#39;)  
        else:  
            o = self._np.sign(self.stops[&#39;amount&#39;][sec])  
            new_stop = (1-o*self.params[&#39;pct_trail&#39;])*data.current(sec, &#39;close&#39;)  
            stop = o*max(o*self.stops[&#39;price&#39;][sec], o*new_stop)  

        self.stops.loc[sec, &#39;price&#39;] = stop  
        self.stops.loc[sec, &#39;id&#39;] = order(sec, -self.stops[&#39;amount&#39;][sec], style=StopOrder(stop))  

def __init__(self, **params):  
    &quot;&quot;&quot;  
    Creatin new StopLoss-Manager object.  
    &quot;&quot;&quot;  
    self._import()  
    self.params = {&#39;pct_init&#39;: 0.07, &#39;pct_trail&#39;: 0.07}  
    self.stops = self._pd.DataFrame(columns=[&#39;amount&#39;, &#39;price&#39;, &#39;id&#39;])  
    self.set_params(**params)  

def _refresh_amounts(self, context):  
    &quot;&quot;&quot;  
    Identify open positions and orders.  
    &quot;&quot;&quot;  

    # Reset position amounts  
    self.stops.loc[:, &#39;amount&#39;] = 0.  

    # Get open orders and remember amounts for any order with no defined stop.  
    open_orders = get_open_orders()  
    new_amounts = []  
    for sec in open_orders:  
        for order in open_orders[sec]:  
            if order.stop is None:  
                new_amounts.append((sec, order.amount))  

    # Get amounts from portfolio positions.  
    for sec in context.portfolio.positions:  
        new_amounts.append((sec, context.portfolio.positions[sec].amount))  

    # Sum amounts up.  
    for (sec, amount) in new_amounts:  
        if not sec in self.stops.index:  
            self.stops.loc[sec, &#39;amount&#39;] = amount  
        else:  
            self.stops.loc[sec, &#39;amount&#39;] = +amount  

    # Drop securities, with no position/order any more.  
    drop = self.stops[&#39;amount&#39;] == 0.  
    self.stops.drop(self.stops.index[drop], inplace=True)  

def _import(self):  
    &quot;&quot;&quot;  
    Import of needed packages.  
    &quot;&quot;&quot;  
    import numpy  
    self._np = numpy  

    import pandas  
    self._pd = pandas  
</code></pre>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5e120b5a7b417a0049c541cd' id='5e120b5a7b417a0049c541cd'>
<a href='#5e120b5a7b417a0049c541cd'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5df5a74c8199e900431efb67'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/6f2c424d8767abea9b6c7971bcb08c77?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5df5a74c8199e900431efb67'>mark maker</a>
</div>
<a UTCms='1578240858000' class='quanto-date posted-at response-posted-at' href='#5e120b5a7b417a0049c541cd'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>TypeError: cannot do slice indexing on  with these indexers [200.0] of<br>
There was a runtime error on line 47.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5e148b7bb126df004afcc4ab' id='5e148b7bb126df004afcc4ab'>
<a href='#5e148b7bb126df004afcc4ab'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5df5a74c8199e900431efb67'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/6f2c424d8767abea9b6c7971bcb08c77?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5df5a74c8199e900431efb67'>mark maker</a>
</div>
<a UTCms='1578404731000' class='quanto-date posted-at response-posted-at' href='#5e148b7bb126df004afcc4ab'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>bump  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5e1499d643e4a400453fe6e5' id='5e1499d643e4a400453fe6e5'>
<a href='#5e1499d643e4a400453fe6e5'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5cb4fc8571ef9572db85c0af'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/a8d078cb83e513809bab0e31eabfa4fc?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5cb4fc8571ef9572db85c0af'>Dan Whitnable</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1578408406000' class='quanto-date posted-at response-posted-at' href='#5e1499d643e4a400453fe6e5'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>The error stems from the following lines of code</p>

<pre><code>qty_of_positions_to_open = available_cash // context.total_cost_per_trade  
positions_to_open = context.stocks.head(qty_of_positions_to_open).index

</code></pre>

<p>The variable &#39;qty_of_positions_to_open&#39; can be a real number (eg the value 200.0 which was alluded to in the error message). The pandas method <code>head</code> doesn&#39;t like getting a real number as a parameter, it expects an integer. So, the fix is to coerce &#39;qty_of_positions_to_open&#39; to an integer. Maybe like this</p>

<pre><code>qty_of_positions_to_open = int(available_cash // context.total_cost_per_trade )  
positions_to_open = context.stocks.head(qty_of_positions_to_open).index

</code></pre>

<p>Try that.</p>

<p>Also, it&#39;s helpful if a backtest is attached to a post (rather than pasting the code).  It makes it more convenient for the community to respond.  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='5e14c7a63a409700435bec18' id='5e14c7a63a409700435bec18'>
<a href='#5e14c7a63a409700435bec18'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5df5a74c8199e900431efb67'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/6f2c424d8767abea9b6c7971bcb08c77?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5df5a74c8199e900431efb67'>mark maker</a>
</div>
<a UTCms='1578420134000' class='quanto-date posted-at response-posted-at' href='#5e14c7a63a409700435bec18'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thank you Dan! As always, you are very helpful and knowledgeable.</p>

<p>How do I post a backtest if the code did not run because it had the error?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5e14f32384eb20003d7c8405' id='5e14f32384eb20003d7c8405'>
<a href='#5e14f32384eb20003d7c8405'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5cb4fc8571ef9572db85c0af'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/a8d078cb83e513809bab0e31eabfa4fc?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5cb4fc8571ef9572db85c0af'>Dan Whitnable</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1578431267000' class='quanto-date posted-at response-posted-at' href='#5e14f32384eb20003d7c8405'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>One can generally attach a backtest whether or not it caused an error. Even if the backtest has a status of &#39;exception&#39; you can still attach it. However, if the algo doesn&#39;t even get far enough to create an exception and there is a message like &#39;<em>Something went wrong starting a full backtest.</em>&#39; Then a backtest won&#39;t even be created and therefore cannot be attached. If that&#39;s the case, one can comment out all the code by using triple quotation marks or something similar. Then add the following at the top</p>

<pre><code>def initialize(context):  
    pass  
</code></pre>

<p>All an algo needs to be considered valid is an <code>initialize</code> function. It doesn&#39;t even need any code in it. This way at least the code can be seen and perhaps run simply by removing the comments.</p>

<p>There may be other &#39;tricks&#39; folks may have but that&#39;s what I do. </p>

<p>Good question.  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='5e1504fa232e1a004ad47aa9' id='5e1504fa232e1a004ad47aa9'>
<a href='#5e1504fa232e1a004ad47aa9'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5df5a74c8199e900431efb67'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/6f2c424d8767abea9b6c7971bcb08c77?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5df5a74c8199e900431efb67'>mark maker</a>
</div>
<a UTCms='1578435834000' class='quanto-date posted-at response-posted-at' href='#5e1504fa232e1a004ad47aa9'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>That makes sense. Thank you for that clarification.</p>

<p>I uploaded the back test. Seems like the algo is still buying way more than it should. Did you get that issue as well?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5e15e0e7232e1a0043d48000' id='5e15e0e7232e1a0043d48000'>
<a href='#5e15e0e7232e1a0043d48000'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5cb4fc8571ef9572db85c0af'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/a8d078cb83e513809bab0e31eabfa4fc?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5cb4fc8571ef9572db85c0af'>Dan Whitnable</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1578492135000' class='quanto-date posted-at response-posted-at' href='#5e15e0e7232e1a0043d48000'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Is there something in particular you are seeing which makes you feel the algo is &#39;buying way more than it should&#39;? I added some record statements to show the available cash and quantity of positions to the algo above. It shows the available cash at the end of each day is positive. The algo doesn&#39;t seem to be ordering more than the available cash.</p>

<p>Typically one ensures an algo has ordering under control by looking at leverage. The daily leverage can be seen graphically on the backtest page by clicking on the &#39;Risk&#39; tab and then the &#39;Leverage&#39; tab. Leverage is actually a bit low in this algo (under .6 at times) which would imply &#39;buying less than it should&#39;. Part of the reason for this is the unfilled orders. Looking at the logs, there are quite a few orders which are unfilled at the end of the day. This is often due to trading low liquidity stocks. The other reason for the low leverage is rounding down when placing orders. The logic tries to keep a $500 position in each stock. However, the <code>order_target_value</code> method can only order integer quantities of shares and will not order more than $500. The effect of this is to leave a little bit of available cash in one&#39;s account for each position.  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='5e15fe55a8a1b00042798b4a' id='5e15fe55a8a1b00042798b4a'>
<a href='#5e15fe55a8a1b00042798b4a'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5df5a74c8199e900431efb67'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/6f2c424d8767abea9b6c7971bcb08c77?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5df5a74c8199e900431efb67'>mark maker</a>
</div>
<a UTCms='1578499669000' class='quanto-date posted-at response-posted-at' href='#5e15fe55a8a1b00042798b4a'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Do you know if I am able to export the transactions (buy/sell) to excel?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5e1647b257e8a20049735478' id='5e1647b257e8a20049735478'>
<a href='#5e1647b257e8a20049735478'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5cb4fc8571ef9572db85c0af'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/a8d078cb83e513809bab0e31eabfa4fc?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5cb4fc8571ef9572db85c0af'>Dan Whitnable</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1578518450000' class='quanto-date posted-at response-posted-at' href='#5e1647b257e8a20049735478'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Like most data on Quantopian you can manipulate and view the transactions in a notebook but one cannot export them. If you have the backtest ID then something like this in a notebook will fetch a dataframe with all the transactions. You could also get the orders and/or the end of day holdings in a similar fashion.</p>

<pre><code># Put your own backtest ID below  
my_backtest_id = &#39;5d8ba9ba268a4c29d22e265c&#39;  
bt = get_backtest(my_backtest_id)  
my_transactions = bt. pyfolio_transactions

display(my_transactions)

</code></pre>

<p>You can then use python or pandas methods to sort and filter the list. There is a little more info on how to do this in this post <a href="https://www.quantopian.com/posts/python-help-1">https://www.quantopian.com/posts/python-help-1</a> . Additionally, look at the docs for other data which can be fetched from the backtest object <a href="https://www.quantopian.com/docs/api-reference/research-api-reference#quantopian.research.AlgorithmResult">https://www.quantopian.com/docs/api-reference/research-api-reference#quantopian.research.AlgorithmResult</a> (it&#39;s a long list so scroll down to find info on <code>transactions</code> and <code>orders</code>.  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='5e175c5b6fbc2c004758e249' id='5e175c5b6fbc2c004758e249'>
<a href='#5e175c5b6fbc2c004758e249'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5df5a74c8199e900431efb67'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/6f2c424d8767abea9b6c7971bcb08c77?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5df5a74c8199e900431efb67'>mark maker</a>
</div>
<a UTCms='1578589275000' class='quanto-date posted-at response-posted-at' href='#5e175c5b6fbc2c004758e249'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Your a great asset to this community. Thank you Dan  </p>
</div>
</div>
</div>

</div>
<div class='sign-in-please'>
Please <a href='/signin?return_to=/posts/how-to-calculate-the-cash-available'>sign in</a> or
<a href='/users/sign_up?redirect_to=/posts/how-to-calculate-the-cash-available'>join Quantopian</a> to
post a reply.
</div>
</div>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId: "550580758292093",
      status: false,
      cookie: true,
      xfbml: true
    });
  };
  
  (function(d, debug){
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) {return;}
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
    ref.parentNode.insertBefore(js, ref);
  }(document, /*debug*/ false));
  
  window.twttr = (function (d,s,id) {
    var t, js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return; js=d.createElement(s); js.id=id;
    js.src="//platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs);
    return window.twttr || (t = { _e: [], ready: function(f){ t._e.push(f) } });
  }(document, "script", "twitter-wjs"));
</script>
<script>
  $(document).ready(function () {
    quanto.instances.pm = new quanto.PostManager(false)
  });
</script>

<div class='login-footer'>
<div class='container'>
<div class='login-footer-text'>
Become an expert in quant finance through Quantopian's hands-on education.
</div>
<div class='login-footer-button'>
<button class='btn btn-v2 stroke join-modal-link mixpanel-button' data-event='anon join footer click posts' data-mixpanel='click'>
Join Now
</button>
</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='error-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'>Error</span>
</div>
<div class='modal-body body-content'>
<p>Sorry, something went wrong.  Try again or contact us by <a class='feedback-link'>sending feedback</a>.</p>
</div>
<div class='modal-footer'>
<button class='btn btn-v2 blue action-button' data-dismiss='modal' href='#'>Close</button>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='confirmation-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'></span>
</div>
<div class='modal-body body-content'></div>
<div class='modal-footer'>
<div class='pull-right'>
<button class='btn btn-v2 border' data-dismiss='modal'>Cancel</button>
<button class='btn btn-v2 blue action-button' data-dismiss='modal'></button>
</div>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='message-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'></span>
</div>
<div class='modal-body body-content'></div>
<div class='modal-footer'>
<button class='btn btn-v2 blue action-button' data-dismiss='modal' id='message-modal-close'>Close</button>
</div>

</div>
</div>
</div>

<div class='always-bootstrap3-modals'>
<div class='fade modal quanto-modal-v2' id='join-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header visible-small'>
<span class='title'>
Join Quantopian.  It's Free!
</span>
<div class='modal-x-out visible-xs'></div>
</div>
<div class='modal-body'>
<div class='flex-wrap'>
<div class='join-left-pane hidden-small'>
<div class='margin_30l'>
<div class='join-hero-text'>
Join Quantopian.  It's Free!
</div>
<div class='join-benefits'>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image code'></div>
</div>
<div class='join-text'>
Use our research platform, backtester, and dozens of clean data sets.
</div>
</div>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image learn'></div>
</div>
<div class='join-text'>
Learn with our hands-on education and community forums.
</div>
</div>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image win'></div>
</div>
<div class='join-text'>
Enter to win cash prizes in our contest.
</div>
</div>
</div>
<div class='hidden saved-reminder'>
Don't worry, all your work is already saved.
</div>
</div>
</div>
<div class='join-right-pane'>
<div class='hidden-small'>
<div class='button-pane'>
<a class="button btn-v2 user-form-btn" href="/signin">Already a Quantopian member?</a>
</div>
</div>
<div class='visible-small'>
<div class='already-member'>
<a href='/signin'>Already a Quantopian member?</a>
</div>
</div>
<form class="quanto-form-v2" id="new-user-modal-form" action="/users" accept-charset="UTF-8" data-remote="true" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><div class='error-message hidden'>
<div class='message'></div>
</div>
<div class='name-group'>
<div class='form-group inline-block'>
<label for="user_firstname">First Name</label>
<input class="form-control firstname" pattern=".*" required="required" autocomplete="off" autofocus="autofocus" type="text" name="user[firstname]" id="user_firstname" />
</div>
<div class='form-group inline-block'>
<label for="user_lastname">Last Name</label>
<input class="form-control" value="" pattern=".*" required="required" autocomplete="off" type="text" name="user[lastname]" id="user_lastname" />
</div>
</div>
<div class='form-group'>
<label for="user_email">Email</label>
<input class="form-control" value="" pattern=".*" required="required" autocomplete="off" type="email" name="user[email]" id="user_email" />
</div>
<div class='form-group'>
<label for="user_password">Password</label>
<input autocomplete="off" class="form-control" pattern=".*" required="required" type="password" name="user[password]" id="user_password" />
</div>
<div class='checkbox eula'>
<input id='eula-checkbox' type='checkbox'>
<div class='quanto-checkbox'></div>
<label for='eula-checkbox' id='checkbox-label'>I accept the <a href='/policies/terms' target='_blank'>Terms Of Use</a> and <a href='/policies/privacy' target='_blank'>Privacy Policy</a>.</label>
</div>
<div class='checkbox mailchimp-box'>
<input name="user[allow_marketing_emails]" type="hidden" value="0" /><input type="checkbox" value="1" name="user[allow_marketing_emails]" id="user_allow_marketing_emails" />
<div class='quanto-checkbox'></div>
<label for='user_allow_marketing_emails'>
Send me email updates with the latest news from the Quantopian community. We send these emails about once a month.
</label>
</div>
<div class='button-row'>
<button class='btn-v2 blue full' data-redirect-to='/tutorials/getting-started' id='sign-up-button' type='Submit'>Join Quantopian</button>
</div>
</form></div>
</div>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='feedback-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title'>Contact Support</span>
</div>
<div class='modal-body'>
<form class='anon-user controls quanto-form-v2' id='feedback-form'>
<div class='feedback-inputs'>
<div class='form-group'>
<input autofocus class='form-control' id='feedback-email-box' name='email' placeholder='Email Address' type='email'>
</div>
<div class='form-group'>
<input class='form-control' id='feedback-name-box' placeholder='Name' type='name'>
</div>
<div class='form-group'>
<textarea class='form-control' id='feedback-box' name='feedback' placeholder='What may we help you with?' rows='10'></textarea>
</div>
</div>
</form>
<form class='hidden quanto-form-v2 select-resource-area'>
<div class='select-step select-type-step'>
<div class='form-group'>
<select class='form-control select-resource-dropdown' title='Select the item you need help with'>
<option value='algorithm'>Algorithm</option>
<option value='backtest'>Backtest</option>
<option value='notebook'>Notebook</option>
</select>
</div>
</div>
<div class='select-step loading-area hidden'>
<div class='loading-text'>
Loading...
</div>
</div>
<div class='select-step empty-list-area hidden'>
<div class='back-button'>Go Back</div>
<div class='empty-text'>
No <span class='empty-list-resource-text'>algorithms</span> found
</div>
</div>
<div class='select-algo-area select-step hidden'>
<div class='back-button'>Go Back</div>
<table class='select-algo-table select-item-table'>
<thead>
<tr>
<th>
Algorithm
<span class='sort-icon'></span>
</th>
<th>
Last Modified
<span class='sort-icon'></span>
</th>
</tr>
</thead>
</table>
</div>
<div class='select-backtest-area select-step hidden'>
<div class='back-button'>Go Back</div>
<table class='select-backtest-table select-item-table'>
<thead>
<tr>
<th>
Backtest
<span class='sort-icon'></span>
</th>
<th>
Started At
<span class='sort-icon'></span>
</th>
<th>
Overall Return
<span class='sort-icon'></span>
</th>
<th>
Status
<span class='sort-icon'></span>
</th>
</tr>
</thead>
</table>
</div>
<div class='select-notebook-area select-step hidden'>
<div class='back-button'>Go Back</div>
<div class='subtitle select-cell-step'>
Choose a cell to use as the preview for this notebook:
</div>
<div class='iframe-wrapper'>
<iframe class='notebook-list-iframe slow-fade' src=''></iframe>
</div>
<div class='progress-area slow-fade in'>
<div class='progress-container'>
<div class='progress-title'>
<div class='quanto-loader gray'></div>
</div>
</div>
</div>
<div class='maintenance-area'>
<div class='error-container'>
<div class='row'>
<div class='col-md-14 msg-title h1'>
Sorry, research is currently undergoing maintenance.
</div>
</div>
<div class='row'>
<div class='col-md-14 msg-subtitle'>
Please check back shortly. If the maintenance period lasts longer than expected,
you can find updates on <a href='https://status.quantopian.com/'>status.quantopian.com</a>.
</div>
</div>

</div>
</div>
<div class='error-area'>
<div class='error-container'>
<div class='row'>
<div class='col-md-14 msg-title h1'>
Sorry, something went wrong on our end.
</div>
</div>
<div class='row'>
<div class='col-md-14 msg-subtitle'>
Please try again or contact <a class='open-feedback-link'>Quantopian support</a>.
</div>
</div>

</div>
</div>

</div>
<div class='selected-item-area select-step hidden'>
<div class='selected-item-group form-group'>
<div class='selected-item-control'>
<input class='disabled form-control selected-item-box' type='text'>
<span class='secure-icon icon'></span>
<button class='btn change change-primary-item-button change-selection-button new-btn transparent' type='button'>
<span class='refresh-icon icon'></span>
</button>
</div>
<div class='selected-backtest-control'>
<input class='disabled form-control selected-backtest-box' type='text'>
<span class='secure-icon icon'></span>
<button class='btn change-backtest-button change-selection-button new-btn transparent' type='button'>
<span class='refresh-icon icon'></span>
</button>
</div>
</div>
<div class='checkbox-group form-group'>
<div class='checkbox give-permission'>
<input class='give-permission-checkbox' id='feedback-give-permission-checkbox' type='checkbox'>
<div class='quanto-checkbox'></div>
<label for='feedback-give-permission-checkbox'>
I permit Quantopian to view <span class='item-type-text'>this algorithm,
backtest or notebook and their imported datasets</span> for the purpose of providing support.
</label>
</div>
</div>
</div>
</form>

<div class='loading-step hidden'>
<div class='loading-text'>
Submitting your support ticket...
</div>
</div>
<div class='success-step invisible'>
<h2 class='title center'>
You've successfully submitted a support ticket.
</h2>
<p>
Our support team will be in touch soon.
</p>
<div class='confirmation-image'></div>
</div>
</div>
<div class='modal-footer'>
<button class='btn-v2 blue' id='send-feedback-button'>Send</button>
<div class='error-message hidden'>
Error submitting support request.
</div>
</div>

</div>
</div>
</div>

</div>
</div>
<div class='footer' id='quanto-footer-container'>
<div class='container'>
<div class='row header-row'>
<div class='col-sm-fourth span3'>
<img class='async-image logotype-image' data-src='https://qf.quantopian.com/assets/logos/logo-q-full-b23bda5ac757691b9259d396d0dfef91567165868b8c955a836649686e6d2248.svg'>
</div>
<div class='col-sm-fourth span3'></div>
<div class='col-sm-fourth span3'></div>
<div class='col-sm-fourth span3'>
<div class='feedback-email'>
Need help?
<a href="/cdn-cgi/l/email-protection#d9bfbcbcbdbbb8bab299a8acb8b7adb6a9b0b8b7f7bab6b4">Contact support.</a>
</div>
</div>
</div>
<div class='row'>
<div class='col-sm-fourth span3'>
<div class='header'>Company</div>
<div class='footer-row'>
<a href='/about'>About</a>
</div>
<div class='footer-row'>
<a href='/academia'>Academia</a>
</div>
<div class='footer-row'>
<a href='/jobs'>Careers</a>
</div>
<div class='footer-row'>
<a href='/posts'>Community</a>
</div>
<div class='footer-row'>
<a href='/events'>Events</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Learn &amp; Support</div>
<div class='footer-row'>
<a href='/faq'>FAQ</a>
</div>
<div class='footer-row'>
<a href='/tutorials/getting-started'>Getting Started</a>
</div>
<div class='footer-row'>
<a href='/docs'>Documentation</a>
</div>
<div class='footer-row'>
<a href='/tutorials'>Tutorials</a>
</div>
<div class='footer-row'>
<a href='/lectures'>Lectures</a>
</div>
<div class='footer-row'>
<a href='/opensource'>Open Source</a>
</div>
<div class='footer-row'>
<a href='https://status.quantopian.com/'>Site Status</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Notices</div>
<div class='footer-row'>
<a href='/policies/terms'>Terms of Use</a>
</div>
<div class='footer-row'>
<a href='/policies/privacy'>Privacy Policy</a>
</div>
<div class='footer-row'>
<a href='/security'>Security</a>
</div>
<div class='footer-row'>
<a href='/policies/code-of-conduct'>Code of Conduct</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Follow Us</div>
<div class='footer-row'>
<a href='https://www.twitter.com/quantopian'>Twitter</a>
</div>
<div class='footer-row'>
<a href='https://www.facebook.com/quantopian'>Facebook</a>
</div>
<div class='footer-row'>
<a href='https://www.linkedin.com/company/quantopian'>LinkedIn</a>
</div>
<div class='footer-row'>
<a href='https://www.youtube.com/channel/UC606MUq45P3zFLa4VGKbxsg'>YouTube</a>
</div>
</div>
</div>
<div class='row'>
<div class='col-xs-14 span12'>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian.
</p>
<p>
In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>

</div>
</div>
</div>
</div>
</div>
<div class='mobile-footer'>
<div class='mobile-nav-category main-links'>
<div class='mobile-nav-row-footer'>
<a href='/about'>About Quantopian</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/jobs'>Careers</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/posts'>Community</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/events'>Events</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/docs'>Documentation</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/academia'>Academia</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/lectures'>Lectures</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://status.quantopian.com/'>Status</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.facebook.com/quantopian'>Facebook</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.twitter.com/quantopian'>Twitter</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.linkedin.com/company/quantopian'>LinkedIn</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.youtube.com/channel/UC606MUq45P3zFLa4VGKbxsg'>YouTube</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/policies/terms'>Terms of Use</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/policies/privacy'>Privacy Policy</a>
</div>
</div>
<div class='mobile-nav-category'>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian.
</p>
<p>
In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>

</div>
</div>
</div>

</div>
<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script></body>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', "UA-8519877-1", {
    cookieDomain: "quantopian.com"
  });
  ga('set', 'dimension1', 'session_5f9dc7425d387f00077e48e4');
  
  ga('send', 'pageview');
</script>

<input type="hidden" name="is_mac" id="is_mac" value="false" />
<input type="hidden" name="mp" id="mp" value="75873953cd404bcc1da88a55ff51e3b4" />
<script>
  (function(e,a){if(!a.__SV){var b=window;try{var c,l,i,j=b.location,g=j.hash;c=function(a,b){return(l=a.match(RegExp(b+"=([^&]*)")))?l[1]:null};g&&c(g,"state")&&(i=JSON.parse(decodeURIComponent(c(g,"state"))),"mpeditor"===i.action&&(b.sessionStorage.setItem("_mpcehash",g),history.replaceState(i.desiredHash||"",e.title,j.pathname+j.search)))}catch(m){}var k,h;window.mixpanel=a;a._i=[];a.init=function(b,c,f){function e(b,a){var c=a.split(".");2==c.length&&(b=b[c[0]],a=c[1]);b[a]=function(){b.push([a].concat(Array.prototype.slice.call(arguments,
  0)))}}var d=a;"undefined"!==typeof f?d=a[f]=[]:f="mixpanel";d.people=d.people||[];d.toString=function(b){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);b||(a+=" (stub)");return a};d.people.toString=function(){return d.toString(1)+".people (stub)"};k="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
  for(h=0;h<k.length;h++)e(d,k[h]);a._i.push([b,c,f])};a.__SV=1.2;b=e.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";c=e.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}})(document,window.mixpanel||[]);
  mixpanel.init("75873953cd404bcc1da88a55ff51e3b4");
</script>
<script>
  mixpanel.track("view page", {"page": window.location.pathname});
</script>
</html>
