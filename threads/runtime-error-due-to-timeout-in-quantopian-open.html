<!DOCTYPE html>
<html>
<head>
<link href='i1.wp.com' rel='dns-prefetch'>
<link href='i2.wp.com' rel='dns-prefetch'>
<link href='i3.wp.com' rel='dns-prefetch'>
<meta content='2HgX9mcLHaPOX6sfaaAkhWtblhEB9yUNw4l6l46e1k4' name='google-site-verification'>
<link rel="shortcut icon" type="image/x-icon" href="external/favicon-q-ac1a76f2c200e9026b5b1147519bb4fab6256910588b831e2411bc6c7c1218c3.png" />
<title>
Runtime error due to timeout in Quantopian Open
</title>
<meta content='All my three algorithms running in the April&#39;s Quantopian Open have been excluded from the contest due to a runtime error. The algos are actually the same running with different parameters, in all three cases the error happens on the same line and is aTimeoutException: Too much time spent in handle_data call.The code where the algorithm ran into the exception is the middle line of      closes = history(_tail, _frequency, &quot;price&quot;)      highs = history(_tail, _frequency, &quot;high&quot;)      lows =...' name='description'>
<link rel="stylesheet" media="all" href="external/quanto-base-bundle-e8eb6050172aa0d24124d5c24bac90b2cccd88b5b9c7742026c0e9efab038c6e.css" />
<link rel="stylesheet" media="all" href="external/quanto-posts-bundle-aab01368d3f82d8dafc94ee9eabb82e77dc8c9fbbffa952fdcdc744dfa523cf3.css" />
<script src="external/quanto_global-057218867db29d5768131af5d6fb3476cef098e7d9e655108befb903c7ee985e.js"></script>
<script src="external/posts_bundle-3dfd82fa469c393d752e461d837aec9e4e364ae39f49198e34a6626f2180fdf7.js"></script>
<link href='external/logo-q-180x180-0f5a6a439c99203ed4aea6f656e7604c543d287be43d8b17c7591c1131f09a59.png' rel='apple-touch-icon'>
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="n9vhIJdEVuUuxGWBImUctr3mGZdO3obHYuNCBoHbc6TjvZdtNbKEBpfZPLBtirTChWg6/jQSk9zg7JlsK54RHw==" />
<meta content='width=device-width, initial-scale=1.0' name='viewport'>
<script>
//<![CDATA[
window.quanto_data={};quanto_data.bounce_back_params={"show_modal":null,"feedback_text":null};quanto_data.namespace="public";quanto_data.talib_info={"ADOSC":["Chaikin A/D Oscillator (Volume Indicators)",["fastperiod","3"],["slowperiod","10"]],"ADX":["Average Directional Movement Index (Momentum Indicators)",["timeperiod","14"]],"ADXR":["Average Directional Movement Index Rating (Momentum Indicators)",["timeperiod","14"]],"APO":["Absolute Price Oscillator (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["matype","0"]],"AROON":["Aroon (Momentum Indicators)",["timeperiod","14"]],"AROONOSC":["Aroon Oscillator (Momentum Indicators)",["timeperiod","14"]],"ATR":["Average True Range (Volatility Indicators)",["timeperiod","14"]],"BBANDS":["Bollinger Bands (Overlap Studies)",["timeperiod","5"],["nbdevup","2"],["nbdevdn","2"],["matype","0"]],"BETA":["Beta (Statistic Functions)",["timeperiod","5"]],"CCI":["Commodity Channel Index (Momentum Indicators)",["timeperiod","14"]],"CMO":["Chande Momentum Oscillator (Momentum Indicators)",["timeperiod","14"]],"CORREL":["Pearson's Correlation Coefficient (r) (Statistic Functions)",["timeperiod","30"]],"DEMA":["Double Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"DX":["Average Directional Movement Index (Momentum Indicators)",["timeperiod","14"]],"EMA":["Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"KAMA":["Kaufman Adaptive Moving Average (Overlap Studies)",["timeperiod","30"]],"LINEARREG":["Linear Regression (Statistic Functions)",["timeperiod","14"]],"LINEARREG_ANGLE":["Linear Regression Angle (Statistic Functions)",["timeperiod","14"]],"LINEARREG_INTERCEPT":["Linear Regression Intercept (Statistic Functions)",["timeperiod","14"]],"LINEARREG_SLOPE":["Linear Regression Slope (Statistic Functions)",["timeperiod","14"]],"MA":["Moving average (Overlap Studies)",["timeperiod","30"],["matype","0"]],"MACD":["Moving Average Convergence/Divergence (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["signalperiod","9"]],"MACDEXT":["MACD with controllable MA type (Momentum Indicators)",["fastperiod","12"],["fastmatype","0"],["slowperiod","26"],["slowmatype","0"],["signalperiod","9"],["signalmatype","0"]],"MACDFIX":["Moving Average Convergence/Divergence Fix 12/26 (Momentum Indicators)",["signalperiod","9"]],"MAX":["Highest values over a specified period (Math Operators)",["timeperiod","30"]],"MAXINDEX":["Index of highest value over a specified period (Math Operators)",["timeperiod","30"]],"MFI":["Money Flow Index (Momentum Indicators)",["timeperiod","14"]],"MIDPOINT":["Midpoint over period (Overlap Studies)",["timeperiod","14"]],"MIDPRICE":["Midpoint Price over period (Overlap Studies)",["timeperiod","14"]],"MIN":["Lowest value over a specified period (Math Operators)",["timeperiod","30"]],"MININDEX":["Index of lowest value over a specified period (Math Operators)",["timeperiod","30"]],"MINMAX":["Lowest and highest values over a specified period (Math Operators)",["timeperiod","30"]],"MINMAXINDEX":["Indexes of lowest and highest values over a specified period (Math Operators)",["timeperiod","30"]],"MINUS_DI":["Minus Directional Indicator (Momentum Indicators)",["timeperiod","14"]],"MINUS_DM":["Minus Directional Movement (Momentum Indicators)",["timeperiod","14"]],"MOM":["Momentum (Momentum Indicators)",["timeperiod","10"]],"NATR":["Normalized Average True Range (Volatility Indicators)",["timeperiod","14"]],"PLUS_DI":["Plus Directional Indicator (Momentum Indicators)",["timeperiod","14"]],"PLUS_DM":["Plus Directional Movement (Momentum Indicators)",["timeperiod","14"]],"PPO":["Percentage Price Oscillator (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["matype","0"]],"ROC":["Rate of change: ((price/prevPrice)-1)*100 (Momentum Indicators)",["timeperiod","10"]],"ROCP":["Rate of change Percentage: (price-prevPrice)/prevPrice (Momentum Indicators)",["timeperiod","10"]],"ROCR":["Rate of change ratio: (price/prevPrice) (Momentum Indicators)",["timeperiod","10"]],"ROCR100":["Rate of change ratio 100 scale: (price/prevPrice)*100 (Momentum Indicators)",["timeperiod","10"]],"RSI":["Relative Strength Index (Momentum Indicators)",["timeperiod","14"]],"SMA":["Simple Moving Average (Overlap Studies)",["timeperiod","30"]],"STDDEV":["Standard Deviation (Statistic Functions)",["timeperiod","5"],["nbdev","1"]],"STOCH":["Stochastic (Momentum Indicators)",["fastk_period","5"],["slowk_period","3"],["slowk_matype","0"],["slowd_period","3"],["slowd_matype","0"]],"STOCHF":["Stochastic Fast (Momentum Indicators)",["fastk_period","5"],["fastd_period","3"],["fastd_matype","0"]],"STOCHRSI":["Stochastic Relative Strength Index (Momentum Indicators)",["timeperiod","14"],["fastk_period","5"],["fastd_period","3"],["fastd_matype","0"]],"T3":["Triple Exponential Moving Average (T3) (Overlap Studies)",["timeperiod","5"],["vfactor","0.7"]],"TEMA":["Triple Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"TRIMA":["Triangular Moving Average (Overlap Studies)",["timeperiod","30"]],"TRIX":["1-day Rate-Of-Change (ROC) of a Triple Smooth EMA (Momentum Indicators)",["timeperiod","30"]],"TSF":["Time Series Forecast (Statistic Functions)",["timeperiod","14"]],"ULTOSC":["Ultimate Oscillator (Momentum Indicators)",["timeperiod1","7"],["timeperiod2","14"],["timeperiod3","28"]],"VAR":["Variance (Statistic Functions)",["timeperiod","5"],["nbdev","1"]],"WILLR":["Williams' %R (Momentum Indicators)",["timeperiod","14"]],"WMA":["Weighted Moving Average (Overlap Studies)",["timeperiod","30"]]};quanto_data.nb_preview_url="https://notebooks-preview.prd.pub.quantopian.com";quanto_data.delay_nb_preview_load=false;
//]]>
</script>
<meta content='https://www.quantopian.com/posts/runtime-error-due-to-timeout-in-quantopian-open' property='og:url'>
<meta content='Runtime error due to timeout in Quantopian Open' property='og:title'>

<input type="hidden" name="env" id="quanto-env" value="production" />
<meta content='550580758292093' property='fb:app_id'>
<meta content='https://www.quantopian.com/posts/runtime-error-due-to-timeout-in-quantopian-open' property='og:url'>
<meta content='https://media.quantopian.com/public/og-image-default.png' property='og:image'>
<meta content='Runtime error due to timeout in Quantopian Open' property='og:title'>
<meta content='All my three algorithms running in the April&#39;s Quantopian Open have been excluded from the contest due to a runtime error. The algos are actually the same running with different parameters, in all three cases the error happens on the same line and is aTimeoutException: Too much time spent in handle_data call.The code where the algorithm ran into the exception is the middle line of      closes = history(_tail, _frequency, &quot;price&quot;)      highs = history(_tail, _frequency, &quot;high&quot;)      lows =...' property='og:description'>
</head>
<script type='application/ld+json'>
  {
    "@context": "http://schema.org",
    "@type": "Organization",
    "url": "https://www.quantopian.com",
    "logo": "https://media.quantopian.com/logos/logo-q-press-red.png"
  }
</script>
<body class='' ontouchstart=''>
<div id='fb-root'></div>
<div class='wrapper'>
<div class='alert-v2 error'>
<div class='message'>
Quantopian's community platform is shutting down. Please read <a href="/posts/quantopians-community-services-are-closing">this post</a> for more information and <a href='/account#account'>download your code</a>.
</div>
</div>
<div class='navbar navbar-default navbar-static-top' id='app-navbar'>
<div class='container-fluid'>
<div class='navbar-header'>
<button class='navbar-toggle collapsed' data-target='#app-navbar-collapse' data-toggle='collapse'>
<span class='icon hamburger-menu'></span>
</button>
<a class='navbar-brand' href='/home'>
<img class='logo-image async-image' data-src='external/logo-q-white-b141ea6018546e5a4ecc3d10d8440ec076fc4385764e948b322828cc70950a76.svg'>
</a>
</div>
<div class='collapse navbar-collapse' id='app-navbar-collapse'>
<ul class='nav navbar-nav navbar-right'>
<li class='dropdown quanto-dropdown-new'>
<li>
<a class='header' href='/docs'>
Documentation
</a>
</li>
<li class='dropdown quanto-dropdown-new'>
<a class='header' data-toggle='dropdown' href='#'>
Learn
</a>
<ul class='dropdown-menu'>
<li>
<a class='mixpanel-button' data-event='main nav getting started clicked' href='/tutorials/getting-started'>Getting Started</a>
</li>
<li>
<a class='mixpanel-button' data-event='main nav tutorials clicked' href='/tutorials'>Tutorials</a>
</li>
<li>
<a class='mixpanel-button' data-event='main nav lectures clicked' href='/lectures'>Lectures</a>
</li>
</ul>
</li>
<li>
<a class='header' href='/posts' id='forum-link'>
Forum
</a>
</li>
<li>
<a class="header" href="/signin?return_to=/posts/runtime-error-due-to-timeout-in-quantopian-open">Log In</a>
</li>
</li>

</ul>
</div>
</div>
</div>
<script>
  $(document).ready(function () {
    quanto.instances.fm = new quanto.FeedbackManager();
    quanto.instances.hm = new quanto.headerManager();
  })
</script>


<div class='content content-area new-style'>
<input type="hidden" name="page-id" id="page-id" value="postatomic" />
<script src="external/MathJax.js?config=TeX-AMS_HTML-full.js,Safe" async="async"></script>
<div class='container page-container post-atomic'>
<input id='parent-post-id-val' type='hidden' value='5523df36551cb19eb90002e6'>
<div class='post-container' data-post-id='5523df36551cb19eb90002e6' id='5523df36551cb19eb90002e6'>
<div class='back-button back-to-community'>Back to Community</div>
<div class='post-title'>Runtime error due to timeout in Quantopian Open</div>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/528a20ee6775eb140700017a'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f818bb6f388b1a8098fad10d7f32660f?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/528a20ee6775eb140700017a'>Deleted User</a>
</div>
<span class='posted-at'>posted </span>
<span UTCms='1428414262000' class='quanto-date posted-at'></span>
<div class='pull-right other-actions'>
<div class='dropup inline-block'>
<div class='dropdown share-control other-action-link'>
<div data-toggle='dropdown'>
<div class='share-image'></div>
Share
</div>
<ul class='dropdown-menu share-options-menu'>
<li>
<a class='share-row' href='https://twitter.com/intent/tweet?text=Runtime error due to timeout in Quantopian Open&amp;url=https%3A%2F%2Fwww.quantopian.com%2Fposts%2Fruntime-error-due-to-timeout-in-quantopian-open%3Futm_source%3Dwebsite_share%26utm_campaign%3Druntime-error-due-to-timeout-in-quantopian-open%26utm_medium%3Dtwitter&amp;via=quantopian'>
<i class='icon icon-twitter'></i>
Share on Twitter
</a>
</li>
<li>
<div class='share-row facebook-button'>
<i class='icon icon-facebook'></i>
Share on Facebook
</div>
</li>
<li>
<div class='share-row linkedin-button' data-share-url='https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Fwww.quantopian.com%2Fposts%2Fruntime-error-due-to-timeout-in-quantopian-open%3Futm_source%3Dwebsite_share%26utm_campaign%3Druntime-error-due-to-timeout-in-quantopian-open%26utm_medium%3Dlinkedin&amp;title=Runtime+error+due+to+timeout+in+Quantopian+Open+%28Deleted+User%29&amp;source=Quantopian'>
<i class='icon icon-linkedin'></i>
Share on LinkedIn
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>

<input type="hidden" name="social_fb_post_link" id="social_fb_post_link" value="https://www.quantopian.com/posts/runtime-error-due-to-timeout-in-quantopian-open?utm_source=website_share&amp;utm_campaign=runtime-error-due-to-timeout-in-quantopian-open&amp;utm_medium=facebook" />
<input type="hidden" name="social_post_image" id="social_post_image" value="external/logo-q-red-outline.png" />
<input type="hidden" name="social_post_author" id="social_post_author" value="Deleted User" />
<div class='body-text'>
<div class='body-text-container post-body'><p>All my three algorithms running in the April&#39;s Quantopian Open have been excluded from the contest due to a runtime error. The algos are actually the same running with different parameters, in all three cases the error happens on the same line and is a</p>

<blockquote>
<p>TimeoutException: Too much time spent in handle_data call.</p>
</blockquote>

<p>The code where the algorithm ran into the exception is the middle line of  </p>

<pre><code>    closes = history(_tail, _frequency, &quot;price&quot;)  
    highs = history(_tail, _frequency, &quot;high&quot;)  
    lows = history(_tail, _frequency, &quot;low&quot;)  
</code></pre>

<p>This is the very start of my handle function, and I&#39;m feetching those history dataframes in order to evaluate ATR.</p>

<p>I&#39;ve been suggested to </p>

<blockquote>
<p>optimizing your code to run faster[…] avoiding multiple calls to history()</p>
</blockquote>

<p>I wonder how am I supposed to make my code faster if the problem is in a history() call.</p>

<p>The values for _tail are roughly 100, I don&#39;t think the length of the history is the issue as the algorithm with the shortest value stopped two days before the other two.</p>

<p>Those are the only three history calls I&#39;m doing (and I&#39;m doing because I need them) also my system doesn&#39;t even run on a minute-level basis, my handle_data has just a <em>return</em> statement and I&#39;m using a custom function scheduled for daily execution.</p>

<p>The (custom) IDE debugger doesn&#39;t step into platform&#39;s functions - that&#39;s quite expected of course- but how am I supposed to debug an issue that happens into the history call?</p>

<p>My algos weren&#39;t top contender but I&#39;m quite annoyed by this issue, has anyone experienced timeout exception or has any hint how to prevent this?</p>

<p>As side note I&#39;m setting universe at 2% interval, that&#39;s the max the minute simulation will accept.</p>

<p>To Quantopian: can we have daily live trading algorithm possibly with a wider timeout? That should make much difference on your side.  </p>
</div>
</div>
</div>

</div>

<div class='container page-container post-atomic'>
<div class='section-header reply-header'>
<div class='reply-title'>28 responses</div>
</div>
<div class='replies'>
<div class='post-container response-container' data-post-id='5523e320320408c04a0002eb' id='5523e320320408c04a0002eb'>
<a href='#5523e320320408c04a0002eb'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/539133a0ca9962c7a9000124'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/40fd36f74ef482a61e96f7be42763d65?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/539133a0ca9962c7a9000124'>Charles Piché</a>
</div>
<a UTCms='1428415269000' class='quanto-date posted-at response-posted-at' href='#5523e320320408c04a0002eb'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I have had the same problems for the past months and it&#39;s getting frustrating. There seem to be no &quot;garanteed execution time&quot; for our algos on the servers, and it&#39;s up to luck and server load if it makes it or not every morning.</p>

<p>I have been working hard to reduce the amount of processing in my algos (less securities in DollarVolumeUniverse, lighter history calls, spread strategies in multiple scheduler calls, etc.), but it doesn&#39;t seem to improve anything.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5523eb109d0d20c50600032f' id='5523eb109d0d20c50600032f'>
<a href='#5523eb109d0d20c50600032f'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/528a20ee6775eb140700017a'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f818bb6f388b1a8098fad10d7f32660f?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/528a20ee6775eb140700017a'>Deleted User</a>
</div>
<a UTCms='1428417299000' class='quanto-date posted-at response-posted-at' href='#5523eb109d0d20c50600032f'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I&#39;m not happy that someone else has the same issue, but at least I&#39;m not alone in this.</p>

<p>The point is that <em>fixing</em> something without knowing what&#39;s broken is actually shooting in the dark.</p>

<p>I thought of those two points, history length and universe size, by guessing, but I don&#39;t have any actual idea of what&#39;s going wrong.<br>
I guess one could print the timestamp up to millisecond in log and use those for after-death analysis.</p>

<p>I backtested the very same algo using zipline before going live, in about 90 seconds I could backtest from 2002 to 2015, shouldn&#39;t really take that long for a single loop while daily trading.</p>

<p>The multiple scheduler calls bit is interesting but this would complicate a bit things.</p>

<p>I think the only reasonable option would be knowing what&#39;s affecting the history() calls, if the runtime exception description is actually accurate. It could be some external factor suspending the execution (for whatever reason) and leading to a timeout that isn&#39;t fault of the algorithm at all.</p>

<p>Let&#39;s wait for a reply on the matter from support.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5523f2b1320408c74d000338' id='5523f2b1320408c74d000338'>
<a href='#5523f2b1320408c74d000338'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/53d46cdb75f57a2832005a6b'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/62b39881ee19f936224017339779d9d4?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/53d46cdb75f57a2832005a6b'>Market Tech</a>
</div>
<a UTCms='1428419253000' class='quanto-date posted-at response-posted-at' href='#5523f2b1320408c74d000338'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Or, you could try 3 different version of your code and resubmit them.</p>

<p>Leave one alone.</p>

<p>Split the periods selected in history in half for a second</p>

<p>And take your logic out of handle_data and use schedule_function for a third.</p>

<p>I actually saw this exact issue during a backtest last night. With no rhyme or reason behind it. Re-ran, no problems.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5523f81b9d0d20c50600038b' id='5523f81b9d0d20c50600038b'>
<a href='#5523f81b9d0d20c50600038b'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/539133a0ca9962c7a9000124'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/40fd36f74ef482a61e96f7be42763d65?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/539133a0ca9962c7a9000124'>Charles Piché</a>
</div>
<a UTCms='1428420637000' class='quanto-date posted-at response-posted-at' href='#5523f81b9d0d20c50600038b'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>For the record, I have 2 very similar algos running in the April contest. Both are at 1.2% universe.</p>

<p>One got disqualified this morning at this history call:<br>
history(120, &#39;1d&#39;, &#39;price&#39;).mean()</p>

<p>And the other one is still running, and successfully executed<br>
history(130, &#39;1d&#39;, &#39;price&#39;).mean()</p>

<p>Both ran full minutes backtests with no problem. It seems to be a very random issue with &quot;big&quot; history calls.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='55240efe320408c04a00042d' id='55240efe320408c04a00042d'>
<a href='#55240efe320408c04a00042d'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/528a20ee6775eb140700017a'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f818bb6f388b1a8098fad10d7f32660f?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/528a20ee6775eb140700017a'>Deleted User</a>
</div>
<a UTCms='1428426497000' class='quanto-date posted-at response-posted-at' href='#55240efe320408c04a00042d'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p><strong>Market Tech:</strong><br>
my algos didn&#39;t have handle_data, maybe I wasn&#39;t clear in my first message, I already had a single function scheduled for daily execution, this is my actual code for all the three algos:  </p>

<pre><code>def handle_data(context, data):  
    return  
</code></pre>

<p>also notice how my 50 days history got stopped a day before (not two as I wrote earlier) my 100 days history() call. This doesn&#39;t go along with the line that the issue is the length parameter.</p>

<p>As far as I can see my processing is quite lean, if I had to guess a culprit I&#39;d have said the talib ATR() call rather than history().</p>

<p><strong>Charles Piché</strong>:<br>
That reinforces the idea that it&#39;s an issue on platform side.</p>

<p>I could, of course, put several algorithm instances in live trading and go bug-catching with trial-and-error approach, but this is not reliable: the errors don&#39;t always occur or the algos wouldn&#39;t have lasted a week, also I don&#39;t have runtime errors if I send algorithms live-trading or backtest with a minute basis.</p>

<p>The real point is that we&#39;d need to hear what the actual reason for the history() call timeout is. It&#39;s too messy to blindly debug this.</p>

<p>Even working around the issue (by reducing history or the universe) doesn&#39;t fix the fact that I&#39;m out of the April contest for something that I don&#39;t quite think is actually my fault.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='55245dbed528dc78c60001e8' id='55245dbed528dc78c60001e8'>
<a href='#55245dbed528dc78c60001e8'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1428446656000' class='quanto-date posted-at response-posted-at' href='#55245dbed528dc78c60001e8'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Here&#39;s some code that will time-out.  Unfortunately, I don&#39;t have a fix, other than to maybe use the timer code I illustrate below to sort out what&#39;s taking so long.  Sounds like there just needs to be a lot more margin.</p>

<p>If it turns out to be the talib ATR call, you might be able to write a more efficient one using Pandas/numpy.  Sounds reasonably straightforward (<a href="http://en.wikipedia.org/wiki/Average_true_range">http://en.wikipedia.org/wiki/Average_true_range</a>).</p>

<pre><code>import time

def initialize(context):  
    context.stocks = sid(24)  
    context.iterations = 9000000000  
def handle_data(context, data):  
    start = time.clock()  
    for k in xrange(context.iterations):  
        pass  
    elapsed = time.clock() - start  
    print elapsed  
</code></pre>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='55252570b59157435f000682' id='55252570b59157435f000682'>
<a href='#55252570b59157435f000682'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/528a20ee6775eb140700017a'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f818bb6f388b1a8098fad10d7f32660f?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/528a20ee6775eb140700017a'>Deleted User</a>
</div>
<a UTCms='1428497780000' class='quanto-date posted-at response-posted-at' href='#55252570b59157435f000682'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p><strong>Grant Kiehne</strong>:<br>
thanks but the point wasn&#39;t trying to just reproduce a timeout (a banal <em>while True: pass</em> does the job) but to reproduce the history() call issue.<br>
That said talib uses Cython, it&#39;s unlikely that you&#39;ll implement a faster algorithm in pure python, even if you exploit numpy&#39;s acceleration.</p>

<hr>

<p>I did try some testing: a 2 years backtest period with history lengths from 10 to 3000 and universe size from 0.1% to 10%.<br>
Even at the worst case scenario of 3000 bars length on 10% set_universe() argument the average time for the history call is about 35 ms with values starting at 50 ms and going down.</p>

<p>With a 250 bars history, still quite long, and a set_universe width of 10% the average total execution time for three history() calls is 4.7 ms with a max value of ~7 ms.<br>
This is four order of magnitude smaller than the timeout my algos suffered.</p>

<p>I noticed that on subsequent runs with same parameters times can greatly vary, from 370 to 460 ns for 8 securities. This probably means that the backtester is affected from contextual events (system load, GC running, page swapping?) but even with this I cannot justify the 700 times slowdown.</p>

<p>We haven&#39;t heard anything from Quantopian yet and at least a couple of people other than me (Charles and another person who directly contacted me) have suffered from unexpected timeout exception.</p>

<p>Can we have an official answer about this matter being checked?</p>

<p><strong>edit</strong><br>
Here&#39;s the code:</p>

<pre><code>import time

def initialize(context):  
    width = 10  
    context.security = set_universe(universe.DollarVolumeUniverse(100-width, 100))  
    context.max = 0  
    context.time = 0  
    context.counter = 0  

def handle_data(context, data):  
    start = time.clock()  
    h = history(250, &#39;1d&#39;, &#39;high&#39;)  
    h = history(250, &#39;1d&#39;, &#39;low&#39;)  
    h = history(250, &#39;1d&#39;, &#39;price&#39;)  
    end = time.clock()

    # time is expressed in ns  
    spent = (end-start)*1e6  
    context.counter += 1  
    context.time += spent  
    context.max = max(context.max, spent)  
    average = context.time/context.counter

    print(&quot;history length=%4d    history width=%4d    average time=%6.0f ns    max time=%6.0f&quot; % (  
            len(h.index), len(h.columns), average, context.max))

# Results  
#  
# | length | width | securities no. | average time (ns) |  
# | ------ | ----- | -------------- | ----------------- |  
# | 10     | 0.1   |  8             | 443               |  
# | 10     | 1     |  80            | 370               |  
# | 10     | 10    |  801           | 413               |  
# | 100    | 0.1   |  8             | 395               |  
# | 100    | 1     |  80            | 384               |  
# | 100    | 10    |  801           | 781               |  
# | 1000   | 0.1   |  8             | 381               |  
# | 1000   | 1     |  80            | 779               |  
# | 1000   | 10    |  801           | 4164              |  
# | 3000   | 0.1   |  8             | 498               |  
# | 3000   | 1     |  80            | 1548              |  
# | 3000   | 10    |  797           | 35434             |  
</code></pre>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='55254109cfdae5b434000727' id='55254109cfdae5b434000727'>
<a href='#55254109cfdae5b434000727'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/539133a0ca9962c7a9000124'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/40fd36f74ef482a61e96f7be42763d65?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/539133a0ca9962c7a9000124'>Charles Piché</a>
</div>
<a UTCms='1428504844000' class='quanto-date posted-at response-posted-at' href='#55254109cfdae5b434000727'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thanks for the tests, those are very interesting results indeed. I also hope that we get an official answer about this problem soon.  Some of my algos were put out of February, March, and now April contests because of this. I was also told to work on code optimizations, which I did, but now I&#39;m more and more convinced that there is some kind of a &quot;lag&quot; issue on &#39;1d&#39; history calls on the contest servers.</p>

<p>It could get very problematic if it happened on a winner&#39;s algo.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='55259a7f7928da9a01000099' id='55259a7f7928da9a01000099'>
<a href='#55259a7f7928da9a01000099'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1428527746000' class='quanto-date posted-at response-posted-at' href='#55259a7f7928da9a01000099'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>As a suggestion to the Quantopian team, you could consider providing, at the end of a backtest, some statistics that would help developers avoid this problem.  Code could be right on the edge of timing out, and users would be setting themselves up for disappointment.  The implementation could be something as simple as adding the line &#39;execution_stats()&#39; when the backtest is initialized.  Also, perhaps issuing a warning would be helpful, such as &quot;WARNING: Execution exceeded 40 seconds per bar.  Fatal error will result if execution exceeds 50 seconds per bar.&quot;  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='55269db34bd45eddb10005e3' id='55269db34bd45eddb10005e3'>
<a href='#55269db34bd45eddb10005e3'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4ec777fc345f20000e000008'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/d1c340e13d187142fc34a5cff3a5eed5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4ec777fc345f20000e000008'>James Jack</a>
</div>
<a UTCms='1428594103000' class='quanto-date posted-at response-posted-at' href='#55269db34bd45eddb10005e3'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I just think there are not enough virtual CPU cycles going around for everyone.</p>

<p>@Andrea<br>
What happens if you use  </p>

<pre><code>h = history(250, &#39;1d&#39;, &#39;price&#39;, ffill=False)  
</code></pre>

<p>instead?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5526a53e4bd45eddb1000618' id='5526a53e4bd45eddb1000618'>
<a href='#5526a53e4bd45eddb1000618'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/52b9b56c02cabe5dae000143'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e9388ae5102f3b152fa6225f955a29d4?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/52b9b56c02cabe5dae000143'>Alisa Deychman</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1428596034000' class='quanto-date posted-at response-posted-at' href='#5526a53e4bd45eddb1000618'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Our goal is to keep contest algorithms running continuously. If this doesn&#39;t happen we want to improve it, and we&#39;re working on the timeout issue. </p>

<p>Charles had reached out to us privately and we&#39;re working with him to re-enter his algo in the contest. @Andrea I&#39;d like to do the same for you. Can you email us at <a href="/cdn-cgi/l/email-protection#c6a0a3a3a2a4a7a5ad86b7b3a7a8b2a9b6afa7a8e8a5a9ab"><span class="__cf_email__" data-cfemail="65030000010704060e251410040b110a150c040b4b060a08">[email&#160;protected]</span></a> and include the live algorithm URL for your entry? </p>

<p>If someone else had the same issue, reach out to us and we&#39;ll help re-qualify the algo in the contest.  </p>
</div>
<div class='disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='5526f32c7e218ed7fb00007f' id='5526f32c7e218ed7fb00007f'>
<a href='#5526f32c7e218ed7fb00007f'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/528a20ee6775eb140700017a'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f818bb6f388b1a8098fad10d7f32660f?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/528a20ee6775eb140700017a'>Deleted User</a>
</div>
<a UTCms='1428615985000' class='quanto-date posted-at response-posted-at' href='#5526f32c7e218ed7fb00007f'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p><strong>James Jack</strong><br>
interesting question.<br>
I ran two backtests per length, averaged the average time and kept the bigger max time.  </p>

<pre><code>Results

| length | width | sec. # | avg. (ns) | max (ns) | Ffill |
| ------ | ----- | ------ | --------- | -------- | ----- |
| 250    | 10    |  798   | 2463      | 4069     | True  |
| 250    | 10    |  798   | 1372      | 1563     | False |
| 1000   | 10    |  799   | 15383     | 33080    | True  |
| 1000   | 10    |  799   | 4241      | 15510    | False |
</code></pre>

<p>Average time reduces quite a bit while but there&#39;s definitely something happening in backgroun that affects individual cycles: max time for 1000 bars  call with Ffill argument False (so consecutive runs with same arguments) was 6 ms on one run  and 29 ms on the other.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='552bcf84e1fc73d222000411' id='552bcf84e1fc73d222000411'>
<a href='#552bcf84e1fc73d222000411'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/539133a0ca9962c7a9000124'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/40fd36f74ef482a61e96f7be42763d65?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/539133a0ca9962c7a9000124'>Charles Piché</a>
</div>
<a UTCms='1428934537000' class='quanto-date posted-at response-posted-at' href='#552bcf84e1fc73d222000411'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Here&#39;s a follow-up on my situation. I got another algo disqualified this morning for the april contest.</p>

<p>I found that the disqualifications often happen during the night before the first trading day of the week. Is there a special process running on the servers at that time? Also, why would the algos need to run during the night? Mine timed out in a function that was scheduled to be called for 11:36 am. Is there some kind of a big re-run of last week data?</p>

<p>I would like to better understand the algos execution cycle. Any more information would be welcome!  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='552c9440ae7f1a3aa30000d0' id='552c9440ae7f1a3aa30000d0'>
<a href='#552c9440ae7f1a3aa30000d0'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/55270db97e218edc3700017e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/7d2cc799db6f5916a1ca4df1259d7d32?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/55270db97e218edc3700017e'>Alex Baranosky</a>
</div>
<a UTCms='1428984899000' class='quanto-date posted-at response-posted-at' href='#552c9440ae7f1a3aa30000d0'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>My intuition is that it has nothing to do with your code, and there&#39;s some performance bug in the Quantopian platform. Perhaps the history call gets blocked waiting (perhaps some needed compute resources has a lock?). We&#39;d have to leave it to the Quantopian developers to investigate this, because like was said earlier, we don&#39;t have the debugging tools necessary for this task. (profiler )  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='552cc829a607cf4029000108' id='552cc829a607cf4029000108'>
<a href='#552cc829a607cf4029000108'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/528a20ee6775eb140700017a'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f818bb6f388b1a8098fad10d7f32660f?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/528a20ee6775eb140700017a'>Deleted User</a>
</div>
<a UTCms='1428998188000' class='quanto-date posted-at response-posted-at' href='#552cc829a607cf4029000108'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p><strong>Alex Baranosky</strong><br>
that&#39;s a pretty safe bet, considering the results of the aforementioned test there&#39;s no way three history() calls (again, those are all I had in my handling functions) would break the <em>50 s</em> limit  even with Ffill left at True I was in the span of <em>10 ns</em> as <em>max</em> value.</p>

<p>There are two bad parts in this:<br>
  1. I&#39;m still out of April&#39;s Quantopian Open even if I provided the requested info  5 days ago (got receipt confirmation a day later)<br>
  2. the issue isn&#39;t know and not in user control anyway so it&#39;s likely to happen again  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='552cd208c0ef9b318b00029c' id='552cd208c0ef9b318b00029c'>
<a href='#552cd208c0ef9b318b00029c'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/52b0e0e0271a27fc88000049'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e5451406e743420c700eb2b054b2fc57?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/52b0e0e0271a27fc88000049'>Blue Seahawk</a>
</div>
<a UTCms='1429000715000' class='quanto-date posted-at response-posted-at' href='#552cd208c0ef9b318b00029c'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>An algo of mine was disqualified on Apr 6. It had been in the contest running since March 2. I was told that they had run it in a backtest (2013-2015) and that the backtest had not completed after 2 days.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='552ce2365640e79ca00002f2' id='552ce2365640e79ca00002f2'>
<a href='#552ce2365640e79ca00002f2'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4ec777fc345f20000e000008'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/d1c340e13d187142fc34a5cff3a5eed5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4ec777fc345f20000e000008'>James Jack</a>
</div>
<a UTCms='1429004857000' class='quanto-date posted-at response-posted-at' href='#552ce2365640e79ca00002f2'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>It&#39;s a big shame Quantopian is not more frequent with communication on this issue :/  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='552ce48ac0ef9b318b0002df' id='552ce48ac0ef9b318b0002df'>
<a href='#552ce48ac0ef9b318b0002df'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1429005452000' class='quanto-date posted-at response-posted-at' href='#552ce48ac0ef9b318b0002df'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Recently, I too had an overnight time-out error for a simulated live trading algo:</p>

<blockquote>
<p>Stopped on 4/10/2015, 3:15:11 AM<br>
TimeoutException: Too much time spent<br>
in handle_data call There was a runtime error on line 49.</p>
</blockquote>

<p>In the absence of technical details from Quantopian, we are obliged to speculate.  I&#39;m wondering if whatever overnight QC checks Quantopian performs on live trading algos are bogging down the system.  I think that there is a backtest run, before and after any code changes, to verify that the results are the same.  And there&#39;s a fetcher file update, as well.  So, maybe if all of the algos are run in parallel, it is too much of a load on the system, and the time-outs result?  Ideally, the execution time should be independent of any overall load on the system.  Each algo should run in it&#39;s own real-time sandbox, right?</p>

<p>When I look on <a href="http://status.quantopian.com/">http://status.quantopian.com/</a>, it gives the appearance that everything has been working just dandy.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='552cee2a415e0625e20002e3' id='552cee2a415e0625e20002e3'>
<a href='#552cee2a415e0625e20002e3'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1429007917000' class='quanto-date posted-at response-posted-at' href='#552cee2a415e0625e20002e3'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Also, I&#39;m guessing that there is a central OHLCV minute bar database; each algo does not have its own copy running locally.  So, one can imagine that the central database gets taxed if a multitude of algos demand data simultaneously.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='552d25c15640e79ca0000474' id='552d25c15640e79ca0000474'>
<a href='#552d25c15640e79ca0000474'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/52b9b56c02cabe5dae000143'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e9388ae5102f3b152fa6225f955a29d4?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/52b9b56c02cabe5dae000143'>Alisa Deychman</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1429022147000' class='quanto-date posted-at response-posted-at' href='#552d25c15640e79ca0000474'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>We are working with the people who had their algos DQ&#39;d from the contest because of timeout issues in handle_data(). We&#39;ve reached out to some people individually and are working 1-1 with them to requalify the algo in the contest. If you&#39;re in this category and haven&#39;t heard from us, shoot us an email at <a href="/cdn-cgi/l/email-protection#f39596969791929098b38286929d879c839a929ddd909c9e"><span class="__cf_email__" data-cfemail="c7a1a2a2a3a5a6a4ac87b6b2a6a9b3a8b7aea6a9e9a4a8aa">[email&#160;protected]</span></a>.  Our dev team is still investigating the behavior in our back-end and profiling the performance.  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='552d3ae3af6081f0110004ee' id='552d3ae3af6081f0110004ee'>
<a href='#552d3ae3af6081f0110004ee'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5033e9d73fb2eb0002000231'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/4a9a839742731aad6e110e1d3586e020?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5033e9d73fb2eb0002000231'>Simon Thornington</a>
</div>
<a UTCms='1429027557000' class='quanto-date posted-at response-posted-at' href='#552d3ae3af6081f0110004ee'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>To join in on the speculation, if in realtime/paper trading, all the algos bang on the history server at the same moment of every minute, you&#39;d have very spiky load, and if there were any bounded queues anywhere they might max out. </p>

<p>Assuming none of the algorithms are trying to front-run one another, nor do complicated order management sub-minute, they could just stagger algos&#39; execution throughout the minute, though it might be unfair to the algos which run late.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='552d3eec5640e79dab000541' id='552d3eec5640e79dab000541'>
<a href='#552d3eec5640e79dab000541'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/55270db97e218edc3700017e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/7d2cc799db6f5916a1ca4df1259d7d32?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/55270db97e218edc3700017e'>Alex Baranosky</a>
</div>
<a UTCms='1429028591000' class='quanto-date posted-at response-posted-at' href='#552d3eec5640e79dab000541'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Simon, another possibility is for the infrastructure to add more resources for the high-load time periods.</p>

<p>I think with algorithmic trading they&#39;re always going to have widely varying resource usages throughout the day.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='553010e18613c8b434000578' id='553010e18613c8b434000578'>
<a href='#553010e18613c8b434000578'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4fe8beb792a029000200000d'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/fe3ffe502559d05f16eb9fe41ab7e9a1?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4fe8beb792a029000200000d'>Dan Dunn</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1429213412000' class='quanto-date posted-at response-posted-at' href='#553010e18613c8b434000578'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I&#39;ve got a bit more information about the problems that this thread is covering.</p>

<p>It&#39;s not particularly intuitive, but some of the biggest load times for us are in the morning when we&#39;re warming algorithms up.  During the actual trading hours it&#39;s more smooth.  We have done a lot of optimizing work to get the warmup better, but we started running into a database problem on history calls.  We&#39;re reasonably sure that is what caused the contest algo problems.</p>

<p>We think we turned the corner this morning with significantly improved performance.  We&#39;ve got several other pending changes to give it more buffer, and we&#39;re monitoring it very closely.</p>

<p>It&#39;s worth noting that we have different tiers of our response depending on what is affected.  The highest tier is algorithms trading real money.  For obvious reasons, they get drop-everything-and-fix-it type treatment for important issues.   Real-money algos were almost totally unaffected by this problem, and the affected customer got  a personal email when it happened. Contest algorithm problems are the next-most important,.  They get a lot of attention, but in this case they didn&#39;t get enough.  We should have been better, earlier, at responding and explaining the problem as we were working on it.</p>

<p>I&#39;m sorry that this has caused the problem that it did.  We&#39;ve learned a lesson about the contest algorithms in particular and how we can be better at communicating about them.  </p>
</div>
<div class='disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='55311c86bc681d605a000019' id='55311c86bc681d605a000019'>
<a href='#55311c86bc681d605a000019'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/539133a0ca9962c7a9000124'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/40fd36f74ef482a61e96f7be42763d65?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/539133a0ca9962c7a9000124'>Charles Piché</a>
</div>
<a UTCms='1429281929000' class='quanto-date posted-at response-posted-at' href='#55311c86bc681d605a000019'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thank you Dan. I guess you must be all quite busy these days at the Quantipian HQ, but yes, I think acknowledging a problem as soon as possible is always a good communication idea ;) I know it was affecting only a few members, and I&#39;m sorry if I looked a little frustrated in this public thread, but it seemed the problem was not taken very seriously until now. I&#39;m looking forward to see the new improvements, and hope the system can accept as much new contest entries as possible. For me, and I would guess many others, the contest is a great way to learn about the market, the available tools, and build confidence in your platform before perhaps eventually step in real-money trading. </p>

<p>And thank you Andrea for going public about it. I&#39;m sure it helped speeding up the fixing process.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='553223f028b6a89289000353' id='553223f028b6a89289000353'>
<a href='#553223f028b6a89289000353'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1429349362000' class='quanto-date posted-at response-posted-at' href='#553223f028b6a89289000353'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Dan,</p>

<p>Is there a common (central) database, or does each user or algo get their own version to run in their own sandbox virtual server?  I realize that it may start to touch on some of your proprietary system architecture details, but it would be interesting to have a better picture of what goes on under the Quantopian hood.</p>

<p>Grant  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5533d6f470f41767d6000542' id='5533d6f470f41767d6000542'>
<a href='#5533d6f470f41767d6000542'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/500da26d5152d20002000008'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/7806a9f9b8bfcad2054cb313567f1b00?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/500da26d5152d20002000008'>Jonathan Kamens</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1429460725000' class='quanto-date posted-at response-posted-at' href='#5533d6f470f41767d6000542'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><blockquote>
<p>I realize that it may start to touch on some of your proprietary system architecture details</p>
</blockquote>

<p>Yes, it does.</p>

<p>And it doesn&#39;t make any difference or have any impact on how algorithms are implemented in Quantopian.</p>

<p>And it may (indeed, probably <em>will</em>) change over time.  </p>
</div>
<div class='disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='5533de5c97799bbddb0004ed' id='5533de5c97799bbddb0004ed'>
<a href='#5533de5c97799bbddb0004ed'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1429462624000' class='quanto-date posted-at response-posted-at' href='#5533de5c97799bbddb0004ed'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thanks Jonathan,</p>

<p>Certainly, you have a business to run, with your own hard-earned IP--makes complete sense that you would protect it.</p>

<p>Regarding your comments about whether or not it would be helpful for algo writers to know the nitty-gritty details of your system, I don&#39;t have enough information to make a definite assessment.  Intuitively, my sense is that if we had the information, it would help, if anything as context.  For one, it seems that testing under your simulated live trading could be quite different from launching paper/real money at IB.  So, it is not obvious that the risk of technical problems would be mitigated completely by running Quantopian paper trading.  What are the differences that we might need to understand?  Or have they been brought into alignment with the recent changes?</p>

<p>Grant  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='553425e86e625ce7a40000f0' id='553425e86e625ce7a40000f0'>
<a href='#553425e86e625ce7a40000f0'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4fe8beb792a029000200000d'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/fe3ffe502559d05f16eb9fe41ab7e9a1?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4fe8beb792a029000200000d'>Dan Dunn</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1429480939000' class='quanto-date posted-at response-posted-at' href='#553425e86e625ce7a40000f0'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I can&#39;t think of any difference between paper trading and trading through IB beyond the obvious ones:</p>

<ul>
<li>Commissions are set by IB in one, by a zipline model in the other.<br></li>
<li>Slippage is modeled by IB in IB paper, slippage is as-experienced in IB real money, and slippage is set by a zipline model in regular paper trading.</li>
</ul>

<p>As for technical difference, again, the only difference is the obvious one: one sends trades to the broker, another generates trade fills internally.</p>

<p>In the case of the contest algos being stopped, the problem did affect real-money algorithms in the same way it affected contest algorithms.  The difference in experience for real money customers is because we prioritize real-money algorithms ahead of simulated ones in response levels.  Real-money algorithms are treated with the highest levels of importance, and contest algorithms are on the next lower tier.</p>

<p>The actual operations processes we use is pretty complex, and it&#39;s more than I&#39;d like to go into.  I think it&#39;s more important to understand what our commitments are.  Real-money algorithms get the best treatment we can possibly deliver.  I think the reason for that is pretty obvious.  Contest algorithms, other live algorithms, backtests, etc. are all less urgent.  Obviously we want to provide the best experience we can across all of these, but as a practical matter they don&#39;t get identical treatment.  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

</div>
<div class='sign-in-please'>
Please <a href='/signin?return_to=/posts/runtime-error-due-to-timeout-in-quantopian-open'>sign in</a> or
<a href='/users/sign_up?redirect_to=/posts/runtime-error-due-to-timeout-in-quantopian-open'>join Quantopian</a> to
post a reply.
</div>
</div>
<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
  window.fbAsyncInit = function() {
    FB.init({
      appId: "550580758292093",
      status: false,
      cookie: true,
      xfbml: true
    });
  };
  
  (function(d, debug){
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) {return;}
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
    ref.parentNode.insertBefore(js, ref);
  }(document, /*debug*/ false));
  
  window.twttr = (function (d,s,id) {
    var t, js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return; js=d.createElement(s); js.id=id;
    js.src="//platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs);
    return window.twttr || (t = { _e: [], ready: function(f){ t._e.push(f) } });
  }(document, "script", "twitter-wjs"));
</script>
<script>
  $(document).ready(function () {
    quanto.instances.pm = new quanto.PostManager(false)
  });
</script>

<div class='login-footer'>
<div class='container'>
<div class='login-footer-text'>
Become an expert in quant finance through Quantopian's hands-on education.
</div>
<div class='login-footer-button'>
<button class='btn btn-v2 stroke join-modal-link mixpanel-button' data-event='anon join footer click posts' data-mixpanel='click'>
Join Now
</button>
</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='error-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'>Error</span>
</div>
<div class='modal-body body-content'>
<p>Sorry, something went wrong.  Try again or contact us by <a class='feedback-link'>sending feedback</a>.</p>
</div>
<div class='modal-footer'>
<button class='btn btn-v2 blue action-button' data-dismiss='modal' href='#'>Close</button>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='confirmation-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'></span>
</div>
<div class='modal-body body-content'></div>
<div class='modal-footer'>
<div class='pull-right'>
<button class='btn btn-v2 border' data-dismiss='modal'>Cancel</button>
<button class='btn btn-v2 blue action-button' data-dismiss='modal'></button>
</div>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='message-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'></span>
</div>
<div class='modal-body body-content'></div>
<div class='modal-footer'>
<button class='btn btn-v2 blue action-button' data-dismiss='modal' id='message-modal-close'>Close</button>
</div>

</div>
</div>
</div>

<div class='always-bootstrap3-modals'>
<div class='fade modal quanto-modal-v2' id='join-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header visible-small'>
<span class='title'>
Join Quantopian.  It's Free!
</span>
<div class='modal-x-out visible-xs'></div>
</div>
<div class='modal-body'>
<div class='flex-wrap'>
<div class='join-left-pane hidden-small'>
<div class='margin_30l'>
<div class='join-hero-text'>
Join Quantopian.  It's Free!
</div>
<div class='join-benefits'>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image code'></div>
</div>
<div class='join-text'>
Use our research platform, backtester, and dozens of clean data sets.
</div>
</div>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image learn'></div>
</div>
<div class='join-text'>
Learn with our hands-on education and community forums.
</div>
</div>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image win'></div>
</div>
<div class='join-text'>
Enter to win cash prizes in our contest.
</div>
</div>
</div>
<div class='hidden saved-reminder'>
Don't worry, all your work is already saved.
</div>
</div>
</div>
<div class='join-right-pane'>
<div class='hidden-small'>
<div class='button-pane'>
<a class="button btn-v2 user-form-btn" href="/signin">Already a Quantopian member?</a>
</div>
</div>
<div class='visible-small'>
<div class='already-member'>
<a href='/signin'>Already a Quantopian member?</a>
</div>
</div>
<form class="quanto-form-v2" id="new-user-modal-form" action="/users" accept-charset="UTF-8" data-remote="true" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><div class='error-message hidden'>
<div class='message'></div>
</div>
<div class='name-group'>
<div class='form-group inline-block'>
<label for="user_firstname">First Name</label>
<input class="form-control firstname" pattern=".*" required="required" autocomplete="off" autofocus="autofocus" type="text" name="user[firstname]" id="user_firstname" />
</div>
<div class='form-group inline-block'>
<label for="user_lastname">Last Name</label>
<input class="form-control" value="" pattern=".*" required="required" autocomplete="off" type="text" name="user[lastname]" id="user_lastname" />
</div>
</div>
<div class='form-group'>
<label for="user_email">Email</label>
<input class="form-control" value="" pattern=".*" required="required" autocomplete="off" type="email" name="user[email]" id="user_email" />
</div>
<div class='form-group'>
<label for="user_password">Password</label>
<input autocomplete="off" class="form-control" pattern=".*" required="required" type="password" name="user[password]" id="user_password" />
</div>
<div class='checkbox eula'>
<input id='eula-checkbox' type='checkbox'>
<div class='quanto-checkbox'></div>
<label for='eula-checkbox' id='checkbox-label'>I accept the <a href='/policies/terms' target='_blank'>Terms Of Use</a> and <a href='/policies/privacy' target='_blank'>Privacy Policy</a>.</label>
</div>
<div class='checkbox mailchimp-box'>
<input name="user[allow_marketing_emails]" type="hidden" value="0" /><input type="checkbox" value="1" name="user[allow_marketing_emails]" id="user_allow_marketing_emails" />
<div class='quanto-checkbox'></div>
<label for='user_allow_marketing_emails'>
Send me email updates with the latest news from the Quantopian community. We send these emails about once a month.
</label>
</div>
<div class='button-row'>
<button class='btn-v2 blue full' data-redirect-to='/tutorials/getting-started' id='sign-up-button' type='Submit'>Join Quantopian</button>
</div>
</form></div>
</div>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='feedback-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title'>Contact Support</span>
</div>
<div class='modal-body'>
<form class='anon-user controls quanto-form-v2' id='feedback-form'>
<div class='feedback-inputs'>
<div class='form-group'>
<input autofocus class='form-control' id='feedback-email-box' name='email' placeholder='Email Address' type='email'>
</div>
<div class='form-group'>
<input class='form-control' id='feedback-name-box' placeholder='Name' type='name'>
</div>
<div class='form-group'>
<textarea class='form-control' id='feedback-box' name='feedback' placeholder='What may we help you with?' rows='10'></textarea>
</div>
</div>
</form>
<form class='hidden quanto-form-v2 select-resource-area'>
<div class='select-step select-type-step'>
<div class='form-group'>
<select class='form-control select-resource-dropdown' title='Select the item you need help with'>
<option value='algorithm'>Algorithm</option>
<option value='backtest'>Backtest</option>
<option value='notebook'>Notebook</option>
</select>
</div>
</div>
<div class='select-step loading-area hidden'>
<div class='loading-text'>
Loading...
</div>
</div>
<div class='select-step empty-list-area hidden'>
<div class='back-button'>Go Back</div>
<div class='empty-text'>
No <span class='empty-list-resource-text'>algorithms</span> found
</div>
</div>
<div class='select-algo-area select-step hidden'>
<div class='back-button'>Go Back</div>
<table class='select-algo-table select-item-table'>
<thead>
<tr>
<th>
Algorithm
<span class='sort-icon'></span>
</th>
<th>
Last Modified
<span class='sort-icon'></span>
</th>
</tr>
</thead>
</table>
</div>
<div class='select-backtest-area select-step hidden'>
<div class='back-button'>Go Back</div>
<table class='select-backtest-table select-item-table'>
<thead>
<tr>
<th>
Backtest
<span class='sort-icon'></span>
</th>
<th>
Started At
<span class='sort-icon'></span>
</th>
<th>
Overall Return
<span class='sort-icon'></span>
</th>
<th>
Status
<span class='sort-icon'></span>
</th>
</tr>
</thead>
</table>
</div>
<div class='select-notebook-area select-step hidden'>
<div class='back-button'>Go Back</div>
<div class='subtitle select-cell-step'>
Choose a cell to use as the preview for this notebook:
</div>
<div class='iframe-wrapper'>
<iframe class='notebook-list-iframe slow-fade' src=''></iframe>
</div>
<div class='progress-area slow-fade in'>
<div class='progress-container'>
<div class='progress-title'>
<div class='quanto-loader gray'></div>
</div>
</div>
</div>
<div class='maintenance-area'>
<div class='error-container'>
<div class='row'>
<div class='col-md-14 msg-title h1'>
Sorry, research is currently undergoing maintenance.
</div>
</div>
<div class='row'>
<div class='col-md-14 msg-subtitle'>
Please check back shortly. If the maintenance period lasts longer than expected,
you can find updates on <a href='https://status.quantopian.com/'>status.quantopian.com</a>.
</div>
</div>

</div>
</div>
<div class='error-area'>
<div class='error-container'>
<div class='row'>
<div class='col-md-14 msg-title h1'>
Sorry, something went wrong on our end.
</div>
</div>
<div class='row'>
<div class='col-md-14 msg-subtitle'>
Please try again or contact <a class='open-feedback-link'>Quantopian support</a>.
</div>
</div>

</div>
</div>

</div>
<div class='selected-item-area select-step hidden'>
<div class='selected-item-group form-group'>
<div class='selected-item-control'>
<input class='disabled form-control selected-item-box' type='text'>
<span class='secure-icon icon'></span>
<button class='btn change change-primary-item-button change-selection-button new-btn transparent' type='button'>
<span class='refresh-icon icon'></span>
</button>
</div>
<div class='selected-backtest-control'>
<input class='disabled form-control selected-backtest-box' type='text'>
<span class='secure-icon icon'></span>
<button class='btn change-backtest-button change-selection-button new-btn transparent' type='button'>
<span class='refresh-icon icon'></span>
</button>
</div>
</div>
<div class='checkbox-group form-group'>
<div class='checkbox give-permission'>
<input class='give-permission-checkbox' id='feedback-give-permission-checkbox' type='checkbox'>
<div class='quanto-checkbox'></div>
<label for='feedback-give-permission-checkbox'>
I permit Quantopian to view <span class='item-type-text'>this algorithm,
backtest or notebook and their imported datasets</span> for the purpose of providing support.
</label>
</div>
</div>
</div>
</form>

<div class='loading-step hidden'>
<div class='loading-text'>
Submitting your support ticket...
</div>
</div>
<div class='success-step invisible'>
<h2 class='title center'>
You've successfully submitted a support ticket.
</h2>
<p>
Our support team will be in touch soon.
</p>
<div class='confirmation-image'></div>
</div>
</div>
<div class='modal-footer'>
<button class='btn-v2 blue' id='send-feedback-button'>Send</button>
<div class='error-message hidden'>
Error submitting support request.
</div>
</div>

</div>
</div>
</div>

</div>
</div>
<div class='footer' id='quanto-footer-container'>
<div class='container'>
<div class='row header-row'>
<div class='col-sm-fourth span3'>
<img class='async-image logotype-image' data-src='https://qf.quantopian.com/assets/logos/logo-q-full-b23bda5ac757691b9259d396d0dfef91567165868b8c955a836649686e6d2248.svg'>
</div>
<div class='col-sm-fourth span3'></div>
<div class='col-sm-fourth span3'></div>
<div class='col-sm-fourth span3'>
<div class='feedback-email'>
Need help?
<a href="/cdn-cgi/l/email-protection#66000303020407050d26171307081209160f07084805090b">Contact support.</a>
</div>
</div>
</div>
<div class='row'>
<div class='col-sm-fourth span3'>
<div class='header'>Company</div>
<div class='footer-row'>
<a href='/about'>About</a>
</div>
<div class='footer-row'>
<a href='/academia'>Academia</a>
</div>
<div class='footer-row'>
<a href='/jobs'>Careers</a>
</div>
<div class='footer-row'>
<a href='/posts'>Community</a>
</div>
<div class='footer-row'>
<a href='/events'>Events</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Learn &amp; Support</div>
<div class='footer-row'>
<a href='/faq'>FAQ</a>
</div>
<div class='footer-row'>
<a href='/tutorials/getting-started'>Getting Started</a>
</div>
<div class='footer-row'>
<a href='/docs'>Documentation</a>
</div>
<div class='footer-row'>
<a href='/tutorials'>Tutorials</a>
</div>
<div class='footer-row'>
<a href='/lectures'>Lectures</a>
</div>
<div class='footer-row'>
<a href='/opensource'>Open Source</a>
</div>
<div class='footer-row'>
<a href='https://status.quantopian.com/'>Site Status</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Notices</div>
<div class='footer-row'>
<a href='/policies/terms'>Terms of Use</a>
</div>
<div class='footer-row'>
<a href='/policies/privacy'>Privacy Policy</a>
</div>
<div class='footer-row'>
<a href='/security'>Security</a>
</div>
<div class='footer-row'>
<a href='/policies/code-of-conduct'>Code of Conduct</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Follow Us</div>
<div class='footer-row'>
<a href='https://www.twitter.com/quantopian'>Twitter</a>
</div>
<div class='footer-row'>
<a href='https://www.facebook.com/quantopian'>Facebook</a>
</div>
<div class='footer-row'>
<a href='https://www.linkedin.com/company/quantopian'>LinkedIn</a>
</div>
<div class='footer-row'>
<a href='https://www.youtube.com/channel/UC606MUq45P3zFLa4VGKbxsg'>YouTube</a>
</div>
</div>
</div>
<div class='row'>
<div class='col-xs-14 span12'>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian.
</p>
<p>
In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>

</div>
</div>
</div>
</div>
</div>
<div class='mobile-footer'>
<div class='mobile-nav-category main-links'>
<div class='mobile-nav-row-footer'>
<a href='/about'>About Quantopian</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/jobs'>Careers</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/posts'>Community</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/events'>Events</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/docs'>Documentation</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/academia'>Academia</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/lectures'>Lectures</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://status.quantopian.com/'>Status</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.facebook.com/quantopian'>Facebook</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.twitter.com/quantopian'>Twitter</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.linkedin.com/company/quantopian'>LinkedIn</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.youtube.com/channel/UC606MUq45P3zFLa4VGKbxsg'>YouTube</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/policies/terms'>Terms of Use</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/policies/privacy'>Privacy Policy</a>
</div>
</div>
<div class='mobile-nav-category'>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian.
</p>
<p>
In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>

</div>
</div>
</div>

</div>
<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script></body>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', "UA-8519877-1", {
    cookieDomain: "quantopian.com"
  });
  ga('set', 'dimension1', 'session_5f9dc7425d387f00077e48e4');
  
  ga('send', 'pageview');
</script>

<input type="hidden" name="is_mac" id="is_mac" value="false" />
<input type="hidden" name="mp" id="mp" value="75873953cd404bcc1da88a55ff51e3b4" />
<script>
  (function(e,a){if(!a.__SV){var b=window;try{var c,l,i,j=b.location,g=j.hash;c=function(a,b){return(l=a.match(RegExp(b+"=([^&]*)")))?l[1]:null};g&&c(g,"state")&&(i=JSON.parse(decodeURIComponent(c(g,"state"))),"mpeditor"===i.action&&(b.sessionStorage.setItem("_mpcehash",g),history.replaceState(i.desiredHash||"",e.title,j.pathname+j.search)))}catch(m){}var k,h;window.mixpanel=a;a._i=[];a.init=function(b,c,f){function e(b,a){var c=a.split(".");2==c.length&&(b=b[c[0]],a=c[1]);b[a]=function(){b.push([a].concat(Array.prototype.slice.call(arguments,
  0)))}}var d=a;"undefined"!==typeof f?d=a[f]=[]:f="mixpanel";d.people=d.people||[];d.toString=function(b){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);b||(a+=" (stub)");return a};d.people.toString=function(){return d.toString(1)+".people (stub)"};k="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
  for(h=0;h<k.length;h++)e(d,k[h]);a._i.push([b,c,f])};a.__SV=1.2;b=e.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";c=e.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}})(document,window.mixpanel||[]);
  mixpanel.init("75873953cd404bcc1da88a55ff51e3b4");
</script>
<script>
  mixpanel.track("view page", {"page": window.location.pathname});
</script>
</html>
