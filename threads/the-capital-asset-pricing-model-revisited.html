<!DOCTYPE html>
<html>
<head>
<link href='i1.wp.com' rel='dns-prefetch'>
<link href='i2.wp.com' rel='dns-prefetch'>
<link href='i3.wp.com' rel='dns-prefetch'>
<meta content='2HgX9mcLHaPOX6sfaaAkhWtblhEB9yUNw4l6l46e1k4' name='google-site-verification'>
<link rel="shortcut icon" type="image/x-icon" href="external/favicon-q-ac1a76f2c200e9026b5b1147519bb4fab6256910588b831e2411bc6c7c1218c3.png" />
<title>
The  Capital Asset Pricing Model Revisited
</title>
<meta content='The CAPM (Capital Asset Pricing Model) has been around since the 60&#39;s and is often found as a justification for the notion of the portfolio&#39;s efficient frontier. The following article starts to question that argumentation. You see CAPM models showing a few securities and find them not only compelling but also reasonable as if a matter of fact it should not be any other way. However, when you dig deeper you find scenarios where the thing might not hold water. The attached notebook is based on...' name='description'>
<link rel="stylesheet" media="all" href="external/quanto-base-bundle-e8eb6050172aa0d24124d5c24bac90b2cccd88b5b9c7742026c0e9efab038c6e.css" />
<link rel="stylesheet" media="all" href="external/quanto-posts-bundle-aab01368d3f82d8dafc94ee9eabb82e77dc8c9fbbffa952fdcdc744dfa523cf3.css" />
<script src="external/quanto_global-057218867db29d5768131af5d6fb3476cef098e7d9e655108befb903c7ee985e.js"></script>
<script src="external/posts_bundle-3dfd82fa469c393d752e461d837aec9e4e364ae39f49198e34a6626f2180fdf7.js"></script>
<link href='external/logo-q-180x180-0f5a6a439c99203ed4aea6f656e7604c543d287be43d8b17c7591c1131f09a59.png' rel='apple-touch-icon'>
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="1UZKghHlABIw8iTKMSC3FDFdvUekcDGONpf7m/LPapCpIDzPsxPS8Ynvfft+zx9gCdOeLt68JJW0mCDxWIoIKw==" />
<meta content='width=device-width, initial-scale=1.0' name='viewport'>
<script>
//<![CDATA[
window.quanto_data={};quanto_data.bounce_back_params={"show_modal":null,"feedback_text":null};quanto_data.namespace="public";quanto_data.talib_info={"ADOSC":["Chaikin A/D Oscillator (Volume Indicators)",["fastperiod","3"],["slowperiod","10"]],"ADX":["Average Directional Movement Index (Momentum Indicators)",["timeperiod","14"]],"ADXR":["Average Directional Movement Index Rating (Momentum Indicators)",["timeperiod","14"]],"APO":["Absolute Price Oscillator (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["matype","0"]],"AROON":["Aroon (Momentum Indicators)",["timeperiod","14"]],"AROONOSC":["Aroon Oscillator (Momentum Indicators)",["timeperiod","14"]],"ATR":["Average True Range (Volatility Indicators)",["timeperiod","14"]],"BBANDS":["Bollinger Bands (Overlap Studies)",["timeperiod","5"],["nbdevup","2"],["nbdevdn","2"],["matype","0"]],"BETA":["Beta (Statistic Functions)",["timeperiod","5"]],"CCI":["Commodity Channel Index (Momentum Indicators)",["timeperiod","14"]],"CMO":["Chande Momentum Oscillator (Momentum Indicators)",["timeperiod","14"]],"CORREL":["Pearson's Correlation Coefficient (r) (Statistic Functions)",["timeperiod","30"]],"DEMA":["Double Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"DX":["Average Directional Movement Index (Momentum Indicators)",["timeperiod","14"]],"EMA":["Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"KAMA":["Kaufman Adaptive Moving Average (Overlap Studies)",["timeperiod","30"]],"LINEARREG":["Linear Regression (Statistic Functions)",["timeperiod","14"]],"LINEARREG_ANGLE":["Linear Regression Angle (Statistic Functions)",["timeperiod","14"]],"LINEARREG_INTERCEPT":["Linear Regression Intercept (Statistic Functions)",["timeperiod","14"]],"LINEARREG_SLOPE":["Linear Regression Slope (Statistic Functions)",["timeperiod","14"]],"MA":["Moving average (Overlap Studies)",["timeperiod","30"],["matype","0"]],"MACD":["Moving Average Convergence/Divergence (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["signalperiod","9"]],"MACDEXT":["MACD with controllable MA type (Momentum Indicators)",["fastperiod","12"],["fastmatype","0"],["slowperiod","26"],["slowmatype","0"],["signalperiod","9"],["signalmatype","0"]],"MACDFIX":["Moving Average Convergence/Divergence Fix 12/26 (Momentum Indicators)",["signalperiod","9"]],"MAX":["Highest values over a specified period (Math Operators)",["timeperiod","30"]],"MAXINDEX":["Index of highest value over a specified period (Math Operators)",["timeperiod","30"]],"MFI":["Money Flow Index (Momentum Indicators)",["timeperiod","14"]],"MIDPOINT":["Midpoint over period (Overlap Studies)",["timeperiod","14"]],"MIDPRICE":["Midpoint Price over period (Overlap Studies)",["timeperiod","14"]],"MIN":["Lowest value over a specified period (Math Operators)",["timeperiod","30"]],"MININDEX":["Index of lowest value over a specified period (Math Operators)",["timeperiod","30"]],"MINMAX":["Lowest and highest values over a specified period (Math Operators)",["timeperiod","30"]],"MINMAXINDEX":["Indexes of lowest and highest values over a specified period (Math Operators)",["timeperiod","30"]],"MINUS_DI":["Minus Directional Indicator (Momentum Indicators)",["timeperiod","14"]],"MINUS_DM":["Minus Directional Movement (Momentum Indicators)",["timeperiod","14"]],"MOM":["Momentum (Momentum Indicators)",["timeperiod","10"]],"NATR":["Normalized Average True Range (Volatility Indicators)",["timeperiod","14"]],"PLUS_DI":["Plus Directional Indicator (Momentum Indicators)",["timeperiod","14"]],"PLUS_DM":["Plus Directional Movement (Momentum Indicators)",["timeperiod","14"]],"PPO":["Percentage Price Oscillator (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["matype","0"]],"ROC":["Rate of change: ((price/prevPrice)-1)*100 (Momentum Indicators)",["timeperiod","10"]],"ROCP":["Rate of change Percentage: (price-prevPrice)/prevPrice (Momentum Indicators)",["timeperiod","10"]],"ROCR":["Rate of change ratio: (price/prevPrice) (Momentum Indicators)",["timeperiod","10"]],"ROCR100":["Rate of change ratio 100 scale: (price/prevPrice)*100 (Momentum Indicators)",["timeperiod","10"]],"RSI":["Relative Strength Index (Momentum Indicators)",["timeperiod","14"]],"SMA":["Simple Moving Average (Overlap Studies)",["timeperiod","30"]],"STDDEV":["Standard Deviation (Statistic Functions)",["timeperiod","5"],["nbdev","1"]],"STOCH":["Stochastic (Momentum Indicators)",["fastk_period","5"],["slowk_period","3"],["slowk_matype","0"],["slowd_period","3"],["slowd_matype","0"]],"STOCHF":["Stochastic Fast (Momentum Indicators)",["fastk_period","5"],["fastd_period","3"],["fastd_matype","0"]],"STOCHRSI":["Stochastic Relative Strength Index (Momentum Indicators)",["timeperiod","14"],["fastk_period","5"],["fastd_period","3"],["fastd_matype","0"]],"T3":["Triple Exponential Moving Average (T3) (Overlap Studies)",["timeperiod","5"],["vfactor","0.7"]],"TEMA":["Triple Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"TRIMA":["Triangular Moving Average (Overlap Studies)",["timeperiod","30"]],"TRIX":["1-day Rate-Of-Change (ROC) of a Triple Smooth EMA (Momentum Indicators)",["timeperiod","30"]],"TSF":["Time Series Forecast (Statistic Functions)",["timeperiod","14"]],"ULTOSC":["Ultimate Oscillator (Momentum Indicators)",["timeperiod1","7"],["timeperiod2","14"],["timeperiod3","28"]],"VAR":["Variance (Statistic Functions)",["timeperiod","5"],["nbdev","1"]],"WILLR":["Williams' %R (Momentum Indicators)",["timeperiod","14"]],"WMA":["Weighted Moving Average (Overlap Studies)",["timeperiod","30"]]};quanto_data.nb_preview_url="https://notebooks-preview.prd.pub.quantopian.com";quanto_data.delay_nb_preview_load=false;
//]]>
</script>
<meta content='https://www.quantopian.com/posts/the-capital-asset-pricing-model-revisited' property='og:url'>
<meta content='The  Capital Asset Pricing Model Revisited' property='og:title'>

<input type="hidden" name="env" id="quanto-env" value="production" />
<meta content='550580758292093' property='fb:app_id'>
<meta content='https://www.quantopian.com/posts/the-capital-asset-pricing-model-revisited' property='og:url'>
<meta content='https://media.quantopian.com/public/og-image-default.png' property='og:image'>
<meta content='The  Capital Asset Pricing Model Revisited' property='og:title'>
<meta content='The CAPM (Capital Asset Pricing Model) has been around since the 60&#39;s and is often found as a justification for the notion of the portfolio&#39;s efficient frontier. The following article starts to question that argumentation. You see CAPM models showing a few securities and find them not only compelling but also reasonable as if a matter of fact it should not be any other way. However, when you dig deeper you find scenarios where the thing might not hold water. The attached notebook is based on...' property='og:description'>
</head>
<script type='application/ld+json'>
  {
    "@context": "http://schema.org",
    "@type": "Organization",
    "url": "https://www.quantopian.com",
    "logo": "https://media.quantopian.com/logos/logo-q-press-red.png"
  }
</script>
<body class='' ontouchstart=''>
<div id='fb-root'></div>
<div class='wrapper'>
<div class='alert-v2 error'>
<div class='message'>
Quantopian's community platform is shutting down. Please read <a href="/posts/quantopians-community-services-are-closing">this post</a> for more information and <a href='/account#account'>download your code</a>.
</div>
</div>
<div class='navbar navbar-default navbar-static-top' id='app-navbar'>
<div class='container-fluid'>
<div class='navbar-header'>
<button class='navbar-toggle collapsed' data-target='#app-navbar-collapse' data-toggle='collapse'>
<span class='icon hamburger-menu'></span>
</button>
<a class='navbar-brand' href='/home'>
<img class='logo-image async-image' data-src='external/logo-q-white-b141ea6018546e5a4ecc3d10d8440ec076fc4385764e948b322828cc70950a76.svg'>
</a>
</div>
<div class='collapse navbar-collapse' id='app-navbar-collapse'>
<ul class='nav navbar-nav navbar-right'>
<li class='dropdown quanto-dropdown-new'>
<li>
<a class='header' href='/docs'>
Documentation
</a>
</li>
<li class='dropdown quanto-dropdown-new'>
<a class='header' data-toggle='dropdown' href='#'>
Learn
</a>
<ul class='dropdown-menu'>
<li>
<a class='mixpanel-button' data-event='main nav getting started clicked' href='/tutorials/getting-started'>Getting Started</a>
</li>
<li>
<a class='mixpanel-button' data-event='main nav tutorials clicked' href='/tutorials'>Tutorials</a>
</li>
<li>
<a class='mixpanel-button' data-event='main nav lectures clicked' href='/lectures'>Lectures</a>
</li>
</ul>
</li>
<li>
<a class='header' href='/posts' id='forum-link'>
Forum
</a>
</li>
<li>
<a class="header" href="/signin?return_to=/posts/the-capital-asset-pricing-model-revisited">Log In</a>
</li>
</li>

</ul>
</div>
</div>
</div>
<script>
  $(document).ready(function () {
    quanto.instances.fm = new quanto.FeedbackManager();
    quanto.instances.hm = new quanto.headerManager();
  })
</script>


<div class='content content-area new-style'>
<input type="hidden" name="page-id" id="page-id" value="postatomic" />
<script src="external/MathJax.js?config=TeX-AMS_HTML-full.js,Safe" async="async"></script>
<div class='container page-container post-atomic'>
<input id='parent-post-id-val' type='hidden' value='5bb40753226deb00457d8d91'>
<div class='post-container' data-post-id='5bb40753226deb00457d8d91' id='5bb40753226deb00457d8d91'>
<div class='back-button back-to-community'>Back to Community</div>
<div class='post-title'>The  Capital Asset Pricing Model Revisited</div>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<span class='posted-at'>posted </span>
<span UTCms='1538525011000' class='quanto-date posted-at'></span>
<div class='pull-right other-actions'>
<div class='dropup inline-block'>
<div class='dropdown share-control other-action-link'>
<div data-toggle='dropdown'>
<div class='share-image'></div>
Share
</div>
<ul class='dropdown-menu share-options-menu'>
<li>
<a class='share-row' href='https://twitter.com/intent/tweet?text=The  Capital Asset Pricing Model Revisited&amp;url=https%3A%2F%2Fwww.quantopian.com%2Fposts%2Fthe-capital-asset-pricing-model-revisited%3Futm_source%3Dwebsite_share%26utm_campaign%3Dthe-capital-asset-pricing-model-revisited%26utm_medium%3Dtwitter&amp;via=quantopian'>
<i class='icon icon-twitter'></i>
Share on Twitter
</a>
</li>
<li>
<div class='share-row facebook-button'>
<i class='icon icon-facebook'></i>
Share on Facebook
</div>
</li>
<li>
<div class='share-row linkedin-button' data-share-url='https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Fwww.quantopian.com%2Fposts%2Fthe-capital-asset-pricing-model-revisited%3Futm_source%3Dwebsite_share%26utm_campaign%3Dthe-capital-asset-pricing-model-revisited%26utm_medium%3Dlinkedin&amp;title=The++Capital+Asset+Pricing+Model+Revisited+%28Guy+Fleury%29&amp;source=Quantopian'>
<i class='icon icon-linkedin'></i>
Share on LinkedIn
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>

<input type="hidden" name="social_fb_post_link" id="social_fb_post_link" value="https://www.quantopian.com/posts/the-capital-asset-pricing-model-revisited?utm_source=website_share&amp;utm_campaign=the-capital-asset-pricing-model-revisited&amp;utm_medium=facebook" />
<input type="hidden" name="social_post_image" id="social_post_image" value="external/logo-q-red-outline.png" />
<input type="hidden" name="social_post_author" id="social_post_author" value="Guy Fleury" />
<div class='body-text'>
<div class='body-text-container post-body'><p>The CAPM (Capital Asset Pricing Model) has been around since the 60&#39;s and is often found as a justification for the notion of the portfolio&#39;s efficient frontier. The following article starts to question that argumentation. You see CAPM models showing a few securities and find them not only compelling but also reasonable as if a matter of fact it should not be any other way.</p>

<p>However, when you dig deeper you find scenarios where the thing might not hold water.</p>

<p>The attached notebook is based on the first part of Lecture 30 on the <a href="https://www.quantopian.com/lectures/the-capital-asset-pricing-model-and-arbitrage-pricing-theory" rel="nofollow">Capital Asset Pricing Model</a> by <em>Beha Abasi</em>, <em>Maxwell Margenot</em>, and <em>Delaney Granizo-Mackenzie</em>.  </p>
</div>
</div>
</div>

</div>

<div class='container page-container post-atomic'>
<div class='section-header reply-header'>
<div class='reply-title'>52 responses</div>
</div>
<div class='replies'>
<div class='post-container response-container' data-post-id='5bb9139e777013003e45966b' id='5bb9139e777013003e45966b'>
<a href='#5bb9139e777013003e45966b'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1538855838000' class='quanto-date posted-at response-posted-at' href='#5bb9139e777013003e45966b'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>The attached notebook is an extension to the one presented above. It explores the impact of 3 equations representing stochastic stock price series generated from normalized distributions.</p>

<p><img src="https://image-proxy.quantopian.com/b299c7807ec99492b80d4712ee1bdd680541150a/687474703a2f2f616c706861706f77657274726164696e672e636f6d2f7175616e746f7069616e2f335f6571756174696f6e735f30322e706e67" /></p>

<p>The interesting part is the last equation and should prove to be the most important.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5beb12bf2b69fc7ded41b1a6' id='5beb12bf2b69fc7ded41b1a6'>
<a href='#5beb12bf2b69fc7ded41b1a6'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1542132415000' class='quanto-date posted-at response-posted-at' href='#5beb12bf2b69fc7ded41b1a6'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I was preparing a follow-up to the last notebook, but then, from simulation to simulation, it grew and grew. So much so, that it is now a 160-page book: <strong>Beyond the Efficient Frontier</strong>. And there is much wisdom in it.</p>

<p>The main conclusion is that the efficient frontier might be a self-imposed limit since one could easily jump over it as the following chart shows:</p>

<p><img src="https://image-proxy.quantopian.com/f12096e1e5e0cf21f1c427c5f03ec32ea352b71a/687474703a2f2f616c706861706f77657274726164696e672e636f6d2f7175616e746f7069616e2f4341504d2f4341504d5f316b6f5f333030735f316b705f30303032645f30303032615f316f332e706e67" /> </p>

<p>Note that in the process the whole efficient frontier was raised higher. There are 20,000 portfolios composed of 300 stocks each in that vertical blue strip above the efficient frontier. That is 6,000,000 prices series that were generated using the random function in the notebook and passed to its optimizer. It is a sufficiently large sample to be statistically significant to represent what was going on.</p>

<p>Observe that all 20,000 portfolios are clustered together saying that they all achieved about the same level of risk, and that you could have picked about any one of them and have a descent performance level. </p>

<p>It took a while to get there, but nonetheless, it ties in quite well with my previous work.</p>

<p>Instead of decomposing price series to see what they are made off, to then design trading strategies based on what was found, I simply reconstructed price series from scratch using stochastic equations. </p>

<p>The core program has not changed, courtesy of the original authors. I simply repurposed the code to make it a scenario builder. It gave the ability to reconstruct millions of portfolios composed of randomly generated stock prices. </p>

<p>Evidently, you could also generate the following, (figure 8.3) from the book::</p>

<p><img src="https://image-proxy.quantopian.com/bfc0b6b11ab8663d031154b7a5869402ddcd5e11/687474703a2f2f616c706861706f77657274726164696e672e636f6d2f7175616e746f7069616e2f4341504d2f4341504d5f316b6f5f323030735f32306b705f30303030645f30303030615f4d5f45462e706e67" /> </p>

<p>It draws quite a different conclusion. It says that without some upside bias, whatever its origin, the expected outcome is ZERO. All 20,000 portfolios landed in that small dot in zero land. In fact saying: no edge, no candy. It was totally expected since that was exactly the answer the optimizer had to give, which it did.</p>

<p>There is much to learn from the elaboration of all the tests performed. What you will find in the book is a coherent structured ecosystem where everything is turned into equations. And an equal sign is a powerful statement even in a randomly generated trading environment.</p>

<p>Hope you will find it more than interesting. It could change your perception of things, even if you already know all that will be presented. Its long-term perspective might help change your own perception on how to win the game. It is an innovative approach anchored in simplicity and common sense.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5bed895e812e246b1d6c4c0e' id='5bed895e812e246b1d6c4c0e'>
<a href='#5bed895e812e246b1d6c4c0e'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1542293854000' class='quanto-date posted-at response-posted-at' href='#5bed895e812e246b1d6c4c0e'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Finally, my book is out: <a href="https://www.amazon.com/dp/B07KGMZMPS" rel="nofollow">Beyond the Efficient Frontier</a></p>

<p>The most basic principle for a stock portfolio to consider is not its trading methods, but its expected survival over the long term. </p>

<p>Whatever the strategy, if it is not made to last and blows up in your face, then it is not “good”, and should not be pursued. That should sound like evident. Then, why plan for trading strategies that only look a few days to a few months ahead? Shouldn&#39;t you plan for the long term and know how to get there?</p>

<p>Whatever the type of distribution stock prices have, they will show some mean value and variance. That it be Paretian with fat tails, or normal as Gaussian, there is a point on these bell-shaped curves where we say: &gt;0, and &lt;0. That point is usually close to a 50/50 proposition making it close to a coin flip. On such a contraption, whatever the betting system, the expected value is zero. You can win the game, but the only factor that would be related to your gains would be entirely due to luck of the draw, nothing else.</p>

<p>When you look at stock prices from up close, what you see is also almost random with close to 50/50 odds. There is not much of an “edge” available, even if, over the long term, the market is more like a 52/48 to 54/46 coin flipper. </p>

<p>At the right edge of a price chart, this long-term edge is clearly not visible. And yet, we have to make that “guess” anyway since seeking a profit will require as a minimum: \(\Delta p &gt; 0\).</p>

<p>In my book, chart prices are reconstructed from a simple stochastic representation using: \(p_j(t) = \mu_j dt + \sigma_j dW_j\) representing a randomly generated price series to which is added some long-term drift.</p>

<p>Such a chart could look like the following:<br>
<img src="https://image-proxy.quantopian.com/d0a2fe4959afe561f7c2cb0c8c29f20c8a4fe946/68747470733a2f2f616c706861706f77657274726164696e672e636f6d2f7175616e746f7069616e2f4341504d2f4341504d5f316b6f5f35735f356b705f30303032645f30303030615f63322e706e67" /> </p>

<p>The price chart was randomly generated using: \(np.random.randn(nassets, nobs)\), therefore, that part is 50/50. There is nothing to be gained from it. Its expectancy is zero. </p>

<p>The applied drift was set at 0.0002, that is \(0.0002 \cdot \sigma\), a fraction of the normal standard deviation which was set to 1.0 by the above line of code. That resulted in the top line on the chart which includes the drift. </p>

<p>You could have viewed millions of such charts, they would all be built on the same principles and if you removed the long-term drift, you would be back with the Wiener process with no predictability available whatsoever. </p>

<p>The program&#39;s optimizer could detect that small long-term upward drift and react accordingly. If you designed millions and millions of such portfolios, they would ALL prove profitable. Not by chance, but by construction and due to the long-term drift.</p>

<p>A 0.0002 drift is equivalent to a 2 cent move on a \(\$\)100 stock. It is why at the start of the above chart it is not perceptible. That is an upside of 10 cents a week on this \(\$\)100 stock,  or \(\$\)5.04 a year. Yet, the optimizer could detect that with ease and made the millions of portfolios profitable.</p>

<p>Since we do know that the US stock market has had a long-term drift of about 10\(\%\) over the last 200+ years, we might assume that it could maintain a positive stance over the long term going forward. The equivalent of Mr. Buffett&#39;s bet on America.</p>

<p>Now, say you have factors that correlate to the price movement and could have some predictive powers. Meaning that after a bet, you consistently get \(\Delta \bar p &gt; 0\) for the majority of your bets indicating and expressing the predictive powers of those factors.</p>

<p>A simple question: how much of those factors are simply catching the underlying drift? It did not disappear because you changed your looking glasses and now view this trend as composed of factors. And if your factors do not predict more than the drift itself, are they any good?</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5bef2c89b165c84fa85c0efd' id='5bef2c89b165c84fa85c0efd'>
<a href='#5bef2c89b165c84fa85c0efd'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1542401161000' class='quanto-date posted-at response-posted-at' href='#5bef2c89b165c84fa85c0efd'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Some trading decisions are made outside a trading strategy&#39;s program and then implemented in code. Some have more impact than others. </p>

<p>For instance, one such decision is the number of stocks to be traded. </p>

<p>Usually, we just set a number (10, 50, 100, 200+) or whatever. But, this number can have a tremendous impact on overall performance and how a portfolio will behave in general. </p>

<p>As you increase the number of stocks in your portfolio, you are reducing the impact it can have on the whole. You are reducing the portfolio weights. </p>

<p>This has for side effect of reducing overall portfolio volatility and the size of portfolio bets. The easiest way to reduce volatility, therefore, without doing anything special, would be to increase the number of stocks to be traded. </p>

<p>Since volatility is tied to risk, this would reduce overall portfolio risk. A simple number that you do not even let your program decide since you will impose it in code right from the start and might even treat it as a constant.</p>

<p>Another view of the same number is the resulting weights themselves. For example, in my book, I have the following chart (figure 6.10):</p>

<p><strong>Random Weights</strong><br>
<img src="https://image-proxy.quantopian.com/2cba8e002ceddd8499786a6346afffb99acf39d6/68747470733a2f2f616c706861706f77657274726164696e672e636f6d2f7175616e746f7069616e2f4341504d2f4341504d5f316b6f5f35735f356b705f30303032645f30303032612e706e67" /> </p>

<p>It is the notebook result of having 5,000 portfolios with 5 stocks each and a 0.0002 reading for both the drift and alpha. A long-term upward trend of about 4 cents per day on a \(\$\)100 stock, equivalent to about a 10\(\%\) per year average return (market&#39;s secular trend).</p>

<p>However, should you change one line of code, keeping everything else the same and under the same conditions, the picture will change. Instead of leaving the portfolio weights being determined at random like in the notebook, you switch to a constant weight using: \(k = np.ones(n)\) (in the portfolio generation module). This replacing the line \(k = np.random.rand(n)\).</p>

<p>This gave you the following picture:</p>

<p><strong>Equal Weights</strong><br>
<img src="https://image-proxy.quantopian.com/679bce7e68127ebef5d3b057494e70a5e0f68902/68747470733a2f2f616c706861706f77657274726164696e672e636f6d2f7175616e746f7069616e2f4341504d2f4341504d5f316b6f5f35735f356b705f30303032645f30303032615f63772e706e67" /> </p>

<p>Instead of having weights randomly set, the weights were all made equal. This should be considered as a dramatic impact. The 5,000 randomly generated portfolios all behaved the same and landed on the same spot on the chart. It meant that your choice of picking the best performer out of the 5,000 was not even a bet since whatever your choice (yellow dot), it would have been the same result as any other.</p>

<p>This is something else to think about when you design your trading strategies. Some numbers have more impact than others even if they are not controlled by the program, but more like part of some procedure, policy or trading methodology. </p>

<p>Those two charts use the same optimizer in the same fashion, only the weighing is different. One is randomly weighted while the other uses fixed-weights. Yet, they say quite a different story. </p>

<p>On the first chart, you took your chances, the yellow dot could have been any one of the blue dots. Literally, you had 1 chance in 5,000 to get the best performing portfolio. While in the second chart, you had an assurance of selecting the best since you did not have other alternatives. All this just for considering portfolio weights as either fix or random.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5bef900dc43b813936a94103' id='5bef900dc43b813936a94103'>
<a href='#5bef900dc43b813936a94103'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5971e2308bc634000d022f24'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3fff8e67995978b6170deb9d9001a7b6?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5971e2308bc634000d022f24'>Joakim Arvidsson (Cream Mongoose)</a>
<span class='badge medal'></span>
</div>
<a UTCms='1542426637000' class='quanto-date posted-at response-posted-at' href='#5bef900dc43b813936a94103'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>What’s the argument? To choose fixed weights over random weights? I don’t know that anyone in their right minds would ever choose random weights? Shouldn’t the baseline for any “improved” weighing scheme be fixed weights? That fixed weights are always better than random, if you have a predictive model (or even if you’re just long the market), I thought was already a given.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5bf0abdd6f5469003d701f6e' id='5bf0abdd6f5469003d701f6e'>
<a href='#5bf0abdd6f5469003d701f6e'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1542499293000' class='quanto-date posted-at response-posted-at' href='#5bf0abdd6f5469003d701f6e'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Joakim, the argumentation on this is a bit more complex, yet simple, and sublime. </p>

<p>At its heart is the stock allocation problem. How much should we put on each stock in a portfolio at any one time?</p>

<p>We know that all stocks are not created equal. So, why should we treat them as such? </p>

<p>The answer would be: only if we do not know what is coming our way. Then, equal weights might sound like a reasonable course of action, or is it, or why not? It sure is easy to set up!</p>

<p>However, if we try to make predictive strategies, then, these weights should proportionally follow these predictions in order to optimize performance. The higher the predictive edge, the higher the allocation, the higher the bet size, the higher the relative portfolio weights. Resulting in the highest weights on the highest performers and the lowest weights on the nonperformers. Thereby, maximizing performance. So, equal weights, technically bad, a cop out. </p>

<p>If we do not know how predictive our “predictions” are, then, again, it might be reasonable to fall back on the equal weight scenario. But, by doing so, we are admitting indirectly that there might be no predictive power in the methodology used. </p>

<p>It would explain why one would revert back to equal weights which might not be the best solution since again all stocks would be treated with equal opportunities. Treating AAPL and BB on the same footing might not be a reasonable bet going forward since BB might not even survive. On the same basis, comparing AMZN, WMT, JCP, and SHLD some 10 years ago, where should you have put your bets then and in what proportions relative to a portfolio of 50, 100 or more stocks?</p>

<p>The important consideration here is that the program offers the optimizer only two types of return matrices, either with random or equal weights. In both cases, the sum of weights equal 1 (\(\sum \omega_j = 1\)), meaning total allocation, and that is more important than it seems.  We only have to look at the two charts to see there can be quite a difference in behavior between equal and random weights.</p>

<p>Which one is better is a totally different question? </p>

<p>All stocks are not created equal and do not behave the same. Therefore, there is no good reason to use equal weights, or maybe, random weights for that matter. Equal weights are often used as the lazy solution (the I do not know solution). Random weights are used for their luck factor, while a more organized weighting system would be on forecasted merits with reinforcements. But, as in anything else, to each his own.</p>

<p>If in the notebook, you set a seed, then the equal weight scenario will give the same answer every time. It would have frozen the selected set of stocks to that one in an infinite stock universe, similar to real life historical price records. If we use random weights, then the optimizer&#39;s response will be different every time for the selected portfolio (yellow dot). But, it would still generate the same average portfolio return for the average portfolio.</p>

<p>In reality, the question should be in simulating portfolio scenarios: do we use a seed or not? If we use one, we create a repeatable and unique stock universe out of gazillions of possible subsets. A subset of randomly generated prices series that will behave the same every time, and on which we could apply all types of trading strategies and refine them up to the point that they are highly productive. </p>

<p>However, that would apply to that particular seed. Changing the seed would change the selected stock subset, and all those trading strategies might fail due to a new seed or by commenting out that one line of code.</p>

<p>Whereas, with no seed, whatever program you might want to devise will require to directly address the issue of randomness and what to do with it.</p>

<p>For instance, in a no seed scenario, where return series are randomly generated, I would prefer the random weights. By simple luck of the draw, it might outperform the equal weight scenario by allocating more weight to a higher performing stock or giving a lesser weight to a lower performer. In both cases, doing better than the equal weight scenario where the higher performers will be dampened to the average while the lesser performer would be raised to average weight. In both cases, a lower performing portfolio.</p>

<p>The no seed scenario is closer to reality since most of the future remains an unknown. Notwithstanding, we are playing a numbers game where you can change the rules of engagement.</p>

<p>In my book (see previous post), a strategy&#39;s payoff matrix is given as: \(\sum_i (\mathbf{H}_a \cdot  \Delta \mathbf{P}_a )= n \cdot u \cdot \overline{PT}\) which transforms the whole portfolio trading environment to just a few numbers. </p>

<p>It is also shown that it is sufficient to have the following to outperform the averages:  \(\sum_i (\mathbf{H}_a \cdot  \Delta \mathbf{P}_a = n \cdot u \cdot (1 + \mu + \alpha)^t \cdot \overline{PT}\) where the alpha is the skills you bring to the game. I can say there are many ways to achieve this. Nonetheless, it does also say that your bet size will or needs to increase with time.</p>

<p>This is what is displayed in the two charts in the previous post. So, why the difference?</p>

<p>What the last chart reveals is that the optimizer is doing its job and that you are dealing with normalized price series with a zero expectancy. On the random weights, the optimizer always had adjustments to make which were translated into all those portfolios spread all over the place (the first chart). This not due to the randomness of the price series, but due to the randomness of the weights which would still average out to the same value as the equal weights.</p>

<p>By making the weights equal, the optimizer had nothing left to optimize. And all it could find was the same \( \mu\) and \( \alpha\) for each of the stocks, thereby confirming that the random-like component has a zero expectancy, which it has. This is major. It demonstrates that the equation is right. The last equation is stating that you can have a rising CAGR if you can provide some alpha!  Such a statement is in contradiction to the law of diminishing returns. But this does not make it wrong. Some of the charts presented do corroborate those findings, the equations prevail.</p>

<p>It was not discussed how we should organize these portfolio weights since the subject was not even explored. And, one does not have to be out of their mind to use random weights either, it is what the original notebook used, and it was acceptable for the point they wanted to make. </p>

<p>Furthermore, in the no seed scenarios, random weights become, more often than not, a better and more desirable alternative since often being more productive profit wise, and with lower volatility.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5bf5966d3f88ef0a5ae55e38' id='5bf5966d3f88ef0a5ae55e38'>
<a href='#5bf5966d3f88ef0a5ae55e38'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1542821485000' class='quanto-date posted-at response-posted-at' href='#5bf5966d3f88ef0a5ae55e38'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>From <a href="https://www.quantopian.com/lectures/fundamental-factor-models" rel="nofollow">Quantopian&#39;s Lecture 32</a>, we have the following equation:   </p>

<p>$$R_{a,t} = a_t + b_{a,F_1}F_1 + b_{a, F_2}F_2 + \dots + b_{a, F_K}F_K$$</p>

<p>It breaks down the return stream into weighted factors. As you add factors, the equation gets closer and closer to the realized return stream (as an increasing R-squared would indicate). It would look somewhat like the following time series which was randomly generated to simulate price movements.</p>

<p><strong>Random Price Model With Multiple Factors</strong><br>
<img src="https://image-proxy.quantopian.com/0a6b54ce32ba1b1335c3bec8891c0b8caa6d2bf9/68747470733a2f2f616c706861706f77657274726164696e672e636f6d2f7175616e746f7069616e2f58595a5f466163746f72735f336b5f366b2e706e67" /> </p>

<p>What the chart says is that as you increase the number of factors, the equations represent more and more the average underlying price movement. Even if the price series was randomly generated, we do get smooth lines representing the average. As we increase the number of factors, the R-squared value is increasing as it should.</p>

<p>Whatever was prior to that chart, or after it for that matter, had no relevance since the chart was randomly generated. The first 5 factors in that chart were sufficient to reach 90.85% for its coefficient of determination. It means that if you added more factors, they would have to take a fraction of what is left.</p>

<p>But already, as you added factors, the values changed. If you wanted to use 4 factors, you had: \(y = 49,227 \,–\, 0.0069x \,+ 7E^{-05}x^2 - 4E^{-08}x^3  + 6E^{-12}x^4 \quad \quad \) with an R-squared of 0.8886. By adding one more factor (5 factors) you got:<br>
\(y = 43,506 + 0.0501x - 7E^{-05}x^2 + 8E^{-08}x^3  - 4E^{-11}x^4 + 6E^{-15}x^5 \) with its R-squared of 0.9085.</p>

<p>Just by adding a factor, going from 4 to 5, changed the \(x^2\) term from positive to negative. What was that? If your \(x^2\) factor had some relevance, should it not have at least stayed positive?</p>

<p>Nothing on that chart could say that there would be any continuation, either before or after. The easy demonstration would be to provide the prior 3,000 data points with their relative factors. </p>

<p><strong>Random Price Model With Prior Multiple Factors</strong><br>
<img src="https://image-proxy.quantopian.com/6d690cb630bba0378b1bcc022aa5c626877af3c6/68747470733a2f2f616c706861706f77657274726164696e672e636f6d2f7175616e746f7069616e2f58595a5f466163746f72735f305f336b2e706e67" /> </p>

<p>The first chart was a continuation of the above chart. It only displays a different section of the same time series.</p>

<p>A price time series does not generate alpha. Nonetheless, you can gain some alpha from the selection process itself by picking stock that perform better than the averages. But this could be from your expertise and knowledge, or simply by luck of the draw. As in: lucky you, you picked a good one. </p>

<p>But trading adds another dimension to the problem. It is like trying to predict sections of the presented curves from what is always the right edge of a chart. At any one point, could you predict the next step, or the one 10 or 100 steps ahead? That is the big question. The answer should be: certainly not in this kind of randomly generated trading environment. No matter how many factors you want to throw in the rink.</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c0c6bbcbe8f3e003556c9d7' id='5c0c6bbcbe8f3e003556c9d7'>
<a href='#5c0c6bbcbe8f3e003556c9d7'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1544317884000' class='quanto-date posted-at response-posted-at' href='#5c0c6bbcbe8f3e003556c9d7'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p><strong>The Secular Long-Term Drift</strong></p>

<p>What was demonstrated in my latest book ([Beyond the Efficient Frontier][1]) was that the market&#39;s average secular trend could be considered as sufficient to explain most of the general underlying long-term price movement in stock prices. To make the demonstration, price series were not decomposed into various factors, but simply reconstructed from scratch using an old stochastic model that has been in use for decades.</p>

<p>Even as a rough approximation to the real thing, it was sufficient to extract similarities between millions of simulated portfolios using randomly generated price series and portfolios that would be composed of live market data. Thus, providing some statistics on their similarities.</p>

<p>The stochastic equation used is simple:  \(F(t) = F(0) (1 + µdt + σdW)^t\)  which states that the funds put to work start at their initial value to which is applied a compounding long-term rate of return that is allowed to randomly fluctuate with time. </p>

<p>When you take off the stochastic part which tends to zero over the long term anyway, you can reduce the equation to:  \(F(t) = F(0) (1 + r_m)^t\)  which gives the long-term market CAGR. For the past 240+ years, the average US market trend (\(r_m\) ) amounted to a little less than a 10% CAGR, dividends included. That is if you participated for 30 years or more. Therefore, we should not be surprised if it became the long-term expectancy for fund indexers and active players alike. As if saying that achieving less should not even be an option.</p>

<p>To reach that conclusion, the book rebuilt tons of portfolios of randomly generated price series. Using the supplied program, millions of portfolios could be generated using a Python one-liner: 
<code>
return_vec = np.random.randn(n_assets, n_obs)  
</code> which generated normally distributed return series for each asset for the desired number of observations which for simulation purposes were calibrated into day equivalent price movements. </p>

<p>Thereby, you could recreate portfolios of any size for any duration enabling the study of their characteristics and idiosyncrasies. All price time series were considered on the same level since they were constructed on the basis of percent change from period to period. A 10% move in any one stock is still a 10% move, no matter its price. Doing this normalized all price series.</p>

<p>Also, since no seed was used in the random number generator, all price series would be unique as if taken from an infinite stock universe and thereby making each portfolio unique with no chance of ever having a duplicate price series or portfolio. The interest would be on their averaged behavior over time, their expected outcomes.</p>

<p><strong>The No Secular Trend Scenario</strong></p>

<p>First, consider the scenario without a trend (µdt). You would be left with the random-like component as the only source of return:  \(F(t) = F(0) (1 + σdW)^t\). We might think that the first property of such portfolios would be their unpredictability, but we already know their average expectancy, and therefore, could predict, almost surely, that it would tend to F(0). This was by construction with for consequence no expected long-term profits since the sum of the random fluctuations (σdW) tended to zero:  \(F(t) = F(0) (1 + 0)^t = F(0) \).</p>

<p>By design, the mean of each price series would tend to zero with a standard deviation of one. This implicitly meant that the average portfolio return ( \(r_m \)) would tend to zero. There was no profit expected from such a contraption. The sum of many zeros is still zero.</p>

<p>How could this be accomplished in real life trading? Simple, detrend all price series, what will be left is the random-like component. A trader is dealing all the time with the right edge of a price chart, and this will force adapting their game to the circumstances. As was explained in the book, at the right edge of a price chart, the trader is facing odds close to 50/50.</p>

<p>This also implied that none of the conventional tools we might use to predict what is coming next could be of any use. That you did 50,000 portfolios at a time with hundreds of stocks each, it would not change the general picture. The expected outcome would still be zero. You could not even predict, better than a 50/50 proposition if it would end on the positive or negative side of zero. </p>

<p>There is not much you can say about randomly generated time series, especially normally distributed return series. All you have is a Gaussian distribution with zero mean and a standard deviation of one. And yes, 99.7% of all the data will fall within 3 standard deviations.</p>

<p>There are no seasonalities, no periodicities, no patterns, no candle formations, no cycles or regime changes, no certainties that you can rely on as repetitive or otherwise. There evidently is no fundamental data, no bellwether series, no indicator that could provide a hint of predictability. You could always try to find those patterns and factors, and at times find some, but they would be, at best, coincidental occurrences of random events with again no real predictive powers.</p>

<p>There is no artificial intelligence, no deep learning, no signal processing, or other processes that could uncover whatever kind of predictability from a normally distributed return series. No wavelet thing, no Fibonacci, no fractals, no golden ratios, no moon cycle or Kondratieff wave. You could not count on Elliot waves or spectral analysis either. None of it has ever been of predictive usefulness on normally distributed return series. The reason is simple, none could.</p>

<p>It would be sufficient to carry out a few simulations in succession, using whatever trading method you want, to show that just changing the randomly generated price matrix would be enough to have all those methods break down. Running a new simulation only requires to rerun the program. Pressing  and your well-intended trading strategy, like a house of cards, would collapse. </p>

<p>That it be on randomly generated simulation like those performed in the book or real future market data, both are close to a continuous chain of random-like events ready to unfold. In trading, what is important is to know what to do at the right edge of a price chart.</p>

<p><strong>The Long-Term Trend</strong></p>

<p>It is only when you add a long-term drift to the portfolio creation process that the picture changes. Refer to the first equation:  \(F(t) = F(0) (1 + µdt + σdW)^t \). </p>

<p>The simulations showed it was sufficient to recreate portfolios with an average long-term trend to mimic the market average ( \(r_m \)). It had predictability since what was added was just a straight line (µdt) which was given values of:  <code>
µdt = 0.0001dt, or  0.0002dt
</code>. A value of <code>
0.0001dt  
</code> was equivalent to a long-term upside bias of about 2.5% average return per year.</p>

<p>The long-term drift appeared sufficient to explain what was out there. As if saying: this is what is available. In a way, it does make some statistical sense. A stock portfolio would be like a sample taken from the whole available market. And on randomly generated portfolios taken from an infinite stock universe, whatever selection could be viewed as a sample from this infinite universe.</p>

<p>You want to play for the long term, then you should expect the market average for your efforts since it is the most probable outcome. But, even if indexing is big business, you can do better than market averages simply by adding trading to your portfolio building process. Adding skills and expertise (positive alpha) to your trading strategies can lead to even higher returns:  \(F(t) = F(0) (1 + µdt + αdt + σdW)^t \) since this alpha is also compounding. </p>

<p>The long-term trend is acquired by being fully exposed to the market, and the skills (alpha) comes from what you put in the trading procedures you design.</p>

<p>[1]: <a href="https://www.amazon.com/dp/B07KGMZMPS" rel="nofollow">https://www.amazon.com/dp/B07KGMZMPS</a>  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c127e1b1e646500437228ac' id='5c127e1b1e646500437228ac'>
<a href='#5c127e1b1e646500437228ac'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1544715803000' class='quanto-date posted-at response-posted-at' href='#5c127e1b1e646500437228ac'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>No one seems to want to consider how much randomness there is in stock prices. The question should be why? It might be the most important question of all. Even if not, it would still be more than worthwhile to investigate how much there is. Depending on the answer, it could simply force us to remodel or at least transform our trading strategies and the way we play the game.</p>

<p>The problem is: how should we define randomness in stock prices in the first place? </p>

<p>Do we go the martingale route, even if it does not apply, or define it as a Gaussian distribution with extras? We already know that stock price distributions are not normal or I.I.D., but more like some Paretian distribution thing with fat tails. Regardless, declaring it something or whatever will not change the nature of that randomness or make it more predictable?</p>

<p>In stock trading, it is what you do at or from the right edge of a price chart that matters. If you are not in the market, all you can express are lost opportunities. It is following your decision to enter into a trade at a chart&#39;s right edge that your profit or loss starts to accumulate. </p>

<p>You might find and define stock pattern over past data, but when it goes to playing the game, you will have to declare those patterns before they occur, not after where you cannot profit from them since you will again be at the right edge of the price chart.</p>

<p>One thing that is almost for sure, the stock price will not remain idle over extended periods of time. You will not get: p(t) = p(0), therefore, forget about the martingale. You might cross p(0) many times, but most probably, as time increases, you will get further and further away from p(0), either on the positive or negative side. Stock prices can go up for decades just as they can drop to nothingness in a hurry. In either of those scenarios did they mean-reverse.</p>

<p>It goes like this: if you do not address the notion of randomness in your trading strategy, does it go away? Can it be ignored!!!  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c1ae21fa3f2e6003f06a5b3' id='5c1ae21fa3f2e6003f06a5b3'>
<a href='#5c1ae21fa3f2e6003f06a5b3'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1545265695000' class='quanto-date posted-at response-posted-at' href='#5c1ae21fa3f2e6003f06a5b3'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Should we see this trading game as a 50/50 I.I.D. proposition? Then, most likely, we will have to consider that what we are looking at is basically gambling with no assurance of an immediate or long-term payoff. </p>

<p>Gambling away does not necessarily mean you lose the game. It only says that you are gambling. And therefore, might still win the game by chance. Not as an inherently bad proposition, but more from what will be a multitude of 50/50 bets with their mathematical, statistical built-in expectations and consequences.</p>

<p>Any bell-shaped distribution might appear as close to a 50/50 proposition, even a Paretian distribution with fat tails. This is what we are faced with when trading, our next decision will be as if at the right edge of that price chart. As if asking the question: will it be heads or tails?</p>

<p>What is your risk on such a proposition? Not much. Your long-term expectancy is zero. Therefore, no win, no loss. In all logic, in a no win no loss scenario, whatever risk there might be should be considered as minimal as long as you play for a long time and that your running stake far exceeds the variance boundaries of the game. This will require making small bets in order to survive any losing streaks of any length. </p>

<p>The all-in scenario on every bet will nonetheless assure you to lose the game. You could invest for the long term that way but should not trade in that fashion. Full market exposure, for a trader, should be defined as using many small bets. Whatever your betting system, it is like a series of returns and could be expressed as: \(F_0 \cdot r_j(t) = F_0 \cdot \prod (1 + r_i) \) for \( i = 1, \dots, n\), and where if  \(\exists r_i = -1 \) will result in: \(F_0 \cdot r_j(t) = 0\).</p>

<p>If there is a fee to play the game, then, in all probabilities, you have a negative proposition where you are bound to lose the longer you play. What you might get out of such a game is simple too: some form of entertainment you have paid for. It is just like a little hamster on his running wheel, just running to nowhere at whatever the speed.</p>

<p>That you model price movements to stochastic equations does not change the nature of the problem. The randomness does not go away. </p>

<p>In the last notebook, a Python one-liner: return_vec = np.random.randn(n_assets, n_obs) generated normally distributed return series with mean zero and standard deviation of one. </p>

<p>The optimizer used in that notebook was able to extract even low drift values. To start moving the scale, it was sufficient to add a drift with a magnitude of \(0.0001σdt\). That is 0.01% of the considered standard deviation (σ) of one. Doing so, moved the distribution&#39;s average expected mean from zero to \(0.0001σdt\). To gain a sense of its magnitude, it is like adding one cent per day to a $100 dollar stock that had an average $1.00 standard deviation. With the vast majority of its price moves (99.7%) within +/- $3.00 (+/- 3σ).</p>

<p>A 2-cent upward drift per day on the same $100 dollar stock looks insignificant. And yet, it was sufficient to explain the long-term upward drift on randomly generated stock prices. The added drift had for impact: \(r_j(t) = r_j{_{_0}}  + (\mu_j + 0.0002 \sigma_j ) dt + \sigma_j dW_j\). </p>

<p>The mean (µ) was set to zero and sigma (σ) set to one by construction. While the initial rate of return at the intercept was zero at time t = 0: \( r_j{_{_0}} = 0 \). Thereby, leaving: \(r_j(t) = (0.0002 \sigma_j ) dt + \sigma_j dW_j\) which explains the stochastic equation in terms of sigma and its Wiener process. Making the \(0.0002σdt\) the most significant part since the impact over the long term from the Wiener process would tend to zero.</p>

<p>My latest book stresses the fact that if you could extract more than what the market has to offer, it would require that you increase the \(0.0002σdt\) part of the equation or add something to it. It would be this excess which would translate into alpha. Already, the \(0.0002σdt\) upward drift appears as if built-in. Even if you could factor it out, it would remain as if the average secular upward trend we see, on average, in stock prices.</p>

<p>If we raised the average long-term rate of return to \(0.0004σdt\), then we would declare the added \(0.0002σdt\) as alpha. These are not big moves. A \(0.0001σdt\) is about 2.5% per year on a $100 dollar stock. But then again, the game is compounding over time. And one thing the book does demonstrate is that a little alpha can go a long way.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c1f9d0218190500457c4304' id='5c1f9d0218190500457c4304'>
<a href='#5c1f9d0218190500457c4304'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1545575682000' class='quanto-date posted-at response-posted-at' href='#5c1f9d0218190500457c4304'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>What has been presented, thus far, is a major departure from the traditional way we look at stock price series. Even with all the models we design, some of the classic stuff can still be upgraded or improved upon. Such is the case with the stochastic model that has been in use for over a century.</p>

<p>The change in itself could be considered minor. In some cases it is, and often not that visible. Nonetheless, there is a major difference even if it all looks like similar equations.</p>

<p>The classic vision is based on the following equation: \(r_j(t) = r_j{_{_0}}  + \mu_j dt + \sigma_j dW_j\)  where you have an intercept with a linear drift and a random-like Wiener process which defines the return stream for a particular stock \(j\)  (a straight regression line to which is added some random stuff as residuals having a near zero expectancy). </p>

<p>It could be used to approximate a portfolio&#39;s future value: \(F(t) = F_0(1+\bar r_j(t))^t\) where \(\bar r_j(t)\) would be the market&#39;s average long-term CAGR. Evidently, \(\bar r_j(t)\) would be swinging all over the place. It would depend on when, (at \(t\)), the measurement would be taken. The CAGR formula is simple: \( (F(t) \div  F_0)^{1/t} – 1 =  \bar r_j\). Whatever the portfolio&#39;s future value, you can get its CAGR or at least make an estimate of the return required to get there.</p>

<p>We could also factor it out such as: \(r_j(t) = a_{t=0} \cdot (1 + b_{a,F_1}F_1 + b_{a, F_2}F_2 + \dots + b_{a, F_K}F_K)^t\) where the sum of these weighted factors would need to correspond to the following: \(\mu_j dt + \sigma_j dW_j = b_{a,F_1}F_1 + b_{a, F_2}F_2 + \dots + b_{a, F_K}F_K\) since the return stream \(r_j(t)\) is the same.</p>

<p>No matter how many factors you want to extract, only the first few might have some value since you are faced with a power law. Nonetheless, most of it would correspond to the \(\mu_j dt \) part of the equation. All other factors would be trying to extract something from it and the random-like component of the stochastic equation. </p>

<p>Since \( \sum \sigma_j dW_j \to 0 \) over the long term, this would tend to annihilate the cumulative value of all the other factors: \( \sum (b_{a, F_2}F_2 + \dots + b_{a, F_K}F_K) \to 0\). The more factors you would consider, the less each one would contribute to the whole. It would be like trying to give more and more significance to the random-like component of the stochastic equation.</p>

<p>Should you predict: \(\tilde \mu_j dt \), should it really be considered a prediction? You would tend to get the market&#39;s average return \(\bar r_j dt \) just for participating in the game. The easiest way to get it is to buy a low-cost index fund and wait. </p>

<p>If your prediction produces less than \(\bar r_j dt \), can we still declare that a prediction? How about if the factors you extracted summed to less than \(\mu_j dt + \sigma_j dW_j\)? Are you not just extracting part of what is the same thing and that you simply defined differently?</p>

<p>Also, one should not consider that there is some alpha hidden in \(\bar r_j dt \). There certainly is no alpha in the random-like side of the equation and this by definition. The sum of all the factors you would like to extract cannot go beyond. As if putting a limiting barrier to what could be extracted. Is it not saying that what all those factors could extract is limited by the secular trend \(\bar r_j dt \)?</p>

<p>You are getting your expected CAGR \(\hat r_j dt \) simply by taking a stock sample from the market&#39;s huge population, a statistical problem. Buying SPY which in itself is a collection of stocks can only produce SPY&#39;s CAGR or something close to it since some of the weighing will change with time. But, you will not get more than what it is, no matter how you would want to factor things out.</p>

<p><strong>Where is the Alpha?</strong> </p>

<p>It is with a “trading” trading strategy that you can generate some alpha.</p>

<p>Look at an alpha augmented equation, as is being proposed. It can accommodate the impact trading, investing, and portfolio management skills could have on the overall return:  $$r_j(t) = r_j{_{_0}}  +  \mu_j dt + \alpha_j dt + \sigma_j dW_j$$ Evidently, on the condition that there were positively impacting skills to be had. This excess return stream will need to be seen in the portfolio&#39;s payoff matrix. Otherwise, how could you say you had some?</p>

<p>If the alpha is zero (\(\alpha_j = 0\)), the above equation reverts to the first one. The one we have been accustomed to for ages. If the alpha is negative, (\(\alpha_j &lt; 0\)), then your actions are technically harming your portfolio by generating less than it should. Meaning that without your trading intervention it would produce more. A smoother way of saying you are the one screwing it up.</p>

<p>The above equation is considering skills as part of the return stream. This alpha can be positive or negative, meaning that in some cases, those skills can even be detrimental to a portfolio&#39;s well-being. </p>

<p>If you do a Buy \(&amp;\) Hold, then the classic equation covers it all. However, for an active portfolio, trading happens, and as a consequence, the augmented equation is more appropriate. It will account for the trading skills applied, that they have a positive or negative impact.  </p>

<p>Once in a while, someone writes stuff that is there to force us to reconsider the very foundations on which we are building our stock portfolios. Going as far as changing the equations which supported those theoretical frameworks for decades. And yet, nobody seems to notice due to the slow diffusion process used in the dissemination of these ideas.</p>

<p>Modern Portfolio Theory depends on the EMH (Efficient Market Hypothesis) and will state that the most efficient portfolio resides on the efficient frontier, and is tangential to it. It represents the optimal market portfolio. But, that is for the Buy \(&amp;\) Holder where stock selection will need to dominate. However, for a trading portfolio, the alpha augmented equation is more appropriate and represents better the efforts put in all the trading activity. My latest book elaborates a lot on this.</p>

<p>MPT has been ingrained in the financial literature for decades to such an extent that practically no one even questions the foundations on which these principles were established. Not that they are not acceptable as some basic foundation, but only in the sense that you can do better. It is not a significant departure from what is there. It should be considered simply as building on everyone else&#39;s shoulders. </p>

<p>It might not make that much of a difference in the short term, but it will make quite a difference over the long term since the added positive alpha is compounding, as in: \(F_j(t) \cdot (1 + \bar r_j(t))^t = F_j{_{_0}} \cdot (1 + \mu_j + \alpha_j)^t\).  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c28dc1af722a448f6727d34' id='5c28dc1af722a448f6727d34'>
<a href='#5c28dc1af722a448f6727d34'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1546181658000' class='quanto-date posted-at response-posted-at' href='#5c28dc1af722a448f6727d34'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p><strong>Is It Overfitted Or Misfitted</strong>?</p>

<p>The notion of overfitting and over-optimizing in automated stock trading strategies has been over-documented in the financial literature for quite some time. What I often see however are poorly designed trading strategies that should be better classified simply as misfitted and using worthless concepts or trading procedures for the job.</p>

<p>In a nutshell, an “automated” stock trading strategy says: this is how I see the structure of this trading environment. My program will do this and that, ..., and will win the game. </p>

<p>Some consider a trading program well designed if it does not crash. It most certainly is not enough! In reality, and often, we should ask the question: how could the program&#39;s developer ever design such a piece of crap? Doesn&#39;t he/she know better? Elementary tests would have revealed that there was nothing there, yet they still put it in our faces anyway. These misfitted programs can become quite expensive due to the subsequent losses they may incur. </p>

<p>When these misfitted programs fail, they get reclassified as training frameworks or for educational purposes only. I usually classify those as double whammy programs: you paid for them upfront, and then you pay again even more by using them.</p>

<p>Poorly designed trading strategies usually do not work so well going forward. Take it as a euphemism. The reason should be more than obvious. Yet, most still want to qualify them as if they did work under specific circumstances over some selected past data from which they then get their over-optimized or overfitted qualifiers.</p>

<p>But when you dig deeper into the code (should you be able to see the code) you can find the faults, the unsubstantiated claims and premises, the misconceptions, the blurry math and misunderstanding of what they are really doing in code. The code will work since the program has been debugged but will fail to generate the level of expected profits which were supposed to be the program&#39;s raison d&#39;être.</p>

<p>It is only after such trading strategies fail to deliver according to their design that they inherit the overfitted moniker as some form of consolation, usually after much is lost. </p>

<p>The misfitted strategy was bad from the start (had no real foundation in reality) which is why it also did not work going forward either. All it gets as reprimand is that it somehow overdid it, as if a slight exaggeration, or that some market regime has changed. Anything, as long as the strategy itself is not to blame. As if the machine used or the market was the culprit for the program being literally worthless. How could the author of the program be responsible for that anyway?</p>

<p>A misfitted trading strategy is simply that: a misfitted strategy. It does not need other qualifiers, it was just badly designed. A program wants the market to do this and that, the market does not, and it is the fault of the market. Come on... do put the horse before the cart.</p>

<p>We use past data to give us an idea of how our programs will work. But there is no money in that. They are just simulations over past data. What counts is what those programs will do going forward, not in out of sample testing where no money is involved, but in real life under real-life conditions. That is what our programs will have to face, then design them accordingly.</p>

<p>A Buy &amp; Hold strategy, for instance, would qualify as fitting the market as is. It would be in a 1:1 relationship. It would be like saying that buying SPY and holding for a long time you would get SPY&#39;s return whatever it might be. You could translate this to: \(F_0 \cdot ( 1 + r_{<em>{SPY}} )^t\). Except that, going forward, you do not know what \( r</em>{_{SPY}} \) will be? And it matters. However, one thing you do know, it will be close to the actual long-term market averages, giving it time.</p>

<p>Should you want to do better than holding SPY, you will then need to slice and dice the time series in such a way as to produce more. And it is here that a trading strategy needs to show its merits. It should be considered worthwhile only if the profits generated from trading resulted in a higher CAGR than just holding SPY. $$F_0 + \sum (H \cdot \Delta P) &gt;  F_0 \cdot ( 1 + \bar r_{_{SPY}} )^t$$Otherwise, you would appear to be losing the game by doing less than average. It will be about the same problem for any of the stocks in your portfolio. </p>

<p>Stock prices movements do not seem to follow strict rules that well. Another euphemism.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c3d5448d5030e00494ea74c' id='5c3d5448d5030e00494ea74c'>
<a href='#5c3d5448d5030e00494ea74c'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1547523144000' class='quanto-date posted-at response-posted-at' href='#5c3d5448d5030e00494ea74c'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p><strong>Trading Stocks Generate Its Own Problems – Part I</strong></p>

<p>What does it take to win the stock trading game? It is not just a rhetorical question, but nonetheless, it does encapsulate a whole gambit of related questions from what is the game about to how to assure yourself you will, in fact, win the game. </p>

<p>First, the trading game is very very simple. You repeat the same one thing over and over again under uncertainty.</p>

<p>The game itself is too simple not to understand it within a few minutes. You buy some shares (\(q)\) of a selected stock: \( q ∙ p_{in} \) and resell them later at \( q ∙ p_{out} \). Your profit or loss on the trade will be: \( q ∙ \Delta p = \pm x. \) Trading implies repeatedly getting in and out of positions. And that is where the problem starts.</p>

<p>In a way, it is like any other business where you buy something to resell it later at a profit, that it be some merchandise, financial instrument, real estate or whatever. On any one transaction, you want it to terminate with a profit: \( \Delta p &gt; 0 \)  or  \( x &gt; 0. \) If you opt to hold the shares, you want them to appreciate over time and again show: \( \Delta p &gt; 0. \)</p>

<p>The end result of trading is simple too: you just add up the outcome of all the trades taken (profits and losses) over the investment period: \( \sum^n_i x_i \) where \( i = 1, …, n \) identifies the trades by a numbered sequence as they occur. </p>

<p>A simple running total (your trading account liquidating balance) can keep track of where you are. It might not matter that much how you trade since in the end it will that sum: \( \sum^n_i x_i \) that will prevail, whatever that ending number may be. Therefore, why not plan for that outcome? Not by designing a trading strategy in the hope you will reach your goal \( \mathsf{E}[\sum^n_i x_i], \) but by designing one that will.</p>

<p>You can keep the shares you buy for as long as you want or more appropriately for as long as you can. For whatever reason, you can dispose of them at any time of your choosing, either at a profit or a loss. You can even hold until a stock goes bankrupt should you want to.</p>

<p>It is all your choice: which stocks you buy or sell, when you do, and in what quantity. Evidently, within the limits of your trading account. You can do all the trade decision-making yourself or let it be done by someone else: another trader, some firm, a computer program, even your own software program residing on some machine somewhere.</p>

<p>The trader has a few problems to solve, and they come with the job to be done. Meaning that it is because he trades that these problems will surface. In essence, the trader by his very actions is generating the problems that need to be solved.</p>

<p>One that is of importance is in the nature of the game played. The trader cannot just do one trade, which could last a few days, then go away and retire on his winnings. He will have to do many many trades especially if his bets are a small fraction of his ongoing equity and are of relatively short durations. Because they will be of short duration, they will bring with them other problems to be solved. If the trader wants to finish ahead, meaning win the game, then it will be required and essential that: \( \sum^n_i x_i &gt; 0. \) A win, here and there, is not enough.</p>

<p>The tactical problem is that the game is played with real money. It is not a simple Monopoly game. It really involves our future and can have quite an impact that we do the job ourselves or delegate it to whatever other decision processes. What we will find out is that no matter what we choose as trading decision surrogate, it will always be our money that will be on the line. And we do not want to hear: do not pass GO, do not collect.</p>

<p>That you like it or not, there is some math in the game. All the trades you might do might not be the same, nonetheless, adding their respective outcomes is just an addition: \( \sum^n_i x_i, \) no matter how many trades there are or whatever their outcomes. And this is where you get into trouble. It is with the word: many.</p>

<p>The problem is that traders do not win all their trades. The words: certainty, assuredly, and for sure, are not part of the vocabulary. However, the words: might, could, hopefully, are sprinkled all over the place as in a probabilistic way, even when traders cannot give the odds on winning the next trade or in fact any of their trades. </p>

<p>The math is \( \sum^n_i x_i = (n - \lambda) ∙ \bar x_{+}  + \lambda ∙ \bar x_{-}, \) where \(\lambda\) is the number of losing trades, and \( \bar x_{+} \) the average profit per winning trade, while \( \bar x_{-} \) is the average loss per losing trade. As \( (n - \lambda ) \) approaches \( \lambda, \) we can observe that the win rate is approaching 50\% which in a way is not that good for a trading system especially if \( \bar x_{+} \) is also approaching \( |\bar x_{-}| \). Since in such a case the total profit might tend to zero: \( \sum^n_i x_i \to 0. \) And, that is not a good way to build a long-term portfolio.</p>

<p>If you design your trading strategy to have an average profit on winning trades to be about equal to the average loss on your losing trades: \( \bar x_{+} \to |\bar x_{-}|, \) then you will only have your win rate to provide you with an edge: \( (n - \lambda) &gt; \lambda, \) as in: \( (n - \lambda) / \lambda &gt; 1. \)</p>

<p>The average profit \( \bar x_{+} \) is acting as the average profit target while \( \bar x_{-}, \) the average lose per trade, is behaving as the average stop loss for the trading strategy.</p>

<p>Whenever you run a software simulation of your trading strategy you will get these numbers as a consequence of all the trades taken as part of the aftergame statistical compilation, a snapshot of what your trading strategy did. Whereas, you should have programmed your strategy to work on those essential numbers to generate what you wanted. Since in the end all those strategies will show that those are the numbers that will matter, shouldn&#39;t we therefore concentrate on them first and foremost. You want to win, then design your automated trading strategy to do just that.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c3fcab8db574c00476a5900' id='5c3fcab8db574c00476a5900'>
<a href='#5c3fcab8db574c00476a5900'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1547684536000' class='quanto-date posted-at response-posted-at' href='#5c3fcab8db574c00476a5900'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p><strong>Trading Stocks Generate Its Own Problems – Part II</strong></p>

<p>In <strong>Part I</strong>, it was shown that the following equation resumed the outcome of a trading strategy: \(\,\sum^n_i x_i = (n - \lambda) ∙ \bar x_{+}  + \lambda ∙\bar x_{-},\,\) where \(\,\lambda\,\) was the number of losing trades, \(\,\bar x_{+}\,\) the average profit per winning trade, while \(\,\bar x_{-}\,\) was the average loss per losing trade. The equation says, of all the trades taken there will be \(\,\lambda\,\) losing trades with an average loss per trade of \(\,\bar x_{-}.\) The remaining trades will have an averaged positive outcome.</p>

<p>Each time a simulation is performed, those numbers become available for analysis and can help to statistically describe what the trading strategy has done over the period where it was applied. To know the average profit or loss per trade is simple, you take the sum of all profits and losses \(\,\sum^n_i x_i\,\) and divide it by \(\,n,\,\) the total number of trades. You know the average profit or loss \(\bar x\) will tend to some constant the more the number (\(n\)) of trades is large. A direct consequence of the Law of large numbers. You also know you will not win all the trades all the time, hence \(\,\lambda\).</p>

<p>Put the equation in <strong>Excel</strong>, it is not that complicated. Take some of your own simulation results. What it will show are some of the limits your trading strategy might have. Without knowing these limits, what kind of expectation could you extract from your strategy? </p>

<p>Following is a snapshot that could get you started. I used <strong>[Leo C&#39;s tearsheet][1]</strong> as an example since it had 
<code>
round_trips=True  
</code> in its backtest analysis. Thanks, Leo.</p>

<p><img src="https://image-proxy.quantopian.com/7b7145441266e619e54d2e7817d63ade66b54102/687474703a2f2f616c706861706f77657274726164696e672e636f6d2f7175616e746f7069616e2f53747261746567795f4571756174696f6e2e706e67" /> </p>

<p>Is presented a general section and an example from the cited Quantopian tearsheet. The first column increases the number of trades by a factor of 10. The win and loss rates determine the percentage of trades that finished with a profit or loss. The average win and average loss columns give the average amount won or lost per trade. The rest of the columns take the total profit \( \sum^n_i x_i \) to give the CAGR corresponding to the number of years it could have taken to get there. The yellow cells are used to build scenarios based on the equation at the top of the chart, the rest are formulas.</p>

<p><strong>There Is Math To This Game</strong></p>

<p>That we like it or not, there is math to this game. </p>

<p>The equation above prevails no matter what is the composition of your trading strategy. The above table says a lot. The more trades are performed (while keeping the same edge) and the shorter the time interval used to do the job, the better the CAGR.</p>

<p>Thereby saying, the number \(\,n\,\) of executed trades matters. And how long it takes to execute these trades matters too. It is like if you were in this race to terminate your \(\,n\,\) trades as fast as you possibly can.</p>

<p>Performance degrades very fast should you take longer to execute the same outcome as illustrated in the following chart which uses the \(\,n = 10,000\,\) line. It does say that the longer you take to execute all those trades, the lower the CAGR will be. And it degrades fast. Note that using another line will only change the scale, not the shape of the curve.</p>

<p><img src="https://image-proxy.quantopian.com/be43cb82fdf48a83e887b4ac8f51d4489d749fe8/687474703a2f2f616c706861706f77657274726164696e672e636f6d2f7175616e746f7069616e2f53747261746567795f4571756174696f6e5f434147525f43686172742e706e67" /> </p>

<p>What should we take out of this? We should look at the numbers and figure out how we could improve on them no matter what our trading strategy may be. With all other things being equal, we could look at the problem from the point of view of one variable at a time. We increase the number of trades over the same time period, it improves the picture. We reduce \(\,\lambda\,\) the number of losing trades, we improve the end results. We compact those trades into shorter time intervals, that too will improve performance. We positively increase the spread (the strategy&#39;s edge) between our average win and average loss, it will also improve overall results.</p>

<p>These measures did not deal with the nature of the trading strategy, only its math and how it will end. The what we do to accomplish this task could be anything that shows its mark in a backtest, even if it is not related to the way we usually operate, as long as there is some logical reason for it to do what it does.</p>

<p>It might not even matter if you are operating of the fumes of white noise to get your performance as long as you get it and that there is some rationale that can justify your method of play. You want to game the game, go ahead, but know why you are doing it while keeping a long-term vision of the goals you want to reach. Gambling your way out based on your know-how is also admissible. Your trading account will not be able to tell the difference either way or which trading methods you used. In fact, it will not even care what you used to make the account grow. It will only tally the results one trade at a time.</p>

<p>If you modify your code and the number of trades is somehow reduced, the other variables in the equation will have to work harder to compensate. And if they do not, the strategy will degrade even faster. You are not in a search for some equilibrium, the real task is to maximize the outcome \( \sum^n_i x_i \) using whatever you have available and do the job as fast as you possibly can.</p>

<p>A simple question like: how do I increase the number of trades becomes important? You know it will have an impact if you do so, then it becomes your task to make it happen within the limitations of your trading account. A simple solution would be to do more of whatever your strategy is already doing which, on average, provided you with your positive edge.</p>

<p>For instance, under the same trading conditions as Leo&#39;s tearsheet, one could find ways to increase the number of trades per year. From the tearsheet charts, trading volume, exposure, number of trades are relatively constant. Therefore, and due to the size of the sample, we could use those numbers as averages to make projections on an annual basis.</p>

<p><strong>Doing More</strong></p>

<p>A few lines were added to the first chart as shown below:</p>

<p><img src="https://image-proxy.quantopian.com/b96f2a49280a45a8b1183307fe19cf28fdcb0eab/687474703a2f2f616c706861706f77657274726164696e672e636f6d2f7175616e746f7069616e2f53747261746567795f4571756174696f6e5f456e68616e6365642e706e67" /> </p>

<p>It starts by converting to a per year basis (see &quot;IF per year&quot; line) where the number of trades is the average per year. Each year, the average outcome is added to its performance. We can still see the CAGR degrading over the years. This view is more realistic than the previous one since they do match what is coming out of the tearsheet. Therefore, the strategy, with no fault of its own, will see its CAGR degrade with time as if the strategy was breaking down when all that is needed would be to compensate for the deterioration.</p>

<p>To compensate the CAGR degradation, it appears sufficient, in this case, to increase the number of trades by 2.3\% per year. This is not a major move. It is adding over its first year 261 similar trades to its 11,353 (about 1 trade per day). </p>

<p>If the 2.3\% increase was sufficient to maintain the long-term CAGR, going to 5.0\% is enough to see the CAGR rise over the years. This is an expanding CAGR. The more you trade, the more you get while doing the same things as before. The trading strategy is not breaking down.</p>

<p>It is easy to compensate for long-term CAGR degradation. It can be done on any trading strategy. And if you wanted more, increase the number of trades even more as illustrated in the 10.0\% line.</p>

<p>It is all one&#39;s choice. You code your trading strategy to do what you want it to do while faced with uncertainty. Except that, you should want to organize everything in such a way that in the end, you will win no matter what.</p>

<p>This is far-reaching. For all those that think that all trading strategies must fail, well, think again. It is not necessarily true, except if you want it to. But, let it be said that it is your choice to compensate return degradation or not. You do not intend to do it, then be ready to accept the consequences. Your CAGR will degrade with time and to top it off by your own design. So, do not blame anything else or anybody else for the job you are not doing.</p>

<p>Not only can you compensate for the inherent CAGR decay seen in most trading strategies, but you can also reach the expanding CAGR level by finding more ways to increase \( \sum^n_i x_i \) and thereby compensate even more. This is covered in more detail in my book: <strong>[Building Your Stock Portfolio][2]</strong>.</p>

<p>[1]: <a href="https://www.quantopian.com/posts/live-tearsheet-review-updated-1-dot-14-dot-19#5c3cdce2d5030e00404ea4e2" rel="nofollow">https://www.quantopian.com/posts/live-tearsheet-review-updated-1-dot-14-dot-19#5c3cdce2d5030e00404ea4e2</a><br>
  [2]: <a href="http://www.amazon.com/dp/B01MYCRVEG" rel="nofollow">http://www.amazon.com/dp/B01MYCRVEG</a>  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c40cb3cf74d402e5857c9e7' id='5c40cb3cf74d402e5857c9e7'>
<a href='#5c40cb3cf74d402e5857c9e7'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1547750204000' class='quanto-date posted-at response-posted-at' href='#5c40cb3cf74d402e5857c9e7'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>To give a better perspective of the last chart presented in the previous post, here is an updated chart showing what some of the numbers imply. Of note, in the bottom panel, the column for the added average number of trades per day to achieve the last column which gives how much profits would have been generated over the 30-year interval.</p>

<p><img src="https://image-proxy.quantopian.com/26112668428d112e1bda743695ebd39be930aed1/687474703a2f2f616c706861706f77657274726164696e672e636f6d2f7175616e746f7069616e2f53747261746567795f4571756174696f6e5f456e68616e6365645f56616c75652e706e67" /> </p>

<p>For just a few added trades per day, one can change the picture considerably, profitwise. Even increase profits by 20 times. </p>

<p>Adding a few trades a day is not the only way to improve a strategy&#39;s outcome, but it certainly can help overall performance.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c44c89160d71e0042d2867d' id='5c44c89160d71e0042d2867d'>
<a href='#5c44c89160d71e0042d2867d'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1548011665000' class='quanto-date posted-at response-posted-at' href='#5c44c89160d71e0042d2867d'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p><strong>Trading Stocks Generate Its Own Problems – Part III</strong></p>

<p>The stock market is not homogeneous. Therefore, why even think of treating it as such? All sectors are not equal, then why invest in each one equally? All stocks are not equal, then again, why use equal weights? At any one time, you can not predict that 50% of stocks will be going up while the other 50% will be going down and know which will do what. So, why go 50% longs and 50% shorts? </p>

<p>It does not make that much sense, unless, you have other motives or constraints you have to adhere to. And even under those conditions, the game remains a compounding return game, even if you want to treat otherwise.</p>

<p>An automated trading strategy usually means a large number of trades will be taken over some extended period of time. This tends to shorten the average trade interval considerably. As a consequence, the more all this trading will resemble gambling. Therefore, why not accept straight out that part of what we will do will be gambling and deal with it?</p>

<p>If your automated &quot;quasi-gambling&quot; trading strategy does 50,000+ trades over the course of 5 years does it not start to tell you something? At a minimum, you should be able to put some averages on the table related to the outcome of the various procedures taken by your trading strategy.</p>

<p>It should be evident that anyone can design crap. And, in fact, a lot do. But, YOU do not have to.</p>

<p>A trading system can be described using a simple expression: \( \sum^n_i x_i \), where you sum up the outcome of all the trades taken. It says: here is the total profit generated. Averaging is as easy: \(\frac{\sum^n_i x_i}{n} =  \bar x\) which will give the average profit or loss per trade. In Leo&#39;s tearsheet (referenced in <strong>Part II</strong>), this number was: \(\$\)36.24 with \(n = 44,467\) trades. </p>

<p>The number of trades is big enough to declare it a large sample. A simple assumption would be to say: if the sample is representative of what was done and of what to expect, then you could extrapolate with some kind of confidence that your estimate might not be that far from what might be a future outcome. If that system was extended to have \(n = 100,000\) trades, we should expect for it to reach about: \(\$36.24 \cdot 100,000 = \$3,624,000\) in profits in \((47 \cdot 100,000) / 44,467 = 106\) months or 6.8 years, a little over twice as long. By then, its CAGR would have gone down from 3.9% to 3.6%. This, even when the average profit per trade remained constant. The strategy would appear as if it was breaking down.</p>

<p>Over time, however, the average profit per trade will actually decline. It will not remain stable or go up but decline and there are simple reasons for this. Even before designing a trading strategy, one should understand the math of the game and what is implied by all those equations. You put an equal sign on the table, that is a hard statement.</p>

<p>We need to go back to what makes a trading system profitable. If your trading strategy is designed in such a way as to see its CAGR decline over time, you have limited choices. Maybe compared to other trading methods it might remain acceptable due to its still positive CAGR as long as it is above a specific threshold for instance.</p>

<p><strong>Part II</strong> showed that one could use a simple compensation technique (among others) not only to maintain a strategy&#39;s CAGR over time but also, most importantly, to make it rise with time. An expanding CAGR goes beyond the CAPM model. Is implied that the optimum portfolio resides outside and above the efficient frontier. It questions the very foundation of MPT which nonetheless might hold over the long term for the Buy &amp; Holder. But simply because you are trading, you can jump over this line in the sand called the efficient frontier. Over the short term, a theory such as MPT might show itself to be like some Swiss cheese, full of holes.</p>

<p>The following chart has been <a href="https://alphapowertrading.com/index.php/12-research-papers/11-stock-portfolio-alpha-definition" rel="nofollow">presented before</a> (over a year ago) and still holds.</p>

<p><img src="https://image-proxy.quantopian.com/fe219e61ac7516aabdcea42ba7c5c1e37b2d3d20/68747470733a2f2f616c706861706f77657274726164696e672e636f6d2f7175616e746f7069616e2f434d4c5f616c7068612e706e67" /> </p>

<p>You want to do more than the expected outcome (market portfolio), then you will have to do more. It is not by doing the same as everyone else that you will outperform them. All you will do is only get close to what they do. This means getting close the long-term market averages. </p>

<p>If it is what you want to do, then nobody can stop you, but also at the same time, you are not providing any kind of motivation or incentive to adopt your average CAGR when almost everybody else can already offer the same.</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c49d321328976632d6afc86' id='5c49d321328976632d6afc86'>
<a href='#5c49d321328976632d6afc86'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1548342049000' class='quanto-date posted-at response-posted-at' href='#5c49d321328976632d6afc86'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p><strong>Trading Stocks Generate Its Own Problems – Part IV</strong></p>

<p><strong>Reducing the Trading Interval</strong></p>

<p>As you reduce the average trade interval for the average trade, its potential average return is also reduced. But this can be compensated by the sheer number of trades that can be made with positive results. There are a lot more 1\% moves on a daily basis than there are 10\% moves. In the first case, you will find hundreds of them every trading day while in the second you could count them with both hands. Also, those 10+\% moves appear more as outliers and are much more difficult to predict or anticipate. Whereas, a 1% move can be had, on a daily basis, on about a quarter of the listed stocks, meaning opportunities abound.</p>

<p>If there are so many opportunities, then why is there no one with extraordinary results? Already, 1% a day would translate to \((1+0.01)^{252} = 1,227.4\%\) a year. Yet, you do not see any of that anywhere. Why is that so?</p>

<p>The most plausible reason would be related to the notion that most trade forecasters are not that good at it. And when you look at it closer, you might, in fact, find it is the most plausible excuse for non-performance. Actually, most forecasters have a hard time exceeding long-term market averages.</p>

<p>If you get the average or less, it is like if you were faced with randomness. All you can grab would be any kind of underlying long-term trend. </p>

<p>If you play a heads or tails game with a biased coin 52:48, no matter how you would play, you should expect to average out at 52:48 too. The bias would be transferred to you even if your bets were determined by a fair coin. You would expect to get less if you insisted on playing tails all the time. Could you get more than 52 by playing heads only? Yes, but by luck of the draw. No skills required. But then, you might need to know that the coin was indeed biased to the upside.</p>

<p>Nonetheless, in a 52:48 game, you are still expected to get it wrong 48 times out of 100, or 480 out of 1,000 or 24,000 times out of 50,000. Get the picture! In Leo&#39;s case (see tearsheet cited in <strong>Part II</strong>), the wins to losses came in at 48.98:51.02 indicating something close enough to random that you could not distinguish it from random. Could we assume that over the trading interval the bias was more like 49:51? Probably. Could it be that the method of play resulted in 49:51 even if the game was 52:48? Possible. Taking another trading interval, the results could and would be different.</p>

<p>When the actual signal is buried deep in the surrounding noise, there are not that many tools that will help you extract that signal, determine its magnitude, and in the case of stock prices, its direction. The distribution of price variation and thereby their percent change could be any type of distribution with a mean approaching zero but not necessarily zero. Something like an off-centered Paretian distribution with fat tails.</p>

<p>The problem, short-term, is that we do not know what tomorrow will bring. If your portfolio is composed of some 500 stocks that you follow on a daily basis, there is no way of knowing which of those stocks will go up or down and by how much. The most expected change is close to zero. Regardless, you want to play the game, then you should plan and play to win.</p>

<p><strong>A Trading Strategy in Numbers</strong></p>

<p>The end result of any trading strategy is: \( \sum^n_i x_i \). It states: add up all the profits and losses from all the trades taken over the entire trading interval. There are \(n\) numbers to add up, that&#39;s it. The average profit or loss per trade is this sum divided by \(n\): \(\frac{\sum^n_i x_i}{n} =  \bar x\). It does not say how you got there, but it does say how much you made trading. </p>

<p>There are basic restrictions like at no time should you lose it all: \( \sum^n_i x_i &lt; - F(t)\) where \(F(t)\) is your ongoing trading capital. The equity function would be: \( F(t) = F_0 + \sum^n_i x_i \). From it, we could express a drawdown restriction such as at all times have: \( F_0 + \sum^n_i x_i &gt; 0.90 \cdot F(t). \,\) Thereby allowing at most a 10\% drawdown at any one time. However, doing so starts to limit what you can and cannot do. Added the fact that it might be difficult to do and bring with it other restrictions which would tend to curtail performance even more.</p>

<p>There should be no surprise if you increase the number of trades or increase the average profit per trade to see the outcome get larger. With an increased number of trades you have: \( \sum^{n+\kappa}_i x_i = (n + \kappa) \cdot \bar x &gt; \sum^n_i x_i \,\) for \( \bar x &gt; 0 \). Increasing the average profit per trade would result into:  \( \,(1 + \phi) \cdot \sum^{n+\kappa}_i x_i &gt; (n + \kappa) \cdot (1+ \phi) \cdot \bar x \,\) for \( \phi &gt; 0 \). This has the same impact as improving the strategy&#39;s average edge per trade.</p>

<p>However, the real problem is that when we increase the number of trades it usually takes more time for the same trading strategy to do it. We will see a return degradation which can be expressed as a decaying function: \( \bar x \cdot e^{-\gamma t} \). The impact being a faster rate of decay for the trading strategy&#39;s CAGR (see Part II and III) resulting in: \( (n + \kappa) \cdot (1+ \phi) \cdot \bar x \cdot e^{-\gamma t} \). Even if you are adding more trades at what appears as the trading strategy&#39;s modus operandi. The strategy is still breaking down at a faster rate than anticipated.</p>

<p>A trading strategy could also be expressed in matrix notation as: \( \int_0^T H_a \, d P = \int_0^{n} H_a \,  d P + \int_{n}^{n+\kappa} H_a \, d P \, \) where the same trading strategy \( H_a \) is applied from start to finish. Declaring \(n\) a stop time for the in-sample (IS) backtest, and \(\kappa\) the added trades viewed as part of a walk-forward or a further out-of-sample (OOS) validation period. Therefore, in matrix notation the equity curve would be: \( F(t) = F_0 + \int_0^{n} H_a \, d P + \int_{n}^{n+\kappa} H_a \, d P\).</p>

<p>As shown in <strong>Part III</strong>, \(\int_{n}^{n+\kappa} \mathbf{H}_a \, d\mathbf{P}\,\) will not sustain the strategy&#39;s CAGR since strategy \(\mathbf{H}_a\) was designed to produce an average number of trades per period, and that will not increase unless the strategy is changed or the market changes to accommodate this new perspective. As was proposed in the example provided in Part II, adding one trade per day was sufficient for the strategy to maintain its CAGR for over 30 years.</p>

<p>The question becomes: how will you capture trades to meet your objectives? What will be the underlying logic for the decision process?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c4f26ddddc53f36a4f89ea3' id='5c4f26ddddc53f36a4f89ea3'>
<a href='#5c4f26ddddc53f36a4f89ea3'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1548691165000' class='quanto-date posted-at response-posted-at' href='#5c4f26ddddc53f36a4f89ea3'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p><strong>Trading Stocks Generate Its Own Problems – Part V</strong></p>

<p>Based on literature on designing stock trading strategies we should consider testing both an in-sample (IS) and an out-of-sample (OOS) trading interval before going live. Some even suggest another testing interval as an additional step after OOS to make sure that the trading strategy will not break down going forward. </p>

<p>But even that is not enough. As soon as a strategy will go live, its CAGR will start to decay. At the very least, trading strategies that are programmed to be linear will do so.</p>

<p>The following equation resumes the task to be done:<br>
 $$\int_0^T H_a \, dP = \int_0^{n} H_a \, dP + \int_{n}^{n+\kappa} H_a \, dP + \int_{n+\kappa}^{n+\kappa+\psi} H_a \, dP + \int_{n+\kappa+\psi}^{n+\kappa+\psi+\phi} H_a \, dP$$where the total task has been divided into four phases: IS + OOS + Paper Trading + Live Trading. It starts with the IS interval with its stopping time \(n\), is followed by the OOS interval up to \(\kappa\). From \(\kappa\) to \(\psi\) you have the paper trading phase which still does not produce any real cash in the trading account. It is only from \(n+\kappa+\psi\) that the trading strategy might go live. These are stopping times, numbers in the sequence of trades where you switch from one phase to next.  </p>

<p>Every step of the way strategy \(H_a\) had to prove itself worthwhile. Yet, the market, at every step is evolving with periods of short uptrends and downtrends but still within a long-term upward bias.</p>

<p>That you base the stopping times on time intervals does not change the problem, it remains: $$\int_0^T H_a \, dP = \int_0^{t} H_a \, dP + \int_{t}^{t+\kappa} H_a \, dP + \int_{t+\kappa}^{t+\kappa+\psi} H_a \, dP + \int_{t+\kappa+\psi}^{t+\kappa+\psi+\phi} H_a \, dP$$where \(\, t, \, \kappa, \, \psi, \) and \( \phi\,\) are now time intervals.</p>

<p>There is only one phase that has importance, and it is the one that will be trading live (from \(\,{n+\kappa+\psi}\,\) or \(\,{t+\kappa+\psi}\,\) onward). All that precedes is just to give you the confidence needed to apply the trading strategy live. The last trading interval should be the longest trading interval, if not the one to last for a very long time. Should it break down going forward, then all that preceded it (IS, OOS, PT) was &quot;technically&quot; worthless and done for absolutely nothing at all. Even worse, you would have lost part if not all your initial trading capital as well.</p>

<p>This goes back to how do you detect and execute trades in such a manner that you fulfill your objectives when the only important part is the live trading phase? </p>

<p>We will ignore all the preliminary phases and concentrate on the live trading interval. \(\int_{n+\kappa+\psi}^TH_a \, dP = m \cdot \bar z.\, \) and declare \(m\) as the number of trades and \(\bar z\) as the average profit per trade. This has the same meaning as when using \( \, n \cdot \bar x \,\) in the general case.</p>

<p>Whatever the past, the live trading section will have its average profit per trade too. Its CAGR can be expressed as: \(\, \displaystyle{ [\frac{F_0 + m \cdot \bar z}{F_0}]^{1/t}-1} = CAGR.\, \) Or, put another way: \(\; m \cdot \bar z = F_0 \cdot ((1+CAGR)^t -1). \) The equation contains your initial stake, the achieved CAGR and time which are apparently the only things that matter. And it all translate to \(\,m \cdot \bar z.\) </p>

<p>Any combination of \(\,m \cdot \bar z\,\) that can satisfy the last equation is a solution to the desired CAGR. You want 20% CAGR for 20 years on $1,000,000. Then, \(\,m \cdot \bar z = \$37,337,600.\,\) We can immediately deduce that it will take more than one trade to get there, otherwise, \(\,\bar z\,\) alone will have to generate the \(\$37,337,600\) profit. </p>

<p>Doing 1,000,000 trades with a net average profit of \(\$37.34\) per trade could do the job. That is 198.4 trades per day. Let&#39;s use 200 trades per day for further exploration. This would make the initial bets equal to \(\$5,000\) each on which an average profit of 0.75% per trade would meet the objective. That is less than a 1% move per trade.  </p>

<p>Any \(\,m \cdot \bar z\,\) combination meeting the objective qualifies whatever the trading strategy used to achieve them. You want to do it with one trade per month, then you will need an average return per month per trade of 15.56%. Look at the behavior of your trading strategy, determine what makes it tick and then find ways to increase not only \(\,m\,\) but \(\,\bar z\,\) as well.</p>

<p>Here is an old chart that illustrates this:</p>

<p><img src="https://image-proxy.quantopian.com/1267285b50809084e16c5590c738a2ebddedf831/68747470733a2f2f616c706861706f77657274726164696e672e636f6d2f696d616765732f6469766572732f6e5f76735f617665726167655f782e706e67" /> </p>

<p>All points on the blue line have the same value: \( n \cdot \bar x.\) You can scale it to the level you want. The curve will stay the same. Whatever type of strategy that resides on that line produces the same outcome, the same trading account balance. </p>

<p>It makes those two numbers (\(\,n\,\) and \(\,\bar x\,\)) the most important ones of your trading strategy. It means that whatever your trading strategy does, it will end up with those two numbers. And therefore, all efforts should be extended to make them both as large as you can. The rest might just be window dressing, cosmetic code having no real impact on the final outcome.</p>

<p>You can get these two numbers using the 
<code>
round_trips=True  
</code> option in your backtest analysis.</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c50f5ddaa2799004046b14e' id='5c50f5ddaa2799004046b14e'>
<a href='#5c50f5ddaa2799004046b14e'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1548809693000' class='quanto-date posted-at response-posted-at' href='#5c50f5ddaa2799004046b14e'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p><strong>Trading Stocks Generate Its Own Problems – Part VI</strong></p>

<p>You already know you will be faced with a lot of uncertainty as not to call it randomness, stochastic behavior or outright chaos. If you flip a fair coin to determine the next move on another fair coin, you should not be surprised if you get it right only about half the time.</p>

<p>Then why, when you see that you are getting about half of it right while trading can&#39;t you see that the thing you are betting against might be quasi-random with close to 50:50 odds? It is the only way for you to get it right about half the time, almost no matter what you do. If what you were facing was better than 50:50, then you most likely would be right more often and profit a lot more.</p>

<p>This forces us to reconsider the expression: \( \sum^n_i x_i \) since all \( x_i \)&#39;s are not necessarily positive or equal.</p>

<p>Because we are not expected to win all the time, we are faced with more averages. We can use \( \bar x_{+}\) for the average profit of positive trades and \(\bar x_{-}\) for the average loss per losing trade. This leads to: \( \sum^n_i x_i = (n - \lambda) \cdot \bar x_{+}  + \lambda \cdot \bar x_{-}, \,\) with \(\, 0 \leq \lambda \leq n.\,\) The trader can win only if: \(\,(n - \lambda) \cdot \bar x_{+} &gt; |\lambda \cdot \bar x_{-}|\;\) or \(\displaystyle{\frac{(n - \lambda) \cdot \bar x_{+}}{\lambda \cdot |\bar x_{-}|} &gt; 1}.\;\) The more this ratio will tend to 1: \(\displaystyle{\frac{(n - \lambda) \cdot \bar x_{+}}{\lambda \cdot |\bar x_{-}|} \to 1},\;\) the more we will have to rely on \((n - \lambda)\), the number of wins to provide an edge. If \(\,n = 2 \cdot \lambda \,\) or \(\, \lambda = n / 2, \,\) then you are left with almost nothing.</p>

<p>In a game with close to 50:50 odds where the normal distribution has a mean near zero, it would almost imply that within one standard deviation the losses out-balance the wins. This would mean that about 66% of trades simply cancel themselves out. And if you want to push even further, we could say the same thing for what is within 2 standard deviations from the mean. That would be 95% of trades cancel each other out. That is a terrible number for a trader. It nullifies most of the trader&#39;s work and to top it off he will also have to pay commissions on all of it. This happens because we trade, and somehow we have to face it.</p>

<p>This leaves the remaining 5% of trades to make a difference. It implies you would be good with fat tails, outliers which are much less predictable than the near-zero mean.</p>

<p>This should put the emphasis on the need to develop an edge and somehow move the mean above its near-zero expectation. Otherwise, you do not stand that much of a chance of assuring yourself that you will win the game. But then again, the gambler does not care about that either. He just wants to play whatever the outcome.</p>

<p>However, I want more than just the fun of the game. As was shown in the CAPM Revisited series of articles, not much is required to give your trading strategy an edge. One-hundredth of one standard deviation above the zero-mean was sufficient to carry the day. It could maintain a steady CAGR level for years and years. Two-hundredth of one standard deviation produced an increasing CAGR over the testing period. Therefore, stopping the return to decay can be done.</p>

<p><strong>Averaging Trades</strong></p>

<p>A trading strategy can be programmed to have a singular signature. For instance, trade a number of times per period. From <strong>Part V</strong>, the whole trading strategy was divided into four phases: IS + OOS + Paper Trading + Live Trading, each with their respective stopping times. The IS, OOS, and PT phases were used in the development process. First to debug the program, test it out-of-sample to then paper trade the strategy for some time. All of it leading to the live trading phase where real money would be on the table.</p>

<p>The following chart was taken from the backtest analysis of a trading strategy looking to participate in Quantopian&#39;s contest. What it shows is that it maintains about 840 positions per day, and that number remains constant over the 10-year period. The chart also says that the strategy is market neutral having as many longs as it has shorts for the duration.</p>

<p><img src="https://image-proxy.quantopian.com/2fc94496d8ff1545578468342d33fc0f4a0217c4/687474703a2f2f616c706861706f77657274726164696e672e636f6d2f7175616e746f7069616e2f546f74616c5f486f6c64696e67732e706e67" /> </p>

<p>The chart below, from the same backtest, reveals that the daily turnover was relatively constant over the 10-year period as well. Some monthly spikes (not exceeding 0.20) but overall a constant average turnover (about 0.145). The daily trading volume averaged out close to 40,000 shares per day with occasional monthly spikes reaching up to 200,000 shares.</p>

<p><img src="https://image-proxy.quantopian.com/298d5407b21824b04566580564c158ac65d468ef/687474703a2f2f616c706861706f77657274726164696e672e636f6d2f7175616e746f7069616e2f546f74616c5f486f6c64696e67735f4461696c795f5475726e6f7665722e706e67" /> </p>

<p>From the above two charts, we could divide the whole trading interval into 4 parts (IS, OOS, PT, and LT) where we could pick the boundaries for the change of phase from one to the next. The overall profit would have for equation:<br>
$$n \cdot \bar x = n_{IS} \cdot \bar x_{IS} + n_{OOS} \cdot \bar x_{OOS} + n_{PT} \cdot \bar x_{PTS}+ n_{LT} \cdot \bar x_{LT}$$However, simply from observation, should we divide the above chart into four equal parts, we could also write: $$ n_{IS} \cdot \bar x_{IS} \approx n_{OOS} \cdot \bar x_{OOS} \approx n_{PT} \cdot \bar x_{PTS} \approx n_{LT} \cdot \bar x_{LT}$$since all the averages remain constants over each phase. Note that we could also break those phases anywhere, the averages would still be maintained.</p>

<p>That makes the trading strategy linear. At each period it would increase by about the same amount, and it would see its CAGR decrease at every step it makes. Not because the market has changed regime or whatever, but simply because the strategy was designed to be linear. From phase to phase, it would keep the same averages. And such a trading strategy will always seem to break down going forward, not due to external forces or overfitting but by the way the strategy was constructed.</p>

<p>It is not that the strategy is overfitted or something like that. It is that the average profit per period \( (n_a \cdot \bar x_a) / \Delta t\) remains constant. At each phase it does as good as the previous one. We could even argue that the OOS and PT phases were a waste of time since the outcome per \(\Delta t\) remained the same.</p>

<p>What should the trading strategy do going forward? The same as it did over the 4 phases mentioned, and that is maintain its averages, especially \( (n_a \cdot \bar x_a) / \Delta t\). This means the CAGR will continue to decline.</p>

<p>For the people saying that all trading strategies break down. I would say that: IF you design your trading strategies that way, then you are right. Such strategies will, in fact, deteriorate over time, and will see their CAGR decay with it, because they are built that way. Therefore, stop designing them in such a manner! This goes for variants on the same theme.</p>

<p>It is up to you, the strategy designer to fix the problem. </p>

<p>You do not want to change your strategy design, then the solution is simple, live with it and its consequences. Maybe when your strategy will not even pay its trading costs, and this after a lot of wasted time, your trading account might suggest you reevaluate.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c5125ef19cb830049a366c7' id='5c5125ef19cb830049a366c7'>
<a href='#5c5125ef19cb830049a366c7'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5971e2308bc634000d022f24'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3fff8e67995978b6170deb9d9001a7b6?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5971e2308bc634000d022f24'>Joakim Arvidsson (Cream Mongoose)</a>
<span class='badge medal'></span>
</div>
<a UTCms='1548821999000' class='quanto-date posted-at response-posted-at' href='#5c5125ef19cb830049a366c7'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I feel targeted! :)</p>

<p>Regarding deteriorating CAGR, I&#39;d say this should indeed be expected for any successful strategy deploying a meaningful amount of capital. As the strategy compounds and accumulates capital, the difficulty to maintain that average growth rate also compounds. Take Buffett as an example. With just 1 million dollars, he may be able to get 50% CAGR, but with hundreds of billions, 20% CAGR might be exceptional. The &#39;strategy&#39; itself might need to change as well, e.g. from a net-net strategy (low capital) to a more &#39;Quality/Moat&#39; type strategy.</p>

<p>Sure, you could code the strategy to try to maintain its average historical growth rate as it accumulates and deploys more capital, but usually that means taking on more risk, and usually, the more capital you have, the <strong><em>more</em></strong> risk averse you are (not <strong><em>less</em></strong>). </p>

<p>Also, if you&#39;ve found something that actually works successfully in the past as well as in &#39;live trading,&#39; chances are it will eventually be &#39;discovered&#39; by others in the market, and any &#39;alpha&#39; will decline (with time) and eventually be eliminated by a continuously more efficient market. </p>

<p>PS: In my tearsheet that you referenced, if you know where I can find the rate at which the CAGR is declining (or how to plot it over time), I&#39;d be all ears as I do agree that this would be useful information to be aware of and visualize.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c51984aaa279960de46b256' id='5c51984aaa279960de46b256'>
<a href='#5c51984aaa279960de46b256'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5469bca83ab3de7bff000334'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/4c4ecac20f2ccee61491516e54b67f72?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5469bca83ab3de7bff000334'>Tony Morland</a>
</div>
<a UTCms='1548851274000' class='quanto-date posted-at response-posted-at' href='#5c51984aaa279960de46b256'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>... er, do i REALLY want to buy into this ?? 
Yeah,OK, let&#39;s give it a go and see where it leads ...... no doubt will be a long journey ...... </p>

<p>Hi @Guy &amp; @Joachim, nice to see you both at it here.....   ;-))<br>
Obviously, Guy, you have as usual given a LOT of time, thought &amp; effort to this elaboration.</p>

<p>So now I would like to see what specifically i can extract from this, in very practical terms, that will assist me in winning the daily Q competition and getting a nice big allocation ;-))    I will start (as i usually do) with some of my own not-very-smart-old-engineer-like-me type of questions, based on some selected statements extracted from the above discussions. All references are to Guy&#39;s posts unless explicitly stated otherwise. </p>

<p>&quot; <em>... basic principle for a stock portfolio to consider is not its trading methods, but its expected survival over the long term</em>&quot;  Yes, sure, i&#39;m absolutely all for long-term (LT) survival vs short-term shooting stars that crash &amp; burn. LT survival of the portfolio itself is surely a function of 2 things: 1) the &quot;quality&quot; of the underlying stocks that we identify as candidates, and 2) the &quot;efficiency&quot; with which they are traded successfully (including got rid of if they turn out to be worse-than-expected or to &quot;go bad&quot; at some time after purchase. How can we work on these things?</p>

<p>So, so now lets assume we are talking about Equity Long-Short (EqLS) portfolios, as in the type that Quantopian wants for algos, allocations, and for winning the contests. So if we are going L and S, we want to be able to identify both &quot;good quality&quot; and &quot;poor quality&quot; stocks effectively, right? Then, if we don&#39;t mess around with too much churning that only burns away our equity, then our ongoing profits, account equity, and our LT survival are basically all synonymous with identifying &quot;good (for Long) &amp; bad (for Short) and buying / selling them as required. OK, no arguments with anyone so far. </p>

<p>Secular LT drift (or not): Well that is relevant for Buy-and-Hold (B&amp;H) , but not for EqLS so i will skip over that bit for now.</p>

<p>&quot; <em>... We know that all stocks are not created equal. So, why should we treat them as such</em>?&quot;  - NO, that&#39;s right (says Tony the dumb ol&#39; injuneer), of course we know that, and of course we  shouldn&#39;t [indignantly]. Who would dare even suggest such a thing!!!!  ;-)</p>

<p>&quot;  <em>equal weights might sound like a reasonable course of action, or is it, or why not?</em>&quot;<br>
&quot; ... <em>if we try to make predictive strategies, then, these weights should proportionally follow these predictions in order to optimize performance&quot;</em>.
Yes, that sounds good to me. Mr Buffett certainly didn&#39;t make his billions using &quot;equal weights&quot;! In fact his opinion of the ideal weight for MOST stocks was and clearly still is &quot;zero&quot;! In other words, if we look at the balance between maximizing return and minimizing risk, lots of VERY successful investors do go for targeted portfolios of not-too-many stocks, rather than a shotgun approach to &quot;minimizing risk&quot;.  People like our friendly exemplar Big Warren go for &quot;risk minimization&quot; in completely different ways altogether. Good enough for him sure is good enough for me too. But how?</p>

<p>Of course WB is not really &quot;trading&quot; in the sense that we are discussing here. Maybe i should be using master trader George Soros as my &quot;example of success&quot; here. The only disagreement i might have with Guy so far is his assertion that: &quot; <em>No one seems to want to consider how much randomness there is in stock prices&quot;</em>.  Come on, plenty of people have given this a LOT of thought. Benoit Mandelbrot for one. </p>

<p><em>&quot;Reducing the Trading Interval<br>
As you reduce the average trade interval for the average trade, its potential average return is also reduced. But this can be compensated by the sheer number of trades that can be made with positive results&quot;.</em> Yes sure, agreed, at least down to the point where the transaction costs eat you. And of course this is rationale behind HFT. And i observe that some people here on Q keep posting about getting Sharpe ratios of 3 or 7 or whatever mainly by trading at a frenzied pace, although Quantopian wasn&#39;t designed for that and  i personally focus on a daily sort of timeframe. Taking that trading interval as a given, then i have to ask myself how can i ensure better trades? What could i find in Guy&#39;s posts to help me?</p>

<p>Well, the discussion of system development, paper trading, IS &amp; OOS and then going live certainly describes the important consideration that we must indeed focus on the &quot;live&quot; part. </p>

<p>&quot;<em>For the people saying that all trading strategies break down. I would say that: IF you design your trading strategies that way, then you are right</em>&quot;. 
:-) well, yes, i agree, but no-one ever tries to do that. Actually i have given a lot of thought as to WHY some strategies are robust and continue working for a long time and others don&#39;t. </p>

<p>Joachim writes: &quot; <em>... chances are it will eventually be &#39;discovered&#39; by others in the market, and any &#39;alpha&#39; will decline (with time) and eventually be eliminated..</em>.&quot;, and there certainly are many instances where we can observe this to be true. Guy writes: &quot; ... <em>It is up to you, the strategy designer to fix the problem</em>&quot;.  Well yes, of course, who else?</p>

<p>But at the end here, after reading these posts, and not really finding too much to argue about,  i am left mainly with 2 thoughts about trading system design:<br>
1) What practical steps can we take to improve our trading systems&#39; ability in &quot;finding alpha&quot;? and<br>
2) How can we best get some clues as to the likely robustness and survivability over time of our answer to 1) ?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c51c2a6c654c50047b4661c' id='5c51c2a6c654c50047b4661c'>
<a href='#5c51c2a6c654c50047b4661c'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1548862118000' class='quanto-date posted-at response-posted-at' href='#5c51c2a6c654c50047b4661c'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Joakim, I did use your tearsheet, but you have not been “targeted” as you say. Sorry if it gave you that impression. There was no ill intent. I only wanted an example with a minimum 10-year backtest ready for the contest with the round_trips=True option on. I have not expressed any negative opinions about your strategy. On the contrary, what was said should help identify and hopefully correct an inherent problem with strategies operating on the same theme, as was also mentioned.</p>

<p>I pointed out that the strategy was not overfitted since from period to period it could provide an almost constant profit (year over year). Therefore, the strategy did what it was designed for in the IS phase, and continued doing the same in OOS, PT, and LT. However, this had for consequence a built-in CAGR decay. Another expression for the Law of diminishing returns.</p>

<p>An explanation for the decaying CAGR is provided in <strong>Part IV</strong>.</p>

<p>The strategy H(a) has an average profit per period: \( (n_a \cdot \bar x_a) / \Delta t\). From it you could use for instance: \( [(F_0 +  t \cdot  (n_a \cdot \bar x_a))  / F_0 ]^{1/t} -1 = CAGR \), where you could put  \( (n_a \cdot \bar x_a) \)  for one year. By gradually increasing t, you should see the CAGR decline year over year, and even make a projection for the next. Your numbers are: (236595 * 23.37) / 10 = 552689 per year. Which makes at year 10 a CAGR of 4.5% and at year 11 a CAGR of 4.4%. At year 15, it should be down to 4.1%. It is not so bad for a low volatility scenario.</p>

<p>There are methods to compensate for this CAGR decay. It has been demonstrated in prior posts in this thread, and I have written a lot about this. It was shown that it could even be done on randomly generated prices.</p>

<p>I do not know the details of your trading strategy. However, I can say that if you add CAGR decay over-compensation to your trading strategy you could improve its performance considerably.  </p>

<p>@Tony, I agree on all counts and will get back to you.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c51f1f02b0a7300490f5dee' id='5c51f1f02b0a7300490f5dee'>
<a href='#5c51f1f02b0a7300490f5dee'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5971e2308bc634000d022f24'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3fff8e67995978b6170deb9d9001a7b6?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5971e2308bc634000d022f24'>Joakim Arvidsson (Cream Mongoose)</a>
<span class='badge medal'></span>
</div>
<a UTCms='1548874224000' class='quanto-date posted-at response-posted-at' href='#5c51f1f02b0a7300490f5dee'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Guy, sorry I wasn’t being too serious with that comment. I guess I was feeling ‘snarky’ at the time when I saw you were using graphs from my tear sheet as examples. I apologise and I can remove the comment if you want.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c524add2f984b004132161b' id='5c524add2f984b004132161b'>
<a href='#5c524add2f984b004132161b'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1548896989000' class='quanto-date posted-at response-posted-at' href='#5c524add2f984b004132161b'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Tony, yes, we have to design our trading strategies to last a long time. If they break down along the way and obliterate our portfolios, we lose.</p>

<p>The following chart is a smoothed version of a long-term stochastic view of the origin of portfolio returns over time. Sorry for the look, it was done some 5 years ago for internal use.</p>

<p><img src="https://image-proxy.quantopian.com/feb588b21cb1b3083a2cf7e536a55965a3995253/687474703a2f2f616c706861706f77657274726164696e672e636f6d2f7175616e746f7069616e2f5344455f6c6f6e675f7465726d2e706e67" /></p>

<p>The raw data for the lighter gray square in the middle of the above chart is more like the following:</p>

<p><img src="https://image-proxy.quantopian.com/993ef2858791b826f15d40e080a38b11b8a9743e/687474703a2f2f616c706861706f77657274726164696e672e636f6d2f7175616e746f7069616e2f5344455f6d69642e706e67" /></p>

<p>where the randomness of price variations was made visible.</p>

<p>In the initial trading phase, our strategies depend more than heavily on random fluctuations. We can only find traces of the fundamental factors which at the other end of the spectrum will become much more important. But then, you will have somehow to get there to reap those rewards.</p>

<p>A trading strategy needs to change with time. If you constantly trade short-term, you are always staying at the beginning of those curves where randomness prevails. In a way, such a trading strategy is trying to find almost imperceptible factors within all the randomness. There is enough randomness that predictability suffers a great deal in the process and we can see its impact in the low CAGR levels reached over the long term.</p>

<p>To answer your two questions. 1) Try to increase the average \(\Delta t\) per trade. Meaning try to hold a little longer. It will tend to increase \( \bar x \). The US market, on average, is biased to the upside. Better yet, assign an increasing function to \( \bar x \) so that the average profit per trade increase over time. Do the same for the number of trades. You would get: \( (f(n_a) \cdot n_a \cdot f(x_a) \cdot \bar x_a) \) where both \(f(n_a)\) and \(f(x_a)\) are monotonic increasing functions. I wrote on that a few years back. For instance, see: </p>

<p><a href="https://alphapowertrading.com/images/divers/Strategy_Enhancers.html" rel="nofollow">https://alphapowertrading.com/images/divers/Strategy_Enhancers.html</a></p>

<p><a href="https://alphapowertrading.com/images/divers/Strategy_Design_Defects.html" rel="nofollow">https://alphapowertrading.com/images/divers/Strategy_Design_Defects.html</a></p>

<p>2) Your best clues will come from doing long-term tests. This way you will know if at least in the past your trading strategy \( \sum (H \cdot \Delta P) \) survived. You will be able to see its weaknesses and correct them if you can. Overall, since your trading strategies will end up with two numbers: \(n\) and \(\bar x\), then concentrate your efforts on increasing both over the long term. See:</p>

<p><a href="https://alphapowertrading.com/index.php/12-research-papers/7-building-your-retirement-fund" rel="nofollow">https://alphapowertrading.com/index.php/12-research-papers/7-building-your-retirement-fund</a></p>

<p>As for: Joachim writes: &quot; ... <em>chances are it will eventually be &#39;discovered&#39; by others in the market, and any &#39;alpha&#39; will decline (with time) and eventually be eliminated</em>...&quot;</p>

<p>I disagree on that one. Mr. Buffett, over 30 years ago, told in an interview how he did things and ended with: don&#39;t worry, I don&#39;t think anybody will listen. And it appears they still have not, for the most part. So, I would not worry about that.</p>

<p>We are millions of players, and we each have to rediscover everything. When was the last time you saw someone &#39;discovered&#39; your trading methods or that you have been able to identify such a phenomenon having an impact on the overall market?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c54174d78023b0049696947' id='5c54174d78023b0049696947'>
<a href='#5c54174d78023b0049696947'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5469bca83ab3de7bff000334'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/4c4ecac20f2ccee61491516e54b67f72?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5469bca83ab3de7bff000334'>Tony Morland</a>
</div>
<a UTCms='1549014861000' class='quanto-date posted-at response-posted-at' href='#5c54174d78023b0049696947'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi @Guy, thanks for your comments, although i had hoped to elicit a little more from you with regard specifically to Quantopian and Equity Long-Short algos. </p>

<p>Your answer 1) of course is very sensible but the upside bias in US markets (both over the last 10 years and also over the very-very long term) is not really relevant to EquityLS algos. Also, i think one has to be a bit careful about this, as there have been some very extended (&gt; 1 decade long) periods when the US market actually did NOT have an upside bias, so we must beware that it certainly isn&#39;t a &quot;universal truth&quot; of investing.</p>

<p>Regarding 2), yes, sure i am very much in favor of long-term testing and, to anyone who says &quot;No, because old market data are no longer relevant to today&#39;s conditions&quot;, i disagree and the reason i do is because we never know what is looming around the corner and so it is important to consider as wide a range of market conditions as possible. Personally, i often even carry this to the extreme of considering different types of financial instruments altogether, just to get more out-of-the-box ideas about the widest possible spectrum of &quot;what-if&quot; scenarios.</p>

<p>In your post, The last point of debate between you &amp; Joachim is, i think, a very good one for everyone to ponder more carefully. </p>

<p>Of course i&#39;m not going to argue with Mr. Buffett. Some investment / trading strategies do just go on &amp; on &amp; on, but that&#39;s not necessarily  just about people discovering them or not. Many fundamentally-driven market phenomena (especially the kind of ones that WB likes) involve true or relative value in some sense, as well as fundamental laws of supply &amp; demand, and the effects of delays between planning &amp; implementation of many things (such as opening mines, factories, manufacturing &amp; getting goods to market, etc ) and these effects will not go away, no matter how many people &quot;discover them&quot; or not, just like the effect of government interest rate policies on the FX markets. </p>

<p>However @Joachim is ALSO correct in what he says too. There have definitely been many market phenomena and/or trading systems &amp; strategies which, once &quot;discovered&quot; and widely exploited do in fact die out not too long thereafter. I can give examples if you like, but i&#39;m sure you can think of a lot too. </p>

<p>So it is worth pondering the difference between these two different situations: the robust type of alpha associated with the first set, vs the more transient and not-very-robust  type of alpha associated with the second. What are the essential differences between them and, more importantly, if we are planning a trading system / strategy, which type do we want to aim for and why? The second type, often accessed using price-based &quot;data-mining&quot;  approaches can actually be very profitable, but we just shouldn&#39;t expect them to last forever. No disrespect intended to people like Tom DeMark, but i would question if it is really very realistic to expect that the  extremely specific price sequence of a &quot;TD Sequential&quot; will really be robust over time when, at least as far as i can see, it has little underlying fundamental basis, irrespective of how well it may work?  On the other hand, using an &quot;ideas first&quot; (rather than a &quot;data first&quot;) approach to explore corporate accounting fundamentals may seem a bit dry, boring &amp; less spectacular, but it is likely, i would think, to be more durable over time and i think Mr Buffett is on the same side here too. A question to think about is: How can we bring more conscious awareness to DESIGNING trading strategies to be more of one type or the other?, and then: Can we make some sensible estimates of their potential &quot;profitability half-lives&quot;?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c572572e3a7e04644f09dda' id='5c572572e3a7e04644f09dda'>
<a href='#5c572572e3a7e04644f09dda'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1549215090000' class='quanto-date posted-at response-posted-at' href='#5c572572e3a7e04644f09dda'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Tony, any trading strategy can be put in a simple payoff matrix equation: \(F(t) = F_0 + \sum^n (H \cdot \Delta P)  \). In it, you have it all. What you started with and the sum of all the generated profits and losses over the n trades taken over the investment period that these trades be long or short.</p>

<p>It is implied in trading that n might be relatively large. For instance, using @Joakim tearsheet cited above, n was equal to 236,495 trades over its 10-year period. It is a sample large enough to make some generalities and take averages.</p>

<p>In a market-neutral trading strategy, we could specify in the above equation what is what, and it could be expressed as:  </p>

<p>\( F(t) =  F_0 + 0.50 \cdot \sum^n (H_{(i,j)&gt;0} \cdot \Delta P)  + 0.50 \cdot \sum^n (H_{(i,j)&lt;0} \cdot \Delta P)  \) </p>

<p>where half the funds are allocated to holding longs \(H_{(i,j)&gt;0}\) and the other half to shorts \( H_{(i,j)&lt;0} \). This, under the expectation that the longs would generate half the profits and hopefully the shorts the other half. Almost implying that both sides generate about the same amount of profit: </p>

<p>\( 0.50 \cdot \sum^n (H_{(i,j)&gt;0} \cdot \Delta P)  \approx  0.50 \cdot \sum^n (H_{(i,j)&lt;0} \cdot \Delta P) \) </p>

<p>which as you know is rarely the case.</p>

<p>In the Quantopian universe, people act like the market was equally distributed as if half the ranked stocks are going up and the other half down. Sure, we can take a subset of stocks and declare them in whatever state we want. But, is it so in reality? </p>

<p>If it were, then we would be expected to make as much on our longs as we do on our shorts. If half our selected stocks declared as long are going up, and the other half declared shorts are going down, then we should end up with:  \(F(t) = F_0 + \sum^n (H \cdot \Delta P)  \), for this market-neutral strategy. That is, if longs and shorts responded equally well on their respective designations. This also implies we should expect the overall performance to be close to some market averages.</p>

<p>But, that is not how the market is structured either. More stocks have disappeared through mergers, acquisitions, and bankruptcies over the last 30 years than exist today. When we look at current averages, all we see are traces of survivors. And that too is not distributed 50:50.</p>

<p>Every bet made is on the premise that we do have a good predictor even if it is as simple as it will continue to go up(down).  If we had good predictors, then performance should be even higher than just averages or below.</p>

<p>I would like to use @Joakims&#39; tearsheet numbers if it is agreeable to him. The intent would be to show where it could be improved just by looking at how the trading strategy behaved. It was said before his trading strategy <strong>H</strong>(a) had an average profit per period: \( (n_a \cdot \bar x_a) / \Delta t\). And from there we could make estimates of where his trading strategy was going. Nonetheless, he could make changes to that strategy knowing where the pressure points are and emphasize what he would like to see more of. Moreover, he could put in place some return decay compensation measures in order to not only maintain his ongoing CAGR but going as far as improving on it.</p>

<p>The idea is not to attempt over-fitting his trading strategy but to game it. He has this structured trading strategy <strong>H</strong>(a) that works where he knows what it does and how it does it. Then, he could insert into it what he would want to see as in: I want to see a little more of this and a little less of that, and here are the pressure points to do it.</p>

<p>I&#39;ll wait for his approval before going forward.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c5734e7f425e6365c68fcb2' id='5c5734e7f425e6365c68fcb2'>
<a href='#5c5734e7f425e6365c68fcb2'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5469bca83ab3de7bff000334'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/4c4ecac20f2ccee61491516e54b67f72?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5469bca83ab3de7bff000334'>Tony Morland</a>
</div>
<a UTCms='1549219047000' class='quanto-date posted-at response-posted-at' href='#5c5734e7f425e6365c68fcb2'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Guy, i&#39;m not disagreeing with your long-term conceptual background ideas, but i start to question whether or not you are thinking in terms of the Quantopian environment, as i keep asking about. It does make me wonder if you are actually participating in it or rather following an entirely different theme altogether to that of Joakim, myself and most (or at least many if not most) of the other people here in the Q context. That&#39;s why, without necessarily disagreeing with quite a lot of what you are saying, i do keep coming back to the question of just how applicable and relevant are some of your comments in the Q context ?</p>

<p>Specifically, for example, you state: &quot; <em>In the Quantopian universe, people act like the market was equally distributed as if half the ranked stocks are going up and the other half down.</em>&quot; Now where on earth are you getting that idea from!?  What &quot;people&quot; are acting like this? That statement which you make is in fact not at all in accordance with the reality of what Q participants are doing with Equity Long Short algos! And the statement: &quot; ... <em>we should expect the overall performance to be close to some market averages</em>&quot; makes no sense in the context of EquityLS algos where the whole aim is very much to get as far AWAY as possible from market beta and try to have the trading strategy as market-neutral as possible.</p>

<p>I agree with you that many stocks have indeed disappeared through mergers, acquisitions, bankruptcies, etc. but again i do not see how this is relevant to EquityLS algos in the Q context. No, actually i will revise my comment there. The stocks that disappear because of acquisitions usually go up in price while they are in the process of being bought out under takeover offers, and so generally tend to make good Long candidates for a while before they disappear. Conversely the stocks that &quot;die&quot; due to bankruptcy usually do not disappear instantly in a flash but generally decline in price before finally disappearing, and so generally tend to make good Short candidates (for a while before they disappear). So indeed some of the stocks that &quot; ... disappear[ed] through mergers, acquisitions, and bankruptcies&quot; do indeed make good EquityLS candidates, some Long and some Short, depending very much of course on the REASON why they disappear. And no, of course they are &quot; ... <em>not distributed 50:50</em>&quot;, but what point exactly are you making there? </p>

<p>To the best of my knowledge, @Joakim is  mostly working with EquityS algos and, at least here within the context of Quantopian, i am working exclusively with EqLS, as Q requires. So i trust that Joakim will give you his approval to use his example, and so you can show us how we can improve our algos.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c57498df425e6447868fcf7' id='5c57498df425e6447868fcf7'>
<a href='#5c57498df425e6447868fcf7'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5971e2308bc634000d022f24'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3fff8e67995978b6170deb9d9001a7b6?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5971e2308bc634000d022f24'>Joakim Arvidsson (Cream Mongoose)</a>
<span class='badge medal'></span>
</div>
<a UTCms='1549224333000' class='quanto-date posted-at response-posted-at' href='#5c57498df425e6447868fcf7'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Guy,</p>

<p>Sure, please use any of my tear sheets in your examples.</p>

<p>I don’t mind at all that you’re using my stuff in your examples. What I do take issue with sometimes is some of the language you use. For example:</p>

<blockquote>
<p>In the Quantopian universe, people act like the market was equally<br>
distributed as if half the ranked stocks are going up and the other<br>
half down.</p>
</blockquote>

<p>This appears to be a key assumption of yours, but it’s simply not true. The purpose of an EqLS strategy is not to go long on the stocks going up, and short the ones going down. Sure, that would be nice, but is rarely the case. We all know the market is not evenly distributed 50:50 like that. </p>

<p>A good EqLS strategy should be quite profitable even in bull markets where 100% of stocks are going up, as long as the Longs are going up more than the Shorts. </p>

<p>Or vice versa, in a down market where 100% of stocks are going down, you still make good money as long as your Shorts are going down more than your Longs. </p>

<p>So, long story short (pun intended), an EqLS tries to profit from the relative returns SPREAD between the longs and the shorts. Not to bet which stocks are going up and which are going down.  </p>

<p>@Tony,</p>

<p>Yes indeed, on Quantopian I’m only focusing on creating strategies that might do well in the Q contest (not doing too well there lately, I’m much better at predicting the past, haha). In my personal portfolio I’m just long and strong, buy and hold till I get old. :)  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c574a8a954c9b6b67ebdf2e' id='5c574a8a954c9b6b67ebdf2e'>
<a href='#5c574a8a954c9b6b67ebdf2e'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1549224586000' class='quanto-date posted-at response-posted-at' href='#5c574a8a954c9b6b67ebdf2e'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Tony, the equation presented: </p>

<p>\( F(t) =  F_0 + 0.50 \cdot \sum^n (H_{(i,j)&gt;0} \cdot \Delta P)  + 0.50 \cdot \sum^n (H_{(i,j)&lt;0} \cdot \Delta P)  \) </p>

<p>does not make it a beta of 1.0, but more like in @Joakim&#39;s tearsheet, and most probably yours, something close to a beta of 0 simply because you are half long and half short.</p>

<p>If someone ranks on some criteria his/her selected stock universe and goes long the top 400 and shorts the bottom 400, then they are treating the market as if half up and half down. And the point I make is that it does not correspond to reality. It is just us delimiting subsets of what we want to see with no corroborating evidence that the market is structured that way.</p>

<p>Overall, we are saying the same things. We view the game the same way. I look at it from different angles (with equations).</p>

<p>That you be EqLS can reduce beta to near-zero values. It can reduce volatility. But it also tends to reduce overall CAGR. I view the reduced CAGR as the opportunity cost of operating an EqLS strategy. I am not saying it is bad, on the contrary, such strategies have their place. I have provided praises on some of those EqLS strategies that I liked (yours, @Joakim, and a few more).</p>

<p>As for what could be done to improve such trading strategies, that is covered in my next post after @Joakim agrees. Last time, he felt “targeted”. I did not want that again. Some of the stuff he might appreciate, and some not...</p>

<p>@Joakim, good. Let me finish, be back soon.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c5758cec9306f00449a00ff' id='5c5758cec9306f00449a00ff'>
<a href='#5c5758cec9306f00449a00ff'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5b1f9ef65ad768004ad5f513'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/5435859afd955dddb6ccc1f0a31a482b?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5b1f9ef65ad768004ad5f513'>Zenothestoic</a>
</div>
<a UTCms='1549228238000' class='quanto-date posted-at response-posted-at' href='#5c5758cec9306f00449a00ff'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>It&#39;s about spreads. Not half up half down. You can be short 400 stocks which go up and long 400 stocks which also go up. So long as the longs go up more than the shorts you profit. Ditto the reverse. You are merely trying to predict relative movement.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c5790a54a39350041134a40' id='5c5790a54a39350041134a40'>
<a href='#5c5790a54a39350041134a40'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1549242533000' class='quanto-date posted-at response-posted-at' href='#5c5790a54a39350041134a40'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>In @Joakims&#39; tearsheet, his longs have a remarkable 0.63 hit rate. Whatever he used to identify longs was right 63% of the time. Still, all his longs represented 51% of total trades taken. It is understandable, the strategy was designed to be 50% long and 50% short.</p>

<p>He lost almost half of all the generated profits from his longs on his short positions where, on average, he was losing $-42.17 per trade. Yet, when he identified shorts correctly, he had a superior advantage equivalent to, on average, a 3.7% profit target. But with a 38% hit rate, the sum of losses more than drowned his short profits.</p>

<p>On the long side, his trading strategy acts as if it had an average profit target of 3.07% with an average stop loss of 3.28%. That is not that good a combination since over time, in an equal environment, the return will decay. To compensate this return decay, his profit target would have required something more in the vicinity of 3.50% or better on his longs. This is not a major move, but it would have compensated the inherent degradation that seems built-in on the long side. See my paper on fix fractions for instance where this type of decay is covered:  <a href="https://alphapowertrading.com/papers/FixedFraction.pdf" rel="nofollow">https://alphapowertrading.com/papers/FixedFraction.pdf</a></p>

<p>So, where should he concentrate his efforts to improve that trading strategy? </p>

<p>First, he needs a better identification system for the shorts that pay off which might help indirectly in making a better identification for winning longs thereby improving his spread and overall profits. Second, for whatever reason he is taking his shorts, he should try to identify why so many go wrong and find ways to minimize those factors or better yet, reverse them. But here, he cannot just reverse the logic since that would make those trades long! He will have to settle with a better identification method for his shorts while maintaining his profit margin.</p>

<p>Adding 1% on each side of his average spread amounts to $33Mil based on the number of trades taken over the 10-year period. A 1% more is not a big move. Each 1% he adds will bring in the same. His betting unit is increasing by about 5% per year. If he could improve that figure too, it would be good to his bottom line as well.</p>

<p>Getting his win rate on his shorts at the same level as his longs would raise his average net profit per trade to about $100 which in turn would increase his overall profit close to $23Mil. Almost 5 times better. This might require only minor changes to his trading script. Yet, it would raise his CAGR to about 12.7%. It should be enough to be well positioned in the contest if not win it.</p>

<p>What @Joakims&#39; tearsheet shows is that even if you divide half long and half short, you cannot expect that both sides behave the same, and therefore, they should not be treated the same. That the shorts have a different logic setup is fine, especially if it raises the average profit per short and its hit rate.</p>

<p>I see a working trading strategy having a large number of trades with a need to play averages, to strategize the strategy. Each dollar he improves his average net profit per trade is $236,495 more to his bottom line. These are all minor changes that can have quite an impact on performance without unduly increasing drawdowns or volatility. This task will get harder and harder as time passes. The equation remains: \(F(t) = F_0 + n \cdot \bar x \), so increasing the number of trades will add profits too.</p>

<p>Notice that what we are dealing with are averages. A single trade has absolutely no interest. What we want to do is move the means in the right direction, and that direction should always be in the way of higher overall profits. </p>

<p>I do not see the actual trading strategy, and therefore, cannot be specific as to what to do. However, I can look at the results of the 
<code>
round_trips = True  
</code> option and know where to apply the pressure.</p>

<p>Why are such strategies important? </p>

<p>There are literally trillions of dollars earning less than 2% per year. Those funds are at those low rates because they need stability, low drawdowns, and low volatility. It is what an EqLS strategy can bring. I do not see the end prize so much as a Quantopian contest winner, but more as a return spread manager with low volatility as in the following equation: \( F(t) = 1T \cdot (1 + 0.127 - 0.02)^t \). That is $100B in its first year with no money on the table. It increases every year. And some piece of code can do the job. Evidently, to reach this level or better, things will need to scale up.</p>

<p>The more you can improve on the EqLS&#39;s CAGR, the better it will get. And as you raise the CAGR, there will be fewer and fewer managers above you making your trading strategy even more desirable.</p>

<p>Now, that makes such trading strategies great to have, if they can reach interesting CAGR levels. And if you do have one of those, keep control of your IP.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c5806d3b3a69a003d070f7f' id='5c5806d3b3a69a003d070f7f'>
<a href='#5c5806d3b3a69a003d070f7f'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5b1f9ef65ad768004ad5f513'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/5435859afd955dddb6ccc1f0a31a482b?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5b1f9ef65ad768004ad5f513'>Zenothestoic</a>
</div>
<a UTCms='1549272787000' class='quanto-date posted-at response-posted-at' href='#5c5806d3b3a69a003d070f7f'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>It would be interesting to see an exmple if such a strategy where you have improved the short trades. Easier said that done. Shorts have always been extremely difficult especially in a market which drifts upwards over time.</p>

<p>How do you propose to improve the short side of this fellows trading strategy?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c58075d4a39350044134cd7' id='5c58075d4a39350044134cd7'>
<a href='#5c58075d4a39350044134cd7'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5469bca83ab3de7bff000334'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/4c4ecac20f2ccee61491516e54b67f72?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5469bca83ab3de7bff000334'>Tony Morland</a>
</div>
<a UTCms='1549272925000' class='quanto-date posted-at response-posted-at' href='#5c58075d4a39350044134cd7'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Re your final comment, @Guy, that&#39;s presumably why, although people are happy to show results,  fewer people nowadays post their actual strategies on Q. </p>

<p>Would you @Guy, perhaps care to make any comments on @Blue Robin&#39;s very interesting posted set of results entitled &quot; Simplified Moving Alpha Tearsheet&quot; from a few days ago?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c580821569ed600488e4e22' id='5c580821569ed600488e4e22'>
<a href='#5c580821569ed600488e4e22'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5b1f9ef65ad768004ad5f513'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/5435859afd955dddb6ccc1f0a31a482b?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5b1f9ef65ad768004ad5f513'>Zenothestoic</a>
</div>
<a UTCms='1549273121000' class='quanto-date posted-at response-posted-at' href='#5c580821569ed600488e4e22'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>It was a trap I fell into in the futures markets. For the vast majority of the time shorting makes absolutely no profit whatsoever. There then come periods when shorts account for virtually all the profit.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c5808d7e2fcdf003fb7275b' id='5c5808d7e2fcdf003fb7275b'>
<a href='#5c5808d7e2fcdf003fb7275b'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5b1f9ef65ad768004ad5f513'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/5435859afd955dddb6ccc1f0a31a482b?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5b1f9ef65ad768004ad5f513'>Zenothestoic</a>
</div>
<a UTCms='1549273303000' class='quanto-date posted-at response-posted-at' href='#5c5808d7e2fcdf003fb7275b'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>And interestingly, unlike with stock markets, upwards drift is not nearly so big a feature of commodities prices, especially when adjusted for inflation. I guess better farming and extraction methods may have had something to do with disrupting demand / supply.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c5810b74a39350047134d1c' id='5c5810b74a39350047134d1c'>
<a href='#5c5810b74a39350047134d1c'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5469bca83ab3de7bff000334'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/4c4ecac20f2ccee61491516e54b67f72?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5469bca83ab3de7bff000334'>Tony Morland</a>
</div>
<a UTCms='1549275319000' class='quanto-date posted-at response-posted-at' href='#5c5810b74a39350047134d1c'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi @Guy, please note the correction in my post above regarding the name / authorship of tearsheet that  i mentioned. </p>

<p>Hi @Zeno, thanks for your practical, experience-based  comments. I keep trying to encourage @Guy to discuss more about application rather than underlying formulae and, as someone who only rarely trades futures markets but does a lot of research &amp; analysis, i have certainly observed exactly  the effects as you describe. The Long vs Short, Win vs Loss profiles are very different. So, in practice, how do you actually deal with this? Just continue to take all the short signals knowing that most will be losers, but knowing the winners will be large? Or do you try to select out short signals not to take?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c582dd9ed3f54004c5618db' id='5c582dd9ed3f54004c5618db'>
<a href='#5c582dd9ed3f54004c5618db'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5b1f9ef65ad768004ad5f513'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/5435859afd955dddb6ccc1f0a31a482b?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5b1f9ef65ad768004ad5f513'>Zenothestoic</a>
</div>
<a UTCms='1549282777000' class='quanto-date posted-at response-posted-at' href='#5c582dd9ed3f54004c5618db'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>&quot;Just continue to take all the short signals knowing that most will be losers&quot;
Yes, that is what these guys do. And in some periods it pays handsomely. But over many years the return from shorts is derisory for trend followers. I have spoken to many of the players about this and most of them agree. I have met a lot of these guys such as Seykota (very pleasant chap) and spoken to many on the phone such as Dave Druz of Tactical.</p>

<p>Harding (Winton) of course believes trend following is dead.</p>

<p>Me? No idea TBH  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c58322a569ed6003c8e4ef9' id='5c58322a569ed6003c8e4ef9'>
<a href='#5c58322a569ed6003c8e4ef9'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5469bca83ab3de7bff000334'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/4c4ecac20f2ccee61491516e54b67f72?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5469bca83ab3de7bff000334'>Tony Morland</a>
</div>
<a UTCms='1549283882000' class='quanto-date posted-at response-posted-at' href='#5c58322a569ed6003c8e4ef9'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Yes, interesting people. Ed Seykota has some nice posts around the internet and an interesting profile (&amp; photo of himself playing the banjo) on LinkedIn. I have communicated with some but not met any of these greats in real life. Certainly must have been wonderful to meet &amp; talk together in person.<br>
I know this &quot;trend following is dead&quot; idea has been bandied around a bit (no pun intended Howard B, if you are reading this ;-)) over the last few years, but to me that sounds rather like saying &quot;the bear is dead&quot; ... yeah, right .... at least until it&#39;s alive again.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c58d2f7f4c0d01231bd49bd' id='5c58d2f7f4c0d01231bd49bd'>
<a href='#5c58d2f7f4c0d01231bd49bd'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1549325047000' class='quanto-date posted-at response-posted-at' href='#5c58d2f7f4c0d01231bd49bd'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Tony, concerning @Blue Ribbon&#39;s tearsheet, I see it as a variation on the same theme. It trades less over a slightly shorter time interval, and has a lower average net profit per trade. If I had to choose, I would go with @Joakim&#39;s program. Nonetheless, I would want more.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c59373f2555774d217a980d' id='5c59373f2555774d217a980d'>
<a href='#5c59373f2555774d217a980d'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5469bca83ab3de7bff000334'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/4c4ecac20f2ccee61491516e54b67f72?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5469bca83ab3de7bff000334'>Tony Morland</a>
</div>
<a UTCms='1549350719000' class='quanto-date posted-at response-posted-at' href='#5c59373f2555774d217a980d'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Guy, i&#39;m a bit surprised by your apparent lack of enthusiasm. @BlueRobin may only have a modest-looking annual return of 3.9%, but over a test period of 9 years maintains a Sharpe Ratio of 2.67 (which is easy enough to do for a year or two, but definitely healthy to maintain it over 9 years) , and a MaxDD of only 1.3% (also over 9 years ... i think that&#39;s VERY nice indeed), and annual volatility of only 1.4%.  Using any sort of composite metric that takes into account the return rate, Sharpe ratio, annual volatility, the ratio of Specific to Total returns, max DD, and the time period over which it is sustained, then i think @BlueRobin&#39;s effort is quite impressive. However if you are doing better than that, then please share with us and let&#39;s see ........  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c59871450cfda0042dac83a' id='5c59871450cfda0042dac83a'>
<a href='#5c59871450cfda0042dac83a'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5b1f9ef65ad768004ad5f513'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/5435859afd955dddb6ccc1f0a31a482b?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5b1f9ef65ad768004ad5f513'>Zenothestoic</a>
</div>
<a UTCms='1549371156000' class='quanto-date posted-at response-posted-at' href='#5c59871450cfda0042dac83a'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>From observation over the years I think Guy likes to code and to theorize.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c598e9c50cfda6b55dac4bf' id='5c598e9c50cfda6b55dac4bf'>
<a href='#5c598e9c50cfda6b55dac4bf'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5469bca83ab3de7bff000334'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/4c4ecac20f2ccee61491516e54b67f72?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5469bca83ab3de7bff000334'>Tony Morland</a>
</div>
<a UTCms='1549373084000' class='quanto-date posted-at response-posted-at' href='#5c598e9c50cfda6b55dac4bf'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Well @Zeno ;-)) i was hoping that Guy might perhaps be induced to, as they say, put it out on the table, for us to see for ourselves what he has of practical value.  So let us just wait &amp; see, and allow @Guy&#39;s actual results speak clearly for themselves ............  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c59acc0f4c0d02f4cbd501e' id='5c59acc0f4c0d02f4cbd501e'>
<a href='#5c59acc0f4c0d02f4cbd501e'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1549380800000' class='quanto-date posted-at response-posted-at' href='#5c59acc0f4c0d02f4cbd501e'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p><strong>I think @Guy keeps his IP close to his vest.</strong> </p>

<p>Making public a &quot;valuable&quot;  trading script is the same as giving it away. It&#39;s “value” instantly becomes zero. Therefore, I have never done that. And do not intend to do it either.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c59b1ec25557778187a9640' id='5c59b1ec25557778187a9640'>
<a href='#5c59b1ec25557778187a9640'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5b1f9ef65ad768004ad5f513'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/5435859afd955dddb6ccc1f0a31a482b?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5b1f9ef65ad768004ad5f513'>Zenothestoic</a>
</div>
<a UTCms='1549382124000' class='quanto-date posted-at response-posted-at' href='#5c59b1ec25557778187a9640'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>If I had anything of value which I thought would make money (and I do not) then I would not bother with trading forums. Which are mostly &quot;  a tale Told by an idiot, full of sound and fury Signifying nothing.&quot;  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c59b231bb66d93aa1012bd8' id='5c59b231bb66d93aa1012bd8'>
<a href='#5c59b231bb66d93aa1012bd8'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5b1f9ef65ad768004ad5f513'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/5435859afd955dddb6ccc1f0a31a482b?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5b1f9ef65ad768004ad5f513'>Zenothestoic</a>
</div>
<a UTCms='1549382193000' class='quanto-date posted-at response-posted-at' href='#5c59b231bb66d93aa1012bd8'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>No particular offence intended to anyone.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c59b2a7f4c0d07e46bd49aa' id='5c59b2a7f4c0d07e46bd49aa'>
<a href='#5c59b2a7f4c0d07e46bd49aa'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5469bca83ab3de7bff000334'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/4c4ecac20f2ccee61491516e54b67f72?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5469bca83ab3de7bff000334'>Tony Morland</a>
</div>
<a UTCms='1549382311000' class='quanto-date posted-at response-posted-at' href='#5c59b2a7f4c0d07e46bd49aa'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Guy, yes of course. but no-one here is even suggesting that you would disclose your actual trading  scripts/algos. Just one or two RESULTS SUMMARIES (e.g. number of years of test, cumulative return, specific return, annual volatility, Sharpe, MaxDD%, alpha, beta and leverage) to show what sort of results  you are actually achieving with your methodologies. There is absolutely no way that anyone could back-out your IP from that!!  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c59b3f5b804dd68d1b751d7' id='5c59b3f5b804dd68d1b751d7'>
<a href='#5c59b3f5b804dd68d1b751d7'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5971e2308bc634000d022f24'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3fff8e67995978b6170deb9d9001a7b6?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5971e2308bc634000d022f24'>Joakim Arvidsson (Cream Mongoose)</a>
<span class='badge medal'></span>
</div>
<a UTCms='1549382645000' class='quanto-date posted-at response-posted-at' href='#5c59b3f5b804dd68d1b751d7'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Zeno,</p>

<blockquote>
<p>If I had anything of value which I thought would make money (and I do<br>
not) then I would not bother with trading forums. Which are mostly &quot; a<br>
tale Told by an idiot, full of sound and fury Signifying nothing.&quot;</p>
</blockquote>

<p>So you’re here purely for entertainment then? ;)  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c59b40f50cfda5b1cdac3de' id='5c59b40f50cfda5b1cdac3de'>
<a href='#5c59b40f50cfda5b1cdac3de'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5469bca83ab3de7bff000334'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/4c4ecac20f2ccee61491516e54b67f72?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5469bca83ab3de7bff000334'>Tony Morland</a>
</div>
<a UTCms='1549382671000' class='quanto-date posted-at response-posted-at' href='#5c59b40f50cfda5b1cdac3de'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Zeno, your judgement there may be a little too harsh and over-generalized. Personally i have gained a few useful insights &amp; ideas from the comments of SOME people here ... including [even] you from time to time .....    ;-))  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c59c29cb804dd5ed6b7523b' id='5c59c29cb804dd5ed6b7523b'>
<a href='#5c59c29cb804dd5ed6b7523b'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5b1f9ef65ad768004ad5f513'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/5435859afd955dddb6ccc1f0a31a482b?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5b1f9ef65ad768004ad5f513'>Zenothestoic</a>
</div>
<a UTCms='1549386396000' class='quanto-date posted-at response-posted-at' href='#5c59c29cb804dd5ed6b7523b'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Ha ha ha. I doubt that. I am long past my sell by date.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c59c831f4c0d0319dbd49b7' id='5c59c831f4c0d0319dbd49b7'>
<a href='#5c59c831f4c0d0319dbd49b7'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1549387825000' class='quanto-date posted-at response-posted-at' href='#5c59c831f4c0d0319dbd49b7'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Tony, showing simulation result summaries on some strategies has been done a number of times.</p>

<p>However, I have little interest in the contest per se, rarely even look at the results. I am not designing anything for it either. Nonetheless, I do look at some of the trading scripts that could make the contest. Always looking for interesting code snippets, gaming ideas, and structure in the trade mechanics. </p>

<p>I do see the value in such trading strategies as mentioned before. But that is not currently my type of game.</p>

<p>I prefer designing long-term trading strategies. I want them first and foremost to last. My longest simulated trading interval using market data was 50 years! That too presents its challenges. Trying to make sure with all the uncertainties that your trading script will prosper whatever is thrown at it while keeping control over it all. </p>

<p>I am here to learn to code in Python and then transform some of my best strategies to Python code. A task that turned out to be more difficult and time-consuming than anticipated. But, slowly, I am getting there. </p>

<p>Regardless, we are here for various reasons. We are the ones who decide what we want to share and that should be enough. There is no obligation to do so, whatever it is. </p>

<p>There are literally billions and billions of possible trading scripts, we have barely scratched the surface of possibilities. Maybe all we can do is compare trading strategies on whatever basis and make our choice based on whatever criteria we like. The equation for that is:</p>

<p>\(F_0 + \sum^n (H_a \cdot \Delta P) \, &gt; \, F_0 + \sum^n (H_b \cdot \Delta P) \)</p>

<p>We find stuff that can help our own trading methods, then great. Technically, it might be why we are here.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c69a962aec5a16b0573a61a' id='5c69a962aec5a16b0573a61a'>
<a href='#5c69a962aec5a16b0573a61a'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1550428514000' class='quanto-date posted-at response-posted-at' href='#5c69a962aec5a16b0573a61a'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><h2 id='5c69a962aec5a16b0573a61a-managing-basic-portfolio-math'><a class='clickable-header-link' href='#5c69a962aec5a16b0573a61a-managing-basic-portfolio-math'>Managing Basic Portfolio Math</a></h2>

<p>Somewhere along the line, you will have to mix trading strategies together, meaning playing more than one at a time. And the overall result will depend on their sum. Each strategy will be allocated some initial capital and ran simultaneously with the others in the group. This group of strategies could be of any size and will constitute the entire portfolio.</p>

<p>The payoff matrix equation for this is: \(F(t) = F_0 + \sum^n (H \cdot \Delta P)\). And for a group of strategies, it is the same equation. </p>

<p>What would change are the matrix dimensions going from 2 to 3. Also, \(F_0\) would need to be divided into those \(k\) strategies. The holding matrix would have for elements: \(h_{k,i,j}\), and the price matrix: \(p_{k,i,j}\). This is sufficient to identify every trade from \(i\) to \(n\) on any stock \(j\) in any strategy \(k\).</p>

<p>We could rewrite the equation as: \(F(t) = \sum_1^k\frac{F_0}{k} + \sum_1^k \sum_i^n (H \cdot \Delta P)\). Note that the previous equation did the same job.</p>

<p>All that to make the following point: adding strategies together in the same portfolio will average out some of the stuff on these regrouped strategies. One could ask the question: what is the average or actual drawdown for the first 10 portfolios participating in the contest for instance? The answer should be something less than the highest drawdown of the group but more than the lowest of the group.</p>

<p>If you have two trading strategies with drawdowns of -0.10, you will not be getting a sum of -0.20 for the combined drawdowns. But maybe more something like -0.07 to -0.09 since your two strategies might not reach their lowest drawdown at the same time. Note that having two strategies, the initial capital would have been divided in two too. It goes the same if you handle 10 strategies or more at a time. The strategy diversification will help reduce the overall drawdown.</p>

<p>You have some of this stuff that will average out like volatility, drawdowns and Sharpe ratios. As for profits or losses, you can still make averages of the lot, but mostly you will simply add them up. And this is a major distinction. </p>

<p>Each of the trading strategies could be ordered by outcome. We would have: \(H_a &gt; H_b &gt; \cdots &gt; H_k\). And thereby having each strategy contributing less and less to the overall results. Nonetheless, the total outcome would not be changed, you would still get the cumulative sum of all the profits and losses on all the trades taken.</p>
<h3 id='5c69a962aec5a16b0573a61a-managing-things-out'><a class='clickable-header-link' href='#5c69a962aec5a16b0573a61a-managing-things-out'>Managing Things Out</a></h3>

<p>The average portfolio strategy result is simple, it is \(\frac{F(t)}{k}\). Determining the total outcome is trickier since you do not have any of the future data. Still, you do know the general outcome in terms of its CAGR or something close to it based on some long-term backtest. $$\hat g(t) = [\frac{F_0 + \sum^n (H \cdot \Delta P)}{F_0 }]^{1/t} -1$$</p>

<p>For instance, if you take the first 10 strategies from the contest and they average out to something like \(5.0\%\) CAGR, you could recompose the equation with \(F(t) = F_0 \cdot (1 + \hat g)^t\) and get an estimate of where the sum of these strategies is going. With 10 million each for a duration of 14 years, one should expect to get: \(F(t) \cdot 10 = 10 \cdot F_0 \cdot (1 + \hat g)^t\) and this in numbers gives: \(10,000,000 \cdot 10 = 10 \cdot 10,000,000 \cdot (1 + 0.05)^{14}\). If you do the calculations it comes out to 197,993,159 for the 100,000,000 put on the table. Note that strategies participating in the contest have stability, low volatility, low drawdowns and near zero beta which explains their low CAGRs.</p>

<p>Say you add one more trading strategy to the mix. Take the one in the following thread: <a href="https://www.quantopian.com/posts/built-robo-advisor#5c687f392be7cd0e55dd3e7f" rel="nofollow">https://www.quantopian.com/posts/built-robo-advisor#5c687f392be7cd0e55dd3e7f</a> where the outcome was 4,243,029,746 and add this to the 197,993,159 from the first 10 contest participants. Then, take the outcome for the 11 trading strategies combined using: $$\hat g(t) = [\frac{F_0 + \sum^n (H \cdot \Delta P)}{F_0 }]^{1/t} -1$$ which would give: $$\hat g(t) = [\frac{120,000,000 + 4,441,022,905}{120,000,000}]^{1/14} -1 = 0.30$$</p>

<p>This one trading strategy raised the overall CAGR for the 11-strategy portfolio from 0.05 to 0.30 over its 14-year trading interval. These might be only guesstimates. But nonetheless, they do provide a reasonable approximation.</p>

<p>If you put two such strategies in the mix you would get: $$\hat g(t) = [\frac{140,000,000 + 9,300,038,971}{140,000,000 }]^{1/14} -1 = 0.35$$ </p>

<p>The two heavy strategies would still have their big drawdowns, but now the impact of their respective drawdowns would be reduced by the 10 low drawdown contest strategies. The average drawdown would now be -0.16, a much more amenable portfolio figure.</p>
<h3 id='5c69a962aec5a16b0573a61a-extrapolating'><a class='clickable-header-link' href='#5c69a962aec5a16b0573a61a-extrapolating'>Extrapolating</a></h3>

<p>Extrapolating for an added 10 years based on the above 35% CAGR would come close to a portfolio value of \(\$\)187B. But in reality, it would be more like \(\$\)395B since the portfolio is compensating for return decay due to the two high profile strategies. While extrapolating, add 6 more years to make it 30, the total portfolio value would rise to something like \(\$\)3.935T. That is more than pocket change for just watching a set of programs do their thing. But then, one would have to have a long-term vision of where he/she wants to go.</p>
<h3 id='5c69a962aec5a16b0573a61a-things-to-do'><a class='clickable-header-link' href='#5c69a962aec5a16b0573a61a-things-to-do'>Things To Do</a></h3>

<p>If after some modifications to the program I bring down the drawdowns in the vicinity of -0.30, then the overall average drawdown for the 12 strategies will fall to about -0.09 which would make it a reasonable portfolio of strategies and still get the outstanding rewards. Even on these 2 strategies, going to cash is an acceptable protection measure in times of market turmoil. And this kind of minimal protection should be relatively easy to add to those two high drawdown strategies. </p>

<p>After all these tests which were only to raise my interest in the thing, I will have, not only to finally read the code, but also bring some modifications to it in order to make it do what I want. What has been demonstrated in the step by step modifications made was that the high profile strategy could survive. It did over a 14-year period. It was scalable and it could be controlled. However, it does lack protective measures, and bringing in some will be part of the job.</p>

<p>I see all the tests I have made as preliminary work to see if there was something there. And if a trading strategy passes these acid tests, then I stand ready to go forward. My job will be to enhance the strategy&#39;s strengths and alleviate, reduce or eliminate some of its weaknesses. At least, I start knowing how far it could go.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5f6c6149bde0210013b25df6' id='5f6c6149bde0210013b25df6'>
<a href='#5f6c6149bde0210013b25df6'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5d2cca3a2327de232e975f83'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/d946b0f07361dcd7a1dfaa8f1a5d93a9?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5d2cca3a2327de232e975f83'>Thomas Kissels</a>
</div>
<a UTCms='1600938313000' class='quanto-date posted-at response-posted-at' href='#5f6c6149bde0210013b25df6'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I cannot run this notebook on Quantopian, it says:</p>

<blockquote>
<p>InputRejected: Importing blas from cvxopt raised an ImportError. Did<br>
you mean to import base from cvxopt? You tried to import a module that<br>
is not whitelisted on Quantopian. To see the list of allowed modules<br>
in the IDE, go to<br>
<a href="https://www.quantopian.com/docs/whitelists/ide-whitelist#algo-ide-whitelist" rel="nofollow">https://www.quantopian.com/docs/whitelists/ide-whitelist#algo-ide-whitelist</a>.<br>
To see the list of additional modules allowed in Research, go to<br>
<a href="https://www.quantopian.com/docs/whitelists/research-whitelist#research-whitelist" rel="nofollow">https://www.quantopian.com/docs/whitelists/research-whitelist#research-whitelist</a>.</p>
</blockquote>

<p>Can it be solved?  </p>
</div>
</div>
</div>

</div>
<div class='sign-in-please'>
Please <a href='/signin?return_to=/posts/the-capital-asset-pricing-model-revisited'>sign in</a> or
<a href='/users/sign_up?redirect_to=/posts/the-capital-asset-pricing-model-revisited'>join Quantopian</a> to
post a reply.
</div>
</div>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId: "550580758292093",
      status: false,
      cookie: true,
      xfbml: true
    });
  };
  
  (function(d, debug){
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) {return;}
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
    ref.parentNode.insertBefore(js, ref);
  }(document, /*debug*/ false));
  
  window.twttr = (function (d,s,id) {
    var t, js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return; js=d.createElement(s); js.id=id;
    js.src="//platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs);
    return window.twttr || (t = { _e: [], ready: function(f){ t._e.push(f) } });
  }(document, "script", "twitter-wjs"));
</script>
<script>
  $(document).ready(function () {
    quanto.instances.pm = new quanto.PostManager(false)
  });
</script>

<div class='login-footer'>
<div class='container'>
<div class='login-footer-text'>
Become an expert in quant finance through Quantopian's hands-on education.
</div>
<div class='login-footer-button'>
<button class='btn btn-v2 stroke join-modal-link mixpanel-button' data-event='anon join footer click posts' data-mixpanel='click'>
Join Now
</button>
</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='error-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'>Error</span>
</div>
<div class='modal-body body-content'>
<p>Sorry, something went wrong.  Try again or contact us by <a class='feedback-link'>sending feedback</a>.</p>
</div>
<div class='modal-footer'>
<button class='btn btn-v2 blue action-button' data-dismiss='modal' href='#'>Close</button>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='confirmation-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'></span>
</div>
<div class='modal-body body-content'></div>
<div class='modal-footer'>
<div class='pull-right'>
<button class='btn btn-v2 border' data-dismiss='modal'>Cancel</button>
<button class='btn btn-v2 blue action-button' data-dismiss='modal'></button>
</div>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='message-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'></span>
</div>
<div class='modal-body body-content'></div>
<div class='modal-footer'>
<button class='btn btn-v2 blue action-button' data-dismiss='modal' id='message-modal-close'>Close</button>
</div>

</div>
</div>
</div>

<div class='always-bootstrap3-modals'>
<div class='fade modal quanto-modal-v2' id='join-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header visible-small'>
<span class='title'>
Join Quantopian.  It's Free!
</span>
<div class='modal-x-out visible-xs'></div>
</div>
<div class='modal-body'>
<div class='flex-wrap'>
<div class='join-left-pane hidden-small'>
<div class='margin_30l'>
<div class='join-hero-text'>
Join Quantopian.  It's Free!
</div>
<div class='join-benefits'>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image code'></div>
</div>
<div class='join-text'>
Use our research platform, backtester, and dozens of clean data sets.
</div>
</div>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image learn'></div>
</div>
<div class='join-text'>
Learn with our hands-on education and community forums.
</div>
</div>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image win'></div>
</div>
<div class='join-text'>
Enter to win cash prizes in our contest.
</div>
</div>
</div>
<div class='hidden saved-reminder'>
Don't worry, all your work is already saved.
</div>
</div>
</div>
<div class='join-right-pane'>
<div class='hidden-small'>
<div class='button-pane'>
<a class="button btn-v2 user-form-btn" href="/signin">Already a Quantopian member?</a>
</div>
</div>
<div class='visible-small'>
<div class='already-member'>
<a href='/signin'>Already a Quantopian member?</a>
</div>
</div>
<form class="quanto-form-v2" id="new-user-modal-form" action="/users" accept-charset="UTF-8" data-remote="true" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><div class='error-message hidden'>
<div class='message'></div>
</div>
<div class='name-group'>
<div class='form-group inline-block'>
<label for="user_firstname">First Name</label>
<input class="form-control firstname" pattern=".*" required="required" autocomplete="off" autofocus="autofocus" type="text" name="user[firstname]" id="user_firstname" />
</div>
<div class='form-group inline-block'>
<label for="user_lastname">Last Name</label>
<input class="form-control" value="" pattern=".*" required="required" autocomplete="off" type="text" name="user[lastname]" id="user_lastname" />
</div>
</div>
<div class='form-group'>
<label for="user_email">Email</label>
<input class="form-control" value="" pattern=".*" required="required" autocomplete="off" type="email" name="user[email]" id="user_email" />
</div>
<div class='form-group'>
<label for="user_password">Password</label>
<input autocomplete="off" class="form-control" pattern=".*" required="required" type="password" name="user[password]" id="user_password" />
</div>
<div class='checkbox eula'>
<input id='eula-checkbox' type='checkbox'>
<div class='quanto-checkbox'></div>
<label for='eula-checkbox' id='checkbox-label'>I accept the <a href='/policies/terms' target='_blank'>Terms Of Use</a> and <a href='/policies/privacy' target='_blank'>Privacy Policy</a>.</label>
</div>
<div class='checkbox mailchimp-box'>
<input name="user[allow_marketing_emails]" type="hidden" value="0" /><input type="checkbox" value="1" name="user[allow_marketing_emails]" id="user_allow_marketing_emails" />
<div class='quanto-checkbox'></div>
<label for='user_allow_marketing_emails'>
Send me email updates with the latest news from the Quantopian community. We send these emails about once a month.
</label>
</div>
<div class='button-row'>
<button class='btn-v2 blue full' data-redirect-to='/tutorials/getting-started' id='sign-up-button' type='Submit'>Join Quantopian</button>
</div>
</form></div>
</div>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='feedback-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title'>Contact Support</span>
</div>
<div class='modal-body'>
<form class='anon-user controls quanto-form-v2' id='feedback-form'>
<div class='feedback-inputs'>
<div class='form-group'>
<input autofocus class='form-control' id='feedback-email-box' name='email' placeholder='Email Address' type='email'>
</div>
<div class='form-group'>
<input class='form-control' id='feedback-name-box' placeholder='Name' type='name'>
</div>
<div class='form-group'>
<textarea class='form-control' id='feedback-box' name='feedback' placeholder='What may we help you with?' rows='10'></textarea>
</div>
</div>
</form>
<form class='hidden quanto-form-v2 select-resource-area'>
<div class='select-step select-type-step'>
<div class='form-group'>
<select class='form-control select-resource-dropdown' title='Select the item you need help with'>
<option value='algorithm'>Algorithm</option>
<option value='backtest'>Backtest</option>
<option value='notebook'>Notebook</option>
</select>
</div>
</div>
<div class='select-step loading-area hidden'>
<div class='loading-text'>
Loading...
</div>
</div>
<div class='select-step empty-list-area hidden'>
<div class='back-button'>Go Back</div>
<div class='empty-text'>
No <span class='empty-list-resource-text'>algorithms</span> found
</div>
</div>
<div class='select-algo-area select-step hidden'>
<div class='back-button'>Go Back</div>
<table class='select-algo-table select-item-table'>
<thead>
<tr>
<th>
Algorithm
<span class='sort-icon'></span>
</th>
<th>
Last Modified
<span class='sort-icon'></span>
</th>
</tr>
</thead>
</table>
</div>
<div class='select-backtest-area select-step hidden'>
<div class='back-button'>Go Back</div>
<table class='select-backtest-table select-item-table'>
<thead>
<tr>
<th>
Backtest
<span class='sort-icon'></span>
</th>
<th>
Started At
<span class='sort-icon'></span>
</th>
<th>
Overall Return
<span class='sort-icon'></span>
</th>
<th>
Status
<span class='sort-icon'></span>
</th>
</tr>
</thead>
</table>
</div>
<div class='select-notebook-area select-step hidden'>
<div class='back-button'>Go Back</div>
<div class='subtitle select-cell-step'>
Choose a cell to use as the preview for this notebook:
</div>
<div class='iframe-wrapper'>
<iframe class='notebook-list-iframe slow-fade' src=''></iframe>
</div>
<div class='progress-area slow-fade in'>
<div class='progress-container'>
<div class='progress-title'>
<div class='quanto-loader gray'></div>
</div>
</div>
</div>
<div class='maintenance-area'>
<div class='error-container'>
<div class='row'>
<div class='col-md-14 msg-title h1'>
Sorry, research is currently undergoing maintenance.
</div>
</div>
<div class='row'>
<div class='col-md-14 msg-subtitle'>
Please check back shortly. If the maintenance period lasts longer than expected,
you can find updates on <a href='https://status.quantopian.com/'>status.quantopian.com</a>.
</div>
</div>

</div>
</div>
<div class='error-area'>
<div class='error-container'>
<div class='row'>
<div class='col-md-14 msg-title h1'>
Sorry, something went wrong on our end.
</div>
</div>
<div class='row'>
<div class='col-md-14 msg-subtitle'>
Please try again or contact <a class='open-feedback-link'>Quantopian support</a>.
</div>
</div>

</div>
</div>

</div>
<div class='selected-item-area select-step hidden'>
<div class='selected-item-group form-group'>
<div class='selected-item-control'>
<input class='disabled form-control selected-item-box' type='text'>
<span class='secure-icon icon'></span>
<button class='btn change change-primary-item-button change-selection-button new-btn transparent' type='button'>
<span class='refresh-icon icon'></span>
</button>
</div>
<div class='selected-backtest-control'>
<input class='disabled form-control selected-backtest-box' type='text'>
<span class='secure-icon icon'></span>
<button class='btn change-backtest-button change-selection-button new-btn transparent' type='button'>
<span class='refresh-icon icon'></span>
</button>
</div>
</div>
<div class='checkbox-group form-group'>
<div class='checkbox give-permission'>
<input class='give-permission-checkbox' id='feedback-give-permission-checkbox' type='checkbox'>
<div class='quanto-checkbox'></div>
<label for='feedback-give-permission-checkbox'>
I permit Quantopian to view <span class='item-type-text'>this algorithm,
backtest or notebook and their imported datasets</span> for the purpose of providing support.
</label>
</div>
</div>
</div>
</form>

<div class='loading-step hidden'>
<div class='loading-text'>
Submitting your support ticket...
</div>
</div>
<div class='success-step invisible'>
<h2 class='title center'>
You've successfully submitted a support ticket.
</h2>
<p>
Our support team will be in touch soon.
</p>
<div class='confirmation-image'></div>
</div>
</div>
<div class='modal-footer'>
<button class='btn-v2 blue' id='send-feedback-button'>Send</button>
<div class='error-message hidden'>
Error submitting support request.
</div>
</div>

</div>
</div>
</div>

</div>
</div>
<div class='footer' id='quanto-footer-container'>
<div class='container'>
<div class='row header-row'>
<div class='col-sm-fourth span3'>
<img class='async-image logotype-image' data-src='https://qf.quantopian.com/assets/logos/logo-q-full-b23bda5ac757691b9259d396d0dfef91567165868b8c955a836649686e6d2248.svg'>
</div>
<div class='col-sm-fourth span3'></div>
<div class='col-sm-fourth span3'></div>
<div class='col-sm-fourth span3'>
<div class='feedback-email'>
Need help?
<a href="/cdn-cgi/l/email-protection#1f797a7a7b7d7e7c745f6e6a7e716b706f767e71317c7072">Contact support.</a>
</div>
</div>
</div>
<div class='row'>
<div class='col-sm-fourth span3'>
<div class='header'>Company</div>
<div class='footer-row'>
<a href='/about'>About</a>
</div>
<div class='footer-row'>
<a href='/academia'>Academia</a>
</div>
<div class='footer-row'>
<a href='/jobs'>Careers</a>
</div>
<div class='footer-row'>
<a href='/posts'>Community</a>
</div>
<div class='footer-row'>
<a href='/events'>Events</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Learn &amp; Support</div>
<div class='footer-row'>
<a href='/faq'>FAQ</a>
</div>
<div class='footer-row'>
<a href='/tutorials/getting-started'>Getting Started</a>
</div>
<div class='footer-row'>
<a href='/docs'>Documentation</a>
</div>
<div class='footer-row'>
<a href='/tutorials'>Tutorials</a>
</div>
<div class='footer-row'>
<a href='/lectures'>Lectures</a>
</div>
<div class='footer-row'>
<a href='/opensource'>Open Source</a>
</div>
<div class='footer-row'>
<a href='https://status.quantopian.com/'>Site Status</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Notices</div>
<div class='footer-row'>
<a href='/policies/terms'>Terms of Use</a>
</div>
<div class='footer-row'>
<a href='/policies/privacy'>Privacy Policy</a>
</div>
<div class='footer-row'>
<a href='/security'>Security</a>
</div>
<div class='footer-row'>
<a href='/policies/code-of-conduct'>Code of Conduct</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Follow Us</div>
<div class='footer-row'>
<a href='https://www.twitter.com/quantopian'>Twitter</a>
</div>
<div class='footer-row'>
<a href='https://www.facebook.com/quantopian'>Facebook</a>
</div>
<div class='footer-row'>
<a href='https://www.linkedin.com/company/quantopian'>LinkedIn</a>
</div>
<div class='footer-row'>
<a href='https://www.youtube.com/channel/UC606MUq45P3zFLa4VGKbxsg'>YouTube</a>
</div>
</div>
</div>
<div class='row'>
<div class='col-xs-14 span12'>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian.
</p>
<p>
In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>

</div>
</div>
</div>
</div>
</div>
<div class='mobile-footer'>
<div class='mobile-nav-category main-links'>
<div class='mobile-nav-row-footer'>
<a href='/about'>About Quantopian</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/jobs'>Careers</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/posts'>Community</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/events'>Events</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/docs'>Documentation</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/academia'>Academia</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/lectures'>Lectures</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://status.quantopian.com/'>Status</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.facebook.com/quantopian'>Facebook</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.twitter.com/quantopian'>Twitter</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.linkedin.com/company/quantopian'>LinkedIn</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.youtube.com/channel/UC606MUq45P3zFLa4VGKbxsg'>YouTube</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/policies/terms'>Terms of Use</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/policies/privacy'>Privacy Policy</a>
</div>
</div>
<div class='mobile-nav-category'>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian.
</p>
<p>
In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>

</div>
</div>
</div>

</div>
<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script></body>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', "UA-8519877-1", {
    cookieDomain: "quantopian.com"
  });
  ga('set', 'dimension1', 'session_5f9dc7425d387f00077e48e4');
  
  ga('send', 'pageview');
</script>

<input type="hidden" name="is_mac" id="is_mac" value="false" />
<input type="hidden" name="mp" id="mp" value="75873953cd404bcc1da88a55ff51e3b4" />
<script>
  (function(e,a){if(!a.__SV){var b=window;try{var c,l,i,j=b.location,g=j.hash;c=function(a,b){return(l=a.match(RegExp(b+"=([^&]*)")))?l[1]:null};g&&c(g,"state")&&(i=JSON.parse(decodeURIComponent(c(g,"state"))),"mpeditor"===i.action&&(b.sessionStorage.setItem("_mpcehash",g),history.replaceState(i.desiredHash||"",e.title,j.pathname+j.search)))}catch(m){}var k,h;window.mixpanel=a;a._i=[];a.init=function(b,c,f){function e(b,a){var c=a.split(".");2==c.length&&(b=b[c[0]],a=c[1]);b[a]=function(){b.push([a].concat(Array.prototype.slice.call(arguments,
  0)))}}var d=a;"undefined"!==typeof f?d=a[f]=[]:f="mixpanel";d.people=d.people||[];d.toString=function(b){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);b||(a+=" (stub)");return a};d.people.toString=function(){return d.toString(1)+".people (stub)"};k="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
  for(h=0;h<k.length;h++)e(d,k[h]);a._i.push([b,c,f])};a.__SV=1.2;b=e.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";c=e.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}})(document,window.mixpanel||[]);
  mixpanel.init("75873953cd404bcc1da88a55ff51e3b4");
</script>
<script>
  mixpanel.track("view page", {"page": window.location.pathname});
</script>
</html>
