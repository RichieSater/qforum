<!DOCTYPE html>
<html>
<head>
<link href='i1.wp.com' rel='dns-prefetch'>
<link href='i2.wp.com' rel='dns-prefetch'>
<link href='i3.wp.com' rel='dns-prefetch'>
<meta content='2HgX9mcLHaPOX6sfaaAkhWtblhEB9yUNw4l6l46e1k4' name='google-site-verification'>
<link rel="shortcut icon" type="image/x-icon" href="external/favicon-q-ac1a76f2c200e9026b5b1147519bb4fab6256910588b831e2411bc6c7c1218c3.png" />
<title>
Technical analysis Indicators without Talib (code)
</title>
<meta content='I found the base somewhere on the web and extended it where needed. It really helped me to understand the indicators itself instead of blindly using Talib. Have fun with it Peter @author: Bruno Franca @author: Peter Bakker import numpy  import pandas as pd  import math as m#Moving Average  def MA(df, n):      MA = pd.Series(pd.rolling_mean(df[&#39;Close&#39;], n), name = &#39;MA_&#39; + str(n))      df = df.join(MA)      return df#Exponential Moving Average  def EMA(df, n):      EMA =...' name='description'>
<link rel="stylesheet" media="all" href="external/quanto-base-bundle-e8eb6050172aa0d24124d5c24bac90b2cccd88b5b9c7742026c0e9efab038c6e.css" />
<link rel="stylesheet" media="all" href="external/quanto-posts-bundle-aab01368d3f82d8dafc94ee9eabb82e77dc8c9fbbffa952fdcdc744dfa523cf3.css" />
<script src="external/quanto_global-057218867db29d5768131af5d6fb3476cef098e7d9e655108befb903c7ee985e.js"></script>
<script src="external/posts_bundle-3dfd82fa469c393d752e461d837aec9e4e364ae39f49198e34a6626f2180fdf7.js"></script>
<link href='external/logo-q-180x180-0f5a6a439c99203ed4aea6f656e7604c543d287be43d8b17c7591c1131f09a59.png' rel='apple-touch-icon'>
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="1+cz9WveqIL7BsUywZk+xHokbWFA9KRWfSOkR3zOK5ergUW4ySh6YUIbnAOOdpawQqpOCDo4sU3/LH8t1otJLA==" />
<meta content='width=device-width, initial-scale=1.0' name='viewport'>
<script>
//<![CDATA[
window.quanto_data={};quanto_data.bounce_back_params={"show_modal":null,"feedback_text":null};quanto_data.namespace="public";quanto_data.talib_info={"ADOSC":["Chaikin A/D Oscillator (Volume Indicators)",["fastperiod","3"],["slowperiod","10"]],"ADX":["Average Directional Movement Index (Momentum Indicators)",["timeperiod","14"]],"ADXR":["Average Directional Movement Index Rating (Momentum Indicators)",["timeperiod","14"]],"APO":["Absolute Price Oscillator (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["matype","0"]],"AROON":["Aroon (Momentum Indicators)",["timeperiod","14"]],"AROONOSC":["Aroon Oscillator (Momentum Indicators)",["timeperiod","14"]],"ATR":["Average True Range (Volatility Indicators)",["timeperiod","14"]],"BBANDS":["Bollinger Bands (Overlap Studies)",["timeperiod","5"],["nbdevup","2"],["nbdevdn","2"],["matype","0"]],"BETA":["Beta (Statistic Functions)",["timeperiod","5"]],"CCI":["Commodity Channel Index (Momentum Indicators)",["timeperiod","14"]],"CMO":["Chande Momentum Oscillator (Momentum Indicators)",["timeperiod","14"]],"CORREL":["Pearson's Correlation Coefficient (r) (Statistic Functions)",["timeperiod","30"]],"DEMA":["Double Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"DX":["Average Directional Movement Index (Momentum Indicators)",["timeperiod","14"]],"EMA":["Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"KAMA":["Kaufman Adaptive Moving Average (Overlap Studies)",["timeperiod","30"]],"LINEARREG":["Linear Regression (Statistic Functions)",["timeperiod","14"]],"LINEARREG_ANGLE":["Linear Regression Angle (Statistic Functions)",["timeperiod","14"]],"LINEARREG_INTERCEPT":["Linear Regression Intercept (Statistic Functions)",["timeperiod","14"]],"LINEARREG_SLOPE":["Linear Regression Slope (Statistic Functions)",["timeperiod","14"]],"MA":["Moving average (Overlap Studies)",["timeperiod","30"],["matype","0"]],"MACD":["Moving Average Convergence/Divergence (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["signalperiod","9"]],"MACDEXT":["MACD with controllable MA type (Momentum Indicators)",["fastperiod","12"],["fastmatype","0"],["slowperiod","26"],["slowmatype","0"],["signalperiod","9"],["signalmatype","0"]],"MACDFIX":["Moving Average Convergence/Divergence Fix 12/26 (Momentum Indicators)",["signalperiod","9"]],"MAX":["Highest values over a specified period (Math Operators)",["timeperiod","30"]],"MAXINDEX":["Index of highest value over a specified period (Math Operators)",["timeperiod","30"]],"MFI":["Money Flow Index (Momentum Indicators)",["timeperiod","14"]],"MIDPOINT":["Midpoint over period (Overlap Studies)",["timeperiod","14"]],"MIDPRICE":["Midpoint Price over period (Overlap Studies)",["timeperiod","14"]],"MIN":["Lowest value over a specified period (Math Operators)",["timeperiod","30"]],"MININDEX":["Index of lowest value over a specified period (Math Operators)",["timeperiod","30"]],"MINMAX":["Lowest and highest values over a specified period (Math Operators)",["timeperiod","30"]],"MINMAXINDEX":["Indexes of lowest and highest values over a specified period (Math Operators)",["timeperiod","30"]],"MINUS_DI":["Minus Directional Indicator (Momentum Indicators)",["timeperiod","14"]],"MINUS_DM":["Minus Directional Movement (Momentum Indicators)",["timeperiod","14"]],"MOM":["Momentum (Momentum Indicators)",["timeperiod","10"]],"NATR":["Normalized Average True Range (Volatility Indicators)",["timeperiod","14"]],"PLUS_DI":["Plus Directional Indicator (Momentum Indicators)",["timeperiod","14"]],"PLUS_DM":["Plus Directional Movement (Momentum Indicators)",["timeperiod","14"]],"PPO":["Percentage Price Oscillator (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["matype","0"]],"ROC":["Rate of change: ((price/prevPrice)-1)*100 (Momentum Indicators)",["timeperiod","10"]],"ROCP":["Rate of change Percentage: (price-prevPrice)/prevPrice (Momentum Indicators)",["timeperiod","10"]],"ROCR":["Rate of change ratio: (price/prevPrice) (Momentum Indicators)",["timeperiod","10"]],"ROCR100":["Rate of change ratio 100 scale: (price/prevPrice)*100 (Momentum Indicators)",["timeperiod","10"]],"RSI":["Relative Strength Index (Momentum Indicators)",["timeperiod","14"]],"SMA":["Simple Moving Average (Overlap Studies)",["timeperiod","30"]],"STDDEV":["Standard Deviation (Statistic Functions)",["timeperiod","5"],["nbdev","1"]],"STOCH":["Stochastic (Momentum Indicators)",["fastk_period","5"],["slowk_period","3"],["slowk_matype","0"],["slowd_period","3"],["slowd_matype","0"]],"STOCHF":["Stochastic Fast (Momentum Indicators)",["fastk_period","5"],["fastd_period","3"],["fastd_matype","0"]],"STOCHRSI":["Stochastic Relative Strength Index (Momentum Indicators)",["timeperiod","14"],["fastk_period","5"],["fastd_period","3"],["fastd_matype","0"]],"T3":["Triple Exponential Moving Average (T3) (Overlap Studies)",["timeperiod","5"],["vfactor","0.7"]],"TEMA":["Triple Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"TRIMA":["Triangular Moving Average (Overlap Studies)",["timeperiod","30"]],"TRIX":["1-day Rate-Of-Change (ROC) of a Triple Smooth EMA (Momentum Indicators)",["timeperiod","30"]],"TSF":["Time Series Forecast (Statistic Functions)",["timeperiod","14"]],"ULTOSC":["Ultimate Oscillator (Momentum Indicators)",["timeperiod1","7"],["timeperiod2","14"],["timeperiod3","28"]],"VAR":["Variance (Statistic Functions)",["timeperiod","5"],["nbdev","1"]],"WILLR":["Williams' %R (Momentum Indicators)",["timeperiod","14"]],"WMA":["Weighted Moving Average (Overlap Studies)",["timeperiod","30"]]};quanto_data.nb_preview_url="https://notebooks-preview.prd.pub.quantopian.com";quanto_data.delay_nb_preview_load=false;
//]]>
</script>
<meta content='https://www.quantopian.com/posts/technical-analysis-indicators-without-talib-code' property='og:url'>
<meta content='Technical analysis Indicators without Talib (code)' property='og:title'>

<input type="hidden" name="env" id="quanto-env" value="production" />
<meta content='550580758292093' property='fb:app_id'>
<meta content='https://www.quantopian.com/posts/technical-analysis-indicators-without-talib-code' property='og:url'>
<meta content='https://media.quantopian.com/public/og-image-default.png' property='og:image'>
<meta content='Technical analysis Indicators without Talib (code)' property='og:title'>
<meta content='I found the base somewhere on the web and extended it where needed. It really helped me to understand the indicators itself instead of blindly using Talib. Have fun with it Peter @author: Bruno Franca @author: Peter Bakker import numpy  import pandas as pd  import math as m#Moving Average  def MA(df, n):      MA = pd.Series(pd.rolling_mean(df[&#39;Close&#39;], n), name = &#39;MA_&#39; + str(n))      df = df.join(MA)      return df#Exponential Moving Average  def EMA(df, n):      EMA =...' property='og:description'>
</head>
<script type='application/ld+json'>
  {
    "@context": "http://schema.org",
    "@type": "Organization",
    "url": "https://www.quantopian.com",
    "logo": "https://media.quantopian.com/logos/logo-q-press-red.png"
  }
</script>
<body class='' ontouchstart=''>
<div id='fb-root'></div>
<div class='wrapper'>
<div class='alert-v2 error'>
<div class='message'>
Quantopian's community platform is shutting down. Please read <a href="/posts/quantopians-community-services-are-closing">this post</a> for more information and <a href='/account#account'>download your code</a>.
</div>
</div>
<div class='navbar navbar-default navbar-static-top' id='app-navbar'>
<div class='container-fluid'>
<div class='navbar-header'>
<button class='navbar-toggle collapsed' data-target='#app-navbar-collapse' data-toggle='collapse'>
<span class='icon hamburger-menu'></span>
</button>
<a class='navbar-brand' href='/home'>
<img class='logo-image async-image' data-src='external/logo-q-white-b141ea6018546e5a4ecc3d10d8440ec076fc4385764e948b322828cc70950a76.svg'>
</a>
</div>
<div class='collapse navbar-collapse' id='app-navbar-collapse'>
<ul class='nav navbar-nav navbar-right'>
<li class='dropdown quanto-dropdown-new'>
<li>
<a class='header' href='/docs'>
Documentation
</a>
</li>
<li class='dropdown quanto-dropdown-new'>
<a class='header' data-toggle='dropdown' href='#'>
Learn
</a>
<ul class='dropdown-menu'>
<li>
<a class='mixpanel-button' data-event='main nav getting started clicked' href='/tutorials/getting-started'>Getting Started</a>
</li>
<li>
<a class='mixpanel-button' data-event='main nav tutorials clicked' href='/tutorials'>Tutorials</a>
</li>
<li>
<a class='mixpanel-button' data-event='main nav lectures clicked' href='/lectures'>Lectures</a>
</li>
</ul>
</li>
<li>
<a class='header' href='/posts' id='forum-link'>
Forum
</a>
</li>
<li>
<a class="header" href="/signin?return_to=/posts/technical-analysis-indicators-without-talib-code">Log In</a>
</li>
</li>

</ul>
</div>
</div>
</div>
<script>
  $(document).ready(function () {
    quanto.instances.fm = new quanto.FeedbackManager();
    quanto.instances.hm = new quanto.headerManager();
  })
</script>


<div class='content content-area new-style'>
<input type="hidden" name="page-id" id="page-id" value="postatomic" />
<script src="external/MathJax.js?config=TeX-AMS_HTML-full.js,Safe" async="async"></script>
<div class='container page-container post-atomic'>
<input id='parent-post-id-val' type='hidden' value='550823915ce2e99d91000377'>
<div class='post-container' data-post-id='550823915ce2e99d91000377' id='550823915ce2e99d91000377'>
<div class='back-button back-to-community'>Back to Community</div>
<div class='post-title'>Technical analysis Indicators without Talib (code)</div>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51d125a71144e60865000044'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/b7dd86784deedc047d5ad0fb30378bdd?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51d125a71144e60865000044'>Peter Bakker</a>
</div>
<span class='posted-at'>edited </span>
<span UTCms='1527404005000' class='quanto-date posted-at'></span>
<div class='pull-right other-actions'>
<div class='dropup inline-block'>
<div class='dropdown share-control other-action-link'>
<div data-toggle='dropdown'>
<div class='share-image'></div>
Share
</div>
<ul class='dropdown-menu share-options-menu'>
<li>
<a class='share-row' href='https://twitter.com/intent/tweet?text=Technical analysis Indicators without Talib (code)&amp;url=https%3A%2F%2Fwww.quantopian.com%2Fposts%2Ftechnical-analysis-indicators-without-talib-code%3Futm_source%3Dwebsite_share%26utm_campaign%3Dtechnical-analysis-indicators-without-talib-code%26utm_medium%3Dtwitter&amp;via=quantopian'>
<i class='icon icon-twitter'></i>
Share on Twitter
</a>
</li>
<li>
<div class='share-row facebook-button'>
<i class='icon icon-facebook'></i>
Share on Facebook
</div>
</li>
<li>
<div class='share-row linkedin-button' data-share-url='https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Fwww.quantopian.com%2Fposts%2Ftechnical-analysis-indicators-without-talib-code%3Futm_source%3Dwebsite_share%26utm_campaign%3Dtechnical-analysis-indicators-without-talib-code%26utm_medium%3Dlinkedin&amp;title=Technical+analysis+Indicators+without+Talib+%28code%29+%28Peter+Bakker%29&amp;source=Quantopian'>
<i class='icon icon-linkedin'></i>
Share on LinkedIn
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>

<input type="hidden" name="social_fb_post_link" id="social_fb_post_link" value="https://www.quantopian.com/posts/technical-analysis-indicators-without-talib-code?utm_source=website_share&amp;utm_campaign=technical-analysis-indicators-without-talib-code&amp;utm_medium=facebook" />
<input type="hidden" name="social_post_image" id="social_post_image" value="external/logo-q-red-outline.png" />
<input type="hidden" name="social_post_author" id="social_post_author" value="Peter Bakker" />
<div class='body-text'>
<div class='body-text-container post-body'><p>I found the base somewhere on the web and extended it where needed. It really helped me to understand the indicators itself instead of blindly using Talib. Have fun with it</p>

<p>Peter</p>

<p>@author: Bruno Franca<br>
@author: Peter Bakker</p>

<pre><code>



import numpy  
import pandas as pd  
import math as m






#Moving Average  
def MA(df, n):  
    MA = pd.Series(pd.rolling_mean(df[&#39;Close&#39;], n), name = &#39;MA_&#39; + str(n))  
    df = df.join(MA)  
    return df

#Exponential Moving Average  
def EMA(df, n):  
    EMA = pd.Series(pd.ewma(df[&#39;Close&#39;], span = n, min_periods = n - 1), name = &#39;EMA_&#39; + str(n))  
    df = df.join(EMA)  
    return df

#Momentum  
def MOM(df, n):  
    M = pd.Series(df[&#39;Close&#39;].diff(n), name = &#39;Momentum_&#39; + str(n))  
    df = df.join(M)  
    return df

#Rate of Change  
def ROC(df, n):  
    M = df[&#39;Close&#39;].diff(n - 1)  
    N = df[&#39;Close&#39;].shift(n - 1)  
    ROC = pd.Series(M / N, name = &#39;ROC_&#39; + str(n))  
    df = df.join(ROC)  
    return df

#Average True Range  
def ATR(df, n):  
    i = 0  
    TR_l = [0]  
    while i &lt; df.index[-1]:  
        TR = max(df.get_value(i + 1, &#39;High&#39;), df.get_value(i, &#39;Close&#39;)) - min(df.get_value(i + 1, &#39;Low&#39;), df.get_value(i, &#39;Close&#39;))  
        TR_l.append(TR)  
        i = i + 1  
    TR_s = pd.Series(TR_l)  
    ATR = pd.Series(pd.ewma(TR_s, span = n, min_periods = n), name = &#39;ATR_&#39; + str(n))  
    df = df.join(ATR)  
    return df

#Bollinger Bands  
def BBANDS(df, n):  
    MA = pd.Series(pd.rolling_mean(df[&#39;Close&#39;], n))  
    MSD = pd.Series(pd.rolling_std(df[&#39;Close&#39;], n))  
    b1 = 4 * MSD / MA  
    B1 = pd.Series(b1, name = &#39;BollingerB_&#39; + str(n))  
    df = df.join(B1)  
    b2 = (df[&#39;Close&#39;] - MA + 2 * MSD) / (4 * MSD)  
    B2 = pd.Series(b2, name = &#39;Bollinger%b_&#39; + str(n))  
    df = df.join(B2)  
    return df

#Pivot Points, Supports and Resistances  
def PPSR(df):  
    PP = pd.Series((df[&#39;High&#39;] + df[&#39;Low&#39;] + df[&#39;Close&#39;]) / 3)  
    R1 = pd.Series(2 * PP - df[&#39;Low&#39;])  
    S1 = pd.Series(2 * PP - df[&#39;High&#39;])  
    R2 = pd.Series(PP + df[&#39;High&#39;] - df[&#39;Low&#39;])  
    S2 = pd.Series(PP - df[&#39;High&#39;] + df[&#39;Low&#39;])  
    R3 = pd.Series(df[&#39;High&#39;] + 2 * (PP - df[&#39;Low&#39;]))  
    S3 = pd.Series(df[&#39;Low&#39;] - 2 * (df[&#39;High&#39;] - PP))  
    psr = {&#39;PP&#39;:PP, &#39;R1&#39;:R1, &#39;S1&#39;:S1, &#39;R2&#39;:R2, &#39;S2&#39;:S2, &#39;R3&#39;:R3, &#39;S3&#39;:S3}  
    PSR = pd.DataFrame(psr)  
    df = df.join(PSR)  
    return df

#Stochastic oscillator %K  
def STOK(df):  
    SOk = pd.Series((df[&#39;Close&#39;] - df[&#39;Low&#39;]) / (df[&#39;High&#39;] - df[&#39;Low&#39;]), name = &#39;SO%k&#39;)  
    df = df.join(SOk)  
    return df

# Stochastic Oscillator, EMA smoothing, nS = slowing (1 if no slowing)  
def STO(df,  nK, nD, nS=1):  
    SOk = pd.Series((df[&#39;Close&#39;] - df[&#39;Low&#39;].rolling(nK).min()) / (df[&#39;High&#39;].rolling(nK).max() - df[&#39;Low&#39;].rolling(nK).min()), name = &#39;SO%k&#39;+str(nK))  
    SOd = pd.Series(SOk.ewm(ignore_na=False, span=nD, min_periods=nD-1, adjust=True).mean(), name = &#39;SO%d&#39;+str(nD))  
    SOk = SOk.ewm(ignore_na=False, span=nS, min_periods=nS-1, adjust=True).mean()  
    SOd = SOd.ewm(ignore_na=False, span=nS, min_periods=nS-1, adjust=True).mean()  
    df = df.join(SOk)  
    df = df.join(SOd)  
    return df  
# Stochastic Oscillator, SMA smoothing, nS = slowing (1 if no slowing)  
def STO(df, nK, nD,  nS=1):  
    SOk = pd.Series((df[&#39;Close&#39;] - df[&#39;Low&#39;].rolling(nK).min()) / (df[&#39;High&#39;].rolling(nK).max() - df[&#39;Low&#39;].rolling(nK).min()), name = &#39;SO%k&#39;+str(nK))  
    SOd = pd.Series(SOk.rolling(window=nD, center=False).mean(), name = &#39;SO%d&#39;+str(nD))  
    SOk = SOk.rolling(window=nS, center=False).mean()  
    SOd = SOd.rolling(window=nS, center=False).mean()  
    df = df.join(SOk)  
    df = df.join(SOd)  
    return df  
#Trix  
def TRIX(df, n):  
    EX1 = pd.ewma(df[&#39;Close&#39;], span = n, min_periods = n - 1)  
    EX2 = pd.ewma(EX1, span = n, min_periods = n - 1)  
    EX3 = pd.ewma(EX2, span = n, min_periods = n - 1)  
    i = 0  
    ROC_l = [0]  
    while i + 1 &lt;= df.index[-1]:  
        ROC = (EX3[i + 1] - EX3[i]) / EX3[i]  
        ROC_l.append(ROC)  
        i = i + 1  
    Trix = pd.Series(ROC_l, name = &#39;Trix_&#39; + str(n))  
    df = df.join(Trix)  
    return df

#Average Directional Movement Index  
def ADX(df, n, n_ADX):  
    i = 0  
    UpI = []  
    DoI = []  
    while i + 1 &lt;= df.index[-1]:  
        UpMove = df.get_value(i + 1, &#39;High&#39;) - df.get_value(i, &#39;High&#39;)  
        DoMove = df.get_value(i, &#39;Low&#39;) - df.get_value(i + 1, &#39;Low&#39;)  
        if UpMove &gt; DoMove and UpMove &gt; 0:  
            UpD = UpMove  
        else: UpD = 0  
        UpI.append(UpD)  
        if DoMove &gt; UpMove and DoMove &gt; 0:  
            DoD = DoMove  
        else: DoD = 0  
        DoI.append(DoD)  
        i = i + 1  
    i = 0  
    TR_l = [0]  
    while i &lt; df.index[-1]:  
        TR = max(df.get_value(i + 1, &#39;High&#39;), df.get_value(i, &#39;Close&#39;)) - min(df.get_value(i + 1, &#39;Low&#39;), df.get_value(i, &#39;Close&#39;))  
        TR_l.append(TR)  
        i = i + 1  
    TR_s = pd.Series(TR_l)  
    ATR = pd.Series(pd.ewma(TR_s, span = n, min_periods = n))  
    UpI = pd.Series(UpI)  
    DoI = pd.Series(DoI)  
    PosDI = pd.Series(pd.ewma(UpI, span = n, min_periods = n - 1) / ATR)  
    NegDI = pd.Series(pd.ewma(DoI, span = n, min_periods = n - 1) / ATR)  
    ADX = pd.Series(pd.ewma(abs(PosDI - NegDI) / (PosDI + NegDI), span = n_ADX, min_periods = n_ADX - 1), name = &#39;ADX_&#39; + str(n) + &#39;_&#39; + str(n_ADX))  
    df = df.join(ADX)  
    return df

#MACD, MACD Signal and MACD difference  
def MACD(df, n_fast, n_slow):  
    EMAfast = pd.Series(pd.ewma(df[&#39;Close&#39;], span = n_fast, min_periods = n_slow - 1))  
    EMAslow = pd.Series(pd.ewma(df[&#39;Close&#39;], span = n_slow, min_periods = n_slow - 1))  
    MACD = pd.Series(EMAfast - EMAslow, name = &#39;MACD_&#39; + str(n_fast) + &#39;_&#39; + str(n_slow))  
    MACDsign = pd.Series(pd.ewma(MACD, span = 9, min_periods = 8), name = &#39;MACDsign_&#39; + str(n_fast) + &#39;_&#39; + str(n_slow))  
    MACDdiff = pd.Series(MACD - MACDsign, name = &#39;MACDdiff_&#39; + str(n_fast) + &#39;_&#39; + str(n_slow))  
    df = df.join(MACD)  
    df = df.join(MACDsign)  
    df = df.join(MACDdiff)  
    return df

#Mass Index  
def MassI(df):  
    Range = df[&#39;High&#39;] - df[&#39;Low&#39;]  
    EX1 = pd.ewma(Range, span = 9, min_periods = 8)  
    EX2 = pd.ewma(EX1, span = 9, min_periods = 8)  
    Mass = EX1 / EX2  
    MassI = pd.Series(pd.rolling_sum(Mass, 25), name = &#39;Mass Index&#39;)  
    df = df.join(MassI)  
    return df

#Vortex Indicator: http://www.vortexindicator.com/VFX_VORTEX.PDF  
def Vortex(df, n):  
    i = 0  
    TR = [0]  
    while i &lt; df.index[-1]:  
        Range = max(df.get_value(i + 1, &#39;High&#39;), df.get_value(i, &#39;Close&#39;)) - min(df.get_value(i + 1, &#39;Low&#39;), df.get_value(i, &#39;Close&#39;))  
        TR.append(Range)  
        i = i + 1  
    i = 0  
    VM = [0]  
    while i &lt; df.index[-1]:  
        Range = abs(df.get_value(i + 1, &#39;High&#39;) - df.get_value(i, &#39;Low&#39;)) - abs(df.get_value(i + 1, &#39;Low&#39;) - df.get_value(i, &#39;High&#39;))  
        VM.append(Range)  
        i = i + 1  
    VI = pd.Series(pd.rolling_sum(pd.Series(VM), n) / pd.rolling_sum(pd.Series(TR), n), name = &#39;Vortex_&#39; + str(n))  
    df = df.join(VI)  
    return df





#KST Oscillator  
def KST(df, r1, r2, r3, r4, n1, n2, n3, n4):  
    M = df[&#39;Close&#39;].diff(r1 - 1)  
    N = df[&#39;Close&#39;].shift(r1 - 1)  
    ROC1 = M / N  
    M = df[&#39;Close&#39;].diff(r2 - 1)  
    N = df[&#39;Close&#39;].shift(r2 - 1)  
    ROC2 = M / N  
    M = df[&#39;Close&#39;].diff(r3 - 1)  
    N = df[&#39;Close&#39;].shift(r3 - 1)  
    ROC3 = M / N  
    M = df[&#39;Close&#39;].diff(r4 - 1)  
    N = df[&#39;Close&#39;].shift(r4 - 1)  
    ROC4 = M / N  
    KST = pd.Series(pd.rolling_sum(ROC1, n1) + pd.rolling_sum(ROC2, n2) * 2 + pd.rolling_sum(ROC3, n3) * 3 + pd.rolling_sum(ROC4, n4) * 4, name = &#39;KST_&#39; + str(r1) + &#39;_&#39; + str(r2) + &#39;_&#39; + str(r3) + &#39;_&#39; + str(r4) + &#39;_&#39; + str(n1) + &#39;_&#39; + str(n2) + &#39;_&#39; + str(n3) + &#39;_&#39; + str(n4))  
    df = df.join(KST)  
    return df

#Relative Strength Index  
def RSI(df, n):  
    i = 0  
    UpI = [0]  
    DoI = [0]  
    while i + 1 &lt;= df.index[-1]:  
        UpMove = df.get_value(i + 1, &#39;High&#39;) - df.get_value(i, &#39;High&#39;)  
        DoMove = df.get_value(i, &#39;Low&#39;) - df.get_value(i + 1, &#39;Low&#39;)  
        if UpMove &gt; DoMove and UpMove &gt; 0:  
            UpD = UpMove  
        else: UpD = 0  
        UpI.append(UpD)  
        if DoMove &gt; UpMove and DoMove &gt; 0:  
            DoD = DoMove  
        else: DoD = 0  
        DoI.append(DoD)  
        i = i + 1  
    UpI = pd.Series(UpI)  
    DoI = pd.Series(DoI)  
    PosDI = pd.Series(pd.ewma(UpI, span = n, min_periods = n - 1))  
    NegDI = pd.Series(pd.ewma(DoI, span = n, min_periods = n - 1))  
    RSI = pd.Series(PosDI / (PosDI + NegDI), name = &#39;RSI_&#39; + str(n))  
    df = df.join(RSI)  
    return df

#True Strength Index  
def TSI(df, r, s):  
    M = pd.Series(df[&#39;Close&#39;].diff(1))  
    aM = abs(M)  
    EMA1 = pd.Series(pd.ewma(M, span = r, min_periods = r - 1))  
    aEMA1 = pd.Series(pd.ewma(aM, span = r, min_periods = r - 1))  
    EMA2 = pd.Series(pd.ewma(EMA1, span = s, min_periods = s - 1))  
    aEMA2 = pd.Series(pd.ewma(aEMA1, span = s, min_periods = s - 1))  
    TSI = pd.Series(EMA2 / aEMA2, name = &#39;TSI_&#39; + str(r) + &#39;_&#39; + str(s))  
    df = df.join(TSI)  
    return df

#Accumulation/Distribution  
def ACCDIST(df, n):  
    ad = (2 * df[&#39;Close&#39;] - df[&#39;High&#39;] - df[&#39;Low&#39;]) / (df[&#39;High&#39;] - df[&#39;Low&#39;]) * df[&#39;Volume&#39;]  
    M = ad.diff(n - 1)  
    N = ad.shift(n - 1)  
    ROC = M / N  
    AD = pd.Series(ROC, name = &#39;Acc/Dist_ROC_&#39; + str(n))  
    df = df.join(AD)  
    return df

#Chaikin Oscillator  
def Chaikin(df):  
    ad = (2 * df[&#39;Close&#39;] - df[&#39;High&#39;] - df[&#39;Low&#39;]) / (df[&#39;High&#39;] - df[&#39;Low&#39;]) * df[&#39;Volume&#39;]  
    Chaikin = pd.Series(pd.ewma(ad, span = 3, min_periods = 2) - pd.ewma(ad, span = 10, min_periods = 9), name = &#39;Chaikin&#39;)  
    df = df.join(Chaikin)  
    return df

#Money Flow Index and Ratio  
def MFI(df, n):  
    PP = (df[&#39;High&#39;] + df[&#39;Low&#39;] + df[&#39;Close&#39;]) / 3  
    i = 0  
    PosMF = [0]  
    while i &lt; df.index[-1]:  
        if PP[i + 1] &gt; PP[i]:  
            PosMF.append(PP[i + 1] * df.get_value(i + 1, &#39;Volume&#39;))  
        else:  
            PosMF.append(0)  
        i = i + 1  
    PosMF = pd.Series(PosMF)  
    TotMF = PP * df[&#39;Volume&#39;]  
    MFR = pd.Series(PosMF / TotMF)  
    MFI = pd.Series(pd.rolling_mean(MFR, n), name = &#39;MFI_&#39; + str(n))  
    df = df.join(MFI)  
    return df

#On-balance Volume  
def OBV(df, n):  
    i = 0  
    OBV = [0]  
    while i &lt; df.index[-1]:  
        if df.get_value(i + 1, &#39;Close&#39;) - df.get_value(i, &#39;Close&#39;) &gt; 0:  
            OBV.append(df.get_value(i + 1, &#39;Volume&#39;))  
        if df.get_value(i + 1, &#39;Close&#39;) - df.get_value(i, &#39;Close&#39;) == 0:  
            OBV.append(0)  
        if df.get_value(i + 1, &#39;Close&#39;) - df.get_value(i, &#39;Close&#39;) &lt; 0:  
            OBV.append(-df.get_value(i + 1, &#39;Volume&#39;))  
        i = i + 1  
    OBV = pd.Series(OBV)  
    OBV_ma = pd.Series(pd.rolling_mean(OBV, n), name = &#39;OBV_&#39; + str(n))  
    df = df.join(OBV_ma)  
    return df

#Force Index  
def FORCE(df, n):  
    F = pd.Series(df[&#39;Close&#39;].diff(n) * df[&#39;Volume&#39;].diff(n), name = &#39;Force_&#39; + str(n))  
    df = df.join(F)  
    return df

#Ease of Movement  
def EOM(df, n):  
    EoM = (df[&#39;High&#39;].diff(1) + df[&#39;Low&#39;].diff(1)) * (df[&#39;High&#39;] - df[&#39;Low&#39;]) / (2 * df[&#39;Volume&#39;])  
    Eom_ma = pd.Series(pd.rolling_mean(EoM, n), name = &#39;EoM_&#39; + str(n))  
    df = df.join(Eom_ma)  
    return df

#Commodity Channel Index  
def CCI(df, n):  
    PP = (df[&#39;High&#39;] + df[&#39;Low&#39;] + df[&#39;Close&#39;]) / 3  
    CCI = pd.Series((PP - pd.rolling_mean(PP, n)) / pd.rolling_std(PP, n), name = &#39;CCI_&#39; + str(n))  
    df = df.join(CCI)  
    return df

#Coppock Curve  
def COPP(df, n):  
    M = df[&#39;Close&#39;].diff(int(n * 11 / 10) - 1)  
    N = df[&#39;Close&#39;].shift(int(n * 11 / 10) - 1)  
    ROC1 = M / N  
    M = df[&#39;Close&#39;].diff(int(n * 14 / 10) - 1)  
    N = df[&#39;Close&#39;].shift(int(n * 14 / 10) - 1)  
    ROC2 = M / N  
    Copp = pd.Series(pd.ewma(ROC1 + ROC2, span = n, min_periods = n), name = &#39;Copp_&#39; + str(n))  
    df = df.join(Copp)  
    return df

#Keltner Channel  
def KELCH(df, n):  
    KelChM = pd.Series(pd.rolling_mean((df[&#39;High&#39;] + df[&#39;Low&#39;] + df[&#39;Close&#39;]) / 3, n), name = &#39;KelChM_&#39; + str(n))  
    KelChU = pd.Series(pd.rolling_mean((4 * df[&#39;High&#39;] - 2 * df[&#39;Low&#39;] + df[&#39;Close&#39;]) / 3, n), name = &#39;KelChU_&#39; + str(n))  
    KelChD = pd.Series(pd.rolling_mean((-2 * df[&#39;High&#39;] + 4 * df[&#39;Low&#39;] + df[&#39;Close&#39;]) / 3, n), name = &#39;KelChD_&#39; + str(n))  
    df = df.join(KelChM)  
    df = df.join(KelChU)  
    df = df.join(KelChD)  
    return df

#Ultimate Oscillator  
def ULTOSC(df):  
    i = 0  
    TR_l = [0]  
    BP_l = [0]  
    while i &lt; df.index[-1]:  
        TR = max(df.get_value(i + 1, &#39;High&#39;), df.get_value(i, &#39;Close&#39;)) - min(df.get_value(i + 1, &#39;Low&#39;), df.get_value(i, &#39;Close&#39;))  
        TR_l.append(TR)  
        BP = df.get_value(i + 1, &#39;Close&#39;) - min(df.get_value(i + 1, &#39;Low&#39;), df.get_value(i, &#39;Close&#39;))  
        BP_l.append(BP)  
        i = i + 1  
    UltO = pd.Series((4 * pd.rolling_sum(pd.Series(BP_l), 7) / pd.rolling_sum(pd.Series(TR_l), 7)) + (2 * pd.rolling_sum(pd.Series(BP_l), 14) / pd.rolling_sum(pd.Series(TR_l), 14)) + (pd.rolling_sum(pd.Series(BP_l), 28) / pd.rolling_sum(pd.Series(TR_l), 28)), name = &#39;Ultimate_Osc&#39;)  
    df = df.join(UltO)  
    return df

#Donchian Channel  
def DONCH(df, n):  
    i = 0  
    DC_l = []  
    while i &lt; n - 1:  
        DC_l.append(0)  
        i = i + 1  
    i = 0  
    while i + n - 1 &lt; df.index[-1]:  
        DC = max(df[&#39;High&#39;].ix[i:i + n - 1]) - min(df[&#39;Low&#39;].ix[i:i + n - 1])  
        DC_l.append(DC)  
        i = i + 1  
    DonCh = pd.Series(DC_l, name = &#39;Donchian_&#39; + str(n))  
    DonCh = DonCh.shift(n - 1)  
    df = df.join(DonCh)  
    return df

#Standard Deviation  
def STDDEV(df, n):  
    df = df.join(pd.Series(pd.rolling_std(df[&#39;Close&#39;], n), name = &#39;STD_&#39; + str(n)))  
    return df  
</code></pre>
</div>
</div>
</div>

</div>

<div class='container page-container post-atomic'>
<div class='section-header reply-header'>
<div class='reply-title'>44 responses</div>
</div>
<div class='replies'>
<div class='post-container response-container' data-post-id='55082e1010cf56347e0003be' id='55082e1010cf56347e0003be'>
<a href='#55082e1010cf56347e0003be'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/512ad4c2e79ac33d9c0000cb'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/171bfddace1cb03c836e2f6054f1b9c8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/512ad4c2e79ac33d9c0000cb'>Lionel</a>
</div>
<a UTCms='1426599442000' class='quanto-date posted-at response-posted-at' href='#55082e1010cf56347e0003be'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>This is great , thank you for sharing this :)</p>

<p>Lionel.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='550ddb7d0dbdcc8e5b0004c1' id='550ddb7d0dbdcc8e5b0004c1'>
<a href='#550ddb7d0dbdcc8e5b0004c1'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/550d1b8f000862d5ac000157'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/a31bd5accd3432cbf5a8e3dc84a04928?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/550d1b8f000862d5ac000157'>Ambooj Mittal</a>
</div>
<a UTCms='1426971519000' class='quanto-date posted-at response-posted-at' href='#550ddb7d0dbdcc8e5b0004c1'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>this seems great  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5511d774ceaf6971ba00000d' id='5511d774ceaf6971ba00000d'>
<a href='#5511d774ceaf6971ba00000d'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/528a20ee6775eb140700017a'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f818bb6f388b1a8098fad10d7f32660f?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/528a20ee6775eb140700017a'>Deleted User</a>
</div>
<a UTCms='1427232632000' class='quanto-date posted-at response-posted-at' href='#5511d774ceaf6971ba00000d'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>There&#39;s little need to see an indicator implementation, the whole point of using external libraries is delegating implementation details to someone else, and ta-lib is well tested in that regard. Moreover by using a python implementation you&#39;re possibly not using acceleration on numpy or panda&#39;s side.</p>

<p>It is IMHO better to understand and indicator&#39;s rationale and proper usage by reading the author&#39;s note or some specific article about it than looking at the code.</p>

<p>Also those are just methods from the <a href="https://github.com/panpanpandas/ultrafinance/blob/master/ultrafinance/pyTaLib/pandasImpl.py">pandas implemented module of pyTaLib</a> with packages import rather than wildcards, I&#39;d put the author&#39;s name back in the body (due to copyright) and remove your name from it since the file is essentially unmodified.</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5511f819ceaf69b08000008a' id='5511f819ceaf69b08000008a'>
<a href='#5511f819ceaf69b08000008a'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51d125a71144e60865000044'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/b7dd86784deedc047d5ad0fb30378bdd?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51d125a71144e60865000044'>Peter Bakker</a>
</div>
<a UTCms='1427240987000' class='quanto-date posted-at response-posted-at' href='#5511f819ceaf69b08000008a'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Your opinion granted. For me it actually helps to look at what happens and as I don&#39;t think I&#39;m unique so that&#39;s why I put the code up. </p>

<p>The author Bruno is mentioned so I don&#39;t think that&#39;s an issue </p>

<p>The code is changed here and there and I added a few functions but I omitted to record what I added. As in my humble opinion it&#39;s useful I&#39;ll keep the post live.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5511f8f23152551f96000276' id='5511f8f23152551f96000276'>
<a href='#5511f8f23152551f96000276'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51d125a71144e60865000044'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/b7dd86784deedc047d5ad0fb30378bdd?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51d125a71144e60865000044'>Peter Bakker</a>
</div>
<a UTCms='1427241204000' class='quanto-date posted-at response-posted-at' href='#5511f8f23152551f96000276'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>In addition to that. Above code has quite a few indicators that talib does not have so only for that reason it&#39;s useful to have it around.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='55123014247e405ed3000172' id='55123014247e405ed3000172'>
<a href='#55123014247e405ed3000172'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51e4d1c306cab48193000006'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/d4b55852454c34c05c0d55b91c8575b1?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51e4d1c306cab48193000006'>Robby F</a>
</div>
<a UTCms='1427255322000' class='quanto-date posted-at response-posted-at' href='#55123014247e405ed3000172'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>This is sick.  I have spent way too much time trying to python talib functions for custom oscillators.  Thanks.</p>

<p>edit:  What is the good/standard way to build a dataframe with high/low/open/close/volume?  I typically have/use individual history dataframes for each but I would like to know how to use the code as it is in the original post.</p>

<p>Thanks again  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='55392a6bcd57249d88000039' id='55392a6bcd57249d88000039'>
<a href='#55392a6bcd57249d88000039'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/553802179dac51d8e6000239'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/409a3be6af196fecbaf1329aef6b50c2?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/553802179dac51d8e6000239'>Tarik Fehmi</a>
</div>
<a UTCms='1429809774000' class='quanto-date posted-at response-posted-at' href='#55392a6bcd57249d88000039'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thank you!  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='55393e4ac0640065d700013d' id='55393e4ac0640065d700013d'>
<a href='#55393e4ac0640065d700013d'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/54f717ee66aea6239f000274'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/0c2b51aac4540dbc179f7583f7a231ea?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/54f717ee66aea6239f000274'>Ethan Adair</a>
</div>
<a UTCms='1429814861000' class='quanto-date posted-at response-posted-at' href='#55393e4ac0640065d700013d'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Robby, here is some code from one of my algos I use to build an OHLC dataframe.. It works but I don&#39;t like the method. If anyone has a more streamlined approach I would be grateful to see it.<br>
EDIT: you may want to modify it, I made it in such a way that it appends securities in the same data columns, this was useful for the way I was using the securities data</p>

<pre><code>#Define Window  
    trail = 200  
    #store OHLCV data  
    open_hist = history(trail,&#39;1d&#39;,&#39;open_price&#39;,ffill=False)  
    close_hist = history(trail,&#39;1d&#39;,&#39;close_price&#39;,ffill=False)  
    high_hist = history(trail,&#39;1d&#39;,&#39;high&#39;,ffill=False)  
    low_hist = history(trail,&#39;1d&#39;,&#39;low&#39;,ffill=False)  
    volume_hist = history(trail,&#39;1d&#39;,&#39;volume&#39;,ffill=False)  
    opencol = []  
    closecol = []  
    highcol = []  
    lowcol = []  
    volumecol = []  
    #trinsmit OHLCV to continuous numpy arrays  
    for sec in context.secs:  
        opencol = np.concatenate((opencol, open_hist[sec][:]))  
        closecol = np.concatenate((closecol, close_hist[sec][:]))  
        highcol = np.concatenate((highcol, high_hist[sec][:]))  
        lowcol = np.concatenate((lowcol, low_hist[sec][:]))  
        volumecol = np.concatenate((volumecol, volume_hist[sec][:]))  
    print(&quot;putting in pandas&quot;)  
    #Combine arrays into dataframe  
    df = pd.DataFrame({&#39;O&#39;: opencol,  
                      &#39;H&#39;: highcol,  
                      &#39;L&#39;: lowcol,  
                      &#39;C&#39;: closecol,  
                      &#39;V&#39;: volumecol})  
</code></pre>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='557f7e9afb1efcb0b7000178' id='557f7e9afb1efcb0b7000178'>
<a href='#557f7e9afb1efcb0b7000178'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/556e3b41eb6190d82b00000a'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/0ab42beec85b8f56e5833c0372c044b9?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/556e3b41eb6190d82b00000a'>Keith F</a>
</div>
<a UTCms='1434418845000' class='quanto-date posted-at response-posted-at' href='#557f7e9afb1efcb0b7000178'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thank you for this expansive list of indicators. This is really great.</p>

<p>However, I am having a hard time linking up the indicators with my algo order logic. For example, when I reference S1 for a pivot point under def handle_data, I get the following error: NameError: global name &#39;S1&#39; is not defined</p>

<p>I start my code with the following, which I thought would define S1:</p>

<pre><code>import numpy  
import pandas as pd  
import math as m

def initialize(context):  
    set_universe(universe.DollarVolumeUniverse(floor_percentile=99.9, ceiling_percentile=100))

def PPSR(df):  
    PP = pd.Series((df[&#39;High&#39;] + df[&#39;Low&#39;] + df[&#39;Close&#39;]) / 3)  
    R1 = pd.Series(2 * PP - df[&#39;Low&#39;])  
    S1 = pd.Series(2 * PP - df[&#39;High&#39;])  
    R2 = pd.Series(PP + df[&#39;High&#39;] - df[&#39;Low&#39;])  
    S2 = pd.Series(PP - df[&#39;High&#39;] + df[&#39;Low&#39;])  
    R3 = pd.Series(df[&#39;High&#39;] + 2 * (PP - df[&#39;Low&#39;]))  
    S3 = pd.Series(df[&#39;Low&#39;] - 2 * (df[&#39;High&#39;] - PP))  
    psr = {&#39;PP&#39;:PP, &#39;R1&#39;:R1, &#39;S1&#39;:S1, &#39;R2&#39;:R2, &#39;S2&#39;:S2, &#39;R3&#39;:R3, &#39;S3&#39;:S3}  
    PSR = pd.DataFrame(psr)  
    df = df.join(PSR)  
    return df

</code></pre>

<p>Can someone please tell me what I&#39;m missing? I&#39;m new to coding so I wouldn&#39;t be shocked if it was something very simple. Thanks very much.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='557f8f04fb1efcb0b70001d7' id='557f8f04fb1efcb0b70001d7'>
<a href='#557f8f04fb1efcb0b70001d7'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51d125a71144e60865000044'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/b7dd86784deedc047d5ad0fb30378bdd?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51d125a71144e60865000044'>Peter Bakker</a>
</div>
<a UTCms='1434423047000' class='quanto-date posted-at response-posted-at' href='#557f8f04fb1efcb0b70001d7'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>can you share the rest of the code so I can look into it? you can share with me personally through collaborate ( peter.bakker AT alumni.insead.edu ) if you dont want to throw your code in the open  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='55a9f8753c57682e6a0002e8' id='55a9f8753c57682e6a0002e8'>
<a href='#55a9f8753c57682e6a0002e8'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/518df7ef1ee7cde87a000020'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/45d953d993231950278d0f1e380d9b2f?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/518df7ef1ee7cde87a000020'>Femto Trader</a>
</div>
<a UTCms='1437202552000' class='quanto-date posted-at response-posted-at' href='#55a9f8753c57682e6a0002e8'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi,</p>

<p>I&#39;m working on this Python Pandas implementation of technical indicators.<br>
I&#39;ve made a standalone project (with a pip package) for this.<br>
It&#39;s available at <a href="https://github.com/femtotrader/pandas_talib">https://github.com/femtotrader/pandas_talib</a><br>
Feel free to help. This is still is &quot;work in progress&quot; state.<br>
I&#39;ve add some unit tests and I&#39;m facing some errors</p>

<pre><code>    ERROR: tests.test_pandas_talib.test_indicator_ATR  
    ----------------------------------------------------------------------  
    Traceback (most recent call last):  
      File &quot;//anaconda/lib/python3.4/site-packages/nose/case.py&quot;, line 198, in runTest  
        self.test(*self.arg)  
      File &quot;/Users/femto/pandas_talib/tests/test_pandas_talib.py&quot;, line 45, in test_indicator_ATR  
        result = ATR(df, n)  
      File &quot;/Users/femto/pandas_talib/pandas_talib/__init__.py&quot;, line 75, in ATR  
        while i &lt; df.index[-1]:  
    TypeError: unorderable types: int() &lt; datetime.datetime()  
</code></pre>

<p>I think that&#39;s because I&#39;m using index as datetime (and not int)</p>

<p>Kind regards  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='55aa1fc9d1205377d600036e' id='55aa1fc9d1205377d600036e'>
<a href='#55aa1fc9d1205377d600036e'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/55aa1b714974ccc5f5000438'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/636e37b8c9773ac0a564909788e8f846?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/55aa1b714974ccc5f5000438'>Ahmed Kassem</a>
</div>
<a UTCms='1437212620000' class='quanto-date posted-at response-posted-at' href='#55aa1fc9d1205377d600036e'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Dears,</p>

<p>Can anyone nominate a good trading Algo for me? I need to buy a good one with monthly ROI 10%</p>

<p>Thank you  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='55aa278b3c57681d0a00035b' id='55aa278b3c57681d0a00035b'>
<a href='#55aa278b3c57681d0a00035b'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/518df7ef1ee7cde87a000020'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/45d953d993231950278d0f1e380d9b2f?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/518df7ef1ee7cde87a000020'>Femto Trader</a>
</div>
<a UTCms='1437214606000' class='quanto-date posted-at response-posted-at' href='#55aa278b3c57681d0a00035b'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Ahmed,</p>

<p>sorry your question is out of topic here. Maybe you should try to make you own post.</p>

<p>About Pandas implementation of technical indicators.</p>

<p>I think</p>

<pre><code> while i &lt; df.index[-1]:  
</code></pre>

<p>should be replaced by</p>

<pre><code> while i &lt; len(df) -1:  
</code></pre>

<p>I also noticed some errors (KeyError: 1) with:</p>

<pre><code>df.get_value(..., ...)  
</code></pre>

<p>maybe</p>

<pre><code>.iloc[...]
</code></pre>

<p>should be used instead  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='55aa30303c57681d0a000383' id='55aa30303c57681d0a000383'>
<a href='#55aa30303c57681d0a000383'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/554695a91206d6826a000126'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/88c2459a8c19a403e42b92acae2efb43?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/554695a91206d6826a000126'>JOHN CHAN</a>
</div>
<a UTCms='1437216820000' class='quanto-date posted-at response-posted-at' href='#55aa30303c57681d0a000383'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Peter... maybe you can provide.. a sample... a working backtest for these... on how it is implemented.... ;)  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='55aa8d4fb5509084810005f2' id='55aa8d4fb5509084810005f2'>
<a href='#55aa8d4fb5509084810005f2'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/518df7ef1ee7cde87a000020'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/45d953d993231950278d0f1e380d9b2f?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/518df7ef1ee7cde87a000020'>Femto Trader</a>
</div>
<a UTCms='1437240658000' class='quanto-date posted-at response-posted-at' href='#55aa8d4fb5509084810005f2'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I also noticed that ROC Pandas implementation doesn&#39;t return same values that TA-Lib&#39;s one</p>

<pre><code>x and y nan location mismatch:  
 x: array([            nan,             nan,  -1.6632517e-02,  -1.7376779e-03,  
        -8.6422326e-04,  -6.5179861e-03,  -1.9357306e-02,  -1.4724111e-03,  
         2.5237212e-02,   4.0374865e-02,   1.4385414e-02,  -2.9944823e-02,...  
 y: array([            nan,             nan,             nan,  -2.3665359e+00,  
         4.5841804e-01,  -1.3623165e+00,  -1.3147031e+00,  -1.4223587e+00,  
         1.8396280e+00,   4.5821285e+00,   3.4569644e+00,  -1.0468660e+00,...

</code></pre>

<p><a href="https://github.com/femtotrader/pandas_talib/issues/7">https://github.com/femtotrader/pandas_talib/issues/7</a>  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5667443c71571572bf0000bd' id='5667443c71571572bf0000bd'>
<a href='#5667443c71571572bf0000bd'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/54243dfc57be4d6fa200008b'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/203f1d26ecc1561ec908a3e3a17c707b?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/54243dfc57be4d6fa200008b'>tom yitav</a>
</div>
<a UTCms='1449608257000' class='quanto-date posted-at response-posted-at' href='#5667443c71571572bf0000bd'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi guys, I created a repository of technical indicators on github. The library works similarly to the famous ta-lib library, and contains some indicators that I wanted to use in my strategies and are not included in ta-lib. Enjoy, and even better-  contribute!<br>
<a href="https://github.com/tomyitav/talib-extensions">talibextensions</a></p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5667ddaf08d47195730000b3' id='5667ddaf08d47195730000b3'>
<a href='#5667ddaf08d47195730000b3'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/528a20ee6775eb140700017a'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f818bb6f388b1a8098fad10d7f32660f?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/528a20ee6775eb140700017a'>Deleted User</a>
</div>
<a UTCms='1449647538000' class='quanto-date posted-at response-posted-at' href='#5667ddaf08d47195730000b3'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>That seems nice, but this thread was aimed at having python indicators without the use ot TAlib, your package is the opposite of that concept since it relies on it.</p>

<p>That apart I suggest to add a little info in the README; at the <em>very least</em> add docstrings in the functions, people should know the functions&#39; purpose without having to read the code (and even then sometimes it&#39;s not obvious).</p>

<p>The package hierarchy and code look quite strange for a python package, they got &quot;java-ish&quot; feeling. Lose the semicolons and the src/ folder.<br>
I&#39;d also switch from package to a module, since you&#39;re already using the single file approach.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='569f058538e60bfc0f00026e' id='569f058538e60bfc0f00026e'>
<a href='#569f058538e60bfc0f00026e'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/569f00e93ab8fd0b2a00026b'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/edac5fa7fed0f6986b26f1bd13d30cfa?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/569f00e93ab8fd0b2a00026b'>Ching Jason</a>
</div>
<a UTCms='1453262218000' class='quanto-date posted-at response-posted-at' href='#569f058538e60bfc0f00026e'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Guys, newbie here.<br>
I am using the function code by Peter to anlayze a stock. Unfortunately being new to python, I have issue using the functions in my code as it did not run properly.  </p>

<pre><code>import numpy  
import pandas as pd

#Moving Average  
def MA(df, n):  
    MA = pd.Series(pd.rolling_mean(df[&#39;Close&#39;], n), name = &#39;MA_&#39; + str(n))  
    df = df.join(MA)  
    return df

#MACD, MACD Signal and MACD difference  
def MACD(df, n_fast, n_slow):  
    EMAfast = pd.Series(pd.ewma(df[&#39;Close&#39;], span = n_fast, min_periods = n_slow - 1))  
    EMAslow = pd.Series(pd.ewma(df[&#39;Close&#39;], span = n_slow, min_periods = n_slow - 1))  
    MACD = pd.Series(EMAfast - EMAslow, name = &#39;MACD_&#39; + str(n_fast) + &#39;_&#39; + str(n_slow))  
    MACDsign = pd.Series(pd.ewma(MACD, span = 9, min_periods = 8), name = &#39;MACDsign_&#39; + str(n_fast) + &#39;_&#39; + str(n_slow))  
    MACDdiff = pd.Series(MACD - MACDsign, name = &#39;MACDdiff_&#39; + str(n_fast) + &#39;_&#39; + str(n_slow))  
    df = df.join(MACD)  
    df = df.join(MACDsign)  
    df = df.join(MACDdiff)  
    return df


data = pd.read_csv(&quot;NAIM.csv&quot;, index_col=&#39;Stock&#39;, usecols =[0,6])

print data.head(3)  
vol = data[&#39;Close&#39;]  
print vol  
print MA(data,5)  
print MACD(data,12,26)  
</code></pre>

<p>But the MA result was not correct and MACD has <strong>ValueError: negative dimensions are not allowed</strong>.<br>
The csv file is as below:</p>

<p>Stock,Date,Time,Open,High,Low,Close,Volume<br>
NAIM,2015-01-02,00:00:00,2.9,3.0,2.9,3.0,46900<br>
NAIM,2015-01-05,00:00:00,2.95,3.05,2.92,3.05,225900<br>
NAIM,2015-01-06,00:00:00,2.95,2.96,2.9,2.9,682000<br>
NAIM,2015-01-07,00:00:00,2.88,2.95,2.88,2.9,160900<br>
          .<br>
          .<br>
          .<br>
NAIM,2016-01-06,00:00:00,2.48,2.61,2.47,2.6,3260900<br>
NAIM,2016-01-07,00:00:00,2.64,2.74,2.6,2.65,3906100<br>
NAIM,2016-01-08,00:00:00,2.65,2.71,2.62,2.64,1875000<br>
NAIM,2016-01-11,00:00:00,2.65,2.7,2.65,2.68,1089400<br>
NAIM,2016-01-12,00:00:00,2.68,2.71,2.65,2.69,965200<br>
NAIM,2016-01-13,00:00:00,2.69,2.74,2.69,2.73,2091500<br>
NAIM,2016-01-14,00:00:00,2.71,2.71,2.66,2.66,1206000<br>
NAIM,2016-01-15,00:00:00,2.66,2.67,2.62,2.62,738600  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='569fb96e249edde6db000113' id='569fb96e249edde6db000113'>
<a href='#569fb96e249edde6db000113'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/54243dfc57be4d6fa200008b'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/203f1d26ecc1561ec908a3e3a17c707b?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/54243dfc57be4d6fa200008b'>tom yitav</a>
</div>
<a UTCms='1453308274000' class='quanto-date posted-at response-posted-at' href='#569fb96e249edde6db000113'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Ching, As Andrea wrote in an earlier the post, I suggest that instead of using the code in the script, use <a href="https://github.com/mrjbq7/ta-lib">ta-lib library for technical analysis</a>. (installation guide included in the link). Most of the famous and widely used indicators are implemented and the library&#39;s api is very friendly. If there&#39;s an indicator that you want to use and is not included in ta-lib, only then should you bother to implement it yourself. I shared a <a href="https://github.com/tomyitav/talib-extensions">github repository link</a> for implementing more indicators and you are invited to contribute :)</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56a0eae14b5192143000009b' id='56a0eae14b5192143000009b'>
<a href='#56a0eae14b5192143000009b'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/569f00e93ab8fd0b2a00026b'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/edac5fa7fed0f6986b26f1bd13d30cfa?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/569f00e93ab8fd0b2a00026b'>Ching Jason</a>
</div>
<a UTCms='1453386470000' class='quanto-date posted-at response-posted-at' href='#56a0eae14b5192143000009b'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Tom,<br>
I try to install ta-lib(same link that you provided) but fail to do so on my windows Python2.7. I extract the zip file at the site-packages folder, but unable to import the ta-lib library (ImportError: No module named talib)<br>
So using function code from Peter is my second choice since ta-lib was not working for me.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56a0fd5b8f77f4bcb400029e' id='56a0fd5b8f77f4bcb400029e'>
<a href='#56a0fd5b8f77f4bcb400029e'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/54243dfc57be4d6fa200008b'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/203f1d26ecc1561ec908a3e3a17c707b?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/54243dfc57be4d6fa200008b'>tom yitav</a>
</div>
<a UTCms='1453391201000' class='quanto-date posted-at response-posted-at' href='#56a0fd5b8f77f4bcb400029e'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Try to install ta-lib from the binaries <a href="http://www.lfd.uci.edu/%7Egohlke/pythonlibs/#ta-lib">here</a> (one of the cp27 should do - as you are using python2.7)</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56a62d756c8034c16b00041a' id='56a62d756c8034c16b00041a'>
<a href='#56a62d756c8034c16b00041a'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/569f00e93ab8fd0b2a00026b'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/edac5fa7fed0f6986b26f1bd13d30cfa?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/569f00e93ab8fd0b2a00026b'>Ching Jason</a>
</div>
<a UTCms='1453731194000' class='quanto-date posted-at response-posted-at' href='#56a62d756c8034c16b00041a'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@tom<br>
Thanks. I did manage to install with anaconda.<br>
However, I am unable to use with my above script as I encounter an error when I apply talib.MA(data,12)<br>
TypeError: Argument &#39;real&#39; has incorrect type (expected numpy.ndarray, got Series)<br>
any idea?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56a63d597cff341cb80002fc' id='56a63d597cff341cb80002fc'>
<a href='#56a63d597cff341cb80002fc'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4fe8beb792a029000200000d'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/fe3ffe502559d05f16eb9fe41ab7e9a1?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4fe8beb792a029000200000d'>Dan Dunn</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1453735262000' class='quanto-date posted-at response-posted-at' href='#56a63d597cff341cb80002fc'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>For help with Zipline, the open-source backtest engine that powers Quantopian, you should post in the <a href="https://groups.google.com/forum/#!forum/zipline">Zipline Google group</a>.  That community has deep Zipline expereience.  This community is generally more for financial or algorithmic topics related to Quantopian.</p>
</div>
<div class='disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='56b618fb1efdb31f58000060' id='56b618fb1efdb31f58000060'>
<a href='#56b618fb1efdb31f58000060'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/54897ca8ddb347a114000349'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/6d1a14b71d7ab72bf4e64cbfaa7f6cc1?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/54897ca8ddb347a114000349'>Deleted User</a>
</div>
<a UTCms='1454774531000' class='quanto-date posted-at response-posted-at' href='#56b618fb1efdb31f58000060'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@tom The problem with ta-lib is it depends on the C ta-lib. A pure Python TA library would be great.</p>

<p>Speaking of which, @peter do you plan on making this into a proper Python library and putting it up on github?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56b65430be1c248817000223' id='56b65430be1c248817000223'>
<a href='#56b65430be1c248817000223'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/518df7ef1ee7cde87a000020'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/45d953d993231950278d0f1e380d9b2f?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/518df7ef1ee7cde87a000020'>Femto Trader</a>
</div>
<a UTCms='1454789684000' class='quanto-date posted-at response-posted-at' href='#56b65430be1c248817000223'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>For pure Python TA lib implementation library you might have a look at <a href="https://github.com/femtotrader/pandas_talib">https://github.com/femtotrader/pandas_talib</a><br>
This is base on Bruno Franca / Peter Bakker code<br>
You might also have a look at <a href="https://github.com/davidastephens/pandas-finance/issues/1">https://github.com/davidastephens/pandas-finance/issues/1</a> and <a href="https://github.com/bpsmith/tia">https://github.com/bpsmith/tia</a>  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56b6cf3dbe1c242ea1000065' id='56b6cf3dbe1c242ea1000065'>
<a href='#56b6cf3dbe1c242ea1000065'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/54897ca8ddb347a114000349'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/6d1a14b71d7ab72bf4e64cbfaa7f6cc1?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/54897ca8ddb347a114000349'>Deleted User</a>
</div>
<a UTCms='1454821186000' class='quanto-date posted-at response-posted-at' href='#56b6cf3dbe1c242ea1000065'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thanks!  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='57710df9820839a138000622' id='57710df9820839a138000622'>
<a href='#57710df9820839a138000622'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56e6c4e91e34e3de7c00077f'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/dae8040ac1bc878129b76d0ac2662e08?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56e6c4e91e34e3de7c00077f'>Jean-Baptiste Lepetit</a>
</div>
<a UTCms='1467026944000' class='quanto-date posted-at response-posted-at' href='#57710df9820839a138000622'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi<br>
in :<br>
EMA = pd.Series(pd.ewma(df[&#39;Close&#39;], span = n, min_periods = n - 1), name = &#39;EMA_&#39; + str(n))<br>
I don&#39;t understand why min_periods=n-1.<br>
Not that it makes any difference at all, but shouldn&#39;t it be min_periods = n ?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='589a1ce74abea755e026658e' id='589a1ce74abea755e026658e'>
<a href='#589a1ce74abea755e026658e'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5834016d26af0d00120008cf'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/d1ed54ae33a3bee0d78dc1fc800160c5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5834016d26af0d00120008cf'>JP S</a>
</div>
<a UTCms='1486494951000' class='quanto-date posted-at response-posted-at' href='#589a1ce74abea755e026658e'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I am looking for a python code for the indicator McGinley Dynamic.  Kindly share.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58e36f2102c6323f3e021b76' id='58e36f2102c6323f3e021b76'>
<a href='#58e36f2102c6323f3e021b76'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/58e36e311271216849fd7b77'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/6269f1787767407af51169a3815b46ec?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/58e36e311271216849fd7b77'>Kiann</a>
</div>
<a UTCms='1491300129000' class='quanto-date posted-at response-posted-at' href='#58e36f2102c6323f3e021b76'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thanks Peter. Great code, for newbies like me to learn!</p>

<p>I tried implementing your code. However, I get the following error : TypeError: list indices must be integers, not str    EMA = pd.Series(pd.ewma(df[&#39;Close&#39;], span = n, min_periods = n - 1), name = &#39;EMA_&#39; + str(n))</p>

<p>I enter the data via Excel which feeds into Python xlwings.</p>

<p>Any idea what&#39;s going on?</p>

<p>@xw.func<br>
def EMA(df, n):<br>
    EMA = pd.Series(pd.ewma(df[&#39;Close&#39;], span = n, min_periods = n - 1), name = &#39;EMA_&#39; + str(n))<br>
    df = df.join(EMA)<br>
    return df   </p>

<p>Kind regards  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='59dd7bbae9527c1ccdd89713' id='59dd7bbae9527c1ccdd89713'>
<a href='#59dd7bbae9527c1ccdd89713'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/59289bf8ace3842c1890b8cf'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/18f299d91fb306949d09658cd58d31f0?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/59289bf8ace3842c1890b8cf'>Taylor Jorgensen</a>
</div>
<a UTCms='1507687354000' class='quanto-date posted-at response-posted-at' href='#59dd7bbae9527c1ccdd89713'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>*****I am on the quantopian algo page, not the notebook. I don&#39;t understand the notebook for the life of me.</p>

<p>I have been using talib for indicators but I cannot figure out what the input is for the ADOSC - the Chaikin Oscillator. My question can be answered one of two ways with the first preferable.</p>

<p>1) What goes into the ADOSC arguments/parameters for the function to work? I get the error &quot;function requires four arguments (2 given)&quot; with the below code. No idea if these are even close to the correct inputs.</p>

<p>import talib as ta</p>

<p>price_history_hlc_20 = data.history(context.security, [&#39;high&#39;, &#39;low&#39;, &#39;close&#39;], 30, &#39;1d&#39;)<br>
volume_history_20 = data.history(context.security, &#39;volume&#39;, 20, &#39;1d&#39;)</p>

<p>adosc = ta.ADOSC(price_history_hlc_20, volume_history_20, fastperiod = 3, slowperiod = 10)</p>

<p>2) How do I use the indicator if I decide to use the code from this post that puts it into its own def? The way I developed my algo, I am doing all the calculations/defining indicators in the same def that I run the logic to trade.</p>

<h1>Chaikin Oscillator</h1>

<p>def Chaikin(df):<br>
    ad = (2 * df[&#39;Close&#39;] - df[&#39;High&#39;] - df[&#39;Low&#39;]) / (df[&#39;High&#39;] - df[&#39;Low&#39;]) * df[&#39;Volume&#39;]<br>
    Chaikin = pd.Series(pd.ewma(ad, span = 3, min_periods = 2) - pd.ewma(ad, span = 10, min_periods = 9), name = &#39;Chaikin&#39;)<br>
    df = df.join(Chaikin)<br>
    return df</p>

<p>def rebalance(context, data):</p>

<p>adosc = Chaikan? haha  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='59de18dee9527c1ccdd8a606' id='59de18dee9527c1ccdd8a606'>
<a href='#59de18dee9527c1ccdd8a606'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/54e159f70f3369eb9200019b'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/2a53f34ae7e99886508adf2b4d76bff2?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/54e159f70f3369eb9200019b'>Vladimir</a>
<span class='badge medal'></span>
</div>
<a UTCms='1507727582000' class='quanto-date posted-at response-posted-at' href='#59de18dee9527c1ccdd8a606'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Taylor,</p>

<p>Try this:</p>

<pre><code>import talib

def initialize(context):  
    schedule_function(trade, date_rules.every_day(), time_rules.market_close())  
def trade(context, data):  
    stock, ma_f, ma_s = symbol(&#39;SPY&#39;), 3, 10  
    H = data.history(stock, &#39;high&#39;, ma_s, &#39;1d&#39;)  
    L = data.history(stock, &#39;low&#39;, ma_s, &#39;1d&#39;)  
    C = data.history(stock, &#39;close&#39;, ma_s, &#39;1d&#39;)  
    V = data.history(stock, &#39;volume&#39;, ma_s, &#39;1d&#39;)  
    Chaikin_Osc_talib = talib.ADOSC(H,L,C,V,ma_f,ma_s)[-1]

    record(Chaikin_Osc = Chaikin_Osc_talib)  
</code></pre>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='59de297ff248cf1b0e244381' id='59de297ff248cf1b0e244381'>
<a href='#59de297ff248cf1b0e244381'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/59289bf8ace3842c1890b8cf'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/18f299d91fb306949d09658cd58d31f0?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/59289bf8ace3842c1890b8cf'>Taylor Jorgensen</a>
</div>
<a UTCms='1507731839000' class='quanto-date posted-at response-posted-at' href='#59de297ff248cf1b0e244381'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Vlad, </p>

<p>Thank you so much for the quick reply! I tried to keep the same formatting I have for the rest of the algo so I didn&#39;t quite write it like that but you definitely helped me solve it. I used the below code. I must say though, it&#39;s disappointing how much variation there is between the one here and the one on stockcharts.com. I presume the stockcharts one is the most accurate. =/ (btw, I know I can do the &#39;[-1]&#39; on the end of the thing but I like to do it separately to keep the logic separated out =)</p>

<p>price_history_hlcv_20 = data.history(context.security, [&#39;high&#39;, &#39;low&#39;, &#39;close&#39;, &#39;volume&#39;], 20, &#39;1d&#39;)</p>

<p>adosc = ta.ADOSC(price_history_hlcv_20[&#39;high&#39;], price_history_hlcv_20[&#39;low&#39;], price_history_hlcv_20[&#39;close&#39;], price_history_hlcv_20[&#39;volume&#39;], fastperiod = 3, slowperiod = 10)  </p>

<pre><code>adosc = adosc[-1]  
</code></pre>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='59de6a51a0fc550010112d26' id='59de6a51a0fc550010112d26'>
<a href='#59de6a51a0fc550010112d26'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/59289bf8ace3842c1890b8cf'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/18f299d91fb306949d09658cd58d31f0?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/59289bf8ace3842c1890b8cf'>Taylor Jorgensen</a>
</div>
<a UTCms='1507748433000' class='quanto-date posted-at response-posted-at' href='#59de6a51a0fc550010112d26'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Vlad,</p>

<p>Do you know what the input is for ADX? It requests 3 arguments. I gave it high, low, close, and its very similar to how it looks on stockcharts but some of the numbers are much higher/lower, more off than the adosc above was.</p>

<p>price_history_hlc_20 = data.history(context.security, [&#39;high&#39;, &#39;low&#39;, &#39;close&#39;], 20, &#39;1d&#39;)</p>

<p>adx = ta.ADX(price_history_hlc_20[&#39;high&#39;], price_history_hlc_20[&#39;low&#39;], price_history_hlc_20[&#39;close&#39;], timeperiod = 14)  </p>

<pre><code>adx = adx[-1]
</code></pre>

<p>Same thing for Aroon Oscillator. It&#39;s similar but not taking the same shape. Any ideas on that one?</p>

<p>aroonosc = ta.AROONOSC(price_history_hlc_20[&#39;high&#39;], price_history_hlc_20[&#39;low&#39;], timeperiod = 14)  </p>

<pre><code>aroonosc = aroonosc[-1]  
</code></pre>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='59deadecf817ea0010c94559' id='59deadecf817ea0010c94559'>
<a href='#59deadecf817ea0010c94559'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/54e159f70f3369eb9200019b'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/2a53f34ae7e99886508adf2b4d76bff2?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/54e159f70f3369eb9200019b'>Vladimir</a>
<span class='badge medal'></span>
</div>
<a UTCms='1507765740000' class='quanto-date posted-at response-posted-at' href='#59deadecf817ea0010c94559'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><pre><code># ADX talib indicator

import talib

def initialize(context):  
    schedule_function(trade, date_rules.every_day(), time_rules.market_close())  
def trade(context, data):  
    stock, period = symbol(&#39;SPY&#39;), 10  
    bars = period*2  
    H = data.history(stock, &#39;high&#39;, bars, &#39;1d&#39;)  
    L = data.history(stock, &#39;low&#39;, bars, &#39;1d&#39;)  
    C = data.history(stock, &#39;close&#39;, bars, &#39;1d&#39;)  
    ADX = talib.ADX(H,L,C,period)  
    record(ADX = ADX[-1])  
</code></pre>

<pre><code># AROON_OSC talib indicator

import talib

def initialize(context):  
    schedule_function(trade, date_rules.every_day(), time_rules.market_close())  
def trade(context, data):  
    stock, period = symbol(&#39;SPY&#39;), 10  
    bars = period + 1  
    H = data.history(stock, &#39;high&#39;, bars, &#39;1d&#39;)  
    L = data.history(stock, &#39;low&#39;, bars, &#39;1d&#39;)  
    AROON_OSC = talib.AROONOSC(H,L,period)  
    record(AROON_OSC = AROON_OSC[-1])  
</code></pre>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='59df7d75fb6434000d03ce25' id='59df7d75fb6434000d03ce25'>
<a href='#59df7d75fb6434000d03ce25'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/59289bf8ace3842c1890b8cf'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/18f299d91fb306949d09658cd58d31f0?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/59289bf8ace3842c1890b8cf'>Taylor Jorgensen</a>
</div>
<a UTCms='1507818869000' class='quanto-date posted-at response-posted-at' href='#59df7d75fb6434000d03ce25'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Yeah I set them up that way but they are off compared to stockcharts. Lame. Thanks for the reply!  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='59df8c5324e8a40c7d0a4506' id='59df8c5324e8a40c7d0a4506'>
<a href='#59df8c5324e8a40c7d0a4506'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/59289bf8ace3842c1890b8cf'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/18f299d91fb306949d09658cd58d31f0?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/59289bf8ace3842c1890b8cf'>Taylor Jorgensen</a>
</div>
<a UTCms='1507822675000' class='quanto-date posted-at response-posted-at' href='#59df8c5324e8a40c7d0a4506'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Last one Vlad. xD What do you input for the STOCHRSI ta lib indicator?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='59dfeb505006aa000dbdfa2f' id='59dfeb505006aa000dbdfa2f'>
<a href='#59dfeb505006aa000dbdfa2f'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/54e159f70f3369eb9200019b'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/2a53f34ae7e99886508adf2b4d76bff2?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/54e159f70f3369eb9200019b'>Vladimir</a>
<span class='badge medal'></span>
</div>
<a UTCms='1507846992000' class='quanto-date posted-at response-posted-at' href='#59dfeb505006aa000dbdfa2f'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Try this:</p>

<pre><code>    stoch_rsi = talib.STOCHRSI(C,period,fk,fd,fdma )[1][-1]

    # where fdma --&gt; fast D moving average type = 0 --&gt; SMA  
</code></pre>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='59e02917ae92d5372643862a' id='59e02917ae92d5372643862a'>
<a href='#59e02917ae92d5372643862a'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/59289bf8ace3842c1890b8cf'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/18f299d91fb306949d09658cd58d31f0?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/59289bf8ace3842c1890b8cf'>Taylor Jorgensen</a>
</div>
<a UTCms='1507862807000' class='quanto-date posted-at response-posted-at' href='#59e02917ae92d5372643862a'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Worked great! Thanks bro! What does the [1][-1] on the end mean?! I know [-1] gets you the last value  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a34614eb07b930010bc7945' id='5a34614eb07b930010bc7945'>
<a href='#5a34614eb07b930010bc7945'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/58bf3c67d4de1e2f6ba9c1ab'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/9db0356e97ee3c7ae767fc39c9d67605?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/58bf3c67d4de1e2f6ba9c1ab'>Mustafa Tambawalla</a>
</div>
<a UTCms='1513382222000' class='quanto-date posted-at response-posted-at' href='#5a34614eb07b930010bc7945'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>thank you for this  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a449e2669c2d36608edf9dc' id='5a449e2669c2d36608edf9dc'>
<a href='#5a449e2669c2d36608edf9dc'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5a44957a3b5f472c42a166d4'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/08eebed480efb0abcccdc35ebc1b0444?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5a44957a3b5f472c42a166d4'>Alex Brunt</a>
</div>
<a UTCms='1514446374000' class='quanto-date posted-at response-posted-at' href='#5a449e2669c2d36608edf9dc'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Stochastic Oscillator formula is wrong. Here is correct code.  </p>

<pre><code># Stochastic Oscillator, EMA smoothing, nS = slowing (1 if no slowing)  
def STO(df,  nK, nD, nS=1):  
    SOk = pd.Series((df[&#39;Close&#39;] - df[&#39;Low&#39;].rolling(nK).min()) / (df[&#39;High&#39;].rolling(nK).max() - df[&#39;Low&#39;].rolling(nK).min()), name = &#39;SO%k&#39;+str(nK))  
    SOd = pd.Series(SOk.ewm(ignore_na=False, span=nD, min_periods=nD-1, adjust=True).mean(), name = &#39;SO%d&#39;+str(nD))  
    SOk = SOk.ewm(ignore_na=False, span=nS, min_periods=nS-1, adjust=True).mean()  
    SOd = SOd.ewm(ignore_na=False, span=nS, min_periods=nS-1, adjust=True).mean()  
    df = df.join(SOk)  
    df = df.join(SOd)  
    return df  
# Stochastic Oscillator, SMA smoothing, nS = slowing (1 if no slowing)  
def STO(df, nK, nD,  nS=1):  
    SOk = pd.Series((df[&#39;Close&#39;] - df[&#39;Low&#39;].rolling(nK).min()) / (df[&#39;High&#39;].rolling(nK).max() - df[&#39;Low&#39;].rolling(nK).min()), name = &#39;SO%k&#39;+str(nK))  
    SOd = pd.Series(SOk.rolling(window=nD, center=False).mean(), name = &#39;SO%d&#39;+str(nD))  
    SOk = SOk.rolling(window=nS, center=False).mean()  
    SOd = SOd.rolling(window=nS, center=False).mean()  
    df = df.join(SOk)  
    df = df.join(SOd)  
    return df  
</code></pre>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b07229f9fc18800433c709a' id='5b07229f9fc18800433c709a'>
<a href='#5b07229f9fc18800433c709a'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5acd4a0094c3600014647ca7'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/d1b633382a5dd1bd19864d1c3abfc178?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5acd4a0094c3600014647ca7'>Jorge Osorio</a>
</div>
<a UTCms='1527194271000' class='quanto-date posted-at response-posted-at' href='#5b07229f9fc18800433c709a'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Just one little thing...this code has been written a long time ago (from now). So maybe would be interesting to look for possible &quot;depracated&quot; warnings in different functions of pandas and update it! </p>

<p>Thanks for sharing  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b2b621112ceef41b2026720' id='5b2b621112ceef41b2026720'>
<a href='#5b2b621112ceef41b2026720'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5b2b5e52f0937936dd796fc0'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/2f3d521daf2fca0116987e9c8354ec55?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5b2b5e52f0937936dd796fc0'>Tommy D.</a>
</div>
<a UTCms='1529569809000' class='quanto-date posted-at response-posted-at' href='#5b2b621112ceef41b2026720'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Alex Brunt, according to <a href="http://www.forexabode.com/forex-school/technical-indicators/stochastic/full-stochastic/">this source</a>:</p>

<blockquote>
<p>The standard settings for the full version would look like &quot;14, 3, 3&quot;,<br>
which is nothing but the slow version of stochastic with the settings<br>
&quot;14,3&quot;. Change the parameter in middle to anything else, say 7, and<br>
you are smoothening out the main line by it&#39;s SMA of 7 periods and<br>
then taking out a 3 period SMA of that to have your trigger line.</p>
</blockquote>

<p>This suggests that D% should be the average of post-smoothed K% instead of pre-smoothed K%. Furthermore, I don&#39;t think D% needs to be smoothed again because it&#39;s already an EMA/SMA of an EMA/SMA. I&#39;ve also multiplied K% by 100 to get the more common chart number, removed default arguments, changed the argument names to be more intuitive coming from popular charting software, and renamed columns to simply D% and K%. My final code looks like this:</p>

<pre><code># Stochastic Oscillator (EMA method)  
def StochEMA(df, period, fast, slow=3):  
    K = pd.Series(((df[&#39;close&#39;]-df[&#39;low&#39;].rolling(period).min()) /  
        (df[&#39;high&#39;].rolling(period).max()-df[&#39;low&#39;].rolling(period).min()))*100, name=&#39;K%&#39;)  
    K = K.ewm(span=slow, min_periods=slow-1).mean()  
    D = pd.Series(K.ewm(span=fast, min_periods=fast-1).mean(), name = &#39;D%&#39;)  
    df = df.join(D)  
    df = df.join(K)  
    return df

# Stochastic Oscillator (SMA method)  
def StochSMA(df, period, fast, slow=3):  
    K = pd.Series(((df[&#39;close&#39;]-df[&#39;low&#39;].rolling(period).min()) /  
        (df[&#39;high&#39;].rolling(period).max()-df[&#39;low&#39;].rolling(period).min()))*100, name=&#39;K%&#39;)  
    K = K.rolling(window=slow).mean()  
    D = pd.Series(K.rolling(window=fast).mean(), name = &#39;D%&#39;)  
    df = df.join(D)  
    df = df.join(K)  
    return df  
</code></pre>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c1ee4811e2d1b0043f595d5' id='5c1ee4811e2d1b0043f595d5'>
<a href='#5c1ee4811e2d1b0043f595d5'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5475531dd65066c8be00b01a'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/afffb4be7a2411ce4f1413a47d2ae81d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5475531dd65066c8be00b01a'>Joe Catanzaro</a>
</div>
<a UTCms='1545528449000' class='quanto-date posted-at response-posted-at' href='#5c1ee4811e2d1b0043f595d5'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>This was great to come across! I am currently trying to run a python script in 64-bit Windows and installing TA-Lib on x64 doesn&#39;t work, so I needed a way to do my program&#39;s talib-dependent calculations without it. I created a Talib class for only the functions I need (EMA, ATR, RSI, and BBANDS).</p>

<p>Rather than change the input lines that were using the talib library, I modified the functions above to work exactly like running a talib line would. For example, the input for many of the talib functions are multiple arrays, not single dataframes; the &quot;n&quot;s used above are referred to as &quot;timeperiod&quot; in talib, etc. </p>

<p>I also noticed the RSI in the original post above is wrong. RSI only takes a Close as its input, not Highs or Lows (The RSI function above looks more like what you&#39;d need for an ADX calculation).</p>

<p>I tried to simplify the 4 functions below (some of the pandas functions used above, like pd.rolling_mean, are scheduled to be deprecated, so I swapped those out) and keep the logic more in line with what steps a user would see if they looked up how to calculate these indicators online. </p>

<p>Perhaps this code may be useful to someone trying to emulate the talib library more in line with how the library itself works, using the same input datatypes and returning the same output.</p>

<p>(I like to instantiate this with <strong>Talib = TalibClass()</strong> so I only have to capitalize the &quot;T&quot; in &quot;talib&quot; throughout my code to shift from using the talib library to using this custom class)</p>

<pre><code>class TalibClass():  
    #Exponential Moving Average  
    def EMA(self, array, timeperiod):  
        EMA = pd.Series(array).ewm(span = timeperiod, min_periods = timeperiod - 1).mean().rename(&#39;EMA_&#39; + str(timeperiod))  
        return EMA.values  
    #Average True Range  
    def ATR(self, highArray, lowArray, closeArray, timeperiod):  
        TRL = [highArray[0] - lowArray[0]]  
        ATRL = [np.nan]  
        i = 1  
        while i &lt; len(highArray):  
            TR = np.nanmax([(highArray[i] - lowArray[i]), abs(highArray[i] - closeArray[i]), abs(lowArray[i] - closeArray[i])])  
            TRL.append(TR)  
            if i &lt; timeperiod:  
                ATRL.append(np.nan)  
            elif i == timeperiod:  
                ATR = np.nanmean(TRL)  
                ATRL.append(ATR)  
            else:  
                ATR = ((ATRL[-1] * (timeperiod - 1)) + TR) / timeperiod  
                ATRL.append(ATR)  
            i += 1  
        return pd.Series(ATRL).values  
    #Relative Strength Index  
    def RSI(self, closeArray, timeperiod):  
        changeL = [np.nan]  
        avgGainL = [np.nan]  
        avgLossL = [np.nan]  
        RSIL = [np.nan]  
        i = 1  
        while i &lt; len(closeArray):  
            changeL.append(closeArray[i] - closeArray[i - 1])  
            if i &lt; timeperiod:  
                avgGainL.append(np.nan)  
                avgLossL.append(np.nan)  
                RSIL.append(np.nan)  
            elif i == timeperiod:  
                avgGainL.append(abs(np.nansum([x for x in changeL[-timeperiod:] if x &gt;= 0]) / timeperiod))  
                avgLossL.append(abs(np.nansum([x for x in changeL[-timeperiod:] if x &lt; 0]) / timeperiod))  
                RS = avgGainL[-1] / avgLossL[-1]  
                RSI = 100 - (100 / (1 + RS))  
                RSIL.append(RSI)  
            else:  
                if changeL[-1] &gt;= 0:  
                    currGain = changeL[-1]  
                    currLoss = 0  
                else:  
                    currGain = 0  
                    currLoss = abs(changeL[-1])  
                avgGain = (avgGainL[-1] * (timeperiod - 1) + currGain) / timeperiod  
                avgLoss = (avgLossL[-1] * (timeperiod - 1) + currLoss) / timeperiod  
                avgGainL.append(avgGain)  
                avgLossL.append(avgLoss)  
                RS = avgGain / avgLoss  
                RSI = 100 - (100 / (1 + RS))  
                RSIL.append(RSI)  
            i += 1  
        return pd.Series(RSIL).values

    #Bollinger Bands  
    def BBANDS(self, closeArray, timeperiod, nbdevup, nbdevdn):  
        middle = pd.Series(closeArray).rolling(window=timeperiod).mean().values  
        stdev = pd.Series(closeArray).rolling(window=timeperiod).std().values  
        upper = middle + (stdev * nbdevup)  
        lower = middle - (stdev * nbdevdn)  
        return upper, middle, lower  
</code></pre>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5edb8ce5d97abe003f592e2a' id='5edb8ce5d97abe003f592e2a'>
<a href='#5edb8ce5d97abe003f592e2a'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5edb89c978c4090044bf06df'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e404f1b02838d9642efa764f595b659b?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5edb89c978c4090044bf06df'>john stream</a>
</div>
<a UTCms='1591446757000' class='quanto-date posted-at response-posted-at' href='#5edb8ce5d97abe003f592e2a'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thank you for sharing this, it is appreciated.  This is exactly what I was searching for (and for the very same reasons that motivated you to share it in the first place).  It even prompted me to sign up to Quantopian, just so that I could pass on my thanks via this thread!  Anyway, thanks and good luck.  </p>
</div>
</div>
</div>

</div>
<div class='sign-in-please'>
Please <a href='/signin?return_to=/posts/technical-analysis-indicators-without-talib-code'>sign in</a> or
<a href='/users/sign_up?redirect_to=/posts/technical-analysis-indicators-without-talib-code'>join Quantopian</a> to
post a reply.
</div>
</div>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId: "550580758292093",
      status: false,
      cookie: true,
      xfbml: true
    });
  };
  
  (function(d, debug){
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) {return;}
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
    ref.parentNode.insertBefore(js, ref);
  }(document, /*debug*/ false));
  
  window.twttr = (function (d,s,id) {
    var t, js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return; js=d.createElement(s); js.id=id;
    js.src="//platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs);
    return window.twttr || (t = { _e: [], ready: function(f){ t._e.push(f) } });
  }(document, "script", "twitter-wjs"));
</script>
<script>
  $(document).ready(function () {
    quanto.instances.pm = new quanto.PostManager(false)
  });
</script>

<div class='login-footer'>
<div class='container'>
<div class='login-footer-text'>
Become an expert in quant finance through Quantopian's hands-on education.
</div>
<div class='login-footer-button'>
<button class='btn btn-v2 stroke join-modal-link mixpanel-button' data-event='anon join footer click posts' data-mixpanel='click'>
Join Now
</button>
</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='error-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'>Error</span>
</div>
<div class='modal-body body-content'>
<p>Sorry, something went wrong.  Try again or contact us by <a class='feedback-link'>sending feedback</a>.</p>
</div>
<div class='modal-footer'>
<button class='btn btn-v2 blue action-button' data-dismiss='modal' href='#'>Close</button>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='confirmation-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'></span>
</div>
<div class='modal-body body-content'></div>
<div class='modal-footer'>
<div class='pull-right'>
<button class='btn btn-v2 border' data-dismiss='modal'>Cancel</button>
<button class='btn btn-v2 blue action-button' data-dismiss='modal'></button>
</div>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='message-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'></span>
</div>
<div class='modal-body body-content'></div>
<div class='modal-footer'>
<button class='btn btn-v2 blue action-button' data-dismiss='modal' id='message-modal-close'>Close</button>
</div>

</div>
</div>
</div>

<div class='always-bootstrap3-modals'>
<div class='fade modal quanto-modal-v2' id='join-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header visible-small'>
<span class='title'>
Join Quantopian.  It's Free!
</span>
<div class='modal-x-out visible-xs'></div>
</div>
<div class='modal-body'>
<div class='flex-wrap'>
<div class='join-left-pane hidden-small'>
<div class='margin_30l'>
<div class='join-hero-text'>
Join Quantopian.  It's Free!
</div>
<div class='join-benefits'>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image code'></div>
</div>
<div class='join-text'>
Use our research platform, backtester, and dozens of clean data sets.
</div>
</div>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image learn'></div>
</div>
<div class='join-text'>
Learn with our hands-on education and community forums.
</div>
</div>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image win'></div>
</div>
<div class='join-text'>
Enter to win cash prizes in our contest.
</div>
</div>
</div>
<div class='hidden saved-reminder'>
Don't worry, all your work is already saved.
</div>
</div>
</div>
<div class='join-right-pane'>
<div class='hidden-small'>
<div class='button-pane'>
<a class="button btn-v2 user-form-btn" href="/signin">Already a Quantopian member?</a>
</div>
</div>
<div class='visible-small'>
<div class='already-member'>
<a href='/signin'>Already a Quantopian member?</a>
</div>
</div>
<form class="quanto-form-v2" id="new-user-modal-form" action="/users" accept-charset="UTF-8" data-remote="true" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><div class='error-message hidden'>
<div class='message'></div>
</div>
<div class='name-group'>
<div class='form-group inline-block'>
<label for="user_firstname">First Name</label>
<input class="form-control firstname" pattern=".*" required="required" autocomplete="off" autofocus="autofocus" type="text" name="user[firstname]" id="user_firstname" />
</div>
<div class='form-group inline-block'>
<label for="user_lastname">Last Name</label>
<input class="form-control" value="" pattern=".*" required="required" autocomplete="off" type="text" name="user[lastname]" id="user_lastname" />
</div>
</div>
<div class='form-group'>
<label for="user_email">Email</label>
<input class="form-control" value="" pattern=".*" required="required" autocomplete="off" type="email" name="user[email]" id="user_email" />
</div>
<div class='form-group'>
<label for="user_password">Password</label>
<input autocomplete="off" class="form-control" pattern=".*" required="required" type="password" name="user[password]" id="user_password" />
</div>
<div class='checkbox eula'>
<input id='eula-checkbox' type='checkbox'>
<div class='quanto-checkbox'></div>
<label for='eula-checkbox' id='checkbox-label'>I accept the <a href='/policies/terms' target='_blank'>Terms Of Use</a> and <a href='/policies/privacy' target='_blank'>Privacy Policy</a>.</label>
</div>
<div class='checkbox mailchimp-box'>
<input name="user[allow_marketing_emails]" type="hidden" value="0" /><input type="checkbox" value="1" name="user[allow_marketing_emails]" id="user_allow_marketing_emails" />
<div class='quanto-checkbox'></div>
<label for='user_allow_marketing_emails'>
Send me email updates with the latest news from the Quantopian community. We send these emails about once a month.
</label>
</div>
<div class='button-row'>
<button class='btn-v2 blue full' data-redirect-to='/tutorials/getting-started' id='sign-up-button' type='Submit'>Join Quantopian</button>
</div>
</form></div>
</div>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='feedback-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title'>Contact Support</span>
</div>
<div class='modal-body'>
<form class='anon-user controls quanto-form-v2' id='feedback-form'>
<div class='feedback-inputs'>
<div class='form-group'>
<input autofocus class='form-control' id='feedback-email-box' name='email' placeholder='Email Address' type='email'>
</div>
<div class='form-group'>
<input class='form-control' id='feedback-name-box' placeholder='Name' type='name'>
</div>
<div class='form-group'>
<textarea class='form-control' id='feedback-box' name='feedback' placeholder='What may we help you with?' rows='10'></textarea>
</div>
</div>
</form>
<form class='hidden quanto-form-v2 select-resource-area'>
<div class='select-step select-type-step'>
<div class='form-group'>
<select class='form-control select-resource-dropdown' title='Select the item you need help with'>
<option value='algorithm'>Algorithm</option>
<option value='backtest'>Backtest</option>
<option value='notebook'>Notebook</option>
</select>
</div>
</div>
<div class='select-step loading-area hidden'>
<div class='loading-text'>
Loading...
</div>
</div>
<div class='select-step empty-list-area hidden'>
<div class='back-button'>Go Back</div>
<div class='empty-text'>
No <span class='empty-list-resource-text'>algorithms</span> found
</div>
</div>
<div class='select-algo-area select-step hidden'>
<div class='back-button'>Go Back</div>
<table class='select-algo-table select-item-table'>
<thead>
<tr>
<th>
Algorithm
<span class='sort-icon'></span>
</th>
<th>
Last Modified
<span class='sort-icon'></span>
</th>
</tr>
</thead>
</table>
</div>
<div class='select-backtest-area select-step hidden'>
<div class='back-button'>Go Back</div>
<table class='select-backtest-table select-item-table'>
<thead>
<tr>
<th>
Backtest
<span class='sort-icon'></span>
</th>
<th>
Started At
<span class='sort-icon'></span>
</th>
<th>
Overall Return
<span class='sort-icon'></span>
</th>
<th>
Status
<span class='sort-icon'></span>
</th>
</tr>
</thead>
</table>
</div>
<div class='select-notebook-area select-step hidden'>
<div class='back-button'>Go Back</div>
<div class='subtitle select-cell-step'>
Choose a cell to use as the preview for this notebook:
</div>
<div class='iframe-wrapper'>
<iframe class='notebook-list-iframe slow-fade' src=''></iframe>
</div>
<div class='progress-area slow-fade in'>
<div class='progress-container'>
<div class='progress-title'>
<div class='quanto-loader gray'></div>
</div>
</div>
</div>
<div class='maintenance-area'>
<div class='error-container'>
<div class='row'>
<div class='col-md-14 msg-title h1'>
Sorry, research is currently undergoing maintenance.
</div>
</div>
<div class='row'>
<div class='col-md-14 msg-subtitle'>
Please check back shortly. If the maintenance period lasts longer than expected,
you can find updates on <a href='https://status.quantopian.com/'>status.quantopian.com</a>.
</div>
</div>

</div>
</div>
<div class='error-area'>
<div class='error-container'>
<div class='row'>
<div class='col-md-14 msg-title h1'>
Sorry, something went wrong on our end.
</div>
</div>
<div class='row'>
<div class='col-md-14 msg-subtitle'>
Please try again or contact <a class='open-feedback-link'>Quantopian support</a>.
</div>
</div>

</div>
</div>

</div>
<div class='selected-item-area select-step hidden'>
<div class='selected-item-group form-group'>
<div class='selected-item-control'>
<input class='disabled form-control selected-item-box' type='text'>
<span class='secure-icon icon'></span>
<button class='btn change change-primary-item-button change-selection-button new-btn transparent' type='button'>
<span class='refresh-icon icon'></span>
</button>
</div>
<div class='selected-backtest-control'>
<input class='disabled form-control selected-backtest-box' type='text'>
<span class='secure-icon icon'></span>
<button class='btn change-backtest-button change-selection-button new-btn transparent' type='button'>
<span class='refresh-icon icon'></span>
</button>
</div>
</div>
<div class='checkbox-group form-group'>
<div class='checkbox give-permission'>
<input class='give-permission-checkbox' id='feedback-give-permission-checkbox' type='checkbox'>
<div class='quanto-checkbox'></div>
<label for='feedback-give-permission-checkbox'>
I permit Quantopian to view <span class='item-type-text'>this algorithm,
backtest or notebook and their imported datasets</span> for the purpose of providing support.
</label>
</div>
</div>
</div>
</form>

<div class='loading-step hidden'>
<div class='loading-text'>
Submitting your support ticket...
</div>
</div>
<div class='success-step invisible'>
<h2 class='title center'>
You've successfully submitted a support ticket.
</h2>
<p>
Our support team will be in touch soon.
</p>
<div class='confirmation-image'></div>
</div>
</div>
<div class='modal-footer'>
<button class='btn-v2 blue' id='send-feedback-button'>Send</button>
<div class='error-message hidden'>
Error submitting support request.
</div>
</div>

</div>
</div>
</div>

</div>
</div>
<div class='footer' id='quanto-footer-container'>
<div class='container'>
<div class='row header-row'>
<div class='col-sm-fourth span3'>
<img class='async-image logotype-image' data-src='https://qf.quantopian.com/assets/logos/logo-q-full-b23bda5ac757691b9259d396d0dfef91567165868b8c955a836649686e6d2248.svg'>
</div>
<div class='col-sm-fourth span3'></div>
<div class='col-sm-fourth span3'></div>
<div class='col-sm-fourth span3'>
<div class='feedback-email'>
Need help?
<a href="/cdn-cgi/l/email-protection#ed8b8888898f8c8e86ad9c988c8399829d848c83c38e8280">Contact support.</a>
</div>
</div>
</div>
<div class='row'>
<div class='col-sm-fourth span3'>
<div class='header'>Company</div>
<div class='footer-row'>
<a href='/about'>About</a>
</div>
<div class='footer-row'>
<a href='/academia'>Academia</a>
</div>
<div class='footer-row'>
<a href='/jobs'>Careers</a>
</div>
<div class='footer-row'>
<a href='/posts'>Community</a>
</div>
<div class='footer-row'>
<a href='/events'>Events</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Learn &amp; Support</div>
<div class='footer-row'>
<a href='/faq'>FAQ</a>
</div>
<div class='footer-row'>
<a href='/tutorials/getting-started'>Getting Started</a>
</div>
<div class='footer-row'>
<a href='/docs'>Documentation</a>
</div>
<div class='footer-row'>
<a href='/tutorials'>Tutorials</a>
</div>
<div class='footer-row'>
<a href='/lectures'>Lectures</a>
</div>
<div class='footer-row'>
<a href='/opensource'>Open Source</a>
</div>
<div class='footer-row'>
<a href='https://status.quantopian.com/'>Site Status</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Notices</div>
<div class='footer-row'>
<a href='/policies/terms'>Terms of Use</a>
</div>
<div class='footer-row'>
<a href='/policies/privacy'>Privacy Policy</a>
</div>
<div class='footer-row'>
<a href='/security'>Security</a>
</div>
<div class='footer-row'>
<a href='/policies/code-of-conduct'>Code of Conduct</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Follow Us</div>
<div class='footer-row'>
<a href='https://www.twitter.com/quantopian'>Twitter</a>
</div>
<div class='footer-row'>
<a href='https://www.facebook.com/quantopian'>Facebook</a>
</div>
<div class='footer-row'>
<a href='https://www.linkedin.com/company/quantopian'>LinkedIn</a>
</div>
<div class='footer-row'>
<a href='https://www.youtube.com/channel/UC606MUq45P3zFLa4VGKbxsg'>YouTube</a>
</div>
</div>
</div>
<div class='row'>
<div class='col-xs-14 span12'>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian.
</p>
<p>
In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>

</div>
</div>
</div>
</div>
</div>
<div class='mobile-footer'>
<div class='mobile-nav-category main-links'>
<div class='mobile-nav-row-footer'>
<a href='/about'>About Quantopian</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/jobs'>Careers</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/posts'>Community</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/events'>Events</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/docs'>Documentation</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/academia'>Academia</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/lectures'>Lectures</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://status.quantopian.com/'>Status</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.facebook.com/quantopian'>Facebook</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.twitter.com/quantopian'>Twitter</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.linkedin.com/company/quantopian'>LinkedIn</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.youtube.com/channel/UC606MUq45P3zFLa4VGKbxsg'>YouTube</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/policies/terms'>Terms of Use</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/policies/privacy'>Privacy Policy</a>
</div>
</div>
<div class='mobile-nav-category'>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian.
</p>
<p>
In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>

</div>
</div>
</div>

</div>
<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script></body>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', "UA-8519877-1", {
    cookieDomain: "quantopian.com"
  });
  ga('set', 'dimension1', 'session_5f9dc7425d387f00077e48e4');
  
  ga('send', 'pageview');
</script>

<input type="hidden" name="is_mac" id="is_mac" value="false" />
<input type="hidden" name="mp" id="mp" value="75873953cd404bcc1da88a55ff51e3b4" />
<script>
  (function(e,a){if(!a.__SV){var b=window;try{var c,l,i,j=b.location,g=j.hash;c=function(a,b){return(l=a.match(RegExp(b+"=([^&]*)")))?l[1]:null};g&&c(g,"state")&&(i=JSON.parse(decodeURIComponent(c(g,"state"))),"mpeditor"===i.action&&(b.sessionStorage.setItem("_mpcehash",g),history.replaceState(i.desiredHash||"",e.title,j.pathname+j.search)))}catch(m){}var k,h;window.mixpanel=a;a._i=[];a.init=function(b,c,f){function e(b,a){var c=a.split(".");2==c.length&&(b=b[c[0]],a=c[1]);b[a]=function(){b.push([a].concat(Array.prototype.slice.call(arguments,
  0)))}}var d=a;"undefined"!==typeof f?d=a[f]=[]:f="mixpanel";d.people=d.people||[];d.toString=function(b){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);b||(a+=" (stub)");return a};d.people.toString=function(){return d.toString(1)+".people (stub)"};k="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
  for(h=0;h<k.length;h++)e(d,k[h]);a._i.push([b,c,f])};a.__SV=1.2;b=e.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";c=e.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}})(document,window.mixpanel||[]);
  mixpanel.init("75873953cd404bcc1da88a55ff51e3b4");
</script>
<script>
  mixpanel.track("view page", {"page": window.location.pathname});
</script>
</html>
