<!DOCTYPE html>
<html>
<head>
<link href='i1.wp.com' rel='dns-prefetch'>
<link href='i2.wp.com' rel='dns-prefetch'>
<link href='i3.wp.com' rel='dns-prefetch'>
<meta content='2HgX9mcLHaPOX6sfaaAkhWtblhEB9yUNw4l6l46e1k4' name='google-site-verification'>
<link rel="shortcut icon" type="image/x-icon" href="external/favicon-q-ac1a76f2c200e9026b5b1147519bb4fab6256910588b831e2411bc6c7c1218c3.png" />
<title>
Understanding Fetcher; Runtime exception: Key Error
</title>
<meta content='Hi,I&#39;m having trouble using the fetcher to import signals. I seem to getting this error every time i run this. Can someone please explain for this python newby?def initialize(context):      fetch_csv(&#39;https://www.dropbox.com/s/01dn5cmltljav7t/VixData.csv?dl=0&#39;, symbol=&#39;VIX&#39;, date_column = &#39;Date&#39;,                 date_format = &#39;%m/%d/%y&#39;)def handle_data(context, data):      current_VIX = data[&#39;VIX&#39;][&#39;Value&#39;]    # plot it      record(VIX=current_VIX)  Thank you!' name='description'>
<link rel="stylesheet" media="all" href="external/quanto-base-bundle-e8eb6050172aa0d24124d5c24bac90b2cccd88b5b9c7742026c0e9efab038c6e.css" />
<link rel="stylesheet" media="all" href="external/quanto-posts-bundle-aab01368d3f82d8dafc94ee9eabb82e77dc8c9fbbffa952fdcdc744dfa523cf3.css" />
<script src="external/quanto_global-057218867db29d5768131af5d6fb3476cef098e7d9e655108befb903c7ee985e.js"></script>
<script src="external/posts_bundle-3dfd82fa469c393d752e461d837aec9e4e364ae39f49198e34a6626f2180fdf7.js"></script>
<link href='external/logo-q-180x180-0f5a6a439c99203ed4aea6f656e7604c543d287be43d8b17c7591c1131f09a59.png' rel='apple-touch-icon'>
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="upymLA/hjHC3bno+EZqbVyVBX7G0QF8nwJyqS93AfK3G+tBhrRdekw5zIw9edTMjHc982M6MSjxCk3Ehd4UeFg==" />
<meta content='width=device-width, initial-scale=1.0' name='viewport'>
<script>
//<![CDATA[
window.quanto_data={};quanto_data.bounce_back_params={"show_modal":null,"feedback_text":null};quanto_data.namespace="public";quanto_data.talib_info={"ADOSC":["Chaikin A/D Oscillator (Volume Indicators)",["fastperiod","3"],["slowperiod","10"]],"ADX":["Average Directional Movement Index (Momentum Indicators)",["timeperiod","14"]],"ADXR":["Average Directional Movement Index Rating (Momentum Indicators)",["timeperiod","14"]],"APO":["Absolute Price Oscillator (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["matype","0"]],"AROON":["Aroon (Momentum Indicators)",["timeperiod","14"]],"AROONOSC":["Aroon Oscillator (Momentum Indicators)",["timeperiod","14"]],"ATR":["Average True Range (Volatility Indicators)",["timeperiod","14"]],"BBANDS":["Bollinger Bands (Overlap Studies)",["timeperiod","5"],["nbdevup","2"],["nbdevdn","2"],["matype","0"]],"BETA":["Beta (Statistic Functions)",["timeperiod","5"]],"CCI":["Commodity Channel Index (Momentum Indicators)",["timeperiod","14"]],"CMO":["Chande Momentum Oscillator (Momentum Indicators)",["timeperiod","14"]],"CORREL":["Pearson's Correlation Coefficient (r) (Statistic Functions)",["timeperiod","30"]],"DEMA":["Double Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"DX":["Average Directional Movement Index (Momentum Indicators)",["timeperiod","14"]],"EMA":["Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"KAMA":["Kaufman Adaptive Moving Average (Overlap Studies)",["timeperiod","30"]],"LINEARREG":["Linear Regression (Statistic Functions)",["timeperiod","14"]],"LINEARREG_ANGLE":["Linear Regression Angle (Statistic Functions)",["timeperiod","14"]],"LINEARREG_INTERCEPT":["Linear Regression Intercept (Statistic Functions)",["timeperiod","14"]],"LINEARREG_SLOPE":["Linear Regression Slope (Statistic Functions)",["timeperiod","14"]],"MA":["Moving average (Overlap Studies)",["timeperiod","30"],["matype","0"]],"MACD":["Moving Average Convergence/Divergence (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["signalperiod","9"]],"MACDEXT":["MACD with controllable MA type (Momentum Indicators)",["fastperiod","12"],["fastmatype","0"],["slowperiod","26"],["slowmatype","0"],["signalperiod","9"],["signalmatype","0"]],"MACDFIX":["Moving Average Convergence/Divergence Fix 12/26 (Momentum Indicators)",["signalperiod","9"]],"MAX":["Highest values over a specified period (Math Operators)",["timeperiod","30"]],"MAXINDEX":["Index of highest value over a specified period (Math Operators)",["timeperiod","30"]],"MFI":["Money Flow Index (Momentum Indicators)",["timeperiod","14"]],"MIDPOINT":["Midpoint over period (Overlap Studies)",["timeperiod","14"]],"MIDPRICE":["Midpoint Price over period (Overlap Studies)",["timeperiod","14"]],"MIN":["Lowest value over a specified period (Math Operators)",["timeperiod","30"]],"MININDEX":["Index of lowest value over a specified period (Math Operators)",["timeperiod","30"]],"MINMAX":["Lowest and highest values over a specified period (Math Operators)",["timeperiod","30"]],"MINMAXINDEX":["Indexes of lowest and highest values over a specified period (Math Operators)",["timeperiod","30"]],"MINUS_DI":["Minus Directional Indicator (Momentum Indicators)",["timeperiod","14"]],"MINUS_DM":["Minus Directional Movement (Momentum Indicators)",["timeperiod","14"]],"MOM":["Momentum (Momentum Indicators)",["timeperiod","10"]],"NATR":["Normalized Average True Range (Volatility Indicators)",["timeperiod","14"]],"PLUS_DI":["Plus Directional Indicator (Momentum Indicators)",["timeperiod","14"]],"PLUS_DM":["Plus Directional Movement (Momentum Indicators)",["timeperiod","14"]],"PPO":["Percentage Price Oscillator (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["matype","0"]],"ROC":["Rate of change: ((price/prevPrice)-1)*100 (Momentum Indicators)",["timeperiod","10"]],"ROCP":["Rate of change Percentage: (price-prevPrice)/prevPrice (Momentum Indicators)",["timeperiod","10"]],"ROCR":["Rate of change ratio: (price/prevPrice) (Momentum Indicators)",["timeperiod","10"]],"ROCR100":["Rate of change ratio 100 scale: (price/prevPrice)*100 (Momentum Indicators)",["timeperiod","10"]],"RSI":["Relative Strength Index (Momentum Indicators)",["timeperiod","14"]],"SMA":["Simple Moving Average (Overlap Studies)",["timeperiod","30"]],"STDDEV":["Standard Deviation (Statistic Functions)",["timeperiod","5"],["nbdev","1"]],"STOCH":["Stochastic (Momentum Indicators)",["fastk_period","5"],["slowk_period","3"],["slowk_matype","0"],["slowd_period","3"],["slowd_matype","0"]],"STOCHF":["Stochastic Fast (Momentum Indicators)",["fastk_period","5"],["fastd_period","3"],["fastd_matype","0"]],"STOCHRSI":["Stochastic Relative Strength Index (Momentum Indicators)",["timeperiod","14"],["fastk_period","5"],["fastd_period","3"],["fastd_matype","0"]],"T3":["Triple Exponential Moving Average (T3) (Overlap Studies)",["timeperiod","5"],["vfactor","0.7"]],"TEMA":["Triple Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"TRIMA":["Triangular Moving Average (Overlap Studies)",["timeperiod","30"]],"TRIX":["1-day Rate-Of-Change (ROC) of a Triple Smooth EMA (Momentum Indicators)",["timeperiod","30"]],"TSF":["Time Series Forecast (Statistic Functions)",["timeperiod","14"]],"ULTOSC":["Ultimate Oscillator (Momentum Indicators)",["timeperiod1","7"],["timeperiod2","14"],["timeperiod3","28"]],"VAR":["Variance (Statistic Functions)",["timeperiod","5"],["nbdev","1"]],"WILLR":["Williams' %R (Momentum Indicators)",["timeperiod","14"]],"WMA":["Weighted Moving Average (Overlap Studies)",["timeperiod","30"]]};quanto_data.nb_preview_url="https://notebooks-preview.prd.pub.quantopian.com";quanto_data.delay_nb_preview_load=false;
//]]>
</script>
<meta content='https://www.quantopian.com/posts/understanding-fetcher-runtime-exception-key-error' property='og:url'>
<meta content='Understanding Fetcher; Runtime exception: Key Error' property='og:title'>

<input type="hidden" name="env" id="quanto-env" value="production" />
<meta content='550580758292093' property='fb:app_id'>
<meta content='https://www.quantopian.com/posts/understanding-fetcher-runtime-exception-key-error' property='og:url'>
<meta content='https://media.quantopian.com/public/og-image-default.png' property='og:image'>
<meta content='Understanding Fetcher; Runtime exception: Key Error' property='og:title'>
<meta content='Hi,I&#39;m having trouble using the fetcher to import signals. I seem to getting this error every time i run this. Can someone please explain for this python newby?def initialize(context):      fetch_csv(&#39;https://www.dropbox.com/s/01dn5cmltljav7t/VixData.csv?dl=0&#39;, symbol=&#39;VIX&#39;, date_column = &#39;Date&#39;,                 date_format = &#39;%m/%d/%y&#39;)def handle_data(context, data):      current_VIX = data[&#39;VIX&#39;][&#39;Value&#39;]    # plot it      record(VIX=current_VIX)  Thank you!' property='og:description'>
</head>
<script type='application/ld+json'>
  {
    "@context": "http://schema.org",
    "@type": "Organization",
    "url": "https://www.quantopian.com",
    "logo": "https://media.quantopian.com/logos/logo-q-press-red.png"
  }
</script>
<body class='' ontouchstart=''>
<div id='fb-root'></div>
<div class='wrapper'>
<div class='alert-v2 error'>
<div class='message'>
Quantopian's community platform is shutting down. Please read <a href="/posts/quantopians-community-services-are-closing">this post</a> for more information and <a href='/account#account'>download your code</a>.
</div>
</div>
<div class='navbar navbar-default navbar-static-top' id='app-navbar'>
<div class='container-fluid'>
<div class='navbar-header'>
<button class='navbar-toggle collapsed' data-target='#app-navbar-collapse' data-toggle='collapse'>
<span class='icon hamburger-menu'></span>
</button>
<a class='navbar-brand' href='/home'>
<img class='logo-image async-image' data-src='external/logo-q-white-b141ea6018546e5a4ecc3d10d8440ec076fc4385764e948b322828cc70950a76.svg'>
</a>
</div>
<div class='collapse navbar-collapse' id='app-navbar-collapse'>
<ul class='nav navbar-nav navbar-right'>
<li class='dropdown quanto-dropdown-new'>
<li>
<a class='header' href='/docs'>
Documentation
</a>
</li>
<li class='dropdown quanto-dropdown-new'>
<a class='header' data-toggle='dropdown' href='#'>
Learn
</a>
<ul class='dropdown-menu'>
<li>
<a class='mixpanel-button' data-event='main nav getting started clicked' href='/tutorials/getting-started'>Getting Started</a>
</li>
<li>
<a class='mixpanel-button' data-event='main nav tutorials clicked' href='/tutorials'>Tutorials</a>
</li>
<li>
<a class='mixpanel-button' data-event='main nav lectures clicked' href='/lectures'>Lectures</a>
</li>
</ul>
</li>
<li>
<a class='header' href='/posts' id='forum-link'>
Forum
</a>
</li>
<li>
<a class="header" href="/signin?return_to=/posts/understanding-fetcher-runtime-exception-key-error">Log In</a>
</li>
</li>

</ul>
</div>
</div>
</div>
<script>
  $(document).ready(function () {
    quanto.instances.fm = new quanto.FeedbackManager();
    quanto.instances.hm = new quanto.headerManager();
  })
</script>


<div class='content content-area new-style'>
<input type="hidden" name="page-id" id="page-id" value="postatomic" />
<script src="external/MathJax.js?config=TeX-AMS_HTML-full.js,Safe" async="async"></script>
<div class='container page-container post-atomic'>
<input id='parent-post-id-val' type='hidden' value='54bab718c1f6b6e0ab000452'>
<div class='post-container' data-post-id='54bab718c1f6b6e0ab000452' id='54bab718c1f6b6e0ab000452'>
<div class='back-button back-to-community'>Back to Community</div>
<div class='post-title'>Understanding Fetcher; Runtime exception: Key Error</div>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/540e40ff84edcde3f5000005'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/7c66a4c190d6f9e12a201b570bc75815?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/540e40ff84edcde3f5000005'>sameer iqbal</a>
</div>
<span class='posted-at'>edited </span>
<span UTCms='1421523383000' class='quanto-date posted-at'></span>
<div class='pull-right other-actions'>
<div class='dropup inline-block'>
<div class='dropdown share-control other-action-link'>
<div data-toggle='dropdown'>
<div class='share-image'></div>
Share
</div>
<ul class='dropdown-menu share-options-menu'>
<li>
<a class='share-row' href='https://twitter.com/intent/tweet?text=Understanding Fetcher; Runtime exception: Key Error&amp;url=https%3A%2F%2Fwww.quantopian.com%2Fposts%2Funderstanding-fetcher-runtime-exception-key-error%3Futm_source%3Dwebsite_share%26utm_campaign%3Dunderstanding-fetcher-runtime-exception-key-error%26utm_medium%3Dtwitter&amp;via=quantopian'>
<i class='icon icon-twitter'></i>
Share on Twitter
</a>
</li>
<li>
<div class='share-row facebook-button'>
<i class='icon icon-facebook'></i>
Share on Facebook
</div>
</li>
<li>
<div class='share-row linkedin-button' data-share-url='https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Fwww.quantopian.com%2Fposts%2Funderstanding-fetcher-runtime-exception-key-error%3Futm_source%3Dwebsite_share%26utm_campaign%3Dunderstanding-fetcher-runtime-exception-key-error%26utm_medium%3Dlinkedin&amp;title=Understanding+Fetcher%3B+Runtime+exception%3A+Key+Error+%28sameer+iqbal%29&amp;source=Quantopian'>
<i class='icon icon-linkedin'></i>
Share on LinkedIn
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>

<input type="hidden" name="social_fb_post_link" id="social_fb_post_link" value="https://www.quantopian.com/posts/understanding-fetcher-runtime-exception-key-error?utm_source=website_share&amp;utm_campaign=understanding-fetcher-runtime-exception-key-error&amp;utm_medium=facebook" />
<input type="hidden" name="social_post_image" id="social_post_image" value="external/logo-q-red-outline.png" />
<input type="hidden" name="social_post_author" id="social_post_author" value="sameer iqbal" />
<div class='body-text'>
<div class='body-text-container post-body'><p>Hi,</p>

<p>I&#39;m having trouble using the fetcher to import signals. I seem to getting this error every time i run this. Can someone please explain for this python newby?</p>

<pre><code>def initialize(context):  
    fetch_csv(&#39;https://www.dropbox.com/s/01dn5cmltljav7t/VixData.csv?dl=0&#39;, symbol=&#39;VIX&#39;, date_column = &#39;Date&#39;,  
               date_format = &#39;%m/%d/%y&#39;)

def handle_data(context, data):  
    current_VIX = data[&#39;VIX&#39;][&#39;Value&#39;]

    # plot it  
    record(VIX=current_VIX)  
</code></pre>

<p>Thank you!  </p>
</div>
</div>
</div>

</div>

<div class='container page-container post-atomic'>
<div class='section-header reply-header'>
<div class='reply-title'>14 responses</div>
</div>
<div class='replies'>
<div class='post-container response-container' data-post-id='54bad56ec3d094165c00047d' id='54bad56ec3d094165c00047d'>
<a href='#54bad56ec3d094165c00047d'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/541b7a1bdb2aaa63d1000002'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/09844bd8ce4d5de30703f66828af2c85?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/541b7a1bdb2aaa63d1000002'>Param Sidhu</a>
</div>
<a UTCms='1421530481000' class='quanto-date posted-at response-posted-at' href='#54bad56ec3d094165c00047d'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I am having the exact same issue with Fetcher code that was working yesterday....so I wonder if its a problem with the backtester right now?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='54baf44205aa2377a900008d' id='54baf44205aa2377a900008d'>
<a href='#54baf44205aa2377a900008d'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/540e40ff84edcde3f5000005'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/7c66a4c190d6f9e12a201b570bc75815?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/540e40ff84edcde3f5000005'>sameer iqbal</a>
</div>
<a UTCms='1421538373000' class='quanto-date posted-at response-posted-at' href='#54baf44205aa2377a900008d'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Maybe? I made this yesterday and was never able to get it to work successfully...  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='54bbc800865d163c9e0002a4' id='54bbc800865d163c9e0002a4'>
<a href='#54bbc800865d163c9e0002a4'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51cbb24ab03fe0bc5500000e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/12b8399e99c8eab21b6bf2ac1d1da84a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51cbb24ab03fe0bc5500000e'>Seong Lee</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1421592579000' class='quanto-date posted-at response-posted-at' href='#54bbc800865d163c9e0002a4'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Sameer,</p>

<p>I think the problems that you and Param are experiencing may be unrelated. Param, feel free to post here with your problems and I can help you with that as well.</p>

<p>Sameer, what was happening in your algorithm was three fold:</p>

<p>1) The dropbox link you specified, unfortunately, didn&#39;t work with the backtester. Lately, Copy.com has been working well so I moved your CSV onto there.<br>
2) In this case, you don&#39;t want to be calling data[&#39;VIX&#39;] because your CSV already contains a ticker symbol, NFLX. The backtester will automatically map that ticker into DATA so all you&#39;d have to do here is call data[symbol(&#39;NFLX&#39;)][&#39;Value&#39;]<br>
3) Because Fetcher maps the values in your CSVs to data based on DATE, what you actually have to do is check whether or not DATA contains &#39;Value&#39;. And you can do that by a quick &#39;if &quot;Value&quot; in data[symbol(&quot;NFLX&quot;)]&quot;</p>

<p>Please see the attached code:</p>

<pre><code>def initialize(context):  
    #: Remove the symbol parameters and use copy.com  
    fetch_csv(&#39;https://copy.com/vgXLQLcQsLvUAj2q&#39;,  
              date_column = &#39;Date&#39;,  
              date_format = &#39;%m/%d/%y&#39;)  
    #: Get NFLX  
    context.stock = symbol(&#39;NFLX&#39;)

def handle_data(context, data):  
    #: Check if we have data  
    if &#39;Value&#39; in data[context.stock]:  
        #: Use NFLX to query for the data  
        current_VIX = data[context.stock][&#39;Value&#39;]

        # plot it  
        record(VIX=current_VIX)  
</code></pre>
</div>
<div class='disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='54bc13b5c8c6bdf7170003ff' id='54bc13b5c8c6bdf7170003ff'>
<a href='#54bc13b5c8c6bdf7170003ff'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/540e40ff84edcde3f5000005'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/7c66a4c190d6f9e12a201b570bc75815?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/540e40ff84edcde3f5000005'>sameer iqbal</a>
</div>
<a UTCms='1421611961000' class='quanto-date posted-at response-posted-at' href='#54bc13b5c8c6bdf7170003ff'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Aha! thank you for the explanation!  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='54bc3d040c6921ffaf0002b3' id='54bc3d040c6921ffaf0002b3'>
<a href='#54bc3d040c6921ffaf0002b3'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51d752130a3c8c2324000015'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/0e268c548d3f572b1b0b9ae6d320b9b8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51d752130a3c8c2324000015'>Saravanan Shanmugham</a>
</div>
<a UTCms='1421622535000' class='quanto-date posted-at response-posted-at' href='#54bc3d040c6921ffaf0002b3'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Can some one help with this fetcher problem i am having?<br>
I am doing 2 different fetches very similar in nature, Except for the name of the columns and format of the dates in the second table<br>
Yet, the first one works, while the second doesn&#39;t.<br>
Any ideas?</p>

<pre><code>
def fix_datecol(df):  
    # reformat date column into string format  
    df[&#39;TRADE_DATE&#39;] = df[&#39;TRADE_DATE&#39;].apply(lambda x: str(x))  
    log.info(&#39;\nfix_datecol %s &#39; % df.head())  
    return df

def fix_datecol1(df):  
    # reformat date column into string format  
    log.info(&#39;\nfix_datecol1 %s &#39; % df.head())  
    return df

def rename_col(df):  
    #rename cols to what handle_data expects  
    df = df.rename(columns={&#39;United States&#39;: &#39;price&#39;})  
#    df = df.rename(columns={&#39;CPI&#39;:&#39;price&#39;})  
    df = df.fillna(method=&#39;ffill&#39;)  
    df = df[[&#39;price&#39;, &#39;sid&#39;]]  
    log.info(&#39;\nrename_col %s &#39; % df.head())  
    return df

def rename_col1(df):  
    #rename cols to what handle_data expects  
    df = df.rename(columns={&#39;Value&#39;: &#39;price&#39;})  
    df = df.fillna(method=&#39;ffill&#39;)  
    df = df[[&#39;price&#39;, &#39;sid&#39;]]  
    log.info(&#39;\nrename_col1 %s &#39; % df.head())  
    return df


# Put any initialization logic here.  The context object will be passed to  
# the other methods in your algorithm.  
def initialize(context):  
    fetch_csv(     &#39;https://dl.dropboxusercontent.com/u/169032081/US_monthly_series_inflation_idx.csv&#39;,  
               symbol=&#39;Inflation_Index&#39;,  
               date_column = &#39;TRADE_DATE&#39;,  
               date_format = &#39;%Y%m%d&#39;,  
               pre_func=fix_datecol,  
               post_func=rename_col)  

    fetch_csv(&#39;https://www.quandl.com/api/v1/datasets/FRED/CPIAUCSL.csv&#39;,  
        symbol=&#39;Consumer_Price_Index&#39;,  
        date_column=&#39;Date&#39;,  
        date_format=&#39;%Y-%m-%d&#39;,  
        pre_func=fix_datecol1,  
        post_func=rename_col1)  
    context.stock = sid(8554)  
#    pass

# Will be called on every trade event for the securities you specify.  
def handle_data(context, data):  
    # Implement your algorithm logic here.

    # data[sid(X)] holds the trade event data for that security.  
    # context.portfolio holds the current portfolio state.

    # Place orders with the order(SID, amount) method.

    # TODO: implement your own logic here.  
#    print &quot;Inflation_Index=%s, USCPI=%s&quot;%(data[&#39;Inflation_Index&#39;][&#39;price&#39;],data[&#39;USCPI&#39;][&#39;price&#39;])  
    log.info(&#39;\n %s &#39; % data[&#39;Inflation_Index&#39;])  
    log.info(&#39;\n %s &#39; % data[&#39;Consumer_Price_Index&#39;])  
    log.info(&#39;\n %s &#39; % data[&#39;Inflation_Index&#39;][&#39;price&#39;])  
    log.info(&#39;\n %s &#39; % data[&#39;Consumer_Price_Index&#39;][&#39;price&#39;])

    record(Inflation_Index=data[&#39;Inflation_Index&#39;][&#39;price&#39;],  
           Infaltion_Index2=data[&#39;Consumer_Price_Index&#39;][&#39;price&#39;])  
    order(context.stock,10)

</code></pre>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='54c014b58bda2c0d8300049f' id='54c014b58bda2c0d8300049f'>
<a href='#54c014b58bda2c0d8300049f'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51d752130a3c8c2324000015'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/0e268c548d3f572b1b0b9ae6d320b9b8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51d752130a3c8c2324000015'>Saravanan Shanmugham</a>
</div>
<a UTCms='1421874361000' class='quanto-date posted-at response-posted-at' href='#54c014b58bda2c0d8300049f'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>any idea&#39;s on this?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='54c15f35d558a0f564000014' id='54c15f35d558a0f564000014'>
<a href='#54c15f35d558a0f564000014'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5258725aa09fa7ebaa000024'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/7734b86e32e834268bee6749eb322fb4?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5258725aa09fa7ebaa000024'>David Edwards</a>
</div>
<a UTCms='1421958976000' class='quanto-date posted-at response-posted-at' href='#54c15f35d558a0f564000014'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>The code below works for me, sometimes there are errors at the beginning of the test because dates do not line up correctly. If the data is monthly, there might be a gap at the beginning so you have to do some checking for this sort of thing. Hope this helps!</p>

<p>David  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='54c34227f11c8299300001d0' id='54c34227f11c8299300001d0'>
<a href='#54c34227f11c8299300001d0'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51d752130a3c8c2324000015'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/0e268c548d3f572b1b0b9ae6d320b9b8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51d752130a3c8c2324000015'>Saravanan Shanmugham</a>
</div>
<a UTCms='1422082604000' class='quanto-date posted-at response-posted-at' href='#54c34227f11c8299300001d0'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>couple of things.<br>
  1. the actual download has data from 1947, yet when copied the code over the code the data in the graph starts from 2008.<br>
  2. The code I had should have worked from what examples from quantopian i have seen. yet it doesn&#39;t. Not sure why<br>
  3. I am not sure how to debug this, or how you got it working, even if partially. I presume df.Date.apply() code applies the pd.Timestamp() to read the date format(%Y-%M-%D) in the data more reliably. Whats the purpose of the sort and index operation though? And more importantly how do you debug fetch_csv and the pandas data from that you get</p>

<p>Sarvi  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='54c52b493a71a8a5bd00028a' id='54c52b493a71a8a5bd00028a'>
<a href='#54c52b493a71a8a5bd00028a'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51d752130a3c8c2324000015'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/0e268c548d3f572b1b0b9ae6d320b9b8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51d752130a3c8c2324000015'>Saravanan Shanmugham</a>
</div>
<a UTCms='1422207821000' class='quanto-date posted-at response-posted-at' href='#54c52b493a71a8a5bd00028a'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Is this a bug in fetch_csv(). In which case is there a consistent workaround?</p>

<p>I am still not able to get the CPI data from quandl consistently.<br>
The data when manually pulled seems very simple and and I wouldn&#39;t have expected anything more than renaming columns and establishing the data format as %Y/%M/%D to be needed.</p>

<p>Yet it doesn&#39;t work.</p>

<p>I have raised this question in the community as well as pinged quantopian support through the chat link.<br>
No one seems to have a clear answer</p>

<p>Sarvi  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='54c57bbb3a71a8a5bd000405' id='54c57bbb3a71a8a5bd000405'>
<a href='#54c57bbb3a71a8a5bd000405'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5258725aa09fa7ebaa000024'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/7734b86e32e834268bee6749eb322fb4?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5258725aa09fa7ebaa000024'>David Edwards</a>
</div>
<a UTCms='1422228415000' class='quanto-date posted-at response-posted-at' href='#54c57bbb3a71a8a5bd000405'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hey Sarvi, sorry you&#39;re still having issues. I left out the date format and used df.Date.apply(lambda dt: pd.Timestamp(dt, tz=&#39;utc&#39;))) because pandas date parsing works really well. I also wanted actual timestamps with a &#39;utc&#39; time zone. The sort and indexing was just to make the dataframe format more compatible with other pandas time series, e.g. ascending order by timestamp.</p>

<p>I looked at the files you are downloading and the CPI does go back prior to Quantopian&#39;s earliest data, but the inflation index series starts in 2008, that would be why it wasn&#39;t working until then. The code I shared is working for me, you have to make sure to check if the values exist, sometimes an error is thrown at the beginning of the test if you don&#39;t do this.</p>

<p>Try the code below, using try/except with fetcher might alleviate some stress.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='54c5def42aec065b2d0000c4' id='54c5def42aec065b2d0000c4'>
<a href='#54c5def42aec065b2d0000c4'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51d752130a3c8c2324000015'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/0e268c548d3f572b1b0b9ae6d320b9b8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51d752130a3c8c2324000015'>Saravanan Shanmugham</a>
</div>
<a UTCms='1422253814000' class='quanto-date posted-at response-posted-at' href='#54c5def42aec065b2d0000c4'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thanks David,<br>
I guess your earlier version worked as well, I kept wondering how come CPI only started at 2008.<br>
because it was not being shown on the plot.</p>

<p>Just now realized that the code in handle_data was not recoding it if inflation was not available.<br>
And since it wasn&#39;t shown i presumed there was something wrong with the data being pulled itself.<br>
Should looked harder.</p>

<p>This should get me going.</p>

<p>Question: I think I understand what you are trying to do here?<br>
But what about the CPI data that requires these Date/apply, and utc timestamp and sorting and stuff.<br>
The documentation suggests something simpler, and that simple stuff worked for Inflation it looks like.<br>
But didn&#39;t work for CPI.</p>

<p>Just trying to what to look for or how to trouble shoot this sort of problem in the future.</p>

<p>On another note, is there list or collection or thread where people are collecting such data sources and code segments that are known to work with those data sources.<br>
That would be very useful to people in the future.<br>
If there isn&#39;t I will start one to document this for future users. </p>

<p>Thanks,<br>
Sarvi  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='54c5eefc2aec065b2d0000ea' id='54c5eefc2aec065b2d0000ea'>
<a href='#54c5eefc2aec065b2d0000ea'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51d752130a3c8c2324000015'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/0e268c548d3f572b1b0b9ae6d320b9b8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51d752130a3c8c2324000015'>Saravanan Shanmugham</a>
</div>
<a UTCms='1422257918000' class='quanto-date posted-at response-posted-at' href='#54c5eefc2aec065b2d0000ea'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I added a print statement to the except code and I noticed that it is getting exercised for CPI data which is available for decades earlier than the backtest begin.<br>
I also notice the data missing in the plot as well, for a month at backtest start.</p>

<p>Yet, I am seeing the exception for for a whole month at the beginning of the test.</p>

<p>Why is that? Does the fetch_csv() command I am using need further tuning?</p>

<p>Sarvi  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='54c6e78f45f309420700007a' id='54c6e78f45f309420700007a'>
<a href='#54c6e78f45f309420700007a'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5258725aa09fa7ebaa000024'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/7734b86e32e834268bee6749eb322fb4?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5258725aa09fa7ebaa000024'>David Edwards</a>
</div>
<a UTCms='1422321556000' class='quanto-date posted-at response-posted-at' href='#54c6e78f45f309420700007a'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>The NaN values at the beginning are because the CPI timeseries is monthly and it gets chopped off at the backtest start date, so there are some values that get lost. The only thing I can think of would be to turn it into a daily frequency timeseries and forward fill the values. You have to be carful reindexing like this, but I took a stab at it and believe this works, there&#39;s probably a cleaner way to get it done though.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='54c6f567589adcc9fd000135' id='54c6f567589adcc9fd000135'>
<a href='#54c6f567589adcc9fd000135'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51d752130a3c8c2324000015'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/0e268c548d3f572b1b0b9ae6d320b9b8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51d752130a3c8c2324000015'>Saravanan Shanmugham</a>
</div>
<a UTCms='1422325099000' class='quanto-date posted-at response-posted-at' href='#54c6f567589adcc9fd000135'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thanks for looking into this and it works great.</p>

<p>Correct me if I am wrong, I am thinking the following<br>
  1. The basic documented API should have worked for this simple dataset including data. And I am beginning to conclude this is a quantopian bug that needs fixing. The API shown in the quantopian documention seems more than sufficient to handle this data and my original code should have worked.<br>
  2.  The quantopian documentation suggests df = df.fillna(method=&#39;ffill&#39;) to deal with turning monthly/yearly data to daily/minute barfs, thats if I understand this API correctly, which means that the data from the month before the backtest begin/quantopian data begin should have forward filled correctly. I did try the fillna() API a couple of different places in reformat_quandl() and non of them worked. That leads me to believe that this is another bug that needs fixing</p>

<p>Did I understand the API intent correctly or am I wrong in assuming these are bugs?<br>
This has certainly fixed the problem for me, but understanding this better will help figure things out by myself in the future.</p>

<p>Thanks,<br>
Sarvi  </p>
</div>
</div>
</div>

</div>
<div class='sign-in-please'>
Please <a href='/signin?return_to=/posts/understanding-fetcher-runtime-exception-key-error'>sign in</a> or
<a href='/users/sign_up?redirect_to=/posts/understanding-fetcher-runtime-exception-key-error'>join Quantopian</a> to
post a reply.
</div>
</div>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId: "550580758292093",
      status: false,
      cookie: true,
      xfbml: true
    });
  };
  
  (function(d, debug){
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) {return;}
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
    ref.parentNode.insertBefore(js, ref);
  }(document, /*debug*/ false));
  
  window.twttr = (function (d,s,id) {
    var t, js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return; js=d.createElement(s); js.id=id;
    js.src="//platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs);
    return window.twttr || (t = { _e: [], ready: function(f){ t._e.push(f) } });
  }(document, "script", "twitter-wjs"));
</script>
<script>
  $(document).ready(function () {
    quanto.instances.pm = new quanto.PostManager(false)
  });
</script>

<div class='login-footer'>
<div class='container'>
<div class='login-footer-text'>
Become an expert in quant finance through Quantopian's hands-on education.
</div>
<div class='login-footer-button'>
<button class='btn btn-v2 stroke join-modal-link mixpanel-button' data-event='anon join footer click posts' data-mixpanel='click'>
Join Now
</button>
</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='error-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'>Error</span>
</div>
<div class='modal-body body-content'>
<p>Sorry, something went wrong.  Try again or contact us by <a class='feedback-link'>sending feedback</a>.</p>
</div>
<div class='modal-footer'>
<button class='btn btn-v2 blue action-button' data-dismiss='modal' href='#'>Close</button>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='confirmation-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'></span>
</div>
<div class='modal-body body-content'></div>
<div class='modal-footer'>
<div class='pull-right'>
<button class='btn btn-v2 border' data-dismiss='modal'>Cancel</button>
<button class='btn btn-v2 blue action-button' data-dismiss='modal'></button>
</div>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='message-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'></span>
</div>
<div class='modal-body body-content'></div>
<div class='modal-footer'>
<button class='btn btn-v2 blue action-button' data-dismiss='modal' id='message-modal-close'>Close</button>
</div>

</div>
</div>
</div>

<div class='always-bootstrap3-modals'>
<div class='fade modal quanto-modal-v2' id='join-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header visible-small'>
<span class='title'>
Join Quantopian.  It's Free!
</span>
<div class='modal-x-out visible-xs'></div>
</div>
<div class='modal-body'>
<div class='flex-wrap'>
<div class='join-left-pane hidden-small'>
<div class='margin_30l'>
<div class='join-hero-text'>
Join Quantopian.  It's Free!
</div>
<div class='join-benefits'>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image code'></div>
</div>
<div class='join-text'>
Use our research platform, backtester, and dozens of clean data sets.
</div>
</div>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image learn'></div>
</div>
<div class='join-text'>
Learn with our hands-on education and community forums.
</div>
</div>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image win'></div>
</div>
<div class='join-text'>
Enter to win cash prizes in our contest.
</div>
</div>
</div>
<div class='hidden saved-reminder'>
Don't worry, all your work is already saved.
</div>
</div>
</div>
<div class='join-right-pane'>
<div class='hidden-small'>
<div class='button-pane'>
<a class="button btn-v2 user-form-btn" href="/signin">Already a Quantopian member?</a>
</div>
</div>
<div class='visible-small'>
<div class='already-member'>
<a href='/signin'>Already a Quantopian member?</a>
</div>
</div>
<form class="quanto-form-v2" id="new-user-modal-form" action="/users" accept-charset="UTF-8" data-remote="true" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><div class='error-message hidden'>
<div class='message'></div>
</div>
<div class='name-group'>
<div class='form-group inline-block'>
<label for="user_firstname">First Name</label>
<input class="form-control firstname" pattern=".*" required="required" autocomplete="off" autofocus="autofocus" type="text" name="user[firstname]" id="user_firstname" />
</div>
<div class='form-group inline-block'>
<label for="user_lastname">Last Name</label>
<input class="form-control" value="" pattern=".*" required="required" autocomplete="off" type="text" name="user[lastname]" id="user_lastname" />
</div>
</div>
<div class='form-group'>
<label for="user_email">Email</label>
<input class="form-control" value="" pattern=".*" required="required" autocomplete="off" type="email" name="user[email]" id="user_email" />
</div>
<div class='form-group'>
<label for="user_password">Password</label>
<input autocomplete="off" class="form-control" pattern=".*" required="required" type="password" name="user[password]" id="user_password" />
</div>
<div class='checkbox eula'>
<input id='eula-checkbox' type='checkbox'>
<div class='quanto-checkbox'></div>
<label for='eula-checkbox' id='checkbox-label'>I accept the <a href='/policies/terms' target='_blank'>Terms Of Use</a> and <a href='/policies/privacy' target='_blank'>Privacy Policy</a>.</label>
</div>
<div class='checkbox mailchimp-box'>
<input name="user[allow_marketing_emails]" type="hidden" value="0" /><input type="checkbox" value="1" name="user[allow_marketing_emails]" id="user_allow_marketing_emails" />
<div class='quanto-checkbox'></div>
<label for='user_allow_marketing_emails'>
Send me email updates with the latest news from the Quantopian community. We send these emails about once a month.
</label>
</div>
<div class='button-row'>
<button class='btn-v2 blue full' data-redirect-to='/tutorials/getting-started' id='sign-up-button' type='Submit'>Join Quantopian</button>
</div>
</form></div>
</div>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='feedback-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title'>Contact Support</span>
</div>
<div class='modal-body'>
<form class='anon-user controls quanto-form-v2' id='feedback-form'>
<div class='feedback-inputs'>
<div class='form-group'>
<input autofocus class='form-control' id='feedback-email-box' name='email' placeholder='Email Address' type='email'>
</div>
<div class='form-group'>
<input class='form-control' id='feedback-name-box' placeholder='Name' type='name'>
</div>
<div class='form-group'>
<textarea class='form-control' id='feedback-box' name='feedback' placeholder='What may we help you with?' rows='10'></textarea>
</div>
</div>
</form>
<form class='hidden quanto-form-v2 select-resource-area'>
<div class='select-step select-type-step'>
<div class='form-group'>
<select class='form-control select-resource-dropdown' title='Select the item you need help with'>
<option value='algorithm'>Algorithm</option>
<option value='backtest'>Backtest</option>
<option value='notebook'>Notebook</option>
</select>
</div>
</div>
<div class='select-step loading-area hidden'>
<div class='loading-text'>
Loading...
</div>
</div>
<div class='select-step empty-list-area hidden'>
<div class='back-button'>Go Back</div>
<div class='empty-text'>
No <span class='empty-list-resource-text'>algorithms</span> found
</div>
</div>
<div class='select-algo-area select-step hidden'>
<div class='back-button'>Go Back</div>
<table class='select-algo-table select-item-table'>
<thead>
<tr>
<th>
Algorithm
<span class='sort-icon'></span>
</th>
<th>
Last Modified
<span class='sort-icon'></span>
</th>
</tr>
</thead>
</table>
</div>
<div class='select-backtest-area select-step hidden'>
<div class='back-button'>Go Back</div>
<table class='select-backtest-table select-item-table'>
<thead>
<tr>
<th>
Backtest
<span class='sort-icon'></span>
</th>
<th>
Started At
<span class='sort-icon'></span>
</th>
<th>
Overall Return
<span class='sort-icon'></span>
</th>
<th>
Status
<span class='sort-icon'></span>
</th>
</tr>
</thead>
</table>
</div>
<div class='select-notebook-area select-step hidden'>
<div class='back-button'>Go Back</div>
<div class='subtitle select-cell-step'>
Choose a cell to use as the preview for this notebook:
</div>
<div class='iframe-wrapper'>
<iframe class='notebook-list-iframe slow-fade' src=''></iframe>
</div>
<div class='progress-area slow-fade in'>
<div class='progress-container'>
<div class='progress-title'>
<div class='quanto-loader gray'></div>
</div>
</div>
</div>
<div class='maintenance-area'>
<div class='error-container'>
<div class='row'>
<div class='col-md-14 msg-title h1'>
Sorry, research is currently undergoing maintenance.
</div>
</div>
<div class='row'>
<div class='col-md-14 msg-subtitle'>
Please check back shortly. If the maintenance period lasts longer than expected,
you can find updates on <a href='https://status.quantopian.com/'>status.quantopian.com</a>.
</div>
</div>

</div>
</div>
<div class='error-area'>
<div class='error-container'>
<div class='row'>
<div class='col-md-14 msg-title h1'>
Sorry, something went wrong on our end.
</div>
</div>
<div class='row'>
<div class='col-md-14 msg-subtitle'>
Please try again or contact <a class='open-feedback-link'>Quantopian support</a>.
</div>
</div>

</div>
</div>

</div>
<div class='selected-item-area select-step hidden'>
<div class='selected-item-group form-group'>
<div class='selected-item-control'>
<input class='disabled form-control selected-item-box' type='text'>
<span class='secure-icon icon'></span>
<button class='btn change change-primary-item-button change-selection-button new-btn transparent' type='button'>
<span class='refresh-icon icon'></span>
</button>
</div>
<div class='selected-backtest-control'>
<input class='disabled form-control selected-backtest-box' type='text'>
<span class='secure-icon icon'></span>
<button class='btn change-backtest-button change-selection-button new-btn transparent' type='button'>
<span class='refresh-icon icon'></span>
</button>
</div>
</div>
<div class='checkbox-group form-group'>
<div class='checkbox give-permission'>
<input class='give-permission-checkbox' id='feedback-give-permission-checkbox' type='checkbox'>
<div class='quanto-checkbox'></div>
<label for='feedback-give-permission-checkbox'>
I permit Quantopian to view <span class='item-type-text'>this algorithm,
backtest or notebook and their imported datasets</span> for the purpose of providing support.
</label>
</div>
</div>
</div>
</form>

<div class='loading-step hidden'>
<div class='loading-text'>
Submitting your support ticket...
</div>
</div>
<div class='success-step invisible'>
<h2 class='title center'>
You've successfully submitted a support ticket.
</h2>
<p>
Our support team will be in touch soon.
</p>
<div class='confirmation-image'></div>
</div>
</div>
<div class='modal-footer'>
<button class='btn-v2 blue' id='send-feedback-button'>Send</button>
<div class='error-message hidden'>
Error submitting support request.
</div>
</div>

</div>
</div>
</div>

</div>
</div>
<div class='footer' id='quanto-footer-container'>
<div class='container'>
<div class='row header-row'>
<div class='col-sm-fourth span3'>
<img class='async-image logotype-image' data-src='https://qf.quantopian.com/assets/logos/logo-q-full-b23bda5ac757691b9259d396d0dfef91567165868b8c955a836649686e6d2248.svg'>
</div>
<div class='col-sm-fourth span3'></div>
<div class='col-sm-fourth span3'></div>
<div class='col-sm-fourth span3'>
<div class='feedback-email'>
Need help?
<a href="/cdn-cgi/l/email-protection#c9afacacadaba8aaa289b8bca8a7bda6b9a0a8a7e7aaa6a4">Contact support.</a>
</div>
</div>
</div>
<div class='row'>
<div class='col-sm-fourth span3'>
<div class='header'>Company</div>
<div class='footer-row'>
<a href='/about'>About</a>
</div>
<div class='footer-row'>
<a href='/academia'>Academia</a>
</div>
<div class='footer-row'>
<a href='/jobs'>Careers</a>
</div>
<div class='footer-row'>
<a href='/posts'>Community</a>
</div>
<div class='footer-row'>
<a href='/events'>Events</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Learn &amp; Support</div>
<div class='footer-row'>
<a href='/faq'>FAQ</a>
</div>
<div class='footer-row'>
<a href='/tutorials/getting-started'>Getting Started</a>
</div>
<div class='footer-row'>
<a href='/docs'>Documentation</a>
</div>
<div class='footer-row'>
<a href='/tutorials'>Tutorials</a>
</div>
<div class='footer-row'>
<a href='/lectures'>Lectures</a>
</div>
<div class='footer-row'>
<a href='/opensource'>Open Source</a>
</div>
<div class='footer-row'>
<a href='https://status.quantopian.com/'>Site Status</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Notices</div>
<div class='footer-row'>
<a href='/policies/terms'>Terms of Use</a>
</div>
<div class='footer-row'>
<a href='/policies/privacy'>Privacy Policy</a>
</div>
<div class='footer-row'>
<a href='/security'>Security</a>
</div>
<div class='footer-row'>
<a href='/policies/code-of-conduct'>Code of Conduct</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Follow Us</div>
<div class='footer-row'>
<a href='https://www.twitter.com/quantopian'>Twitter</a>
</div>
<div class='footer-row'>
<a href='https://www.facebook.com/quantopian'>Facebook</a>
</div>
<div class='footer-row'>
<a href='https://www.linkedin.com/company/quantopian'>LinkedIn</a>
</div>
<div class='footer-row'>
<a href='https://www.youtube.com/channel/UC606MUq45P3zFLa4VGKbxsg'>YouTube</a>
</div>
</div>
</div>
<div class='row'>
<div class='col-xs-14 span12'>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian.
</p>
<p>
In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>

</div>
</div>
</div>
</div>
</div>
<div class='mobile-footer'>
<div class='mobile-nav-category main-links'>
<div class='mobile-nav-row-footer'>
<a href='/about'>About Quantopian</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/jobs'>Careers</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/posts'>Community</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/events'>Events</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/docs'>Documentation</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/academia'>Academia</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/lectures'>Lectures</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://status.quantopian.com/'>Status</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.facebook.com/quantopian'>Facebook</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.twitter.com/quantopian'>Twitter</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.linkedin.com/company/quantopian'>LinkedIn</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.youtube.com/channel/UC606MUq45P3zFLa4VGKbxsg'>YouTube</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/policies/terms'>Terms of Use</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/policies/privacy'>Privacy Policy</a>
</div>
</div>
<div class='mobile-nav-category'>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian.
</p>
<p>
In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>

</div>
</div>
</div>

</div>
<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script></body>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', "UA-8519877-1", {
    cookieDomain: "quantopian.com"
  });
  ga('set', 'dimension1', 'session_5f9dc7425d387f00077e48e4');
  
  ga('send', 'pageview');
</script>

<input type="hidden" name="is_mac" id="is_mac" value="false" />
<input type="hidden" name="mp" id="mp" value="75873953cd404bcc1da88a55ff51e3b4" />
<script>
  (function(e,a){if(!a.__SV){var b=window;try{var c,l,i,j=b.location,g=j.hash;c=function(a,b){return(l=a.match(RegExp(b+"=([^&]*)")))?l[1]:null};g&&c(g,"state")&&(i=JSON.parse(decodeURIComponent(c(g,"state"))),"mpeditor"===i.action&&(b.sessionStorage.setItem("_mpcehash",g),history.replaceState(i.desiredHash||"",e.title,j.pathname+j.search)))}catch(m){}var k,h;window.mixpanel=a;a._i=[];a.init=function(b,c,f){function e(b,a){var c=a.split(".");2==c.length&&(b=b[c[0]],a=c[1]);b[a]=function(){b.push([a].concat(Array.prototype.slice.call(arguments,
  0)))}}var d=a;"undefined"!==typeof f?d=a[f]=[]:f="mixpanel";d.people=d.people||[];d.toString=function(b){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);b||(a+=" (stub)");return a};d.people.toString=function(){return d.toString(1)+".people (stub)"};k="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
  for(h=0;h<k.length;h++)e(d,k[h]);a._i.push([b,c,f])};a.__SV=1.2;b=e.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";c=e.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}})(document,window.mixpanel||[]);
  mixpanel.init("75873953cd404bcc1da88a55ff51e3b4");
</script>
<script>
  mixpanel.track("view page", {"page": window.location.pathname});
</script>
</html>
