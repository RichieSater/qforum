<!DOCTYPE html>
<html>
<head>
<link href='i1.wp.com' rel='dns-prefetch'>
<link href='i2.wp.com' rel='dns-prefetch'>
<link href='i3.wp.com' rel='dns-prefetch'>
<meta content='2HgX9mcLHaPOX6sfaaAkhWtblhEB9yUNw4l6l46e1k4' name='google-site-verification'>
<link rel="shortcut icon" type="image/x-icon" href="external/favicon-q-ac1a76f2c200e9026b5b1147519bb4fab6256910588b831e2411bc6c7c1218c3.png" />
<title>
Tips for writing robust algorithms for the hedge fund
</title>
<meta content='Robustness is a key quality of an algorithm. The algorithm should continue live trading, day over day, and handle any situation. Below is a list of tips that we&#39;ve developed - keep these in mind as you&#39;re creating algos for the contest and fund!The lucky 13 tips: Use &quot;context&quot; instead of global variables to save state. This makes your algorithm more robust to starts/stops and correctly saves the state of variables. For example:import pandas as pdtimeperiod = 20 # don&#39;t use this syntaxdef...' name='description'>
<link rel="stylesheet" media="all" href="external/quanto-base-bundle-e8eb6050172aa0d24124d5c24bac90b2cccd88b5b9c7742026c0e9efab038c6e.css" />
<link rel="stylesheet" media="all" href="external/quanto-posts-bundle-aab01368d3f82d8dafc94ee9eabb82e77dc8c9fbbffa952fdcdc744dfa523cf3.css" />
<script src="external/quanto_global-057218867db29d5768131af5d6fb3476cef098e7d9e655108befb903c7ee985e.js"></script>
<script src="external/posts_bundle-3dfd82fa469c393d752e461d837aec9e4e364ae39f49198e34a6626f2180fdf7.js"></script>
<link href='external/logo-q-180x180-0f5a6a439c99203ed4aea6f656e7604c543d287be43d8b17c7591c1131f09a59.png' rel='apple-touch-icon'>
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="C42kfeGI0VZw0t11gJte7wR5mmUtT7cSlPlG4azfhyB369IwQ34DtcnPhETPdPabPPe5DFeDogkW9p2LBprlmw==" />
<meta content='width=device-width, initial-scale=1.0' name='viewport'>
<script>
//<![CDATA[
window.quanto_data={};quanto_data.bounce_back_params={"show_modal":null,"feedback_text":null};quanto_data.namespace="public";quanto_data.talib_info={"ADOSC":["Chaikin A/D Oscillator (Volume Indicators)",["fastperiod","3"],["slowperiod","10"]],"ADX":["Average Directional Movement Index (Momentum Indicators)",["timeperiod","14"]],"ADXR":["Average Directional Movement Index Rating (Momentum Indicators)",["timeperiod","14"]],"APO":["Absolute Price Oscillator (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["matype","0"]],"AROON":["Aroon (Momentum Indicators)",["timeperiod","14"]],"AROONOSC":["Aroon Oscillator (Momentum Indicators)",["timeperiod","14"]],"ATR":["Average True Range (Volatility Indicators)",["timeperiod","14"]],"BBANDS":["Bollinger Bands (Overlap Studies)",["timeperiod","5"],["nbdevup","2"],["nbdevdn","2"],["matype","0"]],"BETA":["Beta (Statistic Functions)",["timeperiod","5"]],"CCI":["Commodity Channel Index (Momentum Indicators)",["timeperiod","14"]],"CMO":["Chande Momentum Oscillator (Momentum Indicators)",["timeperiod","14"]],"CORREL":["Pearson's Correlation Coefficient (r) (Statistic Functions)",["timeperiod","30"]],"DEMA":["Double Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"DX":["Average Directional Movement Index (Momentum Indicators)",["timeperiod","14"]],"EMA":["Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"KAMA":["Kaufman Adaptive Moving Average (Overlap Studies)",["timeperiod","30"]],"LINEARREG":["Linear Regression (Statistic Functions)",["timeperiod","14"]],"LINEARREG_ANGLE":["Linear Regression Angle (Statistic Functions)",["timeperiod","14"]],"LINEARREG_INTERCEPT":["Linear Regression Intercept (Statistic Functions)",["timeperiod","14"]],"LINEARREG_SLOPE":["Linear Regression Slope (Statistic Functions)",["timeperiod","14"]],"MA":["Moving average (Overlap Studies)",["timeperiod","30"],["matype","0"]],"MACD":["Moving Average Convergence/Divergence (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["signalperiod","9"]],"MACDEXT":["MACD with controllable MA type (Momentum Indicators)",["fastperiod","12"],["fastmatype","0"],["slowperiod","26"],["slowmatype","0"],["signalperiod","9"],["signalmatype","0"]],"MACDFIX":["Moving Average Convergence/Divergence Fix 12/26 (Momentum Indicators)",["signalperiod","9"]],"MAX":["Highest values over a specified period (Math Operators)",["timeperiod","30"]],"MAXINDEX":["Index of highest value over a specified period (Math Operators)",["timeperiod","30"]],"MFI":["Money Flow Index (Momentum Indicators)",["timeperiod","14"]],"MIDPOINT":["Midpoint over period (Overlap Studies)",["timeperiod","14"]],"MIDPRICE":["Midpoint Price over period (Overlap Studies)",["timeperiod","14"]],"MIN":["Lowest value over a specified period (Math Operators)",["timeperiod","30"]],"MININDEX":["Index of lowest value over a specified period (Math Operators)",["timeperiod","30"]],"MINMAX":["Lowest and highest values over a specified period (Math Operators)",["timeperiod","30"]],"MINMAXINDEX":["Indexes of lowest and highest values over a specified period (Math Operators)",["timeperiod","30"]],"MINUS_DI":["Minus Directional Indicator (Momentum Indicators)",["timeperiod","14"]],"MINUS_DM":["Minus Directional Movement (Momentum Indicators)",["timeperiod","14"]],"MOM":["Momentum (Momentum Indicators)",["timeperiod","10"]],"NATR":["Normalized Average True Range (Volatility Indicators)",["timeperiod","14"]],"PLUS_DI":["Plus Directional Indicator (Momentum Indicators)",["timeperiod","14"]],"PLUS_DM":["Plus Directional Movement (Momentum Indicators)",["timeperiod","14"]],"PPO":["Percentage Price Oscillator (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["matype","0"]],"ROC":["Rate of change: ((price/prevPrice)-1)*100 (Momentum Indicators)",["timeperiod","10"]],"ROCP":["Rate of change Percentage: (price-prevPrice)/prevPrice (Momentum Indicators)",["timeperiod","10"]],"ROCR":["Rate of change ratio: (price/prevPrice) (Momentum Indicators)",["timeperiod","10"]],"ROCR100":["Rate of change ratio 100 scale: (price/prevPrice)*100 (Momentum Indicators)",["timeperiod","10"]],"RSI":["Relative Strength Index (Momentum Indicators)",["timeperiod","14"]],"SMA":["Simple Moving Average (Overlap Studies)",["timeperiod","30"]],"STDDEV":["Standard Deviation (Statistic Functions)",["timeperiod","5"],["nbdev","1"]],"STOCH":["Stochastic (Momentum Indicators)",["fastk_period","5"],["slowk_period","3"],["slowk_matype","0"],["slowd_period","3"],["slowd_matype","0"]],"STOCHF":["Stochastic Fast (Momentum Indicators)",["fastk_period","5"],["fastd_period","3"],["fastd_matype","0"]],"STOCHRSI":["Stochastic Relative Strength Index (Momentum Indicators)",["timeperiod","14"],["fastk_period","5"],["fastd_period","3"],["fastd_matype","0"]],"T3":["Triple Exponential Moving Average (T3) (Overlap Studies)",["timeperiod","5"],["vfactor","0.7"]],"TEMA":["Triple Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"TRIMA":["Triangular Moving Average (Overlap Studies)",["timeperiod","30"]],"TRIX":["1-day Rate-Of-Change (ROC) of a Triple Smooth EMA (Momentum Indicators)",["timeperiod","30"]],"TSF":["Time Series Forecast (Statistic Functions)",["timeperiod","14"]],"ULTOSC":["Ultimate Oscillator (Momentum Indicators)",["timeperiod1","7"],["timeperiod2","14"],["timeperiod3","28"]],"VAR":["Variance (Statistic Functions)",["timeperiod","5"],["nbdev","1"]],"WILLR":["Williams' %R (Momentum Indicators)",["timeperiod","14"]],"WMA":["Weighted Moving Average (Overlap Studies)",["timeperiod","30"]]};quanto_data.nb_preview_url="https://notebooks-preview.prd.pub.quantopian.com";quanto_data.delay_nb_preview_load=false;
//]]>
</script>
<meta content='https://www.quantopian.com/posts/tips-for-writing-robust-algorithms-for-the-hedge-fund' property='og:url'>
<meta content='Tips for writing robust algorithms for the hedge fund' property='og:title'>

<input type="hidden" name="env" id="quanto-env" value="production" />
<meta content='550580758292093' property='fb:app_id'>
<meta content='https://www.quantopian.com/posts/tips-for-writing-robust-algorithms-for-the-hedge-fund' property='og:url'>
<meta content='https://media.quantopian.com/public/og-image-default.png' property='og:image'>
<meta content='Tips for writing robust algorithms for the hedge fund' property='og:title'>
<meta content='Robustness is a key quality of an algorithm. The algorithm should continue live trading, day over day, and handle any situation. Below is a list of tips that we&#39;ve developed - keep these in mind as you&#39;re creating algos for the contest and fund!The lucky 13 tips: Use &quot;context&quot; instead of global variables to save state. This makes your algorithm more robust to starts/stops and correctly saves the state of variables. For example:import pandas as pdtimeperiod = 20 # don&#39;t use this syntaxdef...' property='og:description'>
</head>
<script type='application/ld+json'>
  {
    "@context": "http://schema.org",
    "@type": "Organization",
    "url": "https://www.quantopian.com",
    "logo": "https://media.quantopian.com/logos/logo-q-press-red.png"
  }
</script>
<body class='' ontouchstart=''>
<div id='fb-root'></div>
<div class='wrapper'>
<div class='alert-v2 error'>
<div class='message'>
Quantopian's community platform is shutting down. Please read <a href="/posts/quantopians-community-services-are-closing">this post</a> for more information and <a href='/account#account'>download your code</a>.
</div>
</div>
<div class='navbar navbar-default navbar-static-top' id='app-navbar'>
<div class='container-fluid'>
<div class='navbar-header'>
<button class='navbar-toggle collapsed' data-target='#app-navbar-collapse' data-toggle='collapse'>
<span class='icon hamburger-menu'></span>
</button>
<a class='navbar-brand' href='/home'>
<img class='logo-image async-image' data-src='external/logo-q-white-b141ea6018546e5a4ecc3d10d8440ec076fc4385764e948b322828cc70950a76.svg'>
</a>
</div>
<div class='collapse navbar-collapse' id='app-navbar-collapse'>
<ul class='nav navbar-nav navbar-right'>
<li class='dropdown quanto-dropdown-new'>
<li>
<a class='header' href='/docs'>
Documentation
</a>
</li>
<li class='dropdown quanto-dropdown-new'>
<a class='header' data-toggle='dropdown' href='#'>
Learn
</a>
<ul class='dropdown-menu'>
<li>
<a class='mixpanel-button' data-event='main nav getting started clicked' href='/tutorials/getting-started'>Getting Started</a>
</li>
<li>
<a class='mixpanel-button' data-event='main nav tutorials clicked' href='/tutorials'>Tutorials</a>
</li>
<li>
<a class='mixpanel-button' data-event='main nav lectures clicked' href='/lectures'>Lectures</a>
</li>
</ul>
</li>
<li>
<a class='header' href='/posts' id='forum-link'>
Forum
</a>
</li>
<li>
<a class="header" href="/signin?return_to=/posts/tips-for-writing-robust-algorithms-for-the-hedge-fund">Log In</a>
</li>
</li>

</ul>
</div>
</div>
</div>
<script>
  $(document).ready(function () {
    quanto.instances.fm = new quanto.FeedbackManager();
    quanto.instances.hm = new quanto.headerManager();
  })
</script>


<div class='content content-area new-style'>
<input type="hidden" name="page-id" id="page-id" value="postatomic" />
<script src="external/MathJax.js?config=TeX-AMS_HTML-full.js,Safe" async="async"></script>
<div class='container page-container post-atomic'>
<input id='parent-post-id-val' type='hidden' value='55a8230a69d28622a800006f'>
<div class='post-container' data-post-id='55a8230a69d28622a800006f' id='55a8230a69d28622a800006f'>
<div class='back-button back-to-community'>Back to Community</div>
<div class='post-title'>Tips for writing robust algorithms for the hedge fund</div>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/52b9b56c02cabe5dae000143'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e9388ae5102f3b152fa6225f955a29d4?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/52b9b56c02cabe5dae000143'>Alisa Deychman</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<span class='posted-at'>posted </span>
<span UTCms='1437082378000' class='quanto-date posted-at'></span>
<div class='pull-right other-actions'>
<div class='dropup inline-block'>
<div class='dropdown share-control other-action-link'>
<div data-toggle='dropdown'>
<div class='share-image'></div>
Share
</div>
<ul class='dropdown-menu share-options-menu'>
<li>
<a class='share-row' href='https://twitter.com/intent/tweet?text=Tips for writing robust algorithms for the hedge fund&amp;url=https%3A%2F%2Fwww.quantopian.com%2Fposts%2Ftips-for-writing-robust-algorithms-for-the-hedge-fund%3Futm_source%3Dwebsite_share%26utm_campaign%3Dtips-for-writing-robust-algorithms-for-the-hedge-fund%26utm_medium%3Dtwitter&amp;via=quantopian'>
<i class='icon icon-twitter'></i>
Share on Twitter
</a>
</li>
<li>
<div class='share-row facebook-button'>
<i class='icon icon-facebook'></i>
Share on Facebook
</div>
</li>
<li>
<div class='share-row linkedin-button' data-share-url='https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Fwww.quantopian.com%2Fposts%2Ftips-for-writing-robust-algorithms-for-the-hedge-fund%3Futm_source%3Dwebsite_share%26utm_campaign%3Dtips-for-writing-robust-algorithms-for-the-hedge-fund%26utm_medium%3Dlinkedin&amp;title=Tips+for+writing+robust+algorithms+for+the+hedge+fund+%28Alisa+Deychman%29&amp;source=Quantopian'>
<i class='icon icon-linkedin'></i>
Share on LinkedIn
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>

<div class='tags tag-row'>
<a class='tag mixpanel-button' data-event='tag click' data-mixpanel='Contest' data-tag-id='55c50e7d8d4710ec6e000006' href='/posts/tag/Contest/newest'>Contest</a>
<a class='tag mixpanel-button' data-event='tag click' data-mixpanel='Tools and Tips' data-tag-id='55c50e7d8d4710ec6e000011' href='/posts/tag/Tools-and-Tips/newest'>Tools and Tips</a>
<a class='tag mixpanel-button' data-event='tag click' data-mixpanel='Hedge Fund' data-tag-id='55c50e7d8d4710ec6e000014' href='/posts/tag/Hedge-Fund/newest'>Hedge Fund</a>
</div>
<input type="hidden" name="social_fb_post_link" id="social_fb_post_link" value="https://www.quantopian.com/posts/tips-for-writing-robust-algorithms-for-the-hedge-fund?utm_source=website_share&amp;utm_campaign=tips-for-writing-robust-algorithms-for-the-hedge-fund&amp;utm_medium=facebook" />
<input type="hidden" name="social_post_image" id="social_post_image" value="external/logo-q-red-outline.png" />
<input type="hidden" name="social_post_author" id="social_post_author" value="Alisa Deychman" />
<div class='body-text'>
<div class='body-text-container post-body'><p>Robustness is a key quality of an algorithm. The algorithm should continue live trading, day over day, and handle any situation. Below is a list of tips that we&#39;ve developed - keep these in mind as you&#39;re creating algos for the <a href="https://www.quantopian.com/open">contest</a> and <a href="https://www.quantopian.com/fund">fund</a>!</p>

<p>The lucky 13 tips: </p>

<ol>
<li><p>Use &quot;<a href="https://www.quantopian.com/help#ide-api">context</a>&quot; instead of global variables to save state. This makes your algorithm more robust to starts/stops and correctly saves the state of variables. For example:</p>

<pre><code>import pandas as pd

timeperiod = 20 # don&#39;t use this syntax

def initialize(context):  
   context.timeperiod = 20  # use this instead
</code></pre></li>
<li><p>Use <a href="https://www.quantopian.com/help#ide-schedulefunction">schedule_function</a> to arrange the day/time for your orders and signals. Don&#39;t use a manual comparison. For example:</p>

<pre><code>def initialize(context):  
     schedule_function(             # use this syntax  
        func=myfunc,  
        date_rule=date_rules.every_day(),  
        time_rule=time_rules.market_open(minutes=1)  
     )  

def handle_data (context,data):  
     if get_datetime().time()) == &#39;9:31&#39;:  # don&#39;t use this!  
         pass
</code></pre></li>
<li><p>Use <a href="https://www.quantopian.com/help#api-order-methods">order_target functions</a> instead of manually calculating the number of shares to buy. The algo shouldn&#39;t blindly buy/sell shares, but rather take existing positions into account. </p></li>
<li><p>Check for <a href="https://www.quantopian.com/posts/order-target-percent-ordering-too-much">open orders</a> before placing new orders using the target functions. </p></li>
<li><p>Add <a href="https://www.quantopian.com/help#ide-logging">logging</a> of intended orders (timing, symbols and order target size). This helps us monitor that the algo is behaving correctly, and was able to achieve its target positions. </p></li>
<li><p><a href="https://www.quantopian.com/help#ide-record">Record</a> the <a href="https://www.quantopian.com/help#api-account">leverage</a> (using context.account.leverage) to monitor the behavior. Algorithms selected for the fund will have leverage restricted to 1.05. The leverage will be applied at the fund level. </p></li>
<li><p>Make sure algo is &#39;aware&#39; of existing portfolio positions at deploy. The algo should handle starts/stops smoothly and pick up the correct positions.</p></li>
<li><p>Verify the algo will backfill any historical data needed to set initial parameters. The algorithm should begin trading immediately, without a warm-up period. </p></li>
<li><p>Use <a href="https://www.quantopian.com/help#ide-sid-lookup">sid()</a> instead of symbol() if hard-coding a list of securities. The sid() function is more robust to handling securities getting acquired and delisted. If you use symbol(&#39;ABC&#39;) in a live trading algo and the stock it acquired, your algo will stop trading.</p></li>
<li><p>Give your algorithm time to place its trades. Don&#39;t trade 1 minute before market close; try trading at 3:45PM or a <a href="https://www.quantopian.com/help#api-VWAPBestEffort">VWAPBestEffort</a> to place trades over a specific time period. </p></li>
<li><p>If your algo is pair trading, think about pending orders and failed orders. How will your algo react if one of the legs can&#39;t be ordered? Or if the position can&#39;t be fully reached? Have a check that if target positions aren&#39;t met after X time (3 min? 5 min?), close the pair.</p></li>
<li><p>Don&#39;t use deprecated functions in your algo (ie use <a href="https://www.quantopian.com/help#ide-history">history</a> instead of batch_transform).</p></li>
<li><p>Protect yourself against bad data prints. Our data vendor, like all data vendors, sometimes passes us bad data. Those bad prints might cause an algorithm to place a trade that it shouldn&#39;t, or skip a trade that it would otherwise have made. Check if a price is outside of an interval - for example 10 standard deviations - before acting on the signal. </p></li>
</ol>
</div>
</div>
<div class='disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>

</div>

<div class='container page-container post-atomic'>
<div class='section-header reply-header'>
<div class='reply-title'>21 responses</div>
</div>
<div class='replies'>
<div class='post-container response-container' data-post-id='55b31c7bf3465d4d65000106' id='55b31c7bf3465d4d65000106'>
<a href='#55b31c7bf3465d4d65000106'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/550b97655b83ee32fd000132'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/1f9775d029ff45e78e133f3379a9299a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/550b97655b83ee32fd000132'>Tristan Rhodes</a>
</div>
<a UTCms='1437801598000' class='quanto-date posted-at response-posted-at' href='#55b31c7bf3465d4d65000106'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Alisa,</p>

<p>This post has excellent information!  I don&#39;t think many people saw your post, otherwise I am sure there would be more discussion on these items.</p>

<p>I decided to try to write an algo that accomplished as many of these &quot;best practices&quot; as I could.  This version covers best practice 1-7, 9-10, and 12-13.</p>

<p>I would love for Quantopian to create an similar algo that could be added to your documentation.</p>

<p>Please continue sharing tips like these!</p>

<p>Tristan  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='55b337da22f496eee6000186' id='55b337da22f496eee6000186'>
<a href='#55b337da22f496eee6000186'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/554695a91206d6826a000126'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/88c2459a8c19a403e42b92acae2efb43?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/554695a91206d6826a000126'>JOHN CHAN</a>
</div>
<a UTCms='1437808605000' class='quanto-date posted-at response-posted-at' href='#55b337da22f496eee6000186'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>how about.. if I want the algo to trade every other day.. can that be done.. using... schedule function... or do we have to hard code it each date??tnxs... ;)  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='55b34e5409686cddb400026e' id='55b34e5409686cddb400026e'>
<a href='#55b34e5409686cddb400026e'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1437814359000' class='quanto-date posted-at response-posted-at' href='#55b34e5409686cddb400026e'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>John,</p>

<p>Here&#39;s one way of trading every other day.  Conceptually, you need a flag to keep track of whether trading was allowed on the prior day.  If so, then don&#39;t allow it for the current day.  If not, then it&#39;s o.k. to trade in the current day.</p>

<p>Grant</p>

<pre><code>def initialize(context):  
    context.stocks = [sid(8554), sid(33652)] # SPY &amp; BND  
    schedule_function(trade,date_rule=date_rules.every_day(),time_rule=time_rules.market_open(minutes=15))  
    context.execute = True

def handle_data(context, data):  
    pass

def trade(context, data):  
    if context.execute:  
        for stock in context.stocks:  
            order_target_percent(stock,0.5)  
        print &quot;Orders submitted&quot;  
        context.execute = False  
    else:  
        print &quot;Trading day skipped&quot;  
        context.execute = True  
</code></pre>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='55b413fea635a562810003d6' id='55b413fea635a562810003d6'>
<a href='#55b413fea635a562810003d6'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/54b8a7b4f44758bf5c000aea'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/4122a0b664faeb01757f54652164d960?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/54b8a7b4f44758bf5c000aea'>pangyuteng</a>
</div>
<a UTCms='1437864962000' class='quanto-date posted-at response-posted-at' href='#55b413fea635a562810003d6'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>These tips are pretty much essential.</p>

<p>One of my strategy tends to go on a buying spree (leverage shoots up to &gt;5)... on several particular stocks on several particular days.  Have never quite figured out why... until now!  Thanks for the convenience function &#39;has_orders&#39;, Alisa!  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='55b4586da635a56281000545' id='55b4586da635a56281000545'>
<a href='#55b4586da635a56281000545'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/550b97655b83ee32fd000132'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/1f9775d029ff45e78e133f3379a9299a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/550b97655b83ee32fd000132'>Tristan Rhodes</a>
</div>
<a UTCms='1437882480000' class='quanto-date posted-at response-posted-at' href='#55b4586da635a56281000545'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Alisa</p>

<p>I was reading through <a href="https://www.quantopian.com/help#sample-batchtransform">Q&#39;s Sample Algorithms,</a> and I noticed that some of them use &quot;batch_transform&quot;.  </p>

<p>Isn&#39;t that violation of tip #12?</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='55b7008327871fee7e000652' id='55b7008327871fee7e000652'>
<a href='#55b7008327871fee7e000652'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/52b9b56c02cabe5dae000143'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e9388ae5102f3b152fa6225f955a29d4?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/52b9b56c02cabe5dae000143'>Alisa Deychman</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1438056582000' class='quanto-date posted-at response-posted-at' href='#55b7008327871fee7e000652'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Tristan - that algo is fantastic! It&#39;s a great example of how to apply the best practices. Thanks for the elegant write-up and if I had internet points to dole out, you would certainly get them :) </p>

<p>As for your second question, batch_transform was the first function we created to return a trailing window of data. As we&#39;ve grown, it&#39;s shown some holes, and we are not working to support it. The function requires warm-up (ie will return 10 days of data only on the 11 day), is memory intensive, and doesn&#39;t have the convenience features of pandas. In short, it&#39;s cumbersome. We have left this in the past and encourage you to use the more nimble, powerful history() function. The sample algo still exists because history() cannot be applied to Fetcher data. It can only be applied to data in our database. However, there have been some <a href="https://www.quantopian.com/posts/method-to-get-historic-values-from-fetcher-data">hacks</a> shared in the community as a workaround until we bridge the gap. </p>

<p>@John - If you want to trade every other day, I would recommend to use multiple schedule_functions. You can use the &quot;week_start&quot; option and have multiple calls. For example:</p>

<pre><code>def initialize(context):  
   context.stock = sid(24)  #AAPL  
   schedule_function(trade, date_rules.week_start())   # trade on Monday  
   schedule_function(trade, date_rules.week_start(2))  # trade on Wednesday  
   schedule_function(trade, date_rules.week_start(4))  # trade on Friday

def handle_data(context,data):  
    pass

def trade(contet,data):  
  # your ordering logic here  
</code></pre>

<p>@Ted - glad you were able to find the reason!</p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='568f4fbe914cec5986000554' id='568f4fbe914cec5986000554'>
<a href='#568f4fbe914cec5986000554'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5682be6750d401992e000219'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/305b95ea509e85b40be630e5a97a0f08?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5682be6750d401992e000219'>Alex K</a>
</div>
<a UTCms='1452232644000' class='quanto-date posted-at response-posted-at' href='#568f4fbe914cec5986000554'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Tristan Thanks for the template! I think I found a bug on the #13 though. It&#39;s computing std deviation including the last day and then comparing it to the last two days difference. If the last day is off, then it will already inflate the std deviation:</p>

<pre><code>&gt; close_prices[security][0:-1].std()  
float: 0.00680190711624

&gt; close_prices[security].std()  
float: 11.1002873574

&gt; context.max_std_deviation_of_bad_prints * std  
float: 111.002873574  
</code></pre>

<p>So I think the correct logic should be like this (first line is changed):</p>

<pre><code>####################################################################  
#  Best Practice #13: Protect against bad data prints  
#####################################################################  
# Calculate the standard deviation of prices  
std = close_prices[security][0:-1].std()  
# If the current prices has changed more than 10 standard deviations,  
# we consider this a &quot;bad data print&quot; and don&#39;t make changes to that position  
if abs(close_prices[security][-1] - close_prices[security][-2]) &gt; context.max_std_deviation_of_bad_prints * std:  
    print &quot;{0}: STD = {1}  Assuming bad print.&quot;.format(security.symbol, std)  
    continue  
</code></pre>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='568ff150c4720694f60000c5' id='568ff150c4720694f60000c5'>
<a href='#568ff150c4720694f60000c5'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/550b97655b83ee32fd000132'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/1f9775d029ff45e78e133f3379a9299a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/550b97655b83ee32fd000132'>Tristan Rhodes</a>
</div>
<a UTCms='1452274006000' class='quanto-date posted-at response-posted-at' href='#568ff150c4720694f60000c5'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Great catch Alex!   Actually, I don&#39;t think we should include the last day in the STD calculation at all.... so the first line should be:</p>

<pre><code>std = close_prices[security][0:-2].std()  
</code></pre>

<p>The only downside to this logic is that any REAL drastic change, such as an overnight scandal or merger, the algorithm would not trade until the day after the big move.  </p>

<p>Can I take this opportunity to repeat my opinion that Quantopian has the responsibility to handle bad input, before it gets to our algos?     </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='568ff437a83cdac6e0000120' id='568ff437a83cdac6e0000120'>
<a href='#568ff437a83cdac6e0000120'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5682be6750d401992e000219'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/305b95ea509e85b40be630e5a97a0f08?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5682be6750d401992e000219'>Alex K</a>
</div>
<a UTCms='1452274749000' class='quanto-date posted-at response-posted-at' href='#568ff437a83cdac6e0000120'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>The second index in the interval is non-inclusive, so <code>[0:-1]</code> means &quot;up until the last element&quot;, not including.</p>

<p>Well, that&#39;s why you have 10x coefficient when comparing. If you have some market jumps in mind you can see if it blocks such trades or not. In my case I was comparing a jump from 0.33 to 33 so it&#39;s way over than 10x jump of deviation as you can see (more like 2000x).</p>

<p>(Regarding quotes, I agree that it would be nice if Q handled them. However, I think it&#39;s more important to have orders routed to the same exchanges which print those quotes. If IB smart routing sends orders to 5 destinations and Nanex aggregates quotes from 10, an algorithm will be trading on prices it can not get if I understand this correctly.)</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5690003fd5c668e2410001a3' id='5690003fd5c668e2410001a3'>
<a href='#5690003fd5c668e2410001a3'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/550b97655b83ee32fd000132'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/1f9775d029ff45e78e133f3379a9299a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/550b97655b83ee32fd000132'>Tristan Rhodes</a>
</div>
<a UTCms='1452277827000' class='quanto-date posted-at response-posted-at' href='#5690003fd5c668e2410001a3'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Alex:  You are right, of course.  I always forgot how Python slices are half-open.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5691abef1f924e4a380008fc' id='5691abef1f924e4a380008fc'>
<a href='#5691abef1f924e4a380008fc'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5558ffea86d2d08cb20005ec'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/97358675e9a853b95c91e2ce8859d284?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5558ffea86d2d08cb20005ec'>Serge d&#39;Adesky</a>
</div>
<a UTCms='1452387315000' class='quanto-date posted-at response-posted-at' href='#5691abef1f924e4a380008fc'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Tristan</p>

<pre><code> I believe you just used the ma as a way to document good algorithm practices, and not so much as a finished strategy, so the comments below may be superfluous to you, but they may help others thinking of use moving average strategies as the core of their approaches.
</code></pre>

<p>Let me repeat the praise you&#39;ve already gotten above for very elegant code. I was just curious to see how the moving average affected the results itself, so I ran the ma algo against a limited universe consisting only of SPY.  That&#39;s what this shows</p>

<p>(sorry for butchering the elegance of your code. I took some pretty ugly shortcuts)</p>

<p>My conclusions:<br>
    1) ma strategies  will almost always underperform the actual security itself but they will do so with more downside protection<br>
    2) you CAN develop ma strategies that outperform a simple long strategy,  but to do so you have to go &quot;intracandle&quot;, buying and selling just<br>
         after an ma cross (or minimum ma[-1] ma[-2] move)  This in turn brings up the problem of &quot;whipsawing&quot; but that can be dealt with and given the very low cost of trading  stocks these days  days becomes much less expensive than waiting until &quot;candle close&quot; to act.</p>

<p>Again, thanks for sharing  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5691c6523443db5d1c000314' id='5691c6523443db5d1c000314'>
<a href='#5691c6523443db5d1c000314'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/550b97655b83ee32fd000132'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/1f9775d029ff45e78e133f3379a9299a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/550b97655b83ee32fd000132'>Tristan Rhodes</a>
</div>
<a UTCms='1452394071000' class='quanto-date posted-at response-posted-at' href='#5691c6523443db5d1c000314'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Serge: Great points about using MA trading strategies.  This shared algo was not at all about the strategy, but more about trying to implement the &quot;robustness&quot; tips that Alisa shared.</p>

<p>BTW, I have shared a notebook to test which MA values would work best over a given time-period.  The problem was that those values did not provide predictive value for any other time periods!  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5698eca42746e9cbb0000043' id='5698eca42746e9cbb0000043'>
<a href='#5698eca42746e9cbb0000043'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5443d5b921d58319f2000268'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/33fcc31007090533ebec17d9f572582d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5443d5b921d58319f2000268'>Adam Luciano</a>
</div>
<a UTCms='1452862634000' class='quanto-date posted-at response-posted-at' href='#5698eca42746e9cbb0000043'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I have had some issues with using the talib library and walk forward testing. According to item 8 above, I should look to backfill the indicator, so I can test the also immediately. I am having some trouble working to accomplish this, can someone help me with the proper order of operations to accomplish backfilling, for example with RSI?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5699110b3bffa6012b0001ca' id='5699110b3bffa6012b0001ca'>
<a href='#5699110b3bffa6012b0001ca'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/54bd703ef8d6b5eb370000cc'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/0f9621e45abe138f1233e8b6fa87488f?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/54bd703ef8d6b5eb370000cc'>Taylor Smith</a>
</div>
<a UTCms='1452871953000' class='quanto-date posted-at response-posted-at' href='#5699110b3bffa6012b0001ca'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Of all those bullet points, I am missing one important one. 11. Don&#39;t know how to code it. Could I see an example?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5699124979e37c84b80000fe' id='5699124979e37c84b80000fe'>
<a href='#5699124979e37c84b80000fe'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5258725aa09fa7ebaa000024'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/7734b86e32e834268bee6749eb322fb4?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5258725aa09fa7ebaa000024'>David Edwards</a>
</div>
<a UTCms='1452872269000' class='quanto-date posted-at response-posted-at' href='#5699124979e37c84b80000fe'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Adam, the <a href="https://www.quantopian.com/help#ide-history">history()</a> function is what you want to get a trailing window of data, you can then pass the values returned to the TA-Lib functions. Here is one of the example algos from the help docs that uses history with TA-Lib. </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='569912c179e37cceac0000cc' id='569912c179e37cceac0000cc'>
<a href='#569912c179e37cceac0000cc'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5657a09af95a18caf600085a'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/cb7ba84227ef79495f4a09f8bf9aea38?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5657a09af95a18caf600085a'>Adam Smith</a>
</div>
<a UTCms='1452872390000' class='quanto-date posted-at response-posted-at' href='#569912c179e37cceac0000cc'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Alisa,</p>

<p>I have a difficulty to implement the tips as your suggested in item 8 (reduce warm-up period).  Most of my algo require more than 7 days to start the first trade.</p>

<p>Does any one can provide an easy example for me?</p>

<p>Cheers.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5699241712a2085da300002c' id='5699241712a2085da300002c'>
<a href='#5699241712a2085da300002c'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5682be6750d401992e000219'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/305b95ea509e85b40be630e5a97a0f08?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5682be6750d401992e000219'>Alex K</a>
</div>
<a UTCms='1452876830000' class='quanto-date posted-at response-posted-at' href='#5699241712a2085da300002c'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@David TA-Lib is very sensitive to NaNs in data. I wish help docs had more realistic examples which can be used directly. I am doing this for ATR but it looks very clumsy:  </p>

<pre><code>close_prices = history(context.atr_period+1, &#39;1d&#39;, &#39;close_price&#39;)  
highs = history(context.atr_period+1, &#39;1d&#39;, &#39;high&#39;)  
lows = history(context.atr_period+1, &#39;1d&#39;, &#39;low&#39;)

for security in data:  
    nan_present_highs = np.any(pandas.isnull(highs[security]))  
    nan_present_lows = np.any(pandas.isnull(lows[security]))  
    nan_present_closes = np.any(pandas.isnull(close_prices[security]))

    if nan_present_highs or nan_present_lows or nan_present_closes:  
        continue

    atr = talib.ATR(highs[security], lows[security], close_prices[security], timeperiod = context.atr_period) [ -1 ]

    if (atr is None) or math.isnan(atr):  
        continue  
</code></pre>

<p>Is there a better, canonical way to avoid NaNs here?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56992644d22f0d3fd800008c' id='56992644d22f0d3fd800008c'>
<a href='#56992644d22f0d3fd800008c'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5682be6750d401992e000219'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/305b95ea509e85b40be630e5a97a0f08?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5682be6750d401992e000219'>Alex K</a>
</div>
<a UTCms='1452877384000' class='quanto-date posted-at response-posted-at' href='#56992644d22f0d3fd800008c'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Adam All rule 8 says is that if your algorithm accumulates data as it goes and computes some internal values, it should use <code>history()</code> and loop through the past X days during the first time <code>handle_data</code> is invoked (or better yet - inside of <code>before_trading_start</code>). This way you will compute your values on the first run and can trade right away instead of skipping X days to warm up. If your algorithm uses <code>history</code> and does not save any internal calculations inside of <code>context</code> then there is nothing to worry about.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56992e0212a20804c500001d' id='56992e0212a20804c500001d'>
<a href='#56992e0212a20804c500001d'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5258725aa09fa7ebaa000024'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/7734b86e32e834268bee6749eb322fb4?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5258725aa09fa7ebaa000024'>David Edwards</a>
</div>
<a UTCms='1452879375000' class='quanto-date posted-at response-posted-at' href='#56992e0212a20804c500001d'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Alex K, unfortunately there isn&#39;t much you can do about NaNs in some cases. For example, if you need 200 days of history but one of the stocks has only been trading for 100 days you will have NaN values that you can&#39;t do anything about. Your best bet is to forward fill the missing bars and drop any stocks that still have NaNs in the resulting dataframe. It&#39;s probably safest to not trade stocks with missing data.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5699513b37a02c46de000040' id='5699513b37a02c46de000040'>
<a href='#5699513b37a02c46de000040'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5682be6750d401992e000219'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/305b95ea509e85b40be630e5a97a0f08?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5682be6750d401992e000219'>Alex K</a>
</div>
<a UTCms='1452888391000' class='quanto-date posted-at response-posted-at' href='#5699513b37a02c46de000040'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@David I understand, I am asking more from the coding perspective - is there a more elegant way to filter out those stocks? Are there any plans to support it more directly as a part of the API?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='569a58069fc3d6b5c4000565' id='569a58069fc3d6b5c4000565'>
<a href='#569a58069fc3d6b5c4000565'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5443d5b921d58319f2000268'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/33fcc31007090533ebec17d9f572582d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5443d5b921d58319f2000268'>Adam Luciano</a>
</div>
<a UTCms='1452955658000' class='quanto-date posted-at response-posted-at' href='#569a58069fc3d6b5c4000565'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@David and Alex K - Thank you! Will give your suggestions a try!  </p>
</div>
</div>
</div>

</div>
<div class='sign-in-please'>
Please <a href='/signin?return_to=/posts/tips-for-writing-robust-algorithms-for-the-hedge-fund'>sign in</a> or
<a href='/users/sign_up?redirect_to=/posts/tips-for-writing-robust-algorithms-for-the-hedge-fund'>join Quantopian</a> to
post a reply.
</div>
</div>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId: "550580758292093",
      status: false,
      cookie: true,
      xfbml: true
    });
  };
  
  (function(d, debug){
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) {return;}
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
    ref.parentNode.insertBefore(js, ref);
  }(document, /*debug*/ false));
  
  window.twttr = (function (d,s,id) {
    var t, js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return; js=d.createElement(s); js.id=id;
    js.src="//platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs);
    return window.twttr || (t = { _e: [], ready: function(f){ t._e.push(f) } });
  }(document, "script", "twitter-wjs"));
</script>
<script>
  $(document).ready(function () {
    quanto.instances.pm = new quanto.PostManager(false)
  });
</script>

<div class='login-footer'>
<div class='container'>
<div class='login-footer-text'>
Become an expert in quant finance through Quantopian's hands-on education.
</div>
<div class='login-footer-button'>
<button class='btn btn-v2 stroke join-modal-link mixpanel-button' data-event='anon join footer click posts' data-mixpanel='click'>
Join Now
</button>
</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='error-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'>Error</span>
</div>
<div class='modal-body body-content'>
<p>Sorry, something went wrong.  Try again or contact us by <a class='feedback-link'>sending feedback</a>.</p>
</div>
<div class='modal-footer'>
<button class='btn btn-v2 blue action-button' data-dismiss='modal' href='#'>Close</button>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='confirmation-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'></span>
</div>
<div class='modal-body body-content'></div>
<div class='modal-footer'>
<div class='pull-right'>
<button class='btn btn-v2 border' data-dismiss='modal'>Cancel</button>
<button class='btn btn-v2 blue action-button' data-dismiss='modal'></button>
</div>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='message-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'></span>
</div>
<div class='modal-body body-content'></div>
<div class='modal-footer'>
<button class='btn btn-v2 blue action-button' data-dismiss='modal' id='message-modal-close'>Close</button>
</div>

</div>
</div>
</div>

<div class='always-bootstrap3-modals'>
<div class='fade modal quanto-modal-v2' id='join-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header visible-small'>
<span class='title'>
Join Quantopian.  It's Free!
</span>
<div class='modal-x-out visible-xs'></div>
</div>
<div class='modal-body'>
<div class='flex-wrap'>
<div class='join-left-pane hidden-small'>
<div class='margin_30l'>
<div class='join-hero-text'>
Join Quantopian.  It's Free!
</div>
<div class='join-benefits'>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image code'></div>
</div>
<div class='join-text'>
Use our research platform, backtester, and dozens of clean data sets.
</div>
</div>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image learn'></div>
</div>
<div class='join-text'>
Learn with our hands-on education and community forums.
</div>
</div>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image win'></div>
</div>
<div class='join-text'>
Enter to win cash prizes in our contest.
</div>
</div>
</div>
<div class='hidden saved-reminder'>
Don't worry, all your work is already saved.
</div>
</div>
</div>
<div class='join-right-pane'>
<div class='hidden-small'>
<div class='button-pane'>
<a class="button btn-v2 user-form-btn" href="/signin">Already a Quantopian member?</a>
</div>
</div>
<div class='visible-small'>
<div class='already-member'>
<a href='/signin'>Already a Quantopian member?</a>
</div>
</div>
<form class="quanto-form-v2" id="new-user-modal-form" action="/users" accept-charset="UTF-8" data-remote="true" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><div class='error-message hidden'>
<div class='message'></div>
</div>
<div class='name-group'>
<div class='form-group inline-block'>
<label for="user_firstname">First Name</label>
<input class="form-control firstname" pattern=".*" required="required" autocomplete="off" autofocus="autofocus" type="text" name="user[firstname]" id="user_firstname" />
</div>
<div class='form-group inline-block'>
<label for="user_lastname">Last Name</label>
<input class="form-control" value="" pattern=".*" required="required" autocomplete="off" type="text" name="user[lastname]" id="user_lastname" />
</div>
</div>
<div class='form-group'>
<label for="user_email">Email</label>
<input class="form-control" value="" pattern=".*" required="required" autocomplete="off" type="email" name="user[email]" id="user_email" />
</div>
<div class='form-group'>
<label for="user_password">Password</label>
<input autocomplete="off" class="form-control" pattern=".*" required="required" type="password" name="user[password]" id="user_password" />
</div>
<div class='checkbox eula'>
<input id='eula-checkbox' type='checkbox'>
<div class='quanto-checkbox'></div>
<label for='eula-checkbox' id='checkbox-label'>I accept the <a href='/policies/terms' target='_blank'>Terms Of Use</a> and <a href='/policies/privacy' target='_blank'>Privacy Policy</a>.</label>
</div>
<div class='checkbox mailchimp-box'>
<input name="user[allow_marketing_emails]" type="hidden" value="0" /><input type="checkbox" value="1" name="user[allow_marketing_emails]" id="user_allow_marketing_emails" />
<div class='quanto-checkbox'></div>
<label for='user_allow_marketing_emails'>
Send me email updates with the latest news from the Quantopian community. We send these emails about once a month.
</label>
</div>
<div class='button-row'>
<button class='btn-v2 blue full' data-redirect-to='/tutorials/getting-started' id='sign-up-button' type='Submit'>Join Quantopian</button>
</div>
</form></div>
</div>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='feedback-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title'>Contact Support</span>
</div>
<div class='modal-body'>
<form class='anon-user controls quanto-form-v2' id='feedback-form'>
<div class='feedback-inputs'>
<div class='form-group'>
<input autofocus class='form-control' id='feedback-email-box' name='email' placeholder='Email Address' type='email'>
</div>
<div class='form-group'>
<input class='form-control' id='feedback-name-box' placeholder='Name' type='name'>
</div>
<div class='form-group'>
<textarea class='form-control' id='feedback-box' name='feedback' placeholder='What may we help you with?' rows='10'></textarea>
</div>
</div>
</form>
<form class='hidden quanto-form-v2 select-resource-area'>
<div class='select-step select-type-step'>
<div class='form-group'>
<select class='form-control select-resource-dropdown' title='Select the item you need help with'>
<option value='algorithm'>Algorithm</option>
<option value='backtest'>Backtest</option>
<option value='notebook'>Notebook</option>
</select>
</div>
</div>
<div class='select-step loading-area hidden'>
<div class='loading-text'>
Loading...
</div>
</div>
<div class='select-step empty-list-area hidden'>
<div class='back-button'>Go Back</div>
<div class='empty-text'>
No <span class='empty-list-resource-text'>algorithms</span> found
</div>
</div>
<div class='select-algo-area select-step hidden'>
<div class='back-button'>Go Back</div>
<table class='select-algo-table select-item-table'>
<thead>
<tr>
<th>
Algorithm
<span class='sort-icon'></span>
</th>
<th>
Last Modified
<span class='sort-icon'></span>
</th>
</tr>
</thead>
</table>
</div>
<div class='select-backtest-area select-step hidden'>
<div class='back-button'>Go Back</div>
<table class='select-backtest-table select-item-table'>
<thead>
<tr>
<th>
Backtest
<span class='sort-icon'></span>
</th>
<th>
Started At
<span class='sort-icon'></span>
</th>
<th>
Overall Return
<span class='sort-icon'></span>
</th>
<th>
Status
<span class='sort-icon'></span>
</th>
</tr>
</thead>
</table>
</div>
<div class='select-notebook-area select-step hidden'>
<div class='back-button'>Go Back</div>
<div class='subtitle select-cell-step'>
Choose a cell to use as the preview for this notebook:
</div>
<div class='iframe-wrapper'>
<iframe class='notebook-list-iframe slow-fade' src=''></iframe>
</div>
<div class='progress-area slow-fade in'>
<div class='progress-container'>
<div class='progress-title'>
<div class='quanto-loader gray'></div>
</div>
</div>
</div>
<div class='maintenance-area'>
<div class='error-container'>
<div class='row'>
<div class='col-md-14 msg-title h1'>
Sorry, research is currently undergoing maintenance.
</div>
</div>
<div class='row'>
<div class='col-md-14 msg-subtitle'>
Please check back shortly. If the maintenance period lasts longer than expected,
you can find updates on <a href='https://status.quantopian.com/'>status.quantopian.com</a>.
</div>
</div>

</div>
</div>
<div class='error-area'>
<div class='error-container'>
<div class='row'>
<div class='col-md-14 msg-title h1'>
Sorry, something went wrong on our end.
</div>
</div>
<div class='row'>
<div class='col-md-14 msg-subtitle'>
Please try again or contact <a class='open-feedback-link'>Quantopian support</a>.
</div>
</div>

</div>
</div>

</div>
<div class='selected-item-area select-step hidden'>
<div class='selected-item-group form-group'>
<div class='selected-item-control'>
<input class='disabled form-control selected-item-box' type='text'>
<span class='secure-icon icon'></span>
<button class='btn change change-primary-item-button change-selection-button new-btn transparent' type='button'>
<span class='refresh-icon icon'></span>
</button>
</div>
<div class='selected-backtest-control'>
<input class='disabled form-control selected-backtest-box' type='text'>
<span class='secure-icon icon'></span>
<button class='btn change-backtest-button change-selection-button new-btn transparent' type='button'>
<span class='refresh-icon icon'></span>
</button>
</div>
</div>
<div class='checkbox-group form-group'>
<div class='checkbox give-permission'>
<input class='give-permission-checkbox' id='feedback-give-permission-checkbox' type='checkbox'>
<div class='quanto-checkbox'></div>
<label for='feedback-give-permission-checkbox'>
I permit Quantopian to view <span class='item-type-text'>this algorithm,
backtest or notebook and their imported datasets</span> for the purpose of providing support.
</label>
</div>
</div>
</div>
</form>

<div class='loading-step hidden'>
<div class='loading-text'>
Submitting your support ticket...
</div>
</div>
<div class='success-step invisible'>
<h2 class='title center'>
You've successfully submitted a support ticket.
</h2>
<p>
Our support team will be in touch soon.
</p>
<div class='confirmation-image'></div>
</div>
</div>
<div class='modal-footer'>
<button class='btn-v2 blue' id='send-feedback-button'>Send</button>
<div class='error-message hidden'>
Error submitting support request.
</div>
</div>

</div>
</div>
</div>

</div>
</div>
<div class='footer' id='quanto-footer-container'>
<div class='container'>
<div class='row header-row'>
<div class='col-sm-fourth span3'>
<img class='async-image logotype-image' data-src='https://qf.quantopian.com/assets/logos/logo-q-full-b23bda5ac757691b9259d396d0dfef91567165868b8c955a836649686e6d2248.svg'>
</div>
<div class='col-sm-fourth span3'></div>
<div class='col-sm-fourth span3'></div>
<div class='col-sm-fourth span3'>
<div class='feedback-email'>
Need help?
<a href="/cdn-cgi/l/email-protection#16707373727477757d56676377786279667f77783875797b">Contact support.</a>
</div>
</div>
</div>
<div class='row'>
<div class='col-sm-fourth span3'>
<div class='header'>Company</div>
<div class='footer-row'>
<a href='/about'>About</a>
</div>
<div class='footer-row'>
<a href='/academia'>Academia</a>
</div>
<div class='footer-row'>
<a href='/jobs'>Careers</a>
</div>
<div class='footer-row'>
<a href='/posts'>Community</a>
</div>
<div class='footer-row'>
<a href='/events'>Events</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Learn &amp; Support</div>
<div class='footer-row'>
<a href='/faq'>FAQ</a>
</div>
<div class='footer-row'>
<a href='/tutorials/getting-started'>Getting Started</a>
</div>
<div class='footer-row'>
<a href='/docs'>Documentation</a>
</div>
<div class='footer-row'>
<a href='/tutorials'>Tutorials</a>
</div>
<div class='footer-row'>
<a href='/lectures'>Lectures</a>
</div>
<div class='footer-row'>
<a href='/opensource'>Open Source</a>
</div>
<div class='footer-row'>
<a href='https://status.quantopian.com/'>Site Status</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Notices</div>
<div class='footer-row'>
<a href='/policies/terms'>Terms of Use</a>
</div>
<div class='footer-row'>
<a href='/policies/privacy'>Privacy Policy</a>
</div>
<div class='footer-row'>
<a href='/security'>Security</a>
</div>
<div class='footer-row'>
<a href='/policies/code-of-conduct'>Code of Conduct</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Follow Us</div>
<div class='footer-row'>
<a href='https://www.twitter.com/quantopian'>Twitter</a>
</div>
<div class='footer-row'>
<a href='https://www.facebook.com/quantopian'>Facebook</a>
</div>
<div class='footer-row'>
<a href='https://www.linkedin.com/company/quantopian'>LinkedIn</a>
</div>
<div class='footer-row'>
<a href='https://www.youtube.com/channel/UC606MUq45P3zFLa4VGKbxsg'>YouTube</a>
</div>
</div>
</div>
<div class='row'>
<div class='col-xs-14 span12'>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian.
</p>
<p>
In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>

</div>
</div>
</div>
</div>
</div>
<div class='mobile-footer'>
<div class='mobile-nav-category main-links'>
<div class='mobile-nav-row-footer'>
<a href='/about'>About Quantopian</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/jobs'>Careers</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/posts'>Community</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/events'>Events</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/docs'>Documentation</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/academia'>Academia</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/lectures'>Lectures</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://status.quantopian.com/'>Status</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.facebook.com/quantopian'>Facebook</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.twitter.com/quantopian'>Twitter</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.linkedin.com/company/quantopian'>LinkedIn</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.youtube.com/channel/UC606MUq45P3zFLa4VGKbxsg'>YouTube</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/policies/terms'>Terms of Use</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/policies/privacy'>Privacy Policy</a>
</div>
</div>
<div class='mobile-nav-category'>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian.
</p>
<p>
In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>

</div>
</div>
</div>

</div>
<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script></body>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', "UA-8519877-1", {
    cookieDomain: "quantopian.com"
  });
  ga('set', 'dimension1', 'session_5f9dc7425d387f00077e48e4');
  
  ga('send', 'pageview');
</script>

<input type="hidden" name="is_mac" id="is_mac" value="false" />
<input type="hidden" name="mp" id="mp" value="75873953cd404bcc1da88a55ff51e3b4" />
<script>
  (function(e,a){if(!a.__SV){var b=window;try{var c,l,i,j=b.location,g=j.hash;c=function(a,b){return(l=a.match(RegExp(b+"=([^&]*)")))?l[1]:null};g&&c(g,"state")&&(i=JSON.parse(decodeURIComponent(c(g,"state"))),"mpeditor"===i.action&&(b.sessionStorage.setItem("_mpcehash",g),history.replaceState(i.desiredHash||"",e.title,j.pathname+j.search)))}catch(m){}var k,h;window.mixpanel=a;a._i=[];a.init=function(b,c,f){function e(b,a){var c=a.split(".");2==c.length&&(b=b[c[0]],a=c[1]);b[a]=function(){b.push([a].concat(Array.prototype.slice.call(arguments,
  0)))}}var d=a;"undefined"!==typeof f?d=a[f]=[]:f="mixpanel";d.people=d.people||[];d.toString=function(b){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);b||(a+=" (stub)");return a};d.people.toString=function(){return d.toString(1)+".people (stub)"};k="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
  for(h=0;h<k.length;h++)e(d,k[h]);a._i.push([b,c,f])};a.__SV=1.2;b=e.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";c=e.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}})(document,window.mixpanel||[]);
  mixpanel.init("75873953cd404bcc1da88a55ff51e3b4");
</script>
<script>
  mixpanel.track("view page", {"page": window.location.pathname});
</script>
</html>
