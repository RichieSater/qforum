<!DOCTYPE html>
<html>
<head>
<link href='i1.wp.com' rel='dns-prefetch'>
<link href='i2.wp.com' rel='dns-prefetch'>
<link href='i3.wp.com' rel='dns-prefetch'>
<meta content='2HgX9mcLHaPOX6sfaaAkhWtblhEB9yUNw4l6l46e1k4' name='google-site-verification'>
<link rel="shortcut icon" type="image/x-icon" href="external/favicon-q-ac1a76f2c200e9026b5b1147519bb4fab6256910588b831e2411bc6c7c1218c3.png" />
<title>
(Partial) implementation of Quantitative Value algorithm
</title>
<meta content='Here&#39;s my implementation of the algorithm in Quantitative Value, following the discussion  in this post . There are a few significant differences between this algorithm and the one in the book, owing to the difference between the Morningstar data and the data available to the authors. Also, Quantopian&#39;s data set extends back only 12 years, so putting in the full 8 year margin and franchise power computations didn&#39;t make a lot of sense. I also have not made any explicit effort in restricting...' name='description'>
<link rel="stylesheet" media="all" href="external/quanto-base-bundle-e8eb6050172aa0d24124d5c24bac90b2cccd88b5b9c7742026c0e9efab038c6e.css" />
<link rel="stylesheet" media="all" href="external/quanto-posts-bundle-aab01368d3f82d8dafc94ee9eabb82e77dc8c9fbbffa952fdcdc744dfa523cf3.css" />
<script src="external/quanto_global-057218867db29d5768131af5d6fb3476cef098e7d9e655108befb903c7ee985e.js"></script>
<script src="external/posts_bundle-3dfd82fa469c393d752e461d837aec9e4e364ae39f49198e34a6626f2180fdf7.js"></script>
<link href='external/logo-q-180x180-0f5a6a439c99203ed4aea6f656e7604c543d287be43d8b17c7591c1131f09a59.png' rel='apple-touch-icon'>
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="3fJ/4BYBhvr2phV5odie8AfwG4a0UuOppbTAX3i3VbWhlAmttPdUGU+7TEjuNzaEP344786e9rInuxs10vI3Dg==" />
<meta content='width=device-width, initial-scale=1.0' name='viewport'>
<script>
//<![CDATA[
window.quanto_data={};quanto_data.bounce_back_params={"show_modal":null,"feedback_text":null};quanto_data.namespace="public";quanto_data.talib_info={"ADOSC":["Chaikin A/D Oscillator (Volume Indicators)",["fastperiod","3"],["slowperiod","10"]],"ADX":["Average Directional Movement Index (Momentum Indicators)",["timeperiod","14"]],"ADXR":["Average Directional Movement Index Rating (Momentum Indicators)",["timeperiod","14"]],"APO":["Absolute Price Oscillator (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["matype","0"]],"AROON":["Aroon (Momentum Indicators)",["timeperiod","14"]],"AROONOSC":["Aroon Oscillator (Momentum Indicators)",["timeperiod","14"]],"ATR":["Average True Range (Volatility Indicators)",["timeperiod","14"]],"BBANDS":["Bollinger Bands (Overlap Studies)",["timeperiod","5"],["nbdevup","2"],["nbdevdn","2"],["matype","0"]],"BETA":["Beta (Statistic Functions)",["timeperiod","5"]],"CCI":["Commodity Channel Index (Momentum Indicators)",["timeperiod","14"]],"CMO":["Chande Momentum Oscillator (Momentum Indicators)",["timeperiod","14"]],"CORREL":["Pearson's Correlation Coefficient (r) (Statistic Functions)",["timeperiod","30"]],"DEMA":["Double Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"DX":["Average Directional Movement Index (Momentum Indicators)",["timeperiod","14"]],"EMA":["Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"KAMA":["Kaufman Adaptive Moving Average (Overlap Studies)",["timeperiod","30"]],"LINEARREG":["Linear Regression (Statistic Functions)",["timeperiod","14"]],"LINEARREG_ANGLE":["Linear Regression Angle (Statistic Functions)",["timeperiod","14"]],"LINEARREG_INTERCEPT":["Linear Regression Intercept (Statistic Functions)",["timeperiod","14"]],"LINEARREG_SLOPE":["Linear Regression Slope (Statistic Functions)",["timeperiod","14"]],"MA":["Moving average (Overlap Studies)",["timeperiod","30"],["matype","0"]],"MACD":["Moving Average Convergence/Divergence (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["signalperiod","9"]],"MACDEXT":["MACD with controllable MA type (Momentum Indicators)",["fastperiod","12"],["fastmatype","0"],["slowperiod","26"],["slowmatype","0"],["signalperiod","9"],["signalmatype","0"]],"MACDFIX":["Moving Average Convergence/Divergence Fix 12/26 (Momentum Indicators)",["signalperiod","9"]],"MAX":["Highest values over a specified period (Math Operators)",["timeperiod","30"]],"MAXINDEX":["Index of highest value over a specified period (Math Operators)",["timeperiod","30"]],"MFI":["Money Flow Index (Momentum Indicators)",["timeperiod","14"]],"MIDPOINT":["Midpoint over period (Overlap Studies)",["timeperiod","14"]],"MIDPRICE":["Midpoint Price over period (Overlap Studies)",["timeperiod","14"]],"MIN":["Lowest value over a specified period (Math Operators)",["timeperiod","30"]],"MININDEX":["Index of lowest value over a specified period (Math Operators)",["timeperiod","30"]],"MINMAX":["Lowest and highest values over a specified period (Math Operators)",["timeperiod","30"]],"MINMAXINDEX":["Indexes of lowest and highest values over a specified period (Math Operators)",["timeperiod","30"]],"MINUS_DI":["Minus Directional Indicator (Momentum Indicators)",["timeperiod","14"]],"MINUS_DM":["Minus Directional Movement (Momentum Indicators)",["timeperiod","14"]],"MOM":["Momentum (Momentum Indicators)",["timeperiod","10"]],"NATR":["Normalized Average True Range (Volatility Indicators)",["timeperiod","14"]],"PLUS_DI":["Plus Directional Indicator (Momentum Indicators)",["timeperiod","14"]],"PLUS_DM":["Plus Directional Movement (Momentum Indicators)",["timeperiod","14"]],"PPO":["Percentage Price Oscillator (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["matype","0"]],"ROC":["Rate of change: ((price/prevPrice)-1)*100 (Momentum Indicators)",["timeperiod","10"]],"ROCP":["Rate of change Percentage: (price-prevPrice)/prevPrice (Momentum Indicators)",["timeperiod","10"]],"ROCR":["Rate of change ratio: (price/prevPrice) (Momentum Indicators)",["timeperiod","10"]],"ROCR100":["Rate of change ratio 100 scale: (price/prevPrice)*100 (Momentum Indicators)",["timeperiod","10"]],"RSI":["Relative Strength Index (Momentum Indicators)",["timeperiod","14"]],"SMA":["Simple Moving Average (Overlap Studies)",["timeperiod","30"]],"STDDEV":["Standard Deviation (Statistic Functions)",["timeperiod","5"],["nbdev","1"]],"STOCH":["Stochastic (Momentum Indicators)",["fastk_period","5"],["slowk_period","3"],["slowk_matype","0"],["slowd_period","3"],["slowd_matype","0"]],"STOCHF":["Stochastic Fast (Momentum Indicators)",["fastk_period","5"],["fastd_period","3"],["fastd_matype","0"]],"STOCHRSI":["Stochastic Relative Strength Index (Momentum Indicators)",["timeperiod","14"],["fastk_period","5"],["fastd_period","3"],["fastd_matype","0"]],"T3":["Triple Exponential Moving Average (T3) (Overlap Studies)",["timeperiod","5"],["vfactor","0.7"]],"TEMA":["Triple Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"TRIMA":["Triangular Moving Average (Overlap Studies)",["timeperiod","30"]],"TRIX":["1-day Rate-Of-Change (ROC) of a Triple Smooth EMA (Momentum Indicators)",["timeperiod","30"]],"TSF":["Time Series Forecast (Statistic Functions)",["timeperiod","14"]],"ULTOSC":["Ultimate Oscillator (Momentum Indicators)",["timeperiod1","7"],["timeperiod2","14"],["timeperiod3","28"]],"VAR":["Variance (Statistic Functions)",["timeperiod","5"],["nbdev","1"]],"WILLR":["Williams' %R (Momentum Indicators)",["timeperiod","14"]],"WMA":["Weighted Moving Average (Overlap Studies)",["timeperiod","30"]]};quanto_data.nb_preview_url="https://notebooks-preview.prd.pub.quantopian.com";quanto_data.delay_nb_preview_load=false;
//]]>
</script>
<meta content='https://www.quantopian.com/posts/partial-implementation-of-quantitative-value-algorithm' property='og:url'>
<meta content='(Partial) implementation of Quantitative Value algorithm' property='og:title'>

<input type="hidden" name="env" id="quanto-env" value="production" />
<meta content='550580758292093' property='fb:app_id'>
<meta content='https://www.quantopian.com/posts/partial-implementation-of-quantitative-value-algorithm' property='og:url'>
<meta content='https://media.quantopian.com/public/og-image-default.png' property='og:image'>
<meta content='(Partial) implementation of Quantitative Value algorithm' property='og:title'>
<meta content='Here&#39;s my implementation of the algorithm in Quantitative Value, following the discussion  in this post . There are a few significant differences between this algorithm and the one in the book, owing to the difference between the Morningstar data and the data available to the authors. Also, Quantopian&#39;s data set extends back only 12 years, so putting in the full 8 year margin and franchise power computations didn&#39;t make a lot of sense. I also have not made any explicit effort in restricting...' property='og:description'>
</head>
<script type='application/ld+json'>
  {
    "@context": "http://schema.org",
    "@type": "Organization",
    "url": "https://www.quantopian.com",
    "logo": "https://media.quantopian.com/logos/logo-q-press-red.png"
  }
</script>
<body class='' ontouchstart=''>
<div id='fb-root'></div>
<div class='wrapper'>
<div class='alert-v2 error'>
<div class='message'>
Quantopian's community platform is shutting down. Please read <a href="/posts/quantopians-community-services-are-closing">this post</a> for more information and <a href='/account#account'>download your code</a>.
</div>
</div>
<div class='navbar navbar-default navbar-static-top' id='app-navbar'>
<div class='container-fluid'>
<div class='navbar-header'>
<button class='navbar-toggle collapsed' data-target='#app-navbar-collapse' data-toggle='collapse'>
<span class='icon hamburger-menu'></span>
</button>
<a class='navbar-brand' href='/home'>
<img class='logo-image async-image' data-src='external/logo-q-white-b141ea6018546e5a4ecc3d10d8440ec076fc4385764e948b322828cc70950a76.svg'>
</a>
</div>
<div class='collapse navbar-collapse' id='app-navbar-collapse'>
<ul class='nav navbar-nav navbar-right'>
<li class='dropdown quanto-dropdown-new'>
<li>
<a class='header' href='/docs'>
Documentation
</a>
</li>
<li class='dropdown quanto-dropdown-new'>
<a class='header' data-toggle='dropdown' href='#'>
Learn
</a>
<ul class='dropdown-menu'>
<li>
<a class='mixpanel-button' data-event='main nav getting started clicked' href='/tutorials/getting-started'>Getting Started</a>
</li>
<li>
<a class='mixpanel-button' data-event='main nav tutorials clicked' href='/tutorials'>Tutorials</a>
</li>
<li>
<a class='mixpanel-button' data-event='main nav lectures clicked' href='/lectures'>Lectures</a>
</li>
</ul>
</li>
<li>
<a class='header' href='/posts' id='forum-link'>
Forum
</a>
</li>
<li>
<a class="header" href="/signin?return_to=/posts/partial-implementation-of-quantitative-value-algorithm">Log In</a>
</li>
</li>

</ul>
</div>
</div>
</div>
<script>
  $(document).ready(function () {
    quanto.instances.fm = new quanto.FeedbackManager();
    quanto.instances.hm = new quanto.headerManager();
  })
</script>


<div class='content content-area new-style'>
<input type="hidden" name="page-id" id="page-id" value="postatomic" />
<script src="external/MathJax.js?config=TeX-AMS_HTML-full.js,Safe" async="async"></script>
<div class='container page-container post-atomic'>
<input id='parent-post-id-val' type='hidden' value='575ca06280002dc2f60004e0'>
<div class='post-container' data-post-id='575ca06280002dc2f60004e0' id='575ca06280002dc2f60004e0'>
<div class='back-button back-to-community'>Back to Community</div>
<div class='post-title'>(Partial) implementation of Quantitative Value algorithm</div>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/531743be277bf5f3ca000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/6833864d877d7eb6367c0c03836704fe?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/531743be277bf5f3ca000001'>Sunil Mishra</a>
</div>
<span class='posted-at'>posted </span>
<span UTCms='1465688162000' class='quanto-date posted-at'></span>
<div class='pull-right other-actions'>
<div class='dropup inline-block'>
<div class='dropdown share-control other-action-link'>
<div data-toggle='dropdown'>
<div class='share-image'></div>
Share
</div>
<ul class='dropdown-menu share-options-menu'>
<li>
<a class='share-row' href='https://twitter.com/intent/tweet?text=(Partial) implementation of Quantitative Value algorithm&amp;url=https%3A%2F%2Fwww.quantopian.com%2Fposts%2Fpartial-implementation-of-quantitative-value-algorithm%3Futm_source%3Dwebsite_share%26utm_campaign%3Dpartial-implementation-of-quantitative-value-algorithm%26utm_medium%3Dtwitter&amp;via=quantopian'>
<i class='icon icon-twitter'></i>
Share on Twitter
</a>
</li>
<li>
<div class='share-row facebook-button'>
<i class='icon icon-facebook'></i>
Share on Facebook
</div>
</li>
<li>
<div class='share-row linkedin-button' data-share-url='https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Fwww.quantopian.com%2Fposts%2Fpartial-implementation-of-quantitative-value-algorithm%3Futm_source%3Dwebsite_share%26utm_campaign%3Dpartial-implementation-of-quantitative-value-algorithm%26utm_medium%3Dlinkedin&amp;title=%28Partial%29+implementation+of+Quantitative+Value+algorithm+%28Sunil+Mishra%29&amp;source=Quantopian'>
<i class='icon icon-linkedin'></i>
Share on LinkedIn
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>

<input type="hidden" name="social_fb_post_link" id="social_fb_post_link" value="https://www.quantopian.com/posts/partial-implementation-of-quantitative-value-algorithm?utm_source=website_share&amp;utm_campaign=partial-implementation-of-quantitative-value-algorithm&amp;utm_medium=facebook" />
<input type="hidden" name="social_post_image" id="social_post_image" value="external/logo-q-red-outline.png" />
<input type="hidden" name="social_post_author" id="social_post_author" value="Sunil Mishra" />
<div class='body-text'>
<div class='body-text-container post-body'><p>Here&#39;s my implementation of the algorithm in Quantitative Value, following the discussion <a href="https://www.quantopian.com/posts/a-quantitative-value-investing-strategy-using-fundamental-data">in this post</a>. There are a few significant differences between this algorithm and the one in the book, owing to the difference between the Morningstar data and the data available to the authors. Also, Quantopian&#39;s data set extends back only 12 years, so putting in the full 8 year margin and franchise power computations didn&#39;t make a lot of sense. I also have not made any explicit effort in restricting the stock universe, save one stock that for some reason was breaking the backtest.</p>

<p>For this post I have removed several variations that have boosted returns to 750%, in part because they would distract from the core algorithm in the text. And also because the core algorithm seems a more sensible starting point for exploring other ideas. Note that there is no leverage and no short positions in this algorithm.</p>
</div>
</div>
</div>

</div>

<div class='container page-container post-atomic'>
<div class='section-header reply-header'>
<div class='reply-title'>28 responses</div>
</div>
<div class='replies'>
<div class='post-container response-container' data-post-id='575dd6215c2143e803000541' id='575dd6215c2143e803000541'>
<a href='#575dd6215c2143e803000541'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5118dbf1a4d447e2a6000050'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/ce323165e919dbc2ce95c864939caf12?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5118dbf1a4d447e2a6000050'>Costantino</a>
</div>
<a UTCms='1465767465000' class='quanto-date posted-at response-posted-at' href='#575dd6215c2143e803000541'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Great Work! I was also working on the same topic but then stopped because of some Quantopian Limitation for Fundamentals data.<br>
Where did you find that 
<code>get_fundamentals</code> supports a <strong>date</strong> also in the backtest environment and not only the research notebook? Is it an <em>undocumented</em> feature?</p>

<p>Here some links to my work on QVAL:<br>
Campbell, Hilscher, Szilagyi (CHS) Model - Probability of corporate failure<br>
<a href="https://www.quantopian.com/posts/campbell-hilscher-szilagyi-chs-model-probability-of-corporate-failure">https://www.quantopian.com/posts/campbell-hilscher-szilagyi-chs-model-probability-of-corporate-failure</a></p>

<p>Piotroski score:<br>
<a href="https://www.quantopian.com/posts/error-in-fundamental-data#56fbfe939426be39440000a4">https://www.quantopian.com/posts/error-in-fundamental-data#56fbfe939426be39440000a4</a></p>

<p>Beneish score:<br>
<a href="https://www.quantopian.com/posts/beneish-score-accounting-manipulation-as-pipeline-factor-memoryerror#56f2bc685fe2be6837000355">https://www.quantopian.com/posts/beneish-score-accounting-manipulation-as-pipeline-factor-memoryerror#56f2bc685fe2be6837000355</a>  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='575dec9c5c2143e803000610' id='575dec9c5c2143e803000610'>
<a href='#575dec9c5c2143e803000610'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/531743be277bf5f3ca000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/6833864d877d7eb6367c0c03836704fe?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/531743be277bf5f3ca000001'>Sunil Mishra</a>
</div>
<a UTCms='1465773225000' class='quanto-date posted-at response-posted-at' href='#575dec9c5c2143e803000610'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hey Costantino,</p>

<p>You&#39;ve just found a major bug in my implementation, <code>get_fundamentals</code> indeed does not take a date argument in the backtest. So I&#39;ve been playing with an <em>extremely</em> partial implementation of the quantitative value algorithm, managing to squeeze out good performance from the few factors that are correctly implemented... This is beyond embarrassing, and quite frankly also really impressive that the broken algorithm produced this performance.</p>

<p>So the options I have now are to either save up state in the context object, which will not translate to the live trading environment, or to use pipeline, which at least used to perform horribly with fundamental data, to the point where the algorithm had to be broken up into phases that ran across multiple days. Ugh. I honestly don&#39;t understand some of the design choices that the quantopian platform has made.</p>

<p>Well, back to the drawing board.</p>

<p>Sunil  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='575e91613416ecdc2b0002e2' id='575e91613416ecdc2b0002e2'>
<a href='#575e91613416ecdc2b0002e2'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5118dbf1a4d447e2a6000050'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/ce323165e919dbc2ce95c864939caf12?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5118dbf1a4d447e2a6000050'>Costantino</a>
</div>
<a UTCms='1465815400000' class='quanto-date posted-at response-posted-at' href='#575e91613416ecdc2b0002e2'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Sunil,</p>

<p>I wanted also to check, because I suspected that... anyway your work is a very good basis for the QVAL algorithm... it only needs to be updated, when Quantopian will make easier to work with historical fundamental data.</p>

<p>I&#39;m complaining about the lack of this feature for a long time... if you query for my username, you will find many post about this subject.<br>
There is a workaround, storing the data in a Panda Panel, but then is not possible to trade live (you have to wait a year o more before the panel is filled with data).</p>

<p>Q2 remains a great platform and maybe if we unite our forces, we can convince the Q-Team to add this feature as soon as possible ;-)... a 
<code>get_fundamentals</code>with <strong>date</strong> like in the Research environment would be great!  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='575ef03d7ed7bd16d0000689' id='575ef03d7ed7bd16d0000689'>
<a href='#575ef03d7ed7bd16d0000689'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/531743be277bf5f3ca000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/6833864d877d7eb6367c0c03836704fe?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/531743be277bf5f3ca000001'>Sunil Mishra</a>
</div>
<a UTCms='1465839684000' class='quanto-date posted-at response-posted-at' href='#575ef03d7ed7bd16d0000689'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Well, I&#39;m slowly converting the algorithm over to use pipelines. So far I&#39;ve only converted STA and SNOA computations, I suspect I&#39;ll soon run into timeout issues. Especially when I start implementing the franchise power and margin factors. The pipeline API as set up doesn&#39;t tell us where it is spending compute cycles, so any sort of optimization is virtually impossible.</p>

<p>I considered storing data in the context object, but as you said, that just doesn&#39;t work for live trading.</p>

<p>Another alternative to adding dates to <code>get_fundamentals</code> would be to allow specification of specific times for which we want to retrieve data for custom factors. Right now you have a very coarse <code>window_size</code> argument, would be good to be able to generalize that, even with something as simple as taking a vector of indices rather than a single window size.</p>

<p>The pipeline API is a really nice feature, but it is currently very inefficient especially when you want pipeline outputs infrequently (rather than daily), and does not come with a particularly rich set of operations that can be run on pipeline factors.</p>

<p>Sunil  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='575f20f534e2e120aa000048' id='575f20f534e2e120aa000048'>
<a href='#575f20f534e2e120aa000048'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5118dbf1a4d447e2a6000050'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/ce323165e919dbc2ce95c864939caf12?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5118dbf1a4d447e2a6000050'>Costantino</a>
</div>
<a UTCms='1465852156000' class='quanto-date posted-at response-posted-at' href='#575f20f534e2e120aa000048'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>You&#39;re right! Pipeline API is nice but very memory consuming, when it comes to the many datapoints required for historical fundamental data.</p>

<p>I posted a feature request exactly as you&#39;re now proposing (vector of indices rather than a single window size):<br>
<a href="https://www.quantopian.com/posts/pipeline-api-feature-request-retrive-single-data-points-instead-of-a-full-array-of-data-window-length">https://www.quantopian.com/posts/pipeline-api-feature-request-retrive-single-data-points-instead-of-a-full-array-of-data-window-length</a><br>
but until now it  remained a dead letter.</p>

<p>A kindly request to the Quantopian Team:
<code>get_fundamentals</code> already supports timestamp and timeframe in the Research environment. It would be great, to enable the same also in the Backtesting!  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5762e5b8b83b769c6f00011c' id='5762e5b8b83b769c6f00011c'>
<a href='#5762e5b8b83b769c6f00011c'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/531743be277bf5f3ca000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/6833864d877d7eb6367c0c03836704fe?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/531743be277bf5f3ca000001'>Sunil Mishra</a>
</div>
<a UTCms='1466099134000' class='quanto-date posted-at response-posted-at' href='#5762e5b8b83b769c6f00011c'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I am for now giving up on fixing my implementation. I have posted a last cry for help here...</p>

<p><a href="https://www.quantopian.com/posts/fundamentals-fundamentally-broken">https://www.quantopian.com/posts/fundamentals-fundamentally-broken</a>  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='57d1bb2579b26b8d020001f5' id='57d1bb2579b26b8d020001f5'>
<a href='#57d1bb2579b26b8d020001f5'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56990262be2416509000011c'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/0cccbbae7e2a982659980bd3c4d0a6eb?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56990262be2416509000011c'>Richard Jamieson</a>
</div>
<a UTCms='1473362732000' class='quanto-date posted-at response-posted-at' href='#57d1bb2579b26b8d020001f5'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I&#39;ve also been working on a QV screen algo, and running into the same issues as Sunil and Constantino when trying to run backtests. </p>

<p>However, I have put together a notebook (using pipeline) showing my working and would love thoughts / inputs from others. I already know there are a few things that need working on, for example:</p>

<ul>
<li>some of Constantino&#39;s examples above seem to have more accurate ways of determining window sizes and indexing for fundamentals - I need to look at that<br></li>
<li>I still have to implement the &#39;probability of manipulation&#39; part of the forensic screen<br></li>
<li>my franchise power factors only go back a maximum of 2 years, as opposed to 8 - notebook might be able to handle more than 2 years, I need to look at that</li>
</ul>

<p>If you spot any other bugs or have any other suggestions for improvement, please let me know. Otherwise I&#39;m just going to be waiting for Constantino&#39;s feature request above to be implemented :)  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='57d1fa88be040b9e4e0005ab' id='57d1fa88be040b9e4e0005ab'>
<a href='#57d1fa88be040b9e4e0005ab'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/531743be277bf5f3ca000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/6833864d877d7eb6367c0c03836704fe?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/531743be277bf5f3ca000001'>Sunil Mishra</a>
</div>
<a UTCms='1473378965000' class='quanto-date posted-at response-posted-at' href='#57d1fa88be040b9e4e0005ab'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>After working with the QV algorithm for a few months, here&#39;s what I&#39;ve learned:</p>

<ol>
<li>The algorithm has been developed and optimized for long term investing with annual rebalancing. The outcome is quite tax efficient for an individual investor. It isn&#39;t necessarily the kind of thing that fits into the Quantopian hedge fund. However, you <em>can</em> improve performance a bit if you add in momentum and technical factors. I&#39;ve used regression lines with some success.<br></li>
<li>Large parts of the algorithm can&#39;t be implemented using Quantopian&#39;s current pipeline implementation. Getting over an year of data (that&#39;s two data points per factor) is infeasible. You end up consuming too much memory, it kills the notebook.<br></li>
<li>There are large holes in the morningstar data. Many factors are defined for surprisingly few companies. EBIT for instance is defined for about 1000 fewer companies than EBITDA. Look at the fundamental data you&#39;re using carefully. I&#39;ve developed notebooks to get a sense for the data cardinality. I&#39;d post a link for the notebook, but the forum refuses to attach them to a message. I&#39;ll see if I can share them via bitbucket.<br></li>
<li>On a related note, most fundamental factors seem to be updated on a quarterly basis. The QV text I believe prefers annual numbers. Quantopian&#39;s infrastructure can&#39;t accommodate annual aggregation particularly well due to memory issues noted above.<br></li>
<li>There are outright errors lurking in the fundamental data. These can be <em>really</em> hard to spot.</li>
</ol>

<p>I might try running some experiments again in the future if Quantopian fixes issues surrounding fundamental data access.</p>

<p>Sunil  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='57d267db873e49a99c000328' id='57d267db873e49a99c000328'>
<a href='#57d267db873e49a99c000328'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/513793a4a1d9044a7f000237'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/012af5703c64ecb848db194e6b7af78c?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/513793a4a1d9044a7f000237'>Tybalt Trust</a>
</div>
<a UTCms='1473406948000' class='quanto-date posted-at response-posted-at' href='#57d267db873e49a99c000328'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>thanks Sunil  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5ad4296c575f170018825087' id='5ad4296c575f170018825087'>
<a href='#5ad4296c575f170018825087'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/54b7b0b31c64e7d0bc0001b7'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f3fbec910795910efa5222d1a658c3a5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/54b7b0b31c64e7d0bc0001b7'>Jay Teguh Wijaya</a>
</div>
<a UTCms='1523853676000' class='quanto-date posted-at response-posted-at' href='#5ad4296c575f170018825087'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thank Sunil, yeah I found many NaN values in the fundamental data too. I think this algorithm may be better used as a screener rather than a trading algorithm, at least with the current data availability.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5ad5873c18092a00109bd265' id='5ad5873c18092a00109bd265'>
<a href='#5ad5873c18092a00109bd265'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/54b7b0b31c64e7d0bc0001b7'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f3fbec910795910efa5222d1a658c3a5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/54b7b0b31c64e7d0bc0001b7'>Jay Teguh Wijaya</a>
</div>
<a UTCms='1523943229000' class='quanto-date posted-at response-posted-at' href='#5ad5873c18092a00109bd265'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Some updates:<br>
- Use today&#39;s date.<br>
- Remove stocks with NaN total_assets (i.e. fundamental data of some companies like CVE, UBS, etc. do not get listed in Quantopian dataset as they filed as foreign issuers).<br>
- Get all companies instead of only ones with high AverageDollarVolume.<br>
- Use 8-year factors for growth. The code looks incorrect but I cannot confirm at the moment. Will look more into this later.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5af6f648946703004ba80c05' id='5af6f648946703004ba80c05'>
<a href='#5af6f648946703004ba80c05'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/55a173c09d60f1269400003f'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/9a25675c484480074a77d865590fb150?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/55a173c09d60f1269400003f'>Bullseye Value</a>
</div>
<a UTCms='1526134344000' class='quanto-date posted-at response-posted-at' href='#5af6f648946703004ba80c05'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Jay Teguh Wijaya  - amazing notebook!!! thanks... you saved me weeks of work  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c543cc90233ec004fffe1b4' id='5c543cc90233ec004fffe1b4'>
<a href='#5c543cc90233ec004fffe1b4'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5abde6a00e7bd0001211b204'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/83749f7e225dda399980568be48fb832?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5abde6a00e7bd0001211b204'>Sebastian Koch</a>
</div>
<a UTCms='1549024457000' class='quanto-date posted-at response-posted-at' href='#5c543cc90233ec004fffe1b4'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hello Friends, I am currently trying to implement the allocation system from Wes Gray&#39;s and Tobias Carlisle&#39;s &quot;Quantitativ Value&quot;. Thank you for the amazing notebooks you provided! You also saved me weeks of work. We are truly standing on the shoulders of giants :-)</p>

<p>I noticed that something appears to be off with the STA score. This is what I found:<br>
If I understood the forensic screen correctly, STA is supposed to take YoY changes of net income and operating cash-flow as inputs,<br>
but &quot;morningstar.cash_flow_statement.operating_cash_flow&quot; seems to give us operating cash-flow from the most recent quarter.<br>
Does anybody know how we can maybe sum up the last 4 quarters?</p>

<p>For net income we are using &quot;morningstar.cash_flow_statement.net_income&quot;. For many companies I get very strange values.<br>
I compared these numbers with a few 10-Qs and 10-Ks and could no find where they are coming from.<br>
I&#39;m not sure. Maybe I just accidentally picked companies with faulty datasets.<br>
But if I use &quot;Fundamentals.net_income_income_statement.latest&quot; instead, I do get at least a number that matches the last quarter net income from the 10-Qs.</p>

<p>In addition to that, if I want to check &quot;Fundamentals.net_income_income_statement_asof_date.latest&quot; I do get the correct date of the most recent quarter like &quot;2018-09-30&quot;. Unfortunately, if I do the same with &quot;morningstar.cash_flow_statement.net_income_as_of.latest&quot; I only get ghibberish like &quot;1969-12-31 23:59:54.033000000&quot;.</p>

<p>Hope somebody has an idea how this can be improved.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c5446ce78023b12dc6965e3' id='5c5446ce78023b12dc6965e3'>
<a href='#5c5446ce78023b12dc6965e3'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5469bca83ab3de7bff000334'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/4c4ecac20f2ccee61491516e54b67f72?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5469bca83ab3de7bff000334'>Tony Morland</a>
</div>
<a UTCms='1549027022000' class='quanto-date posted-at response-posted-at' href='#5c5446ce78023b12dc6965e3'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi @Sebastian,</p>

<p>That Wes Gray &amp; Tobias Carlisle book is absolutely one of my favorites (out of a large trading library of hundreds of books) and has also been a great inspiration to me. As you say, shoulders of giants; indeed we are fortunate. </p>

<p>I have also had some strange results from time to time with regard to cash flow vs income statement data in the Morningstar DB, although i have not done any sort of thorough investigation like checking back with 10-K&#39;s &amp; -Q&#39;s as you have. I am about to start looking at some of these specific items more closely soon, and i will be happy to communicate &amp; share with you regarding whatever i/you find. Have you made any comparisons between Morningstar and the new FactSet DB items?<br>
Cheers, best regards, TonyM.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c546272f4dbb72735787e43' id='5c546272f4dbb72735787e43'>
<a href='#5c546272f4dbb72735787e43'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5abde6a00e7bd0001211b204'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/83749f7e225dda399980568be48fb832?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5abde6a00e7bd0001211b204'>Sebastian Koch</a>
</div>
<a UTCms='1549034098000' class='quanto-date posted-at response-posted-at' href='#5c546272f4dbb72735787e43'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hello Tony,</p>

<p>I&#39;d be happy to work on this thing with a fellow enthusiast.</p>

<p>After a little experimenting I think this should work for building a 12-month trailing net income.:  </p>

<pre><code>class NetIncome12M(CustomFactor):  
    inputs = [ Fundamentals.net_income_income_statement ]  
    window_length = 252  
    def compute(self, today, assets, out, nico):  
        out[:] = sum([nico[-1], nico[-94], nico[-157], nico[-220]])  
</code></pre>

<p>I looked at the values for the four lookback periods and it does seem to match<br>
the filing nicely. With ADRs it&#39;s more complicated. Some seem to work. Some have the<br>
exact same value in each of the 4 periods.</p>

<p>Cheers,<br>
Sebastian  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c546c7a78023b1d79696494' id='5c546c7a78023b1d79696494'>
<a href='#5c546c7a78023b1d79696494'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5469bca83ab3de7bff000334'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/4c4ecac20f2ccee61491516e54b67f72?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5469bca83ab3de7bff000334'>Tony Morland</a>
</div>
<a UTCms='1549036666000' class='quanto-date posted-at response-posted-at' href='#5c546c7a78023b1d79696494'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Sebastian,<br>
What sort of look-back periods are you currently working with or interested in working with?</p>

<p>At the moment i&#39;m putting most of my efforts into finding what factors seem to work best even BEFORE doing a careful job of cleaning up the data nicely.<br>
Some of &quot;the usual suspect&quot; factors as per the book do indeed work fine, others not so well (although of course that might be because of bad data and may improve later after cleanup, as you are focusing on), and also i&#39;m finding some very interesting new ideas that are not in the book.  Cheers, Tony.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c54802e78023b3afe6964c3' id='5c54802e78023b3afe6964c3'>
<a href='#5c54802e78023b3afe6964c3'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5469bca83ab3de7bff000334'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/4c4ecac20f2ccee61491516e54b67f72?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5469bca83ab3de7bff000334'>Tony Morland</a>
</div>
<a UTCms='1549041710000' class='quanto-date posted-at response-posted-at' href='#5c54802e78023b3afe6964c3'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>In addition to Morningstar, you might like to take  a look at FactSet | Income Statement | Net Income items, specifically the following annual items:</p>

<p>net_inc_af = Net Income<br>
net_inc_aft_xord_af =  Net Income After Extraordinary Items<br>
net_inc_basic_af = Net Income Available to Common, Basic<br>
net_inc_basic_aft_xord_af = Net Income Available to Common, Basic, After Extraordinary Items<br>
net_inc_basic_beft_xord_af = Net Income Before Extraordinary Items<br>
net_inc_dil_af = Net Income Available to Common, Fully Diluted<br>
net_inc_dil_aft_xord_af = Net Income Available to Common, Fully Diluted, After Extraordinaries</p>

<p>So far i&#39;m finding this to be a good DB. I think you may find that some of the &quot;cleanup&quot; work required with Morningstar is already done, as well as giving a wider data coverage without unnecessary additional calculation. Potentially may save quite a bit of work! Cheers, Tony  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c555afe67810c0040008c9e' id='5c555afe67810c0040008c9e'>
<a href='#5c555afe67810c0040008c9e'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5abde6a00e7bd0001211b204'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/83749f7e225dda399980568be48fb832?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5abde6a00e7bd0001211b204'>Sebastian Koch</a>
</div>
<a UTCms='1549097726000' class='quanto-date posted-at response-posted-at' href='#5c555afe67810c0040008c9e'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hello Tony,<br>
This might be an excellent idea. I will put the FactSet values side by side with the morningstar/Fundamentals items and see how they compare.</p>

<p>Cheers,<br>
Sebastian  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c5573ccffa22e004221af6e' id='5c5573ccffa22e004221af6e'>
<a href='#5c5573ccffa22e004221af6e'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5abde6a00e7bd0001211b204'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/83749f7e225dda399980568be48fb832?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5abde6a00e7bd0001211b204'>Sebastian Koch</a>
</div>
<a UTCms='1549104076000' class='quanto-date posted-at response-posted-at' href='#5c5573ccffa22e004221af6e'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>About your first post:<br>
I must admit that I am not good at backtesting yet. Probably have to watch a few more lectures. Still I feel confident to apply the metrics that Wes and Tobias (and Jack Vogel) used in their books. After all they tested their hypotheses over a much longer timeframe than we have available here. </p>

<p>I am positive that there are other factors that carry alpha and can be integrated into a quantitive value system. I am thinking about signals from insider dealings or short interest but the most promising approach is probably to find a way to combine value and momentum.</p>

<p>Alpha architect wrote that combining a simple value screen with a momentum metric can improve returns significantly. The only reason why they did not add it to quantitative value was that their value system in combination with their multistep &quot;quality on steroids&quot; factors still provided a little bit bettern returns than value plus momentum. </p>

<p>You might find this blog post interesting:<br>
<a href="https://alphaarchitect.com/2015/03/26/the-best-way-to-combine-value-and-momentum-investing-strategies/" rel="nofollow">https://alphaarchitect.com/2015/03/26/the-best-way-to-combine-value-and-momentum-investing-strategies/</a></p>

<p>By the way, I would love to be able to also apply the quantitative screener on stocks from outside the US. There is no logical<br>
reason why it should not work.  Therefore I am trying to keep at least as many ADRs inside the screen as possible (in contrast to Wes and Tobias).<br>
And I can probably consider stocks well below the 40th market cap percentile on NYSE without the transaction costs killing my returns.<br>
At least that&#39;s one of the advantages of not belonging to the top 0.1% yet  ;-)</p>

<p>Cheers,<br>
Sebastian  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c5583f4ca8d77332b05fa11' id='5c5583f4ca8d77332b05fa11'>
<a href='#5c5583f4ca8d77332b05fa11'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5469bca83ab3de7bff000334'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/4c4ecac20f2ccee61491516e54b67f72?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5469bca83ab3de7bff000334'>Tony Morland</a>
</div>
<a UTCms='1549108212000' class='quanto-date posted-at response-posted-at' href='#5c5583f4ca8d77332b05fa11'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi @Sebastian,</p>

<p>Thanks for the alpha-architect link. I did look at it a few years ago but had forgotten about it. </p>

<p>&quot;<em>I would love to be able to also apply the quantitative screener on stocks from outside the US. There is no logical
reason why it should not work</em>&quot;.<br>
I have been trading stocks outside the US for many years and came up with ideas similar to those of Wes &amp; Tobias long before i read the book, but it certainly helped me to consolidate some of those ideas. I have been using them very successfully in my own US and also Non-US stock selection &amp; trading  outside of Quantopian, and i can assure you that the ideas definitely DO work in other markets. In fact in some cases they work even better in other markets outside of the US, in other countries where these ideas are less well-known &amp; less widely applied.  </p>

<p>ADRs are a slightly different beast, with a mixture of characteristics of both the original foreign stocks and of US stocks, but again the ideas do generally work there too. </p>

<p>As to Market Cap, although i certainly use it in some ratio calculations, it actually not something i consider very much in trading. Generally of more importance from a practical trading perspective is liquidity, which can reasonably be defined as price multiplied by trading volume. As a trader, what one does NOT want is to get caught holding illiquid (i.e. un-sellable) stocks when the market starts to turn down, because if they don&#39;t have decent trading volume then maybe you just can&#39;t get out and end up with big losses. (Yeah, i did learn that lesson the hard way years ago). Often Liquidity &amp; MarketCap are closely related, but not necessarily. Good trading stocks do generally need Volume, and this is closely related to transaction costs. Especially if you are considering options trading outside of the context of Q.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c55c0fdca8d77332b05fb81' id='5c55c0fdca8d77332b05fb81'>
<a href='#5c55c0fdca8d77332b05fb81'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5abde6a00e7bd0001211b204'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/83749f7e225dda399980568be48fb832?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5abde6a00e7bd0001211b204'>Sebastian Koch</a>
</div>
<a UTCms='1549123837000' class='quanto-date posted-at response-posted-at' href='#5c55c0fdca8d77332b05fb81'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>With me it&#39;s the same. Back at university I read about return anomalies, the value-premium, the small-cap-premium and things like that and I know it should be possible the utilize that. I could punch myself that I did not dig more into quantitative investing back then. We had Thomson Financial Datastream terminals at our disposal. </p>

<p>Later I read a lot about behavioral finance and the more I read, the more convinced I became that I should have no discretion whatsoever about when to buy and when to sell a stock. As humans we are hardwired to buy and sell at the worst possible time. This is the reason why I want to develop a system with a statistical edge that makes the investment decision on my behalf. I did some swing trading when I was younger but now I am more interested in holding a portfolio of equities over a period of 6 or 12 months. Maybe that&#39;s still called trading ;-)</p>

<p>Like Wes and Tobias I also stumbled upon Joel Greenblatt&#39;s &#39;Magic Formula&#39; and fell in love with the idea of ranking a universe and staying invested the whole time instead of trying to time the market based on some absolute metric of cheapness. </p>

<p>I think what you say about liquidity is very true. There are some high market cap stocks with a minuscule free float on the other hand there are quite a number of 80 Mio. USD market cap stocks that are rather liquid. If I look at the average daily trading volume over the last 30 days and my order would be 1% of this daily volume or less, I do not worry about moving the price too much, regardless of the actual market cap. </p>

<p>By the way, I have a challenge in cleaning up the data. maybe you have an idea. When I look at  </p>

<pre><code>Fundamentals.net_income_income_statement_asof_date.latest  
</code></pre>

<p>...I get some data from outdated filings. 2007, 2010, 2014 and so on. 
So far I haven&#39;t found the correct synthax to exclude equities with a filing date before YYYY.MM.DD.<br>
Maybe you have an idea.</p>

<p>Cheers,<br>
Sebastian  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c55cc3a05dc311023ac0968' id='5c55cc3a05dc311023ac0968'>
<a href='#5c55cc3a05dc311023ac0968'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5469bca83ab3de7bff000334'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/4c4ecac20f2ccee61491516e54b67f72?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5469bca83ab3de7bff000334'>Tony Morland</a>
</div>
<a UTCms='1549126714000' class='quanto-date posted-at response-posted-at' href='#5c55cc3a05dc311023ac0968'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Behavioral Finance ideas make a lot of sense than the EMH crap that i got dished out!!  ;-))<br>
&quot; <em>... the more convinced I became that I should have no discretion whatsoever about when to buy and when to sell a stock</em>&quot;.</p>

<p>My own take on this is that &quot;discretion&quot; is generally something best used when OUT of the market and DESIGNING a system, rather than when IN the market trading it. </p>

<p>&quot;<em>...  interested in holding a portfolio of equities over a period of 6 or 12 months....</em>&quot;
I have done a lot of trading systems design (before and still currently outside of Q) and with regard to equities, for the most part i don&#39;t even try to design the timeframe, i just let the logical rules (partly fundamental, partly technical) tell me when to hold &amp; when not to for each stock, and the holding periods can turn out to be anything from a few days days right up to more-or-less indefinite in some cases. </p>

<p>Staying invested the whole time, but changing the investments as the rules advise, that makes good sense to me too, although with the caveat that although we haven&#39;t seen a bear market for &gt; 10 years doesn&#39;t mean one can&#39;t happen. What do you do then? Get out or try holding inverse equity ETFs?</p>

<p>Yes, Greenblatt&#39;s ideas are good too, but the more you look at fundamentals, the more you can find other ideas that work but no-one has really written about. That&#39;s mostly what i am playing with right now here on Q.</p>

<p>Regarding illiquid stocks (e.g. speculative mining, biotech, etc)  they can sometimes be fantastic &quot;investments&quot;, but just don&#39;t want to be holding them if/when the market as a whole goes down.  Yes, i agree with the &quot;my order size &lt; 1%% of av daily volume&quot; type of idea too.</p>

<p>Excluding stocks with old (i.e. no recent) data:<br>
My analysis for my own trading is not here in Q and honestly i am not a good python programmer, but i will think about this and, if i can&#39;t figure it out, then i will try asking around a bit. Certainly the idea makes good sense and worth doing. </p>

<p>All the best, Tony.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c55daf7c747e1664f7959e7' id='5c55daf7c747e1664f7959e7'>
<a href='#5c55daf7c747e1664f7959e7'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5abde6a00e7bd0001211b204'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/83749f7e225dda399980568be48fb832?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5abde6a00e7bd0001211b204'>Sebastian Koch</a>
</div>
<a UTCms='1549130487000' class='quanto-date posted-at response-posted-at' href='#5c55daf7c747e1664f7959e7'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hello Tony,</p>

<p>You definitely have a point about the possibility of a &gt;10 year bear market.<br>
I will tell you more about my personal asset allocation strategy py PM.</p>

<p>I&#39;m not mistaken, there seems to be a major flaw in the STA-calculation even if I manage to use trailing 12 month net income and operating cash flow instead of quarterly values.</p>

<p>This is the code for the custom factor:  </p>

<pre><code>class STA(CustomFactor):  
    inputs = [morningstar.cash_flow_statement.operating_cash_flow,  
              morningstar.cash_flow_statement.net_income,  
              morningstar.balance_sheet.total_assets]  
    window_length = 1  
    def compute(self, today, assets, out, ocf, ni, ta):  
        ta = np.where(np.isnan(ta), 0, ta)  
        ocf = np.where(np.isnan(ocf), 0, ocf)  
        ni = np.where(np.isnan(ni), 0, ni)  
        out[:] = abs(ni[-1] - ocf[-1])/ ta[-1]  
</code></pre>

<p>If we look at the absolut difference between net income and operating cash flow, doesn&#39;t it mean we are also punishing companies with high cash flows in comparison to net earnings? Basically this means a company with 15 billion in net income and 5 billion in ocf is just as bad as a company with 15 billion in ocf and 5 billion in net earnings. This doesn&#39;t seem right. Maybe I missed something but I thing it should just be:</p>

<pre><code> out[:] = (ni[-1] - ocf[-1])/ ta[-1]  
</code></pre>

<p>All the best,<br>
Sebastian  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c55db8567810c181f008d4e' id='5c55db8567810c181f008d4e'>
<a href='#5c55db8567810c181f008d4e'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5469bca83ab3de7bff000334'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/4c4ecac20f2ccee61491516e54b67f72?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5469bca83ab3de7bff000334'>Tony Morland</a>
</div>
<a UTCms='1549130629000' class='quanto-date posted-at response-posted-at' href='#5c55db8567810c181f008d4e'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p><a href="/cdn-cgi/l/email-protection#9ce8a8e8f3f2e5f1dce5fdf4f3f3b2fff3f1" rel="nofollow"><span class="__cf_email__" data-cfemail="3743034358594e5a774e565f58581954585a">[email&#160;protected]</span></a>  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c59d0e6f4c0d0319dbd49f8' id='5c59d0e6f4c0d0319dbd49f8'>
<a href='#5c59d0e6f4c0d0319dbd49f8'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5abde6a00e7bd0001211b204'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/83749f7e225dda399980568be48fb832?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5abde6a00e7bd0001211b204'>Sebastian Koch</a>
</div>
<a UTCms='1549390054000' class='quanto-date posted-at response-posted-at' href='#5c59d0e6f4c0d0319dbd49f8'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Finally got time to tinker around with the quantitave vaue screen a little more.<br>
That&#39;s how you can check the filings for &quot;freshness&quot; of the filing.  I just looked at net income from the most recent income statement to keep things simple.</p>

<pre><code>#Has to be importet first  
from quantopian.pipeline.factors import BusinessDaysSincePreviousEvent

#That&#39;s what I use for freshness when I filter the universe  
ni1current = (BusinessDaysSincePreviousEvent(inputs=[Fundamentals.net_income_income_statement_asof_date]) &lt;= 190)  
</code></pre>

<p>Cheers,<br>
Sebastian  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c59d269f4c0d07f23bd4a7e' id='5c59d269f4c0d07f23bd4a7e'>
<a href='#5c59d269f4c0d07f23bd4a7e'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5469bca83ab3de7bff000334'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/4c4ecac20f2ccee61491516e54b67f72?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5469bca83ab3de7bff000334'>Tony Morland</a>
</div>
<a UTCms='1549390441000' class='quanto-date posted-at response-posted-at' href='#5c59d269f4c0d07f23bd4a7e'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Sebastian,  that &quot;BusinessDaysSince...&quot; looks like just the thing. Cheers.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c5f411c22678377d45f17b1' id='5c5f411c22678377d45f17b1'>
<a href='#5c5f411c22678377d45f17b1'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5abde6a00e7bd0001211b204'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/83749f7e225dda399980568be48fb832?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5abde6a00e7bd0001211b204'>Sebastian Koch</a>
</div>
<a UTCms='1549746460000' class='quanto-date posted-at response-posted-at' href='#5c5f411c22678377d45f17b1'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hello Tony,<br>
It took me some time but i dug deeper into the algo. One important takeaway:<br>
Pay attention what you are looking at!<br>
Many of the Morningstar metrics mean something different than you would expect.</p>

<p>If I am not totally mistaken, things like Gross Margin or ROA at a certain point in time<br>
are actually calculated using only the income statement information from<br>
the most recent quarter - not the last 4 quarters and not even the most recent fiscal year end.<br>
This means yesterday&#39;s ROA is actually net income from the most recent quarter divided by most recent total assets.<br>
That&#39;s no problem as long as your fundamental only contains balance sheet items<br>
like the YoY long term debt growth inside the F-Score but as soon as you need to analyze anything from the<br>
income or cashflow statement, you are probably looking at only one quarter worth of data.</p>

<p>Cheers,<br>
Sebastian  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c5fe9835e17fe004681f4f7' id='5c5fe9835e17fe004681f4f7'>
<a href='#5c5fe9835e17fe004681f4f7'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5abde6a00e7bd0001211b204'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/83749f7e225dda399980568be48fb832?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5abde6a00e7bd0001211b204'>Sebastian Koch</a>
</div>
<a UTCms='1549789571000' class='quanto-date posted-at response-posted-at' href='#5c5fe9835e17fe004681f4f7'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Small correction:<br>
I noticed there was still something off when I compared the ROA with the actual 10Qs.  </p>

<pre><code>morningstar.operation_ratios.roa.latest  
</code></pre>

<p>... is actually the most recent quarter&#39;s net income but NOT divided by the most recent quarter&#39;s
total assets but by the average of the most recent quarter&#39;s and the previous quarter&#39;s total assets.</p>

<p>Cheers  </p>
</div>
</div>
</div>

</div>
<div class='sign-in-please'>
Please <a href='/signin?return_to=/posts/partial-implementation-of-quantitative-value-algorithm'>sign in</a> or
<a href='/users/sign_up?redirect_to=/posts/partial-implementation-of-quantitative-value-algorithm'>join Quantopian</a> to
post a reply.
</div>
</div>
<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
  window.fbAsyncInit = function() {
    FB.init({
      appId: "550580758292093",
      status: false,
      cookie: true,
      xfbml: true
    });
  };
  
  (function(d, debug){
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) {return;}
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
    ref.parentNode.insertBefore(js, ref);
  }(document, /*debug*/ false));
  
  window.twttr = (function (d,s,id) {
    var t, js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return; js=d.createElement(s); js.id=id;
    js.src="//platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs);
    return window.twttr || (t = { _e: [], ready: function(f){ t._e.push(f) } });
  }(document, "script", "twitter-wjs"));
</script>
<script>
  $(document).ready(function () {
    quanto.instances.pm = new quanto.PostManager(false)
  });
</script>

<div class='login-footer'>
<div class='container'>
<div class='login-footer-text'>
Become an expert in quant finance through Quantopian's hands-on education.
</div>
<div class='login-footer-button'>
<button class='btn btn-v2 stroke join-modal-link mixpanel-button' data-event='anon join footer click posts' data-mixpanel='click'>
Join Now
</button>
</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='error-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'>Error</span>
</div>
<div class='modal-body body-content'>
<p>Sorry, something went wrong.  Try again or contact us by <a class='feedback-link'>sending feedback</a>.</p>
</div>
<div class='modal-footer'>
<button class='btn btn-v2 blue action-button' data-dismiss='modal' href='#'>Close</button>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='confirmation-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'></span>
</div>
<div class='modal-body body-content'></div>
<div class='modal-footer'>
<div class='pull-right'>
<button class='btn btn-v2 border' data-dismiss='modal'>Cancel</button>
<button class='btn btn-v2 blue action-button' data-dismiss='modal'></button>
</div>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='message-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'></span>
</div>
<div class='modal-body body-content'></div>
<div class='modal-footer'>
<button class='btn btn-v2 blue action-button' data-dismiss='modal' id='message-modal-close'>Close</button>
</div>

</div>
</div>
</div>

<div class='always-bootstrap3-modals'>
<div class='fade modal quanto-modal-v2' id='join-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header visible-small'>
<span class='title'>
Join Quantopian.  It's Free!
</span>
<div class='modal-x-out visible-xs'></div>
</div>
<div class='modal-body'>
<div class='flex-wrap'>
<div class='join-left-pane hidden-small'>
<div class='margin_30l'>
<div class='join-hero-text'>
Join Quantopian.  It's Free!
</div>
<div class='join-benefits'>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image code'></div>
</div>
<div class='join-text'>
Use our research platform, backtester, and dozens of clean data sets.
</div>
</div>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image learn'></div>
</div>
<div class='join-text'>
Learn with our hands-on education and community forums.
</div>
</div>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image win'></div>
</div>
<div class='join-text'>
Enter to win cash prizes in our contest.
</div>
</div>
</div>
<div class='hidden saved-reminder'>
Don't worry, all your work is already saved.
</div>
</div>
</div>
<div class='join-right-pane'>
<div class='hidden-small'>
<div class='button-pane'>
<a class="button btn-v2 user-form-btn" href="/signin">Already a Quantopian member?</a>
</div>
</div>
<div class='visible-small'>
<div class='already-member'>
<a href='/signin'>Already a Quantopian member?</a>
</div>
</div>
<form class="quanto-form-v2" id="new-user-modal-form" action="/users" accept-charset="UTF-8" data-remote="true" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><div class='error-message hidden'>
<div class='message'></div>
</div>
<div class='name-group'>
<div class='form-group inline-block'>
<label for="user_firstname">First Name</label>
<input class="form-control firstname" pattern=".*" required="required" autocomplete="off" autofocus="autofocus" type="text" name="user[firstname]" id="user_firstname" />
</div>
<div class='form-group inline-block'>
<label for="user_lastname">Last Name</label>
<input class="form-control" value="" pattern=".*" required="required" autocomplete="off" type="text" name="user[lastname]" id="user_lastname" />
</div>
</div>
<div class='form-group'>
<label for="user_email">Email</label>
<input class="form-control" value="" pattern=".*" required="required" autocomplete="off" type="email" name="user[email]" id="user_email" />
</div>
<div class='form-group'>
<label for="user_password">Password</label>
<input autocomplete="off" class="form-control" pattern=".*" required="required" type="password" name="user[password]" id="user_password" />
</div>
<div class='checkbox eula'>
<input id='eula-checkbox' type='checkbox'>
<div class='quanto-checkbox'></div>
<label for='eula-checkbox' id='checkbox-label'>I accept the <a href='/policies/terms' target='_blank'>Terms Of Use</a> and <a href='/policies/privacy' target='_blank'>Privacy Policy</a>.</label>
</div>
<div class='checkbox mailchimp-box'>
<input name="user[allow_marketing_emails]" type="hidden" value="0" /><input type="checkbox" value="1" name="user[allow_marketing_emails]" id="user_allow_marketing_emails" />
<div class='quanto-checkbox'></div>
<label for='user_allow_marketing_emails'>
Send me email updates with the latest news from the Quantopian community. We send these emails about once a month.
</label>
</div>
<div class='button-row'>
<button class='btn-v2 blue full' data-redirect-to='/tutorials/getting-started' id='sign-up-button' type='Submit'>Join Quantopian</button>
</div>
</form></div>
</div>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='feedback-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title'>Contact Support</span>
</div>
<div class='modal-body'>
<form class='anon-user controls quanto-form-v2' id='feedback-form'>
<div class='feedback-inputs'>
<div class='form-group'>
<input autofocus class='form-control' id='feedback-email-box' name='email' placeholder='Email Address' type='email'>
</div>
<div class='form-group'>
<input class='form-control' id='feedback-name-box' placeholder='Name' type='name'>
</div>
<div class='form-group'>
<textarea class='form-control' id='feedback-box' name='feedback' placeholder='What may we help you with?' rows='10'></textarea>
</div>
</div>
</form>
<form class='hidden quanto-form-v2 select-resource-area'>
<div class='select-step select-type-step'>
<div class='form-group'>
<select class='form-control select-resource-dropdown' title='Select the item you need help with'>
<option value='algorithm'>Algorithm</option>
<option value='backtest'>Backtest</option>
<option value='notebook'>Notebook</option>
</select>
</div>
</div>
<div class='select-step loading-area hidden'>
<div class='loading-text'>
Loading...
</div>
</div>
<div class='select-step empty-list-area hidden'>
<div class='back-button'>Go Back</div>
<div class='empty-text'>
No <span class='empty-list-resource-text'>algorithms</span> found
</div>
</div>
<div class='select-algo-area select-step hidden'>
<div class='back-button'>Go Back</div>
<table class='select-algo-table select-item-table'>
<thead>
<tr>
<th>
Algorithm
<span class='sort-icon'></span>
</th>
<th>
Last Modified
<span class='sort-icon'></span>
</th>
</tr>
</thead>
</table>
</div>
<div class='select-backtest-area select-step hidden'>
<div class='back-button'>Go Back</div>
<table class='select-backtest-table select-item-table'>
<thead>
<tr>
<th>
Backtest
<span class='sort-icon'></span>
</th>
<th>
Started At
<span class='sort-icon'></span>
</th>
<th>
Overall Return
<span class='sort-icon'></span>
</th>
<th>
Status
<span class='sort-icon'></span>
</th>
</tr>
</thead>
</table>
</div>
<div class='select-notebook-area select-step hidden'>
<div class='back-button'>Go Back</div>
<div class='subtitle select-cell-step'>
Choose a cell to use as the preview for this notebook:
</div>
<div class='iframe-wrapper'>
<iframe class='notebook-list-iframe slow-fade' src=''></iframe>
</div>
<div class='progress-area slow-fade in'>
<div class='progress-container'>
<div class='progress-title'>
<div class='quanto-loader gray'></div>
</div>
</div>
</div>
<div class='maintenance-area'>
<div class='error-container'>
<div class='row'>
<div class='col-md-14 msg-title h1'>
Sorry, research is currently undergoing maintenance.
</div>
</div>
<div class='row'>
<div class='col-md-14 msg-subtitle'>
Please check back shortly. If the maintenance period lasts longer than expected,
you can find updates on <a href='https://status.quantopian.com/'>status.quantopian.com</a>.
</div>
</div>

</div>
</div>
<div class='error-area'>
<div class='error-container'>
<div class='row'>
<div class='col-md-14 msg-title h1'>
Sorry, something went wrong on our end.
</div>
</div>
<div class='row'>
<div class='col-md-14 msg-subtitle'>
Please try again or contact <a class='open-feedback-link'>Quantopian support</a>.
</div>
</div>

</div>
</div>

</div>
<div class='selected-item-area select-step hidden'>
<div class='selected-item-group form-group'>
<div class='selected-item-control'>
<input class='disabled form-control selected-item-box' type='text'>
<span class='secure-icon icon'></span>
<button class='btn change change-primary-item-button change-selection-button new-btn transparent' type='button'>
<span class='refresh-icon icon'></span>
</button>
</div>
<div class='selected-backtest-control'>
<input class='disabled form-control selected-backtest-box' type='text'>
<span class='secure-icon icon'></span>
<button class='btn change-backtest-button change-selection-button new-btn transparent' type='button'>
<span class='refresh-icon icon'></span>
</button>
</div>
</div>
<div class='checkbox-group form-group'>
<div class='checkbox give-permission'>
<input class='give-permission-checkbox' id='feedback-give-permission-checkbox' type='checkbox'>
<div class='quanto-checkbox'></div>
<label for='feedback-give-permission-checkbox'>
I permit Quantopian to view <span class='item-type-text'>this algorithm,
backtest or notebook and their imported datasets</span> for the purpose of providing support.
</label>
</div>
</div>
</div>
</form>

<div class='loading-step hidden'>
<div class='loading-text'>
Submitting your support ticket...
</div>
</div>
<div class='success-step invisible'>
<h2 class='title center'>
You've successfully submitted a support ticket.
</h2>
<p>
Our support team will be in touch soon.
</p>
<div class='confirmation-image'></div>
</div>
</div>
<div class='modal-footer'>
<button class='btn-v2 blue' id='send-feedback-button'>Send</button>
<div class='error-message hidden'>
Error submitting support request.
</div>
</div>

</div>
</div>
</div>

</div>
</div>
<div class='footer' id='quanto-footer-container'>
<div class='container'>
<div class='row header-row'>
<div class='col-sm-fourth span3'>
<img class='async-image logotype-image' data-src='https://qf.quantopian.com/assets/logos/logo-q-full-b23bda5ac757691b9259d396d0dfef91567165868b8c955a836649686e6d2248.svg'>
</div>
<div class='col-sm-fourth span3'></div>
<div class='col-sm-fourth span3'></div>
<div class='col-sm-fourth span3'>
<div class='feedback-email'>
Need help?
<a href="/cdn-cgi/l/email-protection#89efececedebe8eae2c9f8fce8e7fde6f9e0e8e7a7eae6e4">Contact support.</a>
</div>
</div>
</div>
<div class='row'>
<div class='col-sm-fourth span3'>
<div class='header'>Company</div>
<div class='footer-row'>
<a href='/about'>About</a>
</div>
<div class='footer-row'>
<a href='/academia'>Academia</a>
</div>
<div class='footer-row'>
<a href='/jobs'>Careers</a>
</div>
<div class='footer-row'>
<a href='/posts'>Community</a>
</div>
<div class='footer-row'>
<a href='/events'>Events</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Learn &amp; Support</div>
<div class='footer-row'>
<a href='/faq'>FAQ</a>
</div>
<div class='footer-row'>
<a href='/tutorials/getting-started'>Getting Started</a>
</div>
<div class='footer-row'>
<a href='/docs'>Documentation</a>
</div>
<div class='footer-row'>
<a href='/tutorials'>Tutorials</a>
</div>
<div class='footer-row'>
<a href='/lectures'>Lectures</a>
</div>
<div class='footer-row'>
<a href='/opensource'>Open Source</a>
</div>
<div class='footer-row'>
<a href='https://status.quantopian.com/'>Site Status</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Notices</div>
<div class='footer-row'>
<a href='/policies/terms'>Terms of Use</a>
</div>
<div class='footer-row'>
<a href='/policies/privacy'>Privacy Policy</a>
</div>
<div class='footer-row'>
<a href='/security'>Security</a>
</div>
<div class='footer-row'>
<a href='/policies/code-of-conduct'>Code of Conduct</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Follow Us</div>
<div class='footer-row'>
<a href='https://www.twitter.com/quantopian'>Twitter</a>
</div>
<div class='footer-row'>
<a href='https://www.facebook.com/quantopian'>Facebook</a>
</div>
<div class='footer-row'>
<a href='https://www.linkedin.com/company/quantopian'>LinkedIn</a>
</div>
<div class='footer-row'>
<a href='https://www.youtube.com/channel/UC606MUq45P3zFLa4VGKbxsg'>YouTube</a>
</div>
</div>
</div>
<div class='row'>
<div class='col-xs-14 span12'>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian.
</p>
<p>
In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>

</div>
</div>
</div>
</div>
</div>
<div class='mobile-footer'>
<div class='mobile-nav-category main-links'>
<div class='mobile-nav-row-footer'>
<a href='/about'>About Quantopian</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/jobs'>Careers</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/posts'>Community</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/events'>Events</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/docs'>Documentation</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/academia'>Academia</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/lectures'>Lectures</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://status.quantopian.com/'>Status</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.facebook.com/quantopian'>Facebook</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.twitter.com/quantopian'>Twitter</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.linkedin.com/company/quantopian'>LinkedIn</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.youtube.com/channel/UC606MUq45P3zFLa4VGKbxsg'>YouTube</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/policies/terms'>Terms of Use</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/policies/privacy'>Privacy Policy</a>
</div>
</div>
<div class='mobile-nav-category'>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian.
</p>
<p>
In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>

</div>
</div>
</div>

</div>
<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script></body>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', "UA-8519877-1", {
    cookieDomain: "quantopian.com"
  });
  ga('set', 'dimension1', 'session_5f9dc7425d387f00077e48e4');
  
  ga('send', 'pageview');
</script>

<input type="hidden" name="is_mac" id="is_mac" value="false" />
<input type="hidden" name="mp" id="mp" value="75873953cd404bcc1da88a55ff51e3b4" />
<script>
  (function(e,a){if(!a.__SV){var b=window;try{var c,l,i,j=b.location,g=j.hash;c=function(a,b){return(l=a.match(RegExp(b+"=([^&]*)")))?l[1]:null};g&&c(g,"state")&&(i=JSON.parse(decodeURIComponent(c(g,"state"))),"mpeditor"===i.action&&(b.sessionStorage.setItem("_mpcehash",g),history.replaceState(i.desiredHash||"",e.title,j.pathname+j.search)))}catch(m){}var k,h;window.mixpanel=a;a._i=[];a.init=function(b,c,f){function e(b,a){var c=a.split(".");2==c.length&&(b=b[c[0]],a=c[1]);b[a]=function(){b.push([a].concat(Array.prototype.slice.call(arguments,
  0)))}}var d=a;"undefined"!==typeof f?d=a[f]=[]:f="mixpanel";d.people=d.people||[];d.toString=function(b){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);b||(a+=" (stub)");return a};d.people.toString=function(){return d.toString(1)+".people (stub)"};k="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
  for(h=0;h<k.length;h++)e(d,k[h]);a._i.push([b,c,f])};a.__SV=1.2;b=e.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";c=e.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}})(document,window.mixpanel||[]);
  mixpanel.init("75873953cd404bcc1da88a55ff51e3b4");
</script>
<script>
  mixpanel.track("view page", {"page": window.location.pathname});
</script>
</html>
