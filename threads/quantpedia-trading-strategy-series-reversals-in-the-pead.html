<!DOCTYPE html>
<html>
<head>
<link href='i1.wp.com' rel='dns-prefetch'>
<link href='i2.wp.com' rel='dns-prefetch'>
<link href='i3.wp.com' rel='dns-prefetch'>
<meta content='2HgX9mcLHaPOX6sfaaAkhWtblhEB9yUNw4l6l46e1k4' name='google-site-verification'>
<link rel="shortcut icon" type="image/x-icon" href="external/favicon-q-ac1a76f2c200e9026b5b1147519bb4fab6256910588b831e2411bc6c7c1218c3.png" />
<title>
Quantpedia Trading Strategy Series: Reversals in the PEAD
</title>
<meta content='In his white paper  &quot;Overreacting to a History of Underreaction&quot; , Milian explores the possibility that well known cross sectional anomalies can reverse over time. Specifically, he investigates the reversal of the  PEAD  effect. He finds that contrary to previous research,  stocks with the most negative previous earnings surprise actually exhibit the most positive returns following the subsequent earnings announcement.  This can be attributed to the idea that investors know they typically...' name='description'>
<link rel="stylesheet" media="all" href="external/quanto-base-bundle-e8eb6050172aa0d24124d5c24bac90b2cccd88b5b9c7742026c0e9efab038c6e.css" />
<link rel="stylesheet" media="all" href="external/quanto-posts-bundle-aab01368d3f82d8dafc94ee9eabb82e77dc8c9fbbffa952fdcdc744dfa523cf3.css" />
<script src="external/quanto_global-057218867db29d5768131af5d6fb3476cef098e7d9e655108befb903c7ee985e.js"></script>
<script src="external/posts_bundle-3dfd82fa469c393d752e461d837aec9e4e364ae39f49198e34a6626f2180fdf7.js"></script>
<link href='external/logo-q-180x180-0f5a6a439c99203ed4aea6f656e7604c543d287be43d8b17c7591c1131f09a59.png' rel='apple-touch-icon'>
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="ZR7kKDv3WNqbSvZOtYL357h7Y69R+IJdE2zQjnHrifkZeJJlmQGKOSJXr3/6bV+TgPVAxis0l0aRYwvk267rQg==" />
<meta content='width=device-width, initial-scale=1.0' name='viewport'>
<script>
//<![CDATA[
window.quanto_data={};quanto_data.bounce_back_params={"show_modal":null,"feedback_text":null};quanto_data.namespace="public";quanto_data.talib_info={"ADOSC":["Chaikin A/D Oscillator (Volume Indicators)",["fastperiod","3"],["slowperiod","10"]],"ADX":["Average Directional Movement Index (Momentum Indicators)",["timeperiod","14"]],"ADXR":["Average Directional Movement Index Rating (Momentum Indicators)",["timeperiod","14"]],"APO":["Absolute Price Oscillator (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["matype","0"]],"AROON":["Aroon (Momentum Indicators)",["timeperiod","14"]],"AROONOSC":["Aroon Oscillator (Momentum Indicators)",["timeperiod","14"]],"ATR":["Average True Range (Volatility Indicators)",["timeperiod","14"]],"BBANDS":["Bollinger Bands (Overlap Studies)",["timeperiod","5"],["nbdevup","2"],["nbdevdn","2"],["matype","0"]],"BETA":["Beta (Statistic Functions)",["timeperiod","5"]],"CCI":["Commodity Channel Index (Momentum Indicators)",["timeperiod","14"]],"CMO":["Chande Momentum Oscillator (Momentum Indicators)",["timeperiod","14"]],"CORREL":["Pearson's Correlation Coefficient (r) (Statistic Functions)",["timeperiod","30"]],"DEMA":["Double Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"DX":["Average Directional Movement Index (Momentum Indicators)",["timeperiod","14"]],"EMA":["Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"KAMA":["Kaufman Adaptive Moving Average (Overlap Studies)",["timeperiod","30"]],"LINEARREG":["Linear Regression (Statistic Functions)",["timeperiod","14"]],"LINEARREG_ANGLE":["Linear Regression Angle (Statistic Functions)",["timeperiod","14"]],"LINEARREG_INTERCEPT":["Linear Regression Intercept (Statistic Functions)",["timeperiod","14"]],"LINEARREG_SLOPE":["Linear Regression Slope (Statistic Functions)",["timeperiod","14"]],"MA":["Moving average (Overlap Studies)",["timeperiod","30"],["matype","0"]],"MACD":["Moving Average Convergence/Divergence (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["signalperiod","9"]],"MACDEXT":["MACD with controllable MA type (Momentum Indicators)",["fastperiod","12"],["fastmatype","0"],["slowperiod","26"],["slowmatype","0"],["signalperiod","9"],["signalmatype","0"]],"MACDFIX":["Moving Average Convergence/Divergence Fix 12/26 (Momentum Indicators)",["signalperiod","9"]],"MAX":["Highest values over a specified period (Math Operators)",["timeperiod","30"]],"MAXINDEX":["Index of highest value over a specified period (Math Operators)",["timeperiod","30"]],"MFI":["Money Flow Index (Momentum Indicators)",["timeperiod","14"]],"MIDPOINT":["Midpoint over period (Overlap Studies)",["timeperiod","14"]],"MIDPRICE":["Midpoint Price over period (Overlap Studies)",["timeperiod","14"]],"MIN":["Lowest value over a specified period (Math Operators)",["timeperiod","30"]],"MININDEX":["Index of lowest value over a specified period (Math Operators)",["timeperiod","30"]],"MINMAX":["Lowest and highest values over a specified period (Math Operators)",["timeperiod","30"]],"MINMAXINDEX":["Indexes of lowest and highest values over a specified period (Math Operators)",["timeperiod","30"]],"MINUS_DI":["Minus Directional Indicator (Momentum Indicators)",["timeperiod","14"]],"MINUS_DM":["Minus Directional Movement (Momentum Indicators)",["timeperiod","14"]],"MOM":["Momentum (Momentum Indicators)",["timeperiod","10"]],"NATR":["Normalized Average True Range (Volatility Indicators)",["timeperiod","14"]],"PLUS_DI":["Plus Directional Indicator (Momentum Indicators)",["timeperiod","14"]],"PLUS_DM":["Plus Directional Movement (Momentum Indicators)",["timeperiod","14"]],"PPO":["Percentage Price Oscillator (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["matype","0"]],"ROC":["Rate of change: ((price/prevPrice)-1)*100 (Momentum Indicators)",["timeperiod","10"]],"ROCP":["Rate of change Percentage: (price-prevPrice)/prevPrice (Momentum Indicators)",["timeperiod","10"]],"ROCR":["Rate of change ratio: (price/prevPrice) (Momentum Indicators)",["timeperiod","10"]],"ROCR100":["Rate of change ratio 100 scale: (price/prevPrice)*100 (Momentum Indicators)",["timeperiod","10"]],"RSI":["Relative Strength Index (Momentum Indicators)",["timeperiod","14"]],"SMA":["Simple Moving Average (Overlap Studies)",["timeperiod","30"]],"STDDEV":["Standard Deviation (Statistic Functions)",["timeperiod","5"],["nbdev","1"]],"STOCH":["Stochastic (Momentum Indicators)",["fastk_period","5"],["slowk_period","3"],["slowk_matype","0"],["slowd_period","3"],["slowd_matype","0"]],"STOCHF":["Stochastic Fast (Momentum Indicators)",["fastk_period","5"],["fastd_period","3"],["fastd_matype","0"]],"STOCHRSI":["Stochastic Relative Strength Index (Momentum Indicators)",["timeperiod","14"],["fastk_period","5"],["fastd_period","3"],["fastd_matype","0"]],"T3":["Triple Exponential Moving Average (T3) (Overlap Studies)",["timeperiod","5"],["vfactor","0.7"]],"TEMA":["Triple Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"TRIMA":["Triangular Moving Average (Overlap Studies)",["timeperiod","30"]],"TRIX":["1-day Rate-Of-Change (ROC) of a Triple Smooth EMA (Momentum Indicators)",["timeperiod","30"]],"TSF":["Time Series Forecast (Statistic Functions)",["timeperiod","14"]],"ULTOSC":["Ultimate Oscillator (Momentum Indicators)",["timeperiod1","7"],["timeperiod2","14"],["timeperiod3","28"]],"VAR":["Variance (Statistic Functions)",["timeperiod","5"],["nbdev","1"]],"WILLR":["Williams' %R (Momentum Indicators)",["timeperiod","14"]],"WMA":["Weighted Moving Average (Overlap Studies)",["timeperiod","30"]]};quanto_data.nb_preview_url="https://notebooks-preview.prd.pub.quantopian.com";quanto_data.delay_nb_preview_load=false;
//]]>
</script>
<meta content='https://www.quantopian.com/posts/quantpedia-trading-strategy-series-reversals-in-the-pead' property='og:url'>
<meta content='Quantpedia Trading Strategy Series: Reversals in the PEAD' property='og:title'>

<input type="hidden" name="env" id="quanto-env" value="production" />
<meta content='550580758292093' property='fb:app_id'>
<meta content='https://www.quantopian.com/posts/quantpedia-trading-strategy-series-reversals-in-the-pead' property='og:url'>
<meta content='https://media.quantopian.com/public/og-image-default.png' property='og:image'>
<meta content='Quantpedia Trading Strategy Series: Reversals in the PEAD' property='og:title'>
<meta content='In his white paper  &quot;Overreacting to a History of Underreaction&quot; , Milian explores the possibility that well known cross sectional anomalies can reverse over time. Specifically, he investigates the reversal of the  PEAD  effect. He finds that contrary to previous research,  stocks with the most negative previous earnings surprise actually exhibit the most positive returns following the subsequent earnings announcement.  This can be attributed to the idea that investors know they typically...' property='og:description'>
</head>
<script type='application/ld+json'>
  {
    "@context": "http://schema.org",
    "@type": "Organization",
    "url": "https://www.quantopian.com",
    "logo": "https://media.quantopian.com/logos/logo-q-press-red.png"
  }
</script>
<body class='' ontouchstart=''>
<div id='fb-root'></div>
<div class='wrapper'>
<div class='alert-v2 error'>
<div class='message'>
Quantopian's community platform is shutting down. Please read <a href="/posts/quantopians-community-services-are-closing">this post</a> for more information and <a href='/account#account'>download your code</a>.
</div>
</div>
<div class='navbar navbar-default navbar-static-top' id='app-navbar'>
<div class='container-fluid'>
<div class='navbar-header'>
<button class='navbar-toggle collapsed' data-target='#app-navbar-collapse' data-toggle='collapse'>
<span class='icon hamburger-menu'></span>
</button>
<a class='navbar-brand' href='/home'>
<img class='logo-image async-image' data-src='external/logo-q-white-b141ea6018546e5a4ecc3d10d8440ec076fc4385764e948b322828cc70950a76.svg'>
</a>
</div>
<div class='collapse navbar-collapse' id='app-navbar-collapse'>
<ul class='nav navbar-nav navbar-right'>
<li class='dropdown quanto-dropdown-new'>
<li>
<a class='header' href='/docs'>
Documentation
</a>
</li>
<li class='dropdown quanto-dropdown-new'>
<a class='header' data-toggle='dropdown' href='#'>
Learn
</a>
<ul class='dropdown-menu'>
<li>
<a class='mixpanel-button' data-event='main nav getting started clicked' href='/tutorials/getting-started'>Getting Started</a>
</li>
<li>
<a class='mixpanel-button' data-event='main nav tutorials clicked' href='/tutorials'>Tutorials</a>
</li>
<li>
<a class='mixpanel-button' data-event='main nav lectures clicked' href='/lectures'>Lectures</a>
</li>
</ul>
</li>
<li>
<a class='header' href='/posts' id='forum-link'>
Forum
</a>
</li>
<li>
<a class="header" href="/signin?return_to=/posts/quantpedia-trading-strategy-series-reversals-in-the-pead">Log In</a>
</li>
</li>

</ul>
</div>
</div>
</div>
<script>
  $(document).ready(function () {
    quanto.instances.fm = new quanto.FeedbackManager();
    quanto.instances.hm = new quanto.headerManager();
  })
</script>


<div class='content content-area new-style'>
<input type="hidden" name="page-id" id="page-id" value="postatomic" />
<script src="external/MathJax.js?config=TeX-AMS_HTML-full.js,Safe" async="async"></script>
<div class='container page-container post-atomic'>
<input id='parent-post-id-val' type='hidden' value='58124cef05aeba98260001dc'>
<div class='post-container' data-post-id='58124cef05aeba98260001dc' id='58124cef05aeba98260001dc'>
<div class='back-button back-to-community'>Back to Community</div>
<div class='post-title'>Quantpedia Trading Strategy Series: Reversals in the PEAD</div>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57daf0f6689a0185340002bf'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/cb622a6410d43f030f28355519ef3d01?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57daf0f6689a0185340002bf'>Matthew Lee</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<span class='posted-at'>edited </span>
<span UTCms='1477594649000' class='quanto-date posted-at'></span>
<div class='pull-right other-actions'>
<div class='dropup inline-block'>
<div class='dropdown share-control other-action-link'>
<div data-toggle='dropdown'>
<div class='share-image'></div>
Share
</div>
<ul class='dropdown-menu share-options-menu'>
<li>
<a class='share-row' href='https://twitter.com/intent/tweet?text=Quantpedia Trading Strategy Series: Reversals in the PEAD&amp;url=https%3A%2F%2Fwww.quantopian.com%2Fposts%2Fquantpedia-trading-strategy-series-reversals-in-the-pead%3Futm_source%3Dwebsite_share%26utm_campaign%3Dquantpedia-trading-strategy-series-reversals-in-the-pead%26utm_medium%3Dtwitter&amp;via=quantopian'>
<i class='icon icon-twitter'></i>
Share on Twitter
</a>
</li>
<li>
<div class='share-row facebook-button'>
<i class='icon icon-facebook'></i>
Share on Facebook
</div>
</li>
<li>
<div class='share-row linkedin-button' data-share-url='https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Fwww.quantopian.com%2Fposts%2Fquantpedia-trading-strategy-series-reversals-in-the-pead%3Futm_source%3Dwebsite_share%26utm_campaign%3Dquantpedia-trading-strategy-series-reversals-in-the-pead%26utm_medium%3Dlinkedin&amp;title=Quantpedia+Trading+Strategy+Series%3A+Reversals+in+the+PEAD+%28Matthew+Lee%29&amp;source=Quantopian'>
<i class='icon icon-linkedin'></i>
Share on LinkedIn
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>

<div class='tags tag-row'>
<a class='tag mixpanel-button' data-event='tag click' data-mixpanel='Papers' data-tag-id='55c50e7d8d4710ec6e000007' href='/posts/tag/Papers/newest'>Papers</a>
<a class='tag mixpanel-button' data-event='tag click' data-mixpanel='Using Data' data-tag-id='55c50e7d8d4710ec6e000008' href='/posts/tag/Using-Data/newest'>Using Data</a>
<a class='tag mixpanel-button' data-event='tag click' data-mixpanel='Show Q' data-tag-id='55c50e7d8d4710ec6e000010' href='/posts/tag/Show-Q/newest'>Show Q</a>
<a class='tag mixpanel-button' data-event='tag click' data-mixpanel='Research' data-tag-id='55c50e7d8d4710ec6e000018' href='/posts/tag/Research/newest'>Research</a>
</div>
<input type="hidden" name="social_fb_post_link" id="social_fb_post_link" value="https://www.quantopian.com/posts/quantpedia-trading-strategy-series-reversals-in-the-pead?utm_source=website_share&amp;utm_campaign=quantpedia-trading-strategy-series-reversals-in-the-pead&amp;utm_medium=facebook" />
<input type="hidden" name="social_post_image" id="social_post_image" value="external/logo-q-red-outline.png" />
<input type="hidden" name="social_post_author" id="social_post_author" value="Matthew Lee" />
<div class='body-text'>
<div class='body-text-container post-body'><p>In his white paper <a href="https://www.aeaweb.org/conference/2014/retrieve.php?pdfid=731">&quot;Overreacting to a History of Underreaction&quot;</a>, Milian explores the possibility that well known cross sectional anomalies can reverse over time. Specifically, he investigates the reversal of the <a href="https://en.wikipedia.org/wiki/Post-earnings-announcement_drift">PEAD</a> effect. He finds that contrary to previous research,  stocks with the most negative previous earnings surprise actually exhibit the most positive returns following the subsequent earnings announcement. </p>

<p>This can be attributed to the idea that investors know they typically underreact to earnings announcement news (the underlying explanation for the PEAD). Thus, by compensating for their underreaction, they overreact to substantial surprises in earnings announcement news, positioning themselves in alignment with the expectation of the PEAD effect. When the next earnings announcement comes, the overcrowding of investors pushes the market beyond efficient, resulting in the correction of investor sentiment and a negative correlation for firm&#39;s earnings news in the following days. </p>

<p><a href="http://quantpedia.com">Quantpedia</a> summarizes the article&#39;s possible explanation for the PEAD reversal:</p>

<blockquote>
<p>The paper speculates that it seems that due to their well-documented history of apparently underreacting to earnings news, investors are now overreacting to earnings announcement news. However classical PEAD (post-earnings announcement drift) literature examines mainly quarterly portfolio returns while this academic paper focuses on 2-days retun therefore it is probable that PEAD still holds and both anomalies exists concurrently.</p>
</blockquote>

<p><strong>OOS Study Results</strong><br>
I conducted a similar study examining the reversal in the PEAD, over a sample period from 2011 - 2016 (compared to the Milian&#39;s 2003 - 2010). Overall, I found my results to be consistent with Milian&#39;s results, when considering a hold period of 9 days following the Earnings Announcement, rather than 2. </p>

<p>I found that firms in the highest decile of past earnings surprise underperform stocks in the lowest decile by -1.78% over a hold period of 10 days (compared to -1.59% over a hold period of 3 days found in the paper).</p>

<p><strong>Trading Strategy Details</strong><br>
1. Each day, pick stocks in the Q500US which have Earnings Announcements the next day<br>
2. Go short on stocks in the highest decile of previous earnings surprise, long on stocks in the lowest decile of previous earnings surprise<br>
3. Hold for a period of 10 days, then close the position</p>

<p><em>N.B.: As a result of parameter optimization, this strategy may be overfit.</em></p>

<p>Attached is the whitepaper walkthrough and OOS validation of the original study (Hit &quot;Clone Notebook&quot; to see a complete analysis). The backtest and backtest analysis are attached to the thread below.</p>

<p><strong>FAQ</strong></p>

<p><code>What is the Quantpedia Trading Strategy Series?</code></p>

<p><a href="http://quantpedia.com">Quantpedia</a> is an online resource for discovering trading strategies and we’ve teamed up with them to bring you interactive and high quality trading strategy examples based off financial research. Our goal is that you’re able to replicate the process we’ve used here for your own research and backtesting.</p>

<p><code>Where can I find more trading strategy ideas?</code></p>

<p>You can find the <a href="https://www.quantopian.com/posts/pipeline-factor-library-for-data">full Quantpedia Series</a> here along with other research. Other than that, you can browse <a href="http://quantpedia.com">Quantpedia’s strategies</a> or look through our forums for ideas posted by community members. Want to feature your own? Submit your proposal to SLEE @ quantopian.com</p>

<p><code>I can only run the backtest till 2014, why is that?</code></p>

<p>This algorithm uses <a href="https://www.quantopian.com/data/eventvestor/earnings_calendar">EventVestor&#39;s Earnings Calendar</a> and <a href="https://www.quantopian.com/data/zacks/earnings_surprises">Zack&#39;s Earnings Surprises</a> dataset to time earnings announcements and measure earnings surprises, which are both premium datasets. </p>
</div>
</div>
<div class='disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>

</div>

<div class='container page-container post-atomic'>
<div class='section-header reply-header'>
<div class='reply-title'>38 responses</div>
</div>
<div class='replies'>
<div class='post-container response-container' data-post-id='58124d53b6daf4c5e500003c' id='58124d53b6daf4c5e500003c'>
<a href='#58124d53b6daf4c5e500003c'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57daf0f6689a0185340002bf'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/cb622a6410d43f030f28355519ef3d01?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57daf0f6689a0185340002bf'>Matthew Lee</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1477594460000' class='quanto-date posted-at response-posted-at' href='#58124d53b6daf4c5e500003c'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p><code>PEAD Reversal Rolling Rebalance</code></p>

<p><strong>Logic:</strong><br>
1. Each day, run a pipeline for stocks in the Q500, selecting the top decile of previous earnings surprise (shorts), and lowest decile of previous earnings surprise (longs)<br>
2. Increment the hold times for each stock held in the portfolio, only keeping stocks for which the hold time &lt; <code>context.days_to_hold</code><br>
3. Open new long/short positions for stocks generated by the pipeline, equally distributing the portfolio between all long/shorts currently held (70/30)<br>
4. Close positions for stocks which have been held for &gt; <code>context.days_to_hold</code></p>

<p><strong>Summary:</strong><br>
This algorithm is an implementation of the above strategy, leveraging the PEAD reversal found after earnings announcements<br>
Note that this algorithm uses the <code>LagESurp</code> indicator generated by the Zacks Earnings Surprise dataset, rather than the stronger <code>LagEaRet</code> indicator</p>

<p><strong>EDIT:</strong> This backtest was generated using the premium portion of the EventVestor&#39;s Earnings Calendar and Zack&#39;s Earnings Surprises datasets. To clone a backtest generated using the free portion of these datasets, click <a href="https://www.quantopian.com/posts/quantpedia-trading-strategy-series-reversals-in-the-pead#594036bcd7315c0010357ada">here</a>.</p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='581252c3aa385664fa000010' id='581252c3aa385664fa000010'>
<a href='#581252c3aa385664fa000010'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57daf0f6689a0185340002bf'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/cb622a6410d43f030f28355519ef3d01?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57daf0f6689a0185340002bf'>Matthew Lee</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1477595850000' class='quanto-date posted-at response-posted-at' href='#581252c3aa385664fa000010'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Pyfolio tearsheet of above algorithm  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='5812ea7511a804ee430002e6' id='5812ea7511a804ee430002e6'>
<a href='#5812ea7511a804ee430002e6'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56406b03491ea6ba6400026e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/feb4cbf34749af2eb518ca1110c1a4e3?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56406b03491ea6ba6400026e'>Thomas Chang</a>
</div>
<a UTCms='1477634688000' class='quanto-date posted-at response-posted-at' href='#5812ea7511a804ee430002e6'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I cloned this algo. As I run the back testing, I got error. Seems I have to buy the datas?</p>

<p>Thomas.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5812ee7dfd25d2d1bd0002ac' id='5812ee7dfd25d2d1bd0002ac'>
<a href='#5812ee7dfd25d2d1bd0002ac'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57daf0f6689a0185340002bf'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/cb622a6410d43f030f28355519ef3d01?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57daf0f6689a0185340002bf'>Matthew Lee</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1477635718000' class='quanto-date posted-at response-posted-at' href='#5812ee7dfd25d2d1bd0002ac'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Thomas, </p>

<p>This algorithm uses the <a href="https://www.quantopian.com/data/eventvestor/earnings_calendar">EventVestor Earnings Calendar</a> and <a href="https://www.quantopian.com/data/zacks/earnings_surprises">Zack&#39;s Earnings Surprise</a> data sets which are free from 27 May 2006 - 30 Jul 2016 to 01 Jan 2007 - 28 Oct 2014 respectively. If you wanted to run this backtest yourself, you should run it within those dates.</p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='58130a57832161d9db000134' id='58130a57832161d9db000134'>
<a href='#58130a57832161d9db000134'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56406b03491ea6ba6400026e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/feb4cbf34749af2eb518ca1110c1a4e3?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56406b03491ea6ba6400026e'>Thomas Chang</a>
</div>
<a UTCms='1477642849000' class='quanto-date posted-at response-posted-at' href='#58130a57832161d9db000134'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Ok, this means &#39;no money no talk&#39;. :-)</p>

<p>Many thanks!  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5813c9159407cbeeae0001b3' id='5813c9159407cbeeae0001b3'>
<a href='#5813c9159407cbeeae0001b3'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5669e14376242e50ed00028e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/cd0d17865613681b37aacd67a5066a60?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5669e14376242e50ed00028e'>Photi</a>
</div>
<a UTCms='1477691676000' class='quanto-date posted-at response-posted-at' href='#5813c9159407cbeeae0001b3'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Matthew</p>

<p>Many thanks for this, very interesting stuff.<br>
I cloned your Notebook and tried to run but i get a whole bunch of errors as per screenshot</p>

<p><a href="http://i.imgur.com/xwtE7i5.png">http://i.imgur.com/xwtE7i5.png</a></p>

<p>Would you know what the issue is?</p>

<p>Thnx  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='581c5916fbf7f72273000057' id='581c5916fbf7f72273000057'>
<a href='#581c5916fbf7f72273000057'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5669e14376242e50ed00028e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/cd0d17865613681b37aacd67a5066a60?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5669e14376242e50ed00028e'>Photi</a>
</div>
<a UTCms='1478252828000' class='quanto-date posted-at response-posted-at' href='#581c5916fbf7f72273000057'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Matthew,</p>

<p>Any news on the above errors?</p>

<p>Has anyone been able to run Matthew&#39;s notebook? I get errors as per above.</p>

<p>Thanks  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='581ca2a632ee9ebe93000176' id='581ca2a632ee9ebe93000176'>
<a href='#581ca2a632ee9ebe93000176'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57daf0f6689a0185340002bf'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/cb622a6410d43f030f28355519ef3d01?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57daf0f6689a0185340002bf'>Matthew Lee</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1478271660000' class='quanto-date posted-at response-posted-at' href='#581ca2a632ee9ebe93000176'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Photi,</p>

<p>Can you post the uncropped error message which you are receiving? We are aware of an issue with the Earnings Calendar dataset, and we&#39;re working quickly on a solution. </p>

<p>Thanks<br>
Matt  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='581df7e526430ff00c0015da' id='581df7e526430ff00c0015da'>
<a href='#581df7e526430ff00c0015da'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/530d070880db6d0b05000037'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/c4af5270466193081610aa204304e1f0?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/530d070880db6d0b05000037'>James Long</a>
</div>
<a UTCms='1478359019000' class='quanto-date posted-at response-posted-at' href='#581df7e526430ff00c0015da'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>This is the full error I receive.</p>

<pre><code>&lt;error removed&gt;  
</code></pre>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='581dfb0a20083088d500163a' id='581dfb0a20083088d500163a'>
<a href='#581dfb0a20083088d500163a'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5669e14376242e50ed00028e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/cd0d17865613681b37aacd67a5066a60?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5669e14376242e50ed00028e'>Photi</a>
</div>
<a UTCms='1478359825000' class='quanto-date posted-at response-posted-at' href='#581dfb0a20083088d500163a'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Yup i get same error.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='581f6c3136c70500120003f9' id='581f6c3136c70500120003f9'>
<a href='#581f6c3136c70500120003f9'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57f855c741abf37cec0003d1'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/427583d390c6beb0872f5128fdedd1e0?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57f855c741abf37cec0003d1'>Mike Ba</a>
</div>
<a UTCms='1478454329000' class='quanto-date posted-at response-posted-at' href='#581f6c3136c70500120003f9'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I also get an error.  I spot checked the error above against mine and it appears to be slightly different, so I&#39;m including it in a post here.<br>
So when running this:  </p>

<pre><code>start = pd.Timestamp(&quot;1-05-2011&quot;)  
end = pd.Timestamp(&quot;09-25-2016&quot;)  
stock_data = create_data(Q500US(), start, end, 12)  
</code></pre>

<p>I&#39;m getting the following error, which is isolated to the create_data method:</p>

<pre><code>&lt;error removed&gt;  
</code></pre>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5820ae38acc48a0012000061' id='5820ae38acc48a0012000061'>
<a href='#5820ae38acc48a0012000061'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57daf0f6689a0185340002bf'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/cb622a6410d43f030f28355519ef3d01?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57daf0f6689a0185340002bf'>Matthew Lee</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1478536767000' class='quanto-date posted-at response-posted-at' href='#5820ae38acc48a0012000061'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi all, </p>

<p>Thanks for the comments. The error is a result of a bug with the earnings calendar dataset, and our team is quickly working on the solution. Once the fix is shipped the code in the notebook/algorithm should run fine.  </p>

<p>Matt  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='5826353c9a1a65001600012b' id='5826353c9a1a65001600012b'>
<a href='#5826353c9a1a65001600012b'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/55eefc2af269c592d80008a9'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/8985b490c95e135c2bbcd7d1a0dce16b?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/55eefc2af269c592d80008a9'>Jamie McCorriston</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1478899027000' class='quanto-date posted-at response-posted-at' href='#5826353c9a1a65001600012b'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hey guys,</p>

<p>The problem with the earnings calendar dataset has been fixed. You should now be able to run the notebooks/backtests using earnings calendar data. Sorry for the trouble.  </p>
</div>
<div class='disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='58355ed21f100a45520000f5' id='58355ed21f100a45520000f5'>
<a href='#58355ed21f100a45520000f5'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5682446527af77960b000042'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/d77348b5d3939cbad8d7cb590b4acdfa?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5682446527af77960b000042'>ruocong zhang</a>
</div>
<a UTCms='1479892698000' class='quanto-date posted-at response-posted-at' href='#58355ed21f100a45520000f5'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hello Matt,</p>

<p>Would you please explain about why writing <strong>&#39;context.MAX_IN_ONE&#39;</strong> in the &#39;order_target_percent()&#39; function in line 79 and 84 of the code ?<br>
Thanks in advance:)  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='583890f287fc900a43000250' id='583890f287fc900a43000250'>
<a href='#583890f287fc900a43000250'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57d8e59777a302dae50009b4'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/7f0b038bd2696dbb603b95035c697d9e?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57d8e59777a302dae50009b4'>Takis Mercouris</a>
</div>
<a UTCms='1480102138000' class='quanto-date posted-at response-posted-at' href='#583890f287fc900a43000250'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hey Matt,</p>

<p>Thanks for posting your analysis -- very cool.</p>

<p>Can you please explain why you started your analysis &amp; backtesting in 2011 and didn&#39;t go back to e.g. 2008?  Also, did you experiment with various long/short ratios at all?</p>

<p>Thanks,<br>
Takis  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='583f140e2f72bc00150003c1' id='583f140e2f72bc00150003c1'>
<a href='#583f140e2f72bc00150003c1'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57daf0f6689a0185340002bf'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/cb622a6410d43f030f28355519ef3d01?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57daf0f6689a0185340002bf'>Matthew Lee</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1480528922000' class='quanto-date posted-at response-posted-at' href='#583f140e2f72bc00150003c1'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Ruocong, </p>

<p>Currently, the <code>context.MAX_IN_ONE</code> variable is not utilized (since its value is 1). This variable is modifiable so you can set a threshold of the max % of your portfolio to be allocated in one stock.</p>

<p>Takis,</p>

<p>I was interested in doing a purely out of sample test. Since the original paper covered 2003-2010, I chose to start my tests in 2011. However, you can easily modify the algorithm/notebook to test back to 2008.</p>

<p>I found that most of my returns were stemming from the long portion of the strategy (hence the 70/30 split). The strategy remains profitable at a 50/50 long short split as well.  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='583f73292f72bc0012000ad3' id='583f73292f72bc0012000ad3'>
<a href='#583f73292f72bc0012000ad3'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/554e4a8c3173e6978f0002e7'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/01664c4739c3dac7068c8551e5c9d6eb?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/554e4a8c3173e6978f0002e7'>Sofyan Saputra</a>
</div>
<a UTCms='1480553263000' class='quanto-date posted-at response-posted-at' href='#583f73292f72bc0012000ad3'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I wonder if this algorithm is significantly overfitted. I ran the algo on Q1500 from 10/6/2013 to 10/26/2014 to capture approximately 4 earnings seasons. The results were less than spectacular.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='583ff9795ae42f7d13000205' id='583ff9795ae42f7d13000205'>
<a href='#583ff9795ae42f7d13000205'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57adfff39c39de124a0003c4'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/79ce2198c64d3fb629e456d791aedc8f?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57adfff39c39de124a0003c4'>Quoc Le</a>
</div>
<a UTCms='1480587649000' class='quanto-date posted-at response-posted-at' href='#583ff9795ae42f7d13000205'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Sofyan Saputra   - The issue with Q1500 is there are 1500 stocks vs Q500 500 stocks (higher caps, less volatility).   Q1500 puts have too many positions, and have too much volatility.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='583ffa4588bcc9001500125d' id='583ffa4588bcc9001500125d'>
<a href='#583ffa4588bcc9001500125d'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57adfff39c39de124a0003c4'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/79ce2198c64d3fb629e456d791aedc8f?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57adfff39c39de124a0003c4'>Quoc Le</a>
</div>
<a UTCms='1480587854000' class='quanto-date posted-at response-posted-at' href='#583ffa4588bcc9001500125d'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Matthew- Thanks for building the algo. It&#39;s very good quality and easy to understand. I made few minor tweaks.  For one , I found 4 days did much better than 6 days. (what are your thoughts on this) . I also ended subscribing to the full dataset $25 - good price to me.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58418bbf2566e72d7d000477' id='58418bbf2566e72d7d000477'>
<a href='#58418bbf2566e72d7d000477'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57daf0f6689a0185340002bf'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/cb622a6410d43f030f28355519ef3d01?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57daf0f6689a0185340002bf'>Matthew Lee</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1480690638000' class='quanto-date posted-at response-posted-at' href='#58418bbf2566e72d7d000477'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p><strong>Sofyan,</strong></p>

<p>To some extent, this strategy is overfit as I factored in past performance for picking the hold times and long/short ratio for the strategy. The original paper suggested trading stocks with active options trading - I used the Q500 as a proxy since there is currently no options data available on Quantopian. Thus, I can&#39;t speak for the validity of the strategy for different universes of stock selections. </p>

<p><strong>Quoc,</strong></p>

<p>Thanks! A hold time of 4 days for backtesting could definitely perform better than a 6 day hold strategy. Note that in my notebook, I picked my hold time based off cumulative average returns for each stock (not overall returns for the strategy). So, it&#39;s very possible that a 4 day hold period leads to higher backtest results. Imagine the scenario where you are able to purchase a larger portfolio % of a high returning stock <code>S</code> on a day <code>x + 4</code>, because you sold other stocks on day <code>x</code>. If your hold time were 6 days, you would not be able to purchase as much stock <code>S</code>, and your overall returns would be lower.  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='5841bf123c42846ef500012c' id='5841bf123c42846ef500012c'>
<a href='#5841bf123c42846ef500012c'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56e76dce4cbd8cc4a600033d'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/8434ff9cfbd78fcaa6e09be520a40920?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56e76dce4cbd8cc4a600033d'>Justin Torgerson</a>
</div>
<a UTCms='1480703772000' class='quanto-date posted-at response-posted-at' href='#5841bf123c42846ef500012c'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Matthew,</p>

<p>This is a great example and I&#39;m working through the code to understand some of the details. </p>

<p>One place of confusion for me is in create_deciles_pipeline() which calculated &#39;LagEaSurp Decile&#39; and later in create_data() where &#39;LagEaSurp Decile&#39; is again calculated. Is there a problem with calculating the decile in the create_deciles_pipeline() code or is this due to so some other factor? </p>

<p>It appears that there are two data sets, stock_data and decile_data that may or may not contain the same securities. Can you comment on this?</p>

<p>Thanks,<br>
Justin  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5843843f4977110012000382' id='5843843f4977110012000382'>
<a href='#5843843f4977110012000382'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/554e4a8c3173e6978f0002e7'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/01664c4739c3dac7068c8551e5c9d6eb?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/554e4a8c3173e6978f0002e7'>Sofyan Saputra</a>
</div>
<a UTCms='1480819782000' class='quanto-date posted-at response-posted-at' href='#5843843f4977110012000382'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hey Matt,</p>

<p>Thanks for the response. I&#39;ve been spending a good amount of time looking at methods to exploit trends in earnings reports. This strategy seems to have produced some of the best results I have seen so far.</p>

<p>However, in an actual brokerage, it&#39;s costly to do re-balancing frequently because doing so would rack up a lot of slippage and commissions. In your algo, we are rebalancing for each of the many stocks during the course of their 6 day lifespans. So I was looking to do a version of this algorithm which holds the stocks the day before the earnings (2 hours before market close of earnings day) and then exits all of the stocks before opening the next set of new positions (3 hours before market close). This allows us to have the capital to constantly trade earnings without rebalancing a bunch of shares every day. The holding time is only one day, but I assumed this would be enough to capture the earnings move. However, the results are nowhere near as good, even if I use the Q500. See attached backtest.</p>

<p>As a result, I am wondering whether the daily rebalancing is essentially causing a Martingale effect. Whenever the algo incorrectly picks the earnings, the rebalance will add to the position to keep the ratio. So in the course of 6 days, adding to a position repeatedly as it&#39;s losing, decreases the cost basis. Since the algo picks significantly more longs, the fact that we were in a bull market means martingaling when a stock is going down will be extremely profitable.</p>

<p>So a few things:<br>
1. Is the algo benefiting heavily from the bull market environment that we have been in and may not hold in the future? Is this martingale-like effect, the reason why a 1 day hold without a rebalance the next day and a wider array of stocks (Q1500) that weren&#39;t as bullish as the large cap are significantly less effective?<br>
2. Is there some other way to effectively utilize this strategy without doing more than an opening and closing trade per stock per earnings report? I&#39;m interested in testing it out in a real environment or at least IB paper to see if it actually works. However, for a reasonable amount of money invested in this strategy (e.g. 30K), repeatedly trading one or two shares of many individual stock to do a rebalance, doesn&#39;t really make sense.<br>
3. 500% in several years is absolutely insane. I apologize for the skepticism, but if this strategy is real and consistent, wouldn&#39;t everyone be clamoring to live trade it or is there some caveat that makes this much less effective in real life?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5846d89ce9e5d50012000b0e' id='5846d89ce9e5d50012000b0e'>
<a href='#5846d89ce9e5d50012000b0e'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57daf0f6689a0185340002bf'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/cb622a6410d43f030f28355519ef3d01?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57daf0f6689a0185340002bf'>Matthew Lee</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1481037991000' class='quanto-date posted-at response-posted-at' href='#5846d89ce9e5d50012000b0e'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Justin, </p>

<p>Great question. The problem with computing the deciles purely in pipeline is that the deciles are recomputed every day. Thus, you have a rolling decile computation (which is not what we want). Instead, I use the decile data computed on the first day of each quarter, and the create_data function computes the decile for each quarter in our time period so our deciles our constant throughout each quarter.</p>

<p>In the actual algorithm, I simplify things by just using the pipeline decile computation at each month. In the notebook however, I try to match the original paper&#39;s approach as accurately as possible. </p>

<p>Sofyan,</p>

<p>It&#39;s my intuition that the viability of exiting positions after one day of holding is heavily influenced by the outcome of the actual earnings announcement. In this strategy, we don&#39;t care about the result of the upcoming earnings report (we just happen to know that the PEAD effect is most pronounced during the days following the subsequent earnings announcement, so the reversal will yield the most returns in this period). So, exiting trades on the day/day after of the earnings report is likely a substantially different strategy.</p>

<p>I would recommend checking out the holding time variations graph in my notebook to see my findings on holding periods.If you wanted to make a more market neutral strategy, you could balance the long/shorts at 50/50. </p>

<p>If you wanted to forego the rebalancing, I&#39;d recommend sticking to a hold period of more than a couple days, but tweaking the algorithm to maintain a constant position in all stocks it enters (up to a certain cap).</p>

<p>The key here is that <code>past returns are not indicative of future performance</code>. Clearly, this strategy has performed well in the past couple years. In order to make it a real trading strategy, there is much more analysis to be done and edge cases to handle for actual live trading.  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='5846edb106ab2a1dcb00001e' id='5846edb106ab2a1dcb00001e'>
<a href='#5846edb106ab2a1dcb00001e'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57daf0f6689a0185340002bf'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/cb622a6410d43f030f28355519ef3d01?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57daf0f6689a0185340002bf'>Matthew Lee</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1481043384000' class='quanto-date posted-at response-posted-at' href='#5846edb106ab2a1dcb00001e'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Also - for anyone interested, here are the results of the backtest for a 2 day hold period  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='5847acb9b537f84ac6000005' id='5847acb9b537f84ac6000005'>
<a href='#5847acb9b537f84ac6000005'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/554e4a8c3173e6978f0002e7'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/01664c4739c3dac7068c8551e5c9d6eb?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/554e4a8c3173e6978f0002e7'>Sofyan Saputra</a>
</div>
<a UTCms='1481092286000' class='quanto-date posted-at response-posted-at' href='#5847acb9b537f84ac6000005'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I created a version of the algo which forgoes the rebalancing. It has a holding period of two days and it determines the amount per trade by dividing the amount of capital by the number of total earnings that meet our criteria in the next two business days. It will never put more than 20% of the portfolio into a single trade. From the leverage variable plotted, the method seems to do a good job of using a leverage of approximately 1 when there are a lot of earnings reports and less leverage with fewer earnings reports. However, I can&#39;t seem to replicate the insane results without doing the rebalancing.</p>

<p>I think a reason for this might be because with the portfolio allotment method, you are going all-in on a single stock when there are no earnings reports. This is visible from the position variable I plotted, which shows for certain weeks there is only 1 company that meet our requirements. A version of the algo without the rebalancing won&#39;t benefit from these all-ins, which seems to have been very profitable in the past, but risky going forward.</p>

<p>What&#39;s unusual is that the results are not a clear upward profit chart like yours despite having the exact same methodology for entering stocks. Did I make a silly mistake in how I implemented the algo without rebalancing or is there no way to replicate the success of the original algo without the rebalancing and going all in on a single stock during earnings off-season?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='584841ca4d185b00120001f9' id='584841ca4d185b00120001f9'>
<a href='#584841ca4d185b00120001f9'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/58470fe69718524d9200009e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f950fb896dda68d90d9aa6b45d303437?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/58470fe69718524d9200009e'>Deleted User</a>
</div>
<a UTCms='1481130450000' class='quanto-date posted-at response-posted-at' href='#584841ca4d185b00120001f9'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>First post around here :) So you&#39;re fully Amateur warned...This is a very interesting community, glad I found it.</p>

<p>Sofyan, I saw your concerns, so I created some custom data to follow Matt&#39;s original algorithm, and also limited MAX_IN_ONE to 0.2. Using the free test period, this tweaked algorithm (still with 70% long, 30% short, 6 day hold) results in <strong>117% return vs Matt&#39;s more risky 100% allowed in one stock which returned 380%</strong> for the same time frame (backtest results <strong>not</strong> shown).</p>

<p>In Matt&#39;s rebalancing approach with max hold of 2 days, effectively if you started one day with one stock, and the next day expanded into two, you would have 1/2 position owned for one day, 1/2 position for 2 days. This seems to agree with Matt&#39;s results that 2 days provided better returns than 1 day. In theory (assuming correct implementation), a hold time of 1 day on the originally coded algorithm has <strong>effectively no rebalancing. This provides a return of 154% compared to Matt&#39;s original of 380% for the same time frame. This is the backtest shown below.</strong></p>

<p>Even for the 1 year of testing you did above, tuned to 1 day of hold and 20% max per security performs better than your results (returning 92% vs SPY 22%). This would likely suggest a bug or two somewhere in your implementation.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='584a0b8b91e07d27fa00040a' id='584a0b8b91e07d27fa00040a'>
<a href='#584a0b8b91e07d27fa00040a'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/554e4a8c3173e6978f0002e7'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/01664c4739c3dac7068c8551e5c9d6eb?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/554e4a8c3173e6978f0002e7'>Sofyan Saputra</a>
</div>
<a UTCms='1481247634000' class='quanto-date posted-at response-posted-at' href='#584a0b8b91e07d27fa00040a'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thanks for the insights Jeff. </p>

<p>The reason, my one day results are different is because immediately after the earnings report, I drop my positions and reopen new ones at market open. This is visible in my schedule functions. Whereas with the original algorithm. if you look at the transaction history, even if &quot;context.DAYS_TO_HOLD = 1&quot;, you see multiday transactions. Check out the transaction history of the DAYS_TO_HOLD = 1, you will notice stocks are being held and rebalanced for a whole day before it is let go 2 business days later. It appears DAYS_TO_HOLD needs to be 0 to truly match just holding through the earnings report without rebalancing. </p>

<p>The results are closer when DAYS_TO_HOLD = 0, but I&#39;m also not setting a limit or ratio to the number of longs or shorts I want in my portfolio; instead, I position equally in all positions that meet the requirement. So if there are 10 shorts and 2 longs that meet the LagESurp top/bottom decile requirement, I will invest equally into each stock based off my available capital without regard for portfolio long/short ratio. </p>

<p>Additionally, what I&#39;m seeing with the original algo when it&#39;s at DAY_TO_HOLD &gt; 0 and doing rebalancing, is that it is often changing a significant amount of shares to the position right after the earnings report. For example, see this <a href="http://imgur.com/a/zZsrF">AMT trade</a>. Perhaps this combination of making sure your portfolio is at a specific ratio and adding to a position after the earnings report is what is multiplying the profits to this strategy.</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='584a0e21cf887d00150011a0' id='584a0e21cf887d00150011a0'>
<a href='#584a0e21cf887d00150011a0'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57adfff39c39de124a0003c4'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/79ce2198c64d3fb629e456d791aedc8f?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57adfff39c39de124a0003c4'>Quoc Le</a>
</div>
<a UTCms='1481248299000' class='quanto-date posted-at response-posted-at' href='#584a0e21cf887d00150011a0'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Big props to Matthew for covering this strategy.  Ernie Chan just picked it up on his blog a few weeks after Matt did. </p>

<p><a href="http://epchan.blogspot.com/2016/11/pre-earnings-annoucement-strategies.html">http://epchan.blogspot.com/2016/11/pre-earnings-annoucement-strategies.html</a>  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5883004d87ecff218f868c4f' id='5883004d87ecff218f868c4f'>
<a href='#5883004d87ecff218f868c4f'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/571cecf6a5c5baa9f500002e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/46041da1752043608f246f126bedb245?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/571cecf6a5c5baa9f500002e'>Elsid Aliaj</a>
</div>
<a UTCms='1484980301000' class='quanto-date posted-at response-posted-at' href='#5883004d87ecff218f868c4f'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Did something break with this? backtest doesn&#39;t work for current dates, and performance seems off.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5887c0c3617cc246402805ff' id='5887c0c3617cc246402805ff'>
<a href='#5887c0c3617cc246402805ff'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/55eefc2af269c592d80008a9'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/8985b490c95e135c2bbcd7d1a0dce16b?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/55eefc2af269c592d80008a9'>Jamie McCorriston</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1485291715000' class='quanto-date posted-at response-posted-at' href='#5887c0c3617cc246402805ff'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Elsid,</p>

<p>Have you subscribed for the premium version of <a href="https://www.quantopian.com/data/eventvestor/earnings_calendar">EventVestor Earnings Calendar dataset</a>? The free version only runs up until a year ago.</p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='588839b51edc0645cd7bf179' id='588839b51edc0645cd7bf179'>
<a href='#588839b51edc0645cd7bf179'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/571cecf6a5c5baa9f500002e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/46041da1752043608f246f126bedb245?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/571cecf6a5c5baa9f500002e'>Elsid Aliaj</a>
</div>
<a UTCms='1485322677000' class='quanto-date posted-at response-posted-at' href='#588839b51edc0645cd7bf179'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Ohh no I am not, also I ran this backtest further out from 07, and it get&#39;s completely crushed with like 75% DD what&#39;s the point of this algo? Or is this due to not having premium data?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58d19247eb8fef45865d380e' id='58d19247eb8fef45865d380e'>
<a href='#58d19247eb8fef45865d380e'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/586da5ab0c96877426000182'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03b5f10689b842ef0944b0e48b37869c?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/586da5ab0c96877426000182'>Jeremy Muhia</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1490129479000' class='quanto-date posted-at response-posted-at' href='#58d19247eb8fef45865d380e'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Everyone,</p>

<p>I cloned the original algorithm and changed it to utilize the recently released <a href="https://www.quantopian.com/posts/optimize-api-now-available-in-algorithms">Optimize API</a>. Let me know what you think.</p>

<p>This algorithm was updated to make use of the recently introduced <a href="https://www.quantopian.com/posts/optimize-api-now-available-in-algorithms">Optimize API</a>. The trading strategy remained the same. This iteration altered the method that was used to place orders and construct our portfolio. Portfolio construction was done using the order_optimal_portfolio function. We passed in an objective (a dictionary mapping securities to desired weights in the portfolio), and a universe of stocks we were interested in (an iterable of Equity objects). Something I noted is that when using a leverage constraint in order_optimal_portfolio, I had to surround the function with a try except block. This was to avoid a SolverError from the cvxpy module (a module utilized in order_optimal_portfolio). The error only occurred when using a leverage constraint. I&#39;d love to dig into the bug with the help of the community.</p>

<p>-Jeremy</p>
</div>
<div class='disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='594036bcd7315c0010357ada' id='594036bcd7315c0010357ada'>
<a href='#594036bcd7315c0010357ada'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/583340ea732ecc70cc0003cc'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/32705daeb665b5cb5718e37bb2649ace?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/583340ea732ecc70cc0003cc'>Ernesto Perez</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1497380540000' class='quanto-date posted-at response-posted-at' href='#594036bcd7315c0010357ada'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>This is the same version as Jeremy&#39;s, but backtested over the free portion of the EventVestor&#39;s Earnings Calendar and Zack&#39;s Earnings Surprises datasets.  </p>
</div>
<div class='disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='59408d5cacbadf000da9a5d6' id='59408d5cacbadf000da9a5d6'>
<a href='#59408d5cacbadf000da9a5d6'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1497402716000' class='quanto-date posted-at response-posted-at' href='#59408d5cacbadf000da9a5d6'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Here&#39;s the algo with:</p>

<pre><code>    objective = opt.TargetPortfolioWeights(weights)  
    constraints = []

    constraints.append(opt.MaxGrossLeverage(MAX_GROSS_LEVERAGE))  
    constraints.append(opt.DollarNeutral())  
    algo.order_optimal_portfolio(  
        objective=objective,  
        constraints=constraints,  
        universe=universe  
    )  
</code></pre>

<p>Gets it more in line with the contest/Q fund requirements.</p>

<p>It&#39;d be nice if someone were to express the factor in a standard way, so that it could be added to a multi-factor algo (e.g. see <a href="https://www.quantopian.com/posts/quantcon-nyc-2017-advanced-workshop">https://www.quantopian.com/posts/quantcon-nyc-2017-advanced-workshop</a> or <a href="https://www.quantopian.com/posts/long-short-multi-equity-algo">https://www.quantopian.com/posts/long-short-multi-equity-algo</a>).  Feasible?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c53273ebfa95822a8bf43df' id='5c53273ebfa95822a8bf43df'>
<a href='#5c53273ebfa95822a8bf43df'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5a4adfb2b0cabf17d0f573eb'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e0de8aa3fa90f5c22c45f6cf03323dca?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5a4adfb2b0cabf17d0f573eb'>Forever Young</a>
</div>
<a UTCms='1548953406000' class='quanto-date posted-at response-posted-at' href='#5c53273ebfa95822a8bf43df'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>so if LagESurp is the lagged surprise, in real-time trading, how could we get the dataset?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c56d31af425e64adf68fbb3' id='5c56d31af425e64adf68fbb3'>
<a href='#5c56d31af425e64adf68fbb3'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56406b03491ea6ba6400026e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/feb4cbf34749af2eb518ca1110c1a4e3?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56406b03491ea6ba6400026e'>Thomas Chang</a>
</div>
<a UTCms='1549194010000' class='quanto-date posted-at response-posted-at' href='#5c56d31af425e64adf68fbb3'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>As I ran the Ernesto&#39;s update version, the RETURN I got is much lower (see my backtesting). Why?</p>

<p><a href="https://www.quantopian.com/posts/quantpedia-trading-strategy-series-reversals-in-the-pead#594036bcd7315c0010357ada" rel="nofollow">https://www.quantopian.com/posts/quantpedia-trading-strategy-series-reversals-in-the-pead#594036bcd7315c0010357ada</a></p>

<p>I wonder if someone has subscribed the datasets and test it for the recent yreas (tiil current)?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c9bd625d8e33016d3fce995' id='5c9bd625d8e33016d3fce995'>
<a href='#5c9bd625d8e33016d3fce995'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5c807e1a25ec0e0045f0311a'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/d273749a2b781adee8a800e12979fd62?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5c807e1a25ec0e0045f0311a'>Carles Estevadeordal</a>
</div>
<a UTCms='1553716774000' class='quanto-date posted-at response-posted-at' href='#5c9bd625d8e33016d3fce995'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Doesn&#39;t these algos suffer from Look-Ahead Bias? As far as I understood from them they buy/short the day before of the surprise, but surprises are announced the same day as the earnings announcement, early in the morning, but still the same day anyways.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5e4c4ec270237e004041d3d6' id='5e4c4ec270237e004041d3d6'>
<a href='#5e4c4ec270237e004041d3d6'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5dde780c901af23f1e7d274e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/b9723646edd0a7c4d824395b917008bb?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5dde780c901af23f1e7d274e'>ashraf S.A.mohamed </a>
</div>
<a UTCms='1582059202000' class='quanto-date posted-at response-posted-at' href='#5e4c4ec270237e004041d3d6'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Great work , yet am still confused as to where you have indicated - percentage wise - out of all securities tested , as how many were subject to such effect , and how many did not experience reversal ? and are there any clustering effects in terms of what type of securities that have experienced such effect versus those who did not ?</p>

<p>Your inputs are highly appreciated<br>
Best Regards  </p>
</div>
</div>
</div>

</div>
<div class='sign-in-please'>
Please <a href='/signin?return_to=/posts/quantpedia-trading-strategy-series-reversals-in-the-pead'>sign in</a> or
<a href='/users/sign_up?redirect_to=/posts/quantpedia-trading-strategy-series-reversals-in-the-pead'>join Quantopian</a> to
post a reply.
</div>
</div>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId: "550580758292093",
      status: false,
      cookie: true,
      xfbml: true
    });
  };
  
  (function(d, debug){
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) {return;}
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
    ref.parentNode.insertBefore(js, ref);
  }(document, /*debug*/ false));
  
  window.twttr = (function (d,s,id) {
    var t, js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return; js=d.createElement(s); js.id=id;
    js.src="//platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs);
    return window.twttr || (t = { _e: [], ready: function(f){ t._e.push(f) } });
  }(document, "script", "twitter-wjs"));
</script>
<script>
  $(document).ready(function () {
    quanto.instances.pm = new quanto.PostManager(false)
  });
</script>

<div class='login-footer'>
<div class='container'>
<div class='login-footer-text'>
Become an expert in quant finance through Quantopian's hands-on education.
</div>
<div class='login-footer-button'>
<button class='btn btn-v2 stroke join-modal-link mixpanel-button' data-event='anon join footer click posts' data-mixpanel='click'>
Join Now
</button>
</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='error-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'>Error</span>
</div>
<div class='modal-body body-content'>
<p>Sorry, something went wrong.  Try again or contact us by <a class='feedback-link'>sending feedback</a>.</p>
</div>
<div class='modal-footer'>
<button class='btn btn-v2 blue action-button' data-dismiss='modal' href='#'>Close</button>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='confirmation-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'></span>
</div>
<div class='modal-body body-content'></div>
<div class='modal-footer'>
<div class='pull-right'>
<button class='btn btn-v2 border' data-dismiss='modal'>Cancel</button>
<button class='btn btn-v2 blue action-button' data-dismiss='modal'></button>
</div>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='message-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'></span>
</div>
<div class='modal-body body-content'></div>
<div class='modal-footer'>
<button class='btn btn-v2 blue action-button' data-dismiss='modal' id='message-modal-close'>Close</button>
</div>

</div>
</div>
</div>

<div class='always-bootstrap3-modals'>
<div class='fade modal quanto-modal-v2' id='join-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header visible-small'>
<span class='title'>
Join Quantopian.  It's Free!
</span>
<div class='modal-x-out visible-xs'></div>
</div>
<div class='modal-body'>
<div class='flex-wrap'>
<div class='join-left-pane hidden-small'>
<div class='margin_30l'>
<div class='join-hero-text'>
Join Quantopian.  It's Free!
</div>
<div class='join-benefits'>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image code'></div>
</div>
<div class='join-text'>
Use our research platform, backtester, and dozens of clean data sets.
</div>
</div>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image learn'></div>
</div>
<div class='join-text'>
Learn with our hands-on education and community forums.
</div>
</div>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image win'></div>
</div>
<div class='join-text'>
Enter to win cash prizes in our contest.
</div>
</div>
</div>
<div class='hidden saved-reminder'>
Don't worry, all your work is already saved.
</div>
</div>
</div>
<div class='join-right-pane'>
<div class='hidden-small'>
<div class='button-pane'>
<a class="button btn-v2 user-form-btn" href="/signin">Already a Quantopian member?</a>
</div>
</div>
<div class='visible-small'>
<div class='already-member'>
<a href='/signin'>Already a Quantopian member?</a>
</div>
</div>
<form class="quanto-form-v2" id="new-user-modal-form" action="/users" accept-charset="UTF-8" data-remote="true" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><div class='error-message hidden'>
<div class='message'></div>
</div>
<div class='name-group'>
<div class='form-group inline-block'>
<label for="user_firstname">First Name</label>
<input class="form-control firstname" pattern=".*" required="required" autocomplete="off" autofocus="autofocus" type="text" name="user[firstname]" id="user_firstname" />
</div>
<div class='form-group inline-block'>
<label for="user_lastname">Last Name</label>
<input class="form-control" value="" pattern=".*" required="required" autocomplete="off" type="text" name="user[lastname]" id="user_lastname" />
</div>
</div>
<div class='form-group'>
<label for="user_email">Email</label>
<input class="form-control" value="" pattern=".*" required="required" autocomplete="off" type="email" name="user[email]" id="user_email" />
</div>
<div class='form-group'>
<label for="user_password">Password</label>
<input autocomplete="off" class="form-control" pattern=".*" required="required" type="password" name="user[password]" id="user_password" />
</div>
<div class='checkbox eula'>
<input id='eula-checkbox' type='checkbox'>
<div class='quanto-checkbox'></div>
<label for='eula-checkbox' id='checkbox-label'>I accept the <a href='/policies/terms' target='_blank'>Terms Of Use</a> and <a href='/policies/privacy' target='_blank'>Privacy Policy</a>.</label>
</div>
<div class='checkbox mailchimp-box'>
<input name="user[allow_marketing_emails]" type="hidden" value="0" /><input type="checkbox" value="1" name="user[allow_marketing_emails]" id="user_allow_marketing_emails" />
<div class='quanto-checkbox'></div>
<label for='user_allow_marketing_emails'>
Send me email updates with the latest news from the Quantopian community. We send these emails about once a month.
</label>
</div>
<div class='button-row'>
<button class='btn-v2 blue full' data-redirect-to='/tutorials/getting-started' id='sign-up-button' type='Submit'>Join Quantopian</button>
</div>
</form></div>
</div>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='feedback-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title'>Contact Support</span>
</div>
<div class='modal-body'>
<form class='anon-user controls quanto-form-v2' id='feedback-form'>
<div class='feedback-inputs'>
<div class='form-group'>
<input autofocus class='form-control' id='feedback-email-box' name='email' placeholder='Email Address' type='email'>
</div>
<div class='form-group'>
<input class='form-control' id='feedback-name-box' placeholder='Name' type='name'>
</div>
<div class='form-group'>
<textarea class='form-control' id='feedback-box' name='feedback' placeholder='What may we help you with?' rows='10'></textarea>
</div>
</div>
</form>
<form class='hidden quanto-form-v2 select-resource-area'>
<div class='select-step select-type-step'>
<div class='form-group'>
<select class='form-control select-resource-dropdown' title='Select the item you need help with'>
<option value='algorithm'>Algorithm</option>
<option value='backtest'>Backtest</option>
<option value='notebook'>Notebook</option>
</select>
</div>
</div>
<div class='select-step loading-area hidden'>
<div class='loading-text'>
Loading...
</div>
</div>
<div class='select-step empty-list-area hidden'>
<div class='back-button'>Go Back</div>
<div class='empty-text'>
No <span class='empty-list-resource-text'>algorithms</span> found
</div>
</div>
<div class='select-algo-area select-step hidden'>
<div class='back-button'>Go Back</div>
<table class='select-algo-table select-item-table'>
<thead>
<tr>
<th>
Algorithm
<span class='sort-icon'></span>
</th>
<th>
Last Modified
<span class='sort-icon'></span>
</th>
</tr>
</thead>
</table>
</div>
<div class='select-backtest-area select-step hidden'>
<div class='back-button'>Go Back</div>
<table class='select-backtest-table select-item-table'>
<thead>
<tr>
<th>
Backtest
<span class='sort-icon'></span>
</th>
<th>
Started At
<span class='sort-icon'></span>
</th>
<th>
Overall Return
<span class='sort-icon'></span>
</th>
<th>
Status
<span class='sort-icon'></span>
</th>
</tr>
</thead>
</table>
</div>
<div class='select-notebook-area select-step hidden'>
<div class='back-button'>Go Back</div>
<div class='subtitle select-cell-step'>
Choose a cell to use as the preview for this notebook:
</div>
<div class='iframe-wrapper'>
<iframe class='notebook-list-iframe slow-fade' src=''></iframe>
</div>
<div class='progress-area slow-fade in'>
<div class='progress-container'>
<div class='progress-title'>
<div class='quanto-loader gray'></div>
</div>
</div>
</div>
<div class='maintenance-area'>
<div class='error-container'>
<div class='row'>
<div class='col-md-14 msg-title h1'>
Sorry, research is currently undergoing maintenance.
</div>
</div>
<div class='row'>
<div class='col-md-14 msg-subtitle'>
Please check back shortly. If the maintenance period lasts longer than expected,
you can find updates on <a href='https://status.quantopian.com/'>status.quantopian.com</a>.
</div>
</div>

</div>
</div>
<div class='error-area'>
<div class='error-container'>
<div class='row'>
<div class='col-md-14 msg-title h1'>
Sorry, something went wrong on our end.
</div>
</div>
<div class='row'>
<div class='col-md-14 msg-subtitle'>
Please try again or contact <a class='open-feedback-link'>Quantopian support</a>.
</div>
</div>

</div>
</div>

</div>
<div class='selected-item-area select-step hidden'>
<div class='selected-item-group form-group'>
<div class='selected-item-control'>
<input class='disabled form-control selected-item-box' type='text'>
<span class='secure-icon icon'></span>
<button class='btn change change-primary-item-button change-selection-button new-btn transparent' type='button'>
<span class='refresh-icon icon'></span>
</button>
</div>
<div class='selected-backtest-control'>
<input class='disabled form-control selected-backtest-box' type='text'>
<span class='secure-icon icon'></span>
<button class='btn change-backtest-button change-selection-button new-btn transparent' type='button'>
<span class='refresh-icon icon'></span>
</button>
</div>
</div>
<div class='checkbox-group form-group'>
<div class='checkbox give-permission'>
<input class='give-permission-checkbox' id='feedback-give-permission-checkbox' type='checkbox'>
<div class='quanto-checkbox'></div>
<label for='feedback-give-permission-checkbox'>
I permit Quantopian to view <span class='item-type-text'>this algorithm,
backtest or notebook and their imported datasets</span> for the purpose of providing support.
</label>
</div>
</div>
</div>
</form>

<div class='loading-step hidden'>
<div class='loading-text'>
Submitting your support ticket...
</div>
</div>
<div class='success-step invisible'>
<h2 class='title center'>
You've successfully submitted a support ticket.
</h2>
<p>
Our support team will be in touch soon.
</p>
<div class='confirmation-image'></div>
</div>
</div>
<div class='modal-footer'>
<button class='btn-v2 blue' id='send-feedback-button'>Send</button>
<div class='error-message hidden'>
Error submitting support request.
</div>
</div>

</div>
</div>
</div>

</div>
</div>
<div class='footer' id='quanto-footer-container'>
<div class='container'>
<div class='row header-row'>
<div class='col-sm-fourth span3'>
<img class='async-image logotype-image' data-src='https://qf.quantopian.com/assets/logos/logo-q-full-b23bda5ac757691b9259d396d0dfef91567165868b8c955a836649686e6d2248.svg'>
</div>
<div class='col-sm-fourth span3'></div>
<div class='col-sm-fourth span3'></div>
<div class='col-sm-fourth span3'>
<div class='feedback-email'>
Need help?
<a href="/cdn-cgi/l/email-protection#34525151505655575f744541555a405b445d555a1a575b59">Contact support.</a>
</div>
</div>
</div>
<div class='row'>
<div class='col-sm-fourth span3'>
<div class='header'>Company</div>
<div class='footer-row'>
<a href='/about'>About</a>
</div>
<div class='footer-row'>
<a href='/academia'>Academia</a>
</div>
<div class='footer-row'>
<a href='/jobs'>Careers</a>
</div>
<div class='footer-row'>
<a href='/posts'>Community</a>
</div>
<div class='footer-row'>
<a href='/events'>Events</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Learn &amp; Support</div>
<div class='footer-row'>
<a href='/faq'>FAQ</a>
</div>
<div class='footer-row'>
<a href='/tutorials/getting-started'>Getting Started</a>
</div>
<div class='footer-row'>
<a href='/docs'>Documentation</a>
</div>
<div class='footer-row'>
<a href='/tutorials'>Tutorials</a>
</div>
<div class='footer-row'>
<a href='/lectures'>Lectures</a>
</div>
<div class='footer-row'>
<a href='/opensource'>Open Source</a>
</div>
<div class='footer-row'>
<a href='https://status.quantopian.com/'>Site Status</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Notices</div>
<div class='footer-row'>
<a href='/policies/terms'>Terms of Use</a>
</div>
<div class='footer-row'>
<a href='/policies/privacy'>Privacy Policy</a>
</div>
<div class='footer-row'>
<a href='/security'>Security</a>
</div>
<div class='footer-row'>
<a href='/policies/code-of-conduct'>Code of Conduct</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Follow Us</div>
<div class='footer-row'>
<a href='https://www.twitter.com/quantopian'>Twitter</a>
</div>
<div class='footer-row'>
<a href='https://www.facebook.com/quantopian'>Facebook</a>
</div>
<div class='footer-row'>
<a href='https://www.linkedin.com/company/quantopian'>LinkedIn</a>
</div>
<div class='footer-row'>
<a href='https://www.youtube.com/channel/UC606MUq45P3zFLa4VGKbxsg'>YouTube</a>
</div>
</div>
</div>
<div class='row'>
<div class='col-xs-14 span12'>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian.
</p>
<p>
In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>

</div>
</div>
</div>
</div>
</div>
<div class='mobile-footer'>
<div class='mobile-nav-category main-links'>
<div class='mobile-nav-row-footer'>
<a href='/about'>About Quantopian</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/jobs'>Careers</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/posts'>Community</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/events'>Events</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/docs'>Documentation</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/academia'>Academia</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/lectures'>Lectures</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://status.quantopian.com/'>Status</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.facebook.com/quantopian'>Facebook</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.twitter.com/quantopian'>Twitter</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.linkedin.com/company/quantopian'>LinkedIn</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.youtube.com/channel/UC606MUq45P3zFLa4VGKbxsg'>YouTube</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/policies/terms'>Terms of Use</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/policies/privacy'>Privacy Policy</a>
</div>
</div>
<div class='mobile-nav-category'>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian.
</p>
<p>
In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>

</div>
</div>
</div>

</div>
<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script></body>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', "UA-8519877-1", {
    cookieDomain: "quantopian.com"
  });
  ga('set', 'dimension1', 'session_5f9dc7425d387f00077e48e4');
  
  ga('send', 'pageview');
</script>

<input type="hidden" name="is_mac" id="is_mac" value="false" />
<input type="hidden" name="mp" id="mp" value="75873953cd404bcc1da88a55ff51e3b4" />
<script>
  (function(e,a){if(!a.__SV){var b=window;try{var c,l,i,j=b.location,g=j.hash;c=function(a,b){return(l=a.match(RegExp(b+"=([^&]*)")))?l[1]:null};g&&c(g,"state")&&(i=JSON.parse(decodeURIComponent(c(g,"state"))),"mpeditor"===i.action&&(b.sessionStorage.setItem("_mpcehash",g),history.replaceState(i.desiredHash||"",e.title,j.pathname+j.search)))}catch(m){}var k,h;window.mixpanel=a;a._i=[];a.init=function(b,c,f){function e(b,a){var c=a.split(".");2==c.length&&(b=b[c[0]],a=c[1]);b[a]=function(){b.push([a].concat(Array.prototype.slice.call(arguments,
  0)))}}var d=a;"undefined"!==typeof f?d=a[f]=[]:f="mixpanel";d.people=d.people||[];d.toString=function(b){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);b||(a+=" (stub)");return a};d.people.toString=function(){return d.toString(1)+".people (stub)"};k="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
  for(h=0;h<k.length;h++)e(d,k[h]);a._i.push([b,c,f])};a.__SV=1.2;b=e.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";c=e.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}})(document,window.mixpanel||[]);
  mixpanel.init("75873953cd404bcc1da88a55ff51e3b4");
</script>
<script>
  mixpanel.track("view page", {"page": window.location.pathname});
</script>
</html>
