<!DOCTYPE html>
<html>
<head>
<link href='i1.wp.com' rel='dns-prefetch'>
<link href='i2.wp.com' rel='dns-prefetch'>
<link href='i3.wp.com' rel='dns-prefetch'>
<meta content='2HgX9mcLHaPOX6sfaaAkhWtblhEB9yUNw4l6l46e1k4' name='google-site-verification'>
<link rel="shortcut icon" type="image/x-icon" href="external/favicon-q-ac1a76f2c200e9026b5b1147519bb4fab6256910588b831e2411bc6c7c1218c3.png" />
<title>
Beta Constraint in Risk Model totally unnecessary
</title>
<meta content='I have long suspected that the beta constraint in the risk model was totally unnecessary and might be actually detrimental to overall algo performance. I had the chance to confirm this when I stumbled upon a post by Grant and my subsequent findings  here .  The stock universe generally moves with the market as represented by benchmark SPY and under the very nature of a long/short equity market neutral framework, the effect of the longs is neutralized by the shorts, so it naturally mitigates...' name='description'>
<link rel="stylesheet" media="all" href="external/quanto-base-bundle-e8eb6050172aa0d24124d5c24bac90b2cccd88b5b9c7742026c0e9efab038c6e.css" />
<link rel="stylesheet" media="all" href="external/quanto-posts-bundle-aab01368d3f82d8dafc94ee9eabb82e77dc8c9fbbffa952fdcdc744dfa523cf3.css" />
<script src="external/quanto_global-057218867db29d5768131af5d6fb3476cef098e7d9e655108befb903c7ee985e.js"></script>
<script src="external/posts_bundle-3dfd82fa469c393d752e461d837aec9e4e364ae39f49198e34a6626f2180fdf7.js"></script>
<link href='external/logo-q-180x180-0f5a6a439c99203ed4aea6f656e7604c543d287be43d8b17c7591c1131f09a59.png' rel='apple-touch-icon'>
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="npjEzzNyeMTbrBLRiilsI4bmLLOlTooDfBFhm+Dzn7Hi/rKCkYSqJ2KxS+DFxsRXvmgP2t+Cnxj+HrrxSrb9Cg==" />
<meta content='width=device-width, initial-scale=1.0' name='viewport'>
<script>
//<![CDATA[
window.quanto_data={};quanto_data.bounce_back_params={"show_modal":null,"feedback_text":null};quanto_data.namespace="public";quanto_data.talib_info={"ADOSC":["Chaikin A/D Oscillator (Volume Indicators)",["fastperiod","3"],["slowperiod","10"]],"ADX":["Average Directional Movement Index (Momentum Indicators)",["timeperiod","14"]],"ADXR":["Average Directional Movement Index Rating (Momentum Indicators)",["timeperiod","14"]],"APO":["Absolute Price Oscillator (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["matype","0"]],"AROON":["Aroon (Momentum Indicators)",["timeperiod","14"]],"AROONOSC":["Aroon Oscillator (Momentum Indicators)",["timeperiod","14"]],"ATR":["Average True Range (Volatility Indicators)",["timeperiod","14"]],"BBANDS":["Bollinger Bands (Overlap Studies)",["timeperiod","5"],["nbdevup","2"],["nbdevdn","2"],["matype","0"]],"BETA":["Beta (Statistic Functions)",["timeperiod","5"]],"CCI":["Commodity Channel Index (Momentum Indicators)",["timeperiod","14"]],"CMO":["Chande Momentum Oscillator (Momentum Indicators)",["timeperiod","14"]],"CORREL":["Pearson's Correlation Coefficient (r) (Statistic Functions)",["timeperiod","30"]],"DEMA":["Double Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"DX":["Average Directional Movement Index (Momentum Indicators)",["timeperiod","14"]],"EMA":["Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"KAMA":["Kaufman Adaptive Moving Average (Overlap Studies)",["timeperiod","30"]],"LINEARREG":["Linear Regression (Statistic Functions)",["timeperiod","14"]],"LINEARREG_ANGLE":["Linear Regression Angle (Statistic Functions)",["timeperiod","14"]],"LINEARREG_INTERCEPT":["Linear Regression Intercept (Statistic Functions)",["timeperiod","14"]],"LINEARREG_SLOPE":["Linear Regression Slope (Statistic Functions)",["timeperiod","14"]],"MA":["Moving average (Overlap Studies)",["timeperiod","30"],["matype","0"]],"MACD":["Moving Average Convergence/Divergence (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["signalperiod","9"]],"MACDEXT":["MACD with controllable MA type (Momentum Indicators)",["fastperiod","12"],["fastmatype","0"],["slowperiod","26"],["slowmatype","0"],["signalperiod","9"],["signalmatype","0"]],"MACDFIX":["Moving Average Convergence/Divergence Fix 12/26 (Momentum Indicators)",["signalperiod","9"]],"MAX":["Highest values over a specified period (Math Operators)",["timeperiod","30"]],"MAXINDEX":["Index of highest value over a specified period (Math Operators)",["timeperiod","30"]],"MFI":["Money Flow Index (Momentum Indicators)",["timeperiod","14"]],"MIDPOINT":["Midpoint over period (Overlap Studies)",["timeperiod","14"]],"MIDPRICE":["Midpoint Price over period (Overlap Studies)",["timeperiod","14"]],"MIN":["Lowest value over a specified period (Math Operators)",["timeperiod","30"]],"MININDEX":["Index of lowest value over a specified period (Math Operators)",["timeperiod","30"]],"MINMAX":["Lowest and highest values over a specified period (Math Operators)",["timeperiod","30"]],"MINMAXINDEX":["Indexes of lowest and highest values over a specified period (Math Operators)",["timeperiod","30"]],"MINUS_DI":["Minus Directional Indicator (Momentum Indicators)",["timeperiod","14"]],"MINUS_DM":["Minus Directional Movement (Momentum Indicators)",["timeperiod","14"]],"MOM":["Momentum (Momentum Indicators)",["timeperiod","10"]],"NATR":["Normalized Average True Range (Volatility Indicators)",["timeperiod","14"]],"PLUS_DI":["Plus Directional Indicator (Momentum Indicators)",["timeperiod","14"]],"PLUS_DM":["Plus Directional Movement (Momentum Indicators)",["timeperiod","14"]],"PPO":["Percentage Price Oscillator (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["matype","0"]],"ROC":["Rate of change: ((price/prevPrice)-1)*100 (Momentum Indicators)",["timeperiod","10"]],"ROCP":["Rate of change Percentage: (price-prevPrice)/prevPrice (Momentum Indicators)",["timeperiod","10"]],"ROCR":["Rate of change ratio: (price/prevPrice) (Momentum Indicators)",["timeperiod","10"]],"ROCR100":["Rate of change ratio 100 scale: (price/prevPrice)*100 (Momentum Indicators)",["timeperiod","10"]],"RSI":["Relative Strength Index (Momentum Indicators)",["timeperiod","14"]],"SMA":["Simple Moving Average (Overlap Studies)",["timeperiod","30"]],"STDDEV":["Standard Deviation (Statistic Functions)",["timeperiod","5"],["nbdev","1"]],"STOCH":["Stochastic (Momentum Indicators)",["fastk_period","5"],["slowk_period","3"],["slowk_matype","0"],["slowd_period","3"],["slowd_matype","0"]],"STOCHF":["Stochastic Fast (Momentum Indicators)",["fastk_period","5"],["fastd_period","3"],["fastd_matype","0"]],"STOCHRSI":["Stochastic Relative Strength Index (Momentum Indicators)",["timeperiod","14"],["fastk_period","5"],["fastd_period","3"],["fastd_matype","0"]],"T3":["Triple Exponential Moving Average (T3) (Overlap Studies)",["timeperiod","5"],["vfactor","0.7"]],"TEMA":["Triple Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"TRIMA":["Triangular Moving Average (Overlap Studies)",["timeperiod","30"]],"TRIX":["1-day Rate-Of-Change (ROC) of a Triple Smooth EMA (Momentum Indicators)",["timeperiod","30"]],"TSF":["Time Series Forecast (Statistic Functions)",["timeperiod","14"]],"ULTOSC":["Ultimate Oscillator (Momentum Indicators)",["timeperiod1","7"],["timeperiod2","14"],["timeperiod3","28"]],"VAR":["Variance (Statistic Functions)",["timeperiod","5"],["nbdev","1"]],"WILLR":["Williams' %R (Momentum Indicators)",["timeperiod","14"]],"WMA":["Weighted Moving Average (Overlap Studies)",["timeperiod","30"]]};quanto_data.nb_preview_url="https://notebooks-preview.prd.pub.quantopian.com";quanto_data.delay_nb_preview_load=false;
//]]>
</script>
<meta content='https://www.quantopian.com/posts/beta-constraint-in-risk-model-totally-unnecessary' property='og:url'>
<meta content='Beta Constraint in Risk Model totally unnecessary' property='og:title'>

<input type="hidden" name="env" id="quanto-env" value="production" />
<meta content='550580758292093' property='fb:app_id'>
<meta content='https://www.quantopian.com/posts/beta-constraint-in-risk-model-totally-unnecessary' property='og:url'>
<meta content='https://media.quantopian.com/public/og-image-default.png' property='og:image'>
<meta content='Beta Constraint in Risk Model totally unnecessary' property='og:title'>
<meta content='I have long suspected that the beta constraint in the risk model was totally unnecessary and might be actually detrimental to overall algo performance. I had the chance to confirm this when I stumbled upon a post by Grant and my subsequent findings  here .  The stock universe generally moves with the market as represented by benchmark SPY and under the very nature of a long/short equity market neutral framework, the effect of the longs is neutralized by the shorts, so it naturally mitigates...' property='og:description'>
</head>
<script type='application/ld+json'>
  {
    "@context": "http://schema.org",
    "@type": "Organization",
    "url": "https://www.quantopian.com",
    "logo": "https://media.quantopian.com/logos/logo-q-press-red.png"
  }
</script>
<body class='' ontouchstart=''>
<div id='fb-root'></div>
<div class='wrapper'>
<div class='alert-v2 error'>
<div class='message'>
Quantopian's community platform is shutting down. Please read <a href="/posts/quantopians-community-services-are-closing">this post</a> for more information and <a href='/account#account'>download your code</a>.
</div>
</div>
<div class='navbar navbar-default navbar-static-top' id='app-navbar'>
<div class='container-fluid'>
<div class='navbar-header'>
<button class='navbar-toggle collapsed' data-target='#app-navbar-collapse' data-toggle='collapse'>
<span class='icon hamburger-menu'></span>
</button>
<a class='navbar-brand' href='/home'>
<img class='logo-image async-image' data-src='external/logo-q-white-b141ea6018546e5a4ecc3d10d8440ec076fc4385764e948b322828cc70950a76.svg'>
</a>
</div>
<div class='collapse navbar-collapse' id='app-navbar-collapse'>
<ul class='nav navbar-nav navbar-right'>
<li class='dropdown quanto-dropdown-new'>
<li>
<a class='header' href='/docs'>
Documentation
</a>
</li>
<li class='dropdown quanto-dropdown-new'>
<a class='header' data-toggle='dropdown' href='#'>
Learn
</a>
<ul class='dropdown-menu'>
<li>
<a class='mixpanel-button' data-event='main nav getting started clicked' href='/tutorials/getting-started'>Getting Started</a>
</li>
<li>
<a class='mixpanel-button' data-event='main nav tutorials clicked' href='/tutorials'>Tutorials</a>
</li>
<li>
<a class='mixpanel-button' data-event='main nav lectures clicked' href='/lectures'>Lectures</a>
</li>
</ul>
</li>
<li>
<a class='header' href='/posts' id='forum-link'>
Forum
</a>
</li>
<li>
<a class="header" href="/signin?return_to=/posts/beta-constraint-in-risk-model-totally-unnecessary">Log In</a>
</li>
</li>

</ul>
</div>
</div>
</div>
<script>
  $(document).ready(function () {
    quanto.instances.fm = new quanto.FeedbackManager();
    quanto.instances.hm = new quanto.headerManager();
  })
</script>


<div class='content content-area new-style'>
<input type="hidden" name="page-id" id="page-id" value="postatomic" />
<script src="external/MathJax.js?config=TeX-AMS_HTML-full.js,Safe" async="async"></script>
<div class='container page-container post-atomic'>
<input id='parent-post-id-val' type='hidden' value='5a5a464523b205756a30eb86'>
<div class='post-container' data-post-id='5a5a464523b205756a30eb86' id='5a5a464523b205756a30eb86'>
<div class='back-button back-to-community'>Back to Community</div>
<div class='post-title'>Beta Constraint in Risk Model totally unnecessary</div>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/50842732cb5e1a02000000d1'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f86535a7fafab6b7d903fc1461362f0a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/50842732cb5e1a02000000d1'>James Villa</a>
<span class='badge medal'></span>
</div>
<span class='posted-at'>edited </span>
<span UTCms='1516807010000' class='quanto-date posted-at'></span>
<div class='pull-right other-actions'>
<div class='dropup inline-block'>
<div class='dropdown share-control other-action-link'>
<div data-toggle='dropdown'>
<div class='share-image'></div>
Share
</div>
<ul class='dropdown-menu share-options-menu'>
<li>
<a class='share-row' href='https://twitter.com/intent/tweet?text=Beta Constraint in Risk Model totally unnecessary&amp;url=https%3A%2F%2Fwww.quantopian.com%2Fposts%2Fbeta-constraint-in-risk-model-totally-unnecessary%3Futm_source%3Dwebsite_share%26utm_campaign%3Dbeta-constraint-in-risk-model-totally-unnecessary%26utm_medium%3Dtwitter&amp;via=quantopian'>
<i class='icon icon-twitter'></i>
Share on Twitter
</a>
</li>
<li>
<div class='share-row facebook-button'>
<i class='icon icon-facebook'></i>
Share on Facebook
</div>
</li>
<li>
<div class='share-row linkedin-button' data-share-url='https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Fwww.quantopian.com%2Fposts%2Fbeta-constraint-in-risk-model-totally-unnecessary%3Futm_source%3Dwebsite_share%26utm_campaign%3Dbeta-constraint-in-risk-model-totally-unnecessary%26utm_medium%3Dlinkedin&amp;title=Beta+Constraint+in+Risk+Model+totally+unnecessary+%28James+Villa%29&amp;source=Quantopian'>
<i class='icon icon-linkedin'></i>
Share on LinkedIn
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>

<input type="hidden" name="social_fb_post_link" id="social_fb_post_link" value="https://www.quantopian.com/posts/beta-constraint-in-risk-model-totally-unnecessary?utm_source=website_share&amp;utm_campaign=beta-constraint-in-risk-model-totally-unnecessary&amp;utm_medium=facebook" />
<input type="hidden" name="social_post_image" id="social_post_image" value="external/logo-q-red-outline.png" />
<input type="hidden" name="social_post_author" id="social_post_author" value="James Villa" />
<div class='body-text'>
<div class='body-text-container post-body'><p>I have long suspected that the beta constraint in the risk model was totally unnecessary and might be actually detrimental to overall algo performance. I had the chance to confirm this when I stumbled upon a post by Grant and my subsequent findings <a href="https://www.quantopian.com/posts/building-a-better-beta">here</a>.  The stock universe generally moves with the market as represented by benchmark SPY and under the very nature of a long/short equity market neutral framework, the effect of the longs is neutralized by the shorts, so it naturally mitigates getting a high beta to SPY.</p>

<p>Long/short equity market neutral strategy works by taking long positions in stocks that are expected to outperform their peers and short positions in stocks expected to underperform. The positions are chosen so that the equity market exposure of the long side of the portfolio is offset by the exposure of the short side. This results in a strategy that is hedged to the aggregate stock market, supposedly insulating the fund from the major ups and downs in equities. In Q framework this is already accomplished by the Dollar Neutral constraint. So in my mind, I thought that adding the beta constraint was an overkill. To prove my point, I took Grant&#39;s algo which shows a 0.18 beta that he tried to constrain to +- 0.05 but didn&#39;t work and commented out the beta constraint.  The results were an increase in beta from 0.18 to 0.21 , still within the contest limits but an increase in returns and reduced drawdown! This confirms my point that the beta constraint is not necessary but more importantly curtails the potential for more returns and an improved drawdown.</p>

<p>To further confirm my point, I took Q&#39;s model algo that meets all risk model constraint requirements from <a href="https://www.quantopian.com/posts/quantopian-risk-model-in-algorithms"> here</a> and again I commented out the beta constraint and results shown below.  The beta went from -0.6 to -0.07, returns were about the same but improved drawdowns. I invite the Quantopian staff or anyone to disprove my points, maybe I&#39;m missing something.</p>
</div>
</div>
</div>

</div>

<div class='container page-container post-atomic'>
<div class='section-header reply-header'>
<div class='reply-title'>65 responses</div>
</div>
<div class='replies'>
<div class='post-container response-container' data-post-id='5a5b66e5ba62fb13cbe621ed' id='5a5b66e5ba62fb13cbe621ed'>
<a href='#5a5b66e5ba62fb13cbe621ed'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1515939558000' class='quanto-date posted-at response-posted-at' href='#5a5b66e5ba62fb13cbe621ed'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p><strong>Typo</strong>:  Should read &quot;The beta went from -0.06 to -0.07...&quot;</p>

<blockquote>
<p>Grant&#39;s algo which shows a 0.18 beta that he tried to constrain to +- 0.05 but didn&#39;t work...</p>
</blockquote>

<p>To me, this is the larger concern.  If the Optimize API has a beta constraint of +/- 0.05 and a 2-year backtest yields a beta of 0.18, then it suggests something is amiss.  It would be interesting to see an example of an algo for which the beta constraint causes the Optimize API to fail, due to the constraint not being met in the optimization.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a5b777cdfee8c131dc70061' id='5a5b777cdfee8c131dc70061'>
<a href='#5a5b777cdfee8c131dc70061'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/50842732cb5e1a02000000d1'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f86535a7fafab6b7d903fc1461362f0a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/50842732cb5e1a02000000d1'>James Villa</a>
<span class='badge medal'></span>
</div>
<a UTCms='1515943804000' class='quanto-date posted-at response-posted-at' href='#5a5b777cdfee8c131dc70061'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Grant, thanks for catching the typo. In your particular algo, what concerns me more is you are missing out on increased returns and  improved drawdowns without the beta constraint while still being within the limits of -+ 0.3.</p>

<p>@Karl, and this is what Investopedia has to say about that and I quote:</p>

<blockquote>
<p>What is a &#39;Zero-Beta Portfolio&#39;<br>
A zero-beta portfolio is a portfolio constructed to have zero systematic risk or, in other words, a beta of zero. A zero-beta portfolio would have the same expected return as the risk-free rate. Such a portfolio would have zero correlation with market movements, given that its expected return equals the risk-free rate or a relatively low rate of return compared to higher-beta portfolios.</p>
</blockquote>

<p>Read more: Zero-Beta Portfolio <a href="https://www.investopedia.com/terms/z/zero-betaportfolio.asp#ixzz54Ally8P6">https://www.investopedia.com/terms/z/zero-betaportfolio.asp#ixzz54Ally8P6</a><br>
Follow us: Investopedia on Facebook  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a5b778cdfee8c131dc70062' id='5a5b778cdfee8c131dc70062'>
<a href='#5a5b778cdfee8c131dc70062'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1515943820000' class='quanto-date posted-at response-posted-at' href='#5a5b778cdfee8c131dc70062'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Karl -</p>

<p>I&#39;m not necessarily aiming for zero beta; beta of +/-0.3 might be best, as you point out.  However, if the beta constraint as implemented by Q isn&#39;t doing anything or has a bug or I&#39;m using it incorrectly, then it won&#39;t help to have it in the code.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a5b8786ba62fb0017e62563' id='5a5b8786ba62fb0017e62563'>
<a href='#5a5b8786ba62fb0017e62563'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1515947910000' class='quanto-date posted-at response-posted-at' href='#5a5b8786ba62fb0017e62563'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@ James -</p>

<blockquote>
<p>In your particular algo, what concerns me more is you are missing out on increased returns and improved drawdowns without the beta constraint...</p>
</blockquote>

<p>One current interest of mine is to understand how to manage the drag imposed by:</p>

<pre><code>set_slippage(slippage.FixedBasisPointsSlippage())  
</code></pre>

<p>The effect you are highlighting may simply be due to the additional churn created by the Optimize API beta constraint (although larger draw-downs would not necessarily be explained).</p>

<p>Overall, I think one wants to place lots of small &quot;bets&quot; (e.g. rebalance daily), while managing trading costs.  Presently, I&#39;m not sure the Optimize API does this so well.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a5b9393ba62fb13cbe624c9' id='5a5b9393ba62fb13cbe624c9'>
<a href='#5a5b9393ba62fb13cbe624c9'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/50842732cb5e1a02000000d1'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f86535a7fafab6b7d903fc1461362f0a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/50842732cb5e1a02000000d1'>James Villa</a>
<span class='badge medal'></span>
</div>
<a UTCms='1515950995000' class='quanto-date posted-at response-posted-at' href='#5a5b9393ba62fb13cbe624c9'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Grant, the new slippage model is really a major drag but if Q research says this is what they get in real terms then we all have to live with it. Placing lots of small bets and managing trading costs is an oxymoron but it seems like the path to take under Q framework which seeks low volatilities and drawdowns, a very tall order if you also seek above risk free rate returns.</p>

<p>Without knowing what&#39;s under the hood of Optimize API, it&#39;s hard to tell or test if its (1) programmatically accurate and (2) if the constraints are consistent with the desired objective.  Take the case of the beta constraint, the Dollar Neutral constraint by its very nature already assures that the beta constraint limits of +- 0.3 will not be breached assuming  a considerable number of stocks are traded long/short (not 2 or 6). Adding beta constraint on top of that, I think, causes the logic to break down either through (1) or/and (2) above.  </p>

<p>Long/short equity market neutral strategies have been around for quite sometime now, my concern is if they are executing it correctly within their framework.  This is the second issue I&#39;ve already raised, first being the computation of Sharpe and Sortino ratios and now this.  Is there anymore?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a5bbfa39284e3002273b0a3' id='5a5bbfa39284e3002273b0a3'>
<a href='#5a5bbfa39284e3002273b0a3'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1515962275000' class='quanto-date posted-at response-posted-at' href='#5a5bbfa39284e3002273b0a3'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@ James -</p>

<blockquote>
<p>first being the computation of Sharpe</p>
</blockquote>

<p>Presumably, you are referring to:</p>

<p><a href="https://www.quantopian.com/posts/risk-free-rate-on-quantopian">https://www.quantopian.com/posts/risk-free-rate-on-quantopian</a></p>

<p>Yes.  Not sure why that never gained any traction.  Seems it shouldn&#39;t be called the Sharpe ratio if the risk-free rate is not incorporated; not referencing it doesn&#39;t make sense from an economic standpoint (what little I understand of economics).  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a5bcbae144f4300125b072e' id='5a5bcbae144f4300125b072e'>
<a href='#5a5bcbae144f4300125b072e'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1515965358000' class='quanto-date posted-at response-posted-at' href='#5a5bcbae144f4300125b072e'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Grant, to determine the cost associated with the FixedBasisPointsSlippage and minimum commissions, it is sufficient to run your strategy twice. Once with, and once without. The difference will give an inkling as to the cost of having them on.</p>

<p>I did this for your Better Beta strategy over a 2-year period. The difference in performance: $ 979,318. That is more than half of what it could have made. So, the impact is not trivial, and should always be accounted for, no matter what kind of trading strategy we might want to use. </p>

<p>There are expenses to trading, better account for them at the planning stage than seeing them massacre a portfolio when it will go live, if ever it gets there.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a5bd51dd45f7b001aadfe69' id='5a5bd51dd45f7b001aadfe69'>
<a href='#5a5bd51dd45f7b001aadfe69'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/50842732cb5e1a02000000d1'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f86535a7fafab6b7d903fc1461362f0a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/50842732cb5e1a02000000d1'>James Villa</a>
<span class='badge medal'></span>
</div>
<a UTCms='1515967773000' class='quanto-date posted-at response-posted-at' href='#5a5bd51dd45f7b001aadfe69'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Grant, yes, that was exactly what I was referring to. After back and forth wrangling with Thomas W. , I thought I finally convinced him and I quote him:</p>

<blockquote>
<p>Thanks, James, I get where you&#39;re coming from. We&#39;ll keep an eye on it and will adjust accordingly.</p>
</blockquote>

<p>So for now, I&#39;m just keeping quiet and waiting...I agree with you, they shouldn&#39;t call it Sharpe if they insist on not subtracting risk free rate.  The answer is as I quoted above from Investopedia...&quot;A zero-beta portfolio would have the same expected return as the risk-free rate.&quot; So by extrapolation, if you subtract risk free rate, you get a donut hole Sharpe ratio, LOL!  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a5cb8d49284e3001f73bf5f' id='5a5cb8d49284e3001f73bf5f'>
<a href='#5a5cb8d49284e3001f73bf5f'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/50842732cb5e1a02000000d1'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f86535a7fafab6b7d903fc1461362f0a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/50842732cb5e1a02000000d1'>James Villa</a>
<span class='badge medal'></span>
</div>
<a UTCms='1516026068000' class='quanto-date posted-at response-posted-at' href='#5a5cb8d49284e3001f73bf5f'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>No takers? Just bumping it up. Calling on Q authors of Risk Model. What am I missing?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a5ce2109284e3001973c155' id='5a5ce2109284e3001973c155'>
<a href='#5a5ce2109284e3001973c155'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/50842732cb5e1a02000000d1'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f86535a7fafab6b7d903fc1461362f0a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/50842732cb5e1a02000000d1'>James Villa</a>
<span class='badge medal'></span>
</div>
<a UTCms='1516036624000' class='quanto-date posted-at response-posted-at' href='#5a5ce2109284e3001973c155'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Luca, I am not mixing  the two concepts together. Don&#39;t you think I know that these are two different things. READ THE  TITLE!  From  a teaching point of view??? Let me put it in a way a very smart guy like you can understand. Empirical studies show that the stock universe generally moves with the market as represented by SPY in this case, so they are highly correlated. The strategy employed by Q is what they call in the industry, long/short market neutral , designed to neutralized exposures to market risks by having almost equal amounts of longs and shorts usually by the hundreds (not like two stocks example).  The Dollar neutral constraint achieves this. But since the stock universe is highly correlated, the beta neutral constraint is no longer needed because the effect of the longs is offset by effect of the shorts and almost always guarantees beta neutrality.  No need for the redundancy specially if the consequence are, as shown in Grant&#39;s algo example, a curtailment on improved returns and improved drawdowns.  And that is the difference between a teacher like you and an industry practitioner like me.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a5d1df8d45f7b0cf9ae0028' id='5a5d1df8d45f7b0cf9ae0028'>
<a href='#5a5d1df8d45f7b0cf9ae0028'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/50842732cb5e1a02000000d1'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f86535a7fafab6b7d903fc1461362f0a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/50842732cb5e1a02000000d1'>James Villa</a>
<span class='badge medal'></span>
</div>
<a UTCms='1516051960000' class='quanto-date posted-at response-posted-at' href='#5a5d1df8d45f7b0cf9ae0028'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Luca, regardless of whether I misinterpreted you on the &quot;teaching point of view&quot;, you are still missing the point. First of all, this is not in the context of teaching but in the context of the contest and its parameters. If this is how Q is teaching how to structure a long/short market neutral strategy,  if I am right , then they are teaching it wrong, capisce!  That is why I want them to prove me wrong so I can shut up already and I will readily admit that I am wrong. But if I am right, imagine all those algos in the contests that might have been deprived of improved returns and drawdowns which could have altered the final results because of this unnecessary beta constraint. I am doing this to actually help the Q model just like if you find a bug in code you report it. It is up to them to verify and report their findings.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a5d2a00144f4315265b076c' id='5a5d2a00144f4315265b076c'>
<a href='#5a5d2a00144f4315265b076c'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/50842732cb5e1a02000000d1'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f86535a7fafab6b7d903fc1461362f0a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/50842732cb5e1a02000000d1'>James Villa</a>
<span class='badge medal'></span>
</div>
<a UTCms='1516055040000' class='quanto-date posted-at response-posted-at' href='#5a5d2a00144f4315265b076c'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Luca, but the beta constraint as it is, does not work as illustrated by Grant&#39;s algo where he tried to constraint beta to be +-0.05, it is still gave him 0.18. I also tried this in my personal algos and it is not constraining beta to what I set it to. Yes I agree we need more examples. You can start with your own algos, (1) try to constraint beta to +- 0.05 and see if it works.  Then next try to comment out the beta constraint and see what happens.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a5d357f4ab5c6001399390b' id='5a5d357f4ab5c6001399390b'>
<a href='#5a5d357f4ab5c6001399390b'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/50842732cb5e1a02000000d1'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f86535a7fafab6b7d903fc1461362f0a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/50842732cb5e1a02000000d1'>James Villa</a>
<span class='badge medal'></span>
</div>
<a UTCms='1516057983000' class='quanto-date posted-at response-posted-at' href='#5a5d357f4ab5c6001399390b'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@ Luca, first of all, removing the beta constraint will never guarantee improved performance in all algos because a bad algo will always be a bad algo, with or without constraints. What is more important is the prospect of a good algo getting improvements by removing the beta constraint, this could be a game changer. Yes, there are two parameters in Beta, but in the context of the contest this should be fixed (currently at one year daily returns) because they give a threshold to be between +-0.3.  Otherwise, the will be inconsistencies if these parameters are loosely changed. As to the optimality of these parameters, you&#39;re guess is as good as mine.  As to whether changing the values of these parameters to make the beta constraint work, that&#39;s  the job of the Q team but I highly doubt it.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a5d385f144f4316c35b0d3d' id='5a5d385f144f4316c35b0d3d'>
<a href='#5a5d385f144f4316c35b0d3d'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/50842732cb5e1a02000000d1'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f86535a7fafab6b7d903fc1461362f0a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/50842732cb5e1a02000000d1'>James Villa</a>
<span class='badge medal'></span>
</div>
<a UTCms='1516058719000' class='quanto-date posted-at response-posted-at' href='#5a5d385f144f4316c35b0d3d'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Karl, I tried your suggestion but I already knew that the results will be the same as commenting out the beta constraint because setting the beta to +- 1 is the same as not having the beta constraint at all.  But for your viewing pleasure, here it is:  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a5d3bd14ab5c6001099394b' id='5a5d3bd14ab5c6001099394b'>
<a href='#5a5d3bd14ab5c6001099394b'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1516059601000' class='quanto-date posted-at response-posted-at' href='#5a5d3bd14ab5c6001099394b'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>One thing I think I&#39;m seeing is that low-volatility stocks make it easier to achieve a low beta, whereas high-volatility ones make it harder.  I&#39;ve started playing around with:</p>

<pre><code>    universe_top = (  
        AnnualizedVolatility(mask=QTradableStocksUS())  
        .percentile_between(92.5, 100))  
    universe_bottom = (  
        AnnualizedVolatility(mask=QTradableStocksUS())  
        .percentile_between(0, 7.5))  
    universe = (universe_top|universe_bottom)  
</code></pre>

<p>The best of both worlds?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a5d43c05b8557000ffa8ff2' id='5a5d43c05b8557000ffa8ff2'>
<a href='#5a5d43c05b8557000ffa8ff2'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/50842732cb5e1a02000000d1'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f86535a7fafab6b7d903fc1461362f0a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/50842732cb5e1a02000000d1'>James Villa</a>
<span class='badge medal'></span>
</div>
<a UTCms='1516061632000' class='quanto-date posted-at response-posted-at' href='#5a5d43c05b8557000ffa8ff2'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Yes, Grant. Individual stock volatility is directly correlated to its beta to SPY. Again as stock universe is highly correlated to SPY, stocks with low volatility will tend not to veer too much from the movement of SPY and  vice versa.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a5d58eb65ebc3001a94430d' id='5a5d58eb65ebc3001a94430d'>
<a href='#5a5d58eb65ebc3001a94430d'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1516067051000' class='quanto-date posted-at response-posted-at' href='#5a5d58eb65ebc3001a94430d'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Base portfolio expectation equation: E[R(p)] = r_f + β∙(E[R(m)]  – r_f). Gives a portfolio&#39;s return expected value as the added premium over the risk-free rate. </p>

<p>This translate to: E[R(p)] =  r_f + β∙E[R(m)]  – β∙r_f = β∙E[R(m)] + (1 – β)∙r_f. A beta of one will give: E[R(m)], the expected market return, as expected.</p>

<p>Beta-neutral can be expressed as hedging the portfolio: </p>

<p>E[R(p)] = r_f + β∙(E[R(m)]  – r_f) – β∙E[R(m)] = r_f – β∙r_f = (1 – β)∙r_f</p>

<p>Market-neutral has half long and half short: </p>

<p>E[R(p)] = r_f + 0.50∙β∙(E[R(m)]  – r_f) – 0.50∙β∙E[R(m)] = r_f – 0.50∙β∙r_f = (1 – 0.50∙β)∙r_f</p>

<p>The added restriction does have an impact, even if it could be minor.</p>

<p>Those are the numbers to expect. </p>

<p>This means that the beta-neutral, market-neutral stuff does not have that high a return expectancy. It will offer equity line stability (low volatility, beta and drawdowns) but at a cost.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a5db48d4ab5c60013993fec' id='5a5db48d4ab5c60013993fec'>
<a href='#5a5db48d4ab5c60013993fec'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/50842732cb5e1a02000000d1'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f86535a7fafab6b7d903fc1461362f0a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/50842732cb5e1a02000000d1'>James Villa</a>
<span class='badge medal'></span>
</div>
<a UTCms='1516090509000' class='quanto-date posted-at response-posted-at' href='#5a5db48d4ab5c60013993fec'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Guy, I believe your formula on beta neutral is incorrect:</p>

<blockquote>
<p>Beta-neutral can be expressed as hedging the portfolio:</p>
</blockquote>

<p>E[R(p)] = r_f + β∙(E[R(m)] – r_f) – β∙E[R(m)] = r_f – β∙r_f = (1 – β)∙r_f</p>

<p>It should be: E[R(p)] = r_f </p>

<p>This is consistent with Investopedia&#39;s definition:</p>

<blockquote>
<p>What is a &#39;Zero-Beta Portfolio&#39;<br>
A zero-beta portfolio is a portfolio constructed to have zero systematic risk or, in other words, a beta of zero. <strong>A zero-beta portfolio would have the same expected return as the risk-free rate</strong>. Such a portfolio would have zero correlation with market movements, given that its expected return equals the risk-free rate or a relatively low rate of return compared to higher-beta portfolios.  </p>
</blockquote>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a5db9344ab5c6001399401d' id='5a5db9344ab5c6001399401d'>
<a href='#5a5db9344ab5c6001399401d'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/50842732cb5e1a02000000d1'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f86535a7fafab6b7d903fc1461362f0a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/50842732cb5e1a02000000d1'>James Villa</a>
<span class='badge medal'></span>
</div>
<a UTCms='1516091700000' class='quanto-date posted-at response-posted-at' href='#5a5db9344ab5c6001399401d'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>And @Guy, your market neutral formula is also incorrect:</p>

<blockquote>
<p>Market-neutral has half long and half short:</p>
</blockquote>

<p>E[R(p)] = r_f + 0.50∙β∙(E[R(m)] – r_f) – 0.50∙β∙E[R(m)] = r_f – 0.50∙β∙r_f = (1 – 0.50∙β)∙r_f</p>

<p>It should be:<br>
E[R(p)] = r_f + 0.50∙β∙(E[R(m)] – r_f) – 0.50∙β∙E[R(m)-r_f] = r_f</p>

<p>Ergo, your conclusion, &quot;The added restriction does have an impact, even if it could be minor&quot;, is also incorrect. </p>

<p>However, your statement, &quot;This means that the beta-neutral, market-neutral stuff does not have that high a return expectancy. It will offer equity line stability (low volatility, beta and drawdowns) but at a cost&quot; is correct!  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a5dd93165ebc30014944a7d' id='5a5dd93165ebc30014944a7d'>
<a href='#5a5dd93165ebc30014944a7d'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1516099889000' class='quanto-date posted-at response-posted-at' href='#5a5dd93165ebc30014944a7d'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@ James -</p>

<p>Luca must have deleted his posts (hmm?), but I think his key insight is that beta is a trailing indicator.  And so while the Optimize API can satisfy a constraint (e.g. beta = +/- 0.05) based on a trailing window beta estimate, it doesn&#39;t stick going forward.  Out of the 
<code>QTradableStocksUS()</code> hypothetically there is a worst-case set of N stocks and a best-case set, for which the <code>SimpleBeta</code> and the corresponding Optimize API constraint will appear to be effective.  It is a mirage though, if the beta factor is not predictive; <a href="https://www.quantopian.com/posts/building-a-better-beta">building a better beta</a> requires improving the predictability of the beta factor.  One solution might be to formulate a more predictive short-term beta factor based on minute bars and feed it to the Optimize API.</p>

<p>Dollar-neutrality is another matter, since for a large number of N stocks, one would expect to be able to get reasonably close by going long on N/2 of them, and short on the remaining N/2.  Assuming daily re-balancing, by the end of the trading day, the probability of dollar-neutrality being off by much would be very low, for large N (e.g. N ~ 100), since the dollar-neutrality calculation is based on current prices.  However, it doesn&#39;t necessarily guarantee low beta; I think this depends on the universe and how one divides it up, long and short.</p>

<p>Regarding the value of a low-beta strategy, my understanding is that it is important in the hedge fund domain.  It basically comes down to the fact that buying beta is dirt-cheap, and so if a strategy relies on it, it is just money flying out the window.  Customers will get it elsewhere a lot cheaper.</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a5dea634ab5c60016994428' id='5a5dea634ab5c60016994428'>
<a href='#5a5dea634ab5c60016994428'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/50842732cb5e1a02000000d1'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f86535a7fafab6b7d903fc1461362f0a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/50842732cb5e1a02000000d1'>James Villa</a>
<span class='badge medal'></span>
</div>
<a UTCms='1516104291000' class='quanto-date posted-at response-posted-at' href='#5a5dea634ab5c60016994428'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Luca, why did you delete your posts? While it is your option to do that, it is not fair to those reading this thread. You come into my thread, engaged me in a discussion and after raising the white flag you delete your posts. I do not purport to have a monopoly of knowledge, that is why I like having these discussions and debates because it is through these that we get further insights and then discovery.  So now I take it that you&#39;ve be schooled!</p>

<p>@Grant, when Luca starts invoking the standard waiver of &quot;past performance does not guarantee future results&quot;, I crinch because it is a total cop out. Beta is not designed to be predictive but rather show the one year historical relationships of an individual stock&#39;s daily returns vis a vis that of SPY.  The key here is the measurement is one year.  And based on this measurement, empirical studies have shown that individual stock price movement is highly correlated to that of the market SPY. On a minute, one day or even one week basis, this relationship could swing wildly mainly due to time lag, reaction time to market moves, among other things.</p>

<p>The other thing to understand is a long/short market neutral strategy is not designed to be a standalone strategy but rather as a small component of  multi-asset portfolio that serves as a mitigator/hedge to market exposure risks. In a multi-tiered return/risk spectrum, market neutral strategies is one notch above risk free rates.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a5df1f64ab5c600169944a7' id='5a5df1f64ab5c600169944a7'>
<a href='#5a5df1f64ab5c600169944a7'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f1edd0b03b228000d000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/81292895877c628963a3b56b408533e7?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f1edd0b03b228000d000001'>Thomas Wiecki</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1516106230000' class='quanto-date posted-at response-posted-at' href='#5a5df1f64ab5c600169944a7'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@James: I only read your top comment so excuse if this is redundant and already addressed below. If I understand you correctly your hypothesis states that: stocks with similar beta in a balanced long/short portfolio (net-zero) should naturally lead to beta-neutral portfolio, so why add it as an extra constraint?</p>

<p>I guess I see two related problems with that theory:<br>
1. It&#39;s only true if the stocks indeed have similar beta and the long/short sides are not beta-biased.<br>
2. Your examples show that these algos actually exist and by removing the beta constraint in the optimizer, beta goes up. It&#39;s not surprising that returns increase if you allow for more beta as the stock-market has mostly gone up. Another example is the ML algo which is short-beta biased. I haven&#39;t yet found out how it picks that beta-bias up but the algo is certainly net-zero.</p>

<p>So without the beta-constraint users would be incentivized to submit positively beta-biased long/short algorithms that hit the upper beta limit to bank on the market continuing to go up.</p>

<p>Finally, even if that hypothesis were true, the beta-constraint would just be a noop in that case and thus irrelevant if we included it.</p>

<p>Let me know if I misunderstood / mischaracterized your hypothesis.  </p>
</div>
<div class='disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='5a5dff424ab5c60d4c993abb' id='5a5dff424ab5c60d4c993abb'>
<a href='#5a5dff424ab5c60d4c993abb'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/50842732cb5e1a02000000d1'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f86535a7fafab6b7d903fc1461362f0a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/50842732cb5e1a02000000d1'>James Villa</a>
<span class='badge medal'></span>
</div>
<a UTCms='1516109634000' class='quanto-date posted-at response-posted-at' href='#5a5dff424ab5c60d4c993abb'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Thomas, first thanks for your quick response. As to your first problem:</p>

<blockquote>
<ol>
<li>It&#39;s only true if the stocks indeed have similar beta and the long/short sides are not beta-biased.</li>
</ol>
</blockquote>

<p>This we have to prove with numbers and I will guidance on how we can do this later.  My theory hinges on empirical studies that shows that by standard beta measurements (daily stock returns for one year), the stock universe is highly correlated with the market as represented by SPY.  Given this relationship, the Dollar Neutral constraint will naturally almost always guarantee beta neutrality or at the very least within the limits of +- 0.3 threshold on beta because the beta of longs cancels or offset that of the shorts.</p>

<p>Now as to the guidance on how we can prove or disprove this theory ( I would have done it myself except my computing power and python skills are limited) , I propose:<br>
       1) Run a pipeline on QTradeableUS<br>
       2) Randomly select 250 longs and 250 shorts<br>
       3)  Compute SimpleBeta (I understand there is the super fast vectorized version)<br>
       4) Run 100 times (or as many as you like) through Optimize API with all constraints except beta.<br>
       5)  Finally, see how many times it breaches the +-0.3 threshold of beta.<br>
If this is a significant number then I am totally wrong.</p>

<p>On your second problem:  </p>

<blockquote>
<ol>
<li>Your examples show that these algos actually exist and by removing the beta constraint in the optimizer, beta goes up. It&#39;s not surprising that returns increase if you allow for more beta as the stock-market has mostly gone up. Another example is the ML algo which is short-beta biased. I haven&#39;t yet found out how it picks that beta-bias up but the algo is certainly net-zero.</li>
</ol>
</blockquote>

<p>Yes, it does increase beta but does not breach the +-0.3 threshold, at least in my two examples and so far on my personal algos. The prospect alone of improved returns and  drawdowns without this beta constraint, as illustrated in above two examples, is crucial if I&#39;m proven right. Secondly, as Grant and I both found out, the beta constraint does not work or at least give you an Infeasible Error when the set parameter is breached.  In the case of Grant&#39;s algo, he tried to constrain beta to within +- 0.05 but still got a beta of 0.18 in the end. I tried it too in my personal algos and it seem that it does not operationally work. Why is this so? Is there a problem programmatically with Optimize API or does the logic break down because of inconsistencies in the various constraints as it relates to the desired objective?</p>

<p>On your last comment:</p>

<blockquote>
<p>Finally, even if that hypothesis were true, the beta-constraint would just be a noop in that case and thus irrelevant if we included it.</p>
</blockquote>

<p>Not if it curtails the prospect of increased returns and improved drawdowns.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a5e038e65ebc30014944d8f' id='5a5e038e65ebc30014944d8f'>
<a href='#5a5e038e65ebc30014944d8f'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f1edd0b03b228000d000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/81292895877c628963a3b56b408533e7?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f1edd0b03b228000d000001'>Thomas Wiecki</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1516110734000' class='quanto-date posted-at response-posted-at' href='#5a5e038e65ebc30014944d8f'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thanks for the thoughtful response.</p>

<p>I agree with your experiment proposal, that would be quite interesting. Do note, however, that it&#39;s possible, especially for ML algos, to latch onto alphas that are correlated to the market and essentially find that the market goes up and directly inject a beta bias (I think something like this is happening to the ML algo I posted a while ago).</p>

<p>I feel like the operational problem you point to is much more important, though. And it&#39;s possible that there is a bug which we should definitely fix. We&#39;ll look into it.</p>

<p>The optimizer also should only kick in if the beta limit would be breached, but not before. If it doesn&#39;t do that this also seems like a bug to be fixed. But if we think about it as a fail-safe if the portfolio does pick up beta (or gets pushed over the edge due to noise) I think you wouldn&#39;t disagree that&#39;s useful?  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='5a5e06604ab5c66d2d994322' id='5a5e06604ab5c66d2d994322'>
<a href='#5a5e06604ab5c66d2d994322'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1516111456000' class='quanto-date posted-at response-posted-at' href='#5a5e06604ab5c66d2d994322'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@James, if you look at the base equation again, you have:</p>

<p>E[R(p)] = r_f + β∙(E[R(m)]  – r_f) =  r_f + β∙E[R(m)]  – β∙r_f</p>

<p>and with a  β = 0, you will have: E[R(p)] = r_f . So, Investopidia&#39;s, Wikipedia, the CAPM and academic definitions stand.</p>

<p>If you set a  β = 1, you will get: E[R(p)] = E[R(m)], which again stands. It is why buying index funds is so cheat. They hope to match the market&#39;s long-term performance. But anybody can do that just buying a tracking index such as SPY.</p>

<p>You change the picture once you want to hedge. Because in that case, you are not hedging the premium, you are hedging the market. You are hedging price movements. And therefore, it will have for equation:</p>

<p>E[R(p)] = r_f + β∙(E[R(m)]  – r_f) – β∙E[R(m)], which when recomposed will give:</p>

<p>E[R(p)] = r_f + β∙E[R(m)]  – β∙r_f – β∙E[R(m)], which invariably leads to:</p>

<p>E[R(p)] = r_f  – β∙r_f =  (1 – β)∙r_f</p>

<p>The outcome will be a low beta portfolio, and will slightly affect the long-term expected return. The term will approach r_f as β tends to zero:  (1 – β)∙r_f →  r_f  as  β → 0.</p>

<p>Conclusion, every equal sign stands.</p>

<p>As you said, such a strategy would be part of a portfolio of strategies. It would be used to dampen part of the volatility excursions of other strategies. These types of strategies can have a major role to play in the trillions of dollars that sit idle all over the planet and requiring excessive liquidity while providing some minimum positive return.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a5e0afc5b85570015fa9d19' id='5a5e0afc5b85570015fa9d19'>
<a href='#5a5e0afc5b85570015fa9d19'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/50842732cb5e1a02000000d1'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f86535a7fafab6b7d903fc1461362f0a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/50842732cb5e1a02000000d1'>James Villa</a>
<span class='badge medal'></span>
</div>
<a UTCms='1516112636000' class='quanto-date posted-at response-posted-at' href='#5a5e0afc5b85570015fa9d19'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Guy, got you, thanks!  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a5e0c9365ebc30017944d94' id='5a5e0c9365ebc30017944d94'>
<a href='#5a5e0c9365ebc30017944d94'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/50842732cb5e1a02000000d1'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f86535a7fafab6b7d903fc1461362f0a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/50842732cb5e1a02000000d1'>James Villa</a>
<span class='badge medal'></span>
</div>
<a UTCms='1516113043000' class='quanto-date posted-at response-posted-at' href='#5a5e0c9365ebc30017944d94'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Thomas, please link me to the ML algo you&#39;re referring to, I&#39;d like to have a look at it.</p>

<p>I hope you have a go at the proposed experiment though but agree that Optimize API more crucial. Actually, they&#39;re both interrelated and might discover some very interesting outcomes. Thanks again.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a5e0de34ab5c63c95993c7e' id='5a5e0de34ab5c63c95993c7e'>
<a href='#5a5e0de34ab5c63c95993c7e'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f1edd0b03b228000d000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/81292895877c628963a3b56b408533e7?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f1edd0b03b228000d000001'>Thomas Wiecki</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1516113379000' class='quanto-date posted-at response-posted-at' href='#5a5e0de34ab5c63c95993c7e'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@James: I won&#39;t have time to do that experiment. Shouldn&#39;t be too difficult though for a user to pick it up.  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='5a5e113b65ebc31fc79441dc' id='5a5e113b65ebc31fc79441dc'>
<a href='#5a5e113b65ebc31fc79441dc'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/50842732cb5e1a02000000d1'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f86535a7fafab6b7d903fc1461362f0a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/50842732cb5e1a02000000d1'>James Villa</a>
<span class='badge medal'></span>
</div>
<a UTCms='1516114235000' class='quanto-date posted-at response-posted-at' href='#5a5e113b65ebc31fc79441dc'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Thomas, hopefully a user picks it up.  But I&#39;m sure you have numerous research staff members and ample computer resources that can spare an hour or two do  something that might reveal something that is meaningful which could lead to the improvement of the Q model.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a5e8b6b5b8557595ffa95a3' id='5a5e8b6b5b8557595ffa95a3'>
<a href='#5a5e8b6b5b8557595ffa95a3'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1516145515000' class='quanto-date posted-at response-posted-at' href='#5a5e8b6b5b8557595ffa95a3'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I guess the biggest issue I see is the Optimize API beta constraint seemingly not doing its job, keeping beta within limits.  I&#39;d been happily over-fitting my way to a stupendous contest entry when I realized that the beta constraint wasn&#39;t doing a darn thing.  It&#39;s a serious matter, if the Q folk want to make money, since the market ain&#39;t gonna pay for beta.  Better figure out what&#39;s goin&#39; on!  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a5e95ec4ab5c66bb4993e90' id='5a5e95ec4ab5c66bb4993e90'>
<a href='#5a5e95ec4ab5c66bb4993e90'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/54e159f70f3369eb9200019b'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/2a53f34ae7e99886508adf2b4d76bff2?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/54e159f70f3369eb9200019b'>Vladimir</a>
<span class='badge medal'></span>
</div>
<a UTCms='1516148204000' class='quanto-date posted-at response-posted-at' href='#5a5e95ec4ab5c66bb4993e90'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Beta Constraint totally unnecessary!</p>

<p><a href="https://www.quantopian.com/posts/a-new-contest-is-coming-more-winners-and-a-new-scoring-system#5a5e78a165ebc3334094439b">To my mind it absolutely does not matter on which days mostly algo makes money when SPY is up or down.
More important to build such an algo that makes more money than SPY with low volatility.</a></p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a5ea268a2dd1e000cde4d36' id='5a5ea268a2dd1e000cde4d36'>
<a href='#5a5ea268a2dd1e000cde4d36'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/50842732cb5e1a02000000d1'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f86535a7fafab6b7d903fc1461362f0a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/50842732cb5e1a02000000d1'>James Villa</a>
<span class='badge medal'></span>
</div>
<a UTCms='1516151400000' class='quanto-date posted-at response-posted-at' href='#5a5ea268a2dd1e000cde4d36'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Vladimir, thanks for concurring.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a60cad3014d25627b6cd36e' id='5a60cad3014d25627b6cd36e'>
<a href='#5a60cad3014d25627b6cd36e'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1516292819000' class='quanto-date posted-at response-posted-at' href='#5a60cad3014d25627b6cd36e'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>The quest for a beta-neutral market-neutral portfolio has led to the following equation based on the CAPM: </p>

<p>E[R(p)] = r_f + 0.50∙β∙(E[R(m)]  – r_f) – 0.50∙β∙E[R(m)] = r_f – 0.50∙β∙r_f = (1 – 0.50∙β)∙r_f</p>

<p>This translate to: the expected outcome for a beta-neutral market-neutral portfolio is to achieve something close to the risk-free rate since the last term will approach r_f as β tends to zero:  (1 – 0.50∙β)∙r_f →  r_f  as  β → 0.</p>

<p>Quantopian interprets this “almost r_f” as alpha. There seems to be some confusion between what could be called a “source of profit” and what has been defined as alpha over the past 50 years. Regardless, to improve on the above formula would require just that, the old formulation for alpha which is the return over and above the risk premium (E[R(m)]  – r_f) .</p>

<p>The equation for that is: E[R(p)] = r_f + 0.50∙β∙(E[R(m)]  – r_f) – 0.50∙β∙E[R(m)] + α, which would result in: E[R(p)] = (1 – 0.50∙β)∙r_f  + α. </p>

<p>The effort needed to achieve an alpha greater than zero might be considerable. As of yet, I have seen little of it being deployed in this type of trading strategy, at least, from those presented to date. But, that does not change the fact that to achieve a higher performance level, alpha will have to be there, and be positive.</p>

<p>To gain some traction, one could go for a positive net beta exposure through the stock selection process itself. But, that is not alpha per se, it is simply accepting some risk exposure to which is associated its rewards. Nonetheless, accepting to be beta positive within limits can improve the performance level. For instance, we could have:  E[R(p)] = (1 – 0.50∙β)∙r_f  + 0.30∙E[R(m)] + α, for a 0.30 net beta exposure. </p>

<p>You would still need methods to extract some added alpha. Note that with this last formula, you will be able to exceed the expected market return: E[R(p)] &gt; E[R(m)], only if: (1 – 0.50∙β)∙r_f  + 0.30∙E[R(m)] + α &gt; E[R(m)]. </p>

<p>The extracted alpha would need to satisfy:  α &gt; E[R(m)] - 0.30∙E[R(m)] - (1 – 0.50∙β)∙r_f . And that is not a trivial task.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a60cfcb43358c3716b83c7c' id='5a60cfcb43358c3716b83c7c'>
<a href='#5a60cfcb43358c3716b83c7c'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/50842732cb5e1a02000000d1'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f86535a7fafab6b7d903fc1461362f0a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/50842732cb5e1a02000000d1'>James Villa</a>
<span class='badge medal'></span>
</div>
<a UTCms='1516294091000' class='quanto-date posted-at response-posted-at' href='#5a60cfcb43358c3716b83c7c'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Guy, agree with your assessments and formulations.  If you look around industry literature of hedge funds deploying long/short market neutral strategy, you will find that they benchmark returns to 3 month US Treasury Bills (i.e. risk free rates), that is why I find it odd that they use SPY as the benchmark. Fact is, if they&#39;re targeting zero beta then their expected return should equal risk free rate.  It is only because there is leeway in their threshold of beta (between -+ 0.3) that you can get returns above risk free rates and it is a very tall order to get returns, even with this leeway, above market returns without sacrificing increased volatilities.   As per Thomas Weicki&#39;s statement, they want to tighten this leeway further, good luck with that!  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a6130f77e4d1279d7deaec6' id='5a6130f77e4d1279d7deaec6'>
<a href='#5a6130f77e4d1279d7deaec6'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1516318967000' class='quanto-date posted-at response-posted-at' href='#5a6130f77e4d1279d7deaec6'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi James, Guy, &amp; anyone else with the idea that beta ~ 0 will automatically equate to zero return over the risk-free rate,</p>

<p>Perhaps you could provide a simple, intuitive explanation (without mathematical machinations) as to why beta ~ 0 is a really bad idea.  I see this echoed several places:</p>

<p><a href="http://www.investinganswers.com/financial-dictionary/stock-market/zero-beta-portfolio-1404">http://www.investinganswers.com/financial-dictionary/stock-market/zero-beta-portfolio-1404</a><br>
<a href="https://www.investopedia.com/terms/z/zero-betaportfolio.asp">https://www.investopedia.com/terms/z/zero-betaportfolio.asp</a></p>

<p>I gather, without digesting the details, that if one subscribes to something called the capital asset pricing model, then somehow a beta ~ 0 portfolio won&#39;t return much.  Or is this just another version of the efficient market hypothesis, taken to an extreme?  In other words, Quantopian is banking on inefficiencies with a beta ~ 0 constraint?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a613e5beb948e6a1ec88cd0' id='5a613e5beb948e6a1ec88cd0'>
<a href='#5a613e5beb948e6a1ec88cd0'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1516322395000' class='quanto-date posted-at response-posted-at' href='#5a613e5beb948e6a1ec88cd0'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Grant, there is no mathematical machination. But, there is an equal sign on the table. </p>

<p>The CAPM has been accepted since the 60&#39;s as a reasonable portfolio return expectation formula and it has bared an equal sign ever since. In a risk-return space chart, it gives a upward slanting straight line with an r_f intercept.</p>

<p>Quantopian used the same formula in its lecture:<br>
<a href="https://www.quantopian.com/lectures/the-capital-asset-pricing-model-and-arbitrage-pricing-theory">https://www.quantopian.com/lectures/the-capital-asset-pricing-model-and-arbitrage-pricing-theory</a></p>

<p>So, I can not say that I am bringing something new to the discussion. </p>

<p>However, I do look at what the equation implies and where it leads to. Ignoring the math of a problem does not solve the problem. Also, ignoring the shoulders we stand on can at times only lead to reinventing the wheel.</p>

<p>All the “mathematical machinations” presented were limited to additions, subtractions and multiplications. Therefore, there is no “voodoo” in the presented math.</p>

<p>Nonetheless, there are a lot of questions to be answered. Not on the evaluation of the equations, that is simple, but on their interpretation for what they do say.</p>

<p>An equal sign is a powerful statement. It is not a choice, or an opinion. It can only be dismissed with a not equal sign... And in this case, everyone is invited to try!</p>

<p>All my equations, based on what is already there, explore the mathematical model of a zero-beta market-neutral trading strategy. And, what is said is that: such a portfolio will have: E[R(p)] = (1 – 0.50∙β)∙r_f, as long-term expected return. Moreover, as  β → 0, you will get E[R(p)] → r_f, the risk-free rate. </p>

<p>Therefore, it becomes reasonable to state that if one wants more than the risk-free rate of return out of this kind of portfolio, then they better bring some positive alpha (some added skills) to the mix whatever its origin because they won&#39;t get it as a free lunch from the zero-beta market-neutral strategy.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a6141d3b1defc78d4b705cc' id='5a6141d3b1defc78d4b705cc'>
<a href='#5a6141d3b1defc78d4b705cc'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1516323283000' class='quanto-date posted-at response-posted-at' href='#5a6141d3b1defc78d4b705cc'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><blockquote>
<p>Therefore, it becomes reasonable to state that if one wants more than the risk-free rate of return out of this kind of portfolio, then they better bring some positive alpha (some added skills) to the mix whatever its origin because they won&#39;t get it as a free lunch from the zero-beta market-neutral strategy.</p>
</blockquote>

<p>I gather that is the whole point, to null out the gross market effect and isolate positive returns that are not attributable to the market.  Makes sense, so I don&#39;t know what all this jazz is about only being able to get the risk-free rate with beta ~ 0; but then I haven&#39;t studied the CAPM.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a6150f4b1defc7be5b706a0' id='5a6150f4b1defc7be5b706a0'>
<a href='#5a6150f4b1defc7be5b706a0'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1516327156000' class='quanto-date posted-at response-posted-at' href='#5a6150f4b1defc7be5b706a0'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Grant, you sometimes advocate that we should know the fundamental reasons as to how and why our trading strategies work. It is not only the mechanics of the trade that should be of interest. But the why you should win the game over the long haul. What reasons made your program do what it did and why should it have been so. More importantly, why should it do so going forward.</p>

<p>You would be the first to say that there is almost no profit in the following except for some fraction of the risk-free rate.</p>

<p>E[R(p)] = r_f + 0.50∙E[R(SPY)]  – r_f) – 0.50∙E[R(SPY)]  = (1 – 0.50)∙r_f, where you went long the market and then short the same market. R(SPY) is used as a proxy for the market R(m). Such a strategy has an expected outcome of +0.50∙r_f. </p>

<p>So, all that jazz has some very simple reasoning. Note that SPY has a beta of one in this case. But will give a zero-beta market-neutral portfolio nonetheless.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a61c5cab1defc0a7fb708ab' id='5a61c5cab1defc0a7fb708ab'>
<a href='#5a61c5cab1defc0a7fb708ab'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/50842732cb5e1a02000000d1'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f86535a7fafab6b7d903fc1461362f0a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/50842732cb5e1a02000000d1'>James Villa</a>
<span class='badge medal'></span>
</div>
<a UTCms='1516357066000' class='quanto-date posted-at response-posted-at' href='#5a61c5cab1defc0a7fb708ab'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Grant, beta neutral and market neutral are two different and distinct strategical concepts that achieves basically the same or similar outcomes in terms of expected returns (at or close to risk free rates) as shown by @Guy through the CAPM equations.  We are not saying it is a bad idea, only explaining what  should be expected in terms of returns with these kind of strategies and what this kind of strategies are used for in a multi-asset investment portfolio.  For my part, since both are trying to achieve the same expected returns, I want to get rid of the redundancy of the beta constraint in the context of Optimize API / Risk Model of the Q framework (long/short market neutral strategy) for the following reasons:<br>
      1. Based on empirical studies that concludes the stock universe generally moves  with the market price movements as represented by SPY. Translated into the standard beta to SPY formula (one year daily returns) should give a postive and statistically significant correlation between the stock universe and SPY.  Since we have such significant beta correlations, the market (dollar) neutral constraint which guarantees that one has a fairly equal amounts of longs and shorts will almost always also guarantee beta neutrality because the betas of the longs cancels the betas of the shorts. But because of the words, &quot;generally moves with the market&quot;, my hypothesis can be wrong to some extent that is why I provided guidance above as to how this can be proven or disproven. Q staff seem indifferent to this test / guidance.<br>
     2. As your algo, the Q model algo above and my personal algos have shown, the beta constraint does not operationally do its job at constrainting beta to your set thresholds.  I suspect its either a bug in code or inconsistencies in constraints that causes the logic to breakdown in optimization of desired objective.<br>
     3. As your algo, the Q model algo above and my personal algos have shown, commenting out the beta constraint have resulted in improved returns and improved drawdowns while not breaching the thresholds for beta at +-0.3. The effect might not be universal to all algos because a bad algo will always be a bad algo, with or without this constraint. But the prospect alone of  good algo getting better returns and better drawdowns while still staying within the beta thresholds without this added beta constraint, is a game changer for me.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a61d24cb1defc1046b706a6' id='5a61d24cb1defc1046b706a6'>
<a href='#5a61d24cb1defc1046b706a6'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1516360268000' class='quanto-date posted-at response-posted-at' href='#5a61d24cb1defc1046b706a6'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thanks Guy &amp; James -</p>

<p>I&#39;ll noodle on this stuff, as time allows.  The observation that the Optimize API beta constraint does nothing (and probably has downside) is valuable.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a61ec83eb948e03e7c89407' id='5a61ec83eb948e03e7c89407'>
<a href='#5a61ec83eb948e03e7c89407'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f1edd0b03b228000d000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/81292895877c628963a3b56b408533e7?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f1edd0b03b228000d000001'>Thomas Wiecki</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1516366979000' class='quanto-date posted-at response-posted-at' href='#5a61ec83eb948e03e7c89407'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I really like the mathematical rigor applied to the arguments here. However, I don&#39;t think we should take a model to be something more than that. Like with any model, we know it&#39;s wrong (but definitely useful). More concretely, CAPM assumes the Efficient Market Hypothesis (EMH) to be true, of which there are several counter-examples (like momentum; but I do realize this is a much larger debate). We are looking for alpha which is by definition unrelated to beta (and not present in the CAPM formulation used here). So I think the underlying argument put forward here is that the EMH is true, which is a bit of a different discussion.</p>

<p>The other thread I see is that by applying the risk model too strictly (to reduce beta or other exposures) is detrimental. I definitely agree there. Again, it&#39;s a model, and thus noisy, so should be applied with care to not dilute any alpha.  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='5a61f1cf7e4d1279d7debb47' id='5a61f1cf7e4d1279d7debb47'>
<a href='#5a61f1cf7e4d1279d7debb47'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/50842732cb5e1a02000000d1'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f86535a7fafab6b7d903fc1461362f0a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/50842732cb5e1a02000000d1'>James Villa</a>
<span class='badge medal'></span>
</div>
<a UTCms='1516368335000' class='quanto-date posted-at response-posted-at' href='#5a61f1cf7e4d1279d7debb47'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Thomas, so let&#39;s start with what both you and I agree now. Care to update me on what Q is doing to address these.  What is frustating for me is, in my sincere efforts to try and help Q improve its framework by bringing forward what I think is remiss in it, I am quickly brush aside.  Engaged with me, debate with me, disprove my hypothesis, because in the final analysis, it is through this process that we get further insights and discoveries. Let&#39;s throw egos aside since neither you or I have monopoly of knowledge.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a61f5deeb948e76a5c88dd5' id='5a61f5deeb948e76a5c88dd5'>
<a href='#5a61f5deeb948e76a5c88dd5'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f1edd0b03b228000d000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/81292895877c628963a3b56b408533e7?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f1edd0b03b228000d000001'>Thomas Wiecki</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1516369374000' class='quanto-date posted-at response-posted-at' href='#5a61f5deeb948e76a5c88dd5'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Sorry you feel that way, but engaging with you and your arguments is what I&#39;m trying to do.  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='5a61fff17e4d1279d7debbfa' id='5a61fff17e4d1279d7debbfa'>
<a href='#5a61fff17e4d1279d7debbfa'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/50842732cb5e1a02000000d1'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f86535a7fafab6b7d903fc1461362f0a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/50842732cb5e1a02000000d1'>James Villa</a>
<span class='badge medal'></span>
</div>
<a UTCms='1516371953000' class='quanto-date posted-at response-posted-at' href='#5a61fff17e4d1279d7debbfa'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Thomas, yeah right with short and deflective answers. I think it&#39;s  best that we just totally ignore each other. You have done nothing on the issue I raised earlier with regards to the proper calculations of Sharpe and Sortino ratios ( thought I convinced you on the merits of these ) and I highly doubt if you will anything with the issues I raised in this thread.  So I bid you adieu...  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a6206837e4d127d69deb140' id='5a6206837e4d127d69deb140'>
<a href='#5a6206837e4d127d69deb140'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1516373635000' class='quanto-date posted-at response-posted-at' href='#5a6206837e4d127d69deb140'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Thomas, we use mathematical models to give us approximations of what is out there. And we give them an equal sign if, and only if, they do seem as reasonable explanations for what we are appraising for whatever purpose. There is a universe explained in E = mc^2, a simple formula and yet a world of study all by itself.</p>

<p>When we put an equal sign on the table, it better hold, that it be an approximation or not. It must absolutely make some sense, otherwise I would be the first to put a not equal sign on such a model.</p>

<p>The CAPM is a very basic equation. It only says: there is this part and then there is this other part. Here is an illustration in a portfolio context:</p>

<p><img src="https://image-proxy.quantopian.com/34edfde216a2cdc5cd7e82682d9030f3af0964ce/687474703a2f2f616c706861706f77657274726164696e672e636f6d2f7175616e746f7069616e2f434d4c5f616c7068612e706e67" /></p>

<p>Was said in a previous post, that from such a model, even if it is just an approximation, all the parts are accounted for. There is no space in the CAPM for any alpha. Not in the sense Quantopian measures it, but, in the traditional Jensen definition of alpha.</p>

<p>Should someone want to extract some alpha from the CAPM, then they will have to bring it themselves, and justify its inclusion, as in:</p>

<p>E[R(p)] = r_f + β∙(E[R(m)]  – r_f)  + α</p>

<p>Including alpha, not as some error term or luck factor, but as an explicit added performance level, no matter how it was or will be achieved. Note that the CAPM equal sign will stand for an alpha of zero, as it has stood for over five decades.</p>

<p>Mr. Buffett over his 50+ year career has achieved close to a 20% CAGR while the market over the same period had only provided, as approximation, a little less than 10%. </p>

<p>That it be for Mr. Buffett or anyone else, the market over those 50 years only had a 10% CAGR expectancy: E[R(m)] = 10% CAGR. It is all it had to offer. So, for sure, Mr. Buffett added some skills to the game, read some Jensen alpha. Are there economic reasons why he could achieve those results over such an extended time horizon that escaped the CAPM aficionados? Yes, and plenty of them. He simply adapted his investment methodology to willingly generate this alpha. One would have to say, in hindsight, that the generated alpha was a direct consequence of his actions. Over some 30 years ago, he gave the recipe of his methodology. At the time, he also said that nobody would follow his lead anyway. </p>

<p>From here, guess what we should do? We should also find means to generate our own and mostly know why it will be generated going forward. Not as a luck factor, but as a direct consequence of our methods of play.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a621627eb948e07e9c89164' id='5a621627eb948e07e9c89164'>
<a href='#5a621627eb948e07e9c89164'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/52b0e0e0271a27fc88000049'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e5451406e743420c700eb2b054b2fc57?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/52b0e0e0271a27fc88000049'>Blue Seahawk</a>
</div>
<a UTCms='1516377639000' class='quanto-date posted-at response-posted-at' href='#5a621627eb948e07e9c89164'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Two guys both proud of their cars calls for a race. [edit]</p>

<blockquote>
<p>Like with any model, we know it&#39;s wrong (but definitely useful).</p>
</blockquote>

<p>[edit] when someone is saying, here&#39;s something better, sell tickets and beer, on your mark, get set,  ...</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a62185bb1defc0b4bb70b8f' id='5a62185bb1defc0b4bb70b8f'>
<a href='#5a62185bb1defc0b4bb70b8f'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/50842732cb5e1a02000000d1'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f86535a7fafab6b7d903fc1461362f0a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/50842732cb5e1a02000000d1'>James Villa</a>
<span class='badge medal'></span>
</div>
<a UTCms='1516378203000' class='quanto-date posted-at response-posted-at' href='#5a62185bb1defc0b4bb70b8f'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Blue Seahawk, oh yes I&#39;m proud of my car but it&#39;s not a race car, it&#39;s a luxury car. So I wouldn&#39;t want to go and race it but I would want others to appreciate it, LOL!  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a6273338379cd0014af2f9d' id='5a6273338379cd0014af2f9d'>
<a href='#5a6273338379cd0014af2f9d'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1516401459000' class='quanto-date posted-at response-posted-at' href='#5a6273338379cd0014af2f9d'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>There seem to be two separate issues at play here:</p>

<ol>
<li>Should Quantopian be targeting beta ~ 0 for the long-short U.S. equity portion of their super-duper crowd-sourced  &quot;Q Fund&quot; (formally known as the <a href="https://www.sec.gov/Archives/edgar/data/0001707128/000170712817000001/xslFormDX01/primary_doc.xml">1337 Street Fund</a>)?  As a side bar, we peon crowd folk didn&#39;t get a say in naming it, so I&#39;m gonna call it the &quot;Q Fund&quot;--it rolls off the tongue much more easily.<br></li>
<li>Does the Optimize API do diddly squat in controlling beta?</li>
</ol>

<p>As far as #1 goes, it makes sense to me, assuming that it is computed in a relevant way.  I think they are basically saying, y&#39;all isolate the alpha, so we don&#39;t have to bother (e.g. by nulling it out with a hedging instrument).  We&#39;ll award bonus points to the amateur quant who can do the best at stomping down correlation to the market, and pay for whatever is left.  To me, it makes sense that they wouldn&#39;t have customers lining up to pay 2/20 for SPY.  No rocket science or fancy math required.</p>

<p>The #2 issue is different.  It suggests that there is a gap in the tools available to users to achieve beta ~ 0.  So, I&#39;d be interested in hearing more about #2.  It smells like a practical issue, versus an academic one over CAPM/EMH which will just land at investing in an index fund with Vanguard or the institutional equivalent.</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a62a0648379cd0011af32e7' id='5a62a0648379cd0011af32e7'>
<a href='#5a62a0648379cd0011af32e7'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/50842732cb5e1a02000000d1'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f86535a7fafab6b7d903fc1461362f0a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/50842732cb5e1a02000000d1'>James Villa</a>
<span class='badge medal'></span>
</div>
<a UTCms='1516413028000' class='quanto-date posted-at response-posted-at' href='#5a62a0648379cd0011af32e7'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Can somebody from Q staff, other than you know who, please comment on possible inconsistency and/or vulnerabilty in code from above Q model algo?  This snippet of code pertaining to beta (also recently changed to SimpleBeta) is exposed for users to change:  </p>

<pre><code>    # Alpha Combination  
    # -----------------  
    # Assign every asset a combined rank and center the values at 0.  
    # For UNIVERSE_SIZE=500, the range of values should be roughly -250 to 250.  
    combined_alpha = (fcf_zscore + yield_zscore + sentiment_zscore).rank().demean()  
    **beta = 0.66*RollingLinearRegressionOfReturns(  
                    target=sid(8554),  
                    returns_length=5,  
                    regression_length=260,  
                    mask=combined_alpha.notnull() &amp; Sector().notnull()  
                    ).beta + 0.33*1.0**

</code></pre>

<p>This beta calculation is used to constrain beta to minimum and maximum levels per user setting in Optimize API:</p>

<pre><code>    # Constrain beta-to-SPY to remain under the contest criteria.  
    beta_neutral = opt.FactorExposure(  
        pipeline_data[[&#39;beta&#39;]],  
        **min_exposures={&#39;beta&#39;: -0.05},  
        max_exposures={&#39;beta&#39;: 0.05},**  
    )  
</code></pre>

<p>Contest threshold for beta is between +- 0.30.  If user has the option to change window length in beta calculation, (1) doesn&#39;t this create inconsistencies with the beta threshold of +-0.30 because the beta distribution of different window lengths is also different, and (2) doesn&#39;t this create vulnerabilities in the sense that it could be used to &quot;game&quot; the algo if the beta constraint operation in Optimize API actually worked. I think the beta calculation code should be hardwired to standardized one year daily returns and hidden from user to change parameters perhaps in the riskloadings pipeline. Just asking...This issue is not related to my hypothesis of beta as unnecessary because of redundancy with dollar neutral.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a62f8924491d24d75e7e218' id='5a62f8924491d24d75e7e218'>
<a href='#5a62f8924491d24d75e7e218'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/50842732cb5e1a02000000d1'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f86535a7fafab6b7d903fc1461362f0a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/50842732cb5e1a02000000d1'>James Villa</a>
<span class='badge medal'></span>
</div>
<a UTCms='1516435602000' class='quanto-date posted-at response-posted-at' href='#5a62f8924491d24d75e7e218'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Karl, &quot;Relativity&quot;, a word made famous by Prof. Albert Einstein is the key to understanding Information Ratio in the context of market neutral strategies. What does the hedge fund industry use as benchmark for market neutral strategies?  Three month US Treasury Bills (aka risk free rates) not SPY. Below I quote a Morningstar whitepaper ( <a href="http://advisor.morningstar.com/uploaded/pdf/alt_marketneutralmfcs.pdf">http://advisor.morningstar.com/uploaded/pdf/alt_marketneutralmfcs.pdf</a>) :</p>

<blockquote>
<p>Because market-neutral funds hedge out broad<br>
market risk, a cashlike benchmark (such as Treasury<br>
bills) is more appropriate than a stock or bond<br>
market index.  </p>
</blockquote>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a631f664491d2032ce7eb1c' id='5a631f664491d2032ce7eb1c'>
<a href='#5a631f664491d2032ce7eb1c'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1516445542000' class='quanto-date posted-at response-posted-at' href='#5a631f664491d2032ce7eb1c'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>A brief note, in case folks are dinking around with trying to null out beta.  I&#39;ve found that a bias is required by the Optimize API constraints to see a dramatic effect:</p>

<pre><code>MIN_BETA_EXPOSURE = -1  
MAX_BETA_EXPOSURE = -0.5  
</code></pre>

<p>I think what&#39;s going on is that for a volatile universe, the trailing beta factor is not predictive for stocks that are tending to run up with the bull market.  So, a biased Optimize API constraint on beta is required to compensate for the lack of predictability.</p>

<p>I plan to do a separate post on this topic, since this thread is too convolved with CAPM/EMH stuff (which I&#39;m sure is important and relevant to the Quantopian enterprise, but I&#39;m just interested in understanding how to use the tools).  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a63217b4491d27d1fe7e378' id='5a63217b4491d27d1fe7e378'>
<a href='#5a63217b4491d27d1fe7e378'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/50842732cb5e1a02000000d1'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f86535a7fafab6b7d903fc1461362f0a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/50842732cb5e1a02000000d1'>James Villa</a>
<span class='badge medal'></span>
</div>
<a UTCms='1516446075000' class='quanto-date posted-at response-posted-at' href='#5a63217b4491d27d1fe7e378'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Grant, I refer to my new thread for answers <a href="https://www.quantopian.com/posts/possible-implementation-bug-with-beta">possible-implementation-bug-with-beta</a></p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a633d1330e7980b8f563ba1' id='5a633d1330e7980b8f563ba1'>
<a href='#5a633d1330e7980b8f563ba1'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1516453139000' class='quanto-date posted-at response-posted-at' href='#5a633d1330e7980b8f563ba1'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>See <a href="https://www.quantopian.com/posts/beta-constraint-study">https://www.quantopian.com/posts/beta-constraint-study</a>.  Kinda interesting.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a6340cf30e798000e563dc0' id='5a6340cf30e798000e563dc0'>
<a href='#5a6340cf30e798000e563dc0'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/50842732cb5e1a02000000d1'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f86535a7fafab6b7d903fc1461362f0a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/50842732cb5e1a02000000d1'>James Villa</a>
<span class='badge medal'></span>
</div>
<a UTCms='1516454095000' class='quanto-date posted-at response-posted-at' href='#5a6340cf30e798000e563dc0'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Grant,  I&#39;ve already ran several and similar tests in this thread possible-implementation-bug-with-beta.  Observations lead to several findings that are confirming of the hypothesis of this thread that beta is not only totally unnecessary but also (1) beta constraint in Optimize  does not do a good job constraining beta to configurable set levels, (2) implementation bug, exposing beta calculation to become user configurable lead to inconsistencies and vulnerabilities and (3) doing away with beta totally has positive effects in terms of increased returns and improved drawdowns.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a6383308379cd3dfaaf35c1' id='5a6383308379cd3dfaaf35c1'>
<a href='#5a6383308379cd3dfaaf35c1'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1516471088000' class='quanto-date posted-at response-posted-at' href='#5a6383308379cd3dfaaf35c1'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Grant, you said: “... wouldn&#39;t have customers lining up to pay 2/20 for SPY”. Yes indeed, even if some hedge funds do about the equivalent of a SPY return, some even less. </p>

<p>I would add, Q won&#39;t see that many paying 2/20 for the risk-free rate either. But, their game plan is different. And, if I understand it correctly, it is very serious business.</p>

<p>Why are the foundations as to the structure of capital markets important even in a gaming environment? It is very simple. Whatever the path that might link all that stuff from point a to point z, if it helps us better understand the game we play, then we can find ways to extract from it what we want.</p>

<p>It is like finding that the coin you will be using in what is suppose to be a 50/50 scenario is in fact biased. Knowing that the coin is biased, you have to find what is the best “betting system” that will not only respect the bias you found but also make it that you will not fail. Can someone lose playing a 90/10 biased coin? Yes, and it will be by going all-in all the time. The ride will be great until the first reverse flip.</p>

<p>The point being: it is our job to find the bias. Some call it predicting. But, whatever. If you find that, on average, some 60% of your bet selection are favorable by whatever means you used to find them, then your game plan should be a lot easier to design and implement. You should simply favor this bias whatever its direction.</p>

<p>It is like when @Thomas says: “...We are looking for alpha which is by definition unrelated to beta (and not present in the CAPM formulation used here).” See: <a href="https://www.quantopian.com/posts/beta-constraint-in-risk-model-totally-unnecessary#5a61ec83eb948e03e7c89407">https://www.quantopian.com/posts/beta-constraint-in-risk-model-totally-unnecessary#5a61ec83eb948e03e7c89407</a></p>

<p>To which I say: yes, and no.</p>

<p>True, the CAPM has no alpha: E[R(p)] = r_f + β∙(E[R(m)]  – r_f). The EMH states that there is none to be found, there is no free-lunch. Saying that whatever alpha, it is arbitraged away. However, markets are not that efficient.</p>

<p>In Q&#39;s notebook, <a href="https://www.quantopian.com/lectures/the-capital-asset-pricing-model-and-arbitrage-pricing-theory">https://www.quantopian.com/lectures/the-capital-asset-pricing-model-and-arbitrage-pricing-theory</a> they present the SML (security market line) formula as: E[Ri]=RF+ß(E[RM]-RF). </p>

<p>The difference being considering the asset&#39;s Ri return in a portfolio instead of the portfolio itself. And fair enough, in this case the beta will be all over the place. The more volatile a stock the higher the beta. However, when they picture the SML, they give it an intercept of zero, when in fact, it should be RF, the risk-free rate. Renaming the intercept as alpha is a misnomer. We already have a definition for the SML. (see: <a href="https://en.wikipedia.org/wiki/Security_market_line">https://en.wikipedia.org/wiki/Security_market_line</a> if need be)</p>

<p>The thing is when you look at a portfolio, you are looking at an ensemble of stocks. And the more stocks you put in a portfolio, the more something funny will happen. The portfolio beta will tend to 1!  The CAPM equation will reduce to: E[R(p)] →  E[R(m)]. At the limit, buying all the stocks will make it: E[R(p)] = E[R(m)].</p>

<p>But, we all build portfolios with only a few hundred stocks in them. Even there, the portfolio beta is approaching one:  β(p) → 1. Therefore, what one should expect is that his/her portfolio will vary in step with the market as a whole. Your portfolio becomes itself a proxy for a market index since being so close to it. In fact, if you keep increasing the number of stocks in your portfolio you will be approaching the expected market return, as they would say in math, almost surely.</p>

<p>We talk about CAPM, EMH, efficient frontiers, efficient and optimal portfolios, and then want to ignore their consequences. They are not perfect models, but they do reasonably explain what we see as a generalized framework.</p>

<p>You want to neutralize the beta, then one way to do it is: </p>

<p>E[R(p)] = r_f + β∙(E[R(m)]  – r_f) – β∙E[R(m)]</p>

<p>But that too has a conclusion. And again, there is no alpha in it. </p>

<p>If you want some alpha, you will have to grow it, from the outside by bringing more of your skills to the game, (read a better betting system), and make it yourself:</p>

<p>E[R(p)] = r_f + β∙(E[R(m)]  – r_f) – β∙E[R(m)] + α  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a638ea28379cd3dfaaf36ce' id='5a638ea28379cd3dfaaf36ce'>
<a href='#5a638ea28379cd3dfaaf36ce'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/50842732cb5e1a02000000d1'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f86535a7fafab6b7d903fc1461362f0a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/50842732cb5e1a02000000d1'>James Villa</a>
<span class='badge medal'></span>
</div>
<a UTCms='1516474018000' class='quanto-date posted-at response-posted-at' href='#5a638ea28379cd3dfaaf36ce'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Perhaps, its better to quote from a very informative whitepaper by Morningstar about market neutral strategies and full content is found here: <a href="http://advisor.morningstar.com/uploaded/pdf/alt_marketneutralmfcs.pdf">Market-Neutral Category Handbook</a>.  Here are some snippets from the whitepaper that are actual results of market neutral strategies so that all will know what to expect in real terms. </p>

<blockquote>
<p><strong>Historical Risk and Risk-Adjusted Returns</strong></p>
</blockquote>

<p>Separately managed accounts following equity market-neutral strategies have shown the best risk adjusted performance over the past five years, using several measures. The Sharpe ratio measures excess returns (over Treasuries) divided by standard deviation. The Sortino ratio measures downside deviation in the denominator, while Morningstar risk-adjusted return takes into account skew-ness and kurtosis (tail risk). Using these measures, market-neutral mutual funds have shown the worst risk-adjusted returns over the past five years, although they have fared better than the S&amp;P 500 when considering tail risk. Bonds have outperformed all market-neutral strategies on a risk-adjusted basis. Investors should consider, though, that bonds’ outperformance may not continue, as interest rates may rise. The most attractive feature of a market-neutral fund is its low correlation, and therefore low beta, to both stocks and bonds. This means that returns generally do not move with the markets. If an investor adds a market-neutral fund with positive risk-adjusted returns to his portfolio, the fund will improve the portfolio’s overall risk-adjusted returns. Hedge funds show relatively higher correlations and betas to stocks and bonds, as the heavy use of leverage in merger arbitrage and convertible arbitrage funds resulted in large losses in 2008.</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a63914c8379cd3dfaaf370e' id='5a63914c8379cd3dfaaf370e'>
<a href='#5a63914c8379cd3dfaaf370e'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/50842732cb5e1a02000000d1'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f86535a7fafab6b7d903fc1461362f0a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/50842732cb5e1a02000000d1'>James Villa</a>
<span class='badge medal'></span>
</div>
<a UTCms='1516474700000' class='quanto-date posted-at response-posted-at' href='#5a63914c8379cd3dfaaf370e'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>And here are real term results:</p>

<pre><code>Figure 4 Risk-Adjusted Returns by Market-Neutral Vehicle (through Sept. 2011)

                                                                                                                                   5-Yr Morningstar  
                                                            5-Yr Sharpe Ratio    5-Yr Sortino     Ratio Risk-Adjusted Return

Hedge Funds                                                    0.38                       0.47                       1.73  
Mutual Funds                                                  -1.01                      -1.15                      -2.26  
Separate Accounts                                              1.28                       2.16                       3.81  
S&amp;P 500 TR                                                    -0.06                      -0.07                      -6.09  
Barcap US Agg Bond TR                                          1.31                       2.60                       4.74

Figure 5 Five-Year Correlation and Beta of Market-neutral Strategies to Stocks and Bonds*

                                              S&amp;P 500 Correlation    S&amp;P 500 Beta    Barcap US AGG Correlation     Barcap US Agg Beta  
Hedge Funds                                          0.64                   0.21              0.21                           0.33  
Separate Accounts                                    0.03                   0.00              0.02                           0.01  
Mutual Funds                                         0.10                   0.02             -0.22                          -0.18  
</code></pre>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a6398cb8379cd769daf4217' id='5a6398cb8379cd769daf4217'>
<a href='#5a6398cb8379cd769daf4217'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/50842732cb5e1a02000000d1'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f86535a7fafab6b7d903fc1461362f0a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/50842732cb5e1a02000000d1'>James Villa</a>
<span class='badge medal'></span>
</div>
<a UTCms='1516476619000' class='quanto-date posted-at response-posted-at' href='#5a6398cb8379cd769daf4217'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Here&#39;s another snippet of quote from the same paper, gives ideas as to what managers do to implement this strategy:</p>

<blockquote>
<p><strong>Equity Market-Neutral</strong></p>
</blockquote>

<p>The goal of an equity market-neutral fund is to profit solely from a manager’s ability to select stocks. <strong>Managers may choose stocks through a discretionary  or quantitative process, both of which are focused on a stock’s fundamental characteristics.</strong> An equity market-neutral fund can be dollar-neutral, in which there is an equal dollar amount of stocks long and short, or beta-neutral, in which the aggregate market beta of the long positions is equal to that of the short positions. Some funds go beyond beta-neutral and attempt to be sector-neutral (where the sector exposure of the longs and shorts offset each other) or neutral in other respects (exposure to value or growth, for example). JP Morgan Research Market-Neutral JPMNX is an example of a fund that is beta neutral in several ways, while American Century Equity Market-Neutral Fund ALHIX aims to be dollar-neutral. Some market-neutral funds (361 Absolute Alpha AAFAX, for example) do not attempt to profit from short positions and instead use short positions in exchange traded-funds or futures contracts to hedge out broad market risk. Because market-neutral funds require frequent rebalancing, turnover is often very high. Often, fund companies use a quantitative program to construct, rebalance, and track the risk characteristics of the portfolio.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a64aab1746872001a06f7a2' id='5a64aab1746872001a06f7a2'>
<a href='#5a64aab1746872001a06f7a2'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1516546737000' class='quanto-date posted-at response-posted-at' href='#5a64aab1746872001a06f7a2'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@James, there is no bug in the Optimize API. It does what it is asked to do.</p>

<p>The equation to neutralize the beta is: </p>

<p>E[R(p)] = r_f + β∙(E[R(m)]  – r_f) – β∙E[R(m)]</p>

<p>This equation can be realized by shorting an index tracker like SPY, giving:</p>

<p>E[R(p)] = r_f + β∙E[R(m)]  – r_f) – E[R(SPY)] </p>

<p>The beta neutrality is respected. It is often used in portfolio hedging.</p>

<p>Whereas, the equation for market neutrality is:</p>

<p>E[R(p)] = r_f + 0.50∙β∙(E[R(m)]  – r_f) – 0.50∙E[R(m)]</p>

<p>It is the same hedging proposition. Here, half the portfolio is long the market and half is short. But this time there is an added concentration limit which will result in using about the same number of stocks for either longs or shorts. </p>

<p>If you go for market neutral, you also went for beta neutral. The converse is not necessarily true since the hedging could have been done using only one short, thereby putting half of the growing portfolio in one stock which at some point might not be sustainable.</p>

<p>Other propositions could have you gaining some net market exposure. Such as in:</p>

<p>E[R(p)] = r_f + 0.60∙β∙(E[R(m)]  – r_f) – 0.40∙E[R(m)]</p>

<p>which evidently is not market neutral anymore.</p>

<p>You could do a 130/30 hedged portfolio which would use some leveraging:<br>
E[R(p)] = r_f + 1.30∙β∙(E[R(m)]  – r_f) – 0.30∙E[R(m)]</p>

<p>which would give you a portfolio beta of one. However, that is not admissible within the contests rules.</p>

<p>Quantopian has given a set of constraints (rules) to be followed to be a surviving participant in its contests. </p>

<p>What we have to do, should we wish to participate, is follow the requirements and constraints. The rules have been fixed, so everyone has the same. </p>

<p>However, there is no restriction on how you should design your trading strategy to operate within those barriers. If you want to add some skewness to the mix and it is within boundaries, go for it. That is what is requested here. Make the best you can within all the restrictions. Win the contest. But, better yet, win the allocation.</p>

<p>What I do observe however is that some of the rules might be like shooting oneself in the foot. As if not totally baked. And that, over the long-term, will make it that a portfolio will deteriorate, meaning that it will not be able to sustain its CAGR going forward. But that might be something we can jump over by better strategy designs.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a64bbd0a1159d3d85cc1a19' id='5a64bbd0a1159d3d85cc1a19'>
<a href='#5a64bbd0a1159d3d85cc1a19'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1516551120000' class='quanto-date posted-at response-posted-at' href='#5a64bbd0a1159d3d85cc1a19'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Follows is my version of the script at the top of this thread. </p>

<p>Only changed numbers here and there. Removed the stocktwits thing. As said before, I give it no value, even consider it detrimental to one&#39;s portfolio. No other code logic was changed.</p>

<p><img src="https://image-proxy.quantopian.com/b83d97fe0e49a758d33baafa5352266f76e9d95c/687474703a2f2f616c706861706f77657274726164696e672e636f6d2f7175616e746f7069616e2f506f737369626c655f4275675f4a616d65732e706e67" /></p>

<p>As illustrated, the chart has a nice smooth equity line, and outperforms its benchmark.</p>

<p>The strategy make some 29,395 trades, with an average net profit per trade of $618.99.</p>

<p>However, the strategy&#39;s design makes its CAGR unsustainable. Even after 10 years of being stable and reliable, we should see it break down going forward.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a64c8d20702e9001880af38' id='5a64c8d20702e9001880af38'>
<a href='#5a64c8d20702e9001880af38'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/50842732cb5e1a02000000d1'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f86535a7fafab6b7d903fc1461362f0a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/50842732cb5e1a02000000d1'>James Villa</a>
<span class='badge medal'></span>
</div>
<a UTCms='1516554450000' class='quanto-date posted-at response-posted-at' href='#5a64c8d20702e9001880af38'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Guy, with all due respect, all I needed was to read your first sentence and looked at the beta results of your above backtest to tell you that there is a bug. Your backtest shows a beta of -0.10 that the algo tried to constraint to be within +- 0.05, it failed in this regard. One symptom of a bug is when a code written for a particular purpose does not attain its desired objective. Another bug which I call implementation bug, the beta calculation is exposed to user change, any user can change regression length from 260 to any number they want, which leads to contest beta thresholds (+-0.30) becoming relative to the window length settings which I don&#39;t think is its intention. The problem is actually multi dimensional as I discussed more thoroughly in my latest post <a href="https://www.quantopian.com/posts/possible-implementation-bug-with-beta">here</a>.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a64cb38a1159d0018cc1c67' id='5a64cb38a1159d0018cc1c67'>
<a href='#5a64cb38a1159d0018cc1c67'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1516555064000' class='quanto-date posted-at response-posted-at' href='#5a64cb38a1159d0018cc1c67'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@James, I voluntarily forced a negative beta skewness. I found it desirable in this scenario. And the API did what it was told.</p>

<p>You have a negative beta portfolio that is to be mixed with other strategies. Which is best: to have a zero-beta strategy or a negative-beta strategy?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a64d106a1159d0018cc1cc5' id='5a64d106a1159d0018cc1cc5'>
<a href='#5a64d106a1159d0018cc1cc5'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/50842732cb5e1a02000000d1'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f86535a7fafab6b7d903fc1461362f0a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/50842732cb5e1a02000000d1'>James Villa</a>
<span class='badge medal'></span>
</div>
<a UTCms='1516556550000' class='quanto-date posted-at response-posted-at' href='#5a64d106a1159d0018cc1cc5'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Guy, you should have told me that in the first place. If that worked for you and you conclude that it works then I&#39;m happy for you. But how do explain that it doesn&#39;t work on others? How do you explain why beta calculation is exposed to user configuration? How do we know the effects of the interaction between the beta calculation exposed to user and hidden beta calculation in Optimize API. Aren&#39;t these all symptoms of a bug?</p>

<p>Addedum: Guy at what setting did you use to force negative beta skewness? Your hypothesis will only be valid if you set it within the bounds of beta thresholds, in this case, +- 0.30 to be consistent with its desired objective.  If you go out of bounds, then you have entirely change the purpose of the constraint and thus your results, desirable or not, does not hold because it not the original intent.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a6520ce0702e9001b80b728' id='5a6520ce0702e9001b80b728'>
<a href='#5a6520ce0702e9001b80b728'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1516576974000' class='quanto-date posted-at response-posted-at' href='#5a6520ce0702e9001b80b728'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@James, you provide some objectives to the API, in fact, ordering this black box to get you closer to the given goals. Take an incremental step in that direction or other. All you want is that it complies, that it does what you want it to do.</p>

<p>Then, you add some constraints. Do the above, but try to do it within these limits whatever they may be. Again, you want the API to comply, and ignore what is out of limits. Each constraint adding another layer that supersede its predecessor rendering the latter partly ineffectual if not redundant. And if a new layer is already outside a preexisting one, then it becomes superfluous. </p>

<p>You are thinking code, I am thinking strategy outcome. </p>

<p>I am not that much interested in the code. What I want is to influence the payoff matrix as a bloc from start to finish. So, instead of letting the strategy play out some code, I will give functions to the payoff matrix itself and try to direct it to where I want. A shove here, a shove there, all with the purpose of keeping the swarm of variance within tradable limits.</p>

<p>The above strategy plays a lot on market noise. It did some 29,395 trades, resulting in over 300,000+ transactions due to the 2.5% of volume rule. It should be considered excessive. A lot of it unnecessary. But, it will make money, and a machine is doing the work.</p>

<p>This strategy might have some Quantopian-alpha. But, in reality, it has very little Jensen-alpha. In fact, practically none. Which is why I am losing interest in it.</p>

<p>Nonetheless, a portfolio having a half and half mix using a – 0.10 beta on one side and a + 0.10 beta on the other should produce an overall trading strategy resulting in a zero-beta scenario. So, this strategy could provide the first half of that problem.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a6527f30702e9216680a05f' id='5a6527f30702e9216680a05f'>
<a href='#5a6527f30702e9216680a05f'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/50842732cb5e1a02000000d1'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f86535a7fafab6b7d903fc1461362f0a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/50842732cb5e1a02000000d1'>James Villa</a>
<span class='badge medal'></span>
</div>
<a UTCms='1516578803000' class='quanto-date posted-at response-posted-at' href='#5a6527f30702e9216680a05f'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Guy, precisely I was referring to bug in code not the insect type :) But seriously, I hear what you;re saying in terms of strategy outcome.  </p>
</div>
</div>
</div>

</div>
<div class='sign-in-please'>
Please <a href='/signin?return_to=/posts/beta-constraint-in-risk-model-totally-unnecessary'>sign in</a> or
<a href='/users/sign_up?redirect_to=/posts/beta-constraint-in-risk-model-totally-unnecessary'>join Quantopian</a> to
post a reply.
</div>
</div>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId: "550580758292093",
      status: false,
      cookie: true,
      xfbml: true
    });
  };
  
  (function(d, debug){
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) {return;}
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
    ref.parentNode.insertBefore(js, ref);
  }(document, /*debug*/ false));
  
  window.twttr = (function (d,s,id) {
    var t, js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return; js=d.createElement(s); js.id=id;
    js.src="//platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs);
    return window.twttr || (t = { _e: [], ready: function(f){ t._e.push(f) } });
  }(document, "script", "twitter-wjs"));
</script>
<script>
  $(document).ready(function () {
    quanto.instances.pm = new quanto.PostManager(false)
  });
</script>

<div class='login-footer'>
<div class='container'>
<div class='login-footer-text'>
Become an expert in quant finance through Quantopian's hands-on education.
</div>
<div class='login-footer-button'>
<button class='btn btn-v2 stroke join-modal-link mixpanel-button' data-event='anon join footer click posts' data-mixpanel='click'>
Join Now
</button>
</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='error-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'>Error</span>
</div>
<div class='modal-body body-content'>
<p>Sorry, something went wrong.  Try again or contact us by <a class='feedback-link'>sending feedback</a>.</p>
</div>
<div class='modal-footer'>
<button class='btn btn-v2 blue action-button' data-dismiss='modal' href='#'>Close</button>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='confirmation-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'></span>
</div>
<div class='modal-body body-content'></div>
<div class='modal-footer'>
<div class='pull-right'>
<button class='btn btn-v2 border' data-dismiss='modal'>Cancel</button>
<button class='btn btn-v2 blue action-button' data-dismiss='modal'></button>
</div>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='message-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'></span>
</div>
<div class='modal-body body-content'></div>
<div class='modal-footer'>
<button class='btn btn-v2 blue action-button' data-dismiss='modal' id='message-modal-close'>Close</button>
</div>

</div>
</div>
</div>

<div class='always-bootstrap3-modals'>
<div class='fade modal quanto-modal-v2' id='join-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header visible-small'>
<span class='title'>
Join Quantopian.  It's Free!
</span>
<div class='modal-x-out visible-xs'></div>
</div>
<div class='modal-body'>
<div class='flex-wrap'>
<div class='join-left-pane hidden-small'>
<div class='margin_30l'>
<div class='join-hero-text'>
Join Quantopian.  It's Free!
</div>
<div class='join-benefits'>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image code'></div>
</div>
<div class='join-text'>
Use our research platform, backtester, and dozens of clean data sets.
</div>
</div>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image learn'></div>
</div>
<div class='join-text'>
Learn with our hands-on education and community forums.
</div>
</div>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image win'></div>
</div>
<div class='join-text'>
Enter to win cash prizes in our contest.
</div>
</div>
</div>
<div class='hidden saved-reminder'>
Don't worry, all your work is already saved.
</div>
</div>
</div>
<div class='join-right-pane'>
<div class='hidden-small'>
<div class='button-pane'>
<a class="button btn-v2 user-form-btn" href="/signin">Already a Quantopian member?</a>
</div>
</div>
<div class='visible-small'>
<div class='already-member'>
<a href='/signin'>Already a Quantopian member?</a>
</div>
</div>
<form class="quanto-form-v2" id="new-user-modal-form" action="/users" accept-charset="UTF-8" data-remote="true" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><div class='error-message hidden'>
<div class='message'></div>
</div>
<div class='name-group'>
<div class='form-group inline-block'>
<label for="user_firstname">First Name</label>
<input class="form-control firstname" pattern=".*" required="required" autocomplete="off" autofocus="autofocus" type="text" name="user[firstname]" id="user_firstname" />
</div>
<div class='form-group inline-block'>
<label for="user_lastname">Last Name</label>
<input class="form-control" value="" pattern=".*" required="required" autocomplete="off" type="text" name="user[lastname]" id="user_lastname" />
</div>
</div>
<div class='form-group'>
<label for="user_email">Email</label>
<input class="form-control" value="" pattern=".*" required="required" autocomplete="off" type="email" name="user[email]" id="user_email" />
</div>
<div class='form-group'>
<label for="user_password">Password</label>
<input autocomplete="off" class="form-control" pattern=".*" required="required" type="password" name="user[password]" id="user_password" />
</div>
<div class='checkbox eula'>
<input id='eula-checkbox' type='checkbox'>
<div class='quanto-checkbox'></div>
<label for='eula-checkbox' id='checkbox-label'>I accept the <a href='/policies/terms' target='_blank'>Terms Of Use</a> and <a href='/policies/privacy' target='_blank'>Privacy Policy</a>.</label>
</div>
<div class='checkbox mailchimp-box'>
<input name="user[allow_marketing_emails]" type="hidden" value="0" /><input type="checkbox" value="1" name="user[allow_marketing_emails]" id="user_allow_marketing_emails" />
<div class='quanto-checkbox'></div>
<label for='user_allow_marketing_emails'>
Send me email updates with the latest news from the Quantopian community. We send these emails about once a month.
</label>
</div>
<div class='button-row'>
<button class='btn-v2 blue full' data-redirect-to='/tutorials/getting-started' id='sign-up-button' type='Submit'>Join Quantopian</button>
</div>
</form></div>
</div>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='feedback-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title'>Contact Support</span>
</div>
<div class='modal-body'>
<form class='anon-user controls quanto-form-v2' id='feedback-form'>
<div class='feedback-inputs'>
<div class='form-group'>
<input autofocus class='form-control' id='feedback-email-box' name='email' placeholder='Email Address' type='email'>
</div>
<div class='form-group'>
<input class='form-control' id='feedback-name-box' placeholder='Name' type='name'>
</div>
<div class='form-group'>
<textarea class='form-control' id='feedback-box' name='feedback' placeholder='What may we help you with?' rows='10'></textarea>
</div>
</div>
</form>
<form class='hidden quanto-form-v2 select-resource-area'>
<div class='select-step select-type-step'>
<div class='form-group'>
<select class='form-control select-resource-dropdown' title='Select the item you need help with'>
<option value='algorithm'>Algorithm</option>
<option value='backtest'>Backtest</option>
<option value='notebook'>Notebook</option>
</select>
</div>
</div>
<div class='select-step loading-area hidden'>
<div class='loading-text'>
Loading...
</div>
</div>
<div class='select-step empty-list-area hidden'>
<div class='back-button'>Go Back</div>
<div class='empty-text'>
No <span class='empty-list-resource-text'>algorithms</span> found
</div>
</div>
<div class='select-algo-area select-step hidden'>
<div class='back-button'>Go Back</div>
<table class='select-algo-table select-item-table'>
<thead>
<tr>
<th>
Algorithm
<span class='sort-icon'></span>
</th>
<th>
Last Modified
<span class='sort-icon'></span>
</th>
</tr>
</thead>
</table>
</div>
<div class='select-backtest-area select-step hidden'>
<div class='back-button'>Go Back</div>
<table class='select-backtest-table select-item-table'>
<thead>
<tr>
<th>
Backtest
<span class='sort-icon'></span>
</th>
<th>
Started At
<span class='sort-icon'></span>
</th>
<th>
Overall Return
<span class='sort-icon'></span>
</th>
<th>
Status
<span class='sort-icon'></span>
</th>
</tr>
</thead>
</table>
</div>
<div class='select-notebook-area select-step hidden'>
<div class='back-button'>Go Back</div>
<div class='subtitle select-cell-step'>
Choose a cell to use as the preview for this notebook:
</div>
<div class='iframe-wrapper'>
<iframe class='notebook-list-iframe slow-fade' src=''></iframe>
</div>
<div class='progress-area slow-fade in'>
<div class='progress-container'>
<div class='progress-title'>
<div class='quanto-loader gray'></div>
</div>
</div>
</div>
<div class='maintenance-area'>
<div class='error-container'>
<div class='row'>
<div class='col-md-14 msg-title h1'>
Sorry, research is currently undergoing maintenance.
</div>
</div>
<div class='row'>
<div class='col-md-14 msg-subtitle'>
Please check back shortly. If the maintenance period lasts longer than expected,
you can find updates on <a href='https://status.quantopian.com/'>status.quantopian.com</a>.
</div>
</div>

</div>
</div>
<div class='error-area'>
<div class='error-container'>
<div class='row'>
<div class='col-md-14 msg-title h1'>
Sorry, something went wrong on our end.
</div>
</div>
<div class='row'>
<div class='col-md-14 msg-subtitle'>
Please try again or contact <a class='open-feedback-link'>Quantopian support</a>.
</div>
</div>

</div>
</div>

</div>
<div class='selected-item-area select-step hidden'>
<div class='selected-item-group form-group'>
<div class='selected-item-control'>
<input class='disabled form-control selected-item-box' type='text'>
<span class='secure-icon icon'></span>
<button class='btn change change-primary-item-button change-selection-button new-btn transparent' type='button'>
<span class='refresh-icon icon'></span>
</button>
</div>
<div class='selected-backtest-control'>
<input class='disabled form-control selected-backtest-box' type='text'>
<span class='secure-icon icon'></span>
<button class='btn change-backtest-button change-selection-button new-btn transparent' type='button'>
<span class='refresh-icon icon'></span>
</button>
</div>
</div>
<div class='checkbox-group form-group'>
<div class='checkbox give-permission'>
<input class='give-permission-checkbox' id='feedback-give-permission-checkbox' type='checkbox'>
<div class='quanto-checkbox'></div>
<label for='feedback-give-permission-checkbox'>
I permit Quantopian to view <span class='item-type-text'>this algorithm,
backtest or notebook and their imported datasets</span> for the purpose of providing support.
</label>
</div>
</div>
</div>
</form>

<div class='loading-step hidden'>
<div class='loading-text'>
Submitting your support ticket...
</div>
</div>
<div class='success-step invisible'>
<h2 class='title center'>
You've successfully submitted a support ticket.
</h2>
<p>
Our support team will be in touch soon.
</p>
<div class='confirmation-image'></div>
</div>
</div>
<div class='modal-footer'>
<button class='btn-v2 blue' id='send-feedback-button'>Send</button>
<div class='error-message hidden'>
Error submitting support request.
</div>
</div>

</div>
</div>
</div>

</div>
</div>
<div class='footer' id='quanto-footer-container'>
<div class='container'>
<div class='row header-row'>
<div class='col-sm-fourth span3'>
<img class='async-image logotype-image' data-src='https://qf.quantopian.com/assets/logos/logo-q-full-b23bda5ac757691b9259d396d0dfef91567165868b8c955a836649686e6d2248.svg'>
</div>
<div class='col-sm-fourth span3'></div>
<div class='col-sm-fourth span3'></div>
<div class='col-sm-fourth span3'>
<div class='feedback-email'>
Need help?
<a href="/cdn-cgi/l/email-protection#46202323222427252d06373327283229362f27286825292b">Contact support.</a>
</div>
</div>
</div>
<div class='row'>
<div class='col-sm-fourth span3'>
<div class='header'>Company</div>
<div class='footer-row'>
<a href='/about'>About</a>
</div>
<div class='footer-row'>
<a href='/academia'>Academia</a>
</div>
<div class='footer-row'>
<a href='/jobs'>Careers</a>
</div>
<div class='footer-row'>
<a href='/posts'>Community</a>
</div>
<div class='footer-row'>
<a href='/events'>Events</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Learn &amp; Support</div>
<div class='footer-row'>
<a href='/faq'>FAQ</a>
</div>
<div class='footer-row'>
<a href='/tutorials/getting-started'>Getting Started</a>
</div>
<div class='footer-row'>
<a href='/docs'>Documentation</a>
</div>
<div class='footer-row'>
<a href='/tutorials'>Tutorials</a>
</div>
<div class='footer-row'>
<a href='/lectures'>Lectures</a>
</div>
<div class='footer-row'>
<a href='/opensource'>Open Source</a>
</div>
<div class='footer-row'>
<a href='https://status.quantopian.com/'>Site Status</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Notices</div>
<div class='footer-row'>
<a href='/policies/terms'>Terms of Use</a>
</div>
<div class='footer-row'>
<a href='/policies/privacy'>Privacy Policy</a>
</div>
<div class='footer-row'>
<a href='/security'>Security</a>
</div>
<div class='footer-row'>
<a href='/policies/code-of-conduct'>Code of Conduct</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Follow Us</div>
<div class='footer-row'>
<a href='https://www.twitter.com/quantopian'>Twitter</a>
</div>
<div class='footer-row'>
<a href='https://www.facebook.com/quantopian'>Facebook</a>
</div>
<div class='footer-row'>
<a href='https://www.linkedin.com/company/quantopian'>LinkedIn</a>
</div>
<div class='footer-row'>
<a href='https://www.youtube.com/channel/UC606MUq45P3zFLa4VGKbxsg'>YouTube</a>
</div>
</div>
</div>
<div class='row'>
<div class='col-xs-14 span12'>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian.
</p>
<p>
In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>

</div>
</div>
</div>
</div>
</div>
<div class='mobile-footer'>
<div class='mobile-nav-category main-links'>
<div class='mobile-nav-row-footer'>
<a href='/about'>About Quantopian</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/jobs'>Careers</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/posts'>Community</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/events'>Events</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/docs'>Documentation</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/academia'>Academia</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/lectures'>Lectures</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://status.quantopian.com/'>Status</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.facebook.com/quantopian'>Facebook</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.twitter.com/quantopian'>Twitter</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.linkedin.com/company/quantopian'>LinkedIn</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.youtube.com/channel/UC606MUq45P3zFLa4VGKbxsg'>YouTube</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/policies/terms'>Terms of Use</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/policies/privacy'>Privacy Policy</a>
</div>
</div>
<div class='mobile-nav-category'>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian.
</p>
<p>
In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>

</div>
</div>
</div>

</div>
<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script></body>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', "UA-8519877-1", {
    cookieDomain: "quantopian.com"
  });
  ga('set', 'dimension1', 'session_5f9dc7425d387f00077e48e4');
  
  ga('send', 'pageview');
</script>

<input type="hidden" name="is_mac" id="is_mac" value="false" />
<input type="hidden" name="mp" id="mp" value="75873953cd404bcc1da88a55ff51e3b4" />
<script>
  (function(e,a){if(!a.__SV){var b=window;try{var c,l,i,j=b.location,g=j.hash;c=function(a,b){return(l=a.match(RegExp(b+"=([^&]*)")))?l[1]:null};g&&c(g,"state")&&(i=JSON.parse(decodeURIComponent(c(g,"state"))),"mpeditor"===i.action&&(b.sessionStorage.setItem("_mpcehash",g),history.replaceState(i.desiredHash||"",e.title,j.pathname+j.search)))}catch(m){}var k,h;window.mixpanel=a;a._i=[];a.init=function(b,c,f){function e(b,a){var c=a.split(".");2==c.length&&(b=b[c[0]],a=c[1]);b[a]=function(){b.push([a].concat(Array.prototype.slice.call(arguments,
  0)))}}var d=a;"undefined"!==typeof f?d=a[f]=[]:f="mixpanel";d.people=d.people||[];d.toString=function(b){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);b||(a+=" (stub)");return a};d.people.toString=function(){return d.toString(1)+".people (stub)"};k="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
  for(h=0;h<k.length;h++)e(d,k[h]);a._i.push([b,c,f])};a.__SV=1.2;b=e.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";c=e.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}})(document,window.mixpanel||[]);
  mixpanel.init("75873953cd404bcc1da88a55ff51e3b4");
</script>
<script>
  mixpanel.track("view page", {"page": window.location.pathname});
</script>
</html>
