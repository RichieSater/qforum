<!DOCTYPE html>
<html>
<head>
<link href='i1.wp.com' rel='dns-prefetch'>
<link href='i2.wp.com' rel='dns-prefetch'>
<link href='i3.wp.com' rel='dns-prefetch'>
<meta content='2HgX9mcLHaPOX6sfaaAkhWtblhEB9yUNw4l6l46e1k4' name='google-site-verification'>
<link rel="shortcut icon" type="image/x-icon" href="external/favicon-q-ac1a76f2c200e9026b5b1147519bb4fab6256910588b831e2411bc6c7c1218c3.png" />
<title>
Trading SPY based on the slope (zscore of) and the HiLo index of the SPY components (Tradeable?)
</title>
<meta content='After 100+ back tests over different periods I&#39;m confident that this strategy is tradeable and I&#39;m seeking collaboration with others to either improve the drawdown or add other elements to the algo that it makes more robust.To be in the contest we need to add a hedge to isolate Alpha but for my personal trading I&#39;m not so interested in isolating Alpha.Any Takers?With algorithmic regards, Peter Bakker' name='description'>
<link rel="stylesheet" media="all" href="external/quanto-base-bundle-e8eb6050172aa0d24124d5c24bac90b2cccd88b5b9c7742026c0e9efab038c6e.css" />
<link rel="stylesheet" media="all" href="external/quanto-posts-bundle-aab01368d3f82d8dafc94ee9eabb82e77dc8c9fbbffa952fdcdc744dfa523cf3.css" />
<script src="external/quanto_global-057218867db29d5768131af5d6fb3476cef098e7d9e655108befb903c7ee985e.js"></script>
<script src="external/posts_bundle-3dfd82fa469c393d752e461d837aec9e4e364ae39f49198e34a6626f2180fdf7.js"></script>
<link href='external/logo-q-180x180-0f5a6a439c99203ed4aea6f656e7604c543d287be43d8b17c7591c1131f09a59.png' rel='apple-touch-icon'>
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="Zd86Y6UEUr7BNzj5H9dNvizw9SHfMpRsdEnV4xMVvtkZuUwuB/KAXXgqYchQOOXKFH7WSKX+gXf2Rg6JuVDcYg==" />
<meta content='width=device-width, initial-scale=1.0' name='viewport'>
<script>
//<![CDATA[
window.quanto_data={};quanto_data.bounce_back_params={"show_modal":null,"feedback_text":null};quanto_data.namespace="public";quanto_data.talib_info={"ADOSC":["Chaikin A/D Oscillator (Volume Indicators)",["fastperiod","3"],["slowperiod","10"]],"ADX":["Average Directional Movement Index (Momentum Indicators)",["timeperiod","14"]],"ADXR":["Average Directional Movement Index Rating (Momentum Indicators)",["timeperiod","14"]],"APO":["Absolute Price Oscillator (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["matype","0"]],"AROON":["Aroon (Momentum Indicators)",["timeperiod","14"]],"AROONOSC":["Aroon Oscillator (Momentum Indicators)",["timeperiod","14"]],"ATR":["Average True Range (Volatility Indicators)",["timeperiod","14"]],"BBANDS":["Bollinger Bands (Overlap Studies)",["timeperiod","5"],["nbdevup","2"],["nbdevdn","2"],["matype","0"]],"BETA":["Beta (Statistic Functions)",["timeperiod","5"]],"CCI":["Commodity Channel Index (Momentum Indicators)",["timeperiod","14"]],"CMO":["Chande Momentum Oscillator (Momentum Indicators)",["timeperiod","14"]],"CORREL":["Pearson's Correlation Coefficient (r) (Statistic Functions)",["timeperiod","30"]],"DEMA":["Double Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"DX":["Average Directional Movement Index (Momentum Indicators)",["timeperiod","14"]],"EMA":["Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"KAMA":["Kaufman Adaptive Moving Average (Overlap Studies)",["timeperiod","30"]],"LINEARREG":["Linear Regression (Statistic Functions)",["timeperiod","14"]],"LINEARREG_ANGLE":["Linear Regression Angle (Statistic Functions)",["timeperiod","14"]],"LINEARREG_INTERCEPT":["Linear Regression Intercept (Statistic Functions)",["timeperiod","14"]],"LINEARREG_SLOPE":["Linear Regression Slope (Statistic Functions)",["timeperiod","14"]],"MA":["Moving average (Overlap Studies)",["timeperiod","30"],["matype","0"]],"MACD":["Moving Average Convergence/Divergence (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["signalperiod","9"]],"MACDEXT":["MACD with controllable MA type (Momentum Indicators)",["fastperiod","12"],["fastmatype","0"],["slowperiod","26"],["slowmatype","0"],["signalperiod","9"],["signalmatype","0"]],"MACDFIX":["Moving Average Convergence/Divergence Fix 12/26 (Momentum Indicators)",["signalperiod","9"]],"MAX":["Highest values over a specified period (Math Operators)",["timeperiod","30"]],"MAXINDEX":["Index of highest value over a specified period (Math Operators)",["timeperiod","30"]],"MFI":["Money Flow Index (Momentum Indicators)",["timeperiod","14"]],"MIDPOINT":["Midpoint over period (Overlap Studies)",["timeperiod","14"]],"MIDPRICE":["Midpoint Price over period (Overlap Studies)",["timeperiod","14"]],"MIN":["Lowest value over a specified period (Math Operators)",["timeperiod","30"]],"MININDEX":["Index of lowest value over a specified period (Math Operators)",["timeperiod","30"]],"MINMAX":["Lowest and highest values over a specified period (Math Operators)",["timeperiod","30"]],"MINMAXINDEX":["Indexes of lowest and highest values over a specified period (Math Operators)",["timeperiod","30"]],"MINUS_DI":["Minus Directional Indicator (Momentum Indicators)",["timeperiod","14"]],"MINUS_DM":["Minus Directional Movement (Momentum Indicators)",["timeperiod","14"]],"MOM":["Momentum (Momentum Indicators)",["timeperiod","10"]],"NATR":["Normalized Average True Range (Volatility Indicators)",["timeperiod","14"]],"PLUS_DI":["Plus Directional Indicator (Momentum Indicators)",["timeperiod","14"]],"PLUS_DM":["Plus Directional Movement (Momentum Indicators)",["timeperiod","14"]],"PPO":["Percentage Price Oscillator (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["matype","0"]],"ROC":["Rate of change: ((price/prevPrice)-1)*100 (Momentum Indicators)",["timeperiod","10"]],"ROCP":["Rate of change Percentage: (price-prevPrice)/prevPrice (Momentum Indicators)",["timeperiod","10"]],"ROCR":["Rate of change ratio: (price/prevPrice) (Momentum Indicators)",["timeperiod","10"]],"ROCR100":["Rate of change ratio 100 scale: (price/prevPrice)*100 (Momentum Indicators)",["timeperiod","10"]],"RSI":["Relative Strength Index (Momentum Indicators)",["timeperiod","14"]],"SMA":["Simple Moving Average (Overlap Studies)",["timeperiod","30"]],"STDDEV":["Standard Deviation (Statistic Functions)",["timeperiod","5"],["nbdev","1"]],"STOCH":["Stochastic (Momentum Indicators)",["fastk_period","5"],["slowk_period","3"],["slowk_matype","0"],["slowd_period","3"],["slowd_matype","0"]],"STOCHF":["Stochastic Fast (Momentum Indicators)",["fastk_period","5"],["fastd_period","3"],["fastd_matype","0"]],"STOCHRSI":["Stochastic Relative Strength Index (Momentum Indicators)",["timeperiod","14"],["fastk_period","5"],["fastd_period","3"],["fastd_matype","0"]],"T3":["Triple Exponential Moving Average (T3) (Overlap Studies)",["timeperiod","5"],["vfactor","0.7"]],"TEMA":["Triple Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"TRIMA":["Triangular Moving Average (Overlap Studies)",["timeperiod","30"]],"TRIX":["1-day Rate-Of-Change (ROC) of a Triple Smooth EMA (Momentum Indicators)",["timeperiod","30"]],"TSF":["Time Series Forecast (Statistic Functions)",["timeperiod","14"]],"ULTOSC":["Ultimate Oscillator (Momentum Indicators)",["timeperiod1","7"],["timeperiod2","14"],["timeperiod3","28"]],"VAR":["Variance (Statistic Functions)",["timeperiod","5"],["nbdev","1"]],"WILLR":["Williams' %R (Momentum Indicators)",["timeperiod","14"]],"WMA":["Weighted Moving Average (Overlap Studies)",["timeperiod","30"]]};quanto_data.nb_preview_url="https://notebooks-preview.prd.pub.quantopian.com";quanto_data.delay_nb_preview_load=false;
//]]>
</script>
<meta content='https://www.quantopian.com/posts/trading-spy-based-on-the-slope-zscore-of-and-the-hilo-index-of-the-spy-components-tradeable' property='og:url'>
<meta content='Trading SPY based on the slope (zscore of) and the HiLo index of the SPY components (Tradeable?)' property='og:title'>

<input type="hidden" name="env" id="quanto-env" value="production" />
<meta content='550580758292093' property='fb:app_id'>
<meta content='https://www.quantopian.com/posts/trading-spy-based-on-the-slope-zscore-of-and-the-hilo-index-of-the-spy-components-tradeable' property='og:url'>
<meta content='https://media.quantopian.com/public/og-image-default.png' property='og:image'>
<meta content='Trading SPY based on the slope (zscore of) and the HiLo index of the SPY components (Tradeable?)' property='og:title'>
<meta content='After 100+ back tests over different periods I&#39;m confident that this strategy is tradeable and I&#39;m seeking collaboration with others to either improve the drawdown or add other elements to the algo that it makes more robust.To be in the contest we need to add a hedge to isolate Alpha but for my personal trading I&#39;m not so interested in isolating Alpha.Any Takers?With algorithmic regards, Peter Bakker' property='og:description'>
</head>
<script type='application/ld+json'>
  {
    "@context": "http://schema.org",
    "@type": "Organization",
    "url": "https://www.quantopian.com",
    "logo": "https://media.quantopian.com/logos/logo-q-press-red.png"
  }
</script>
<body class='' ontouchstart=''>
<div id='fb-root'></div>
<div class='wrapper'>
<div class='alert-v2 error'>
<div class='message'>
Quantopian's community platform is shutting down. Please read <a href="/posts/quantopians-community-services-are-closing">this post</a> for more information and <a href='/account#account'>download your code</a>.
</div>
</div>
<div class='navbar navbar-default navbar-static-top' id='app-navbar'>
<div class='container-fluid'>
<div class='navbar-header'>
<button class='navbar-toggle collapsed' data-target='#app-navbar-collapse' data-toggle='collapse'>
<span class='icon hamburger-menu'></span>
</button>
<a class='navbar-brand' href='/home'>
<img class='logo-image async-image' data-src='external/logo-q-white-b141ea6018546e5a4ecc3d10d8440ec076fc4385764e948b322828cc70950a76.svg'>
</a>
</div>
<div class='collapse navbar-collapse' id='app-navbar-collapse'>
<ul class='nav navbar-nav navbar-right'>
<li class='dropdown quanto-dropdown-new'>
<li>
<a class='header' href='/docs'>
Documentation
</a>
</li>
<li class='dropdown quanto-dropdown-new'>
<a class='header' data-toggle='dropdown' href='#'>
Learn
</a>
<ul class='dropdown-menu'>
<li>
<a class='mixpanel-button' data-event='main nav getting started clicked' href='/tutorials/getting-started'>Getting Started</a>
</li>
<li>
<a class='mixpanel-button' data-event='main nav tutorials clicked' href='/tutorials'>Tutorials</a>
</li>
<li>
<a class='mixpanel-button' data-event='main nav lectures clicked' href='/lectures'>Lectures</a>
</li>
</ul>
</li>
<li>
<a class='header' href='/posts' id='forum-link'>
Forum
</a>
</li>
<li>
<a class="header" href="/signin?return_to=/posts/trading-spy-based-on-the-slope-zscore-of-and-the-hilo-index-of-the-spy-components-tradeable">Log In</a>
</li>
</li>

</ul>
</div>
</div>
</div>
<script>
  $(document).ready(function () {
    quanto.instances.fm = new quanto.FeedbackManager();
    quanto.instances.hm = new quanto.headerManager();
  })
</script>


<div class='content content-area new-style'>
<input type="hidden" name="page-id" id="page-id" value="postatomic" />
<script src="external/MathJax.js?config=TeX-AMS_HTML-full.js,Safe" async="async"></script>
<div class='container page-container post-atomic'>
<input id='parent-post-id-val' type='hidden' value='565d80670bd6be82420000ed'>
<div class='post-container' data-post-id='565d80670bd6be82420000ed' id='565d80670bd6be82420000ed'>
<div class='back-button back-to-community'>Back to Community</div>
<div class='post-title'>Trading SPY based on the slope (zscore of) and the HiLo index of the SPY components (Tradeable?)</div>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51d125a71144e60865000044'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/b7dd86784deedc047d5ad0fb30378bdd?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51d125a71144e60865000044'>Peter Bakker</a>
</div>
<span class='posted-at'>posted </span>
<span UTCms='1448968295000' class='quanto-date posted-at'></span>
<div class='pull-right other-actions'>
<div class='dropup inline-block'>
<div class='dropdown share-control other-action-link'>
<div data-toggle='dropdown'>
<div class='share-image'></div>
Share
</div>
<ul class='dropdown-menu share-options-menu'>
<li>
<a class='share-row' href='https://twitter.com/intent/tweet?text=Trading SPY based on the slope (zscore of) and the HiLo index of the SPY components (Tradeable?)&amp;url=https%3A%2F%2Fwww.quantopian.com%2Fposts%2Ftrading-spy-based-on-the-slope-zscore-of-and-the-hilo-index-of-the-spy-components-tradeable%3Futm_source%3Dwebsite_share%26utm_campaign%3Dtrading-spy-based-on-the-slope-zscore-of-and-the-hilo-index-of-the-spy-components-tradeable%26utm_medium%3Dtwitter&amp;via=quantopian'>
<i class='icon icon-twitter'></i>
Share on Twitter
</a>
</li>
<li>
<div class='share-row facebook-button'>
<i class='icon icon-facebook'></i>
Share on Facebook
</div>
</li>
<li>
<div class='share-row linkedin-button' data-share-url='https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Fwww.quantopian.com%2Fposts%2Ftrading-spy-based-on-the-slope-zscore-of-and-the-hilo-index-of-the-spy-components-tradeable%3Futm_source%3Dwebsite_share%26utm_campaign%3Dtrading-spy-based-on-the-slope-zscore-of-and-the-hilo-index-of-the-spy-components-tradeable%26utm_medium%3Dlinkedin&amp;title=Trading+SPY+based+on+the+slope+%28zscore+of%29+and+the+HiLo+index+of+the+SPY+components+%28Tradeable%3F%29+%28Peter+Bakker%29&amp;source=Quantopian'>
<i class='icon icon-linkedin'></i>
Share on LinkedIn
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>

<div class='tags tag-row'>
<a class='tag mixpanel-button' data-event='tag click' data-mixpanel='Momentum' data-tag-id='55c50e7d8d4710ec6e00000c' href='/posts/tag/Momentum/newest'>Momentum</a>
<a class='tag mixpanel-button' data-event='tag click' data-mixpanel='Mean Reversion' data-tag-id='55c50e7d8d4710ec6e00000d' href='/posts/tag/Mean-Reversion/newest'>Mean Reversion</a>
<a class='tag mixpanel-button' data-event='tag click' data-mixpanel='Collaboration Request' data-tag-id='55c50e7d8d4710ec6e000016' href='/posts/tag/Collaboration-Request/newest'>Collaboration Request</a>
<a class='tag mixpanel-button' data-event='tag click' data-mixpanel='Statistics' data-tag-id='55d33f923f6ba1005d000001' href='/posts/tag/Statistics/newest'>Statistics</a>
</div>
<input type="hidden" name="social_fb_post_link" id="social_fb_post_link" value="https://www.quantopian.com/posts/trading-spy-based-on-the-slope-zscore-of-and-the-hilo-index-of-the-spy-components-tradeable?utm_source=website_share&amp;utm_campaign=trading-spy-based-on-the-slope-zscore-of-and-the-hilo-index-of-the-spy-components-tradeable&amp;utm_medium=facebook" />
<input type="hidden" name="social_post_image" id="social_post_image" value="external/logo-q-red-outline.png" />
<input type="hidden" name="social_post_author" id="social_post_author" value="Peter Bakker" />
<div class='body-text'>
<div class='body-text-container post-body'><p>After 100+ back tests over different periods I&#39;m confident that this strategy is tradeable and I&#39;m seeking collaboration with others to either improve the drawdown or add other elements to the algo that it makes more robust.<br>
To be in the contest we need to add a hedge to isolate Alpha but for my personal trading I&#39;m not so interested in isolating Alpha.</p>

<p>Any Takers?</p>

<p>With algorithmic regards, Peter Bakker  </p>
</div>
</div>
</div>

</div>

<div class='container page-container post-atomic'>
<div class='section-header reply-header'>
<div class='reply-title'>35 responses</div>
</div>
<div class='replies'>
<div class='post-container response-container' data-post-id='565d8e3e023db3d7b1000106' id='565d8e3e023db3d7b1000106'>
<a href='#565d8e3e023db3d7b1000106'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51d125a71144e60865000044'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/b7dd86784deedc047d5ad0fb30378bdd?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51d125a71144e60865000044'>Peter Bakker</a>
</div>
<a UTCms='1448971846000' class='quanto-date posted-at response-posted-at' href='#565d8e3e023db3d7b1000106'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>and the tearsheet  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='565e29b4734f1d3a0b000052' id='565e29b4734f1d3a0b000052'>
<a href='#565e29b4734f1d3a0b000052'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/53f7bb020862c778e3000094'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/fe29d8d2dd66500d9a940ffe063da423?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/53f7bb020862c778e3000094'>Mohammad Forouzani</a>
</div>
<a UTCms='1449011641000' class='quanto-date posted-at response-posted-at' href='#565e29b4734f1d3a0b000052'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>The system does well during QE - but then everyone does well during this period. Between Jan 2006 and Jan 2009 the system makes no money at all - That&#39;s 3 YEARS of no returns.</p>

<p>Basically, this system has way too high a beta - I would be careful when trading it in it&#39;s current state. </p>

<p>I think the next step would be to add a shorting component to hedge and make it market neutral.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='565e2e364506349f7400005f' id='565e2e364506349f7400005f'>
<a href='#565e2e364506349f7400005f'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51d125a71144e60865000044'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/b7dd86784deedc047d5ad0fb30378bdd?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51d125a71144e60865000044'>Peter Bakker</a>
</div>
<a UTCms='1449012794000' class='quanto-date posted-at response-posted-at' href='#565e2e364506349f7400005f'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Correct, high beta, but some people cannot short on their account (retail investors in Australia). The question is wether the Alpha of 0.12 in this system is QE dependent and I can&#39;t hypothesise why that would be. The system looks at the slope of the price of SPY and how many stocks reach a high and a low, that doesnt seem QE dependent.</p>

<p>How can we improve it: clone and improve!  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='565fa3e8173544f09500024f' id='565fa3e8173544f09500024f'>
<a href='#565fa3e8173544f09500024f'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/52b0e0e0271a27fc88000049'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e5451406e743420c700eb2b054b2fc57?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/52b0e0e0271a27fc88000049'>Blue Seahawk</a>
</div>
<a UTCms='1449108463000' class='quanto-date posted-at response-posted-at' href='#565fa3e8173544f09500024f'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Congratulations on the spot-on full use of starting capital.</p>

<p>Peter Bakker and Jamie Lunn code combo below, where I did not make the attempt to.<br>
Pro&#39;s: Beta is 43% lower, volatility lower, less drawdown.<br>
Didn&#39;t spend a lot of time tinkering further so the nearly 50 percentage point loss (see PvR) might be improvable.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5727baaacb007a03570003dc' id='5727baaacb007a03570003dc'>
<a href='#5727baaacb007a03570003dc'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56cf439a40d10609460000a9'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/76ca0f4fdda8e7d46ba24fe0325db27d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56cf439a40d10609460000a9'>Lucas Lee</a>
</div>
<a UTCms='1462221486000' class='quanto-date posted-at response-posted-at' href='#5727baaacb007a03570003dc'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi, Peter, thanks for sharing the code, are you still using this algorithm now?<br>
According to my test, your algo is better than gary&#39;s modified version with higher return. I want to enhance your algo by adding shorting component, any ideas  about how to implement that? Thanks.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='572cfe644f04acb9b0000365' id='572cfe644f04acb9b0000365'>
<a href='#572cfe644f04acb9b0000365'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/517551d74b9845e23100006c'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/54faa5f69199c42879c583e72d8205e5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/517551d74b9845e23100006c'>Eric Tjossem</a>
</div>
<a UTCms='1462566505000' class='quanto-date posted-at response-posted-at' href='#572cfe644f04acb9b0000365'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>As Lucas Lee suggests, let&#39;s try adding a shorting component. </p>

<p>We may eventually want to trade this strategy on Robinhood, which doesn&#39;t let us take a short position. But that&#39;s not too much of a problem, because we&#39;re trading <strong>SPY</strong>, an index fund with a solid inverse in <strong>SH</strong> (just like <strong>NDX</strong> has an inverse in <strong>PSQ</strong>). So whenever we want to short, we just sell the index fund and immediately buy its inverse fund.</p>

<p>Starting in 2006 - when the inverse funds became available - let&#39;s run some backtests. This will tell us how each strategy performs during the recession, as well as when the market rebounds afterwards.</p>

<hr>

<p><strong>BAKKER&#39;S LONG ONLY</strong><br>
<em>Original. Buys the market when zscor/hilo signals that it will improve. Otherwise holds cash.</em></p>

<ul>
<li>RETURNS: 195%<br></li>
<li>ALPHA: 0.09<br></li>
<li>BETA: 0.85<br></li>
<li>SHARPE: 0.86<br></li>
<li>MAX DRAWDOWN: 44.3%</li>
</ul>

<hr>

<p><strong>BAKKER&#39;S LONG + SHORT</strong><br>
<em>Buys the market when zscor/hilo signals that it will improve. Otherwise shorts the market.</em></p>

<ul>
<li>RETURNS: 279.4%<br></li>
<li>ALPHA: 0.18<br></li>
<li>BETA: 0.72<br></li>
<li>SHARPE: 1.20<br></li>
<li>MAX DRAWDOWN: 45.1%</li>
</ul>

<hr>

<p><strong>BAKKER&#39;S LONG + SHORT IN BEAR MARKET</strong><br>
<em>Buys the market when zscor/hilo signals that it will improve. Shorts market if price below long mavg. Otherwise holds cash.</em></p>

<ul>
<li>RETURNS: 283.1%<br></li>
<li>ALPHA: 0.17<br></li>
<li>BETA: 0.79<br></li>
<li>SHARPE: 1.22<br></li>
<li>MAX DRAWDOWN: 43.8%<br></li>
</ul>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='572da4d3d2416353b8000660' id='572da4d3d2416353b8000660'>
<a href='#572da4d3d2416353b8000660'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56cf439a40d10609460000a9'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/76ca0f4fdda8e7d46ba24fe0325db27d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56cf439a40d10609460000a9'>Lucas Lee</a>
</div>
<a UTCms='1462609112000' class='quanto-date posted-at response-posted-at' href='#572da4d3d2416353b8000660'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thanks, Eric. I did not notice adding short is that easy.</p>

<p>I just changed a little bit of code to hold short position instead of hold cash. Total return is 258.8% from 2006.6.21 to 2016.5.6.<br>
I also tried to use SPY/SH pair to avoid short directly, total return is 180.3% for the same period.<br>
Two questions:<br>
1. The max drawdown is too high (more than 40%), is there anyway to improve?<br>
2. Why the performance of using SPY/SH is much worse than long/short SPY?</p>

<p>Any comments? thanks.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='572e7e04b0ae80c73e0004fe' id='572e7e04b0ae80c73e0004fe'>
<a href='#572e7e04b0ae80c73e0004fe'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/572e7b001d444fce630004bd'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/eb4c956bf01933057b45159bd9be41d0?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/572e7b001d444fce630004bd'>April Marie</a>
</div>
<a UTCms='1462664712000' class='quanto-date posted-at response-posted-at' href='#572e7e04b0ae80c73e0004fe'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Lucas,  Would it be possible to modify the SPY/SH version you speak of, to allow multiple intraday trades? Utilizing a Robinhood instant account with a 25K+ balance would remove the obstacle of settlement delays and  commissions.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='572e89dd45c614c759000486' id='572e89dd45c614c759000486'>
<a href='#572e89dd45c614c759000486'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/55d6180c1339ec0106000920'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/6bf00ee69cfc0232eba532a0e34f27eb?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/55d6180c1339ec0106000920'>Deleted User</a>
</div>
<a UTCms='1462667747000' class='quanto-date posted-at response-posted-at' href='#572e89dd45c614c759000486'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I would suggest altering the algo to seek out periods of the day that are more liquid. Seems like the algo is being held hostage to whatever liquidity exists in the market at the designated order time (5 minutes before close). I experimented (on the most recent algo by Lucas) by switching the order time to 45 minutes before market close. Results are below. I would posit that the better solution would be to dynamically change order times based on market depth.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='57302f4665b9abea7d000687' id='57302f4665b9abea7d000687'>
<a href='#57302f4665b9abea7d000687'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56cf439a40d10609460000a9'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/76ca0f4fdda8e7d46ba24fe0325db27d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56cf439a40d10609460000a9'>Lucas Lee</a>
</div>
<a UTCms='1462775627000' class='quanto-date posted-at response-posted-at' href='#57302f4665b9abea7d000687'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@April, to be honest, I don&#39;t know how to implement an intraday version, I attach the SPY/SH algo here, so you could try to modify yourself.<br>
@Frank, nice try! Your total return is 291.1% comparing with my 258.8%, but max drawdown goes up to 45.4% from 40.5%. As Eric mentioned, adding a mavg check doesn&#39;t help for reducing maxdd. There might be some other ways though.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='57303a9065b9abea7d0006bd' id='57303a9065b9abea7d0006bd'>
<a href='#57303a9065b9abea7d0006bd'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/55d6180c1339ec0106000920'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/6bf00ee69cfc0232eba532a0e34f27eb?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/55d6180c1339ec0106000920'>Deleted User</a>
</div>
<a UTCms='1462778517000' class='quanto-date posted-at response-posted-at' href='#57303a9065b9abea7d0006bd'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Lucas,</p>

<p>Good point, but my only intention was to point out that the algo seems to be arbitrarily anchored to a 3:55 (E.T.) execution time daily. I guess I am still trying to figure out why it only makes trades at that specific time?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='573221b2ce4e0cc69b0000e2' id='573221b2ce4e0cc69b0000e2'>
<a href='#573221b2ce4e0cc69b0000e2'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/517551d74b9845e23100006c'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/54faa5f69199c42879c583e72d8205e5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/517551d74b9845e23100006c'>Eric Tjossem</a>
</div>
<a UTCms='1462903225000' class='quanto-date posted-at response-posted-at' href='#573221b2ce4e0cc69b0000e2'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Perhaps we can use a <strong>SPY</strong>-based volatility index (like <strong>VIX</strong>) to exit the market during periods of unusually high risk?</p>

<p><a href="https://www.quantopian.com/data/quandl/cboe_vix">https://www.quantopian.com/data/quandl/cboe_vix</a></p>

<p>Drawdown seems to occur when the VIX is high. The three VIX spikes in Oct. &#39;08, May &#39;10, and Aug &#39;11 coincide with when we lose money.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='57329c807f8f62bcf40005d7' id='57329c807f8f62bcf40005d7'>
<a href='#57329c807f8f62bcf40005d7'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/550ed26e55cf0f991c0002fc'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/2225df58d00cadc46d2809e6cdc8ec14?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/550ed26e55cf0f991c0002fc'>Rafael Delasierra</a>
</div>
<a UTCms='1462934663000' class='quanto-date posted-at response-posted-at' href='#57329c807f8f62bcf40005d7'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>At points in time the algo&#39;s here dip below $0 cash, which would reject trades in a cash account.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='57329d488420bffd4d0005d1' id='57329d488420bffd4d0005d1'>
<a href='#57329d488420bffd4d0005d1'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/517551d74b9845e23100006c'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/54faa5f69199c42879c583e72d8205e5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/517551d74b9845e23100006c'>Eric Tjossem</a>
</div>
<a UTCms='1462934860000' class='quanto-date posted-at response-posted-at' href='#57329d488420bffd4d0005d1'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>No, it dips below zero <em>returns</em> - to as much as 40% losses. So a $100 initial investment, for example, would only be worth $60 in October &#39;08, the lowest point of drawdown. Trades will continue to execute, you&#39;re just worse off than when you started.</p>

<p>But you&#39;re right; ideally we wouldn&#39;t let it get to that point. We want to take our money out of the S&amp;P during bad market conditions and instead make our returns on well-placed shorts. So I&#39;m going to see about making the algo more cautious during times of high volatility.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='573305f7ce4e0cab02000944' id='573305f7ce4e0cab02000944'>
<a href='#573305f7ce4e0cab02000944'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/550ed26e55cf0f991c0002fc'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/2225df58d00cadc46d2809e6cdc8ec14?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/550ed26e55cf0f991c0002fc'>Rafael Delasierra</a>
</div>
<a UTCms='1462961659000' class='quanto-date posted-at response-posted-at' href='#573305f7ce4e0cab02000944'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Eric -</p>

<p>Yes. I understand your point, but  what I am trying to say is that if you have a cash account (and ca not use margin, like for an IRA account, or an Australian account) and you place an order for greater than the amount of money you have in your account, it will be rejected. The algo&#39;s above are not taking rhat into consideration as leverage sometimes goes above 1. Leverage needs to be below 1 at all times.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='57331d70563f2e29e90002e9' id='57331d70563f2e29e90002e9'>
<a href='#57331d70563f2e29e90002e9'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51d125a71144e60865000044'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/b7dd86784deedc047d5ad0fb30378bdd?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51d125a71144e60865000044'>Peter Bakker</a>
</div>
<a UTCms='1462967673000' class='quanto-date posted-at response-posted-at' href='#57331d70563f2e29e90002e9'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>havent seen this in real trading yet but I&#39;ll create some guards while I post it to Q2. i have some other ideas to improve the algo and will post as soon as work is less mad  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='57333de0a1bc7d99dd000ce9' id='57333de0a1bc7d99dd000ce9'>
<a href='#57333de0a1bc7d99dd000ce9'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/550ed26e55cf0f991c0002fc'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/2225df58d00cadc46d2809e6cdc8ec14?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/550ed26e55cf0f991c0002fc'>Rafael Delasierra</a>
</div>
<a UTCms='1462975976000' class='quanto-date posted-at response-posted-at' href='#57333de0a1bc7d99dd000ce9'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Peter -</p>

<p>It would be great to see your algo just as it is in Q2 :)  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5733a3f123d3214cc600032f' id='5733a3f123d3214cc600032f'>
<a href='#5733a3f123d3214cc600032f'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/517551d74b9845e23100006c'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/54faa5f69199c42879c583e72d8205e5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/517551d74b9845e23100006c'>Eric Tjossem</a>
</div>
<a UTCms='1463002111000' class='quanto-date posted-at response-posted-at' href='#5733a3f123d3214cc600032f'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Rafael -- I see what you mean now; you&#39;re talking about unsettled cash, which raises a really good point. </p>

<p>Our cash will be tied up for a three-day period in settlement (T-3) after each sale of stock, and during that time we might decide to buy the market again. If we use a SPY/SH strategy, there will definitely be times when we want to turn around and buy an inverse quickly, and the order won&#39;t fill because we have no cash.</p>

<p>Robinhood Instant accounts let you use unsettled funds as though they were already settled (technically, they provide 100% margin at no interest on unsettled funds, then call them in when they settle), but not everyone has Instant and it&#39;s a pretty long queue to get into the beta. For normal cash accounts, here&#39;s how to factor in T-3 into your models: <a href="https://www.quantopian.com/help#sample-robinhood">https://www.quantopian.com/help#sample-robinhood</a>.</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5734ad4023d32116bb000f4a' id='5734ad4023d32116bb000f4a'>
<a href='#5734ad4023d32116bb000f4a'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5730f76fd0bbeebf6100027e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/d72944da3285b6e3a1840c83e1c65dbb?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5730f76fd0bbeebf6100027e'>Tony Yin</a>
</div>
<a UTCms='1463070025000' class='quanto-date posted-at response-posted-at' href='#5734ad4023d32116bb000f4a'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Eric, when the drawdown is close to -40%, is it possible in the program to add cash to average down, i.e., add money?  When it go back to 0% or higher withdraw the added money? I am a beginner and very interest to see your post. And I started to learn the coding. Great work. Thanks.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5736173d09880f48020000a2' id='5736173d09880f48020000a2'>
<a href='#5736173d09880f48020000a2'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/517551d74b9845e23100006c'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/54faa5f69199c42879c583e72d8205e5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/517551d74b9845e23100006c'>Eric Tjossem</a>
</div>
<a UTCms='1463162694000' class='quanto-date posted-at response-posted-at' href='#5736173d09880f48020000a2'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>No, there&#39;s no way to trigger a withdrawal / deposit from the Robinhood API. </p>

<p>Glad you&#39;re figuring things out! Good luck and have fun!  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='57364723628f72249b000270' id='57364723628f72249b000270'>
<a href='#57364723628f72249b000270'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56cf439a40d10609460000a9'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/76ca0f4fdda8e7d46ba24fe0325db27d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56cf439a40d10609460000a9'>Lucas Lee</a>
</div>
<a UTCms='1463174952000' class='quanto-date posted-at response-posted-at' href='#57364723628f72249b000270'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Tony, if you really want to do that, as a workaround, you could manually deposit money to your account when you find the draw down is too high (-40% for example), the live trading algo will automatically buy SPY for you; or you could change this algo to always keep some cash unless the high draw down really happens.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='573a154e73656f6e30000a5e' id='573a154e73656f6e30000a5e'>
<a href='#573a154e73656f6e30000a5e'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5730f76fd0bbeebf6100027e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/d72944da3285b6e3a1840c83e1c65dbb?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5730f76fd0bbeebf6100027e'>Tony Yin</a>
</div>
<a UTCms='1463424339000' class='quanto-date posted-at response-posted-at' href='#573a154e73656f6e30000a5e'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Lucas Lee , i thought it is a good idea to keep some cash as when drawdown is high. If this algo is changed to rebalance once a day, will it do better job? I am learning programming here and about to try that later.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='573f6415c482d6e073000228' id='573f6415c482d6e073000228'>
<a href='#573f6415c482d6e073000228'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5732bf0fce4e0cab02000701'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/201322d6e11b2350ff442231975c1ae4?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5732bf0fce4e0cab02000701'>io trader</a>
</div>
<a UTCms='1463772190000' class='quanto-date posted-at response-posted-at' href='#573f6415c482d6e073000228'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I am new to quantopian, just trying to figure things out.  Why is it when I backtest this algo, it will produce completely different signals based on the time frame I choose?  I noticed this when I started to run in live mode, it was long SPY but the backtest ended yesterday is currently short SPY.   I would think if I ran a backtest from 1/1/2016 to 5/19/2016, the signals  in may should match the signals in a shorter backtest ran from 5/1/2016 to 5/19/2016 and should match live signals.  I tried various timeframes and always get different results.  Is this expected?  Is anyone running this algo live? </p>

<p>Thanks.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='573f9407074bb388d4000167' id='573f9407074bb388d4000167'>
<a href='#573f9407074bb388d4000167'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5732bf0fce4e0cab02000701'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/201322d6e11b2350ff442231975c1ae4?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5732bf0fce4e0cab02000701'>io trader</a>
</div>
<a UTCms='1463784461000' class='quanto-date posted-at response-posted-at' href='#573f9407074bb388d4000167'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>After debugging a bit more, i found that the arrays during initialization are only appended to, so these arrays build over time.</p>

<p>For example in the line here:<br>
<em>spyslope= stats.zscore(context.spyslope</em>index, axis=0, ddof=1)[-1]</p>

<p>The context.spyslope_index an array with a length equal to the number of days the algo has been running.</p>

<p>Seems like a bug to me, truncating this array to say the last 22 days yields very different results.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5754179a0c5239c58800060a' id='5754179a0c5239c58800060a'>
<a href='#5754179a0c5239c58800060a'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51d125a71144e60865000044'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/b7dd86784deedc047d5ad0fb30378bdd?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51d125a71144e60865000044'>Peter Bakker</a>
</div>
<a UTCms='1465128866000' class='quanto-date posted-at response-posted-at' href='#5754179a0c5239c58800060a'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@io trader: if I would put it live I would preload/generate a decent history.</p>

<p>I ported the algo to Q2 and I added a Market Bias indicator and fixed  and documented the code. I didn&#39;t optimise the parameters yet and I didn&#39;t align them ... I leave that for someone who thinks that makes a difference. The current parameters are a bit standard, a trading week and a half, a monthly period and a 200 day period, works for me</p>

<p>Happy to see improvements!  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='57541d82eb7fd485280005cd' id='57541d82eb7fd485280005cd'>
<a href='#57541d82eb7fd485280005cd'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51d125a71144e60865000044'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/b7dd86784deedc047d5ad0fb30378bdd?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51d125a71144e60865000044'>Peter Bakker</a>
</div>
<a UTCms='1465130378000' class='quanto-date posted-at response-posted-at' href='#57541d82eb7fd485280005cd'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>last version  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='57547c030c5239c588000959' id='57547c030c5239c588000959'>
<a href='#57547c030c5239c588000959'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/573e0c4dd5216add08000369'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e66728a0016882df6df625326490652a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/573e0c4dd5216add08000369'>Eric DeShields</a>
</div>
<a UTCms='1465154572000' class='quanto-date posted-at response-posted-at' href='#57547c030c5239c588000959'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Peter Bakker, some awesome improvement in the max draw-down and the initial first years of performance without a huge hit to the ending performance. I am interested in the modifications that you made and plan to go through the algo as much as possible. Great job!  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='575ad07a7189fdd0360004ee' id='575ad07a7189fdd0360004ee'>
<a href='#575ad07a7189fdd0360004ee'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56cf439a40d10609460000a9'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/76ca0f4fdda8e7d46ba24fe0325db27d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56cf439a40d10609460000a9'>Lucas Lee</a>
</div>
<a UTCms='1465569409000' class='quanto-date posted-at response-posted-at' href='#575ad07a7189fdd0360004ee'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Peter, thanks a lot, brilliant idea to use market bias indicator to control maxdd. I will try to add short and do some optimization.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='577d3f2f84694320cc000177' id='577d3f2f84694320cc000177'>
<a href='#577d3f2f84694320cc000177'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/55c8249951acaa6d6300011d'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/bf85ab3fbdb3b41fd6e7999977607e51?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/55c8249951acaa6d6300011d'>Dave Carriere</a>
</div>
<a UTCms='1467825973000' class='quanto-date posted-at response-posted-at' href='#577d3f2f84694320cc000177'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>What about buying SH instead of going all to cash?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='577d456384694320cc0001c4' id='577d456384694320cc0001c4'>
<a href='#577d456384694320cc0001c4'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/517551d74b9845e23100006c'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/54faa5f69199c42879c583e72d8205e5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/517551d74b9845e23100006c'>Eric Tjossem</a>
</div>
<a UTCms='1467827561000' class='quanto-date posted-at response-posted-at' href='#577d456384694320cc0001c4'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Dave: In one of my own variants, I&#39;ve modified each SPY buy order to also zero out SH:</p>

<p><code>order_target_percent(context.sh, 0)</code></p>

<p>And each SPY sell order to buy up SH at the same time:</p>

<p><code>order_target_percent(context.sh, 1)</code></p>

<p>I&#39;m currently testing whether this works with real money trading via Robinhood Instant. If you&#39;re interested in getting in on the strategy, be sure to get in line for Robinhood Instant (otherwise you&#39;ll have to wait 3 days for settlement before switching funds between SPY and SH, which may impact returns).  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='577d5c3cd683f0de770000bf' id='577d5c3cd683f0de770000bf'>
<a href='#577d5c3cd683f0de770000bf'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/55c8249951acaa6d6300011d'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/bf85ab3fbdb3b41fd6e7999977607e51?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/55c8249951acaa6d6300011d'>Dave Carriere</a>
</div>
<a UTCms='1467833411000' class='quanto-date posted-at response-posted-at' href='#577d5c3cd683f0de770000bf'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thanks for the advice Eric.  I have Robinhood Instant.  I&#39;m new to coding Python though, but know Perl, PHP, BASH very well, so I&#39;m hoping it won&#39;t take me long to learn.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='577d689d0e5cb7dfc7000197' id='577d689d0e5cb7dfc7000197'>
<a href='#577d689d0e5cb7dfc7000197'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/517551d74b9845e23100006c'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/54faa5f69199c42879c583e72d8205e5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/517551d74b9845e23100006c'>Eric Tjossem</a>
</div>
<a UTCms='1467836581000' class='quanto-date posted-at response-posted-at' href='#577d689d0e5cb7dfc7000197'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Here&#39;s a combination of SPY/SH using one of Bakker&#39;s earlier versions (v2) of the momentum algo. It&#39;s a pure long-inverse combination which never holds cash - you&#39;re either with the market or against it.</p>

<p>It doesn&#39;t perform as well as a variant of v3, since there are a much larger number of conditions in which we sell SPY (like market bias), some of which don&#39;t always make sense to short.</p>

<p>Comment out 238 and/or 235 if you only want it to pick up SH when long mavg is on  a negative trend, not during short-term downturns.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5782c25639bd8b7892000fee' id='5782c25639bd8b7892000fee'>
<a href='#5782c25639bd8b7892000fee'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/55c8249951acaa6d6300011d'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/bf85ab3fbdb3b41fd6e7999977607e51?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/55c8249951acaa6d6300011d'>Dave Carriere</a>
</div>
<a UTCms='1468187227000' class='quanto-date posted-at response-posted-at' href='#5782c25639bd8b7892000fee'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thanks Eric.  I&#39;ll take a look.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='579710f7c37d14b58f000004' id='579710f7c37d14b58f000004'>
<a href='#579710f7c37d14b58f000004'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56cf439a40d10609460000a9'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/76ca0f4fdda8e7d46ba24fe0325db27d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56cf439a40d10609460000a9'>Lucas Lee</a>
</div>
<a UTCms='1469518077000' class='quanto-date posted-at response-posted-at' href='#579710f7c37d14b58f000004'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>FYI, buy TLT instead of SH have good performance while reducing the maxdd  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5e77bf95f134540046659aab' id='5e77bf95f134540046659aab'>
<a href='#5e77bf95f134540046659aab'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5d3d24143ef9cf0045ff0d44'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/506fa974ecff9a9af1faa457aac13d0c?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5d3d24143ef9cf0045ff0d44'>sat kumar</a>
</div>
<a UTCms='1584906133000' class='quanto-date posted-at response-posted-at' href='#5e77bf95f134540046659aab'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Peter do you have any step by step on how to do live trading with any broker . Thanks  </p>
</div>
</div>
</div>

</div>
<div class='sign-in-please'>
Please <a href='/signin?return_to=/posts/trading-spy-based-on-the-slope-zscore-of-and-the-hilo-index-of-the-spy-components-tradeable'>sign in</a> or
<a href='/users/sign_up?redirect_to=/posts/trading-spy-based-on-the-slope-zscore-of-and-the-hilo-index-of-the-spy-components-tradeable'>join Quantopian</a> to
post a reply.
</div>
</div>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId: "550580758292093",
      status: false,
      cookie: true,
      xfbml: true
    });
  };
  
  (function(d, debug){
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) {return;}
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
    ref.parentNode.insertBefore(js, ref);
  }(document, /*debug*/ false));
  
  window.twttr = (function (d,s,id) {
    var t, js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return; js=d.createElement(s); js.id=id;
    js.src="//platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs);
    return window.twttr || (t = { _e: [], ready: function(f){ t._e.push(f) } });
  }(document, "script", "twitter-wjs"));
</script>
<script>
  $(document).ready(function () {
    quanto.instances.pm = new quanto.PostManager(false)
  });
</script>

<div class='login-footer'>
<div class='container'>
<div class='login-footer-text'>
Become an expert in quant finance through Quantopian's hands-on education.
</div>
<div class='login-footer-button'>
<button class='btn btn-v2 stroke join-modal-link mixpanel-button' data-event='anon join footer click posts' data-mixpanel='click'>
Join Now
</button>
</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='error-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'>Error</span>
</div>
<div class='modal-body body-content'>
<p>Sorry, something went wrong.  Try again or contact us by <a class='feedback-link'>sending feedback</a>.</p>
</div>
<div class='modal-footer'>
<button class='btn btn-v2 blue action-button' data-dismiss='modal' href='#'>Close</button>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='confirmation-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'></span>
</div>
<div class='modal-body body-content'></div>
<div class='modal-footer'>
<div class='pull-right'>
<button class='btn btn-v2 border' data-dismiss='modal'>Cancel</button>
<button class='btn btn-v2 blue action-button' data-dismiss='modal'></button>
</div>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='message-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'></span>
</div>
<div class='modal-body body-content'></div>
<div class='modal-footer'>
<button class='btn btn-v2 blue action-button' data-dismiss='modal' id='message-modal-close'>Close</button>
</div>

</div>
</div>
</div>

<div class='always-bootstrap3-modals'>
<div class='fade modal quanto-modal-v2' id='join-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header visible-small'>
<span class='title'>
Join Quantopian.  It's Free!
</span>
<div class='modal-x-out visible-xs'></div>
</div>
<div class='modal-body'>
<div class='flex-wrap'>
<div class='join-left-pane hidden-small'>
<div class='margin_30l'>
<div class='join-hero-text'>
Join Quantopian.  It's Free!
</div>
<div class='join-benefits'>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image code'></div>
</div>
<div class='join-text'>
Use our research platform, backtester, and dozens of clean data sets.
</div>
</div>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image learn'></div>
</div>
<div class='join-text'>
Learn with our hands-on education and community forums.
</div>
</div>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image win'></div>
</div>
<div class='join-text'>
Enter to win cash prizes in our contest.
</div>
</div>
</div>
<div class='hidden saved-reminder'>
Don't worry, all your work is already saved.
</div>
</div>
</div>
<div class='join-right-pane'>
<div class='hidden-small'>
<div class='button-pane'>
<a class="button btn-v2 user-form-btn" href="/signin">Already a Quantopian member?</a>
</div>
</div>
<div class='visible-small'>
<div class='already-member'>
<a href='/signin'>Already a Quantopian member?</a>
</div>
</div>
<form class="quanto-form-v2" id="new-user-modal-form" action="/users" accept-charset="UTF-8" data-remote="true" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><div class='error-message hidden'>
<div class='message'></div>
</div>
<div class='name-group'>
<div class='form-group inline-block'>
<label for="user_firstname">First Name</label>
<input class="form-control firstname" pattern=".*" required="required" autocomplete="off" autofocus="autofocus" type="text" name="user[firstname]" id="user_firstname" />
</div>
<div class='form-group inline-block'>
<label for="user_lastname">Last Name</label>
<input class="form-control" value="" pattern=".*" required="required" autocomplete="off" type="text" name="user[lastname]" id="user_lastname" />
</div>
</div>
<div class='form-group'>
<label for="user_email">Email</label>
<input class="form-control" value="" pattern=".*" required="required" autocomplete="off" type="email" name="user[email]" id="user_email" />
</div>
<div class='form-group'>
<label for="user_password">Password</label>
<input autocomplete="off" class="form-control" pattern=".*" required="required" type="password" name="user[password]" id="user_password" />
</div>
<div class='checkbox eula'>
<input id='eula-checkbox' type='checkbox'>
<div class='quanto-checkbox'></div>
<label for='eula-checkbox' id='checkbox-label'>I accept the <a href='/policies/terms' target='_blank'>Terms Of Use</a> and <a href='/policies/privacy' target='_blank'>Privacy Policy</a>.</label>
</div>
<div class='checkbox mailchimp-box'>
<input name="user[allow_marketing_emails]" type="hidden" value="0" /><input type="checkbox" value="1" name="user[allow_marketing_emails]" id="user_allow_marketing_emails" />
<div class='quanto-checkbox'></div>
<label for='user_allow_marketing_emails'>
Send me email updates with the latest news from the Quantopian community. We send these emails about once a month.
</label>
</div>
<div class='button-row'>
<button class='btn-v2 blue full' data-redirect-to='/tutorials/getting-started' id='sign-up-button' type='Submit'>Join Quantopian</button>
</div>
</form></div>
</div>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='feedback-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title'>Contact Support</span>
</div>
<div class='modal-body'>
<form class='anon-user controls quanto-form-v2' id='feedback-form'>
<div class='feedback-inputs'>
<div class='form-group'>
<input autofocus class='form-control' id='feedback-email-box' name='email' placeholder='Email Address' type='email'>
</div>
<div class='form-group'>
<input class='form-control' id='feedback-name-box' placeholder='Name' type='name'>
</div>
<div class='form-group'>
<textarea class='form-control' id='feedback-box' name='feedback' placeholder='What may we help you with?' rows='10'></textarea>
</div>
</div>
</form>
<form class='hidden quanto-form-v2 select-resource-area'>
<div class='select-step select-type-step'>
<div class='form-group'>
<select class='form-control select-resource-dropdown' title='Select the item you need help with'>
<option value='algorithm'>Algorithm</option>
<option value='backtest'>Backtest</option>
<option value='notebook'>Notebook</option>
</select>
</div>
</div>
<div class='select-step loading-area hidden'>
<div class='loading-text'>
Loading...
</div>
</div>
<div class='select-step empty-list-area hidden'>
<div class='back-button'>Go Back</div>
<div class='empty-text'>
No <span class='empty-list-resource-text'>algorithms</span> found
</div>
</div>
<div class='select-algo-area select-step hidden'>
<div class='back-button'>Go Back</div>
<table class='select-algo-table select-item-table'>
<thead>
<tr>
<th>
Algorithm
<span class='sort-icon'></span>
</th>
<th>
Last Modified
<span class='sort-icon'></span>
</th>
</tr>
</thead>
</table>
</div>
<div class='select-backtest-area select-step hidden'>
<div class='back-button'>Go Back</div>
<table class='select-backtest-table select-item-table'>
<thead>
<tr>
<th>
Backtest
<span class='sort-icon'></span>
</th>
<th>
Started At
<span class='sort-icon'></span>
</th>
<th>
Overall Return
<span class='sort-icon'></span>
</th>
<th>
Status
<span class='sort-icon'></span>
</th>
</tr>
</thead>
</table>
</div>
<div class='select-notebook-area select-step hidden'>
<div class='back-button'>Go Back</div>
<div class='subtitle select-cell-step'>
Choose a cell to use as the preview for this notebook:
</div>
<div class='iframe-wrapper'>
<iframe class='notebook-list-iframe slow-fade' src=''></iframe>
</div>
<div class='progress-area slow-fade in'>
<div class='progress-container'>
<div class='progress-title'>
<div class='quanto-loader gray'></div>
</div>
</div>
</div>
<div class='maintenance-area'>
<div class='error-container'>
<div class='row'>
<div class='col-md-14 msg-title h1'>
Sorry, research is currently undergoing maintenance.
</div>
</div>
<div class='row'>
<div class='col-md-14 msg-subtitle'>
Please check back shortly. If the maintenance period lasts longer than expected,
you can find updates on <a href='https://status.quantopian.com/'>status.quantopian.com</a>.
</div>
</div>

</div>
</div>
<div class='error-area'>
<div class='error-container'>
<div class='row'>
<div class='col-md-14 msg-title h1'>
Sorry, something went wrong on our end.
</div>
</div>
<div class='row'>
<div class='col-md-14 msg-subtitle'>
Please try again or contact <a class='open-feedback-link'>Quantopian support</a>.
</div>
</div>

</div>
</div>

</div>
<div class='selected-item-area select-step hidden'>
<div class='selected-item-group form-group'>
<div class='selected-item-control'>
<input class='disabled form-control selected-item-box' type='text'>
<span class='secure-icon icon'></span>
<button class='btn change change-primary-item-button change-selection-button new-btn transparent' type='button'>
<span class='refresh-icon icon'></span>
</button>
</div>
<div class='selected-backtest-control'>
<input class='disabled form-control selected-backtest-box' type='text'>
<span class='secure-icon icon'></span>
<button class='btn change-backtest-button change-selection-button new-btn transparent' type='button'>
<span class='refresh-icon icon'></span>
</button>
</div>
</div>
<div class='checkbox-group form-group'>
<div class='checkbox give-permission'>
<input class='give-permission-checkbox' id='feedback-give-permission-checkbox' type='checkbox'>
<div class='quanto-checkbox'></div>
<label for='feedback-give-permission-checkbox'>
I permit Quantopian to view <span class='item-type-text'>this algorithm,
backtest or notebook and their imported datasets</span> for the purpose of providing support.
</label>
</div>
</div>
</div>
</form>

<div class='loading-step hidden'>
<div class='loading-text'>
Submitting your support ticket...
</div>
</div>
<div class='success-step invisible'>
<h2 class='title center'>
You've successfully submitted a support ticket.
</h2>
<p>
Our support team will be in touch soon.
</p>
<div class='confirmation-image'></div>
</div>
</div>
<div class='modal-footer'>
<button class='btn-v2 blue' id='send-feedback-button'>Send</button>
<div class='error-message hidden'>
Error submitting support request.
</div>
</div>

</div>
</div>
</div>

</div>
</div>
<div class='footer' id='quanto-footer-container'>
<div class='container'>
<div class='row header-row'>
<div class='col-sm-fourth span3'>
<img class='async-image logotype-image' data-src='https://qf.quantopian.com/assets/logos/logo-q-full-b23bda5ac757691b9259d396d0dfef91567165868b8c955a836649686e6d2248.svg'>
</div>
<div class='col-sm-fourth span3'></div>
<div class='col-sm-fourth span3'></div>
<div class='col-sm-fourth span3'>
<div class='feedback-email'>
Need help?
<a href="/cdn-cgi/l/email-protection#3f595a5a5b5d5e5c547f4e4a5e514b504f565e51115c5052">Contact support.</a>
</div>
</div>
</div>
<div class='row'>
<div class='col-sm-fourth span3'>
<div class='header'>Company</div>
<div class='footer-row'>
<a href='/about'>About</a>
</div>
<div class='footer-row'>
<a href='/academia'>Academia</a>
</div>
<div class='footer-row'>
<a href='/jobs'>Careers</a>
</div>
<div class='footer-row'>
<a href='/posts'>Community</a>
</div>
<div class='footer-row'>
<a href='/events'>Events</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Learn &amp; Support</div>
<div class='footer-row'>
<a href='/faq'>FAQ</a>
</div>
<div class='footer-row'>
<a href='/tutorials/getting-started'>Getting Started</a>
</div>
<div class='footer-row'>
<a href='/docs'>Documentation</a>
</div>
<div class='footer-row'>
<a href='/tutorials'>Tutorials</a>
</div>
<div class='footer-row'>
<a href='/lectures'>Lectures</a>
</div>
<div class='footer-row'>
<a href='/opensource'>Open Source</a>
</div>
<div class='footer-row'>
<a href='https://status.quantopian.com/'>Site Status</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Notices</div>
<div class='footer-row'>
<a href='/policies/terms'>Terms of Use</a>
</div>
<div class='footer-row'>
<a href='/policies/privacy'>Privacy Policy</a>
</div>
<div class='footer-row'>
<a href='/security'>Security</a>
</div>
<div class='footer-row'>
<a href='/policies/code-of-conduct'>Code of Conduct</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Follow Us</div>
<div class='footer-row'>
<a href='https://www.twitter.com/quantopian'>Twitter</a>
</div>
<div class='footer-row'>
<a href='https://www.facebook.com/quantopian'>Facebook</a>
</div>
<div class='footer-row'>
<a href='https://www.linkedin.com/company/quantopian'>LinkedIn</a>
</div>
<div class='footer-row'>
<a href='https://www.youtube.com/channel/UC606MUq45P3zFLa4VGKbxsg'>YouTube</a>
</div>
</div>
</div>
<div class='row'>
<div class='col-xs-14 span12'>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian.
</p>
<p>
In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>

</div>
</div>
</div>
</div>
</div>
<div class='mobile-footer'>
<div class='mobile-nav-category main-links'>
<div class='mobile-nav-row-footer'>
<a href='/about'>About Quantopian</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/jobs'>Careers</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/posts'>Community</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/events'>Events</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/docs'>Documentation</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/academia'>Academia</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/lectures'>Lectures</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://status.quantopian.com/'>Status</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.facebook.com/quantopian'>Facebook</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.twitter.com/quantopian'>Twitter</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.linkedin.com/company/quantopian'>LinkedIn</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.youtube.com/channel/UC606MUq45P3zFLa4VGKbxsg'>YouTube</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/policies/terms'>Terms of Use</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/policies/privacy'>Privacy Policy</a>
</div>
</div>
<div class='mobile-nav-category'>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian.
</p>
<p>
In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>

</div>
</div>
</div>

</div>
<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script></body>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', "UA-8519877-1", {
    cookieDomain: "quantopian.com"
  });
  ga('set', 'dimension1', 'session_5f9dc7425d387f00077e48e4');
  
  ga('send', 'pageview');
</script>

<input type="hidden" name="is_mac" id="is_mac" value="false" />
<input type="hidden" name="mp" id="mp" value="75873953cd404bcc1da88a55ff51e3b4" />
<script>
  (function(e,a){if(!a.__SV){var b=window;try{var c,l,i,j=b.location,g=j.hash;c=function(a,b){return(l=a.match(RegExp(b+"=([^&]*)")))?l[1]:null};g&&c(g,"state")&&(i=JSON.parse(decodeURIComponent(c(g,"state"))),"mpeditor"===i.action&&(b.sessionStorage.setItem("_mpcehash",g),history.replaceState(i.desiredHash||"",e.title,j.pathname+j.search)))}catch(m){}var k,h;window.mixpanel=a;a._i=[];a.init=function(b,c,f){function e(b,a){var c=a.split(".");2==c.length&&(b=b[c[0]],a=c[1]);b[a]=function(){b.push([a].concat(Array.prototype.slice.call(arguments,
  0)))}}var d=a;"undefined"!==typeof f?d=a[f]=[]:f="mixpanel";d.people=d.people||[];d.toString=function(b){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);b||(a+=" (stub)");return a};d.people.toString=function(){return d.toString(1)+".people (stub)"};k="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
  for(h=0;h<k.length;h++)e(d,k[h]);a._i.push([b,c,f])};a.__SV=1.2;b=e.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";c=e.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}})(document,window.mixpanel||[]);
  mixpanel.init("75873953cd404bcc1da88a55ff51e3b4");
</script>
<script>
  mixpanel.track("view page", {"page": window.location.pathname});
</script>
</html>
