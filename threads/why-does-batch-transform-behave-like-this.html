<!DOCTYPE html>
<html>
<head>
<link href='i1.wp.com' rel='dns-prefetch'>
<link href='i2.wp.com' rel='dns-prefetch'>
<link href='i3.wp.com' rel='dns-prefetch'>
<meta content='2HgX9mcLHaPOX6sfaaAkhWtblhEB9yUNw4l6l46e1k4' name='google-site-verification'>
<link rel="shortcut icon" type="image/x-icon" href="external/favicon-q-ac1a76f2c200e9026b5b1147519bb4fab6256910588b831e2411bc6c7c1218c3.png" />
<title>
Why does batch_transform behave like this?
</title>
<meta content='Hi everyone, need some help on the batch_transform. Dive into the codeimport randomdef initialize(context):      pass@batch_transform(window_length=1, refresh_period=1)  def batch(datapanel):      return random.random()  # Will be called on every trade event for the securities you specify.  def handle_data(context, data):      x = batch(data)      if x is not None:          log.info(x)          order(sid(24), 50)  From what I understand, when I set therefresh period=1  the batch_transformed...' name='description'>
<link rel="stylesheet" media="all" href="external/quanto-base-bundle-e8eb6050172aa0d24124d5c24bac90b2cccd88b5b9c7742026c0e9efab038c6e.css" />
<link rel="stylesheet" media="all" href="external/quanto-posts-bundle-aab01368d3f82d8dafc94ee9eabb82e77dc8c9fbbffa952fdcdc744dfa523cf3.css" />
<script src="external/quanto_global-057218867db29d5768131af5d6fb3476cef098e7d9e655108befb903c7ee985e.js"></script>
<script src="external/posts_bundle-3dfd82fa469c393d752e461d837aec9e4e364ae39f49198e34a6626f2180fdf7.js"></script>
<link href='external/logo-q-180x180-0f5a6a439c99203ed4aea6f656e7604c543d287be43d8b17c7591c1131f09a59.png' rel='apple-touch-icon'>
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="n+pJr+gbCQPWx1901WRbpyP6AiZsDeMHA65whwxV33PjjD/iSu3b4G/aBkWai/PTG3QhTxbB9hyBoavtphC9yA==" />
<meta content='width=device-width, initial-scale=1.0' name='viewport'>
<script>
//<![CDATA[
window.quanto_data={};quanto_data.bounce_back_params={"show_modal":null,"feedback_text":null};quanto_data.namespace="public";quanto_data.talib_info={"ADOSC":["Chaikin A/D Oscillator (Volume Indicators)",["fastperiod","3"],["slowperiod","10"]],"ADX":["Average Directional Movement Index (Momentum Indicators)",["timeperiod","14"]],"ADXR":["Average Directional Movement Index Rating (Momentum Indicators)",["timeperiod","14"]],"APO":["Absolute Price Oscillator (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["matype","0"]],"AROON":["Aroon (Momentum Indicators)",["timeperiod","14"]],"AROONOSC":["Aroon Oscillator (Momentum Indicators)",["timeperiod","14"]],"ATR":["Average True Range (Volatility Indicators)",["timeperiod","14"]],"BBANDS":["Bollinger Bands (Overlap Studies)",["timeperiod","5"],["nbdevup","2"],["nbdevdn","2"],["matype","0"]],"BETA":["Beta (Statistic Functions)",["timeperiod","5"]],"CCI":["Commodity Channel Index (Momentum Indicators)",["timeperiod","14"]],"CMO":["Chande Momentum Oscillator (Momentum Indicators)",["timeperiod","14"]],"CORREL":["Pearson's Correlation Coefficient (r) (Statistic Functions)",["timeperiod","30"]],"DEMA":["Double Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"DX":["Average Directional Movement Index (Momentum Indicators)",["timeperiod","14"]],"EMA":["Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"KAMA":["Kaufman Adaptive Moving Average (Overlap Studies)",["timeperiod","30"]],"LINEARREG":["Linear Regression (Statistic Functions)",["timeperiod","14"]],"LINEARREG_ANGLE":["Linear Regression Angle (Statistic Functions)",["timeperiod","14"]],"LINEARREG_INTERCEPT":["Linear Regression Intercept (Statistic Functions)",["timeperiod","14"]],"LINEARREG_SLOPE":["Linear Regression Slope (Statistic Functions)",["timeperiod","14"]],"MA":["Moving average (Overlap Studies)",["timeperiod","30"],["matype","0"]],"MACD":["Moving Average Convergence/Divergence (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["signalperiod","9"]],"MACDEXT":["MACD with controllable MA type (Momentum Indicators)",["fastperiod","12"],["fastmatype","0"],["slowperiod","26"],["slowmatype","0"],["signalperiod","9"],["signalmatype","0"]],"MACDFIX":["Moving Average Convergence/Divergence Fix 12/26 (Momentum Indicators)",["signalperiod","9"]],"MAX":["Highest values over a specified period (Math Operators)",["timeperiod","30"]],"MAXINDEX":["Index of highest value over a specified period (Math Operators)",["timeperiod","30"]],"MFI":["Money Flow Index (Momentum Indicators)",["timeperiod","14"]],"MIDPOINT":["Midpoint over period (Overlap Studies)",["timeperiod","14"]],"MIDPRICE":["Midpoint Price over period (Overlap Studies)",["timeperiod","14"]],"MIN":["Lowest value over a specified period (Math Operators)",["timeperiod","30"]],"MININDEX":["Index of lowest value over a specified period (Math Operators)",["timeperiod","30"]],"MINMAX":["Lowest and highest values over a specified period (Math Operators)",["timeperiod","30"]],"MINMAXINDEX":["Indexes of lowest and highest values over a specified period (Math Operators)",["timeperiod","30"]],"MINUS_DI":["Minus Directional Indicator (Momentum Indicators)",["timeperiod","14"]],"MINUS_DM":["Minus Directional Movement (Momentum Indicators)",["timeperiod","14"]],"MOM":["Momentum (Momentum Indicators)",["timeperiod","10"]],"NATR":["Normalized Average True Range (Volatility Indicators)",["timeperiod","14"]],"PLUS_DI":["Plus Directional Indicator (Momentum Indicators)",["timeperiod","14"]],"PLUS_DM":["Plus Directional Movement (Momentum Indicators)",["timeperiod","14"]],"PPO":["Percentage Price Oscillator (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["matype","0"]],"ROC":["Rate of change: ((price/prevPrice)-1)*100 (Momentum Indicators)",["timeperiod","10"]],"ROCP":["Rate of change Percentage: (price-prevPrice)/prevPrice (Momentum Indicators)",["timeperiod","10"]],"ROCR":["Rate of change ratio: (price/prevPrice) (Momentum Indicators)",["timeperiod","10"]],"ROCR100":["Rate of change ratio 100 scale: (price/prevPrice)*100 (Momentum Indicators)",["timeperiod","10"]],"RSI":["Relative Strength Index (Momentum Indicators)",["timeperiod","14"]],"SMA":["Simple Moving Average (Overlap Studies)",["timeperiod","30"]],"STDDEV":["Standard Deviation (Statistic Functions)",["timeperiod","5"],["nbdev","1"]],"STOCH":["Stochastic (Momentum Indicators)",["fastk_period","5"],["slowk_period","3"],["slowk_matype","0"],["slowd_period","3"],["slowd_matype","0"]],"STOCHF":["Stochastic Fast (Momentum Indicators)",["fastk_period","5"],["fastd_period","3"],["fastd_matype","0"]],"STOCHRSI":["Stochastic Relative Strength Index (Momentum Indicators)",["timeperiod","14"],["fastk_period","5"],["fastd_period","3"],["fastd_matype","0"]],"T3":["Triple Exponential Moving Average (T3) (Overlap Studies)",["timeperiod","5"],["vfactor","0.7"]],"TEMA":["Triple Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"TRIMA":["Triangular Moving Average (Overlap Studies)",["timeperiod","30"]],"TRIX":["1-day Rate-Of-Change (ROC) of a Triple Smooth EMA (Momentum Indicators)",["timeperiod","30"]],"TSF":["Time Series Forecast (Statistic Functions)",["timeperiod","14"]],"ULTOSC":["Ultimate Oscillator (Momentum Indicators)",["timeperiod1","7"],["timeperiod2","14"],["timeperiod3","28"]],"VAR":["Variance (Statistic Functions)",["timeperiod","5"],["nbdev","1"]],"WILLR":["Williams' %R (Momentum Indicators)",["timeperiod","14"]],"WMA":["Weighted Moving Average (Overlap Studies)",["timeperiod","30"]]};quanto_data.nb_preview_url="https://notebooks-preview.prd.pub.quantopian.com";quanto_data.delay_nb_preview_load=false;
//]]>
</script>
<meta content='https://www.quantopian.com/posts/why-does-batch-transform-behave-like-this' property='og:url'>
<meta content='Why does batch_transform behave like this?' property='og:title'>

<input type="hidden" name="env" id="quanto-env" value="production" />
<meta content='550580758292093' property='fb:app_id'>
<meta content='https://www.quantopian.com/posts/why-does-batch-transform-behave-like-this' property='og:url'>
<meta content='https://media.quantopian.com/public/og-image-default.png' property='og:image'>
<meta content='Why does batch_transform behave like this?' property='og:title'>
<meta content='Hi everyone, need some help on the batch_transform. Dive into the codeimport randomdef initialize(context):      pass@batch_transform(window_length=1, refresh_period=1)  def batch(datapanel):      return random.random()  # Will be called on every trade event for the securities you specify.  def handle_data(context, data):      x = batch(data)      if x is not None:          log.info(x)          order(sid(24), 50)  From what I understand, when I set therefresh period=1  the batch_transformed...' property='og:description'>
</head>
<script type='application/ld+json'>
  {
    "@context": "http://schema.org",
    "@type": "Organization",
    "url": "https://www.quantopian.com",
    "logo": "https://media.quantopian.com/logos/logo-q-press-red.png"
  }
</script>
<body class='' ontouchstart=''>
<div id='fb-root'></div>
<div class='wrapper'>
<div class='alert-v2 error'>
<div class='message'>
Quantopian's community platform is shutting down. Please read <a href="/posts/quantopians-community-services-are-closing">this post</a> for more information and <a href='/account#account'>download your code</a>.
</div>
</div>
<div class='navbar navbar-default navbar-static-top' id='app-navbar'>
<div class='container-fluid'>
<div class='navbar-header'>
<button class='navbar-toggle collapsed' data-target='#app-navbar-collapse' data-toggle='collapse'>
<span class='icon hamburger-menu'></span>
</button>
<a class='navbar-brand' href='/home'>
<img class='logo-image async-image' data-src='external/logo-q-white-b141ea6018546e5a4ecc3d10d8440ec076fc4385764e948b322828cc70950a76.svg'>
</a>
</div>
<div class='collapse navbar-collapse' id='app-navbar-collapse'>
<ul class='nav navbar-nav navbar-right'>
<li class='dropdown quanto-dropdown-new'>
<li>
<a class='header' href='/docs'>
Documentation
</a>
</li>
<li class='dropdown quanto-dropdown-new'>
<a class='header' data-toggle='dropdown' href='#'>
Learn
</a>
<ul class='dropdown-menu'>
<li>
<a class='mixpanel-button' data-event='main nav getting started clicked' href='/tutorials/getting-started'>Getting Started</a>
</li>
<li>
<a class='mixpanel-button' data-event='main nav tutorials clicked' href='/tutorials'>Tutorials</a>
</li>
<li>
<a class='mixpanel-button' data-event='main nav lectures clicked' href='/lectures'>Lectures</a>
</li>
</ul>
</li>
<li>
<a class='header' href='/posts' id='forum-link'>
Forum
</a>
</li>
<li>
<a class="header" href="/signin?return_to=/posts/why-does-batch-transform-behave-like-this">Log In</a>
</li>
</li>

</ul>
</div>
</div>
</div>
<script>
  $(document).ready(function () {
    quanto.instances.fm = new quanto.FeedbackManager();
    quanto.instances.hm = new quanto.headerManager();
  })
</script>


<div class='content content-area new-style'>
<input type="hidden" name="page-id" id="page-id" value="postatomic" />
<script src="external/MathJax.js?config=TeX-AMS_HTML-full.js,Safe" async="async"></script>
<div class='container page-container post-atomic'>
<input id='parent-post-id-val' type='hidden' value='530f26a9c78f56d3540000d9'>
<div class='post-container' data-post-id='530f26a9c78f56d3540000d9' id='530f26a9c78f56d3540000d9'>
<div class='back-button back-to-community'>Back to Community</div>
<div class='post-title'>Why does batch_transform behave like this?</div>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/523eb9f6589451d9e40000b3'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3ad1d2387491b389acf027ed4ea6607d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/523eb9f6589451d9e40000b3'>Louis Tian</a>
</div>
<span class='posted-at'>edited </span>
<span UTCms='1393542170000' class='quanto-date posted-at'></span>
<div class='pull-right other-actions'>
<div class='dropup inline-block'>
<div class='dropdown share-control other-action-link'>
<div data-toggle='dropdown'>
<div class='share-image'></div>
Share
</div>
<ul class='dropdown-menu share-options-menu'>
<li>
<a class='share-row' href='https://twitter.com/intent/tweet?text=Why does batch_transform behave like this?&amp;url=https%3A%2F%2Fwww.quantopian.com%2Fposts%2Fwhy-does-batch-transform-behave-like-this%3Futm_source%3Dwebsite_share%26utm_campaign%3Dwhy-batch-transform-behave-like-this%26utm_medium%3Dtwitter&amp;via=quantopian'>
<i class='icon icon-twitter'></i>
Share on Twitter
</a>
</li>
<li>
<div class='share-row facebook-button'>
<i class='icon icon-facebook'></i>
Share on Facebook
</div>
</li>
<li>
<div class='share-row linkedin-button' data-share-url='https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Fwww.quantopian.com%2Fposts%2Fwhy-does-batch-transform-behave-like-this%3Futm_source%3Dwebsite_share%26utm_campaign%3Dwhy-batch-transform-behave-like-this%26utm_medium%3Dlinkedin&amp;title=Why+does+batch_transform+behave+like+this%3F+%28Louis+Tian%29&amp;source=Quantopian'>
<i class='icon icon-linkedin'></i>
Share on LinkedIn
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>

<input type="hidden" name="social_fb_post_link" id="social_fb_post_link" value="https://www.quantopian.com/posts/why-does-batch-transform-behave-like-this?utm_source=website_share&amp;utm_campaign=why-batch-transform-behave-like-this&amp;utm_medium=facebook" />
<input type="hidden" name="social_post_image" id="social_post_image" value="external/logo-q-red-outline.png" />
<input type="hidden" name="social_post_author" id="social_post_author" value="Louis Tian" />
<div class='body-text'>
<div class='body-text-container post-body'><p>Hi everyone, need some help on the batch_transform. </p>

<p>Dive into the code</p>

<pre><code>import random

def initialize(context):  
    pass

@batch_transform(window_length=1, refresh_period=1)  
def batch(datapanel):  
    return random.random()  
# Will be called on every trade event for the securities you specify.  
def handle_data(context, data):  
    x = batch(data)  
    if x is not None:  
        log.info(x)  
        order(sid(24), 50)  
</code></pre>

<p>From what I understand, when I set the<br>
<code>
refresh period=1  
</code>
the batch_transformed function should only be called once every day. [update: okay, that&#39;s incorrect. The function should be called every bar. However, the datapanel is only updated once everyday] Hence I expect the the output of logs be same within the same day  when run in the minute mode. But here is what I got </p>

<pre><code>2014-02-20handle_data:14INFO0.0866587877595  
2014-02-21handle_data:14INFO0.260505064836  
2014-02-21handle_data:14INFO0.297122017472  
2014-02-21handle_data:14INFO0.0491141736111  
2014-02-21handle_data:14INFO0.999269810604  
2014-02-21handle_data:14INFO0.0700925961977  
2014-02-21handle_data:14INFO0.422723775352  
2014-02-21handle_data:14INFO0.256027120872  
2014-02-21handle_data:14INFO0.406170130361  
2014-02-21handle_data:14INFO0.73002239253  
2014-02-21handle_data:14INFO0.515887335473  
2014-02-21handle_data:14INFO0.74262632377  
2014-02-21handle_data:14INFO0.707867163496  
2014-02-21handle_data:14INFO0.214877704526  
2014-02-21handle_data:14INFO0.751468426835  
2014-02-21handle_data:14INFO0.142119377371  
2014-02-21handle_data:14INFO0.981545623245  
2014-02-21handle_data:14INFO0.833314020675  
</code></pre>

<p>it seems to be rolling as the output is different for each minute. Even stranger, when i set<br>
<code>
refresh_period = 2  
</code> 
The logs for the first day turn out as expected, that is the value returned for the log are the same for the first day. However, from the second day and on, the batch_transform behavior like rolling again. </p>

<p>Without digging into zipline source code, I cannot make sense of this behavior. Any idea?  </p>
</div>
</div>
</div>

</div>

<div class='container page-container post-atomic'>
<div class='section-header reply-header'>
<div class='reply-title'>20 responses</div>
</div>
<div class='replies'>
<div class='post-container response-container' data-post-id='530fbcb252d66e0b66000262' id='530fbcb252d66e0b66000262'>
<a href='#530fbcb252d66e0b66000262'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/523eb9f6589451d9e40000b3'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3ad1d2387491b389acf027ed4ea6607d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/523eb9f6589451d9e40000b3'>Louis Tian</a>
</div>
<a UTCms='1393540276000' class='quanto-date posted-at response-posted-at' href='#530fbcb252d66e0b66000262'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Never mind, guys. I think I figured it out.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='530fc0732c0f0d7168000266' id='530fc0732c0f0d7168000266'>
<a href='#530fc0732c0f0d7168000266'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/52f1693dd31cfd2c7900000e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/08d6df175fc299ce2cfa1a91ccab6709?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/52f1693dd31cfd2c7900000e'>Ali Haddad</a>
</div>
<a UTCms='1393541236000' class='quanto-date posted-at response-posted-at' href='#530fc0732c0f0d7168000266'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>What&#39;s your conclusion?</p>

<p>Thanks<br>
Ali  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='530fc2d7ef469001f400025c' id='530fc2d7ef469001f400025c'>
<a href='#530fc2d7ef469001f400025c'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/523eb9f6589451d9e40000b3'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3ad1d2387491b389acf027ed4ea6607d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/523eb9f6589451d9e40000b3'>Louis Tian</a>
</div>
<a UTCms='1393541849000' class='quanto-date posted-at response-posted-at' href='#530fc2d7ef469001f400025c'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Well...I thought I did, but evidently I did not. </p>

<p>The code in the initial post doesn&#39;t work because the decorated function batch still get called every minute bar. The effect of the decorated function is to update the datapanel that is passed to the decorated function. Since the return value is generated random and does not depend on datapanel, I shouldn&#39;t expect the result be the same for every minute in a day. </p>

<p>But the problem is when I tried to use to code in the API documentation, the similar behavior again. </p>

<pre><code># Here we create a universe of securities based on the top 0.1% most liquid by  
# dollar volume traded. Approximately 7 individual securities will be used  
# by the algorithm.  
def initialize(context):  
  set_universe(universe.DollarVolumeUniverse(99.9, 100.0))

# This method expects to receive a datapanel containing dataframes for price,  
# volume, open_price, close_price, high, low, and volume. Each dataframe will  
# have ten rows (1 per trading day), and about 7 columns (one for each  
# stock). window_length is always in trading days.  
@batch_transform(window_length=1, refresh_period=1)  
def get_averages(datapanel):  
  # get the dataframe of prices  
  prices = datapanel[&#39;price&#39;]  
  # return a dataframe with one row showing the averages for each stock.  
  return prices.mean()

def handle_data(context, data):  
  # here is the magic part. We invoke the get_averages method using  
  # just the single data (a dictionary of daily bars indexed by security).  
  # the decorator will convert this to a datapanel spanning the 10 day history  
  # that we specified in with the window_length parameter in the decorator  
  # above.  
  averages = get_averages(data)  
  # add a newline to the beginning of the log line so that the column header of the  
  # is properly indented.  
  if averages is not None:  
      log.info(&#39;\n%s&#39; % averages)  
  order(sid(67), 100)  
</code></pre>

<pre><code>2014-02-03handle_data:28INFO  
39840     179.869210  
24705      37.373208  
67         49.748019  
42950      62.160294  
8554      175.444495  
21519     109.491919  
19920      84.881722  
26578    1151.228573  
24        502.595717  
dtype: float64  
2014-02-04handle_data:28INFO  
39840     179.861262  
24705      37.372644  
67         49.744122  
42950      62.157679  
8554      175.436367  
21519     109.484432  
19920      84.877850  
26578    1151.133855  
24        502.605717  
dtype: float64  
2014-02-04handle_data:28INFO  
39840     179.851517  
24705      37.372159  
67         49.740737  
42950      62.155602  
8554      175.428597  
21519     109.477150  
19920      84.874081  
26578    1151.049337  
24        502.612916  
dtype: float64  
2014-02-04handle_data:28INFO  
39840     179.843633  
24705      37.371736  
67         49.736968  
42950      62.153730  
8554      175.420621  
21519     109.469938  
19920      84.870132  
26578    1150.962749  
24        502.620506  
dtype: float64  
</code></pre>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='530fc68d2c0f0d66ad000236' id='530fc68d2c0f0d66ad000236'>
<a href='#530fc68d2c0f0d66ad000236'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/52f1693dd31cfd2c7900000e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/08d6df175fc299ce2cfa1a91ccab6709?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/52f1693dd31cfd2c7900000e'>Ali Haddad</a>
</div>
<a UTCms='1393542800000' class='quanto-date posted-at response-posted-at' href='#530fc68d2c0f0d66ad000236'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I ran your code (the one on top) and it runs as it should be, using both daily or minute data, the random value is generated once only for the whole day when the refresh_period = 1 for instance. It is generated once only every two days when refresh_period = 2, etc...  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='530fd16c52d66efe1500028d' id='530fd16c52d66efe1500028d'>
<a href='#530fd16c52d66efe1500028d'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/523eb9f6589451d9e40000b3'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3ad1d2387491b389acf027ed4ea6607d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/523eb9f6589451d9e40000b3'>Louis Tian</a>
</div>
<a UTCms='1393545581000' class='quanto-date posted-at response-posted-at' href='#530fd16c52d66efe1500028d'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Ali, </p>

<p>That&#39;s odd. Did you cloned the my code? If that&#39;s the case, it is probably because I have modified the code. I changed it back now. Can you run it again, and let me know the result please. Thanks  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='53100252c78f5603dd0002e3' id='53100252c78f5603dd0002e3'>
<a href='#53100252c78f5603dd0002e3'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/52f1693dd31cfd2c7900000e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/08d6df175fc299ce2cfa1a91ccab6709?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/52f1693dd31cfd2c7900000e'>Ali Haddad</a>
</div>
<a UTCms='1393558099000' class='quanto-date posted-at response-posted-at' href='#53100252c78f5603dd0002e3'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Louis,</p>

<p>I cloned your code and got the  same issue you did; the batch function is called every minute. But if you first backtest in daily mode and then in minute mode, it seems to work the way it should be; weird!<br>
See below a sample of the log info I got in  minute mode after backtesting in daily mode<br>
2014-02-20handle_data:14INFO0.325009468121<br>
2014-02-21handle_data:14INFO0.325009468121<br>
2014-02-21handle_data:14INFO0.325009468121<br>
2014-02-21handle_data:14INFO0.325009468121<br>
2014-02-21handle_data:14INFO0.325009468121<br>
2014-02-21handle_data:14INFO0.325009468121<br>
2014-02-21handle_data:14INFO0.325009468121<br>
2014-02-21handle_data:14INFO0.325009468121<br>
2014-02-21handle_data:14INFO0.325009468121<br>
2014-02-21handle_data:14INFO0.325009468121<br>
2014-02-21handle_data:14INFO0.325009468121<br>
2014-02-21handle_data:14INFO0.325009468121<br>
2014-02-21handle_data:14INFO0.325009468121<br>
2014-02-21handle_data:14INFO0.325009468121<br>
2014-02-21handle_data:14INFO0.325009468121<br>
2014-02-21handle_data:14INFO0.325009468121<br>
2014-02-21handle_data:14INFO0.325009468121<br>
2014-02-21handle_data:14INFO0.325009468121  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='53104ba21bb48804c400004e' id='53104ba21bb48804c400004e'>
<a href='#53104ba21bb48804c400004e'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/523eb9f6589451d9e40000b3'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3ad1d2387491b389acf027ed4ea6607d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/523eb9f6589451d9e40000b3'>Louis Tian</a>
</div>
<a UTCms='1393576868000' class='quanto-date posted-at response-posted-at' href='#53104ba21bb48804c400004e'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Re Ali: </p>

<p>Cannot duplicate your correct result no matter what. I ran the daily mode first then minute mode. However, I do wonder whether my top most code should work or not. My understanding is the @batch_transfer decorator takes the [data] in handle_data and transform it to the a new panel_data with where each dataframe in the panel_data has a length(axis=0) of window_length. I think it is not the case that ,when we set refresh_window = 1, the batch_transformed function is only called everyday, it is still called every minute. What really happened is the transformation of [data] to panel_data only happens once a day. </p>

<p>However, as I said, I tried the example code in the API docs, the same situation still happens. So I still have no idea what is wrong. And apparently the way batch_transform is used in zipline is quite different from Quantopian. In the former, the transformed function need to be &#39;initialized&#39; in the initialize function.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='53106a695f94452be7000084' id='53106a695f94452be7000084'>
<a href='#53106a695f94452be7000084'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1393584747000' class='quanto-date posted-at response-posted-at' href='#53106a695f94452be7000084'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Here&#39;s a backtest that hopefully is illustrative of the batch transform behavior:</p>

<pre><code>import numpy as np

# globals for batch transform decorator  
R_P = 0 # refresh period  
W_L = 1 # window length  
def initialize(context):  
    context.stocks = [sid(8554),sid(33652)] # SPY &amp; BND

def handle_data(context, data):  
    OHLCV = get_data(data,context.stocks)  
    if OHLCV is None:  
        return  
    print get_datetime()  
    print OHLCV[0].shape  
    print OHLCV[0][-1,:]  
    O = np.array([data[context.stocks[0]].open_price,data[context.stocks[1]].open_price])  
    print O  
@batch_transform(refresh_period=R_P, window_length=W_L) # set globals R_P &amp; W_L above  
def get_data(datapanel,sids):  
    O = datapanel[&#39;open_price&#39;].as_matrix(sids)  
    H = datapanel[&#39;high&#39;].as_matrix(sids)  
    L = datapanel[&#39;low&#39;].as_matrix(sids)  
    C = datapanel[&#39;close_price&#39;].as_matrix(sids)  
    V = datapanel[&#39;volume&#39;].as_matrix(sids)  
    return (O,H,L,C,V)  
</code></pre>

<p>I set window_length = 0 so that the trailing window is rolling on a minutely basis.  I intentionally started the backtest on a market early-close day, to show that the trailing window length is not fixed for this special case.  However, if the backtest is started on a normal length day (e.g. 11/27/2013), the window length is fixed at 390 minutes, updated every minute.</p>

<p>Note that the batch transform will eventually be deprecated, in favor of history, so you might want to just work with history (although at this point, you&#39;d need to write your own accumulator to obtain a trailing window of minutely data).  Personally, I have been avoiding the batch transform.</p>

<p>Grant  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='531081591bb48804c40000d1' id='531081591bb48804c40000d1'>
<a href='#531081591bb48804c40000d1'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/523eb9f6589451d9e40000b3'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3ad1d2387491b389acf027ed4ea6607d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/523eb9f6589451d9e40000b3'>Louis Tian</a>
</div>
<a UTCms='1393590618000' class='quanto-date posted-at response-posted-at' href='#531081591bb48804c40000d1'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Grant, </p>

<p>Thanks for the explanation. I can see from your code how the window length is not fixed. I have to say, this behavior is not I have expected. However, the real issue I am having is with refresh_period. </p>

<p>Let&#39;s assume refresh_period=1 and window_length=1 and the backtest starts at 9:31:00 on 11/26/2013, which is a normal trading day. I expect the following to happen, from 9:31:00 to 15:59:00 on 11/26/2013, the batch_transformed function should return None. On 16:00:00, as we have accumulated enough data (390 minutes bars), the batch_transformed function should start to return whatever is defined in the transformed function. For the sake of argument, let&#39;s call it X.  Now move on to the next day 11/27/2013, since the refresh_period=1, I expect the batch_transformed returns the same result X as on 11/26/2013 for the whole duration of 9:31:00 to 15:59:00. And then on 16:00:00 11/28/2013, a new result should be returned based on the data of 9:31:00 to 16:00:00 on 11/27/2013. </p>

<p>However, this is not what&#39;s happening in the actual back test. On fact, I got the exact same result for refresh_period=1 and refresh_period=0. </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='531081ae1bb48826800000f9' id='531081ae1bb48826800000f9'>
<a href='#531081ae1bb48826800000f9'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/523eb9f6589451d9e40000b3'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3ad1d2387491b389acf027ed4ea6607d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/523eb9f6589451d9e40000b3'>Louis Tian</a>
</div>
<a UTCms='1393590703000' class='quanto-date posted-at response-posted-at' href='#531081ae1bb48826800000f9'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Try this backtest below and compare the results under two condition.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5310c3c4695f035884000155' id='5310c3c4695f035884000155'>
<a href='#5310c3c4695f035884000155'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1393607621000' class='quanto-date posted-at response-posted-at' href='#5310c3c4695f035884000155'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hello Louis,</p>

<p>Sorry, I&#39;m gonna have to leave it up to the Quantopian support folks on this one.  If you are a whiz at Python, you could sort out the code here:</p>

<p><a href="https://github.com/quantopian/zipline/blob/master/zipline/transforms/batch_transform.py">https://github.com/quantopian/zipline/blob/master/zipline/transforms/batch_transform.py</a></p>

<p>Maybe an alternative approach would be to articulate the data that you need to feed into your algorithm.  In other words, what are you trying to do?</p>

<p>Grant</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5310d89748439b8e0900014b' id='5310d89748439b8e0900014b'>
<a href='#5310d89748439b8e0900014b'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/52b9b56c02cabe5dae000143'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e9388ae5102f3b152fa6225f955a29d4?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/52b9b56c02cabe5dae000143'>Alisa Deychman</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1393612955000' class='quanto-date posted-at response-posted-at' href='#5310d89748439b8e0900014b'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Louis, </p>

<p>If you set the refresh_period =1, this will update your data every day. If you set the refresh_period = 2, this will update your code every other day (as you correctly noted above).</p>

<p>Unfortunately, you ran into a bug in the batch_transform method. If you run an algo in minute mode with the refresh_period = 2 the data is refreshed every minute on the 2nd day. This of course is a bug. The behavior will be similar if you set the refresh period to any number except 0 or 1. For example, if you set refresh_period = 3 in minute mode, it will display correct behavior for the first 2 days, and then erroneously update every minute in the 3rd day. </p>

<p>We are deprecating batch_transform in favor of history for the future. It is unlikely that this bug will get fixed, but the improved history will work (correctly!) in minute mode. </p>

<p>Best,<br>
Alisa  </p>
</div>
<div class='disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='5310fb9048439bd56d0001b6' id='5310fb9048439bd56d0001b6'>
<a href='#5310fb9048439bd56d0001b6'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/523eb9f6589451d9e40000b3'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3ad1d2387491b389acf027ed4ea6607d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/523eb9f6589451d9e40000b3'>Louis Tian</a>
</div>
<a UTCms='1393621906000' class='quanto-date posted-at response-posted-at' href='#5310fb9048439bd56d0001b6'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Alisa, </p>

<p>Thanks for the clarification. I have noticed this behavior, but wasn&#39;t sure if it&#39;s a bug or I have missed something. It&#39;s good to hear someone from the team to confirm this. By the way, if you know the same bug exist in zipline as well?</p>

<p>Louis  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5310fc425f9445988300019e' id='5310fc425f9445988300019e'>
<a href='#5310fc425f9445988300019e'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/52b9b56c02cabe5dae000143'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e9388ae5102f3b152fa6225f955a29d4?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/52b9b56c02cabe5dae000143'>Alisa Deychman</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1393622084000' class='quanto-date posted-at response-posted-at' href='#5310fc425f9445988300019e'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Yes, the same bug is in Zipline since its our backtest engine. And thanks for bringing it up, we&#39;ll make sure that the improved history function will fix these issues.  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='5310fde1878a19ba1500000c' id='5310fde1878a19ba1500000c'>
<a href='#5310fde1878a19ba1500000c'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/523eb9f6589451d9e40000b3'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3ad1d2387491b389acf027ed4ea6607d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/523eb9f6589451d9e40000b3'>Louis Tian</a>
</div>
<a UTCms='1393622499000' class='quanto-date posted-at response-posted-at' href='#5310fde1878a19ba1500000c'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Grant, </p>

<p>Thanks again for your help:) I am trying to implement a version of pairs trading strategy. Basically, I need to calculate the co-integration coefficient based on the minute data collected from previous day(s), and trade it for a day. I have an idea how to implement this myself. I will give it a try another day. </p>

<p>Louis  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5310ffaf960618ee5b000004' id='5310ffaf960618ee5b000004'>
<a href='#5310ffaf960618ee5b000004'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1393622962000' class='quanto-date posted-at response-posted-at' href='#5310ffaf960618ee5b000004'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>You&#39;re welcome.  Accumulating data is no problem...just store it in context.  And just like the batch transform, you&#39;ll need to wait until your trailing window is full before executing the algorithm.  A big advantage of history is that the trailing window is available at the algorithm start (no warm-up period required), so you can start the algorithm immediately.</p>

<p>An example:</p>

<pre><code>def accumulator(context, data):  
    if context.tic_count &lt; window:  
        for i, stock in enumerate(context.stocks):  
            context.prices[context.tic_count,i] = data[stock].price  
            context.volumes[context.tic_count,i] = data[stock].volume  
    else:  
        context.prices = np.roll(context.prices,-1,axis=0)  
        context.volumes = np.roll(context.volumes,-1,axis=0)  
        for i, stock in enumerate(context.stocks):  
            context.prices[-1,i] = data[stock].price  
            context.volumes[-1,i] = data[stock].volume  
    context.tic_count += 1  
</code></pre>

<p>More accurately, context.tic_count should probably be called context.bar_count.</p>

<p>No time now, but I could illustrate usage of the accumulator in an algorithm, if it would be helpful.</p>

<p>Grant  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5310ffd4960618613e00000a' id='5310ffd4960618613e00000a'>
<a href='#5310ffd4960618613e00000a'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/523eb9f6589451d9e40000b3'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3ad1d2387491b389acf027ed4ea6607d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/523eb9f6589451d9e40000b3'>Louis Tian</a>
</div>
<a UTCms='1393622998000' class='quanto-date posted-at response-posted-at' href='#5310ffd4960618613e00000a'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Re Alisa:</p>

<p>I will keep a close eye on this history feature. I don&#39;t know if it&#39;s just me or not. But I think the decorator syntax for batch_transformed is not very intuitive and it seems the history feature provides a much better interface for the end users like me. In another word, I think it&#39;s a brilliant move. Good works guys! </p>

<p>Louis  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='53110120e437e894b8000011' id='53110120e437e894b8000011'>
<a href='#53110120e437e894b8000011'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/523eb9f6589451d9e40000b3'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3ad1d2387491b389acf027ed4ea6607d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/523eb9f6589451d9e40000b3'>Louis Tian</a>
</div>
<a UTCms='1393623330000' class='quanto-date posted-at response-posted-at' href='#53110120e437e894b8000011'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Re Grant:  </p>

<blockquote>
<p>&#39;&#39;A big advantage of history is that the trailing window is available at<br>
the algorithm start (no warm-up period required)&quot;&quot;</p>
</blockquote>

<p>This is great. It will fixed the problem of inaccuracy in the performance metrics as warning period is included in the calculation for performance as well. Really looking forward to it. </p>

<p>Louis  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5374e7b47c90da901d000220' id='5374e7b47c90da901d000220'>
<a href='#5374e7b47c90da901d000220'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/535a0a54dfc10967140000e9'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/563acc409625e52bc51ff18ac9912913?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/535a0a54dfc10967140000e9'>Vincent</a>
</div>
<a UTCms='1400170422000' class='quanto-date posted-at response-posted-at' href='#5374e7b47c90da901d000220'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Quantopian,</p>

<p>Can you give us an estimated date when the history function will be available for minute data? I understand this is one of your top priorities in the development of the API, and this would come handy for algos that use trailing minute data for signal, as one has to wait for a long time after going live on simulation before any orders get processed if the trailing window is long.</p>

<p>Thanks<br>
Vincent  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='53750bb13357f8b5d800002b' id='53750bb13357f8b5d800002b'>
<a href='#53750bb13357f8b5d800002b'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4fe8beb792a029000200000d'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/fe3ffe502559d05f16eb9fe41ab7e9a1?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4fe8beb792a029000200000d'>Dan Dunn</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1400179635000' class='quanto-date posted-at response-posted-at' href='#53750bb13357f8b5d800002b'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Vincent -</p>

<p>I&#39;m not ready to give a date estimate.  I know that&#39;s a pain, but we&#39;re still a very agile startup, and our priority list updates pretty quickly.  It makes date commitments very tough (we get more production this way, but at the cost of predictability).</p>

<p>That said, I&#39;ve currently got it on the board as the next big project.  That bodes pretty well for a delivery in early summer.  Please understand that could still change if something else comes up.</p>

<p>Dan  </p>
</div>
<div class='disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

</div>
<div class='sign-in-please'>
Please <a href='/signin?return_to=/posts/why-does-batch-transform-behave-like-this'>sign in</a> or
<a href='/users/sign_up?redirect_to=/posts/why-does-batch-transform-behave-like-this'>join Quantopian</a> to
post a reply.
</div>
</div>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId: "550580758292093",
      status: false,
      cookie: true,
      xfbml: true
    });
  };
  
  (function(d, debug){
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) {return;}
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
    ref.parentNode.insertBefore(js, ref);
  }(document, /*debug*/ false));
  
  window.twttr = (function (d,s,id) {
    var t, js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return; js=d.createElement(s); js.id=id;
    js.src="//platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs);
    return window.twttr || (t = { _e: [], ready: function(f){ t._e.push(f) } });
  }(document, "script", "twitter-wjs"));
</script>
<script>
  $(document).ready(function () {
    quanto.instances.pm = new quanto.PostManager(false)
  });
</script>

<div class='login-footer'>
<div class='container'>
<div class='login-footer-text'>
Become an expert in quant finance through Quantopian's hands-on education.
</div>
<div class='login-footer-button'>
<button class='btn btn-v2 stroke join-modal-link mixpanel-button' data-event='anon join footer click posts' data-mixpanel='click'>
Join Now
</button>
</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='error-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'>Error</span>
</div>
<div class='modal-body body-content'>
<p>Sorry, something went wrong.  Try again or contact us by <a class='feedback-link'>sending feedback</a>.</p>
</div>
<div class='modal-footer'>
<button class='btn btn-v2 blue action-button' data-dismiss='modal' href='#'>Close</button>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='confirmation-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'></span>
</div>
<div class='modal-body body-content'></div>
<div class='modal-footer'>
<div class='pull-right'>
<button class='btn btn-v2 border' data-dismiss='modal'>Cancel</button>
<button class='btn btn-v2 blue action-button' data-dismiss='modal'></button>
</div>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='message-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'></span>
</div>
<div class='modal-body body-content'></div>
<div class='modal-footer'>
<button class='btn btn-v2 blue action-button' data-dismiss='modal' id='message-modal-close'>Close</button>
</div>

</div>
</div>
</div>

<div class='always-bootstrap3-modals'>
<div class='fade modal quanto-modal-v2' id='join-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header visible-small'>
<span class='title'>
Join Quantopian.  It's Free!
</span>
<div class='modal-x-out visible-xs'></div>
</div>
<div class='modal-body'>
<div class='flex-wrap'>
<div class='join-left-pane hidden-small'>
<div class='margin_30l'>
<div class='join-hero-text'>
Join Quantopian.  It's Free!
</div>
<div class='join-benefits'>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image code'></div>
</div>
<div class='join-text'>
Use our research platform, backtester, and dozens of clean data sets.
</div>
</div>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image learn'></div>
</div>
<div class='join-text'>
Learn with our hands-on education and community forums.
</div>
</div>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image win'></div>
</div>
<div class='join-text'>
Enter to win cash prizes in our contest.
</div>
</div>
</div>
<div class='hidden saved-reminder'>
Don't worry, all your work is already saved.
</div>
</div>
</div>
<div class='join-right-pane'>
<div class='hidden-small'>
<div class='button-pane'>
<a class="button btn-v2 user-form-btn" href="/signin">Already a Quantopian member?</a>
</div>
</div>
<div class='visible-small'>
<div class='already-member'>
<a href='/signin'>Already a Quantopian member?</a>
</div>
</div>
<form class="quanto-form-v2" id="new-user-modal-form" action="/users" accept-charset="UTF-8" data-remote="true" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><div class='error-message hidden'>
<div class='message'></div>
</div>
<div class='name-group'>
<div class='form-group inline-block'>
<label for="user_firstname">First Name</label>
<input class="form-control firstname" pattern=".*" required="required" autocomplete="off" autofocus="autofocus" type="text" name="user[firstname]" id="user_firstname" />
</div>
<div class='form-group inline-block'>
<label for="user_lastname">Last Name</label>
<input class="form-control" value="" pattern=".*" required="required" autocomplete="off" type="text" name="user[lastname]" id="user_lastname" />
</div>
</div>
<div class='form-group'>
<label for="user_email">Email</label>
<input class="form-control" value="" pattern=".*" required="required" autocomplete="off" type="email" name="user[email]" id="user_email" />
</div>
<div class='form-group'>
<label for="user_password">Password</label>
<input autocomplete="off" class="form-control" pattern=".*" required="required" type="password" name="user[password]" id="user_password" />
</div>
<div class='checkbox eula'>
<input id='eula-checkbox' type='checkbox'>
<div class='quanto-checkbox'></div>
<label for='eula-checkbox' id='checkbox-label'>I accept the <a href='/policies/terms' target='_blank'>Terms Of Use</a> and <a href='/policies/privacy' target='_blank'>Privacy Policy</a>.</label>
</div>
<div class='checkbox mailchimp-box'>
<input name="user[allow_marketing_emails]" type="hidden" value="0" /><input type="checkbox" value="1" name="user[allow_marketing_emails]" id="user_allow_marketing_emails" />
<div class='quanto-checkbox'></div>
<label for='user_allow_marketing_emails'>
Send me email updates with the latest news from the Quantopian community. We send these emails about once a month.
</label>
</div>
<div class='button-row'>
<button class='btn-v2 blue full' data-redirect-to='/tutorials/getting-started' id='sign-up-button' type='Submit'>Join Quantopian</button>
</div>
</form></div>
</div>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='feedback-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title'>Contact Support</span>
</div>
<div class='modal-body'>
<form class='anon-user controls quanto-form-v2' id='feedback-form'>
<div class='feedback-inputs'>
<div class='form-group'>
<input autofocus class='form-control' id='feedback-email-box' name='email' placeholder='Email Address' type='email'>
</div>
<div class='form-group'>
<input class='form-control' id='feedback-name-box' placeholder='Name' type='name'>
</div>
<div class='form-group'>
<textarea class='form-control' id='feedback-box' name='feedback' placeholder='What may we help you with?' rows='10'></textarea>
</div>
</div>
</form>
<form class='hidden quanto-form-v2 select-resource-area'>
<div class='select-step select-type-step'>
<div class='form-group'>
<select class='form-control select-resource-dropdown' title='Select the item you need help with'>
<option value='algorithm'>Algorithm</option>
<option value='backtest'>Backtest</option>
<option value='notebook'>Notebook</option>
</select>
</div>
</div>
<div class='select-step loading-area hidden'>
<div class='loading-text'>
Loading...
</div>
</div>
<div class='select-step empty-list-area hidden'>
<div class='back-button'>Go Back</div>
<div class='empty-text'>
No <span class='empty-list-resource-text'>algorithms</span> found
</div>
</div>
<div class='select-algo-area select-step hidden'>
<div class='back-button'>Go Back</div>
<table class='select-algo-table select-item-table'>
<thead>
<tr>
<th>
Algorithm
<span class='sort-icon'></span>
</th>
<th>
Last Modified
<span class='sort-icon'></span>
</th>
</tr>
</thead>
</table>
</div>
<div class='select-backtest-area select-step hidden'>
<div class='back-button'>Go Back</div>
<table class='select-backtest-table select-item-table'>
<thead>
<tr>
<th>
Backtest
<span class='sort-icon'></span>
</th>
<th>
Started At
<span class='sort-icon'></span>
</th>
<th>
Overall Return
<span class='sort-icon'></span>
</th>
<th>
Status
<span class='sort-icon'></span>
</th>
</tr>
</thead>
</table>
</div>
<div class='select-notebook-area select-step hidden'>
<div class='back-button'>Go Back</div>
<div class='subtitle select-cell-step'>
Choose a cell to use as the preview for this notebook:
</div>
<div class='iframe-wrapper'>
<iframe class='notebook-list-iframe slow-fade' src=''></iframe>
</div>
<div class='progress-area slow-fade in'>
<div class='progress-container'>
<div class='progress-title'>
<div class='quanto-loader gray'></div>
</div>
</div>
</div>
<div class='maintenance-area'>
<div class='error-container'>
<div class='row'>
<div class='col-md-14 msg-title h1'>
Sorry, research is currently undergoing maintenance.
</div>
</div>
<div class='row'>
<div class='col-md-14 msg-subtitle'>
Please check back shortly. If the maintenance period lasts longer than expected,
you can find updates on <a href='https://status.quantopian.com/'>status.quantopian.com</a>.
</div>
</div>

</div>
</div>
<div class='error-area'>
<div class='error-container'>
<div class='row'>
<div class='col-md-14 msg-title h1'>
Sorry, something went wrong on our end.
</div>
</div>
<div class='row'>
<div class='col-md-14 msg-subtitle'>
Please try again or contact <a class='open-feedback-link'>Quantopian support</a>.
</div>
</div>

</div>
</div>

</div>
<div class='selected-item-area select-step hidden'>
<div class='selected-item-group form-group'>
<div class='selected-item-control'>
<input class='disabled form-control selected-item-box' type='text'>
<span class='secure-icon icon'></span>
<button class='btn change change-primary-item-button change-selection-button new-btn transparent' type='button'>
<span class='refresh-icon icon'></span>
</button>
</div>
<div class='selected-backtest-control'>
<input class='disabled form-control selected-backtest-box' type='text'>
<span class='secure-icon icon'></span>
<button class='btn change-backtest-button change-selection-button new-btn transparent' type='button'>
<span class='refresh-icon icon'></span>
</button>
</div>
</div>
<div class='checkbox-group form-group'>
<div class='checkbox give-permission'>
<input class='give-permission-checkbox' id='feedback-give-permission-checkbox' type='checkbox'>
<div class='quanto-checkbox'></div>
<label for='feedback-give-permission-checkbox'>
I permit Quantopian to view <span class='item-type-text'>this algorithm,
backtest or notebook and their imported datasets</span> for the purpose of providing support.
</label>
</div>
</div>
</div>
</form>

<div class='loading-step hidden'>
<div class='loading-text'>
Submitting your support ticket...
</div>
</div>
<div class='success-step invisible'>
<h2 class='title center'>
You've successfully submitted a support ticket.
</h2>
<p>
Our support team will be in touch soon.
</p>
<div class='confirmation-image'></div>
</div>
</div>
<div class='modal-footer'>
<button class='btn-v2 blue' id='send-feedback-button'>Send</button>
<div class='error-message hidden'>
Error submitting support request.
</div>
</div>

</div>
</div>
</div>

</div>
</div>
<div class='footer' id='quanto-footer-container'>
<div class='container'>
<div class='row header-row'>
<div class='col-sm-fourth span3'>
<img class='async-image logotype-image' data-src='https://qf.quantopian.com/assets/logos/logo-q-full-b23bda5ac757691b9259d396d0dfef91567165868b8c955a836649686e6d2248.svg'>
</div>
<div class='col-sm-fourth span3'></div>
<div class='col-sm-fourth span3'></div>
<div class='col-sm-fourth span3'>
<div class='feedback-email'>
Need help?
<a href="/cdn-cgi/l/email-protection#40262525242221232b003135212e342f3029212e6e232f2d">Contact support.</a>
</div>
</div>
</div>
<div class='row'>
<div class='col-sm-fourth span3'>
<div class='header'>Company</div>
<div class='footer-row'>
<a href='/about'>About</a>
</div>
<div class='footer-row'>
<a href='/academia'>Academia</a>
</div>
<div class='footer-row'>
<a href='/jobs'>Careers</a>
</div>
<div class='footer-row'>
<a href='/posts'>Community</a>
</div>
<div class='footer-row'>
<a href='/events'>Events</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Learn &amp; Support</div>
<div class='footer-row'>
<a href='/faq'>FAQ</a>
</div>
<div class='footer-row'>
<a href='/tutorials/getting-started'>Getting Started</a>
</div>
<div class='footer-row'>
<a href='/docs'>Documentation</a>
</div>
<div class='footer-row'>
<a href='/tutorials'>Tutorials</a>
</div>
<div class='footer-row'>
<a href='/lectures'>Lectures</a>
</div>
<div class='footer-row'>
<a href='/opensource'>Open Source</a>
</div>
<div class='footer-row'>
<a href='https://status.quantopian.com/'>Site Status</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Notices</div>
<div class='footer-row'>
<a href='/policies/terms'>Terms of Use</a>
</div>
<div class='footer-row'>
<a href='/policies/privacy'>Privacy Policy</a>
</div>
<div class='footer-row'>
<a href='/security'>Security</a>
</div>
<div class='footer-row'>
<a href='/policies/code-of-conduct'>Code of Conduct</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Follow Us</div>
<div class='footer-row'>
<a href='https://www.twitter.com/quantopian'>Twitter</a>
</div>
<div class='footer-row'>
<a href='https://www.facebook.com/quantopian'>Facebook</a>
</div>
<div class='footer-row'>
<a href='https://www.linkedin.com/company/quantopian'>LinkedIn</a>
</div>
<div class='footer-row'>
<a href='https://www.youtube.com/channel/UC606MUq45P3zFLa4VGKbxsg'>YouTube</a>
</div>
</div>
</div>
<div class='row'>
<div class='col-xs-14 span12'>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian.
</p>
<p>
In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>

</div>
</div>
</div>
</div>
</div>
<div class='mobile-footer'>
<div class='mobile-nav-category main-links'>
<div class='mobile-nav-row-footer'>
<a href='/about'>About Quantopian</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/jobs'>Careers</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/posts'>Community</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/events'>Events</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/docs'>Documentation</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/academia'>Academia</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/lectures'>Lectures</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://status.quantopian.com/'>Status</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.facebook.com/quantopian'>Facebook</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.twitter.com/quantopian'>Twitter</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.linkedin.com/company/quantopian'>LinkedIn</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.youtube.com/channel/UC606MUq45P3zFLa4VGKbxsg'>YouTube</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/policies/terms'>Terms of Use</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/policies/privacy'>Privacy Policy</a>
</div>
</div>
<div class='mobile-nav-category'>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian.
</p>
<p>
In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>

</div>
</div>
</div>

</div>
<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script></body>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', "UA-8519877-1", {
    cookieDomain: "quantopian.com"
  });
  ga('set', 'dimension1', 'session_5f9dc7425d387f00077e48e4');
  
  ga('send', 'pageview');
</script>

<input type="hidden" name="is_mac" id="is_mac" value="false" />
<input type="hidden" name="mp" id="mp" value="75873953cd404bcc1da88a55ff51e3b4" />
<script>
  (function(e,a){if(!a.__SV){var b=window;try{var c,l,i,j=b.location,g=j.hash;c=function(a,b){return(l=a.match(RegExp(b+"=([^&]*)")))?l[1]:null};g&&c(g,"state")&&(i=JSON.parse(decodeURIComponent(c(g,"state"))),"mpeditor"===i.action&&(b.sessionStorage.setItem("_mpcehash",g),history.replaceState(i.desiredHash||"",e.title,j.pathname+j.search)))}catch(m){}var k,h;window.mixpanel=a;a._i=[];a.init=function(b,c,f){function e(b,a){var c=a.split(".");2==c.length&&(b=b[c[0]],a=c[1]);b[a]=function(){b.push([a].concat(Array.prototype.slice.call(arguments,
  0)))}}var d=a;"undefined"!==typeof f?d=a[f]=[]:f="mixpanel";d.people=d.people||[];d.toString=function(b){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);b||(a+=" (stub)");return a};d.people.toString=function(){return d.toString(1)+".people (stub)"};k="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
  for(h=0;h<k.length;h++)e(d,k[h]);a._i.push([b,c,f])};a.__SV=1.2;b=e.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";c=e.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}})(document,window.mixpanel||[]);
  mixpanel.init("75873953cd404bcc1da88a55ff51e3b4");
</script>
<script>
  mixpanel.track("view page", {"page": window.location.pathname});
</script>
</html>
