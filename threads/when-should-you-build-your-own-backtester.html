<!DOCTYPE html>
<html>
<head>
<link href='i1.wp.com' rel='dns-prefetch'>
<link href='i2.wp.com' rel='dns-prefetch'>
<link href='i3.wp.com' rel='dns-prefetch'>
<meta content='2HgX9mcLHaPOX6sfaaAkhWtblhEB9yUNw4l6l46e1k4' name='google-site-verification'>
<link rel="shortcut icon" type="image/x-icon" href="external/favicon-q-ac1a76f2c200e9026b5b1147519bb4fab6256910588b831e2411bc6c7c1218c3.png" />
<title>
When Should You Build Your Own Backtester?
</title>
<meta content='This post was originally featured on the Quantopian Blog and authored by Michael Halls-Moore. Michael Halls-Moore, founder of  QuantStart.com , presented &quot; When Should You Build Your Own Backtester? &quot; at QuantCon in 2016, our annual quant trading conference. The slides for the talk can be found  here . About This Post   The post is suitable for those who are beginning quantitative trading as well as those who have had some experience with the area. The post discusses the common pitfalls of...' name='description'>
<link rel="stylesheet" media="all" href="external/quanto-base-bundle-e8eb6050172aa0d24124d5c24bac90b2cccd88b5b9c7742026c0e9efab038c6e.css" />
<link rel="stylesheet" media="all" href="external/quanto-posts-bundle-aab01368d3f82d8dafc94ee9eabb82e77dc8c9fbbffa952fdcdc744dfa523cf3.css" />
<script src="external/quanto_global-057218867db29d5768131af5d6fb3476cef098e7d9e655108befb903c7ee985e.js"></script>
<script src="external/posts_bundle-3dfd82fa469c393d752e461d837aec9e4e364ae39f49198e34a6626f2180fdf7.js"></script>
<link href='external/logo-q-180x180-0f5a6a439c99203ed4aea6f656e7604c543d287be43d8b17c7591c1131f09a59.png' rel='apple-touch-icon'>
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="0Lrg8pD5U0cmDa5ql7XtIc4k5hEn9pDF68wLDHSz1VGs3Ja/Mg+BpJ8Q91vYWkVV9qrFeF06hd5pw9Bm3va36g==" />
<meta content='width=device-width, initial-scale=1.0' name='viewport'>
<script>
//<![CDATA[
window.quanto_data={};quanto_data.bounce_back_params={"show_modal":null,"feedback_text":null};quanto_data.namespace="public";quanto_data.talib_info={"ADOSC":["Chaikin A/D Oscillator (Volume Indicators)",["fastperiod","3"],["slowperiod","10"]],"ADX":["Average Directional Movement Index (Momentum Indicators)",["timeperiod","14"]],"ADXR":["Average Directional Movement Index Rating (Momentum Indicators)",["timeperiod","14"]],"APO":["Absolute Price Oscillator (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["matype","0"]],"AROON":["Aroon (Momentum Indicators)",["timeperiod","14"]],"AROONOSC":["Aroon Oscillator (Momentum Indicators)",["timeperiod","14"]],"ATR":["Average True Range (Volatility Indicators)",["timeperiod","14"]],"BBANDS":["Bollinger Bands (Overlap Studies)",["timeperiod","5"],["nbdevup","2"],["nbdevdn","2"],["matype","0"]],"BETA":["Beta (Statistic Functions)",["timeperiod","5"]],"CCI":["Commodity Channel Index (Momentum Indicators)",["timeperiod","14"]],"CMO":["Chande Momentum Oscillator (Momentum Indicators)",["timeperiod","14"]],"CORREL":["Pearson's Correlation Coefficient (r) (Statistic Functions)",["timeperiod","30"]],"DEMA":["Double Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"DX":["Average Directional Movement Index (Momentum Indicators)",["timeperiod","14"]],"EMA":["Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"KAMA":["Kaufman Adaptive Moving Average (Overlap Studies)",["timeperiod","30"]],"LINEARREG":["Linear Regression (Statistic Functions)",["timeperiod","14"]],"LINEARREG_ANGLE":["Linear Regression Angle (Statistic Functions)",["timeperiod","14"]],"LINEARREG_INTERCEPT":["Linear Regression Intercept (Statistic Functions)",["timeperiod","14"]],"LINEARREG_SLOPE":["Linear Regression Slope (Statistic Functions)",["timeperiod","14"]],"MA":["Moving average (Overlap Studies)",["timeperiod","30"],["matype","0"]],"MACD":["Moving Average Convergence/Divergence (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["signalperiod","9"]],"MACDEXT":["MACD with controllable MA type (Momentum Indicators)",["fastperiod","12"],["fastmatype","0"],["slowperiod","26"],["slowmatype","0"],["signalperiod","9"],["signalmatype","0"]],"MACDFIX":["Moving Average Convergence/Divergence Fix 12/26 (Momentum Indicators)",["signalperiod","9"]],"MAX":["Highest values over a specified period (Math Operators)",["timeperiod","30"]],"MAXINDEX":["Index of highest value over a specified period (Math Operators)",["timeperiod","30"]],"MFI":["Money Flow Index (Momentum Indicators)",["timeperiod","14"]],"MIDPOINT":["Midpoint over period (Overlap Studies)",["timeperiod","14"]],"MIDPRICE":["Midpoint Price over period (Overlap Studies)",["timeperiod","14"]],"MIN":["Lowest value over a specified period (Math Operators)",["timeperiod","30"]],"MININDEX":["Index of lowest value over a specified period (Math Operators)",["timeperiod","30"]],"MINMAX":["Lowest and highest values over a specified period (Math Operators)",["timeperiod","30"]],"MINMAXINDEX":["Indexes of lowest and highest values over a specified period (Math Operators)",["timeperiod","30"]],"MINUS_DI":["Minus Directional Indicator (Momentum Indicators)",["timeperiod","14"]],"MINUS_DM":["Minus Directional Movement (Momentum Indicators)",["timeperiod","14"]],"MOM":["Momentum (Momentum Indicators)",["timeperiod","10"]],"NATR":["Normalized Average True Range (Volatility Indicators)",["timeperiod","14"]],"PLUS_DI":["Plus Directional Indicator (Momentum Indicators)",["timeperiod","14"]],"PLUS_DM":["Plus Directional Movement (Momentum Indicators)",["timeperiod","14"]],"PPO":["Percentage Price Oscillator (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["matype","0"]],"ROC":["Rate of change: ((price/prevPrice)-1)*100 (Momentum Indicators)",["timeperiod","10"]],"ROCP":["Rate of change Percentage: (price-prevPrice)/prevPrice (Momentum Indicators)",["timeperiod","10"]],"ROCR":["Rate of change ratio: (price/prevPrice) (Momentum Indicators)",["timeperiod","10"]],"ROCR100":["Rate of change ratio 100 scale: (price/prevPrice)*100 (Momentum Indicators)",["timeperiod","10"]],"RSI":["Relative Strength Index (Momentum Indicators)",["timeperiod","14"]],"SMA":["Simple Moving Average (Overlap Studies)",["timeperiod","30"]],"STDDEV":["Standard Deviation (Statistic Functions)",["timeperiod","5"],["nbdev","1"]],"STOCH":["Stochastic (Momentum Indicators)",["fastk_period","5"],["slowk_period","3"],["slowk_matype","0"],["slowd_period","3"],["slowd_matype","0"]],"STOCHF":["Stochastic Fast (Momentum Indicators)",["fastk_period","5"],["fastd_period","3"],["fastd_matype","0"]],"STOCHRSI":["Stochastic Relative Strength Index (Momentum Indicators)",["timeperiod","14"],["fastk_period","5"],["fastd_period","3"],["fastd_matype","0"]],"T3":["Triple Exponential Moving Average (T3) (Overlap Studies)",["timeperiod","5"],["vfactor","0.7"]],"TEMA":["Triple Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"TRIMA":["Triangular Moving Average (Overlap Studies)",["timeperiod","30"]],"TRIX":["1-day Rate-Of-Change (ROC) of a Triple Smooth EMA (Momentum Indicators)",["timeperiod","30"]],"TSF":["Time Series Forecast (Statistic Functions)",["timeperiod","14"]],"ULTOSC":["Ultimate Oscillator (Momentum Indicators)",["timeperiod1","7"],["timeperiod2","14"],["timeperiod3","28"]],"VAR":["Variance (Statistic Functions)",["timeperiod","5"],["nbdev","1"]],"WILLR":["Williams' %R (Momentum Indicators)",["timeperiod","14"]],"WMA":["Weighted Moving Average (Overlap Studies)",["timeperiod","30"]]};quanto_data.nb_preview_url="https://notebooks-preview.prd.pub.quantopian.com";quanto_data.delay_nb_preview_load=false;
//]]>
</script>
<meta content='https://www.quantopian.com/posts/when-should-you-build-your-own-backtester' property='og:url'>
<meta content='When Should You Build Your Own Backtester?' property='og:title'>

<input type="hidden" name="env" id="quanto-env" value="production" />
<meta content='550580758292093' property='fb:app_id'>
<meta content='https://www.quantopian.com/posts/when-should-you-build-your-own-backtester' property='og:url'>
<meta content='https://media.quantopian.com/public/og-image-default.png' property='og:image'>
<meta content='When Should You Build Your Own Backtester?' property='og:title'>
<meta content='This post was originally featured on the Quantopian Blog and authored by Michael Halls-Moore. Michael Halls-Moore, founder of  QuantStart.com , presented &quot; When Should You Build Your Own Backtester? &quot; at QuantCon in 2016, our annual quant trading conference. The slides for the talk can be found  here . About This Post   The post is suitable for those who are beginning quantitative trading as well as those who have had some experience with the area. The post discusses the common pitfalls of...' property='og:description'>
</head>
<script type='application/ld+json'>
  {
    "@context": "http://schema.org",
    "@type": "Organization",
    "url": "https://www.quantopian.com",
    "logo": "https://media.quantopian.com/logos/logo-q-press-red.png"
  }
</script>
<body class='' ontouchstart=''>
<div id='fb-root'></div>
<div class='wrapper'>
<div class='alert-v2 error'>
<div class='message'>
Quantopian's community platform is shutting down. Please read <a href="/posts/quantopians-community-services-are-closing">this post</a> for more information and <a href='/account#account'>download your code</a>.
</div>
</div>
<div class='navbar navbar-default navbar-static-top' id='app-navbar'>
<div class='container-fluid'>
<div class='navbar-header'>
<button class='navbar-toggle collapsed' data-target='#app-navbar-collapse' data-toggle='collapse'>
<span class='icon hamburger-menu'></span>
</button>
<a class='navbar-brand' href='/home'>
<img class='logo-image async-image' data-src='external/logo-q-white-b141ea6018546e5a4ecc3d10d8440ec076fc4385764e948b322828cc70950a76.svg'>
</a>
</div>
<div class='collapse navbar-collapse' id='app-navbar-collapse'>
<ul class='nav navbar-nav navbar-right'>
<li class='dropdown quanto-dropdown-new'>
<li>
<a class='header' href='/docs'>
Documentation
</a>
</li>
<li class='dropdown quanto-dropdown-new'>
<a class='header' data-toggle='dropdown' href='#'>
Learn
</a>
<ul class='dropdown-menu'>
<li>
<a class='mixpanel-button' data-event='main nav getting started clicked' href='/tutorials/getting-started'>Getting Started</a>
</li>
<li>
<a class='mixpanel-button' data-event='main nav tutorials clicked' href='/tutorials'>Tutorials</a>
</li>
<li>
<a class='mixpanel-button' data-event='main nav lectures clicked' href='/lectures'>Lectures</a>
</li>
</ul>
</li>
<li>
<a class='header' href='/posts' id='forum-link'>
Forum
</a>
</li>
<li>
<a class="header" href="/signin?return_to=/posts/when-should-you-build-your-own-backtester">Log In</a>
</li>
</li>

</ul>
</div>
</div>
</div>
<script>
  $(document).ready(function () {
    quanto.instances.fm = new quanto.FeedbackManager();
    quanto.instances.hm = new quanto.headerManager();
  })
</script>


<div class='content content-area new-style'>
<input type="hidden" name="page-id" id="page-id" value="postatomic" />
<script src="external/MathJax.js?config=TeX-AMS_HTML-full.js,Safe" async="async"></script>
<div class='container page-container post-atomic'>
<input id='parent-post-id-val' type='hidden' value='5cf56bcde5c9ee3e04366f3f'>
<div class='post-container' data-post-id='5cf56bcde5c9ee3e04366f3f' id='5cf56bcde5c9ee3e04366f3f'>
<div class='back-button back-to-community'>Back to Community</div>
<div class='post-title'>When Should You Build Your Own Backtester?</div>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5cf565c4fa2d2237e68971fa'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/7423e51d4b748a10bc14edd7c5ac5d96?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5cf565c4fa2d2237e68971fa'>Q  Blog</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<span class='posted-at'>edited </span>
<span UTCms='1470355200000' class='quanto-date posted-at'></span>
<div class='pull-right other-actions'>
<div class='dropup inline-block'>
<div class='dropdown share-control other-action-link'>
<div data-toggle='dropdown'>
<div class='share-image'></div>
Share
</div>
<ul class='dropdown-menu share-options-menu'>
<li>
<a class='share-row' href='https://twitter.com/intent/tweet?text=When Should You Build Your Own Backtester?&amp;url=https%3A%2F%2Fwww.quantopian.com%2Fposts%2Fwhen-should-you-build-your-own-backtester%3Futm_source%3Dwebsite_share%26utm_campaign%3Dwhen-should-you-build-your-own-backtester%26utm_medium%3Dtwitter&amp;via=quantopian'>
<i class='icon icon-twitter'></i>
Share on Twitter
</a>
</li>
<li>
<div class='share-row facebook-button'>
<i class='icon icon-facebook'></i>
Share on Facebook
</div>
</li>
<li>
<div class='share-row linkedin-button' data-share-url='https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Fwww.quantopian.com%2Fposts%2Fwhen-should-you-build-your-own-backtester%3Futm_source%3Dwebsite_share%26utm_campaign%3Dwhen-should-you-build-your-own-backtester%26utm_medium%3Dlinkedin&amp;title=When+Should+You+Build+Your+Own+Backtester%3F+%28Q++Blog%29&amp;source=Quantopian'>
<i class='icon icon-linkedin'></i>
Share on LinkedIn
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>

<input type="hidden" name="social_fb_post_link" id="social_fb_post_link" value="https://www.quantopian.com/posts/when-should-you-build-your-own-backtester?utm_source=website_share&amp;utm_campaign=when-should-you-build-your-own-backtester&amp;utm_medium=facebook" />
<input type="hidden" name="social_post_image" id="social_post_image" value="external/logo-q-red-outline.png" />
<input type="hidden" name="social_post_author" id="social_post_author" value="Q  Blog" />
<div class='body-text'>
<div class='body-text-container post-body'><p>This post was originally featured on the Quantopian Blog and authored by Michael Halls-Moore. Michael Halls-Moore, founder of <a href="https://www.quantstart.com/">QuantStart.com</a>, presented &quot;<a href="https://www.youtube.com/watch?v=OhGdVdolqkU&feature=youtu.be">When Should You Build Your Own Backtester?</a>&quot; at QuantCon in 2016, our annual quant trading conference. The slides for the talk can be found <a href="https://s3.amazonaws.com/quantstart/media/powerpoint/mhm-quantcon-2016.pdf">here</a>.</p>
<h2 id='about-this-post'><a class='clickable-header-link' href='#about-this-post'>About This Post  </a></h2>

<p>The post is suitable for those who are beginning quantitative trading as well as those who have had some experience with the area. The post discusses the common pitfalls of backtesting, as well as some uncommon ones!</p>

<p>It also looks at the different sorts of backtesting mechanisms as well as the software landscape that implements these approaches. Then we discuss whether it is worth building your own backtester, even with the prevalence of open source tools available today.</p>

<p>Finally, we discuss the ins-and-outs of an event-driven backtesting system, a topic that I&#39;ve covered frequently on QuantStart in prior posts.</p>
<h2 id='what-is-a-backtest'><a class='clickable-header-link' href='#what-is-a-backtest'>What Is A Backtest?  </a></h2>

<blockquote>
<p>A backtest is the application of trading strategy rules to a set of historical pricing data.</p>
</blockquote>

<p>That is, if we define a set of mechanisms for entry and exit into a portfolio of assets, and apply those rules to historical pricing data of those assets, we can attempt to understand the performance of this &quot;trading strategy&quot; that might have been attained in the past.</p>

<p>It was once said that <em>&quot;All models are wrong, but some are useful&quot;</em>. The same is true of backtests. So what purpose do they serve?</p>

<p>Backtests ultimately help us decide whether it is worth live-trading a set of strategy rules. It provides us with an idea of how a strategy <em>might</em> have performed <em>in the past</em>. Essentially it allows us to filter out bad strategy rules before we allocate any real capital.</p>

<p>It is easy to generate backtests. Unfortunately backtest results are not live trading results. They are instead a model of reality. A model that usually contains many assumptions.</p>

<p>There are two main types of software backtest - the <strong>&quot;for-loop&quot;</strong> and the <strong>&quot;event-driven&quot;</strong> systems.</p>

<p>When designing backtesting software there is always a trade-off between accuracy and implementation complexity. The above two backtesting types represent either end of the spectrum for this tradeoff.</p>
<h2 id='backtesting-pitfalls'><a class='clickable-header-link' href='#backtesting-pitfalls'>Backtesting Pitfalls  </a></h2>

<p>There are many pitfalls associated with backtesting. They all concern the fact that a backtest is just a model of reality. Some of the more common pitfalls include:</p>

<ul>
<li>  <strong>In-Sample Testing</strong> - This occurs when you utilise the same data to &quot;train&quot; your trading models as well as to &quot;test&quot; it. It almost always inflates the performance of a strategy beyond that which would be seen in live trading. This is because it has not been validated on unseen data, which will likely differ markedly from the training data. In essence, it is a form of overfitting.<br></li>
<li>  <strong>Survivorship Bias</strong> - For stock market indices like the S&amp;P500, a periodic process of listing and de-listing occurs, changing the composition over time. By failing to take into account this changing composition over a backtest, trading strategies are automatically &quot;picking the winners&quot; by virtue of ignoring all the companies that fell out of the index due to low market capitalisation. Hence it is always necessary to use survivorship-bias free data when carrying out longer-term backtests.<br></li>
<li>  <strong>Look-Ahead Bias</strong> - Future data can &quot;sneak in&quot; to backtests in very subtle ways. Consider calculating a linear regression ratio over a particular time-frame. If this ratio is then used in the same sample, then we have implicitly brought in future data and thus will have likely inflated performance. Event-driven backtesters largely solve this problem, as we will discuss below.<br></li>
<li>  <strong>Market Regime Change</strong> - This concerns the fact that stock market &quot;parameters&quot; are not stationary. That is, the underlying process generating stock movements need not have parameters that stay constant in time. This makes it hard to generalise parametrised models (of which many trading strategies are instances of) and thus performance is likely to be higher in backtests than in live trading.<br></li>
<li>  <strong>Transaction Costs</strong> - Many For-Loop backtests do not take into account even basic transaction costs, such as fees or commissions. This is particularly true in academic papers where backtests are largely conducted free of transaction costs. Unfortunately it is all too easy to find strategies that are highly profitable without transaction costs, but make substantial losses when subjected to a real market. Typical costs include spread, market impact and slippage. All of these should be accounted for in realistic backtests.</li>
</ul>

<p>There are some more subtle issues with backtesting that are not discusssed as often, but are still incredibly important to consider. They include:</p>

<ul>
<li>  <strong>OHLC Data</strong> - OHLC data, that is the type of daily data taken from free sites such as Yahoo Finance, is often an amalgamation of multiple exchange feeds. Hence it is unlikely that some of the more extreme values seen (including the High and Low price of the day) would likely be obtained by a live trading system. Such &quot;order routing&quot; needs to be considered as part of a model.<br></li>
<li>  <strong>Capacity Constraints</strong> - When backtesting it is easy to utilise an &quot;infinite&quot; pot of money. However, in reality capital, as well as margin, is tightly constrained. It is necessary also to think of Average Daily Volume (ADV) limits, especially for small-cap stocks where it is possible that our trades might indeed move the market. Such &quot;market impact&quot; effects would need to be taken into account for risk management purposes.<br></li>
<li>  <strong>Benchmark Choice</strong> - Is the choice of benchmark against which the backtested strategy is being measured a good one? For instance if you are trading commodity futures and are neutral to the S&amp;P500 US equity index, does it really make sense to use the S&amp;P500 as your benchmark? Would a basket of other commodity trading funds make more sense?<br></li>
<li>  <strong>Robustness</strong> - By varying the starting time of your strategy within your backtest do the results change dramatically? It should not matter for a longer term strategy whether the backtest is started on a Monday or a Thursday. However, if it is sensitive to the &quot;initial conditions&quot; how can you reliably predict future performance when live trading?<br></li>
<li>  <strong>Overfitting/Bias-Variance Tradeoff</strong> - We&#39;ve discussed this a little above in the In-Sample Testing point. However, overfitting is a broader problem for all (supervised) machine learning methods. The only real way to &quot;solve&quot; this problem is via careful use of <a href="https://www.quantstart.com/articles/Using-Cross-Validation-to-Optimise-a-Machine-Learning-Method-The-Regression-Setting">cross-validation techniques</a>. Even then, we should be extremely careful that we haven&#39;t simply fitted our trading strategies to noise in the training set.<br></li>
<li>  <strong>Psychological Tolerance</strong> - Psychology is often ignored in quant finance because (supposedly) it is removed by creating an algorithmic system. However, it always creeps in because quants have a tendency to &quot;tinker&quot; or &quot;override&quot; the system once deployed live. In addition, what may seem tolerable in a backtest, might be stomach-churning in live trading. If your backtested equity curve shows a 50% drawdown at some point in its trading history, could you also ride this through in a live trading scenario?</li>
</ul>

<p>Much has been written about the problems with backtesting. <a href="http://www.cc.gatech.edu/home/tucker/">Tucker Balch</a> and <a href="http://epchan.blogspot.co.uk/">Ernie Chan</a> both consider the issues at length.</p>
<h2 id='forloop-backtest-systems'><a class='clickable-header-link' href='#forloop-backtest-systems'>For-Loop Backtest Systems  </a></h2>

<p>A For-Loop Backtester is the most straightforward type of backtesting system and the variant most often seen in quant blog posts, purely for its simplicity and transparency.</p>

<p>Essentially the For-Loop system iterates over every trading day (or OHLC bar), performs some calculation related to the price(s) of the asset(s), such as a Moving Average of the close, and then goes long or short a particular asset (often on the same closing price, but sometimes the day after). The iteration then continues. All the while the total equity is being tracked and stored to later produce an <em>equity curve</em>.</p>

<p>Here is the pseudo-code for such an algorithm:</p>

<pre><code>&quot;for each trading bar&quot;:
    do_something_with_prices();  
    buy_sell_or_hold_something();  
    next_bar();  
</code></pre>

<p>As you can see the design of such a sytem is incredibly simple. This makes it attractive for getting a &quot;first look&quot; at the performance of a particular strategy ruleset.</p>
<h2 id='advantages'><a class='clickable-header-link' href='#advantages'>Advantages</a></h2>

<p>For-Loop backtesters are straightforward to implement in nearly any programming language and are very fast to execute. The latter advantage means that many parameter combinations can be tested in order to optimise the trading setup.</p>
<h2 id='disadvantages'><a class='clickable-header-link' href='#disadvantages'>Disadvantages</a></h2>

<p>The main disadvantage with For-Loop backtesters is that they are quite unrealistic. They often have no transaction cost capability unless specifically added. Usually orders are filled immediately &quot;at market&quot; with the midpoint price. As such there is often no accounting for spread.</p>

<p>There is minimal code re-use between the backtesting system and the live-trading system. This means that code often needs to be written twice, introducing the possibility of more bugs.</p>

<p>For-Loop backtesters are prone to Look-Ahead Bias, due to bugs with indexing. For instance, should you have used &quot;i&quot;, &quot;i+1&quot; or &quot;i-1&quot; in your panel indexing?</p>

<p>For-Loop backtesters should really be utilised solely as a filtration mechanism. You can use them to eliminate the obviously bad strategies, but you should remain skeptical of strong performance. Further research is often required. Strategies rarely perform better in live trading than they do in backtests!</p>
<h2 id='eventdriven-backtest-systems'><a class='clickable-header-link' href='#eventdriven-backtest-systems'>Event-Driven Backtest Systems</a></h2>

<p>Event-Driven Backtesters lie at the other end of the spectrum. They are much more akin to live-trading infrastructure implementations. As such, they are often more realistic in the difference between backtested and live trading performance.</p>

<p>Such systems are run in a large &quot;while&quot; loop that continually looks for &quot;events&quot; of differing types in the &quot;event queue&quot;. Potential events include:</p>

<ul>
<li>  <strong>Tick Events</strong> - Signify arrival of new market data<br></li>
<li>  <strong>Signal Events</strong> - Generation of new trading signals<br></li>
<li>  <strong>Order Events</strong> - Orders ready to be sent to market broker<br></li>
<li>  <strong>Fill Events</strong> - Fill information from the market broker</li>
</ul>

<p>When a particular event is identified it is routed to the appropriate module(s) in the infrastructure, which handles the event and then potentially generates new events which go back to the queue.</p>

<p>The pseudo-code for an Event-Driven backtesting system is as follows:</p>

<pre><code>&quot;while event_queue_isnt_empty()&quot;:
event = get_latest_event_from_queue();  
    if event.type == &quot;tick&quot;:  
        strategy.calculate_trading_signals(event);  
    else if event.type == &quot;signal&quot;:  
        portfolio.handle_signal(event);  
    else if event.type == &quot;order&quot;:  
        portfolio.handle_order(event);  
    else if event.type == &quot;fill&quot;:  
        portfolio.handle_fill(event)  
    sleep(600);  # Sleep for, say, 10 mins  
</code></pre>

<p>As you can see there is a heavy reliance on the portfolio handler module. Such a module is the &quot;heart&quot; of an Event-Driven backtesting system as we will see below.</p>
<h2 id='advantages-1'><a class='clickable-header-link' href='#advantages-1'>Advantages</a></h2>

<p>There are many advantages to using an Event-Driven backtester:</p>

<ul>
<li>  <strong>Elimination of Look-Ahead Bias</strong> - By virtue of its message-passing design, Event-Driven systems are usually free from Look-Ahead Bias, at least at the trading level. There is the possibility of introducing bias indirectly through a pre-researched model, however.<br></li>
<li>  <strong>Code Re-Use</strong> - For live trading it is only necessary to replace the data handler and execution handler modules. All strategy, risk/position management and performance measurement code is identical. This means there are usually far less bugs to fix.<br></li>
<li>  <strong>Portfolio Level</strong> - With an Event-Driven system it is much more straightforward to think at the portfolio level. Introducing groups of instruments and strategies is easy, as are hedging instruments.<br></li>
<li>  <strong>&quot;Proper&quot; Risk/Position Management</strong> - Can easily modularise the risk and position management. Can introduce leverage and methodologies such as Kelly&#39;s Criterion easily. Can also easily include sector exposure warnings, ADV limits, volatility limits and illiquidity warnings.<br></li>
<li>  <strong>Remote Deployment/Monitoring</strong> - Modular nature of the code makes it easier to deploy in &quot;the cloud&quot; or to co-locate the software near an exchange on a virtualised system.</li>
</ul>
<h2 id='disadvantages-1'><a class='clickable-header-link' href='#disadvantages-1'>Disadvantages</a></h2>

<p>While the advantages are clear, there are also some strong disadvantages to using such a complex system:</p>

<ul>
<li>  <strong>Tricky to Code</strong> - Building a fully-tested Event-Driven system will likely take weeks or months of full-time work. A corollary of this is that there is always a healthy market for freelance/contract quant developers!<br></li>
<li>  <strong>Require Object-Orientation</strong> - A modular design necessitates using object-oriented programming (OOP) principles, and thus a language that can support OOP easily. This does however make unit testing far more straightforward.<br></li>
<li>  <strong>Software Engineering</strong> - More likely to require good software engineering expertise and capabilities such as logging, unit testing, version control and continuous integration.<br></li>
<li>  <strong>Slow Execution</strong> - The message-passing nature of the code makes it far slower to execute compared to a vectorised For-Loop approach. Multiple parameter combinations can take a long time to calculate on unoptimised codes.</li>
</ul>
<h2 id='the-software-landscape'><a class='clickable-header-link' href='#the-software-landscape'>The Software Landscape</a></h2>

<p>In this section we will consider software (both open source and commercial) that exists for both For-Loop and Event-Driven systems.</p>

<p>For For-Loop backtesters, the main programming languages/software that are used include Python (with the Pandas library), R (and the quantmod library) and MatLab. There are plenty of code snippets to be found on quant blogs. A great list of such blogs can be found on<a href="http://quantocracy.com/">Quantocracy</a>.</p>

<p>The market for Event-Driven systems is much larger, as clients/users often want the software to be capable of both backtesting and live trading in one package.</p>

<p>The expensive commercial offerings include <a href="http://www.deltixlab.com/">Deltix</a> and <a href="http://www.quanthouse.com/">QuantHouse</a>. They are often found in quant hedge funds, family offices and prop trading firms.</p>

<p>Cloud-based backtesting and live trading systems are relatively new. <a href="https://www.quantopian.com/">Quantopian</a> is an example of a mature web-based setup for both backtesting and live trading.</p>

<p>Institutional quants often also build their own in house software. This is due to a mix of regulatory constraints, investor relations/reporting and auditability.</p>

<p>Retail quants have a choice between using the &quot;cloud+data&quot; approach of Quantopian or &quot;rolling their own&quot; using a cloud vendor such as <a href="http://aws.amazon.com/">Amazon Web Services</a>, <a href="https://www.rackspace.com/cloud">Rackspace Cloud</a> or <a href="https://azure.microsoft.com/en-gb/">Microsoft Azure</a>, along with an appropriate data vendor such as <a href="https://www.iqfeed.net/">DTN IQFeed</a> or <a href="https://quantquote.com/">QuantQuote</a>.</p>

<p>In terms of open source software, there are many libraries available. They are mostly written in Python (for reasons I will outline below) and include <a href="https://github.com/quantopian/zipline">Zipline</a> (Quantopian), <a href="http://gbeced.github.io/pyalgotrade/">PyAlgoTrade</a>, <a href="http://qoppac.blogspot.co.uk/p/pysystemtrade.html">PySystemTrade</a> (Rob Carver/Investment Idiocy) and <a href="https://github.com/mhallsmoore/qstrader">QSTrader</a> (QuantStart&#39;s own backtester).</p>

<p>One of the most important aspects, however, is that no matter which piece of software you ultimately use, it must be paired with an equally solid source of financial data. Otherwise you will be in a situation of &quot;garbage in, garbage out&quot; and your live trading results will differ substantially from your backtests.</p>
<h2 id='programming-languages'><a class='clickable-header-link' href='#programming-languages'>Programming Languages</a></h2>

<p>While software takes care of the details for us, it hides us from many implementation details that are often crucial when we wish to expand our trading strategy complexity. At some point it is often necessary to write our own systems and the first question that arises is &quot;Which programming language should I use?&quot;.</p>

<p>Despite having a background as a quantitative software developer I am not personally interested in &quot;language wars&quot;. There are only so many hours in the day and, as quants, we need to get things done - not spend time arguing language design on internet forums!</p>

<p>We should only be interested in <em>what works</em>. Here are some of the main contenders:</p>
<h3 id='strongpythonstrong'><a class='clickable-header-link' href='#strongpythonstrong'><strong>Python</strong></a></h3>

<p>Python is an extremely easy to learn programming language and is often the first language individuals come into contact with when they decide to learn programming. It has a standard library of tools that can read in nearly any form of data imaginable and talk to any other &quot;service&quot; very easily.</p>

<p>It has some exceptional quant/data science/machine learning (ML) libraries in NumPy, SciPy, Pandas, Scikit-Learn, Matplotlib, PyMC3 and Statsmodels. While it is great for ML and general data science, it does suffer a bit for more extensive classical statistical methods and time series analysis.</p>

<p>It is great for building both For-Loop and Event-Driven backtesting systems. In fact, it is perhaps one of the only languages that straightforwardly permits end-to-end research, backtesting, deployment, live trading, reporting and monitoring.</p>

<p>Perhaps its greatest drawback is that it is quite slow to execute when compared to other languages such as C++. However, work is being carried out to improve this problem and over time Python is becoming faster.</p>
<h3 id='strongrstrong'><a class='clickable-header-link' href='#strongrstrong'><strong>R</strong></a></h3>

<p>R is a statistical programming environment, rather than a full-fledged &quot;first class programming language&quot; (although some might argue otherwise!). It was designed primarily for performing advanced statistical analysis for time series, classical/frequentist statistics, Bayesian statistics, machine learning and exploratory data analysis.</p>

<p>It is widely used for For-Loop backtesting, often via the quantmod library, but is not particularly well suited to Event-Driven systems or live trading. It does however excel at strategy research.</p>
<h3 id='strongcstrong'><a class='clickable-header-link' href='#strongcstrong'><strong>C++</strong></a></h3>

<p>C++ has a reputation for being extremely fast. Nearly all scientific high-performance computing is carried out either in Fortran or C++. This is its primary advantage. Hence if you are considering high frequency trading, or work on legacy systems in large organisations, then C++ is likely to be a necessity.</p>

<p>Unfortunately it is painful for carrying out strategy research. Due to being <em>statically-typed</em> it is quite tricky to easily load, read and format data compared to Python or R.</p>

<p>Despite its relative age, it has recently been modernised substantially with the introduction of C++11/C++14 and further standards refinements.</p>
<h3 id='strongothersstrong'><a class='clickable-header-link' href='#strongothersstrong'><strong>Others?</strong></a></h3>

<p>You may also wish to take a look at Java, Scala, C#, Julia and many of the functional languages. However, my recommendation is to stick with Python, R and/or C++, as the quant trading communities are much larger.</p>
<h2 id='should-you-write-your-own-eventdriven-backtester'><a class='clickable-header-link' href='#should-you-write-your-own-eventdriven-backtester'>Should You Write Your Own (Event-Driven) Backtester?  </a></h2>

<p>Answer: Yes!</p>

<p>It is a great learning experience to write your own Event-Driven backtesting system. Firstly, it forces you to consider all aspects of your trading infrastructure, not just spend hours tinkering on a particular strategy.</p>

<p>Even if you don&#39;t end up using the system for live trading, it will provide you with a huge number of questions that you <em>should be asking</em> of your commercial or FOSS backtesting vendors.</p>

<p>For example: How does your current live system differ from your backtest simulation in terms of:</p>

<ul>
<li>  Algorithmic execution and order routing?<br></li>
<li>  Spread, fees, slippage and market impact?<br></li>
<li>  Risk management and position sizing?</li>
</ul>

<p>While Event-Driven systems are not quick or easy to write, the experience will pay huge educational dividends later on in your quant trading career.</p>
<h2 id='eventdriven-backtest-design-101'><a class='clickable-header-link' href='#eventdriven-backtest-design-101'>Event-Driven Backtest Design 101  </a></h2>

<p>How do you go about writing such a system?</p>

<p>The best way to get started is to simply download Zipline, QSTrader, PyAlgoTrade, PySystemTrade etc and try reading through the documentation and code. They are all written in Python (due to the reasons I outlined above) and thankfully Python is very much like reading pseudo-code. That is, it is very easy to follow.</p>

<p>I&#39;ve also written many articles on Event-Driven backtest design, which you can find <a href="https://www.quantstart.com/articles/Event-Driven-Backtesting-with-Python-Part-I">here</a>, that guide you through the development of each module of the system. Rob Carver, at <a href="http://qoppac.blogspot.co.uk/">Investment Idiocy</a> also lays out his approach to building such systems to trade futures.</p>

<p>Remember that you don&#39;t have to be an expert on day #1. You can take it slowly, day-by-day, module-by-module. If you need help, you can always contact me or other willing quant bloggers. See the end of the article for my contact email.</p>

<p>I&#39;ll now discuss the modules that are often found in many Event-Driven backtesting systems. While not an exhaustive list, it should give you a &quot;flavour&quot; of how such systems are designed.</p>
<h3 id='strongsecurities-master-databasestrong'><a class='clickable-header-link' href='#strongsecurities-master-databasestrong'><strong>Securities Master Database</strong></a></h3>

<p>This is where all of the historical pricing data is stored, along with your trading history, once live. A professsional system is not just a few CSV files from Yahoo Finance!</p>

<p>Instead, we use a &quot;first class&quot; database or file system, such as <a href="https://www.postgresql.org/">PostgreSQL</a>, <a href="https://www.mysql.com">MySQL</a>, <a href="https://www.microsoft.com/en-us/cloud-platform/sql-server">SQL Server</a> or <a href="https://www.hdfgroup.org/HDF5/">HDF5</a>.</p>

<p>Ideally, we want to obtain and store tick-level data as it gives us an idea of trading spreads. It also means we can construct our own OHLC bars, at lower frequencies, if desired.</p>

<p>We should always be aware of handling corporate actions (such as stock splits and dividends), survivorship bias (stock de-listing) as well as tracking the timezone differences between various exchanges.</p>

<p>Individual/retail quants can compete here as many production-quality database technologies are mature, free and open source. Data itself is becoming cheaper and &quot;democratised&quot; via sites like <a href="https://www.quandl.com/">Quandl</a>.</p>

<p>There are still plenty of markets and strategies that are too small for the big funds to be interested in. This is a fertile ground for retail quant traders.</p>
<h3 id='strongtrading-strategiesstrong'><a class='clickable-header-link' href='#strongtrading-strategiesstrong'><strong>Trading Strategies</strong></a></h3>

<p>The trading strategy module in an Event-Driven system generally runs some kind of <strong>predictive</strong> or <strong>filtration</strong> mechanism on new market data.</p>

<p>It receives bar or tick data and then uses these mechanisms to produce a trading signal to long or short an asset. This module is NOT designed to produce a quantity, that is carried out via the position-sizing module.</p>

<p>95% of quant blog discussion usually revolves around <strong>trading strategies</strong>. I personally believe it should be more like 20%. This is because I think it is far easier to increase expected returns by reducing costs through proper risk management and position sizing, rather than chasing strategies with &quot;more alpha&quot;.</p>
<h3 id='strongportfolio-amp-order-managementstrong'><a class='clickable-header-link' href='#strongportfolio-amp-order-managementstrong'><strong>Portfolio &amp; Order Management</strong></a></h3>

<p>The &quot;heart&quot; of an Event-Driven backtester is the <strong>Portfolio &amp; Order Management</strong> system. It is the area which requires the most development time and quality assurance testing.</p>

<p>The goal of this system is to go from the <em>current portfolio</em> to the <em>desired portfolio</em>, while minimising risk and reducing transaction costs.</p>

<p>The module ties together the strategy, risk, position sizing and order execution capabilities of the sytem. It also handles the position calculations while backtesting to mimic a brokerage&#39;s own calculations.</p>

<p>The primary advantage of using such a complex system is that it allows a variety of financial instruments to be handled under a single portfolio. This is necessary for insitutional-style portfolios with hedging. Such complexity is very tricky to code in a For-Loop backtesting system.</p>
<h3 id='strongrisk-amp-position-managementstrong'><a class='clickable-header-link' href='#strongrisk-amp-position-managementstrong'><strong>Risk &amp; Position Management</strong></a></h3>

<p>Separating out the risk management into its own module can be extremely advantageous. The module can modify, add or veto orders that are sent from the portfolio.</p>

<p>In particular, the risk module can add hedges to maintain market neutrality. It can reduce order sizes due to sector exposure or ADV limits. It can completely veto a trade if the spread is too wide, or fees are too large relative to the trade size.</p>

<p>A separate position sizing module can implement volatility estimation and position sizing rules such as Kelly leverage. In fact, utilising a modular approach allows extensive customisation here, without affecting any of the strategy or execution code.</p>

<p>Such topics are not well-represented in the quant blogosphere. However, this is probably the biggest difference between how institutions and some retail traders think about their trading. Perhaps the simplest way to get better returns is to begin implementing risk management and position sizing in this manner.</p>
<h3 id='strongexecution-handlingstrong'><a class='clickable-header-link' href='#strongexecution-handlingstrong'><strong>Execution Handling</strong></a></h3>

<p>In real life we are never guaranteed to get a market fill at the midpoint!</p>

<p>We must consider transactional issues such as capacity, spread, fees, slippage, market impact and other algorithmic execution concerns, otherwise our backtesting returns are likely to be vastly overstated.</p>

<p>The modular approach of an Event-Driven system allows us to easily switch-out the <strong>BacktestExecutionHandler</strong> with the <strong>LiveExecutionHandler</strong> and deploy to the remote server.</p>

<p>We can also easily add multiple brokerages utilising the OOP concept of &quot;inheritance&quot;. This of course assumes that said brokerages have a straightforward Application Programming Interface (API) and don&#39;t force us to utilise a Graphical User Interface (GUI) to interact with their system.</p>

<p>One issue to be aware of is that of &quot;trust&quot; with third party libraries. There are many such modules that make it easy to talk to brokerages, but it is necessary to perform your own testing. Make sure you are completely happy with these libraries before committing extensive capital, otherwise you could lose a lot of money simply due to bugs in these modules.</p>
<h3 id='strongperformance-amp-reportingstrong'><a class='clickable-header-link' href='#strongperformance-amp-reportingstrong'><strong>Performance &amp; Reporting</strong></a></h3>

<p>Retail quants can and should borrow the sophisticated reporting techniques utilised by institutional quants. Such tools include live &quot;dashboards&quot; of the portfolio and corresponding risks, a &quot;backtest equity&quot; vs &quot;live equity&quot; difference or &quot;delta&quot;, along with all the &quot;usual&quot; metrics such as costs per trade, the returns distribution, high water mark (HWM), maximum drawdown, average trade latency as well as alpha/beta against a benchmark.</p>

<p>Consistent incremental improvements should be made to this infrastructure. This can really enchance returns over the long term, simply by eliminating bugs and improving issues such as trade latency. Don&#39;t simply become fixated on improving the &quot;world&#39;s greatest strategy&quot; (WGS).</p>

<p>The WGS will eventually erode due to &quot;alpha decay&quot;. Others will eventually discover the edge and will arbitrage away the returns. However, a robust trading infrastructure, a solid strategy research pipeline and continual learning are great ways of avoiding this fate.</p>

<p>Infrastructure optimisation may be more &quot;boring&quot; than strategy development but it becomes significantly less boring when your returns are improved!</p>
<h3 id='strongdeployment-amp-monitoringstrong'><a class='clickable-header-link' href='#strongdeployment-amp-monitoringstrong'><strong>Deployment &amp; Monitoring</strong></a></h3>

<p>Deployment to a remote server, along with extensive monitoring of this remote system, is absolutely crucial for institutional grade systems. Retail quants can and should utilise these ideas as well.</p>

<p>A robust system <em>must</em> be remotely deployed in &quot;the cloud&quot; or co-located near an exchange. Home broadband, power supplies and other factors mean that utilising a home desktop/laptop is too unreliable. Often things fail right at the worst time and lead to substantial losses.</p>

<p>The main issues when considering a remote deployment include; monitoring hardware, such as CPU, RAM/swap, disk and network I/O, high-availability and redundancy of systems, a well thought through backup AND restoration plan, extensive logging of all aspects of the system as well as continuous integration, unit testing and version control.</p>

<p>Remember <strong>Murphy&#39;s Law</strong> - &quot;If it <em>can</em> fail it <em>will</em> fail.&quot;</p>

<p>There are many vendors on offer that provide relatively straightforward cloud deployments, including Amazon Web Services, Microsoft Azure, Google and Rackspace. For software engineering tasks vendors include Github, Bitbucket, Travis, Loggly and Splunk, as well as many others.</p>
<h2 id='final-thoughts'><a class='clickable-header-link' href='#final-thoughts'>Final Thoughts</a></h2>

<p>Unfortunately there is no &quot;quick fix&quot; in quant trading. It involves a lot of hard work and learning in order to be successful.</p>

<p>Perhaps a major stumbling block for beginners (and some intermediate quants!) is that they concentrate too much on the best &quot;strategy&quot;. Such strategies <em>always</em> eventually succumb to <em>alpha decay</em> and thus become unprofitable. Hence it is necessary to be continually researching new strategies to add to a portfolio. In essence, the &quot;strategy pipeline&quot; should always be full.</p>

<p>It is also worth investing a lot of time in your <em>trading infrastructure</em>. Spend time on issues such as deployment and monitoring. Always try and be reducing transaction costs, as profitability is as much about reducing costs as it is about gaining trading revenue.</p>

<p>I recommend writing your own backtesting system simply to <em>learn</em>. You can either use it and continually improve it or you can find a vendor and then ask them all of the questions that you have discovered when you built your own. It will certainly make you aware of the limitations of commercially available systems.</p>

<p>Finally, always be reading, learning and improving. There are a wealth of textbooks, trade journals, academic journals, quant blogs, forums and magazines which discuss all aspects of trading. For more advanced strategy ideas I recommend <a href="http://www.ssrn.com/en/">SSRN</a> and <a href="https://arxiv.org/archive/q-fin">arXiv - Quantitative Finance</a>.</p>
<h2 id='about-me-and-quantstart'><a class='clickable-header-link' href='#about-me-and-quantstart'>About Me and QuantStart</a></h2>

<p>My name is Mike Halls-Moore and I&#39;m based in and around London. I have a background in computational fluid dynamics (CFD) research and as a quantitative developer in a London equities/futures fund.</p>

<p>Perhaps my two biggest takeaways from working in an institutional setting are the vast chasm between backtests and live trading, as well as the importance of thinking at a portfolio level and the associated risk management thereof.</p>

<p>Coming from a scientific background means that I&#39;m very passionate about <strong>knowledge sharing</strong> and <strong>open-source software</strong>. Regular visitors will know that this is a running theme through QuantStart.</p>

<p>QuantStart itself was founded in late 2012. A lot has changed in quantitative finance since then! The site discusses quant trading, quant careers, data science, machine learning and mathematics education. In particular, the site discusses a lot of implementation details that are often ignored, but I find to be absolutely necessary. The site tries to bring institutional thinking to retail/individual quants and also attempts to provide end-to-end code snippets that can be used immediately.</p>

<p>If you wish to contact me about any topic related to quant finance then please email <a href="/cdn-cgi/l/email-protection#75060005051a0701350400141b0106011407015b161a18"><span class="__cf_email__" data-cfemail="582b2d2828372a2c18292d39362c2b2c392a2c763b3735">[email&#160;protected]</span></a> and I&#39;ll do my best to get back to you.</p>
</div>
</div>
<div class='disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>

</div>

<div class='container page-container post-atomic'>
<div class='section-header reply-header'>
</div>
<div class='replies'>
</div>
<div class='sign-in-please'>
Please <a href='/signin?return_to=/posts/when-should-you-build-your-own-backtester'>sign in</a> or
<a href='/users/sign_up?redirect_to=/posts/when-should-you-build-your-own-backtester'>join Quantopian</a> to
post a reply.
</div>
</div>
<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
  window.fbAsyncInit = function() {
    FB.init({
      appId: "550580758292093",
      status: false,
      cookie: true,
      xfbml: true
    });
  };
  
  (function(d, debug){
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) {return;}
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
    ref.parentNode.insertBefore(js, ref);
  }(document, /*debug*/ false));
  
  window.twttr = (function (d,s,id) {
    var t, js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return; js=d.createElement(s); js.id=id;
    js.src="//platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs);
    return window.twttr || (t = { _e: [], ready: function(f){ t._e.push(f) } });
  }(document, "script", "twitter-wjs"));
</script>
<script>
  $(document).ready(function () {
    quanto.instances.pm = new quanto.PostManager(false)
  });
</script>

<div class='login-footer'>
<div class='container'>
<div class='login-footer-text'>
Become an expert in quant finance through Quantopian's hands-on education.
</div>
<div class='login-footer-button'>
<button class='btn btn-v2 stroke join-modal-link mixpanel-button' data-event='anon join footer click posts' data-mixpanel='click'>
Join Now
</button>
</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='error-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'>Error</span>
</div>
<div class='modal-body body-content'>
<p>Sorry, something went wrong.  Try again or contact us by <a class='feedback-link'>sending feedback</a>.</p>
</div>
<div class='modal-footer'>
<button class='btn btn-v2 blue action-button' data-dismiss='modal' href='#'>Close</button>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='confirmation-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'></span>
</div>
<div class='modal-body body-content'></div>
<div class='modal-footer'>
<div class='pull-right'>
<button class='btn btn-v2 border' data-dismiss='modal'>Cancel</button>
<button class='btn btn-v2 blue action-button' data-dismiss='modal'></button>
</div>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='message-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'></span>
</div>
<div class='modal-body body-content'></div>
<div class='modal-footer'>
<button class='btn btn-v2 blue action-button' data-dismiss='modal' id='message-modal-close'>Close</button>
</div>

</div>
</div>
</div>

<div class='always-bootstrap3-modals'>
<div class='fade modal quanto-modal-v2' id='join-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header visible-small'>
<span class='title'>
Join Quantopian.  It's Free!
</span>
<div class='modal-x-out visible-xs'></div>
</div>
<div class='modal-body'>
<div class='flex-wrap'>
<div class='join-left-pane hidden-small'>
<div class='margin_30l'>
<div class='join-hero-text'>
Join Quantopian.  It's Free!
</div>
<div class='join-benefits'>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image code'></div>
</div>
<div class='join-text'>
Use our research platform, backtester, and dozens of clean data sets.
</div>
</div>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image learn'></div>
</div>
<div class='join-text'>
Learn with our hands-on education and community forums.
</div>
</div>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image win'></div>
</div>
<div class='join-text'>
Enter to win cash prizes in our contest.
</div>
</div>
</div>
<div class='hidden saved-reminder'>
Don't worry, all your work is already saved.
</div>
</div>
</div>
<div class='join-right-pane'>
<div class='hidden-small'>
<div class='button-pane'>
<a class="button btn-v2 user-form-btn" href="/signin">Already a Quantopian member?</a>
</div>
</div>
<div class='visible-small'>
<div class='already-member'>
<a href='/signin'>Already a Quantopian member?</a>
</div>
</div>
<form class="quanto-form-v2" id="new-user-modal-form" action="/users" accept-charset="UTF-8" data-remote="true" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><div class='error-message hidden'>
<div class='message'></div>
</div>
<div class='name-group'>
<div class='form-group inline-block'>
<label for="user_firstname">First Name</label>
<input class="form-control firstname" pattern=".*" required="required" autocomplete="off" autofocus="autofocus" type="text" name="user[firstname]" id="user_firstname" />
</div>
<div class='form-group inline-block'>
<label for="user_lastname">Last Name</label>
<input class="form-control" value="" pattern=".*" required="required" autocomplete="off" type="text" name="user[lastname]" id="user_lastname" />
</div>
</div>
<div class='form-group'>
<label for="user_email">Email</label>
<input class="form-control" value="" pattern=".*" required="required" autocomplete="off" type="email" name="user[email]" id="user_email" />
</div>
<div class='form-group'>
<label for="user_password">Password</label>
<input autocomplete="off" class="form-control" pattern=".*" required="required" type="password" name="user[password]" id="user_password" />
</div>
<div class='checkbox eula'>
<input id='eula-checkbox' type='checkbox'>
<div class='quanto-checkbox'></div>
<label for='eula-checkbox' id='checkbox-label'>I accept the <a href='/policies/terms' target='_blank'>Terms Of Use</a> and <a href='/policies/privacy' target='_blank'>Privacy Policy</a>.</label>
</div>
<div class='checkbox mailchimp-box'>
<input name="user[allow_marketing_emails]" type="hidden" value="0" /><input type="checkbox" value="1" name="user[allow_marketing_emails]" id="user_allow_marketing_emails" />
<div class='quanto-checkbox'></div>
<label for='user_allow_marketing_emails'>
Send me email updates with the latest news from the Quantopian community. We send these emails about once a month.
</label>
</div>
<div class='button-row'>
<button class='btn-v2 blue full' data-redirect-to='/tutorials/getting-started' id='sign-up-button' type='Submit'>Join Quantopian</button>
</div>
</form></div>
</div>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='feedback-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title'>Contact Support</span>
</div>
<div class='modal-body'>
<form class='anon-user controls quanto-form-v2' id='feedback-form'>
<div class='feedback-inputs'>
<div class='form-group'>
<input autofocus class='form-control' id='feedback-email-box' name='email' placeholder='Email Address' type='email'>
</div>
<div class='form-group'>
<input class='form-control' id='feedback-name-box' placeholder='Name' type='name'>
</div>
<div class='form-group'>
<textarea class='form-control' id='feedback-box' name='feedback' placeholder='What may we help you with?' rows='10'></textarea>
</div>
</div>
</form>
<form class='hidden quanto-form-v2 select-resource-area'>
<div class='select-step select-type-step'>
<div class='form-group'>
<select class='form-control select-resource-dropdown' title='Select the item you need help with'>
<option value='algorithm'>Algorithm</option>
<option value='backtest'>Backtest</option>
<option value='notebook'>Notebook</option>
</select>
</div>
</div>
<div class='select-step loading-area hidden'>
<div class='loading-text'>
Loading...
</div>
</div>
<div class='select-step empty-list-area hidden'>
<div class='back-button'>Go Back</div>
<div class='empty-text'>
No <span class='empty-list-resource-text'>algorithms</span> found
</div>
</div>
<div class='select-algo-area select-step hidden'>
<div class='back-button'>Go Back</div>
<table class='select-algo-table select-item-table'>
<thead>
<tr>
<th>
Algorithm
<span class='sort-icon'></span>
</th>
<th>
Last Modified
<span class='sort-icon'></span>
</th>
</tr>
</thead>
</table>
</div>
<div class='select-backtest-area select-step hidden'>
<div class='back-button'>Go Back</div>
<table class='select-backtest-table select-item-table'>
<thead>
<tr>
<th>
Backtest
<span class='sort-icon'></span>
</th>
<th>
Started At
<span class='sort-icon'></span>
</th>
<th>
Overall Return
<span class='sort-icon'></span>
</th>
<th>
Status
<span class='sort-icon'></span>
</th>
</tr>
</thead>
</table>
</div>
<div class='select-notebook-area select-step hidden'>
<div class='back-button'>Go Back</div>
<div class='subtitle select-cell-step'>
Choose a cell to use as the preview for this notebook:
</div>
<div class='iframe-wrapper'>
<iframe class='notebook-list-iframe slow-fade' src=''></iframe>
</div>
<div class='progress-area slow-fade in'>
<div class='progress-container'>
<div class='progress-title'>
<div class='quanto-loader gray'></div>
</div>
</div>
</div>
<div class='maintenance-area'>
<div class='error-container'>
<div class='row'>
<div class='col-md-14 msg-title h1'>
Sorry, research is currently undergoing maintenance.
</div>
</div>
<div class='row'>
<div class='col-md-14 msg-subtitle'>
Please check back shortly. If the maintenance period lasts longer than expected,
you can find updates on <a href='https://status.quantopian.com/'>status.quantopian.com</a>.
</div>
</div>

</div>
</div>
<div class='error-area'>
<div class='error-container'>
<div class='row'>
<div class='col-md-14 msg-title h1'>
Sorry, something went wrong on our end.
</div>
</div>
<div class='row'>
<div class='col-md-14 msg-subtitle'>
Please try again or contact <a class='open-feedback-link'>Quantopian support</a>.
</div>
</div>

</div>
</div>

</div>
<div class='selected-item-area select-step hidden'>
<div class='selected-item-group form-group'>
<div class='selected-item-control'>
<input class='disabled form-control selected-item-box' type='text'>
<span class='secure-icon icon'></span>
<button class='btn change change-primary-item-button change-selection-button new-btn transparent' type='button'>
<span class='refresh-icon icon'></span>
</button>
</div>
<div class='selected-backtest-control'>
<input class='disabled form-control selected-backtest-box' type='text'>
<span class='secure-icon icon'></span>
<button class='btn change-backtest-button change-selection-button new-btn transparent' type='button'>
<span class='refresh-icon icon'></span>
</button>
</div>
</div>
<div class='checkbox-group form-group'>
<div class='checkbox give-permission'>
<input class='give-permission-checkbox' id='feedback-give-permission-checkbox' type='checkbox'>
<div class='quanto-checkbox'></div>
<label for='feedback-give-permission-checkbox'>
I permit Quantopian to view <span class='item-type-text'>this algorithm,
backtest or notebook and their imported datasets</span> for the purpose of providing support.
</label>
</div>
</div>
</div>
</form>

<div class='loading-step hidden'>
<div class='loading-text'>
Submitting your support ticket...
</div>
</div>
<div class='success-step invisible'>
<h2 class='title center'>
You've successfully submitted a support ticket.
</h2>
<p>
Our support team will be in touch soon.
</p>
<div class='confirmation-image'></div>
</div>
</div>
<div class='modal-footer'>
<button class='btn-v2 blue' id='send-feedback-button'>Send</button>
<div class='error-message hidden'>
Error submitting support request.
</div>
</div>

</div>
</div>
</div>

</div>
</div>
<div class='footer' id='quanto-footer-container'>
<div class='container'>
<div class='row header-row'>
<div class='col-sm-fourth span3'>
<img class='async-image logotype-image' data-src='https://qf.quantopian.com/assets/logos/logo-q-full-b23bda5ac757691b9259d396d0dfef91567165868b8c955a836649686e6d2248.svg'>
</div>
<div class='col-sm-fourth span3'></div>
<div class='col-sm-fourth span3'></div>
<div class='col-sm-fourth span3'>
<div class='feedback-email'>
Need help?
<a href="/cdn-cgi/l/email-protection#e88e8d8d8c8a898b83a8999d89869c8798818986c68b8785">Contact support.</a>
</div>
</div>
</div>
<div class='row'>
<div class='col-sm-fourth span3'>
<div class='header'>Company</div>
<div class='footer-row'>
<a href='/about'>About</a>
</div>
<div class='footer-row'>
<a href='/academia'>Academia</a>
</div>
<div class='footer-row'>
<a href='/jobs'>Careers</a>
</div>
<div class='footer-row'>
<a href='/posts'>Community</a>
</div>
<div class='footer-row'>
<a href='/events'>Events</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Learn &amp; Support</div>
<div class='footer-row'>
<a href='/faq'>FAQ</a>
</div>
<div class='footer-row'>
<a href='/tutorials/getting-started'>Getting Started</a>
</div>
<div class='footer-row'>
<a href='/docs'>Documentation</a>
</div>
<div class='footer-row'>
<a href='/tutorials'>Tutorials</a>
</div>
<div class='footer-row'>
<a href='/lectures'>Lectures</a>
</div>
<div class='footer-row'>
<a href='/opensource'>Open Source</a>
</div>
<div class='footer-row'>
<a href='https://status.quantopian.com/'>Site Status</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Notices</div>
<div class='footer-row'>
<a href='/policies/terms'>Terms of Use</a>
</div>
<div class='footer-row'>
<a href='/policies/privacy'>Privacy Policy</a>
</div>
<div class='footer-row'>
<a href='/security'>Security</a>
</div>
<div class='footer-row'>
<a href='/policies/code-of-conduct'>Code of Conduct</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Follow Us</div>
<div class='footer-row'>
<a href='https://www.twitter.com/quantopian'>Twitter</a>
</div>
<div class='footer-row'>
<a href='https://www.facebook.com/quantopian'>Facebook</a>
</div>
<div class='footer-row'>
<a href='https://www.linkedin.com/company/quantopian'>LinkedIn</a>
</div>
<div class='footer-row'>
<a href='https://www.youtube.com/channel/UC606MUq45P3zFLa4VGKbxsg'>YouTube</a>
</div>
</div>
</div>
<div class='row'>
<div class='col-xs-14 span12'>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian.
</p>
<p>
In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>

</div>
</div>
</div>
</div>
</div>
<div class='mobile-footer'>
<div class='mobile-nav-category main-links'>
<div class='mobile-nav-row-footer'>
<a href='/about'>About Quantopian</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/jobs'>Careers</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/posts'>Community</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/events'>Events</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/docs'>Documentation</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/academia'>Academia</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/lectures'>Lectures</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://status.quantopian.com/'>Status</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.facebook.com/quantopian'>Facebook</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.twitter.com/quantopian'>Twitter</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.linkedin.com/company/quantopian'>LinkedIn</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.youtube.com/channel/UC606MUq45P3zFLa4VGKbxsg'>YouTube</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/policies/terms'>Terms of Use</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/policies/privacy'>Privacy Policy</a>
</div>
</div>
<div class='mobile-nav-category'>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian.
</p>
<p>
In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>

</div>
</div>
</div>

</div>
<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script></body>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', "UA-8519877-1", {
    cookieDomain: "quantopian.com"
  });
  ga('set', 'dimension1', 'session_5f9dc7425d387f00077e48e4');
  
  ga('send', 'pageview');
</script>

<input type="hidden" name="is_mac" id="is_mac" value="false" />
<input type="hidden" name="mp" id="mp" value="75873953cd404bcc1da88a55ff51e3b4" />
<script>
  (function(e,a){if(!a.__SV){var b=window;try{var c,l,i,j=b.location,g=j.hash;c=function(a,b){return(l=a.match(RegExp(b+"=([^&]*)")))?l[1]:null};g&&c(g,"state")&&(i=JSON.parse(decodeURIComponent(c(g,"state"))),"mpeditor"===i.action&&(b.sessionStorage.setItem("_mpcehash",g),history.replaceState(i.desiredHash||"",e.title,j.pathname+j.search)))}catch(m){}var k,h;window.mixpanel=a;a._i=[];a.init=function(b,c,f){function e(b,a){var c=a.split(".");2==c.length&&(b=b[c[0]],a=c[1]);b[a]=function(){b.push([a].concat(Array.prototype.slice.call(arguments,
  0)))}}var d=a;"undefined"!==typeof f?d=a[f]=[]:f="mixpanel";d.people=d.people||[];d.toString=function(b){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);b||(a+=" (stub)");return a};d.people.toString=function(){return d.toString(1)+".people (stub)"};k="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
  for(h=0;h<k.length;h++)e(d,k[h]);a._i.push([b,c,f])};a.__SV=1.2;b=e.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";c=e.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}})(document,window.mixpanel||[]);
  mixpanel.init("75873953cd404bcc1da88a55ff51e3b4");
</script>
<script>
  mixpanel.track("view page", {"page": window.location.pathname});
</script>
</html>
