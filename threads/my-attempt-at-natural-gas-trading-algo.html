<!DOCTYPE html>
<html>
<head>
<link href='i1.wp.com' rel='dns-prefetch'>
<link href='i2.wp.com' rel='dns-prefetch'>
<link href='i3.wp.com' rel='dns-prefetch'>
<meta content='2HgX9mcLHaPOX6sfaaAkhWtblhEB9yUNw4l6l46e1k4' name='google-site-verification'>
<link rel="shortcut icon" type="image/x-icon" href="external/favicon-q-ac1a76f2c200e9026b5b1147519bb4fab6256910588b831e2411bc6c7c1218c3.png" />
<title>
My attempt at Natural Gas trading algo
</title>
<meta content='Been working in this for a little bit cant quite get it to run  take a look at what I have so far.  def rename_col(df):      log.info(df.head())      return dfdef initialize(context):      context.investment_size = (context.portfolio.cash / 10.0)      #Invest 10 percent of total cash      context.stop_loss_pct = 0.995      #Use Stop Loss      set_symbol_lookup_date(&#39;2013-10-01&#39;)  #Call Zonal Usage CSV ...' name='description'>
<link rel="stylesheet" media="all" href="external/quanto-base-bundle-e8eb6050172aa0d24124d5c24bac90b2cccd88b5b9c7742026c0e9efab038c6e.css" />
<link rel="stylesheet" media="all" href="external/quanto-posts-bundle-aab01368d3f82d8dafc94ee9eabb82e77dc8c9fbbffa952fdcdc744dfa523cf3.css" />
<script src="external/quanto_global-057218867db29d5768131af5d6fb3476cef098e7d9e655108befb903c7ee985e.js"></script>
<script src="external/posts_bundle-3dfd82fa469c393d752e461d837aec9e4e364ae39f49198e34a6626f2180fdf7.js"></script>
<link href='external/logo-q-180x180-0f5a6a439c99203ed4aea6f656e7604c543d287be43d8b17c7591c1131f09a59.png' rel='apple-touch-icon'>
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="3eTmGivwIfb114Iis1L3ek0oPtWoIc7f2qIMxMt1YGKhgpBXiQbzFUzK2xP8vV8OdaYdvNLt28RYrdeuYTAC2Q==" />
<meta content='width=device-width, initial-scale=1.0' name='viewport'>
<script>
//<![CDATA[
window.quanto_data={};quanto_data.bounce_back_params={"show_modal":null,"feedback_text":null};quanto_data.namespace="public";quanto_data.talib_info={"ADOSC":["Chaikin A/D Oscillator (Volume Indicators)",["fastperiod","3"],["slowperiod","10"]],"ADX":["Average Directional Movement Index (Momentum Indicators)",["timeperiod","14"]],"ADXR":["Average Directional Movement Index Rating (Momentum Indicators)",["timeperiod","14"]],"APO":["Absolute Price Oscillator (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["matype","0"]],"AROON":["Aroon (Momentum Indicators)",["timeperiod","14"]],"AROONOSC":["Aroon Oscillator (Momentum Indicators)",["timeperiod","14"]],"ATR":["Average True Range (Volatility Indicators)",["timeperiod","14"]],"BBANDS":["Bollinger Bands (Overlap Studies)",["timeperiod","5"],["nbdevup","2"],["nbdevdn","2"],["matype","0"]],"BETA":["Beta (Statistic Functions)",["timeperiod","5"]],"CCI":["Commodity Channel Index (Momentum Indicators)",["timeperiod","14"]],"CMO":["Chande Momentum Oscillator (Momentum Indicators)",["timeperiod","14"]],"CORREL":["Pearson's Correlation Coefficient (r) (Statistic Functions)",["timeperiod","30"]],"DEMA":["Double Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"DX":["Average Directional Movement Index (Momentum Indicators)",["timeperiod","14"]],"EMA":["Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"KAMA":["Kaufman Adaptive Moving Average (Overlap Studies)",["timeperiod","30"]],"LINEARREG":["Linear Regression (Statistic Functions)",["timeperiod","14"]],"LINEARREG_ANGLE":["Linear Regression Angle (Statistic Functions)",["timeperiod","14"]],"LINEARREG_INTERCEPT":["Linear Regression Intercept (Statistic Functions)",["timeperiod","14"]],"LINEARREG_SLOPE":["Linear Regression Slope (Statistic Functions)",["timeperiod","14"]],"MA":["Moving average (Overlap Studies)",["timeperiod","30"],["matype","0"]],"MACD":["Moving Average Convergence/Divergence (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["signalperiod","9"]],"MACDEXT":["MACD with controllable MA type (Momentum Indicators)",["fastperiod","12"],["fastmatype","0"],["slowperiod","26"],["slowmatype","0"],["signalperiod","9"],["signalmatype","0"]],"MACDFIX":["Moving Average Convergence/Divergence Fix 12/26 (Momentum Indicators)",["signalperiod","9"]],"MAX":["Highest values over a specified period (Math Operators)",["timeperiod","30"]],"MAXINDEX":["Index of highest value over a specified period (Math Operators)",["timeperiod","30"]],"MFI":["Money Flow Index (Momentum Indicators)",["timeperiod","14"]],"MIDPOINT":["Midpoint over period (Overlap Studies)",["timeperiod","14"]],"MIDPRICE":["Midpoint Price over period (Overlap Studies)",["timeperiod","14"]],"MIN":["Lowest value over a specified period (Math Operators)",["timeperiod","30"]],"MININDEX":["Index of lowest value over a specified period (Math Operators)",["timeperiod","30"]],"MINMAX":["Lowest and highest values over a specified period (Math Operators)",["timeperiod","30"]],"MINMAXINDEX":["Indexes of lowest and highest values over a specified period (Math Operators)",["timeperiod","30"]],"MINUS_DI":["Minus Directional Indicator (Momentum Indicators)",["timeperiod","14"]],"MINUS_DM":["Minus Directional Movement (Momentum Indicators)",["timeperiod","14"]],"MOM":["Momentum (Momentum Indicators)",["timeperiod","10"]],"NATR":["Normalized Average True Range (Volatility Indicators)",["timeperiod","14"]],"PLUS_DI":["Plus Directional Indicator (Momentum Indicators)",["timeperiod","14"]],"PLUS_DM":["Plus Directional Movement (Momentum Indicators)",["timeperiod","14"]],"PPO":["Percentage Price Oscillator (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["matype","0"]],"ROC":["Rate of change: ((price/prevPrice)-1)*100 (Momentum Indicators)",["timeperiod","10"]],"ROCP":["Rate of change Percentage: (price-prevPrice)/prevPrice (Momentum Indicators)",["timeperiod","10"]],"ROCR":["Rate of change ratio: (price/prevPrice) (Momentum Indicators)",["timeperiod","10"]],"ROCR100":["Rate of change ratio 100 scale: (price/prevPrice)*100 (Momentum Indicators)",["timeperiod","10"]],"RSI":["Relative Strength Index (Momentum Indicators)",["timeperiod","14"]],"SMA":["Simple Moving Average (Overlap Studies)",["timeperiod","30"]],"STDDEV":["Standard Deviation (Statistic Functions)",["timeperiod","5"],["nbdev","1"]],"STOCH":["Stochastic (Momentum Indicators)",["fastk_period","5"],["slowk_period","3"],["slowk_matype","0"],["slowd_period","3"],["slowd_matype","0"]],"STOCHF":["Stochastic Fast (Momentum Indicators)",["fastk_period","5"],["fastd_period","3"],["fastd_matype","0"]],"STOCHRSI":["Stochastic Relative Strength Index (Momentum Indicators)",["timeperiod","14"],["fastk_period","5"],["fastd_period","3"],["fastd_matype","0"]],"T3":["Triple Exponential Moving Average (T3) (Overlap Studies)",["timeperiod","5"],["vfactor","0.7"]],"TEMA":["Triple Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"TRIMA":["Triangular Moving Average (Overlap Studies)",["timeperiod","30"]],"TRIX":["1-day Rate-Of-Change (ROC) of a Triple Smooth EMA (Momentum Indicators)",["timeperiod","30"]],"TSF":["Time Series Forecast (Statistic Functions)",["timeperiod","14"]],"ULTOSC":["Ultimate Oscillator (Momentum Indicators)",["timeperiod1","7"],["timeperiod2","14"],["timeperiod3","28"]],"VAR":["Variance (Statistic Functions)",["timeperiod","5"],["nbdev","1"]],"WILLR":["Williams' %R (Momentum Indicators)",["timeperiod","14"]],"WMA":["Weighted Moving Average (Overlap Studies)",["timeperiod","30"]]};quanto_data.nb_preview_url="https://notebooks-preview.prd.pub.quantopian.com";quanto_data.delay_nb_preview_load=false;
//]]>
</script>
<meta content='https://www.quantopian.com/posts/my-attempt-at-natural-gas-trading-algo' property='og:url'>
<meta content='My attempt at Natural Gas trading algo' property='og:title'>

<input type="hidden" name="env" id="quanto-env" value="production" />
<meta content='550580758292093' property='fb:app_id'>
<meta content='https://www.quantopian.com/posts/my-attempt-at-natural-gas-trading-algo' property='og:url'>
<meta content='https://media.quantopian.com/public/og-image-default.png' property='og:image'>
<meta content='My attempt at Natural Gas trading algo' property='og:title'>
<meta content='Been working in this for a little bit cant quite get it to run  take a look at what I have so far.  def rename_col(df):      log.info(df.head())      return dfdef initialize(context):      context.investment_size = (context.portfolio.cash / 10.0)      #Invest 10 percent of total cash      context.stop_loss_pct = 0.995      #Use Stop Loss      set_symbol_lookup_date(&#39;2013-10-01&#39;)  #Call Zonal Usage CSV ...' property='og:description'>
</head>
<script type='application/ld+json'>
  {
    "@context": "http://schema.org",
    "@type": "Organization",
    "url": "https://www.quantopian.com",
    "logo": "https://media.quantopian.com/logos/logo-q-press-red.png"
  }
</script>
<body class='' ontouchstart=''>
<div id='fb-root'></div>
<div class='wrapper'>
<div class='alert-v2 error'>
<div class='message'>
Quantopian's community platform is shutting down. Please read <a href="/posts/quantopians-community-services-are-closing">this post</a> for more information and <a href='/account#account'>download your code</a>.
</div>
</div>
<div class='navbar navbar-default navbar-static-top' id='app-navbar'>
<div class='container-fluid'>
<div class='navbar-header'>
<button class='navbar-toggle collapsed' data-target='#app-navbar-collapse' data-toggle='collapse'>
<span class='icon hamburger-menu'></span>
</button>
<a class='navbar-brand' href='/home'>
<img class='logo-image async-image' data-src='external/logo-q-white-b141ea6018546e5a4ecc3d10d8440ec076fc4385764e948b322828cc70950a76.svg'>
</a>
</div>
<div class='collapse navbar-collapse' id='app-navbar-collapse'>
<ul class='nav navbar-nav navbar-right'>
<li class='dropdown quanto-dropdown-new'>
<li>
<a class='header' href='/docs'>
Documentation
</a>
</li>
<li class='dropdown quanto-dropdown-new'>
<a class='header' data-toggle='dropdown' href='#'>
Learn
</a>
<ul class='dropdown-menu'>
<li>
<a class='mixpanel-button' data-event='main nav getting started clicked' href='/tutorials/getting-started'>Getting Started</a>
</li>
<li>
<a class='mixpanel-button' data-event='main nav tutorials clicked' href='/tutorials'>Tutorials</a>
</li>
<li>
<a class='mixpanel-button' data-event='main nav lectures clicked' href='/lectures'>Lectures</a>
</li>
</ul>
</li>
<li>
<a class='header' href='/posts' id='forum-link'>
Forum
</a>
</li>
<li>
<a class="header" href="/signin?return_to=/posts/my-attempt-at-natural-gas-trading-algo">Log In</a>
</li>
</li>

</ul>
</div>
</div>
</div>
<script>
  $(document).ready(function () {
    quanto.instances.fm = new quanto.FeedbackManager();
    quanto.instances.hm = new quanto.headerManager();
  })
</script>


<div class='content content-area new-style'>
<input type="hidden" name="page-id" id="page-id" value="postatomic" />
<script src="external/MathJax.js?config=TeX-AMS_HTML-full.js,Safe" async="async"></script>
<div class='container page-container post-atomic'>
<input id='parent-post-id-val' type='hidden' value='559bfd342492b23da7000325'>
<div class='post-container' data-post-id='559bfd342492b23da7000325' id='559bfd342492b23da7000325'>
<div class='back-button back-to-community'>Back to Community</div>
<div class='post-title'>My attempt at Natural Gas trading algo</div>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/54e7587fbb6b2a6f0400044a'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/2f7802756e1eb517cc09c68c0cec8ef9?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/54e7587fbb6b2a6f0400044a'>Spencer Singleton</a>
</div>
<span class='posted-at'>posted </span>
<span UTCms='1436286260000' class='quanto-date posted-at'></span>
<div class='pull-right other-actions'>
<div class='dropup inline-block'>
<div class='dropdown share-control other-action-link'>
<div data-toggle='dropdown'>
<div class='share-image'></div>
Share
</div>
<ul class='dropdown-menu share-options-menu'>
<li>
<a class='share-row' href='https://twitter.com/intent/tweet?text=My attempt at Natural Gas trading algo&amp;url=https%3A%2F%2Fwww.quantopian.com%2Fposts%2Fmy-attempt-at-natural-gas-trading-algo%3Futm_source%3Dwebsite_share%26utm_campaign%3Dmy-attempt-at-natural-gas-trading-algo%26utm_medium%3Dtwitter&amp;via=quantopian'>
<i class='icon icon-twitter'></i>
Share on Twitter
</a>
</li>
<li>
<div class='share-row facebook-button'>
<i class='icon icon-facebook'></i>
Share on Facebook
</div>
</li>
<li>
<div class='share-row linkedin-button' data-share-url='https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Fwww.quantopian.com%2Fposts%2Fmy-attempt-at-natural-gas-trading-algo%3Futm_source%3Dwebsite_share%26utm_campaign%3Dmy-attempt-at-natural-gas-trading-algo%26utm_medium%3Dlinkedin&amp;title=My+attempt+at+Natural+Gas+trading+algo+%28Spencer+Singleton%29&amp;source=Quantopian'>
<i class='icon icon-linkedin'></i>
Share on LinkedIn
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>

<div class='tags tag-row'>
<a class='tag mixpanel-button' data-event='tag click' data-mixpanel='Seeking Help' data-tag-id='55c50e7d8d4710ec6e000003' href='/posts/tag/Seeking-Help/newest'>Seeking Help</a>
<a class='tag mixpanel-button' data-event='tag click' data-mixpanel='Seasonal Trends' data-tag-id='55c50e7d8d4710ec6e00000e' href='/posts/tag/Seasonal-Trends/newest'>Seasonal Trends</a>
<a class='tag mixpanel-button' data-event='tag click' data-mixpanel='Show Q' data-tag-id='55c50e7d8d4710ec6e000010' href='/posts/tag/Show-Q/newest'>Show Q</a>
</div>
<input type="hidden" name="social_fb_post_link" id="social_fb_post_link" value="https://www.quantopian.com/posts/my-attempt-at-natural-gas-trading-algo?utm_source=website_share&amp;utm_campaign=my-attempt-at-natural-gas-trading-algo&amp;utm_medium=facebook" />
<input type="hidden" name="social_post_image" id="social_post_image" value="external/logo-q-red-outline.png" />
<input type="hidden" name="social_post_author" id="social_post_author" value="Spencer Singleton" />
<div class='body-text'>
<div class='body-text-container post-body'><p>Been working in this for a little bit cant quite get it to run  take a look at what I have so far.  </p>

<pre><code>def rename_col(df):  
    log.info(df.head())  
    return df

def initialize(context):  
    context.investment_size = (context.portfolio.cash / 10.0)  
    #Invest 10 percent of total cash  
    context.stop_loss_pct = 0.995  
    #Use Stop Loss  
    set_symbol_lookup_date(&#39;2013-10-01&#39;)  
#Call Zonal Usage CSV  
fetch_csv(&#39;https://td2ec2in4mv1euwest.teamdrive.net/primespace/59358/public/UH34BU000Z7FX005394VPP9272UGRRD6/Combined%20Weather%20Data.csv?P1RID=1&#39;,  
        date_column=&#39;Date&#39;,  
        pre_func = rename_col,  
        date_format = &#39;%m/%d/%y&#39;)  
context.stock = symbol(&#39;UNG&#39;)  
def handle_data(context, data):  
    cash = context.portfolio.cash  
    try:  
        for s in data  
            if &#39;Casio Usage&#39; in data[s]:  
                Casio = data[s][&#39;Casio Usage&#39;]  
                current_postion = context.portfolio.positions[s].amount  
                current_price = data[s].price  
#If Power Usage is high from temperature data then UNG will trade at a premium  
if (Casio &gt; 650) and (current_postion == 0):  
                    if cash &gt; context.investment_size:  
                        order_value(s,context.investment_size, style=StopOrder(context.stop_loss*current_price))

#If Power Usage is low then UNG should trade at a discount and we should exit position  
                elif (Casio &lt;= 650) and (current_position &gt; 0):  
                    order_target(s,0)  
     except Exception as e:  
        print(str(e))  
</code></pre>
</div>
</div>
</div>

</div>

<div class='container page-container post-atomic'>
<div class='section-header reply-header'>
<div class='reply-title'>24 responses</div>
</div>
<div class='replies'>
<div class='post-container response-container' data-post-id='559ea45b2385825cac000123' id='559ea45b2385825cac000123'>
<a href='#559ea45b2385825cac000123'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/52b9b56c02cabe5dae000143'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e9388ae5102f3b152fa6225f955a29d4?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/52b9b56c02cabe5dae000143'>Alisa Deychman</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1436460126000' class='quanto-date posted-at response-posted-at' href='#559ea45b2385825cac000123'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Spencer, </p>

<p>I cleaned up your code a little bit (indentations, changed symbol to sid, and fixed some incorrect syntax). It&#39;s shared below. </p>

<p>Currently the algo won&#39;t run because the &quot;Symbols&quot; column in the CSV needs to be lowercase (&quot;symbols&quot;). Once you make that change, give it another whirl.</p>

<pre><code>def rename_col(df):  
    log.info(df.head())  
    return df

def initialize(context):  
    context.investment_size = (context.portfolio.cash / 10.0)  
    #Invest 10 percent of total cash  
    context.stop_loss_pct = 0.995  
    #Use Stop Loss  
    set_symbol_lookup_date(&#39;2013-10-01&#39;)  
    #Call Zonal Usage CSV  
    fetch_csv(&#39;https://td2ec2in4mv1euwest.teamdrive.net/primespace/59358/public/UH34BU000Z7FX005394VPP9272UGRRD6/Combined%20Weather%20Data.csv?P1RID=1&#39;,  
        date_column=&#39;Date&#39;,  
        pre_func = rename_col,  
        date_format = &#39;%m/%d/%y&#39;)  
    context.stock = sid(33697)  
def handle_data(context, data):  
    cash = context.portfolio.cash  
    try:  
        for s in data: #loop through the stocks  
            if &#39;Casio Usage&#39; in data[s]:  
                Casio = data[s][&#39;Casio Usage&#39;]  
                current_postion = context.portfolio.positions[s].amount  
                current_price = data[s].price  
            #If Power Usage is high from temperature data then UNG will trade at a premium  
            if (Casio &gt; 650) and (current_postion == 0):  
                if cash &gt; context.investment_size:  
                        order_value(s,context.investment_size, style=StopOrder(context.stop_loss*current_price))

           #If Power Usage is low then UNG should trade at a discount and we should exit position  
            elif (Casio &lt;= 650) and (current_position &gt; 0):  
                    order_target(s,0)  
    except Exception as e:  
        print(str(e))  
</code></pre>
</div>
<div class='disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='559ebd742385822eba0001e0' id='559ebd742385822eba0001e0'>
<a href='#559ebd742385822eba0001e0'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/54e7587fbb6b2a6f0400044a'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/2f7802756e1eb517cc09c68c0cec8ef9?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/54e7587fbb6b2a6f0400044a'>Spencer Singleton</a>
</div>
<a UTCms='1436466552000' class='quanto-date posted-at response-posted-at' href='#559ebd742385822eba0001e0'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Wasn&#39;t sure if you meant the actual symbol or just the symbol title.  Regardless I changed both and am still getting the &quot;symbol error message,&quot; even after trying both changes.  Is there anything else I can try to fix this problem?  On a side note I fixed the csv to be more dynamic so I can simplify the algo logic.</p>

<blockquote>
<p>KeyError: &#39;symbol&#39;<br>
There was a runtime error on line 15.</p>
</blockquote>

<pre><code>def rename_col(df):  
    log.info(df.head())  
    return df

def initialize(context):  
    context.investment_size = (context.portfolio.cash / 10.0)  
    #Invest 10 percent of total cash  
    context.stop_loss_pct = 0.995  
    #Use Stop Loss  
    set_symbol_lookup_date(&#39;2013-10-01&#39;)  
    #Call Zonal Usage CSV  
    fetch_csv(&#39;https://td2ec2in4mv1euwest.teamdrive.net/primespace/59358/public/2CN6QU800Z7FX00539QK0UNKT0NQAUQ2/Combined%20Weather%20Data%20Updated%20(1)%20(2).csv?P1RID=1&#39;,  
        date_column=&#39;Date&#39;,  
        pre_func = rename_col,  
        date_format = &#39;%m/%d/%y&#39;)  
    context.stock = sid(33697)  
def handle_data(context, data):  
    cash = context.portfolio.cash  
    try:  
        for s in data: #loop through the stocks  
            if &#39;Total Usage&#39; in data[s]:  
                Total_Usage = data[s][&#39;Total Usage&#39;]  
                current_postion = context.portfolio.positions[s].amount  
                current_price = data[s].price  
            #If Power Usage is high from temperature data then UNG will trade at a premium  
            if (Total_Usage &gt; 4500) and (current_postion == 0):  
                if cash &gt; context.investment_size:  
                        order_value(s,context.investment_size, style=StopOrder(context.stop_loss*current_price))

           #If Power Usage is low then UNG should trade at a discount and we should exit position  
            elif (Total_Usage &lt;= 3000) and (current_position &gt; 0):  
                    order_target(s,0)  
    except Exception as e:  
        print(str(e))  

</code></pre>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='559eca4a57d1857611000246' id='559eca4a57d1857611000246'>
<a href='#559eca4a57d1857611000246'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/54e7587fbb6b2a6f0400044a'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/2f7802756e1eb517cc09c68c0cec8ef9?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/54e7587fbb6b2a6f0400044a'>Spencer Singleton</a>
</div>
<a UTCms='1436469837000' class='quanto-date posted-at response-posted-at' href='#559eca4a57d1857611000246'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Ok I fixed the issue I went back into teamdrive and uploaded and republished it and I got the thing running.  Results are mehhhh so far continuing to add perimeters (injection #&#39;s, sentiment data, and seasonal buying selling broken up into peak times summer &amp; winter and off peak spring &amp; fall will continue to post updates if anyone cares (and or has any additional ideas or want to help in some fashion just let me know).  Thank you for the help Alisa.  I love how no matter how slow I go in trying to troubleshoot  it is always the simple fixes that I seem to pass over unintentionally.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='559fd1b07f6fba8b7f0003f7' id='559fd1b07f6fba8b7f0003f7'>
<a href='#559fd1b07f6fba8b7f0003f7'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/54e7587fbb6b2a6f0400044a'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/2f7802756e1eb517cc09c68c0cec8ef9?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/54e7587fbb6b2a6f0400044a'>Spencer Singleton</a>
</div>
<a UTCms='1436537267000' class='quanto-date posted-at response-posted-at' href='#559fd1b07f6fba8b7f0003f7'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Here are some results I gotten so far.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='559fd4686bd0250ec800039a' id='559fd4686bd0250ec800039a'>
<a href='#559fd4686bd0250ec800039a'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51d125a71144e60865000044'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/b7dd86784deedc047d5ad0fb30378bdd?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51d125a71144e60865000044'>Peter Bakker</a>
</div>
<a UTCms='1436537963000' class='quanto-date posted-at response-posted-at' href='#559fd4686bd0250ec800039a'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@spencer, rather than hardcoding the numbers of what is low and high, I would recommend using a zscore to normalise, then the zscore will determine what high and low is in the window you are looking. I ran a quick covariance and there is a relationship to be had but I think a model with WTI or Brent added would work (I didnt dive into it deeply but glancing it it seemed to be significant)  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='559fddb67f6fba6b4c00044c' id='559fddb67f6fba6b4c00044c'>
<a href='#559fddb67f6fba6b4c00044c'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/54e7587fbb6b2a6f0400044a'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/2f7802756e1eb517cc09c68c0cec8ef9?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/54e7587fbb6b2a6f0400044a'>Spencer Singleton</a>
</div>
<a UTCms='1436540345000' class='quanto-date posted-at response-posted-at' href='#559fddb67f6fba6b4c00044c'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Haven&#39;t really used zscore at all, but thanks for the input will defiantly look into it.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='559fef52fe4c0ca33f000517' id='559fef52fe4c0ca33f000517'>
<a href='#559fef52fe4c0ca33f000517'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/54e7587fbb6b2a6f0400044a'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/2f7802756e1eb517cc09c68c0cec8ef9?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/54e7587fbb6b2a6f0400044a'>Spencer Singleton</a>
</div>
<a UTCms='1436544852000' class='quanto-date posted-at response-posted-at' href='#559fef52fe4c0ca33f000517'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I am getting a werid buy order at the beginning of the backtest.  Also it doesn&#39;t seem to be reacting correctly to my buy and sell orders.  Can a fresh set of eyes look at it and let me know if they have any idea what is going wrong?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='55a3d5b02cc61cfc10000689' id='55a3d5b02cc61cfc10000689'>
<a href='#55a3d5b02cc61cfc10000689'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/54e7587fbb6b2a6f0400044a'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/2f7802756e1eb517cc09c68c0cec8ef9?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/54e7587fbb6b2a6f0400044a'>Spencer Singleton</a>
</div>
<a UTCms='1436800435000' class='quanto-date posted-at response-posted-at' href='#55a3d5b02cc61cfc10000689'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Ive been trying to add a Zscore to normalize and do the highs and lows as suggested, but I am having issues with getting it to run.  Could someone with more experience with Zscore give it a whirl?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='55a522c0f9a2906c7f000723' id='55a522c0f9a2906c7f000723'>
<a href='#55a522c0f9a2906c7f000723'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/54e7587fbb6b2a6f0400044a'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/2f7802756e1eb517cc09c68c0cec8ef9?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/54e7587fbb6b2a6f0400044a'>Spencer Singleton</a>
</div>
<a UTCms='1436885699000' class='quanto-date posted-at response-posted-at' href='#55a522c0f9a2906c7f000723'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>So for some reason my algo isn&#39;t buying and selling like it should.  Based on the criteria I put in it should go long and short 20 or 30 times and it only goes short once.  Not really sure why as I seem to be calling the data correctly.  It just for some reason isn&#39;t working correctly.  Anyone know what is going wrong?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='55a54cae56127751e30000dd' id='55a54cae56127751e30000dd'>
<a href='#55a54cae56127751e30000dd'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5150fd5e153d46083d0002df'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/0cd967e3fc329b28fddcc04bf5848e3c?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5150fd5e153d46083d0002df'>Gus Gordon</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1436896433000' class='quanto-date posted-at response-posted-at' href='#55a54cae56127751e30000dd'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Maybe your 
<code>
current_position &gt; 0  
</code> should instead be <code>
current_position &lt; 0  
</code> on line 37? That adds a few more trades. In general, it seems like your trading logic is set up kind of strangely. Having one if - elif ... - else clause usually makes more sense logically, so fixing that may help you at least have a better idea of what&#39;s happening. Also, cool idea, I like it when algos use statistics like power consumption!</p>
</div>
<div class='disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='55a559f4204b1bef2c000138' id='55a559f4204b1bef2c000138'>
<a href='#55a559f4204b1bef2c000138'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/54e7587fbb6b2a6f0400044a'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/2f7802756e1eb517cc09c68c0cec8ef9?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/54e7587fbb6b2a6f0400044a'>Spencer Singleton</a>
</div>
<a UTCms='1436899833000' class='quanto-date posted-at response-posted-at' href='#55a559f4204b1bef2c000138'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I am working on using zscore to define the buy and sell signals.  It is my first time using a zscore so I&#39;m just trial and erroring it.  This should give more dynamic buy and sell signals.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='55a68b8d2631e74b8d000114' id='55a68b8d2631e74b8d000114'>
<a href='#55a68b8d2631e74b8d000114'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/54e7587fbb6b2a6f0400044a'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/2f7802756e1eb517cc09c68c0cec8ef9?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/54e7587fbb6b2a6f0400044a'>Spencer Singleton</a>
</div>
<a UTCms='1436978064000' class='quanto-date posted-at response-posted-at' href='#55a68b8d2631e74b8d000114'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Here is my newest iteration of the code fixed it to make to code less less commented out more things still is only shorting once and not following the logic after it shorts it once.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='55a68df6e97db783a7000136' id='55a68df6e97db783a7000136'>
<a href='#55a68df6e97db783a7000136'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5259397aa09fa7a87d00011e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/b988ce14b6cc9090b0ac4a33ac70b2c0?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5259397aa09fa7a87d00011e'>André Pajak</a>
</div>
<a UTCms='1436978682000' class='quanto-date posted-at response-posted-at' href='#55a68df6e97db783a7000136'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>What is inside the <code>for</code> loop?  Look carefully.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='55a690777151a6fe86000115' id='55a690777151a6fe86000115'>
<a href='#55a690777151a6fe86000115'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/54e7587fbb6b2a6f0400044a'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/2f7802756e1eb517cc09c68c0cec8ef9?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/54e7587fbb6b2a6f0400044a'>Spencer Singleton</a>
</div>
<a UTCms='1436979324000' class='quanto-date posted-at response-posted-at' href='#55a690777151a6fe86000115'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>All the data in the CSV file im calling in is all I can see that in the for loop.  But regardless I&#39;m only using the Total_Usage during my order logic and that is where I believe the algo is going wrong correct?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='55a6d207f99802093c000159' id='55a6d207f99802093c000159'>
<a href='#55a6d207f99802093c000159'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5259397aa09fa7a87d00011e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/b988ce14b6cc9090b0ac4a33ac70b2c0?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5259397aa09fa7a87d00011e'>André Pajak</a>
</div>
<a UTCms='1436996106000' class='quanto-date posted-at response-posted-at' href='#55a6d207f99802093c000159'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>So if the long <code>if ... elif ... else</code> statement in lines 43 to 57 is outside the <code>for</code> loop, why are you surprised that your algo &quot;shorts only once&quot;?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='55a7d48fa101bfeac90006d9' id='55a7d48fa101bfeac90006d9'>
<a href='#55a7d48fa101bfeac90006d9'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/54e7587fbb6b2a6f0400044a'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/2f7802756e1eb517cc09c68c0cec8ef9?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/54e7587fbb6b2a6f0400044a'>Spencer Singleton</a>
</div>
<a UTCms='1437062289000' class='quanto-date posted-at response-posted-at' href='#55a7d48fa101bfeac90006d9'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Shouldn&#39;t it run through the logic everyday and take positions based on the data output?  And I can could see if I wasn&#39;t getting any orders, but I get a single short sell order then it never seem to recognize the criteria I set to exit and reenter position.  Maybe I am not understanding the for loop logic correctly should I be nesting the logic in the for loop I tried to do that, but it didn&#39;t seem to run when I tried to do that.  I also read up on for loop and didn&#39;t see anything that stood out to me.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='55a80f7923b25f63f60000e4' id='55a80f7923b25f63f60000e4'>
<a href='#55a80f7923b25f63f60000e4'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5259397aa09fa7a87d00011e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/b988ce14b6cc9090b0ac4a33ac70b2c0?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5259397aa09fa7a87d00011e'>André Pajak</a>
</div>
<a UTCms='1437077372000' class='quanto-date posted-at response-posted-at' href='#55a80f7923b25f63f60000e4'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>How many assets are you trying to trade?  Just one - the United States Natural Gas ETF (UNG), correct?  Then your <code>if</code> need not be inside the <code>for</code>.  (Most algorithms trade more assets, and then a typical pattern is: <code>for security in data:</code>, <code>if</code> that security meets some condition, <code>order</code> a buy or sell - the <code>if</code>s are nested inside the <code>for</code>.)</p>

<p>How often are you trying to trade?  In minute-mode back-testing, and in live trading, <code>handle_data</code> is called at the end of every trading minute, normally 9:31am to 4:00pm EST/EDT.   Quantopian&#39;s code fills a <code>data</code> dictionary based on what happened that minute, your code looks at it, checks the various <code>if</code> conditions, and executes the <code>order*</code> functions or not, according to what you wrote (and not necessarily what you meant).</p>

<p>The <code>order_target_percent</code> function is designed to make sure the specified asset becomes the specified fraction of your portfolio - by buying if you have less, selling if you have more, or doing nothing if you&#39;re already within one share&#39;s worth of your target.  This remains in force until another <code>order*</code> function call, for a nonzero number of shares, changes it.  Holdings are not automatically sold or covered at the end of the day, or for any other reason.  Once the conditions for buying (or shorting) were met and an order was sent, is it possible that they have never changed to the point of generating an exit signal?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='55a8103a3b22cdf86c0000a8' id='55a8103a3b22cdf86c0000a8'>
<a href='#55a8103a3b22cdf86c0000a8'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5259397aa09fa7a87d00011e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/b988ce14b6cc9090b0ac4a33ac70b2c0?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5259397aa09fa7a87d00011e'>André Pajak</a>
</div>
<a UTCms='1437077564000' class='quanto-date posted-at response-posted-at' href='#55a8103a3b22cdf86c0000a8'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Another thing: when are the conditions in lines 43 and 52 ever true?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='55a811ca6158fcbeec0000e1' id='55a811ca6158fcbeec0000e1'>
<a href='#55a811ca6158fcbeec0000e1'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5259397aa09fa7a87d00011e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/b988ce14b6cc9090b0ac4a33ac70b2c0?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5259397aa09fa7a87d00011e'>André Pajak</a>
</div>
<a UTCms='1437077965000' class='quanto-date posted-at response-posted-at' href='#55a811ca6158fcbeec0000e1'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Another thing: after you short in line 50, your &quot;current position&quot; becomes negative.  Where is there an <code>order_target_percent</code> or any other <code>order*</code> function that will change such a position?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='55b95efa3dbfaf8499000156' id='55b95efa3dbfaf8499000156'>
<a href='#55b95efa3dbfaf8499000156'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/547b425b4b3fc44d3b01b3c1'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f2a2b0eb239925f51c4f8106d2db7af4?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/547b425b4b3fc44d3b01b3c1'>Phil Vuollet</a>
</div>
<a UTCms='1438211840000' class='quanto-date posted-at response-posted-at' href='#55b95efa3dbfaf8499000156'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Good idea! I wonder how the language evaluates 1&lt;x&lt;1 is that always false? In other words, is it interpreted as AND or OR, if it&#39;s AND then there are troubles with those elifs.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='55b9652611cbbcdd38000267' id='55b9652611cbbcdd38000267'>
<a href='#55b9652611cbbcdd38000267'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5259397aa09fa7a87d00011e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/b988ce14b6cc9090b0ac4a33ac70b2c0?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5259397aa09fa7a87d00011e'>André Pajak</a>
</div>
<a UTCms='1438213416000' class='quanto-date posted-at response-posted-at' href='#55b9652611cbbcdd38000267'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>In Python, <code>1&lt;x&lt;1</code> is equivalent to <code>(1&lt;x) and (x&lt;1)</code>, except the value of <code>x</code> is only computed once.  Now, if <code>x</code> contains a real number (of type <code>float</code> or <code>int</code>), there are three possible cases:<br>
 - <code>x</code>1; then <code>x&lt;1</code> is <code>False</code>, and<code>(1&lt;x) and (x&lt;1)</code> is <code>False</code>.<br>
Thus, <code>1&lt;x&lt;1</code> is <code>False</code> for any numerical value of <code>x</code>.  No good.</p>

<p>Using such chained inequalities is a good idea, though, as long as all comparison operators point in the same direction, eg. <code>1&lt;=x&lt;2</code>; they are easier to write, easier to read, easier to understand, and run faster.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='55b9a67cf63cbe41eb0004f9' id='55b9a67cf63cbe41eb0004f9'>
<a href='#55b9a67cf63cbe41eb0004f9'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/547b425b4b3fc44d3b01b3c1'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f2a2b0eb239925f51c4f8106d2db7af4?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/547b425b4b3fc44d3b01b3c1'>Phil Vuollet</a>
</div>
<a UTCms='1438230143000' class='quanto-date posted-at response-posted-at' href='#55b9a67cf63cbe41eb0004f9'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I thought so. But in the iteration of the code, lines 43 and 52 are (1750 &gt; x &gt; 4800) and (3300 &gt;= x &gt;= 3900) and as you @André stated that would never be true.  Possibly the OP meant to say  </p>

<pre><code>    elif((x &lt;= 3300 or x &gt;= 3900)and ...  
</code></pre>

<p>Better still, from a readability perspective<br>
<code>
    elif(isModerateTemp(x) and positionIsOpen(context))  
        closePosition(context);  
</code>
Etc etc...with those functions defined in below in the same file.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='55ba5b5d89ab8148db000c3e' id='55ba5b5d89ab8148db000c3e'>
<a href='#55ba5b5d89ab8148db000c3e'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5259397aa09fa7a87d00011e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/b988ce14b6cc9090b0ac4a33ac70b2c0?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5259397aa09fa7a87d00011e'>André Pajak</a>
</div>
<a UTCms='1438276448000' class='quanto-date posted-at response-posted-at' href='#55ba5b5d89ab8148db000c3e'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Exactly.  But I wanted the author to look and find it, and correct it himself.  I don&#39;t mind helping people learn; but I don&#39;t support people writing sloppy code and throwing it at us to tie their loose ends for free.  I can write all the code you need if you want me to, but not on these terms.</p>

<p>Good suggestion, putting conditions into separate functions.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='55ba6b134521892cae000226' id='55ba6b134521892cae000226'>
<a href='#55ba6b134521892cae000226'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/54e7587fbb6b2a6f0400044a'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/2f7802756e1eb517cc09c68c0cec8ef9?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/54e7587fbb6b2a6f0400044a'>Spencer Singleton</a>
</div>
<a UTCms='1438280472000' class='quanto-date posted-at response-posted-at' href='#55ba6b134521892cae000226'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I ended up fixing it 2 weeks ago by changing it to the correct logic</p>

<pre><code>elif (3300 &gt;= Total_Usage or Total_Usage &gt;= 3900) and (current_position &lt; 0):  
</code></pre>

<p>and I understood that when I am shorting the current_position will actually be x &lt; 0 so for it to ever cover the short I needed to make it check to see if <code>
 current_position &lt; 0  
</code>
as opposed as to what I was trying previously which was<br>
<code>
 current_position &gt; 0  
</code>
which works when to algo is long, but when short doesn&#39;t work.  </p>
</div>
</div>
</div>

</div>
<div class='sign-in-please'>
Please <a href='/signin?return_to=/posts/my-attempt-at-natural-gas-trading-algo'>sign in</a> or
<a href='/users/sign_up?redirect_to=/posts/my-attempt-at-natural-gas-trading-algo'>join Quantopian</a> to
post a reply.
</div>
</div>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId: "550580758292093",
      status: false,
      cookie: true,
      xfbml: true
    });
  };
  
  (function(d, debug){
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) {return;}
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
    ref.parentNode.insertBefore(js, ref);
  }(document, /*debug*/ false));
  
  window.twttr = (function (d,s,id) {
    var t, js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return; js=d.createElement(s); js.id=id;
    js.src="//platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs);
    return window.twttr || (t = { _e: [], ready: function(f){ t._e.push(f) } });
  }(document, "script", "twitter-wjs"));
</script>
<script>
  $(document).ready(function () {
    quanto.instances.pm = new quanto.PostManager(false)
  });
</script>

<div class='login-footer'>
<div class='container'>
<div class='login-footer-text'>
Become an expert in quant finance through Quantopian's hands-on education.
</div>
<div class='login-footer-button'>
<button class='btn btn-v2 stroke join-modal-link mixpanel-button' data-event='anon join footer click posts' data-mixpanel='click'>
Join Now
</button>
</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='error-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'>Error</span>
</div>
<div class='modal-body body-content'>
<p>Sorry, something went wrong.  Try again or contact us by <a class='feedback-link'>sending feedback</a>.</p>
</div>
<div class='modal-footer'>
<button class='btn btn-v2 blue action-button' data-dismiss='modal' href='#'>Close</button>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='confirmation-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'></span>
</div>
<div class='modal-body body-content'></div>
<div class='modal-footer'>
<div class='pull-right'>
<button class='btn btn-v2 border' data-dismiss='modal'>Cancel</button>
<button class='btn btn-v2 blue action-button' data-dismiss='modal'></button>
</div>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='message-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'></span>
</div>
<div class='modal-body body-content'></div>
<div class='modal-footer'>
<button class='btn btn-v2 blue action-button' data-dismiss='modal' id='message-modal-close'>Close</button>
</div>

</div>
</div>
</div>

<div class='always-bootstrap3-modals'>
<div class='fade modal quanto-modal-v2' id='join-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header visible-small'>
<span class='title'>
Join Quantopian.  It's Free!
</span>
<div class='modal-x-out visible-xs'></div>
</div>
<div class='modal-body'>
<div class='flex-wrap'>
<div class='join-left-pane hidden-small'>
<div class='margin_30l'>
<div class='join-hero-text'>
Join Quantopian.  It's Free!
</div>
<div class='join-benefits'>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image code'></div>
</div>
<div class='join-text'>
Use our research platform, backtester, and dozens of clean data sets.
</div>
</div>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image learn'></div>
</div>
<div class='join-text'>
Learn with our hands-on education and community forums.
</div>
</div>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image win'></div>
</div>
<div class='join-text'>
Enter to win cash prizes in our contest.
</div>
</div>
</div>
<div class='hidden saved-reminder'>
Don't worry, all your work is already saved.
</div>
</div>
</div>
<div class='join-right-pane'>
<div class='hidden-small'>
<div class='button-pane'>
<a class="button btn-v2 user-form-btn" href="/signin">Already a Quantopian member?</a>
</div>
</div>
<div class='visible-small'>
<div class='already-member'>
<a href='/signin'>Already a Quantopian member?</a>
</div>
</div>
<form class="quanto-form-v2" id="new-user-modal-form" action="/users" accept-charset="UTF-8" data-remote="true" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><div class='error-message hidden'>
<div class='message'></div>
</div>
<div class='name-group'>
<div class='form-group inline-block'>
<label for="user_firstname">First Name</label>
<input class="form-control firstname" pattern=".*" required="required" autocomplete="off" autofocus="autofocus" type="text" name="user[firstname]" id="user_firstname" />
</div>
<div class='form-group inline-block'>
<label for="user_lastname">Last Name</label>
<input class="form-control" value="" pattern=".*" required="required" autocomplete="off" type="text" name="user[lastname]" id="user_lastname" />
</div>
</div>
<div class='form-group'>
<label for="user_email">Email</label>
<input class="form-control" value="" pattern=".*" required="required" autocomplete="off" type="email" name="user[email]" id="user_email" />
</div>
<div class='form-group'>
<label for="user_password">Password</label>
<input autocomplete="off" class="form-control" pattern=".*" required="required" type="password" name="user[password]" id="user_password" />
</div>
<div class='checkbox eula'>
<input id='eula-checkbox' type='checkbox'>
<div class='quanto-checkbox'></div>
<label for='eula-checkbox' id='checkbox-label'>I accept the <a href='/policies/terms' target='_blank'>Terms Of Use</a> and <a href='/policies/privacy' target='_blank'>Privacy Policy</a>.</label>
</div>
<div class='checkbox mailchimp-box'>
<input name="user[allow_marketing_emails]" type="hidden" value="0" /><input type="checkbox" value="1" name="user[allow_marketing_emails]" id="user_allow_marketing_emails" />
<div class='quanto-checkbox'></div>
<label for='user_allow_marketing_emails'>
Send me email updates with the latest news from the Quantopian community. We send these emails about once a month.
</label>
</div>
<div class='button-row'>
<button class='btn-v2 blue full' data-redirect-to='/tutorials/getting-started' id='sign-up-button' type='Submit'>Join Quantopian</button>
</div>
</form></div>
</div>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='feedback-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title'>Contact Support</span>
</div>
<div class='modal-body'>
<form class='anon-user controls quanto-form-v2' id='feedback-form'>
<div class='feedback-inputs'>
<div class='form-group'>
<input autofocus class='form-control' id='feedback-email-box' name='email' placeholder='Email Address' type='email'>
</div>
<div class='form-group'>
<input class='form-control' id='feedback-name-box' placeholder='Name' type='name'>
</div>
<div class='form-group'>
<textarea class='form-control' id='feedback-box' name='feedback' placeholder='What may we help you with?' rows='10'></textarea>
</div>
</div>
</form>
<form class='hidden quanto-form-v2 select-resource-area'>
<div class='select-step select-type-step'>
<div class='form-group'>
<select class='form-control select-resource-dropdown' title='Select the item you need help with'>
<option value='algorithm'>Algorithm</option>
<option value='backtest'>Backtest</option>
<option value='notebook'>Notebook</option>
</select>
</div>
</div>
<div class='select-step loading-area hidden'>
<div class='loading-text'>
Loading...
</div>
</div>
<div class='select-step empty-list-area hidden'>
<div class='back-button'>Go Back</div>
<div class='empty-text'>
No <span class='empty-list-resource-text'>algorithms</span> found
</div>
</div>
<div class='select-algo-area select-step hidden'>
<div class='back-button'>Go Back</div>
<table class='select-algo-table select-item-table'>
<thead>
<tr>
<th>
Algorithm
<span class='sort-icon'></span>
</th>
<th>
Last Modified
<span class='sort-icon'></span>
</th>
</tr>
</thead>
</table>
</div>
<div class='select-backtest-area select-step hidden'>
<div class='back-button'>Go Back</div>
<table class='select-backtest-table select-item-table'>
<thead>
<tr>
<th>
Backtest
<span class='sort-icon'></span>
</th>
<th>
Started At
<span class='sort-icon'></span>
</th>
<th>
Overall Return
<span class='sort-icon'></span>
</th>
<th>
Status
<span class='sort-icon'></span>
</th>
</tr>
</thead>
</table>
</div>
<div class='select-notebook-area select-step hidden'>
<div class='back-button'>Go Back</div>
<div class='subtitle select-cell-step'>
Choose a cell to use as the preview for this notebook:
</div>
<div class='iframe-wrapper'>
<iframe class='notebook-list-iframe slow-fade' src=''></iframe>
</div>
<div class='progress-area slow-fade in'>
<div class='progress-container'>
<div class='progress-title'>
<div class='quanto-loader gray'></div>
</div>
</div>
</div>
<div class='maintenance-area'>
<div class='error-container'>
<div class='row'>
<div class='col-md-14 msg-title h1'>
Sorry, research is currently undergoing maintenance.
</div>
</div>
<div class='row'>
<div class='col-md-14 msg-subtitle'>
Please check back shortly. If the maintenance period lasts longer than expected,
you can find updates on <a href='https://status.quantopian.com/'>status.quantopian.com</a>.
</div>
</div>

</div>
</div>
<div class='error-area'>
<div class='error-container'>
<div class='row'>
<div class='col-md-14 msg-title h1'>
Sorry, something went wrong on our end.
</div>
</div>
<div class='row'>
<div class='col-md-14 msg-subtitle'>
Please try again or contact <a class='open-feedback-link'>Quantopian support</a>.
</div>
</div>

</div>
</div>

</div>
<div class='selected-item-area select-step hidden'>
<div class='selected-item-group form-group'>
<div class='selected-item-control'>
<input class='disabled form-control selected-item-box' type='text'>
<span class='secure-icon icon'></span>
<button class='btn change change-primary-item-button change-selection-button new-btn transparent' type='button'>
<span class='refresh-icon icon'></span>
</button>
</div>
<div class='selected-backtest-control'>
<input class='disabled form-control selected-backtest-box' type='text'>
<span class='secure-icon icon'></span>
<button class='btn change-backtest-button change-selection-button new-btn transparent' type='button'>
<span class='refresh-icon icon'></span>
</button>
</div>
</div>
<div class='checkbox-group form-group'>
<div class='checkbox give-permission'>
<input class='give-permission-checkbox' id='feedback-give-permission-checkbox' type='checkbox'>
<div class='quanto-checkbox'></div>
<label for='feedback-give-permission-checkbox'>
I permit Quantopian to view <span class='item-type-text'>this algorithm,
backtest or notebook and their imported datasets</span> for the purpose of providing support.
</label>
</div>
</div>
</div>
</form>

<div class='loading-step hidden'>
<div class='loading-text'>
Submitting your support ticket...
</div>
</div>
<div class='success-step invisible'>
<h2 class='title center'>
You've successfully submitted a support ticket.
</h2>
<p>
Our support team will be in touch soon.
</p>
<div class='confirmation-image'></div>
</div>
</div>
<div class='modal-footer'>
<button class='btn-v2 blue' id='send-feedback-button'>Send</button>
<div class='error-message hidden'>
Error submitting support request.
</div>
</div>

</div>
</div>
</div>

</div>
</div>
<div class='footer' id='quanto-footer-container'>
<div class='container'>
<div class='row header-row'>
<div class='col-sm-fourth span3'>
<img class='async-image logotype-image' data-src='https://qf.quantopian.com/assets/logos/logo-q-full-b23bda5ac757691b9259d396d0dfef91567165868b8c955a836649686e6d2248.svg'>
</div>
<div class='col-sm-fourth span3'></div>
<div class='col-sm-fourth span3'></div>
<div class='col-sm-fourth span3'>
<div class='feedback-email'>
Need help?
<a href="/cdn-cgi/l/email-protection#d6b0b3b3b2b4b7b5bd96a7a3b7b8a2b9a6bfb7b8f8b5b9bb">Contact support.</a>
</div>
</div>
</div>
<div class='row'>
<div class='col-sm-fourth span3'>
<div class='header'>Company</div>
<div class='footer-row'>
<a href='/about'>About</a>
</div>
<div class='footer-row'>
<a href='/academia'>Academia</a>
</div>
<div class='footer-row'>
<a href='/jobs'>Careers</a>
</div>
<div class='footer-row'>
<a href='/posts'>Community</a>
</div>
<div class='footer-row'>
<a href='/events'>Events</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Learn &amp; Support</div>
<div class='footer-row'>
<a href='/faq'>FAQ</a>
</div>
<div class='footer-row'>
<a href='/tutorials/getting-started'>Getting Started</a>
</div>
<div class='footer-row'>
<a href='/docs'>Documentation</a>
</div>
<div class='footer-row'>
<a href='/tutorials'>Tutorials</a>
</div>
<div class='footer-row'>
<a href='/lectures'>Lectures</a>
</div>
<div class='footer-row'>
<a href='/opensource'>Open Source</a>
</div>
<div class='footer-row'>
<a href='https://status.quantopian.com/'>Site Status</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Notices</div>
<div class='footer-row'>
<a href='/policies/terms'>Terms of Use</a>
</div>
<div class='footer-row'>
<a href='/policies/privacy'>Privacy Policy</a>
</div>
<div class='footer-row'>
<a href='/security'>Security</a>
</div>
<div class='footer-row'>
<a href='/policies/code-of-conduct'>Code of Conduct</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Follow Us</div>
<div class='footer-row'>
<a href='https://www.twitter.com/quantopian'>Twitter</a>
</div>
<div class='footer-row'>
<a href='https://www.facebook.com/quantopian'>Facebook</a>
</div>
<div class='footer-row'>
<a href='https://www.linkedin.com/company/quantopian'>LinkedIn</a>
</div>
<div class='footer-row'>
<a href='https://www.youtube.com/channel/UC606MUq45P3zFLa4VGKbxsg'>YouTube</a>
</div>
</div>
</div>
<div class='row'>
<div class='col-xs-14 span12'>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian.
</p>
<p>
In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>

</div>
</div>
</div>
</div>
</div>
<div class='mobile-footer'>
<div class='mobile-nav-category main-links'>
<div class='mobile-nav-row-footer'>
<a href='/about'>About Quantopian</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/jobs'>Careers</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/posts'>Community</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/events'>Events</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/docs'>Documentation</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/academia'>Academia</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/lectures'>Lectures</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://status.quantopian.com/'>Status</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.facebook.com/quantopian'>Facebook</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.twitter.com/quantopian'>Twitter</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.linkedin.com/company/quantopian'>LinkedIn</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.youtube.com/channel/UC606MUq45P3zFLa4VGKbxsg'>YouTube</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/policies/terms'>Terms of Use</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/policies/privacy'>Privacy Policy</a>
</div>
</div>
<div class='mobile-nav-category'>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian.
</p>
<p>
In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>

</div>
</div>
</div>

</div>
<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script></body>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', "UA-8519877-1", {
    cookieDomain: "quantopian.com"
  });
  ga('set', 'dimension1', 'session_5f9dc7425d387f00077e48e4');
  
  ga('send', 'pageview');
</script>

<input type="hidden" name="is_mac" id="is_mac" value="false" />
<input type="hidden" name="mp" id="mp" value="75873953cd404bcc1da88a55ff51e3b4" />
<script>
  (function(e,a){if(!a.__SV){var b=window;try{var c,l,i,j=b.location,g=j.hash;c=function(a,b){return(l=a.match(RegExp(b+"=([^&]*)")))?l[1]:null};g&&c(g,"state")&&(i=JSON.parse(decodeURIComponent(c(g,"state"))),"mpeditor"===i.action&&(b.sessionStorage.setItem("_mpcehash",g),history.replaceState(i.desiredHash||"",e.title,j.pathname+j.search)))}catch(m){}var k,h;window.mixpanel=a;a._i=[];a.init=function(b,c,f){function e(b,a){var c=a.split(".");2==c.length&&(b=b[c[0]],a=c[1]);b[a]=function(){b.push([a].concat(Array.prototype.slice.call(arguments,
  0)))}}var d=a;"undefined"!==typeof f?d=a[f]=[]:f="mixpanel";d.people=d.people||[];d.toString=function(b){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);b||(a+=" (stub)");return a};d.people.toString=function(){return d.toString(1)+".people (stub)"};k="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
  for(h=0;h<k.length;h++)e(d,k[h]);a._i.push([b,c,f])};a.__SV=1.2;b=e.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";c=e.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}})(document,window.mixpanel||[]);
  mixpanel.init("75873953cd404bcc1da88a55ff51e3b4");
</script>
<script>
  mixpanel.track("view page", {"page": window.location.pathname});
</script>
</html>
