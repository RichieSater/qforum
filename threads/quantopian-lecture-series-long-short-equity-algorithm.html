<!DOCTYPE html>
<html>
<head>
<link href='i1.wp.com' rel='dns-prefetch'>
<link href='i2.wp.com' rel='dns-prefetch'>
<link href='i3.wp.com' rel='dns-prefetch'>
<meta content='2HgX9mcLHaPOX6sfaaAkhWtblhEB9yUNw4l6l46e1k4' name='google-site-verification'>
<link rel="shortcut icon" type="image/x-icon" href="external/favicon-q-ac1a76f2c200e9026b5b1147519bb4fab6256910588b831e2411bc6c7c1218c3.png" />
<title>
Quantopian Lecture Series: Long-Short Equity Algorithm
</title>
<meta content='EDIT: The backtest originally shared with this post was replaced with a more efficient version. The logic wasn&#39;t changed but the code was optimized to run more quickly. I worked with James Christopher to create an updated version of the algorithm from this post: https://www.quantopian.com/posts/long-short-pipeline-multi-factor This new version will be attached to the lecture series as the example long-short equity algorithm. Long-short equity strategies have the advantage of trading many...' name='description'>
<link rel="stylesheet" media="all" href="external/quanto-base-bundle-e8eb6050172aa0d24124d5c24bac90b2cccd88b5b9c7742026c0e9efab038c6e.css" />
<link rel="stylesheet" media="all" href="external/quanto-posts-bundle-aab01368d3f82d8dafc94ee9eabb82e77dc8c9fbbffa952fdcdc744dfa523cf3.css" />
<script src="external/quanto_global-057218867db29d5768131af5d6fb3476cef098e7d9e655108befb903c7ee985e.js"></script>
<script src="external/posts_bundle-3dfd82fa469c393d752e461d837aec9e4e364ae39f49198e34a6626f2180fdf7.js"></script>
<link href='external/logo-q-180x180-0f5a6a439c99203ed4aea6f656e7604c543d287be43d8b17c7591c1131f09a59.png' rel='apple-touch-icon'>
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="0kIUDRXU8MFMD+k32YQ9GjE31yfvsT/iv/wH3Es21neuJGJAtyIiIvUSsAaWa5VuCbn0TpV9Kvk989y24XO0zA==" />
<meta content='width=device-width, initial-scale=1.0' name='viewport'>
<script>
//<![CDATA[
window.quanto_data={};quanto_data.bounce_back_params={"show_modal":null,"feedback_text":null};quanto_data.namespace="public";quanto_data.talib_info={"ADOSC":["Chaikin A/D Oscillator (Volume Indicators)",["fastperiod","3"],["slowperiod","10"]],"ADX":["Average Directional Movement Index (Momentum Indicators)",["timeperiod","14"]],"ADXR":["Average Directional Movement Index Rating (Momentum Indicators)",["timeperiod","14"]],"APO":["Absolute Price Oscillator (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["matype","0"]],"AROON":["Aroon (Momentum Indicators)",["timeperiod","14"]],"AROONOSC":["Aroon Oscillator (Momentum Indicators)",["timeperiod","14"]],"ATR":["Average True Range (Volatility Indicators)",["timeperiod","14"]],"BBANDS":["Bollinger Bands (Overlap Studies)",["timeperiod","5"],["nbdevup","2"],["nbdevdn","2"],["matype","0"]],"BETA":["Beta (Statistic Functions)",["timeperiod","5"]],"CCI":["Commodity Channel Index (Momentum Indicators)",["timeperiod","14"]],"CMO":["Chande Momentum Oscillator (Momentum Indicators)",["timeperiod","14"]],"CORREL":["Pearson's Correlation Coefficient (r) (Statistic Functions)",["timeperiod","30"]],"DEMA":["Double Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"DX":["Average Directional Movement Index (Momentum Indicators)",["timeperiod","14"]],"EMA":["Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"KAMA":["Kaufman Adaptive Moving Average (Overlap Studies)",["timeperiod","30"]],"LINEARREG":["Linear Regression (Statistic Functions)",["timeperiod","14"]],"LINEARREG_ANGLE":["Linear Regression Angle (Statistic Functions)",["timeperiod","14"]],"LINEARREG_INTERCEPT":["Linear Regression Intercept (Statistic Functions)",["timeperiod","14"]],"LINEARREG_SLOPE":["Linear Regression Slope (Statistic Functions)",["timeperiod","14"]],"MA":["Moving average (Overlap Studies)",["timeperiod","30"],["matype","0"]],"MACD":["Moving Average Convergence/Divergence (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["signalperiod","9"]],"MACDEXT":["MACD with controllable MA type (Momentum Indicators)",["fastperiod","12"],["fastmatype","0"],["slowperiod","26"],["slowmatype","0"],["signalperiod","9"],["signalmatype","0"]],"MACDFIX":["Moving Average Convergence/Divergence Fix 12/26 (Momentum Indicators)",["signalperiod","9"]],"MAX":["Highest values over a specified period (Math Operators)",["timeperiod","30"]],"MAXINDEX":["Index of highest value over a specified period (Math Operators)",["timeperiod","30"]],"MFI":["Money Flow Index (Momentum Indicators)",["timeperiod","14"]],"MIDPOINT":["Midpoint over period (Overlap Studies)",["timeperiod","14"]],"MIDPRICE":["Midpoint Price over period (Overlap Studies)",["timeperiod","14"]],"MIN":["Lowest value over a specified period (Math Operators)",["timeperiod","30"]],"MININDEX":["Index of lowest value over a specified period (Math Operators)",["timeperiod","30"]],"MINMAX":["Lowest and highest values over a specified period (Math Operators)",["timeperiod","30"]],"MINMAXINDEX":["Indexes of lowest and highest values over a specified period (Math Operators)",["timeperiod","30"]],"MINUS_DI":["Minus Directional Indicator (Momentum Indicators)",["timeperiod","14"]],"MINUS_DM":["Minus Directional Movement (Momentum Indicators)",["timeperiod","14"]],"MOM":["Momentum (Momentum Indicators)",["timeperiod","10"]],"NATR":["Normalized Average True Range (Volatility Indicators)",["timeperiod","14"]],"PLUS_DI":["Plus Directional Indicator (Momentum Indicators)",["timeperiod","14"]],"PLUS_DM":["Plus Directional Movement (Momentum Indicators)",["timeperiod","14"]],"PPO":["Percentage Price Oscillator (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["matype","0"]],"ROC":["Rate of change: ((price/prevPrice)-1)*100 (Momentum Indicators)",["timeperiod","10"]],"ROCP":["Rate of change Percentage: (price-prevPrice)/prevPrice (Momentum Indicators)",["timeperiod","10"]],"ROCR":["Rate of change ratio: (price/prevPrice) (Momentum Indicators)",["timeperiod","10"]],"ROCR100":["Rate of change ratio 100 scale: (price/prevPrice)*100 (Momentum Indicators)",["timeperiod","10"]],"RSI":["Relative Strength Index (Momentum Indicators)",["timeperiod","14"]],"SMA":["Simple Moving Average (Overlap Studies)",["timeperiod","30"]],"STDDEV":["Standard Deviation (Statistic Functions)",["timeperiod","5"],["nbdev","1"]],"STOCH":["Stochastic (Momentum Indicators)",["fastk_period","5"],["slowk_period","3"],["slowk_matype","0"],["slowd_period","3"],["slowd_matype","0"]],"STOCHF":["Stochastic Fast (Momentum Indicators)",["fastk_period","5"],["fastd_period","3"],["fastd_matype","0"]],"STOCHRSI":["Stochastic Relative Strength Index (Momentum Indicators)",["timeperiod","14"],["fastk_period","5"],["fastd_period","3"],["fastd_matype","0"]],"T3":["Triple Exponential Moving Average (T3) (Overlap Studies)",["timeperiod","5"],["vfactor","0.7"]],"TEMA":["Triple Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"TRIMA":["Triangular Moving Average (Overlap Studies)",["timeperiod","30"]],"TRIX":["1-day Rate-Of-Change (ROC) of a Triple Smooth EMA (Momentum Indicators)",["timeperiod","30"]],"TSF":["Time Series Forecast (Statistic Functions)",["timeperiod","14"]],"ULTOSC":["Ultimate Oscillator (Momentum Indicators)",["timeperiod1","7"],["timeperiod2","14"],["timeperiod3","28"]],"VAR":["Variance (Statistic Functions)",["timeperiod","5"],["nbdev","1"]],"WILLR":["Williams' %R (Momentum Indicators)",["timeperiod","14"]],"WMA":["Weighted Moving Average (Overlap Studies)",["timeperiod","30"]]};quanto_data.nb_preview_url="https://notebooks-preview.prd.pub.quantopian.com";quanto_data.delay_nb_preview_load=false;
//]]>
</script>
<meta content='https://www.quantopian.com/posts/quantopian-lecture-series-long-short-equity-algorithm' property='og:url'>
<meta content='Quantopian Lecture Series: Long-Short Equity Algorithm' property='og:title'>

<input type="hidden" name="env" id="quanto-env" value="production" />
<meta content='550580758292093' property='fb:app_id'>
<meta content='https://www.quantopian.com/posts/quantopian-lecture-series-long-short-equity-algorithm' property='og:url'>
<meta content='https://media.quantopian.com/public/og-image-default.png' property='og:image'>
<meta content='Quantopian Lecture Series: Long-Short Equity Algorithm' property='og:title'>
<meta content='EDIT: The backtest originally shared with this post was replaced with a more efficient version. The logic wasn&#39;t changed but the code was optimized to run more quickly. I worked with James Christopher to create an updated version of the algorithm from this post: https://www.quantopian.com/posts/long-short-pipeline-multi-factor This new version will be attached to the lecture series as the example long-short equity algorithm. Long-short equity strategies have the advantage of trading many...' property='og:description'>
</head>
<script type='application/ld+json'>
  {
    "@context": "http://schema.org",
    "@type": "Organization",
    "url": "https://www.quantopian.com",
    "logo": "https://media.quantopian.com/logos/logo-q-press-red.png"
  }
</script>
<body class='' ontouchstart=''>
<div id='fb-root'></div>
<div class='wrapper'>
<div class='alert-v2 error'>
<div class='message'>
Quantopian's community platform is shutting down. Please read <a href="/posts/quantopians-community-services-are-closing">this post</a> for more information and <a href='/account#account'>download your code</a>.
</div>
</div>
<div class='navbar navbar-default navbar-static-top' id='app-navbar'>
<div class='container-fluid'>
<div class='navbar-header'>
<button class='navbar-toggle collapsed' data-target='#app-navbar-collapse' data-toggle='collapse'>
<span class='icon hamburger-menu'></span>
</button>
<a class='navbar-brand' href='/home'>
<img class='logo-image async-image' data-src='external/logo-q-white-b141ea6018546e5a4ecc3d10d8440ec076fc4385764e948b322828cc70950a76.svg'>
</a>
</div>
<div class='collapse navbar-collapse' id='app-navbar-collapse'>
<ul class='nav navbar-nav navbar-right'>
<li class='dropdown quanto-dropdown-new'>
<li>
<a class='header' href='/docs'>
Documentation
</a>
</li>
<li class='dropdown quanto-dropdown-new'>
<a class='header' data-toggle='dropdown' href='#'>
Learn
</a>
<ul class='dropdown-menu'>
<li>
<a class='mixpanel-button' data-event='main nav getting started clicked' href='/tutorials/getting-started'>Getting Started</a>
</li>
<li>
<a class='mixpanel-button' data-event='main nav tutorials clicked' href='/tutorials'>Tutorials</a>
</li>
<li>
<a class='mixpanel-button' data-event='main nav lectures clicked' href='/lectures'>Lectures</a>
</li>
</ul>
</li>
<li>
<a class='header' href='/posts' id='forum-link'>
Forum
</a>
</li>
<li>
<a class="header" href="/signin?return_to=/posts/quantopian-lecture-series-long-short-equity-algorithm">Log In</a>
</li>
</li>

</ul>
</div>
</div>
</div>
<script>
  $(document).ready(function () {
    quanto.instances.fm = new quanto.FeedbackManager();
    quanto.instances.hm = new quanto.headerManager();
  })
</script>


<div class='content content-area new-style'>
<input type="hidden" name="page-id" id="page-id" value="postatomic" />
<script src="external/MathJax.js?config=TeX-AMS_HTML-full.js,Safe" async="async"></script>
<div class='container page-container post-atomic'>
<input id='parent-post-id-val' type='hidden' value='56a4264fce7de5cf94000264'>
<div class='post-container' data-post-id='56a4264fce7de5cf94000264' id='56a4264fce7de5cf94000264'>
<div class='back-button back-to-community'>Back to Community</div>
<div class='post-title'>Quantopian Lecture Series: Long-Short Equity Algorithm</div>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5346083a839ff34e1400010a'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e2319a353b35eac99e765c836ba72044?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5346083a839ff34e1400010a'>Delaney Mackenzie</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<span class='posted-at'>edited </span>
<span UTCms='1453859419000' class='quanto-date posted-at'></span>
<div class='pull-right other-actions'>
<div class='dropup inline-block'>
<div class='dropdown share-control other-action-link'>
<div data-toggle='dropdown'>
<div class='share-image'></div>
Share
</div>
<ul class='dropdown-menu share-options-menu'>
<li>
<a class='share-row' href='https://twitter.com/intent/tweet?text=Quantopian Lecture Series: Long-Short Equity Algorithm&amp;url=https%3A%2F%2Fwww.quantopian.com%2Fposts%2Fquantopian-lecture-series-long-short-equity-algorithm%3Futm_source%3Dwebsite_share%26utm_campaign%3Dquantopian-lecture-series-long-short-equity-algorithm%26utm_medium%3Dtwitter&amp;via=quantopian'>
<i class='icon icon-twitter'></i>
Share on Twitter
</a>
</li>
<li>
<div class='share-row facebook-button'>
<i class='icon icon-facebook'></i>
Share on Facebook
</div>
</li>
<li>
<div class='share-row linkedin-button' data-share-url='https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Fwww.quantopian.com%2Fposts%2Fquantopian-lecture-series-long-short-equity-algorithm%3Futm_source%3Dwebsite_share%26utm_campaign%3Dquantopian-lecture-series-long-short-equity-algorithm%26utm_medium%3Dlinkedin&amp;title=Quantopian+Lecture+Series%3A+Long-Short+Equity+Algorithm+%28Delaney+Mackenzie%29&amp;source=Quantopian'>
<i class='icon icon-linkedin'></i>
Share on LinkedIn
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>

<div class='tags tag-row'>
<a class='tag mixpanel-button' data-event='tag click' data-mixpanel='Finance Theory' data-tag-id='55c50e7d8d4710ec6e000002' href='/posts/tag/Finance-Theory/newest'>Finance Theory</a>
<a class='tag mixpanel-button' data-event='tag click' data-mixpanel='Market Neutral' data-tag-id='55d33f6e3f6ba10061000002' href='/posts/tag/Market-Neutral/newest'>Market Neutral</a>
<a class='tag mixpanel-button' data-event='tag click' data-mixpanel='Statistics' data-tag-id='55d33f923f6ba1005d000001' href='/posts/tag/Statistics/newest'>Statistics</a>
<a class='tag mixpanel-button' data-event='tag click' data-mixpanel='Pipeline' data-tag-id='561525bcf252a59171000001' href='/posts/tag/Pipeline/newest'>Pipeline</a>
</div>
<input type="hidden" name="social_fb_post_link" id="social_fb_post_link" value="https://www.quantopian.com/posts/quantopian-lecture-series-long-short-equity-algorithm?utm_source=website_share&amp;utm_campaign=quantopian-lecture-series-long-short-equity-algorithm&amp;utm_medium=facebook" />
<input type="hidden" name="social_post_image" id="social_post_image" value="external/logo-q-red-outline.png" />
<input type="hidden" name="social_post_author" id="social_post_author" value="Delaney Mackenzie" />
<div class='body-text'>
<div class='body-text-container post-body'><p>EDIT: The backtest originally shared with this post was replaced with a more efficient version. The logic wasn&#39;t changed but the code was optimized to run more quickly.</p>

<p>I worked with James Christopher to create an updated version of the algorithm from this post:</p>

<p><a href="https://www.quantopian.com/posts/long-short-pipeline-multi-factor">https://www.quantopian.com/posts/long-short-pipeline-multi-factor</a></p>

<p>This new version will be attached to the lecture series as the example long-short equity algorithm. Long-short equity strategies have the advantage of trading many names, and are therefore statistically robust. They also have very high maximum capital thresholds, but also high minimum profitable capital thresholds. For a fuller explanation of these strategies, please see <a href="https://www.quantopian.com/lectures">Lecture 17</a></p>

<p>I recommend that folks try swapping in their own ranking methodology, as that is the key component. The rebalancing, ordering, and other components are fairly modular and should not need to be updated too much. If you have a new investment thesis or pricing model, that can be inserted simply by changing the custom factors and the ranking logic.</p>

<p>NOTE: This algorithm is not intended to perform consistently over all time periods. Ranking schemes have predictive lifecycles, and the goal of someone trying to use this algorithm to trade profitably now should be to find a predictive ranking scheme that will work in the future. For more information on this please see <a href="https://www.quantopian.com/lectures">Lecture 18</a>.</p>
</div>
</div>
<div class='disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>

</div>

<div class='container page-container post-atomic'>
<div class='section-header reply-header'>
<div class='reply-title'>76 responses</div>
</div>
<div class='replies'>
<div class='post-container response-container' data-post-id='56a49775511c6c0d860006f0' id='56a49775511c6c0d860006f0'>
<a href='#56a49775511c6c0d860006f0'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5673f0630a6bfa534b00000d'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/147dbb7c6d5789fd351a368486558c2a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5673f0630a6bfa534b00000d'>Giuseppe Moriconi</a>
</div>
<a UTCms='1453627259000' class='quanto-date posted-at response-posted-at' href='#56a49775511c6c0d860006f0'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thank you very much for this  template!<br>
I don&#39;t understand one thing:</p>

<p>In this example the number of stocks to be in the market with is 200 for  the long side and 200 for the short side, if i run the backtest both in minute mode and in daily mode the number of stocks creep up to more than 550 in a few years as so does the leverage that reaches values like 1.3 or so.</p>

<p>Isn&#39;t this an issue when we have to evaluate an algo that it&#39;s supposed to work with 400 stocks and instead we have more than 550-600 stocks in our portfolio?<br>
Thank you  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56a4aa45021c816f0d000555' id='56a4aa45021c816f0d000555'>
<a href='#56a4aa45021c816f0d000555'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5673f0630a6bfa534b00000d'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/147dbb7c6d5789fd351a368486558c2a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5673f0630a6bfa534b00000d'>Giuseppe Moriconi</a>
</div>
<a UTCms='1453632074000' class='quanto-date posted-at response-posted-at' href='#56a4aa45021c816f0d000555'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Answering my own question...<br>
I think that the problem is the number of delisted stocks, infact if i modify the before trading start method  adding this lines before updating the universe  </p>

<pre><code>context.output[&#39;end_date&#39;] = [stock.end_date for stock in context.output.index]  
context.output = context.output[(context.output[&#39;end_date&#39;] &gt; (get_datetime()+datetime.timedelta(days=365)))]  
</code></pre>

<p>i have a perfect flat line of num_positions wich is equal to 400 and of course longs and shorts are 200 each.<br>
So now the question is, does anyone have a way to filter the pipeline output reducing the risk of delisted stocks without introducing this lookahead error?</p>

<p>And by the way.. what happens to the backtest values when the portfolio includes so many delisted stocks?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56a4d443c39ae434720006c7' id='56a4d443c39ae434720006c7'>
<a href='#56a4d443c39ae434720006c7'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/54e159f70f3369eb9200019b'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/2a53f34ae7e99886508adf2b4d76bff2?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/54e159f70f3369eb9200019b'>Vladimir</a>
<span class='badge medal'></span>
</div>
<a UTCms='1453642825000' class='quanto-date posted-at response-posted-at' href='#56a4d443c39ae434720006c7'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Delaney Granizo-Mackenzie,</p>

<p>It took about 4 hours to run backtest of yours algo in minute mode on full market cycle with enabled default slippage model.<br>
Is the results in line with Quantopian goal?<br>
If not, there are two possible problems:<br>
Ether default slippage model is not realistic.<br>
Then Quantopian must  fix it first?<br>
Ether long-short strategy by this code practically not making any money.<br>
Then why Quantopian put it as the example  in lecture series?<br>
The leverage problem was mentioned by Giuseppe Moriconi.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56a4d868b261ae1c31000403' id='56a4d868b261ae1c31000403'>
<a href='#56a4d868b261ae1c31000403'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1453643883000' class='quanto-date posted-at response-posted-at' href='#56a4d868b261ae1c31000403'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Giuseppe,</p>

<p>The issue of de-listings has been festering for awhile (e.g. <a href="https://www.google.com/?gws_rd=ssl#q=quantopian+delisted">https://www.google.com/?gws_rd=ssl#q=quantopian+delisted</a>).  The sticky problem is that if a position is held in a stock after it is delisted, there is no way to close it out, so you end up with a build-up of dead stocks (since once the stock event stream shuts down, no transactions can be made).  The problem is not only with backtesting, but also with Quantopian live paper trading (since it is basically backtesting, but with a different data feed).</p>

<p>I have to think for the most part, de-listings are not without warning.  For example, I see that Nasdaq publishes relevant lists:  <a href="http://www.nasdaq.com/markets/go-public.aspx">http://www.nasdaq.com/markets/go-public.aspx</a>.  My hunch is that there is a regulatory process for de-listing that all exchanges follow.  For example, if  I look up BOULDER BRANDS, INC. on <a href="http://www.sec.gov/edgar/searchedgar/companysearch.html">http://www.sec.gov/edgar/searchedgar/companysearch.html</a>, I find that SEC Form 25 was filed on 2016-01-15, announcing the pending suspension.  So, if the Quantopian database incorporated such information, one could apply a filter without look-ahead bias.</p>

<p>One way to sorta avoid look-ahead bias is to apply your code, but change 
<code>days=365</code> to <code>days=10</code>.  This assumes that any de-listing conforms to the 10-day notification period on <a href="http://www.investopedia.com/terms/s/sec-form-25.asp">http://www.investopedia.com/terms/s/sec-form-25.asp</a> (presumably 10 calendar days and not trading days).  You could still end up getting stuck with a few dead stocks in your portfolio, if no trades occur for those stocks within the 10 day window.</p>

<p>The problem is, when live paper trading, I think you have to remove your de-listing filter, since <code>end_date</code> will never be 10 days out; it&#39;ll be the current day (or the next trading day...I&#39;m not sure which).  Hence, Q needs to supply a real fix.</p>

<p>This is one reason I&#39;ve been reluctant to start messing with pipeline, looking at 8000+ stocks.  As you found, there will be lots of de-listings, and Q provides no way to manage them.</p>

<p>Grant  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56a4ddcfb261ae1c3100042a' id='56a4ddcfb261ae1c3100042a'>
<a href='#56a4ddcfb261ae1c3100042a'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5673f0630a6bfa534b00000d'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/147dbb7c6d5789fd351a368486558c2a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5673f0630a6bfa534b00000d'>Giuseppe Moriconi</a>
</div>
<a UTCms='1453645267000' class='quanto-date posted-at response-posted-at' href='#56a4ddcfb261ae1c3100042a'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Grant and thank you.</p>

<p>The 10 days is a good choice also because with 365 you will never see how your algo would have performed in the last year :)</p>

<p>By the way , i  humbly suggest to the Q staff that stock piking algorithms like the ones based on pipeline should be equipped with some tools to handle these extreme situations because otherwyse you will never see the backtest of your idea, but you will see a completely different thing instead  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56a4e01cdcb4521ed9000015' id='56a4e01cdcb4521ed9000015'>
<a href='#56a4e01cdcb4521ed9000015'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1453645858000' class='quanto-date posted-at response-posted-at' href='#56a4e01cdcb4521ed9000015'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>For backtesting, set the end date of the backtest to account for your 
<code>days=10</code> setting.  Otherwise, I think you&#39;ll have no update of stocks in your universe at the end, which could skew your result.</p>

<p>You might also add some error checking code to print out any securities held in your portfolio after their end dates.  This way, any time a backtest is run, you can confirm that you didn&#39;t end up holding any dead securities.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56a51a45021c816f0d0008dc' id='56a51a45021c816f0d0008dc'>
<a href='#56a51a45021c816f0d0008dc'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5673f0630a6bfa534b00000d'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/147dbb7c6d5789fd351a368486558c2a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5673f0630a6bfa534b00000d'>Giuseppe Moriconi</a>
</div>
<a UTCms='1453660745000' class='quanto-date posted-at response-posted-at' href='#56a51a45021c816f0d0008dc'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>thanks again Grant, actually i think that if the goal of this post is to provide a robust template for long-short strategies, maybe it would be wise to include some pipeline &quot;best practice&quot; using stocks.end_date<br>
otherwise (maybe i am wrong but..) i suspect that the outcomes would be sistematically biased.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56a580bec4fa5b6c290001b0' id='56a580bec4fa5b6c290001b0'>
<a href='#56a580bec4fa5b6c290001b0'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/53dfa27b197bbb2516000159'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/51e4ba51c431ce2b4373006a33ade2aa?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/53dfa27b197bbb2516000159'>Karen Rubin</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1453686983000' class='quanto-date posted-at response-posted-at' href='#56a580bec4fa5b6c290001b0'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>The issue with delisted securities is something we are aware of and working to fix. We have a project that just kicked off to get them resolved without you having to resort to any look ahead bias. I can&#39;t commit to when it will be done, but it&#39;s in progress.  </p>
</div>
<div class='disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='56a5fb846c803423af000538' id='56a5fb846c803423af000538'>
<a href='#56a5fb846c803423af000538'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1453718408000' class='quanto-date posted-at response-posted-at' href='#56a5fb846c803423af000538'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Delaney,</p>

<p>A few questions/comments:</p>

<ol>
<li>Does your code filter out ETFs and such?  If I wanted to write a long-short strategy that avoided them and just traded in company stocks, how would I do it?<br></li>
<li>You have a bunch of &#39;from quantopian...&#39; imports.  This approach is a barrier to entry for using pipeline, since how does one know what to import?  Is it possible just to do 
<code>import pipeline</code> or something similar?<br></li>
<li>I&#39;m kinda surprised that the code takes 4 hours to run, as reported above.  If I&#39;m reading it correctly, you should only be doing number-crunching 12 times a year.  And you are only doing simple ranking.  Yet it takes approx. 2 minutes per call.  Am I missing something?  Where&#39;s the bottleneck?</li>
</ol>

<p>Grant  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56a6a98d2bd9458621000155' id='56a6a98d2bd9458621000155'>
<a href='#56a6a98d2bd9458621000155'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1453762962000' class='quanto-date posted-at response-posted-at' href='#56a6a98d2bd9458621000155'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>How does pipeline handle &quot;when issued&quot; stocks?  Say I wanted to exclude them?  How would I do it?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56a6c0d916b05c18f20001da' id='56a6c0d916b05c18f20001da'>
<a href='#56a6c0d916b05c18f20001da'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/53dfa27b197bbb2516000159'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/51e4ba51c431ce2b4373006a33ade2aa?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/53dfa27b197bbb2516000159'>Karen Rubin</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1453768927000' class='quanto-date posted-at response-posted-at' href='#56a6c0d916b05c18f20001da'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I have used the following code in before_trading_start to remove &quot;when issued&quot; stocks. </p>

<pre><code>context.output = pipeline_output(&#39;top500&#39;)  
top500 = context.output.fillna(0)  
top500[&#39;sid&#39;] = top500.index  
top500[&#39;symbol&#39;] = top500.sid.apply(lambda x: x.symbol)  
top500 = top500[top500.symbol.apply(lambda x: not x.endswith(&#39;_WI&#39;))]  
</code></pre>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='56a6c6582bd945e3aa0001f3' id='56a6c6582bd945e3aa0001f3'>
<a href='#56a6c6582bd945e3aa0001f3'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1453770334000' class='quanto-date posted-at response-posted-at' href='#56a6c6582bd945e3aa0001f3'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>My understanding is that &#39;_WI&#39; is insufficient.  Have you confirmed that all when-issued securities carry the _WI suffix and that no valid securities can carry it?</p>

<p>References:</p>

<p><a href="https://www.quantopian.com/posts/is-there-a-reliable-way-to-exclude-when-issued-securities-from-fundamentals-screens">https://www.quantopian.com/posts/is-there-a-reliable-way-to-exclude-when-issued-securities-from-fundamentals-screens</a><br>
<a href="https://www.quantopian.com/posts/exit-securities-which-no-longer-trade">https://www.quantopian.com/posts/exit-securities-which-no-longer-trade</a><br>
Sep 16, 2015, Simon comments: &#39;There are other symbols which end in WI but do not have an _, but which I still think are when-issued...&#39;  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56a8cd85e78dd3f1a3000561' id='56a8cd85e78dd3f1a3000561'>
<a href='#56a8cd85e78dd3f1a3000561'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5346083a839ff34e1400010a'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e2319a353b35eac99e765c836ba72044?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5346083a839ff34e1400010a'>Delaney Mackenzie</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1453903241000' class='quanto-date posted-at response-posted-at' href='#56a8cd85e78dd3f1a3000561'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I&#39;ve edited my original algorithm to a much more efficient version that finishes in ~20 minutes.  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='56a8d7a5f3e09f15470005c7' id='56a8d7a5f3e09f15470005c7'>
<a href='#56a8d7a5f3e09f15470005c7'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5394bbbdeee25762d2000102'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/0af1296044050e221f0e9a9593dee746?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5394bbbdeee25762d2000102'>Daniel C. Place</a>
</div>
<a UTCms='1453905833000' class='quanto-date posted-at response-posted-at' href='#56a8d7a5f3e09f15470005c7'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Delaney - can you please post your edited algo for us to review? Thanks!  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56a8f77349414369760006da' id='56a8f77349414369760006da'>
<a href='#56a8f77349414369760006da'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/54487203dc843663f2000123'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/439ba1adf33b808f2d50e3a31c3c7e28?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/54487203dc843663f2000123'>Josh Payne</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1453913976000' class='quanto-date posted-at response-posted-at' href='#56a8f77349414369760006da'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Daniel, I think the algo in the original post at the top was replaced with the improved, edited version.  </p>
</div>
<div class='disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='56a8fb9ac4a28a84b2000015' id='56a8fb9ac4a28a84b2000015'>
<a href='#56a8fb9ac4a28a84b2000015'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5346083a839ff34e1400010a'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e2319a353b35eac99e765c836ba72044?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5346083a839ff34e1400010a'>Delaney Mackenzie</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1453915040000' class='quanto-date posted-at response-posted-at' href='#56a8fb9ac4a28a84b2000015'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Daniel: To clarify, my original post had a slower version of the same algo but the post at the top was edited and now has the improved version. Sorry for the confusion!  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='56a914d96f2493df2f0000f6' id='56a914d96f2493df2f0000f6'>
<a href='#56a914d96f2493df2f0000f6'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/54e159f70f3369eb9200019b'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/2a53f34ae7e99886508adf2b4d76bff2?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/54e159f70f3369eb9200019b'>Vladimir</a>
<span class='badge medal'></span>
</div>
<a UTCms='1453921504000' class='quanto-date posted-at response-posted-at' href='#56a914d96f2493df2f0000f6'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Delaney,<br>
I tried to backtest edited version with yours custom slippage model but must stop it because after 4 hours in backtest it done only 2/3 what the original done.<br>
The leverage problem still exist.<br>
Adding custom slippage model you actually answered my second question.<br>
Quantopian default slippage model is not realistic. Am I right?<br>
Dont you see that long-short strategy by this code practically not making any money?<br>
Then why Quantopian put it as the example in lecture series?<br>
Is the results in line with Quantopian goal?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56a91ff95c0c115349000141' id='56a91ff95c0c115349000141'>
<a href='#56a91ff95c0c115349000141'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4e322fa200fffd0001000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f59406ed486edc76c94544468c11344d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4e322fa200fffd0001000001'>Scott Sanderson</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1453924354000' class='quanto-date posted-at response-posted-at' href='#56a91ff95c0c115349000141'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi All,</p>

<p>I helped make some tweaks to this algorithm the other day to help it take better advantage of the Pipeline API.<br>
Along the way I wrote up a notebook showing how to analyze Pipeline outputs and how to write code in a way that can be transferred back and forth between the IDE and Research (there&#39;s still a lot more that could be done on that front, but the design of Pipeline is motivated in large part by a desire to make it easier to write code that&#39;s applicable to both environments.)  </p>
</div>
<div class='disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='56a94ded6808684283000186' id='56a94ded6808684283000186'>
<a href='#56a94ded6808684283000186'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1453936114000' class='quanto-date posted-at response-posted-at' href='#56a94ded6808684283000186'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Is there a list of security types that are traded by this algo, that you wouldn&#39;t want in the portfolio if it were part of the Q hedge fund?</p>

<ul>
<li>Leveraged ETFs (taken care of by 
<code>context.dont_buys = security_lists.leveraged_etf_list</code>)<br></li>
<li>ETFs and such (anything not an individual company stock)<br></li>
<li>When-issued (I&#39;m not sure Karen&#39;s code covers everything)<br></li>
<li>Stocks about to be de-listed (apparently tools are in the works)<br></li>
<li>Other?<br></li>
</ul>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56a9692b680868d247000296' id='56a9692b680868d247000296'>
<a href='#56a9692b680868d247000296'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1453943086000' class='quanto-date posted-at response-posted-at' href='#56a9692b680868d247000296'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Delaney,</p>

<p>I am getting the same sluggish execution as Vladimir.  I started the backtest on 1/1/2005 over two hours ago, and it is still running, not even up to 2009 yet.  Is there a bug, or is this the expected behavior?  Also, when I bring up the backtest result webpage, it sorta sputters along drawing the performance charts.</p>

<p>Are you sure you fixed it?</p>

<p>Grant  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56a99ab5d2d6b9e18d00025b' id='56a99ab5d2d6b9e18d00025b'>
<a href='#56a99ab5d2d6b9e18d00025b'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/54e159f70f3369eb9200019b'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/2a53f34ae7e99886508adf2b4d76bff2?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/54e159f70f3369eb9200019b'>Vladimir</a>
<span class='badge medal'></span>
</div>
<a UTCms='1453955770000' class='quanto-date posted-at response-posted-at' href='#56a99ab5d2d6b9e18d00025b'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>It took more then 6 hours to run backtest in minute mode  from  01/02/2007 on edited  (definitely not improved) version with default slippage and commission models.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56a9d8d152bcacc6cf0006a1' id='56a9d8d152bcacc6cf0006a1'>
<a href='#56a9d8d152bcacc6cf0006a1'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/52b0e0e0271a27fc88000049'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e5451406e743420c700eb2b054b2fc57?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/52b0e0e0271a27fc88000049'>Blue Seahawk</a>
</div>
<a UTCms='1453971669000' class='quanto-date posted-at response-posted-at' href='#56a9d8d152bcacc6cf0006a1'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p><a href="https://www.quantopian.com/posts/timing-code">Timing Code</a> (now has a summary sort bug fix not contained in this backtest)</p>

<p>pipeline_output() is sometimes  fast, sometimes slow, once over three minutes.<br>
This skips that most of the month, 27:40 elapsed for eleven months.<br>
It doesn&#39;t appear to be capturing the main slowdown yet</p>

<p>Instead, add these lines:</p>

<pre><code>    timing(context, &#39;gap&#39;, &#39;reset&#39;)  
def handle_data(context, data):  
    timing(context, &#39;gap&#39;)  
</code></pre>

<p>The output doesn&#39;t make much sense to me. Remember there&#39;s that return some days of the month added.<br>
Anyway there may be a time lag behind the scenes between before_trading_start and handle_data or something.</p>

<p>Also tried this instead:</p>

<pre><code>def before_trading_start(context, data):  
    timing(context, &#39;bts&#39;)

    [ other code ]

    timing(context, &#39;bts&#39;, &#39;reset&#39;) # reset last, measuring time spent outside of before_trading_start -ish, round trip  
def handle_data(context, data):  
</code></pre>

<p>Produces some big numbers. Except for the early days of the month, on other days, when the added return kicks in, it winds up timing the cumulative time.  So I gather pipeline is doing a lot of work every day, since, even though schedule_function exists, it can&#39;t really know when its data might be called for. Maybe could be overall more efficient to only crunch when called? (If that&#39;s possible)</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56a9e860d2d6b98b2b00052c' id='56a9e860d2d6b98b2b00052c'>
<a href='#56a9e860d2d6b98b2b00052c'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1453975652000' class='quanto-date posted-at response-posted-at' href='#56a9e860d2d6b98b2b00052c'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Some comments by Scott Sanderson, Dec. 3, 2015, re: execution speed ( <a href="https://www.quantopian.com/posts/how-to-speed-up-pipeline-calculations-1#5660cae8a2018af26d000037">https://www.quantopian.com/posts/how-to-speed-up-pipeline-calculations-1#5660cae8a2018af26d000037</a> ):</p>

<blockquote>
<p>It&#39;s still a fair bit slower than I&#39;d like it to be, but the bottleneck at this point is almost entirely network IO with our database.</p>

<p>The bad news here is that there isn&#39;t much that you can do as a user to speed this up.<br>
The good news is that this should get faster for free over time as we figure out how to optimize the fundamentals database for pipeline usage patterns.</p>
</blockquote>

<p>Perhaps the bottleneck still exists?</p>

<p>Also, I allowed the backtest to continue, that was started 1/1/2005, and in 2014, got:</p>

<blockquote>
<p>Something went wrong. Sorry for the inconvenience. Try using the built-in debugger to analyze your code. If you would like help, send us an email. </p>
</blockquote>

<p>Not quite ready for prime time, it seems.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56aa3668a1e1ff26ab000a2d' id='56aa3668a1e1ff26ab000a2d'>
<a href='#56aa3668a1e1ff26ab000a2d'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/53dfa27b197bbb2516000159'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/51e4ba51c431ce2b4373006a33ade2aa?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/53dfa27b197bbb2516000159'>Karen Rubin</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1453995634000' class='quanto-date posted-at response-posted-at' href='#56aa3668a1e1ff26ab000a2d'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>We are not thrilled with the performance of this backtest either. We are working to understand why it&#39;s so slow and I&#39;ll report back on that when I have more information. </p>

<p>In the short term, if you are trying to do quick iteration on factors using this as a template, I recommend taking a look at the research notebook Scotty shared above. Working with pipeline in research is faster and allows for quick iteration.  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='56ab46b76eea03ef1100074f' id='56ab46b76eea03ef1100074f'>
<a href='#56ab46b76eea03ef1100074f'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1454065338000' class='quanto-date posted-at response-posted-at' href='#56ab46b76eea03ef1100074f'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>The confusion over the run time stemmed from Delaney&#39;s comment:</p>

<blockquote>
<p>I&#39;ve edited my original algorithm to a much more efficient version that finishes in ~20 minutes. </p>
</blockquote>

<p>Apparently, he did not test the problem reported by Vladimir, which was the execution time over a longer backtest period.  As a general rule, when a problem is reported and a supposed fix is implemented, the <em>exact</em> problem needs to be tested.</p>

<p>Any feedback on the other questions raised in this thread?</p>

<p>Would it be feasible for Q to present an example that has decent performance vis-a-vis the expectations for the Q fund?  It would be more encouraging to start with something that more-or-less works, and attempt to improve it.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56aba9e9fa31a2f86d0000fd' id='56aba9e9fa31a2f86d0000fd'>
<a href='#56aba9e9fa31a2f86d0000fd'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5346083a839ff34e1400010a'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e2319a353b35eac99e765c836ba72044?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5346083a839ff34e1400010a'>Delaney Mackenzie</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1454090735000' class='quanto-date posted-at response-posted-at' href='#56aba9e9fa31a2f86d0000fd'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I&#39;m working on responding to all the points raised in this thread, and I appreciate everybody&#39;s feedback on the algorithm. The returns of the algorithm will depend almost entirely on the quality of the factors chosen for the ranking scheme, and whereas we&#39;re working on some factors that have worked well recently, we wanted to get this one out as a template showing everybody how the algorithm would work in general. No factors are predictive over all time periods, and the selection of factors that will continue to work in the future is precisely the problem that an industry quant is trying to solve. If we found something and that worked well and released it, it would likely be arbitraged out very quickly. As such we try to spend our time on creating better templates rather than trying to find factors that will produce good returns.  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='56abad28acc67129ab000105' id='56abad28acc67129ab000105'>
<a href='#56abad28acc67129ab000105'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5033e9d73fb2eb0002000231'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/4a9a839742731aad6e110e1d3586e020?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5033e9d73fb2eb0002000231'>Simon Thornington</a>
</div>
<a UTCms='1454091565000' class='quanto-date posted-at response-posted-at' href='#56abad28acc67129ab000105'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><blockquote>
<p>If we found something and that worked well and released it, it would likely be arbitraged out very quickly. As such we try to spend our time on creating better templates rather than trying to find factors that will produce good returns.</p>
</blockquote>

<p>I find this argument unconvincing, if not a tad hypocritical if true, given that sharing of algos without expectation of their destruction is the premise of this entire forum.  I think it&#39;s more likely that nobody at Quantopian has come up with an algorithm which would meet Quantopian&#39;s own criteria, and therefore cannot share one.  Which is not surprising really, it&#39;s an exceedingly tough game.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56acab960b0bcf705d0006f1' id='56acab960b0bcf705d0006f1'>
<a href='#56acab960b0bcf705d0006f1'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1454156702000' class='quanto-date posted-at response-posted-at' href='#56acab960b0bcf705d0006f1'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Delaney,</p>

<p>I realize that it is kinda unfair to criticize the performance, since you say up front:</p>

<blockquote>
<p>NOTE: This algorithm is not intended to perform consistently over all time periods. Ranking schemes have predictive lifecycles, and the goal of someone trying to use this algorithm to trade profitably now should be to find a predictive ranking scheme that will work in the future.</p>
</blockquote>

<p>However, I find it a bit odd that Q has made a big investment in the pipeline API, with the idea that it would support viable factor-based long-short algos for the fund, but you&#39;ve yet to write some working examples (meaning ones that could be funded).  And even before developing the API, how did you get the confidence that lots of unique strategies could be deployed profitably on Q by a large number of users (it is intended to be a crowd-sourced effort, so a handful of long-short algos in the fund won&#39;t cut it)?</p>

<p>Simon seems to have pretty good intuition, so when he says &quot;it&#39;s an exceedingly tough game&quot; I have to wonder if attempting to write a long-short strategy for Q would be a fool&#39;s errand.  Personally, I don&#39;t work in the hedge fund world (or even in finance generally) and I don&#39;t have any acquaintances I could ask (&quot;Hey Joe, how hard would it be to write a decent factor-based long-short strategy that scales to $10M in capital, using U.S. equities?&quot;).  So, I have no frame of reference.  </p>

<p>You&#39;ll learn a lot by doing it yourselves, and then you can teach others.  Q has some capable people.  For example, let&#39;s say you, Fawce, Jess, Justin, and Thomas W. did nothing for two weeks but tried to come up with one or more factor-based long-short strategies?  I think you&#39;d gain credibility, learn the workflow first-hand, and potentially have an example algo you could share.  Ignoring the opportunity cost, it might cost $50K to pay everyone, which is 0.5% of $10M--in relative terms, a small investment.</p>

<p>Also, I note on <a href="https://www.quantopian.com/about#op-28573-algorithm-writer-intern">https://www.quantopian.com/about#op-28573-algorithm-writer-intern</a> that you are actually looking to publish algos:</p>

<blockquote>
<p>Quantopian is seeking an undergraduate intern to help expand our library of trading algorithms. We have dozens of algorithms that are described or otherwise implemented in languages other than Python. We would like these algorithms to be re-written in Python, tested in the Quantopian platform, and shared in the Quantopian community.</p>
</blockquote>

<p>Presumably, these would be hedge fund style algos, since that&#39;s your business.  So, I guess I&#39;m confused about the idea that you wouldn&#39;t want to publish viable algos, since they&#39;d be arbitraged away.  What would the intern be doing then?  Publishing algos that don&#39;t work?</p>

<p>On a separate note, you say &quot;ranking schemes have predictive lifecycles&quot; so is there code one could plunk into an algo, to flag when the strategy is working, and when it is spitting out jibberish?  Or is the idea that one would manually run pyfolio and decide when the strategy has run out of gas?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56acd2a20b0bcf705d0007e5' id='56acd2a20b0bcf705d0007e5'>
<a href='#56acd2a20b0bcf705d0007e5'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/53d2bb9b1ecafd68fc0001f6'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/98711f9829f5d236d8c9d69f4f640898?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/53d2bb9b1ecafd68fc0001f6'>Miles Adkins</a>
</div>
<a UTCms='1454166702000' class='quanto-date posted-at response-posted-at' href='#56acd2a20b0bcf705d0007e5'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>In theory, what you want is an algo that computes 1000s of factors scores everyday on a basket of stocks and then builds some type of model based on which factors are generating the highest returns based on a rolling time period every day. Definitely a hard problem to solve and a lot of computing need and machine learning expertise  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56acd2cf9eda7a7bb2000810' id='56acd2cf9eda7a7bb2000810'>
<a href='#56acd2cf9eda7a7bb2000810'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/53d2bb9b1ecafd68fc0001f6'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/98711f9829f5d236d8c9d69f4f640898?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/53d2bb9b1ecafd68fc0001f6'>Miles Adkins</a>
</div>
<a UTCms='1454166740000' class='quanto-date posted-at response-posted-at' href='#56acd2cf9eda7a7bb2000810'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>So I agree it doesn&#39;t make sense to focus on making static models  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56acde39acc67129ab000813' id='56acde39acc67129ab000813'>
<a href='#56acde39acc67129ab000813'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1454169661000' class='quanto-date posted-at response-posted-at' href='#56acde39acc67129ab000813'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Miles,</p>

<p>Sounds ugly.  Brute force, you&#39;d need to create a highly multi-dimensional response surface on a rolling basis, and then optimize.  In theory, one could do it in the research platform, by looping over the factor levels, running a backtest at each, but then one would have to manually update the algo for every new long-short allocation (and for hundreds of stocks, one might bump into the &quot;don&#39;t steal our data&quot; limits in the research platform).  And it sounds impossible using the backtester.  Seems like one would need a backtesting engine that could run all of the days in parallel (vectorized), rather than churning forward in a loop, day-by-day.  And running N backtests in parallel would obviously speed things up, too.</p>

<p>Grant  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56ae11b2b59175b90a00071c' id='56ae11b2b59175b90a00071c'>
<a href='#56ae11b2b59175b90a00071c'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1454248373000' class='quanto-date posted-at response-posted-at' href='#56ae11b2b59175b90a00071c'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Delaney,</p>

<p>Yet another question: how does one know that daily bar data are sufficient for constructing a real long-short strategy?  Intuitively, it seems like the relatively low-frequency data would frame the problem on a time scale that would not be competitive (e.g. to get decent statistics, one might need a month or two of data).  Is there any evidence from the literature or elsewhere that a long-short strategy could be constructed with daily data, and accordingly trade relatively infrequently?  Is it gonna be like stepping up to the plate in the big leagues with a corkball bat?  What workflow does a professional long-short strategy developer follow and with what tools?  </p>

<p>Grant  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56b2639bcb5e38d01c00032e' id='56b2639bcb5e38d01c00032e'>
<a href='#56b2639bcb5e38d01c00032e'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5346083a839ff34e1400010a'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e2319a353b35eac99e765c836ba72044?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5346083a839ff34e1400010a'>Delaney Mackenzie</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1454531486000' class='quanto-date posted-at response-posted-at' href='#56b2639bcb5e38d01c00032e'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hey all,</p>

<p>I&#39;m really busy with a <a href="https://www.quantopian.com/workshops">round of workshops</a> right now, but making this algorithm template really good and accessible is super high priority for me. Based on my work and vacation schedule, I suspect I&#39;ll be able to come out with a bunch of updated material towards the end of the month. I&#39;ll make sure I address all the concerns raised in this thread, some of the answers are not as much simple as they are lectures in and of themselves, so I want to make sure I get them right before releasing the content.</p>

<p>Thanks,<br>
Delaney</p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='56b4827e92cf07e15b0007b7' id='56b4827e92cf07e15b0007b7'>
<a href='#56b4827e92cf07e15b0007b7'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1454670470000' class='quanto-date posted-at response-posted-at' href='#56b4827e92cf07e15b0007b7'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thanks Delaney,</p>

<p>Rome wasn&#39;t built in a day.  Another thought is that it&#39;d be nice to be able to write out a file from the research platform, and then pull it into the backtester/trading engine.  Ideally, one could do this on-the-fly, overnight, if not during the trading day, so that the algo would not need to be stopped during live trading.</p>

<p>Regarding your point about publishing a viable long-short strategy developed by Quantopian, and it being arbitraged away, you wouldn&#39;t necessarily need to publish the detailed code (the &quot;secret sauce&quot;), just the overall approach, what you learned in terms of pitfalls and workflow and perhaps some performance results, etc.  Have you talked with anyone there about the idea?  You wouldn&#39;t be able to co-opt the time of a bunch of folks for several weeks to help you to research and write a strategy, without the support of the powers-that-be.</p>

<p>Grant  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56b48959a18e875317000595' id='56b48959a18e875317000595'>
<a href='#56b48959a18e875317000595'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5673f0630a6bfa534b00000d'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/147dbb7c6d5789fd351a368486558c2a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5673f0630a6bfa534b00000d'>Giuseppe Moriconi</a>
</div>
<a UTCms='1454672224000' class='quanto-date posted-at response-posted-at' href='#56b48959a18e875317000595'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I am probably not aware of all the issues with this but i think that switching between  research and algos is un-necessary.<br>
Ipython notebook is so comfortable and advanced that just putting some features in it to enable a real backtest (and maybe live trading too) makes <strong>the basic ide an uncessary tool</strong>, expecially since the debug window is very very unconfortable to me.</p>

<p>I know that one can use zipline via research but it&#39;s not very weel documented (just one example in research folder) and not very much used in the community.</p>

<p>Then i think that building <strong>everything</strong> with ipython notebook is much more easy to read and so closer to the spirit of the community.</p>

<p>Regarding the topic i think that a real working (not necessarily money making) example to use as a template would be very usefull expecially if it includes the major tools:</p>

<ul>
<li>pipeline<br></li>
<li>managing leverage<br></li>
<li>stoplosses<br></li>
<li>takeprofits<br></li>
<li>trailing profits<br></li>
<li>delisted stocks</li>
</ul>

<p>-Giuseppe  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56b4927192cf07ccf3000210' id='56b4927192cf07ccf3000210'>
<a href='#56b4927192cf07ccf3000210'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1454674555000' class='quanto-date posted-at response-posted-at' href='#56b4927192cf07ccf3000210'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Good point about a unified user interface based on IPython.  Another thing that would help would be to allow spinning up multiple backtests (or whatever analyses) in parallel from the research platform, which can be done from the IDE.  It is not obvious that crunching over 8,000 securities per day, and umpteen factors makes sense in a serial computing environment; I can&#39;t imagine that the hedge funds Q is trying to compete against are taking this approach.  It would also be a good idea to enable e-mail notifications, so that when compute jobs are complete (or crash), users would be notified.</p>

<p>I&#39;ve also heard that there are approaches to backtesting that can be vectorized, so that the computation over time is done basically in one compute cycle.  With event-driven testing, you are stuck with looping over every minute.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56bdb75f023bf6b253000576' id='56bdb75f023bf6b253000576'>
<a href='#56bdb75f023bf6b253000576'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1455273828000' class='quanto-date posted-at response-posted-at' href='#56bdb75f023bf6b253000576'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Any update from the Q staff on the numerous issues/questions raised in this thread?</p>

<p>Simon gives an example of how to filter out junk that one would not want in a long-short strategy:</p>

<p><a href="https://www.quantopian.com/posts/equity-long-short">https://www.quantopian.com/posts/equity-long-short</a></p>

<p>Does his code capture everything that should be excluded?</p>

<p>Also, specifically regarding de-listings, will Q be adding another data set?  It seems that you&#39;d need a feed of the filings/announcements of de-listings (and perhaps there are reversals/postponements, etc. which could get messy).  Just wondering how you&#39;ll approach it.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56bdbb58d7607d304700051c' id='56bdbb58d7607d304700051c'>
<a href='#56bdbb58d7607d304700051c'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56990262be2416509000011c'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/0cccbbae7e2a982659980bd3c4d0a6eb?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56990262be2416509000011c'>Richard Jamieson</a>
</div>
<a UTCms='1455274846000' class='quanto-date posted-at response-posted-at' href='#56bdbb58d7607d304700051c'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Grant, I think I read in Delaney&#39;s post above that he would come back with answers towards the end of this month.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56bdc337e556b43200000539' id='56bdc337e556b43200000539'>
<a href='#56bdc337e556b43200000539'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1455276859000' class='quanto-date posted-at response-posted-at' href='#56bdc337e556b43200000539'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Yep.  Just thought I&#39;d check in.  I assume that others at Q can respond, as well.  At some point, I&#39;d like to take the plunge and attempt one of these glorious long-short strategies using pipeline.  I don&#39;t want to get bogged down if the tools aren&#39;t ready and/or I don&#39;t know how to use them.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56cce2dd28c5b1c3d40000c9' id='56cce2dd28c5b1c3d40000c9'>
<a href='#56cce2dd28c5b1c3d40000c9'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5312f7e2efc731bbf20000fe'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/905bb5da397380a6c3fecf3f60c71544?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5312f7e2efc731bbf20000fe'>Paul Perry</a>
</div>
<a UTCms='1456268002000' class='quanto-date posted-at response-posted-at' href='#56cce2dd28c5b1c3d40000c9'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Scott, can you extend your notebook to also call zipline in the notebook?  I tried, but failed miserably.  I don&#39;t know what &#39;data&#39; to pass to the TradingAlgorithm, my 
<code>
from quantopian.algorithm import attach_pipeline, pipeline_output  
</code>
fails, and calls to attach_pipeline fail. </p>

<p>I agree with @Giuseppe and would like to work on a <strong>real working example</strong> in the notebook, but I&#39;m stuck.  I&#39;d like to see:</p>

<ul>
<li>A pipeline created<br></li>
<li>A call to the zipline backtester<br></li>
<li>A pyfolio output<br></li>
</ul>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56d160409d665143dd000070' id='56d160409d665143dd000070'>
<a href='#56d160409d665143dd000070'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/54460194d718f327fd000380'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e511e4eeb9334ef82f1caa7bd66c36dc?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/54460194d718f327fd000380'>Luca</a>
</div>
<a UTCms='1456562247000' class='quanto-date posted-at response-posted-at' href='#56d160409d665143dd000070'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I am wrong, or in the edited version of the algorithm the short stock weights are wrong?</p>

<pre><code>#before  
 context.short_list = 1 / average_rank.order().iloc[:200]  
 context.short_list /= context.short_list.sum()  
# after  
context.short_weights = (short_ranks / short_ranks.sum())  
</code></pre>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56d4d2a31bf28c518700015b' id='56d4d2a31bf28c518700015b'>
<a href='#56d4d2a31bf28c518700015b'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5346083a839ff34e1400010a'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e2319a353b35eac99e765c836ba72044?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5346083a839ff34e1400010a'>Delaney Mackenzie</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1456788134000' class='quanto-date posted-at response-posted-at' href='#56d4d2a31bf28c518700015b'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I&#39;m currently working on a project that will replicate some existing factors quants use, plus have full research notebooks demonstrating the factor research process. Hopefully this will address a lot of the issues with this algorithm. Stay tuned for more.  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='56d812e99bfefef4210001c9' id='56d812e99bfefef4210001c9'>
<a href='#56d812e99bfefef4210001c9'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1457001198000' class='quanto-date posted-at response-posted-at' href='#56d812e99bfefef4210001c9'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hello Delaney,</p>

<p>Thanks for the update.  One of the things I&#39;m observing on the forum is that users bang into limitations of the platform in trying to carry out their research work and formulate algos.  This is actually a really good sign, since it means that you have people willing to volunteer their time to write algos for your hedge fund (and perhaps for their own capital, although its not really your main business, as I understand it).  It is clear that the pipeline API was released as a beta version, and that overall the Quantopian platform is beta-esque.  All fine.  What&#39;s missing is a forward-looking architecture, to put it all into context, and to which users can contribute in a cohesive, constructive way, versus scattered bugs, comments, complaints, improvement requests, etc. distributed over forum posts going back several years.</p>

<p>To borrow from the late Steve Jobs, you want to aspire to &quot;insanely great&quot; tools.  I suggest lobbying for putting up a wish-list architecture and roadmap and then driving to get it.  Personally, I have a number of recommendations, but I&#39;m not sure they are heard and captured. </p>

<p>As I suggest above, one way to sort out what&#39;s missing would be to try to research and write a viable algo yourselves, as a team, sharing the results and lessons-learned.  Have you given this any more thought?  I think you basically rejected it, on the grounds that &quot;If we found something and that worked well and released it, it would likely be arbitraged out very quickly.&quot;  Perhaps, but you would have lost nothing, unless you put capital toward the public strategy.  And your basic premise here anyway is that there are enough orthogonal strategies out there that publishing one won&#39;t make a difference in Quantopian&#39;s future.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56ea1f86374f44e8070003a3' id='56ea1f86374f44e8070003a3'>
<a href='#56ea1f86374f44e8070003a3'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/54e159f70f3369eb9200019b'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/2a53f34ae7e99886508adf2b4d76bff2?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/54e159f70f3369eb9200019b'>Vladimir</a>
<span class='badge medal'></span>
</div>
<a UTCms='1458184074000' class='quanto-date posted-at response-posted-at' href='#56ea1f86374f44e8070003a3'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Delaney,</p>

<p><strong><em>I&#39;m working on responding to all the points raised in this thread, and I appreciate everybody&#39;s feedback on the algorithm.</em></strong></p>

<p>I do not see any response to my questions:</p>

<p>Quantopian default slippage model is not realistic. Am I right?<br>
Dont you see that long-short strategy by this code practically not making any money?<br>
Then why Quantopian put it as the example in lecture series?<br>
Is the results in line with Quantopian goal?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56ea814ec6e3350d680002ef' id='56ea814ec6e3350d680002ef'>
<a href='#56ea814ec6e3350d680002ef'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1458209108000' class='quanto-date posted-at response-posted-at' href='#56ea814ec6e3350d680002ef'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hello Vladimir,</p>

<p>Regarding the default slippage model, admittedly I don&#39;t have any expertise in this area and haven&#39;t paid much attention to it.  It can be disabled by users, and users can write their own slippage models, too.    Aside from the contest, the default slippage model is not imposed on anyone.  And I have to wonder if it may be valid for sifting out algos that are particularly robust against slippage.  In any case, if you have a specific recommended slippage model, perhaps you could post it in a separate thread?  And maybe even put it up in github in a public repository?</p>

<p>Also, Q is in the business of making money.  So, if you or anyone else has a convincing case that their algo will work well under realistic slippage and deserves capital, I&#39;d expect they&#39;d listen.  In fact, if the contest is the concern, users are free to set up as many parallel algos as they want, to run for 6 months.  Enter one into the contest, and run another one in parallel with your favorite slippage model.</p>

<p>That said, if the current default slippage is grossly inadequate for writing long-short algos, as Delaney is promoting, then it should be added to the (unpublished) list of tools that are needed (maybe it is already on the list?).</p>

<p>I think the over-arching issue here, as Simon points out above, is that &quot;it&#39;s an exceedingly tough game.&quot;  Q is still pulling together the tools.  But they need to maintain their version of a &quot;reality distortion field&quot; both internally and as their public face.  Thus, the conversation tends to be one-sided.  They are not likely to post a list of the short-comings of their API, with prioritization and commitments to fix problems.  At least that&#39;s my take on it.  So, I&#39;d be patient.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56ebc835e3be886398000806' id='56ebc835e3be886398000806'>
<a href='#56ebc835e3be886398000806'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1458292793000' class='quanto-date posted-at response-posted-at' href='#56ebc835e3be886398000806'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Since I guess the goal here is to evolve Delaney&#39;s example above into a practical template, one thing that is missing is a data integrity check, since there can be errors in data supplied by Q.  I&#39;m not clear how to do this in a thorough, robust fashion.  Inevitably, when dealing with a dynamic universe of thousands of securities, errors will crop up.  So a block of code in the algo is required to catch them.  And the algo needs to be written so that it is immune to any errors that slip through the check.</p>

<p>In addition to code in the algo, one suggestion is that Q publish a list of securities with known problems, to be avoided in long-short algos (e.g. 
<code>security_lists.erroneous_data</code>).  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56ebd7c3021d17570a00080d' id='56ebd7c3021d17570a00080d'>
<a href='#56ebd7c3021d17570a00080d'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1458296783000' class='quanto-date posted-at response-posted-at' href='#56ebd7c3021d17570a00080d'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>For accurate backtesting and Q simulated live trading, the algo also needs:</p>

<pre><code>def cancel_everything(context,data):  
    &quot;&quot;&quot;  
    Cancels all open orders for all sids.  
    &quot;&quot;&quot;  
    all_open_orders = get_open_orders()  
    if all_open_orders:  
        for security, oo_for_sid in all_open_orders.iteritems():  
            for order_obj in oo_for_sid:  
                log.info(&quot;%s: Cancelling order for %s of %s created on %s&quot; %  
                         (get_datetime(), order_obj.amount,  
                          security.symbol, order_obj.created))  
                cancel_order(order_obj)  
</code></pre>

<p>I think the proper usage is to call it in the last minute of trading (using <code>schedule_function</code>), so that it simulates the automatic cancellation of all open orders after the close, when trading real money.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56ebd8795757e66bc3000817' id='56ebd8795757e66bc3000817'>
<a href='#56ebd8795757e66bc3000817'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1458296959000' class='quanto-date posted-at response-posted-at' href='#56ebd8795757e66bc3000817'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>The de-listing problem was fixed, I think, so this code is no longer needed:</p>

<pre><code>if security in data:  # Work around inability to sell de-listed stocks.  
            if security not in context.active_portfolio:  
                order_target_percent(security, 0)  
</code></pre>

<p>Correct?  Or is it still required?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56ec0c9fef6be44cb5000a58' id='56ec0c9fef6be44cb5000a58'>
<a href='#56ec0c9fef6be44cb5000a58'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5394bbbdeee25762d2000102'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/0af1296044050e221f0e9a9593dee746?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5394bbbdeee25762d2000102'>Daniel C. Place</a>
</div>
<a UTCms='1458310311000' class='quanto-date posted-at response-posted-at' href='#56ec0c9fef6be44cb5000a58'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Delaney - any progress on this algo?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56ed4308f74cb09b2900075d' id='56ed4308f74cb09b2900075d'>
<a href='#56ed4308f74cb09b2900075d'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1458389771000' class='quanto-date posted-at response-posted-at' href='#56ed4308f74cb09b2900075d'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I&#39;m running a backtest on Delaney&#39;s code, starting 1/1/2005.  After one hour, it is 27% done.  So, it seems we are still at a 4 hour backtest time.  Any update on the speed?</p>

<p>@ Karen - &quot;We are working to understand why it&#39;s so slow and I&#39;ll report back on that when I have more information.&quot;  Any feedback?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56ffc0256c150fced9000939' id='56ffc0256c150fced9000939'>
<a href='#56ffc0256c150fced9000939'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1459601449000' class='quanto-date posted-at response-posted-at' href='#56ffc0256c150fced9000939'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Any updates from the Q team on this?  It&#39;d be great to have a practical, working (but not necessarily profitable) long-short template.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='570042c9fc22471ded0002c6' id='570042c9fc22471ded0002c6'>
<a href='#570042c9fc22471ded0002c6'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5346083a839ff34e1400010a'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e2319a353b35eac99e765c836ba72044?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5346083a839ff34e1400010a'>Delaney Mackenzie</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1459634894000' class='quanto-date posted-at response-posted-at' href='#570042c9fc22471ded0002c6'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hey everyone. Sorry for the slow responses, I just got back from Asia. Let me detail the approach I&#39;m taking here:</p>

<p>We&#39;re going through a list of known investment factors, including standard ones like momentum, mean reversion, etc. We&#39;re implementing long short algorithms for each, but also keeping a general base template so that factors can be recombined across different algorithms. Through this process we hope to be able to release this base template, but also the known factors as examples. We&#39;re taking into account all the feedback we got on this thread, and making sure we test for speed and robustness. We&#39;ll never be able to account for all potential issues, but we hope to release something that&#39;s as close as we can get to what an industry long short would look like, and release as much of the infrastructure for development as possible. One of our interns is currently working full time on this project, and I&#39;ll let you know when I have more info about ETA. Likely not in the next couple months.</p>

<p>In the meantime, I&#39;ve actually been using this template a lot, and it&#39;s pretty reasonable for most of the use cases I&#39;ve had. Some issues with speed that are tougher to address, but that might improve as the site undergoes optimizations. The robustness issues like order handling are easier to fix by swapping in new code from other forum algorithms. Clearly not optimal, but we&#39;ve opted to go for a full-project redesign versus tweaking this template.</p>

<p>Thanks,<br>
Delaney  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='57012155fc22471bd40009b6' id='57012155fc22471bd40009b6'>
<a href='#57012155fc22471bd40009b6'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1459691864000' class='quanto-date posted-at response-posted-at' href='#57012155fc22471bd40009b6'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Delaney,</p>

<p>Thanks for the update.  Regarding speed, a few thoughts:</p>

<ul>
<li>Run daily instead of minutely backtests, as a first-pass screen.  The slippage model can be manipulated for more realistic fills (e.g. <a href="https://www.quantopian.com/posts/trade-at-the-open-slippage-model">https://www.quantopian.com/posts/trade-at-the-open-slippage-model</a>).  Pipeline only supports daily data, so unless there is further minutely refinement in the code, it seems that daily backtest mode could be cajoled into yielding accurate results for development work.<br></li>
<li>Vectorized backtesting?  Is it feasible to get realistic &quot;back-of-the-envelope&quot; results?  The Q minutely event-driven backtester, with full compatibility with live trading may be overkill for relative comparisons and optimizations.<br></li>
<li>Enabling code to be executed in parallel, GPU computing, etc. (Thomas W. provided an example - see <a href="https://www.quantopian.com/posts/zipline-in-the-cloud-optimizing-financial-trading-algorithms">https://www.quantopian.com/posts/zipline-in-the-cloud-optimizing-financial-trading-algorithms</a>)</li>
</ul>

<p>On a separate topic, I&#39;m not sure what you mean by &quot;a full-project redesign versus tweaking this template.&quot;  In any case, I&#39;d encourage your unidentified intern to leverage the user base in his/her development process, versus doing a &quot;Ta-da!&quot; release, only to find out that important stuff was not considered.  Also, in terms of &quot;release&quot; I&#39;d encourage y&#39;all to use github, since if the code is not under public revision control, you really haven&#39;t released anything.  As part of the &quot;full-project redesign&quot; you could consider setting up a repository.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5702d1fed7137f70a00001a1' id='5702d1fed7137f70a00001a1'>
<a href='#5702d1fed7137f70a00001a1'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5346083a839ff34e1400010a'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e2319a353b35eac99e765c836ba72044?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5346083a839ff34e1400010a'>Delaney Mackenzie</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1459802627000' class='quanto-date posted-at response-posted-at' href='#5702d1fed7137f70a00001a1'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>A lot of this comes down to the fact that industry quants spend very little time backtesting, and the vast majority of their time in whatever their equivalent is to a our research environment. The back of the envelope calculations you mention are effectively looking at the factor&#39;s performance in the research environment. Those, if the strategy is meaningful, should model the backtest returns fairly well. Andrew has done a good amount of work towards this in his <a href="https://www.quantopian.com/posts/the-101-alphas-project">101 Alphas Project</a>. I&#39;ve also started to update the lectures to include the pipeline API. I recommend checking out <a href="https://www.quantopian.com/lectures">13, 14, and 15</a>. The idea is to spend most of the time in the research environment, and then just use the backtester to do some analysis of transactions and slippage issues, and as a final validation that the model works. In practice industry quants face the same issues, backtesting is generally incredibly slow, and custom infrastructure is built to support very specific backtesting cases. We&#39;re trying to make the algorithm faster, but I think a lot of the speed gain will come from researching the factor models in a research environment, which is by nature vectorized.</p>

<p>By redesigning I mean putting together an intelligent workflow including Andrew&#39;s work, plus a bunch of work in development, to enable what I describe above as the industry quant workflow. We will certainly make sure to show iterations to the community for feedback, and I&#39;ve been thinking of repos we could set up to better support algorithm content. We do release a good amount of algorithm content here:</p>

<p><a href="https://github.com/quantopian/research_public/tree/master/lectures">https://github.com/quantopian/research_public/tree/master/lectures</a></p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='57038ac28c328c0787000763' id='57038ac28c328c0787000763'>
<a href='#57038ac28c328c0787000763'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1459849929000' class='quanto-date posted-at response-posted-at' href='#57038ac28c328c0787000763'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thanks Delaney,</p>

<p>You are putting a lot of effort into this long-short factor-based strategy business.  Is there a body of work suggesting it will actually work?  Where did you get the idea in the first place?  How would I know it&#39;s not just going to be a colossal waste of time?  Do other hedge funds use it to their success?  And how would you actually know, since reportedly they are highly secretive?</p>

<p>I&#39;ve never actually seen a thorough justification by Quantopian, so I figured I&#39;d ask.</p>

<p>Cheers,</p>

<p>Grant  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='57039fd4d7137fb748000182' id='57039fd4d7137fb748000182'>
<a href='#57039fd4d7137fb748000182'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/55e602a002dd2432b00001d2'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/706508819421d25d2dfb273421dc6887?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/55e602a002dd2432b00001d2'>Burrito Dan</a>
</div>
<a UTCms='1459855321000' class='quanto-date posted-at response-posted-at' href='#57039fd4d7137fb748000182'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I believe long-short momentum is at the core of the CTA industry, which has $350bn under management: </p>

<p><a href="http://www.barclayhedge.com/research/indices/cta/Money_Under_Management.html">http://www.barclayhedge.com/research/indices/cta/Money_Under_Management.html</a>  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5703c4dcfba63fdaba0008a3' id='5703c4dcfba63fdaba0008a3'>
<a href='#5703c4dcfba63fdaba0008a3'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/553a99b1c16c1ab564000419'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f9dfceac3cbc0bef3151a67e839a2e03?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/553a99b1c16c1ab564000419'>Sangria Ostrich</a>
</div>
<a UTCms='1459864802000' class='quanto-date posted-at response-posted-at' href='#5703c4dcfba63fdaba0008a3'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Dan, </p>

<p>You&#39;re right about momentum/trend-following being the primary strategy employed by CTAs, but it&#39;s a completely different breed of animal than the fully hedged factor models Quantopian is pressing. If compared to an equities momentum factor model, most CTAs are similar in that they are buying the strongest and selling the weakest, but that&#39;s about it. CTA trend following programs are usually taking direct long or short positions, unhedged in the general sense. Their &quot;hedge&quot; is mostly due to the diversity of markets they tend to trade, rather than buying one basket of securities while simultaneously selling another basket of securities and treating it as a single trade. The elevated levels of volatility which CTA programs experience from time to time are often due to the fact that they are taking unhedged positions and can be caught on the wrong side of a violent move in one or more instruments. This also allows them to get huge returns at times when they&#39;re on the right side of a move. </p>

<p>Graham  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5703eda88c328c6cfd0007ef' id='5703eda88c328c6cfd0007ef'>
<a href='#5703eda88c328c6cfd0007ef'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/55e602a002dd2432b00001d2'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/706508819421d25d2dfb273421dc6887?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/55e602a002dd2432b00001d2'>Burrito Dan</a>
</div>
<a UTCms='1459875250000' class='quanto-date posted-at response-posted-at' href='#5703eda88c328c6cfd0007ef'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Ah, I didn&#39;t think of that. To paraphrase, CTA funds take long OR short positions without a requirement to balance the two? Definitely not an attempt to harvest some clean factor premium, but rather a more opportunistic &quot;trading&quot; approach.</p>

<p>Anyway, what&#39;s a good sound bite type answer to Grant&#39;s mildly inflammatory question?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='570409f0e027e23583000926' id='570409f0e027e23583000926'>
<a href='#570409f0e027e23583000926'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/546bb8c0f3659f707e0005cf'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/73604052d4c7647d323c84e719614536?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/546bb8c0f3659f707e0005cf'>Deleted User</a>
</div>
<a UTCms='1459882488000' class='quanto-date posted-at response-posted-at' href='#570409f0e027e23583000926'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>To piggyback a bit on the Dan H. response with the barclayhedge hedge fund indices URL.  Here is the hedge fund style indices presented by Credit Suisse which breaks down the fund styles even further.  Long/Short equity is one of them (which as Graham points out, doesn&#39;t really mean they are fully hedged, and can take some bets),  but Credit Suisse also posts the Equity Market Neutral hedgefund index as well. I&#39;m not sure how they define &quot;neutral&quot; but it is likely somewhat stringent in its definition such that the component funds look different from the ones in the Long/Short Equity index.  As well, Equity Market Neutral is a substantial style class in the hedge fund world, one of the most popular right behind the less strict Long/Short Equity.</p>

<p><a href="http://www.hedgeindex.com/hedgeindex/en/indexoverview.aspx?indexname=HEDG&amp;cy=USD">http://www.hedgeindex.com/hedgeindex/en/indexoverview.aspx?indexname=HEDG&amp;cy=USD</a></p>

<p>The AUM per strategy for Hedge Funds strategies, of which Equity Market Neutral specifically is a line item, that I discovered when poking around the barclayhedge link previously shared above:<br>
<a href="http://www.barclayhedge.com/research/indices/ghs/mum/HF_Money_Under_Management.html">http://www.barclayhedge.com/research/indices/ghs/mum/HF_Money_Under_Management.html</a>  </p>
</div>
<div class='disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='5704218db025567a3a0001f4' id='5704218db025567a3a0001f4'>
<a href='#5704218db025567a3a0001f4'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/55e602a002dd2432b00001d2'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/706508819421d25d2dfb273421dc6887?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/55e602a002dd2432b00001d2'>Burrito Dan</a>
</div>
<a UTCms='1459888529000' class='quanto-date posted-at response-posted-at' href='#5704218db025567a3a0001f4'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>There&#39;s a breakdown of common strategies here:</p>

<p><a href="http://www.investopedia.com/university/hedge-fund/strategies.asp">http://www.investopedia.com/university/hedge-fund/strategies.asp</a></p>

<p>I&#39;m sure somewhat out of date, but was helpful for me.</p>

<p>On the various podcasts I listen to, I hear a lot of talk about hedge funds acquiring vast amounts of data and getting into machine learning and artificial intelligence to sift through it for patterns. I assume the execution of this involves tools like linear regression, long-short factor portfolios, bayesian probabilities and statistical significance tests. All of this is stuff that Q is pushing, but with the crowd providing the intelligence, not robots.</p>

<p>It&#39;s a bit off topic, but I wonder how well these AI efforts are going.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='570433e447ddb224e800020a' id='570433e447ddb224e800020a'>
<a href='#570433e447ddb224e800020a'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1459893228000' class='quanto-date posted-at response-posted-at' href='#570433e447ddb224e800020a'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>O.K.  $200B is a pretty big number for the AUM for equity long-short (<a href="http://www.barclayhedge.com/research/indices/ghs/mum/Equity_Long_Short.html">http://www.barclayhedge.com/research/indices/ghs/mum/Equity_Long_Short.html</a>).  Must be legitimate.  I&#39;ll assume that Q didn&#39;t just dream it up, and that it is possible to make money.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5713a416395120fa8e00034e' id='5713a416395120fa8e00034e'>
<a href='#5713a416395120fa8e00034e'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1460904988000' class='quanto-date posted-at response-posted-at' href='#5713a416395120fa8e00034e'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Delaney,</p>

<p>FYI - your code no longer runs due to:</p>

<pre><code>get_open_orders(sid=long_stock):  
</code></pre>

<p>However, per the help page, it should run:</p>

<p><strong>get_open_orders(sid=sid)<br>
If sid is None or not specified, returns all open orders. If sid is specified, returns open orders for that sid<br>
Parameters<br>
sid: (optional) A security object. Can be also be None.<br>
Returns<br>
If sid is unspecified or None, returns a dictionary keyed by security id. The dictionary contains a list of orders for each sid, oldest first. If a sid is specified, returns a list of open orders for that sid, oldest first.</strong></p>

<p>Your code will run by calling like this:</p>

<pre><code>get_open_orders(sid)  
</code></pre>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='57167e5f52911cea7a000128' id='57167e5f52911cea7a000128'>
<a href='#57167e5f52911cea7a000128'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5346083a839ff34e1400010a'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e2319a353b35eac99e765c836ba72044?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5346083a839ff34e1400010a'>Delaney Mackenzie</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1461091943000' class='quanto-date posted-at response-posted-at' href='#57167e5f52911cea7a000128'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Good catch. We have a version ported over for Quantopian 2 that we&#39;ll be releasing shortly, that one should work.  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='5716a97452911cea7a0002f3' id='5716a97452911cea7a0002f3'>
<a href='#5716a97452911cea7a0002f3'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1461102972000' class='quanto-date posted-at response-posted-at' href='#5716a97452911cea7a0002f3'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Just be sure to test it over a long time period.  When I tried to run your algo, it ran out of memory.  See:</p>

<p><a href="https://testdrive.quantopian.com/posts/memory-error-2">https://testdrive.quantopian.com/posts/memory-error-2</a>  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5723315385663c27ee000643' id='5723315385663c27ee000643'>
<a href='#5723315385663c27ee000643'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1461924191000' class='quanto-date posted-at response-posted-at' href='#5723315385663c27ee000643'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I tried to run the Q2 algo, with:</p>

<pre><code>Settings:  
From 2003-01-01 to 2016-04-28 with $10,000,000 initial capital  
</code></pre>

<p>I got the error:</p>

<p>InterfaceError: connection already closed<br>
There was a runtime error on line 139.</p>

<p>I do not get the error if I start with this:</p>

<pre><code>Settings:  
From 2005-01-01 to 2016-04-28 with $10,000,000 initial capital  
</code></pre>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='572332fc85663cb9ac000696' id='572332fc85663cb9ac000696'>
<a href='#572332fc85663cb9ac000696'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1461924610000' class='quanto-date posted-at response-posted-at' href='#572332fc85663cb9ac000696'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>And for:</p>

<pre><code>Settings:  
From 2005-01-01 to 2016-04-28 with $10,000,000 initial capital  
</code></pre>

<p>I eventually get the error:</p>

<p>TimeoutException: Call to before_trading_start timed out<br>
There was a runtime error on line 139.</p>

<p>after about 6 months of simulation.</p>

<p>I ain&#39;t feelin&#39; the Q2 love yet...  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='57359f05b31db9f66000067d' id='57359f05b31db9f66000067d'>
<a href='#57359f05b31db9f66000067d'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1463131921000' class='quanto-date posted-at response-posted-at' href='#57359f05b31db9f66000067d'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I gave the Migrated Source Code algo another go, and got:</p>

<pre><code>Something went wrong. Sorry for the inconvenience. Try using the built-in debugger to analyze your code. If you would like help, send us an email.  
InterfaceError: connection already closed  
There was a runtime error on line 139.

</code></pre>

<p>Still not working.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5736e9bb11ac838d4a0006ec' id='5736e9bb11ac838d4a0006ec'>
<a href='#5736e9bb11ac838d4a0006ec'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/55d6180c1339ec0106000920'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/6bf00ee69cfc0232eba532a0e34f27eb?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/55d6180c1339ec0106000920'>Deleted User</a>
</div>
<a UTCms='1463216577000' class='quanto-date posted-at response-posted-at' href='#5736e9bb11ac838d4a0006ec'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>FYI - I have not read through this entire thread so I am devoid of it&#39;s context...but...</p>

<p>@ Grant - Just cloned your algo from your last post and ran a backtest from 2003/01/01 through 2012/01/01. Worked fine on my PC (i5 chip with 4GB RAM). Wondering if you have a hardware deficiency on your end?  </p>

<p>@ Q - The culprit in my backtest appears to be ticker &quot;KGC&quot;. </p>

<ul>
<li>Frank V.<br></li>
</ul>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5736f9c7628f72be4c000727' id='5736f9c7628f72be4c000727'>
<a href='#5736f9c7628f72be4c000727'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1463220686000' class='quanto-date posted-at response-posted-at' href='#5736f9c7628f72be4c000727'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hmm.  I still get:</p>

<pre><code>Something went wrong. Sorry for the inconvenience. Try using the built-in debugger to analyze your code. If you would like help, send us an email.  
InterfaceError: connection already closed  
There was a runtime error on line 139.

</code></pre>

<p>I thought that the algos run on the server.  Maybe there is an interaction with the local pc environment?  Internet connection?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5737177411ac838d4a000826' id='5737177411ac838d4a000826'>
<a href='#5737177411ac838d4a000826'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1463228283000' class='quanto-date posted-at response-posted-at' href='#5737177411ac838d4a000826'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Tried again and it ran.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='573998f639bf45f07700044c' id='573998f639bf45f07700044c'>
<a href='#573998f639bf45f07700044c'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5620a31020b4c8f321000065'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/14312b4fccdb18030a83731d81863af5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5620a31020b4c8f321000065'>Sanning Sanning</a>
</div>
<a UTCms='1463392507000' class='quanto-date posted-at response-posted-at' href='#573998f639bf45f07700044c'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Grant,</p>

<p>I&#39;ve noticed the same error on number of my algorithms and I really think it somehow depends on the time of the day you run it. Not sure why, but this is my suspicion.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='578525cb918dc6247a0000f4' id='578525cb918dc6247a0000f4'>
<a href='#578525cb918dc6247a0000f4'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57727e3ccc4c9fb542000663'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e2994f22469efb05e3a4645a031aa882?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57727e3ccc4c9fb542000663'>Matthew Field</a>
</div>
<a UTCms='1468343766000' class='quanto-date posted-at response-posted-at' href='#578525cb918dc6247a0000f4'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Frank - re KGC, I had the same problem. See this thread: <a href="https://www.quantopian.com/posts/long-short-pipeline-multi-factor">https://www.quantopian.com/posts/long-short-pipeline-multi-factor</a><br>
AFAICS, it&#39;s bad stock split data?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b136c27a74808004224a10e' id='5b136c27a74808004224a10e'>
<a href='#5b136c27a74808004224a10e'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5ae9fc7db16b9339bf0d4997'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/96d136f0830e9bd9d16be17119689cc0?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5ae9fc7db16b9339bf0d4997'>Leo c</a>
<span class='badge medal'></span>
</div>
<a UTCms='1527999527000' class='quanto-date posted-at response-posted-at' href='#5b136c27a74808004224a10e'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi guys,</p>

<ol>
<li><p>From the long short algo, is there a way to turn off the optimizer? By turning off the optimizer, i can see the equal weights of individual positions.</p></li>
<li><p>Also, is there a way to assign more weights to specific sector ie Technology since they occupy more weights in S&amp;P 500. I think is to insert somewhere below the code?  </p></li>
</ol>

<pre><code>    # The final output of our pipeline should only include  
    # the top/bottom 300 stocks by our criteria  
    long_short_screen = ( longs | shorts )

    # Create pipeline  
    pipe = Pipeline(  
        columns={  
            &#39;longs&#39;: longs,  
            &#39;shorts&#39;: shorts,  
            &#39;combined_factor&#39;: combined_factor  
        },  
        screen=long_short_screen  
    )  
    return pipe  
</code></pre>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b1aa9d9b9774f269109fa2f' id='5b1aa9d9b9774f269109fa2f'>
<a href='#5b1aa9d9b9774f269109fa2f'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5b042c4ed2a9dc00498b7d14'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/71cd389be4b5f00be00102c7b186c77c?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5b042c4ed2a9dc00498b7d14'>Lucy Wu</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1528474073000' class='quanto-date posted-at response-posted-at' href='#5b1aa9d9b9774f269109fa2f'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Leo, </p>

<p>Note that this post is on the older side and the example here doesn&#39;t use the Optimize API; you should take a look at the [more recent long-short equity strategy][1] for an updated version of this algo that uses Optimize. I&#39;ll base my answers here off the updated algo, since Optimize has built-in constraints for equal weighting and sector weighting!</p>

<ol>
<li><p>You can optimize using the <code>TargetWeights</code> objective to get equal weights for each position. Specifically, you can make a dictionary that assigns equal weight to each asset in your pipeline, then feed that dictionary into the <code>TargetWeights</code> objective. I&#39;ve attached an example here.</p></li>
<li><p>You can assign more weight to a specific sector using the <code>NetGroupExposure</code> constraint within the Optimize API (full documentation can be found [here][2]).</p></li>
</ol>

<p>UPDATE: Oops, forgot to account for the short side of the strategy! Huge thanks to @Blue Seahawk for pointing this out. I deleted my earlier long-only responses and attached a corrected example; the method is the same, but the dictionary passed into <code>TargetWeights</code> now has negative values for short stocks. Sorry for any confusion!  </p>
</div>
<div class='disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='5b1ecd3f515f79004077149a' id='5b1ecd3f515f79004077149a'>
<a href='#5b1ecd3f515f79004077149a'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5ae9fc7db16b9339bf0d4997'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/96d136f0830e9bd9d16be17119689cc0?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5ae9fc7db16b9339bf0d4997'>Leo c</a>
<span class='badge medal'></span>
</div>
<a UTCms='1528745279000' class='quanto-date posted-at response-posted-at' href='#5b1ecd3f515f79004077149a'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Lucy,</p>

<p>Is your weighting scheme correct? You wrote:</p>

<pre><code>    long_equal_weight = 0.5/len(longs)  
    short_equal_weight = -0.5/len(shorts)  
</code></pre>

<p>Should it be the following for your example? Since we need to make full use of the capital instead half of it.</p>

<pre><code>    long_equal_weight = 1.0/len(longs)  
    short_equal_weight = -1.0/len(shorts)  
</code></pre>

<p>Thanks  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5b27d9e07dfdfc4aff5125e1' id='5b27d9e07dfdfc4aff5125e1'>
<a href='#5b27d9e07dfdfc4aff5125e1'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5b042c4ed2a9dc00498b7d14'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/71cd389be4b5f00be00102c7b186c77c?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5b042c4ed2a9dc00498b7d14'>Lucy Wu</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1529338336000' class='quanto-date posted-at response-posted-at' href='#5b27d9e07dfdfc4aff5125e1'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi @Leo,</p>

<p>The 0.5 weighting scheme from my earlier example does make full use of the capital --  it results in 0.5 long leverage and -0.5 short leverage, which means gross leverage of 1.0 (our goal!). The 1.0-weighting scheme that you provide actually results in 2x leverage.</p>

<p>For example, let&#39;s say we have total portfolio capital of $1,000. Under the 0.5-weighting scheme, we put $500 in long positions and $500 in short positions, resulting in gross leverage of $1000/$1000 = 1x.  Under the 1.0-weighting scheme, we put $1000 in long positions and $1000 in short positions, resulting in gross leverage of $2000/$1000 = 2x.  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

</div>
<div class='sign-in-please'>
Please <a href='/signin?return_to=/posts/quantopian-lecture-series-long-short-equity-algorithm'>sign in</a> or
<a href='/users/sign_up?redirect_to=/posts/quantopian-lecture-series-long-short-equity-algorithm'>join Quantopian</a> to
post a reply.
</div>
</div>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId: "550580758292093",
      status: false,
      cookie: true,
      xfbml: true
    });
  };
  
  (function(d, debug){
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) {return;}
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
    ref.parentNode.insertBefore(js, ref);
  }(document, /*debug*/ false));
  
  window.twttr = (function (d,s,id) {
    var t, js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return; js=d.createElement(s); js.id=id;
    js.src="//platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs);
    return window.twttr || (t = { _e: [], ready: function(f){ t._e.push(f) } });
  }(document, "script", "twitter-wjs"));
</script>
<script>
  $(document).ready(function () {
    quanto.instances.pm = new quanto.PostManager(false)
  });
</script>

<div class='login-footer'>
<div class='container'>
<div class='login-footer-text'>
Become an expert in quant finance through Quantopian's hands-on education.
</div>
<div class='login-footer-button'>
<button class='btn btn-v2 stroke join-modal-link mixpanel-button' data-event='anon join footer click posts' data-mixpanel='click'>
Join Now
</button>
</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='error-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'>Error</span>
</div>
<div class='modal-body body-content'>
<p>Sorry, something went wrong.  Try again or contact us by <a class='feedback-link'>sending feedback</a>.</p>
</div>
<div class='modal-footer'>
<button class='btn btn-v2 blue action-button' data-dismiss='modal' href='#'>Close</button>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='confirmation-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'></span>
</div>
<div class='modal-body body-content'></div>
<div class='modal-footer'>
<div class='pull-right'>
<button class='btn btn-v2 border' data-dismiss='modal'>Cancel</button>
<button class='btn btn-v2 blue action-button' data-dismiss='modal'></button>
</div>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='message-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'></span>
</div>
<div class='modal-body body-content'></div>
<div class='modal-footer'>
<button class='btn btn-v2 blue action-button' data-dismiss='modal' id='message-modal-close'>Close</button>
</div>

</div>
</div>
</div>

<div class='always-bootstrap3-modals'>
<div class='fade modal quanto-modal-v2' id='join-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header visible-small'>
<span class='title'>
Join Quantopian.  It's Free!
</span>
<div class='modal-x-out visible-xs'></div>
</div>
<div class='modal-body'>
<div class='flex-wrap'>
<div class='join-left-pane hidden-small'>
<div class='margin_30l'>
<div class='join-hero-text'>
Join Quantopian.  It's Free!
</div>
<div class='join-benefits'>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image code'></div>
</div>
<div class='join-text'>
Use our research platform, backtester, and dozens of clean data sets.
</div>
</div>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image learn'></div>
</div>
<div class='join-text'>
Learn with our hands-on education and community forums.
</div>
</div>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image win'></div>
</div>
<div class='join-text'>
Enter to win cash prizes in our contest.
</div>
</div>
</div>
<div class='hidden saved-reminder'>
Don't worry, all your work is already saved.
</div>
</div>
</div>
<div class='join-right-pane'>
<div class='hidden-small'>
<div class='button-pane'>
<a class="button btn-v2 user-form-btn" href="/signin">Already a Quantopian member?</a>
</div>
</div>
<div class='visible-small'>
<div class='already-member'>
<a href='/signin'>Already a Quantopian member?</a>
</div>
</div>
<form class="quanto-form-v2" id="new-user-modal-form" action="/users" accept-charset="UTF-8" data-remote="true" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><div class='error-message hidden'>
<div class='message'></div>
</div>
<div class='name-group'>
<div class='form-group inline-block'>
<label for="user_firstname">First Name</label>
<input class="form-control firstname" pattern=".*" required="required" autocomplete="off" autofocus="autofocus" type="text" name="user[firstname]" id="user_firstname" />
</div>
<div class='form-group inline-block'>
<label for="user_lastname">Last Name</label>
<input class="form-control" value="" pattern=".*" required="required" autocomplete="off" type="text" name="user[lastname]" id="user_lastname" />
</div>
</div>
<div class='form-group'>
<label for="user_email">Email</label>
<input class="form-control" value="" pattern=".*" required="required" autocomplete="off" type="email" name="user[email]" id="user_email" />
</div>
<div class='form-group'>
<label for="user_password">Password</label>
<input autocomplete="off" class="form-control" pattern=".*" required="required" type="password" name="user[password]" id="user_password" />
</div>
<div class='checkbox eula'>
<input id='eula-checkbox' type='checkbox'>
<div class='quanto-checkbox'></div>
<label for='eula-checkbox' id='checkbox-label'>I accept the <a href='/policies/terms' target='_blank'>Terms Of Use</a> and <a href='/policies/privacy' target='_blank'>Privacy Policy</a>.</label>
</div>
<div class='checkbox mailchimp-box'>
<input name="user[allow_marketing_emails]" type="hidden" value="0" /><input type="checkbox" value="1" name="user[allow_marketing_emails]" id="user_allow_marketing_emails" />
<div class='quanto-checkbox'></div>
<label for='user_allow_marketing_emails'>
Send me email updates with the latest news from the Quantopian community. We send these emails about once a month.
</label>
</div>
<div class='button-row'>
<button class='btn-v2 blue full' data-redirect-to='/tutorials/getting-started' id='sign-up-button' type='Submit'>Join Quantopian</button>
</div>
</form></div>
</div>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='feedback-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title'>Contact Support</span>
</div>
<div class='modal-body'>
<form class='anon-user controls quanto-form-v2' id='feedback-form'>
<div class='feedback-inputs'>
<div class='form-group'>
<input autofocus class='form-control' id='feedback-email-box' name='email' placeholder='Email Address' type='email'>
</div>
<div class='form-group'>
<input class='form-control' id='feedback-name-box' placeholder='Name' type='name'>
</div>
<div class='form-group'>
<textarea class='form-control' id='feedback-box' name='feedback' placeholder='What may we help you with?' rows='10'></textarea>
</div>
</div>
</form>
<form class='hidden quanto-form-v2 select-resource-area'>
<div class='select-step select-type-step'>
<div class='form-group'>
<select class='form-control select-resource-dropdown' title='Select the item you need help with'>
<option value='algorithm'>Algorithm</option>
<option value='backtest'>Backtest</option>
<option value='notebook'>Notebook</option>
</select>
</div>
</div>
<div class='select-step loading-area hidden'>
<div class='loading-text'>
Loading...
</div>
</div>
<div class='select-step empty-list-area hidden'>
<div class='back-button'>Go Back</div>
<div class='empty-text'>
No <span class='empty-list-resource-text'>algorithms</span> found
</div>
</div>
<div class='select-algo-area select-step hidden'>
<div class='back-button'>Go Back</div>
<table class='select-algo-table select-item-table'>
<thead>
<tr>
<th>
Algorithm
<span class='sort-icon'></span>
</th>
<th>
Last Modified
<span class='sort-icon'></span>
</th>
</tr>
</thead>
</table>
</div>
<div class='select-backtest-area select-step hidden'>
<div class='back-button'>Go Back</div>
<table class='select-backtest-table select-item-table'>
<thead>
<tr>
<th>
Backtest
<span class='sort-icon'></span>
</th>
<th>
Started At
<span class='sort-icon'></span>
</th>
<th>
Overall Return
<span class='sort-icon'></span>
</th>
<th>
Status
<span class='sort-icon'></span>
</th>
</tr>
</thead>
</table>
</div>
<div class='select-notebook-area select-step hidden'>
<div class='back-button'>Go Back</div>
<div class='subtitle select-cell-step'>
Choose a cell to use as the preview for this notebook:
</div>
<div class='iframe-wrapper'>
<iframe class='notebook-list-iframe slow-fade' src=''></iframe>
</div>
<div class='progress-area slow-fade in'>
<div class='progress-container'>
<div class='progress-title'>
<div class='quanto-loader gray'></div>
</div>
</div>
</div>
<div class='maintenance-area'>
<div class='error-container'>
<div class='row'>
<div class='col-md-14 msg-title h1'>
Sorry, research is currently undergoing maintenance.
</div>
</div>
<div class='row'>
<div class='col-md-14 msg-subtitle'>
Please check back shortly. If the maintenance period lasts longer than expected,
you can find updates on <a href='https://status.quantopian.com/'>status.quantopian.com</a>.
</div>
</div>

</div>
</div>
<div class='error-area'>
<div class='error-container'>
<div class='row'>
<div class='col-md-14 msg-title h1'>
Sorry, something went wrong on our end.
</div>
</div>
<div class='row'>
<div class='col-md-14 msg-subtitle'>
Please try again or contact <a class='open-feedback-link'>Quantopian support</a>.
</div>
</div>

</div>
</div>

</div>
<div class='selected-item-area select-step hidden'>
<div class='selected-item-group form-group'>
<div class='selected-item-control'>
<input class='disabled form-control selected-item-box' type='text'>
<span class='secure-icon icon'></span>
<button class='btn change change-primary-item-button change-selection-button new-btn transparent' type='button'>
<span class='refresh-icon icon'></span>
</button>
</div>
<div class='selected-backtest-control'>
<input class='disabled form-control selected-backtest-box' type='text'>
<span class='secure-icon icon'></span>
<button class='btn change-backtest-button change-selection-button new-btn transparent' type='button'>
<span class='refresh-icon icon'></span>
</button>
</div>
</div>
<div class='checkbox-group form-group'>
<div class='checkbox give-permission'>
<input class='give-permission-checkbox' id='feedback-give-permission-checkbox' type='checkbox'>
<div class='quanto-checkbox'></div>
<label for='feedback-give-permission-checkbox'>
I permit Quantopian to view <span class='item-type-text'>this algorithm,
backtest or notebook and their imported datasets</span> for the purpose of providing support.
</label>
</div>
</div>
</div>
</form>

<div class='loading-step hidden'>
<div class='loading-text'>
Submitting your support ticket...
</div>
</div>
<div class='success-step invisible'>
<h2 class='title center'>
You've successfully submitted a support ticket.
</h2>
<p>
Our support team will be in touch soon.
</p>
<div class='confirmation-image'></div>
</div>
</div>
<div class='modal-footer'>
<button class='btn-v2 blue' id='send-feedback-button'>Send</button>
<div class='error-message hidden'>
Error submitting support request.
</div>
</div>

</div>
</div>
</div>

</div>
</div>
<div class='footer' id='quanto-footer-container'>
<div class='container'>
<div class='row header-row'>
<div class='col-sm-fourth span3'>
<img class='async-image logotype-image' data-src='https://qf.quantopian.com/assets/logos/logo-q-full-b23bda5ac757691b9259d396d0dfef91567165868b8c955a836649686e6d2248.svg'>
</div>
<div class='col-sm-fourth span3'></div>
<div class='col-sm-fourth span3'></div>
<div class='col-sm-fourth span3'>
<div class='feedback-email'>
Need help?
<a href="/cdn-cgi/l/email-protection#4e282b2b2a2c2f2d250e3f3b2f203a213e272f20602d2123">Contact support.</a>
</div>
</div>
</div>
<div class='row'>
<div class='col-sm-fourth span3'>
<div class='header'>Company</div>
<div class='footer-row'>
<a href='/about'>About</a>
</div>
<div class='footer-row'>
<a href='/academia'>Academia</a>
</div>
<div class='footer-row'>
<a href='/jobs'>Careers</a>
</div>
<div class='footer-row'>
<a href='/posts'>Community</a>
</div>
<div class='footer-row'>
<a href='/events'>Events</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Learn &amp; Support</div>
<div class='footer-row'>
<a href='/faq'>FAQ</a>
</div>
<div class='footer-row'>
<a href='/tutorials/getting-started'>Getting Started</a>
</div>
<div class='footer-row'>
<a href='/docs'>Documentation</a>
</div>
<div class='footer-row'>
<a href='/tutorials'>Tutorials</a>
</div>
<div class='footer-row'>
<a href='/lectures'>Lectures</a>
</div>
<div class='footer-row'>
<a href='/opensource'>Open Source</a>
</div>
<div class='footer-row'>
<a href='https://status.quantopian.com/'>Site Status</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Notices</div>
<div class='footer-row'>
<a href='/policies/terms'>Terms of Use</a>
</div>
<div class='footer-row'>
<a href='/policies/privacy'>Privacy Policy</a>
</div>
<div class='footer-row'>
<a href='/security'>Security</a>
</div>
<div class='footer-row'>
<a href='/policies/code-of-conduct'>Code of Conduct</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Follow Us</div>
<div class='footer-row'>
<a href='https://www.twitter.com/quantopian'>Twitter</a>
</div>
<div class='footer-row'>
<a href='https://www.facebook.com/quantopian'>Facebook</a>
</div>
<div class='footer-row'>
<a href='https://www.linkedin.com/company/quantopian'>LinkedIn</a>
</div>
<div class='footer-row'>
<a href='https://www.youtube.com/channel/UC606MUq45P3zFLa4VGKbxsg'>YouTube</a>
</div>
</div>
</div>
<div class='row'>
<div class='col-xs-14 span12'>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian.
</p>
<p>
In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>

</div>
</div>
</div>
</div>
</div>
<div class='mobile-footer'>
<div class='mobile-nav-category main-links'>
<div class='mobile-nav-row-footer'>
<a href='/about'>About Quantopian</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/jobs'>Careers</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/posts'>Community</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/events'>Events</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/docs'>Documentation</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/academia'>Academia</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/lectures'>Lectures</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://status.quantopian.com/'>Status</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.facebook.com/quantopian'>Facebook</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.twitter.com/quantopian'>Twitter</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.linkedin.com/company/quantopian'>LinkedIn</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.youtube.com/channel/UC606MUq45P3zFLa4VGKbxsg'>YouTube</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/policies/terms'>Terms of Use</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/policies/privacy'>Privacy Policy</a>
</div>
</div>
<div class='mobile-nav-category'>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian.
</p>
<p>
In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>

</div>
</div>
</div>

</div>
<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script></body>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', "UA-8519877-1", {
    cookieDomain: "quantopian.com"
  });
  ga('set', 'dimension1', 'session_5f9dc7425d387f00077e48e4');
  
  ga('send', 'pageview');
</script>

<input type="hidden" name="is_mac" id="is_mac" value="false" />
<input type="hidden" name="mp" id="mp" value="75873953cd404bcc1da88a55ff51e3b4" />
<script>
  (function(e,a){if(!a.__SV){var b=window;try{var c,l,i,j=b.location,g=j.hash;c=function(a,b){return(l=a.match(RegExp(b+"=([^&]*)")))?l[1]:null};g&&c(g,"state")&&(i=JSON.parse(decodeURIComponent(c(g,"state"))),"mpeditor"===i.action&&(b.sessionStorage.setItem("_mpcehash",g),history.replaceState(i.desiredHash||"",e.title,j.pathname+j.search)))}catch(m){}var k,h;window.mixpanel=a;a._i=[];a.init=function(b,c,f){function e(b,a){var c=a.split(".");2==c.length&&(b=b[c[0]],a=c[1]);b[a]=function(){b.push([a].concat(Array.prototype.slice.call(arguments,
  0)))}}var d=a;"undefined"!==typeof f?d=a[f]=[]:f="mixpanel";d.people=d.people||[];d.toString=function(b){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);b||(a+=" (stub)");return a};d.people.toString=function(){return d.toString(1)+".people (stub)"};k="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
  for(h=0;h<k.length;h++)e(d,k[h]);a._i.push([b,c,f])};a.__SV=1.2;b=e.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";c=e.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}})(document,window.mixpanel||[]);
  mixpanel.init("75873953cd404bcc1da88a55ff51e3b4");
</script>
<script>
  mixpanel.track("view page", {"page": window.location.pathname});
</script>
</html>
