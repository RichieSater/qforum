<!DOCTYPE html>
<html>
<head>
<link href='i1.wp.com' rel='dns-prefetch'>
<link href='i2.wp.com' rel='dns-prefetch'>
<link href='i3.wp.com' rel='dns-prefetch'>
<meta content='2HgX9mcLHaPOX6sfaaAkhWtblhEB9yUNw4l6l46e1k4' name='google-site-verification'>
<link rel="shortcut icon" type="image/x-icon" href="external/favicon-q-ac1a76f2c200e9026b5b1147519bb4fab6256910588b831e2411bc6c7c1218c3.png" />
<title>
Introducing the Pipeline API
</title>
<meta content='Today we want to introduce you to the Pipeline. This new API opens up a world of new algorithm opportunities. You can now dynamically select portfolios from the entire universe of 8000+ securities enabling larger portfolios and easy evaluation of both long and short positions.  The Pipeline enables you to evaluate 8000+ securities on a daily basis, using price, volume, fundamental data, and soon will include all data purchased from the Quantopian Store.  You can calculate factors (scalar...' name='description'>
<link rel="stylesheet" media="all" href="external/quanto-base-bundle-e8eb6050172aa0d24124d5c24bac90b2cccd88b5b9c7742026c0e9efab038c6e.css" />
<link rel="stylesheet" media="all" href="external/quanto-posts-bundle-aab01368d3f82d8dafc94ee9eabb82e77dc8c9fbbffa952fdcdc744dfa523cf3.css" />
<script src="external/quanto_global-057218867db29d5768131af5d6fb3476cef098e7d9e655108befb903c7ee985e.js"></script>
<script src="external/posts_bundle-3dfd82fa469c393d752e461d837aec9e4e364ae39f49198e34a6626f2180fdf7.js"></script>
<link href='external/logo-q-180x180-0f5a6a439c99203ed4aea6f656e7604c543d287be43d8b17c7591c1131f09a59.png' rel='apple-touch-icon'>
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="meT2TYRodYrpy+bQwymcuyzedZJzuO+8LTZ7ca1eoLTlgoAAJp6naVDWv+GMxjTPFFBW+wl0+qevOaAbBxvCDw==" />
<meta content='width=device-width, initial-scale=1.0' name='viewport'>
<script>
//<![CDATA[
window.quanto_data={};quanto_data.bounce_back_params={"show_modal":null,"feedback_text":null};quanto_data.namespace="public";quanto_data.talib_info={"ADOSC":["Chaikin A/D Oscillator (Volume Indicators)",["fastperiod","3"],["slowperiod","10"]],"ADX":["Average Directional Movement Index (Momentum Indicators)",["timeperiod","14"]],"ADXR":["Average Directional Movement Index Rating (Momentum Indicators)",["timeperiod","14"]],"APO":["Absolute Price Oscillator (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["matype","0"]],"AROON":["Aroon (Momentum Indicators)",["timeperiod","14"]],"AROONOSC":["Aroon Oscillator (Momentum Indicators)",["timeperiod","14"]],"ATR":["Average True Range (Volatility Indicators)",["timeperiod","14"]],"BBANDS":["Bollinger Bands (Overlap Studies)",["timeperiod","5"],["nbdevup","2"],["nbdevdn","2"],["matype","0"]],"BETA":["Beta (Statistic Functions)",["timeperiod","5"]],"CCI":["Commodity Channel Index (Momentum Indicators)",["timeperiod","14"]],"CMO":["Chande Momentum Oscillator (Momentum Indicators)",["timeperiod","14"]],"CORREL":["Pearson's Correlation Coefficient (r) (Statistic Functions)",["timeperiod","30"]],"DEMA":["Double Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"DX":["Average Directional Movement Index (Momentum Indicators)",["timeperiod","14"]],"EMA":["Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"KAMA":["Kaufman Adaptive Moving Average (Overlap Studies)",["timeperiod","30"]],"LINEARREG":["Linear Regression (Statistic Functions)",["timeperiod","14"]],"LINEARREG_ANGLE":["Linear Regression Angle (Statistic Functions)",["timeperiod","14"]],"LINEARREG_INTERCEPT":["Linear Regression Intercept (Statistic Functions)",["timeperiod","14"]],"LINEARREG_SLOPE":["Linear Regression Slope (Statistic Functions)",["timeperiod","14"]],"MA":["Moving average (Overlap Studies)",["timeperiod","30"],["matype","0"]],"MACD":["Moving Average Convergence/Divergence (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["signalperiod","9"]],"MACDEXT":["MACD with controllable MA type (Momentum Indicators)",["fastperiod","12"],["fastmatype","0"],["slowperiod","26"],["slowmatype","0"],["signalperiod","9"],["signalmatype","0"]],"MACDFIX":["Moving Average Convergence/Divergence Fix 12/26 (Momentum Indicators)",["signalperiod","9"]],"MAX":["Highest values over a specified period (Math Operators)",["timeperiod","30"]],"MAXINDEX":["Index of highest value over a specified period (Math Operators)",["timeperiod","30"]],"MFI":["Money Flow Index (Momentum Indicators)",["timeperiod","14"]],"MIDPOINT":["Midpoint over period (Overlap Studies)",["timeperiod","14"]],"MIDPRICE":["Midpoint Price over period (Overlap Studies)",["timeperiod","14"]],"MIN":["Lowest value over a specified period (Math Operators)",["timeperiod","30"]],"MININDEX":["Index of lowest value over a specified period (Math Operators)",["timeperiod","30"]],"MINMAX":["Lowest and highest values over a specified period (Math Operators)",["timeperiod","30"]],"MINMAXINDEX":["Indexes of lowest and highest values over a specified period (Math Operators)",["timeperiod","30"]],"MINUS_DI":["Minus Directional Indicator (Momentum Indicators)",["timeperiod","14"]],"MINUS_DM":["Minus Directional Movement (Momentum Indicators)",["timeperiod","14"]],"MOM":["Momentum (Momentum Indicators)",["timeperiod","10"]],"NATR":["Normalized Average True Range (Volatility Indicators)",["timeperiod","14"]],"PLUS_DI":["Plus Directional Indicator (Momentum Indicators)",["timeperiod","14"]],"PLUS_DM":["Plus Directional Movement (Momentum Indicators)",["timeperiod","14"]],"PPO":["Percentage Price Oscillator (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["matype","0"]],"ROC":["Rate of change: ((price/prevPrice)-1)*100 (Momentum Indicators)",["timeperiod","10"]],"ROCP":["Rate of change Percentage: (price-prevPrice)/prevPrice (Momentum Indicators)",["timeperiod","10"]],"ROCR":["Rate of change ratio: (price/prevPrice) (Momentum Indicators)",["timeperiod","10"]],"ROCR100":["Rate of change ratio 100 scale: (price/prevPrice)*100 (Momentum Indicators)",["timeperiod","10"]],"RSI":["Relative Strength Index (Momentum Indicators)",["timeperiod","14"]],"SMA":["Simple Moving Average (Overlap Studies)",["timeperiod","30"]],"STDDEV":["Standard Deviation (Statistic Functions)",["timeperiod","5"],["nbdev","1"]],"STOCH":["Stochastic (Momentum Indicators)",["fastk_period","5"],["slowk_period","3"],["slowk_matype","0"],["slowd_period","3"],["slowd_matype","0"]],"STOCHF":["Stochastic Fast (Momentum Indicators)",["fastk_period","5"],["fastd_period","3"],["fastd_matype","0"]],"STOCHRSI":["Stochastic Relative Strength Index (Momentum Indicators)",["timeperiod","14"],["fastk_period","5"],["fastd_period","3"],["fastd_matype","0"]],"T3":["Triple Exponential Moving Average (T3) (Overlap Studies)",["timeperiod","5"],["vfactor","0.7"]],"TEMA":["Triple Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"TRIMA":["Triangular Moving Average (Overlap Studies)",["timeperiod","30"]],"TRIX":["1-day Rate-Of-Change (ROC) of a Triple Smooth EMA (Momentum Indicators)",["timeperiod","30"]],"TSF":["Time Series Forecast (Statistic Functions)",["timeperiod","14"]],"ULTOSC":["Ultimate Oscillator (Momentum Indicators)",["timeperiod1","7"],["timeperiod2","14"],["timeperiod3","28"]],"VAR":["Variance (Statistic Functions)",["timeperiod","5"],["nbdev","1"]],"WILLR":["Williams' %R (Momentum Indicators)",["timeperiod","14"]],"WMA":["Weighted Moving Average (Overlap Studies)",["timeperiod","30"]]};quanto_data.nb_preview_url="https://notebooks-preview.prd.pub.quantopian.com";quanto_data.delay_nb_preview_load=false;
//]]>
</script>
<meta content='https://www.quantopian.com/posts/introducing-the-pipeline-api' property='og:url'>
<meta content='Introducing the Pipeline API' property='og:title'>

<input type="hidden" name="env" id="quanto-env" value="production" />
<meta content='550580758292093' property='fb:app_id'>
<meta content='https://www.quantopian.com/posts/introducing-the-pipeline-api' property='og:url'>
<meta content='https://media.quantopian.com/public/og-image-default.png' property='og:image'>
<meta content='Introducing the Pipeline API' property='og:title'>
<meta content='Today we want to introduce you to the Pipeline. This new API opens up a world of new algorithm opportunities. You can now dynamically select portfolios from the entire universe of 8000+ securities enabling larger portfolios and easy evaluation of both long and short positions.  The Pipeline enables you to evaluate 8000+ securities on a daily basis, using price, volume, fundamental data, and soon will include all data purchased from the Quantopian Store.  You can calculate factors (scalar...' property='og:description'>
</head>
<script type='application/ld+json'>
  {
    "@context": "http://schema.org",
    "@type": "Organization",
    "url": "https://www.quantopian.com",
    "logo": "https://media.quantopian.com/logos/logo-q-press-red.png"
  }
</script>
<body class='' ontouchstart=''>
<div id='fb-root'></div>
<div class='wrapper'>
<div class='alert-v2 error'>
<div class='message'>
Quantopian's community platform is shutting down. Please read <a href="/posts/quantopians-community-services-are-closing">this post</a> for more information and <a href='/account#account'>download your code</a>.
</div>
</div>
<div class='navbar navbar-default navbar-static-top' id='app-navbar'>
<div class='container-fluid'>
<div class='navbar-header'>
<button class='navbar-toggle collapsed' data-target='#app-navbar-collapse' data-toggle='collapse'>
<span class='icon hamburger-menu'></span>
</button>
<a class='navbar-brand' href='/home'>
<img class='logo-image async-image' data-src='external/logo-q-white-b141ea6018546e5a4ecc3d10d8440ec076fc4385764e948b322828cc70950a76.svg'>
</a>
</div>
<div class='collapse navbar-collapse' id='app-navbar-collapse'>
<ul class='nav navbar-nav navbar-right'>
<li class='dropdown quanto-dropdown-new'>
<li>
<a class='header' href='/docs'>
Documentation
</a>
</li>
<li class='dropdown quanto-dropdown-new'>
<a class='header' data-toggle='dropdown' href='#'>
Learn
</a>
<ul class='dropdown-menu'>
<li>
<a class='mixpanel-button' data-event='main nav getting started clicked' href='/tutorials/getting-started'>Getting Started</a>
</li>
<li>
<a class='mixpanel-button' data-event='main nav tutorials clicked' href='/tutorials'>Tutorials</a>
</li>
<li>
<a class='mixpanel-button' data-event='main nav lectures clicked' href='/lectures'>Lectures</a>
</li>
</ul>
</li>
<li>
<a class='header' href='/posts' id='forum-link'>
Forum
</a>
</li>
<li>
<a class="header" href="/signin?return_to=/posts/introducing-the-pipeline-api">Log In</a>
</li>
</li>

</ul>
</div>
</div>
</div>
<script>
  $(document).ready(function () {
    quanto.instances.fm = new quanto.FeedbackManager();
    quanto.instances.hm = new quanto.headerManager();
  })
</script>


<div class='content content-area new-style'>
<input type="hidden" name="page-id" id="page-id" value="postatomic" />
<script src="external/MathJax.js?config=TeX-AMS_HTML-full.js,Safe" async="async"></script>
<div class='container page-container post-atomic'>
<input id='parent-post-id-val' type='hidden' value='5614287d3b04b20701000029'>
<div class='post-container' data-post-id='5614287d3b04b20701000029' id='5614287d3b04b20701000029'>
<div class='back-button back-to-community'>Back to Community</div>
<div class='post-title'>Introducing the Pipeline API</div>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/53dfa27b197bbb2516000159'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/51e4ba51c431ce2b4373006a33ade2aa?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/53dfa27b197bbb2516000159'>Karen Rubin</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<span class='posted-at'>posted </span>
<span UTCms='1444161661000' class='quanto-date posted-at'></span>
<div class='pull-right other-actions'>
<div class='dropup inline-block'>
<div class='dropdown share-control other-action-link'>
<div data-toggle='dropdown'>
<div class='share-image'></div>
Share
</div>
<ul class='dropdown-menu share-options-menu'>
<li>
<a class='share-row' href='https://twitter.com/intent/tweet?text=Introducing the Pipeline API&amp;url=https%3A%2F%2Fwww.quantopian.com%2Fposts%2Fintroducing-the-pipeline-api%3Futm_source%3Dwebsite_share%26utm_campaign%3Dintroducing-the-pipeline-api%26utm_medium%3Dtwitter&amp;via=quantopian'>
<i class='icon icon-twitter'></i>
Share on Twitter
</a>
</li>
<li>
<div class='share-row facebook-button'>
<i class='icon icon-facebook'></i>
Share on Facebook
</div>
</li>
<li>
<div class='share-row linkedin-button' data-share-url='https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Fwww.quantopian.com%2Fposts%2Fintroducing-the-pipeline-api%3Futm_source%3Dwebsite_share%26utm_campaign%3Dintroducing-the-pipeline-api%26utm_medium%3Dlinkedin&amp;title=Introducing+the+Pipeline+API+%28Karen+Rubin%29&amp;source=Quantopian'>
<i class='icon icon-linkedin'></i>
Share on LinkedIn
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>

<div class='tags tag-row'>
<a class='tag mixpanel-button' data-event='tag click' data-mixpanel='Q Updates' data-tag-id='55c50e7d8d4710ec6e000012' href='/posts/tag/Q-Updates/newest'>Q Updates</a>
<a class='tag mixpanel-button' data-event='tag click' data-mixpanel='Feature Request' data-tag-id='55c50e7d8d4710ec6e000015' href='/posts/tag/Feature-Request/newest'>Feature Request</a>
<a class='tag mixpanel-button' data-event='tag click' data-mixpanel='Stat Arb' data-tag-id='55d33f863f6ba10065000003' href='/posts/tag/Stat-Arb/newest'>Stat Arb</a>
<a class='tag mixpanel-button' data-event='tag click' data-mixpanel='Pipeline' data-tag-id='561525bcf252a59171000001' href='/posts/tag/Pipeline/newest'>Pipeline</a>
</div>
<input type="hidden" name="social_fb_post_link" id="social_fb_post_link" value="https://www.quantopian.com/posts/introducing-the-pipeline-api?utm_source=website_share&amp;utm_campaign=introducing-the-pipeline-api&amp;utm_medium=facebook" />
<input type="hidden" name="social_post_image" id="social_post_image" value="external/logo-q-red-outline.png" />
<input type="hidden" name="social_post_author" id="social_post_author" value="Karen Rubin" />
<div class='body-text'>
<div class='body-text-container post-body'><p>Today we want to introduce you to the Pipeline. This new API opens up a world of new algorithm opportunities. You can now dynamically select portfolios from the entire universe of 8000+ securities enabling larger portfolios and easy evaluation of both long and short positions. </p>

<p>The Pipeline enables you to evaluate 8000+ securities on a daily basis, using price, volume, fundamental data, and soon will include all data purchased from the Quantopian Store.  You can calculate factors (scalar values) and filters (boolean values) to rank and select the stocks you want to track in real time throughout the day.  All of the data calculated in your pipeline can be used during the day&#39;s trading.</p>

<p>The <a href="https://www.quantopian.com/help#pipeline-title">full documentation is here</a>. Some highlights that you should know:</p>

<ul>
<li>Factors and filters are calculated using daily pricing, volume and fundamentals data. In backtesting, they are calculated in bulk, once per year. Although the values are calculated in advance, the platform passes the values needed, when they are needed, to avoid any look ahead bias. This allows the system to be performant in the face of thousands of calculations each day.<br></li>
<li>We&#39;ve started working on a <a href="https://www.quantopian.com/help#built-in-factors">library of factors</a> for you to get started with. These include simple moving average, VWAP and RIS. This library will continue to grow, and as everything is in Zipline, you should feel free to contribute. The more factors you share, the faster the library will grow.<br></li>
<li>Custom factors can also be calculated using pricing, volume, fundamentals data, and soon will include data purchased from the <a href="https://www.quantopian.com/store">Quantopian Store</a>.<br></li>
<li>Factors and filters are passed via pipeline_output and are given to you as a dataframe. The index is all securities that pass any screens set, the columns are any factor or filter added to the pipeline.<br></li>
<li>There is currently no limit to the number of factors and filters you can pass, however there is a limit on processing time available to you in handle_data (50 seconds) and before_trading_start (5 minutes). We have increased the amount of time allotted to before_trading_start as part of this new API. Your pipeline will begin to generate data when pipeline_output is called the first time. We recommend doing this in before_trading_start, and then passing the results as needed via context.<br></li>
<li>An algorithm&#39;s real time updates are still limited to 500 securities. You should use the pipeline API in conjunction with update_universe to narrow down to the securities that you need minutely data on each day. We anticipate increasing this limit in the future as well.<br></li>
<li>The pipeline API is a work in progress. We wanted to get it to you as soon as possible, but there are known limitations. All of these are in progress and will be completed as soon as possible.<br>

<ul>
<li>The pipeline API is not currently available in research, Quantopian paper trading, or IB paper or live trading.<br></li>
<li>Open price does not currently work when creating factors (high, low, close and volume do.)<br></li>
<li>All price data available to the pipeline API is split and dividend adjusted. This has shed some light on dividend data issues, including some dividends in foreign currencies.<br></li>
</ul></li>
<li>We have a number of <a href="https://www.quantopian.com/help#sample-pipeline-api">examples</a> to help explain the details. More will be coming. To get you started, attached is a price and volume ranking example that I wrote based on <a href="https://www.quantopian.com/posts/ranking-system-based-on-trading-volume-slash-shares-outstanding">this forum post</a>﻿. This has been a guide post user request as it calculates a couple of custom factors, filters the universe and then longs the top 5% and shorts the bottom 5%.<br></li>
<li>I will be <a href="https://attendee.gotowebinar.com/register/1005468568931134722">hosting a webinar on the API</a> on Thursday, October 8th to walk through the details of the API and answer questions. Sign up to join and learn more. </li>
</ul>

<p>This is the API <a href="https://www.quantopian.com/posts/how-to-build-a-stat-arb-strategy-on-quantopian">I first talked about back in May</a>. Over the past months, I’ve tested it with a full range of quants — from novices in the community to some of the contest winners all the way to professional quants. To all of you who’ve helped out along the way, your feedback was invaluable. Thank you.</p>
</div>
</div>
<div class='disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>

</div>

<div class='container page-container post-atomic'>
<div class='section-header reply-header'>
<div class='reply-title'>96 responses</div>
</div>
<div class='replies'>
<div class='post-container response-container' data-post-id='561429e010e6349756000060' id='561429e010e6349756000060'>
<a href='#561429e010e6349756000060'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/53dfa27b197bbb2516000159'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/51e4ba51c431ce2b4373006a33ade2aa?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/53dfa27b197bbb2516000159'>Karen Rubin</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1444162019000' class='quanto-date posted-at response-posted-at' href='#561429e010e6349756000060'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>This example comes from this <a href="https://www.quantopian.com/posts/ranking-system-based-on-trading-volume-slash-shares-outstanding">request in the forums</a>. At the time it was requested there wasn&#39;t an easy way to accomplish this on Quantopian. Today there is. </p>

<p>To quote the request: </p>

<p>I am stuck trying to build a stock ranking system with two signals:<br>
1. Trading Volume/Shares Outstanding.<br>
2. Price of current day / Price of 60 days ago.<br>
Then rank Russell 2000 stocks every month, long the top 5%, short the bottom 5%.</p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='561435f1f89f85b8d3000033' id='561435f1f89f85b8d3000033'>
<a href='#561435f1f89f85b8d3000033'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5033e9d73fb2eb0002000231'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/4a9a839742731aad6e110e1d3586e020?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5033e9d73fb2eb0002000231'>Simon Thornington</a>
</div>
<a UTCms='1444165108000' class='quanto-date posted-at response-posted-at' href='#561435f1f89f85b8d3000033'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Looks great, thanks!  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='561445038c09fa52080000bc' id='561445038c09fa52080000bc'>
<a href='#561445038c09fa52080000bc'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1444168969000' class='quanto-date posted-at response-posted-at' href='#561445038c09fa52080000bc'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Karen,</p>

<p>Congratulations on the release!</p>

<p>On the help page, it appears that there is no way to do computations between securities (compare A to B in some fashion).  Or am I misinterpreting (I just took a quick glance)?</p>

<p>Grant  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5614473de7c1990f420000b9' id='5614473de7c1990f420000b9'>
<a href='#5614473de7c1990f420000b9'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5033e9d73fb2eb0002000231'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/4a9a839742731aad6e110e1d3586e020?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5033e9d73fb2eb0002000231'>Simon Thornington</a>
</div>
<a UTCms='1444169537000' class='quanto-date posted-at response-posted-at' href='#5614473de7c1990f420000b9'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>You definitely can; when writing a custom factor, your compute function gets a full numpy array of assets by window-days.  If you want to compare the output of various factors between various assets, you could do that with pandas in before_trading_starts.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56145334f2bcd7f7a6000110' id='56145334f2bcd7f7a6000110'>
<a href='#56145334f2bcd7f7a6000110'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1444172599000' class='quanto-date posted-at response-posted-at' href='#56145334f2bcd7f7a6000110'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>But say I wanted to compute a factor for A, B, and C, comparing each to D?  I think you are saying that I would get a numpy array with columns corresponding to A, B, C, &amp; D.  Then, my factor could be A compared to D, B compared to D, and C compared to D.  I don&#39;t understand how this could be computed over 8,000+ securities in 5 minutes or less in before_trading_starts, unless the comparison is trivial.  Or would it be done overnight?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='561455418c09fa520800012a' id='561455418c09fa520800012a'>
<a href='#561455418c09fa520800012a'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5033e9d73fb2eb0002000231'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/4a9a839742731aad6e110e1d3586e020?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5033e9d73fb2eb0002000231'>Simon Thornington</a>
</div>
<a UTCms='1444173125000' class='quanto-date posted-at response-posted-at' href='#561455418c09fa520800012a'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>If you do it all with vectorized calculations, it should be no problem at all.  If you write a loop, then you will have a problem.</p>

<pre><code>is_less_than_spy = factor[factor &lt; factor[spy_idx]] # assuming pandas  
</code></pre>

<p>Should take milliseconds, at worst.  Calculating a linear regression of every stock vs SPY should also be doable, but I am not sure if there will be time for that, since it cannot be vectorized across all the stocks AFAIK.</p>

<p>EDIT2: the column/row notation above might not be right, guessing.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56145ca18c09fa5208000150' id='56145ca18c09fa5208000150'>
<a href='#56145ca18c09fa5208000150'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1444175012000' class='quanto-date posted-at response-posted-at' href='#56145ca18c09fa5208000150'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I missed that the time-out for before_trading_starts is now 5 minutes (I recall it was 50 seconds).  This should help.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56148a566bb2c4bb160002b9' id='56148a566bb2c4bb160002b9'>
<a href='#56148a566bb2c4bb160002b9'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/54c9f95a1e5cc4ba4d0002a9'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3f82e324b72499238a6476b1a58c60aa?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/54c9f95a1e5cc4ba4d0002a9'>lets make america great again</a>
</div>
<a UTCms='1444186715000' class='quanto-date posted-at response-posted-at' href='#56148a566bb2c4bb160002b9'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>feature is great!</p>

<p>have been able to cut down a few pages of code into something that fits in a single page (well almost)</p>

<p>only negative is that I have been hitting memory limits after adding too many factors  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56148b34f2bcd71a1600026b' id='56148b34f2bcd71a1600026b'>
<a href='#56148b34f2bcd71a1600026b'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/54c9f95a1e5cc4ba4d0002a9'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3f82e324b72499238a6476b1a58c60aa?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/54c9f95a1e5cc4ba4d0002a9'>lets make america great again</a>
</div>
<a UTCms='1444186937000' class='quanto-date posted-at response-posted-at' href='#56148b34f2bcd71a1600026b'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>one small question</p>

<p>how big is the morningstar universe? because it seems like there are much more than 8000 stocks  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56148f186bb2c4bb160002de' id='56148f186bb2c4bb160002de'>
<a href='#56148f186bb2c4bb160002de'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/53dfa27b197bbb2516000159'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/51e4ba51c431ce2b4373006a33ade2aa?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/53dfa27b197bbb2516000159'>Karen Rubin</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1444187932000' class='quanto-date posted-at response-posted-at' href='#56148f186bb2c4bb160002de'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi LMAGA,<br>
I&#39;m glad you like the API. We are very excited about it. </p>

<p>If you are willing to share your algo, we&#39;d love to see it to try and help with the memory limits. Examples are the best way for us to  work on the system. Just drop us a line at <a href="/cdn-cgi/l/email-protection#2e484b4b4a4c4f4d456e5f5b4f405a415e474f40004d4143"><span class="__cf_email__" data-cfemail="a1c7c4c4c5c3c0c2cae1d0d4c0cfd5ced1c8c0cf8fc2cecc">[email&#160;protected]</span></a>. </p>

<p>You are right there are more than 8000 stocks. There are more than 20K known securities in the entire Quantopian universe, but about 8000 active on any given day.  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='5614a4198c09fa749e000303' id='5614a4198c09fa749e000303'>
<a href='#5614a4198c09fa749e000303'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/54460194d718f327fd000380'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e511e4eeb9334ef82f1caa7bd66c36dc?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/54460194d718f327fd000380'>Luca</a>
</div>
<a UTCms='1444193309000' class='quanto-date posted-at response-posted-at' href='#5614a4198c09fa749e000303'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Great API, this will solve a problem I had in my algo. I&#39;ll try this right away.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5614ecb98c09fa749e000495' id='5614ecb98c09fa749e000495'>
<a href='#5614ecb98c09fa749e000495'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1444211900000' class='quanto-date posted-at response-posted-at' href='#5614ecb98c09fa749e000495'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Karen,</p>

<p>I just noticed:</p>

<blockquote>
<p>Factors and filters are calculated using daily pricing, volume and fundamentals data.</p>
</blockquote>

<p>Does the API only work when running a backtest on daily bars?  Or does it support running on minutely bars, but only uses daily bars for the pipeline thingy?</p>

<p>One concern I would have about using daily prices is that they are derived by capturing the last trade of the day, from a high-frequency stream of trades.  Using one trade to represent the price for the entire day probably isn&#39;t the best practice.  Do you have plans to extend the API to include minute bars?</p>

<p>Would you be able to provide an example of a custom factor that compares a set of stocks to a reference?  For example, say I wanted to grab all NASDAQ stocks, and then compare each to QQQ.  For example, I could code the current price of each stock with a z-score (using a 30 day window), and determine if it is higher or lower than the corresponding z-score for QQQ, and by how much.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5614f0f65a676e49d30000b7' id='5614f0f65a676e49d30000b7'>
<a href='#5614f0f65a676e49d30000b7'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/53dfa27b197bbb2516000159'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/51e4ba51c431ce2b4373006a33ade2aa?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/53dfa27b197bbb2516000159'>Karen Rubin</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1444212985000' class='quanto-date posted-at response-posted-at' href='#5614f0f65a676e49d30000b7'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Morning Grant!<br>
The pipeline API works just fine with minute backtests, however it does use daily data in it&#39;s calculations in those backtests. The way we think of it, you are using the least granular data to narrow down the securities, then you can get minutely data to make your decisions. We do not have plans to extend to minutely data at this time. It wouldn&#39;t be practical for performance reasons. </p>

<p>I&#39;ll work on an correlation and/or zscore example. I don&#39;t have one on hand, but know I have to do one. Hopefully today or tomorrow.  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='5614fe0a8c09fa5208000507' id='5614fe0a8c09fa5208000507'>
<a href='#5614fe0a8c09fa5208000507'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1444216334000' class='quanto-date posted-at response-posted-at' href='#5614fe0a8c09fa5208000507'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thanks Karen,</p>

<p>Sorta makes sense to use daily prices, although as Simon points out, if you have enough memory and computations can be vectorized, then maybe you could handle the additional two orders of magnitude of minutely data.</p>

<p>As complement to this new API, you might try to sort out how users can get data from the research platform to the backtester/trading API (e.g. <a href="https://www.quantopian.com/posts/linking-research-output-to-fetch-csv-input">https://www.quantopian.com/posts/linking-research-output-to-fetch-csv-input</a>).</p>

<p>Grant  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='561508116bb2c4bb1600058a' id='561508116bb2c4bb1600058a'>
<a href='#561508116bb2c4bb1600058a'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5309211a7d02b22150000030'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3786c5e64868dc7e6b197f950d4a77c6?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5309211a7d02b22150000030'>Nicola Cannata </a>
</div>
<a UTCms='1444218901000' class='quanto-date posted-at response-posted-at' href='#561508116bb2c4bb1600058a'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Wow!!!!!<br>
Finally a technical screener...</p>

<p>Thanks Quantopian</p>

<p>@Grant  low and high (plus volume) for each day are available too. Not only close price.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='561545b6688f94ea2d000024' id='561545b6688f94ea2d000024'>
<a href='#561545b6688f94ea2d000024'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4e322fa200fffd0001000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f59406ed486edc76c94544468c11344d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4e322fa200fffd0001000001'>Scott Sanderson</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1444234681000' class='quanto-date posted-at response-posted-at' href='#561545b6688f94ea2d000024'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Grant @Simon</p>

<p>You can do comparisons by writing CustomFactor code that looks like this:</p>

<pre><code>
class MeanDifferenceWithSPY(CustomFactor):  
    &quot;&quot;&quot;  
    Factor computing the mean difference between each asset and SPY.

    This isn&#39;t a particularly useful thing to do, but it&#39;s illustrative of how  
    to do comparisons against a specific column of data.  
    &quot;&quot;&quot;  
    inputs = [USEquityPricing.close]

    def compute(self, today, assets, out, close):  
        # 8554 is SPY  
        spy_column = close[:, assets.searchsorted(8554)]

        # Subtract the price of SPY columnwise from 2D close array  
        # The fancy indexing on `spy_column` is telling numpy to treat the  
        # array as a (1 x N) column instead of a flat 1-D array.  
        subtracted = close - spy_column[:, np.newaxis]

        # Most numpy functions can write directly into an output array, which  
        # saves making an extra copy.  
        nanmean(subtracted, axis=1, out=out)  
</code></pre>

<p>Adding more robust support for this sort of thing is on the roadmap for more development.  There are a couple ways the engine can do this more efficiently for you if it knows what you want to do.  Most notably, it can avoid doing the <code>searchsorted</code> call every day, though that&#39;s a pretty inexpensive call for the orders of magnitude we&#39;re dealing with:</p>

<pre><code>In [1]: arr = arange(8000) # At any given time we tend to have between 8000 and 10000 assets in existence.

In [2]: %timeit arr.searchsorted(3000)  
1000000 loops, best of 3: 415 ns per loop  
</code></pre>
</div>
<div class='disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='561599be8884d975090000b0' id='561599be8884d975090000b0'>
<a href='#561599be8884d975090000b0'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1444256196000' class='quanto-date posted-at response-posted-at' href='#561599be8884d975090000b0'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thanks Scott,</p>

<p>Pretty cryptic, unfortunately.  I have to assume you know what you are doing, but it is mostly gibberish to me at this point.  Is there a reason it doesn&#39;t look a bit more like Pandas/numpy or something I&#39;ve seen before?</p>

<p>Grant  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5615b0b15a676e49d30006ce' id='5615b0b15a676e49d30006ce'>
<a href='#5615b0b15a676e49d30006ce'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4e2887701c8cf8364f000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f0da8e39938dae306beaf315b3cb0156?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4e2887701c8cf8364f000001'>John Fawcett</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1444262069000' class='quanto-date posted-at response-posted-at' href='#5615b0b15a676e49d30006ce'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Grant,</p>

<p>The code is all dealing with numpy arrays, and each manipulation is explained in the comments. Seems pretty clear to me.</p>

<p>Thanks,<br>
fawce  </p>
</div>
<div class='disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='5615bbe5128828316f000193' id='5615bbe5128828316f000193'>
<a href='#5615bbe5128828316f000193'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1444264937000' class='quanto-date posted-at response-posted-at' href='#5615bbe5128828316f000193'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Sorry, got a little cranky.  Some questions:</p>

<p>Presumably, this line needs to be written like this:  </p>

<pre><code>class MyFancyFactor(CustomFactor):  
</code></pre>

<p>It can be called anything, but needs to have &#39;CustomFactor&#39; as an argument.</p>

<p>This line must do something, but I don&#39;t see &#39;inputs&#39; used anywhere:</p>

<pre><code>inputs = [USEquityPricing.close]  
</code></pre>

<p>And presumably, USEquityPricing.close is giving me closing prices for all US equities, but what is the data structure?  Why is it in square brackets?</p>

<p>And then this:</p>

<pre><code>compute(self, today, assets, out, close)  
</code></pre>

<p>What do all of the arguments mean?</p>

<p>I don&#39;t see a window length?  Why not?  Does this mean it is looking back to around 2002 across all securities?</p>

<p>This presumably is a numpy array:</p>

<pre><code>close[:, assets.searchsorted(8554)]  
</code></pre>

<p>But what does assets.searchsorted(8554) do?</p>

<p>With a little work, I can probably sort out what close - spy_column[:, np.newaxis] does, but I don&#39;t understand the structure of close.  It seems you are just subtracting two numpy arrays?  Doesn&#39;t close also contain the SPY data, so you just get zeros?</p>

<p>nanmean seems simple enough, but why isn&#39;t it np.nanmean (while above we have np.newaxis)?</p>

<p>If you are using numpy arrays without the security column labels used in a DataFrame, how do you know which column is which?  I thought it was a good thing to use Pandas DataFrames, such as is returned by history()?  Generally, skimming over the documentation, there appears to be a pretty steep learning curve, very different from the Pandas-based history() API.  Kinda daunting, but I&#39;ll learn by example, I suppose.</p>

<p>See, I don&#39;t actually understand (not that Scott&#39;s response wasn&#39;t clear...I just have some things to learn).  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5615c0d6688f94df5d000494' id='5615c0d6688f94df5d000494'>
<a href='#5615c0d6688f94df5d000494'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5033e9d73fb2eb0002000231'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/4a9a839742731aad6e110e1d3586e020?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5033e9d73fb2eb0002000231'>Simon Thornington</a>
</div>
<a UTCms='1444266201000' class='quanto-date posted-at response-posted-at' href='#5615c0d6688f94df5d000494'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>FWIW, I plan to use pandas inside these custom factors, until such time as I cannot.  I believe all that one would need to do is <code>pandas.DataFrame(close,columns=assets)</code> and that would be enough to start working with them.  I think the main limitation is that the output factors must be the same shape as the input data, so whatever you are calculating, it pretty much needs to be calculated for exactly every asset.  If you want to make summary statistics, I think maybe the better place to do that is with pandas using raw factor data inside <code>before_trading_starts</code>.  But, I haven&#39;t used this version of the API yet.</p>

<p>Scott - is <code>today</code> still just the last row, or is it the vector of dates of length window length?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5616463b614e702b090000f7' id='5616463b614e702b090000f7'>
<a href='#5616463b614e702b090000f7'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5309211a7d02b22150000030'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3786c5e64868dc7e6b197f950d4a77c6?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5309211a7d02b22150000030'>Nicola Cannata </a>
</div>
<a UTCms='1444300349000' class='quanto-date posted-at response-posted-at' href='#5616463b614e702b090000f7'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Karen,</p>

<p>is one pipeline only allowed per algorithm?<br>
Or can I attach more than one, e.g. for exploiting different strategies to be used in different market condition?</p>

<p>Is the name mandatory?<br>
Or can I access pipeline_output also by  using a global variable (in the context)?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56168b2f2849c99bab00002c' id='56168b2f2849c99bab00002c'>
<a href='#56168b2f2849c99bab00002c'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4e322fa200fffd0001000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f59406ed486edc76c94544468c11344d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4e322fa200fffd0001000001'>Scott Sanderson</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1444318003000' class='quanto-date posted-at response-posted-at' href='#56168b2f2849c99bab00002c'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Nicola  </p>

<blockquote>
<p>is one pipeline only allowed per algorithm?<br>
Or can I attach more than one, e.g. for exploiting different strategies to be used in different market condition?</p>
</blockquote>

<p>Currently only one pipeline is supported per algorithm.  Names are part of the required API because we expect that we&#39;ll want to support multiple pipelines in the future.  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='56168c4c880d75ef44000047' id='56168c4c880d75ef44000047'>
<a href='#56168c4c880d75ef44000047'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4e322fa200fffd0001000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f59406ed486edc76c94544468c11344d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4e322fa200fffd0001000001'>Scott Sanderson</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1444318288000' class='quanto-date posted-at response-posted-at' href='#56168c4c880d75ef44000047'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Simon  </p>

<blockquote>
<p>Scott - is today still just the last row, or is it the vector of dates of length window length?</p>
</blockquote>

<p>It&#39;s still just the last row.  Switching it to be an array of <code>datetime64[ns]</code> is in the roadmap, but fixing this correctly requires a somewhat significant change to a <a href="https://github.com/quantopian/zipline/blob/master/zipline/lib/adjusted_array.pyx">Pipeline API core datastructure</a>, which makes the (engineering cost / user benefit) ratio not great.  </p>

<p>I do want to make this change sooner rather than later though, since it will be a breaking change in the API.</p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='56169d822849c99bab0000af' id='56169d822849c99bab0000af'>
<a href='#56169d822849c99bab0000af'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5558ffea86d2d08cb20005ec'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/97358675e9a853b95c91e2ce8859d284?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5558ffea86d2d08cb20005ec'>Serge d&#39;Adesky</a>
</div>
<a UTCms='1444322694000' class='quanto-date posted-at response-posted-at' href='#56169d822849c99bab0000af'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Karen,</p>

<p>&quot;The pipeline API is not currently available in research, Quantopian or IB paper trading or live trading.&quot;</p>

<p>Any idea when the timetable is scheduled  to make this available? What is the rationale for making an api available only in Zipline? I&#39;m sure there is one,<br>
but it eludes me.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5616a0f4bd4827d3980000cf' id='5616a0f4bd4827d3980000cf'>
<a href='#5616a0f4bd4827d3980000cf'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4e322fa200fffd0001000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f59406ed486edc76c94544468c11344d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4e322fa200fffd0001000001'>Scott Sanderson</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1444323581000' class='quanto-date posted-at response-posted-at' href='#5616a0f4bd4827d3980000cf'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Grant</p>

<p>I think many of your questions are answered in the <a href="https://www.quantopian.com/help#quantopian_pipeline_CustomFactor">API Reference for CustomFactor</a>, but there should probably be a better explanation of how <code>CustomFactor</code>s work in the <a href="https://www.quantopian.com/help#pipeline-title">prose documentation</a> as well.</p>

<p>A few responses to specific questions:</p>

<blockquote>
<p>Presumably, this line needs to be written like this:<br>
<code>class MyFancyFactor(CustomFactor):</code></p>

<p>It can be called anything, but needs to have &#39;CustomFactor&#39; as an argument.</p>
</blockquote>

<p>This is just the <a href="https://docs.python.org/2/tutorial/classes.html#inheritance">Python syntax for defining a subclass</a>.  When you create your own factor, you do so by creating a subclass of <code>CustomFactor</code> that implements a <code>compute</code> function meeting the expected interface.  That interface is described in the API Reference as follows:</p>

<blockquote>
<p>Users implementing their own Factors should subclass CustomFactor and implement a method named compute with the following signature:</p>

<pre><code>def compute(self, today, assets, out, *inputs):  
</code></pre>

<p>On each simulation date, compute will be called with the current date, an array of sids, an output array, and an input array for each expression passed as inputs to the CustomFactor constructor.</p>

<p>The specific types of the values passed to compute are as follows:</p>

<pre><code>today : np.datetime64[ns]  
    Row label for the last row of all arrays passed as `inputs`.  
assets : np.array[int64, ndim=1]  
    Column labels for `out` and`inputs`.  
out : np.array[float64, ndim=1]  
    Output array of the same shape as `assets`.  `compute` should write  
    its desired return values into `out`.  
*inputs : tuple of np.array  
    Raw data arrays corresponding to the values of `self.inputs`.  
</code></pre>
</blockquote>

<p>The essential idea is that a <code>CustomFactor</code> is constructed with two pieces of state: <code>inputs</code>, which is a list of <code>Column</code> objects (e.g. <code>USEquityPricing.close</code>), and <code>window_length</code> which is an integer &gt;= 1.  Columns are essentially just fancy sentinel values that tell the underlying engine what data to provide to the factor, and <code>window_length</code> tells the engine how many rows of input to provide.</p>

<blockquote>
<p>This line must do something, but I don&#39;t see &#39;inputs&#39; used anywhere:</p>

<pre><code>inputs = [USEquityPricing.close]  
</code></pre>

<p>And presumably, USEquityPricing.close is giving me closing prices for all US equities, but what is the data structure? Why is it in square brackets?</p>
</blockquote>

<p>For factors like <code>SimpleMovingAverage</code> that are naturally parametrizable, it makes sense to require the user to provide <code>inputs</code> and <code>window_length</code> every time they construct a Factor.  Thus <code>SimpleMovingAverage</code> provides no defaults, and you have to explicitly write something like <code>SimpleMovingAverage(inputs=[USEquityPricing.close], window_length=10)</code>.  </p>

<p>For factors like<code>VWAP</code> it makes sense to provide a default for <code>inputs</code>, but not for <code>window_length</code>.  When you construct a <code>VWAP</code> instance, you generally do so like this: <code>vwap_10 = VWAP(window_length=10)</code>.  There are also factors like <code>RSI</code> or <code>Latest</code> that provide defaults for <code>window_length</code> but not <code>inputs</code>.</p>

<p>All of this means that there should be a nice clean way to say &quot;this particular factor should provide a default inputs list or a default window_length&quot;.  The easiest way to do this with a <code>CustomFactor</code> is to declare it as a class-level attribute, which is what we&#39;re doing in the statement quoted above.  The line <code>inputs = [USEquityPricing.close]</code> is defining <code>inputs</code> as a list of length 1 (the square brackets are just the syntax for list literals, ala <code>[1, 2, 3]</code>) containing only <code>USEquityPricing.close</code>.  </p>

<p>Again, the important thing to understand here is that the column objects passed as <code>inputs</code> are just fancy sentinel values: they tell the engine what data to pass to your <code>compute</code> function when it&#39;s called each day.  For each such sentinel value you declare in your inputs, your <code>compute</code> function gets passed a numpy array containing the requested data. </p>

<p>You can find the source of most of the builtin Factors <a href="https://github.com/quantopian/zipline/blob/master/zipline/pipeline/factors/technical.py">in Zipline</a> if you want to see some more examples.</p>

<blockquote>
<pre><code>close[:, assets.searchsorted(8554)]  
</code></pre>

<p>But what does assets.searchsorted(8554) do?</p>
</blockquote>

<p>Say I have a <code>CustomFactor</code> defined as follows:</p>

<pre><code>class SomeFactor(CustomFactor):  
    inputs = [USEquityPricing.close, USEquityPricing.high, USEquityPricing.low]  
    window_length = 5

    def compute(self, today, assets, out, closes, highs, lows):  
        # Do some stuff.  
</code></pre>

<p>If I construct and add an instance of this factor to a pipeline by doing something like <code>pipe.add(SomeFactor(), &#39;name&#39;)</code>, then every simulation day my compute function will be called with a bunch of data:</p>

<ul>
<li><code>today</code> will be the day for which <code>compute</code> is being called.<br></li>
<li><code>closes</code>, <code>highs</code>, and <code>lows</code>will all be 5 x N numpy arrays, where N is the number of assets in our database on the day in question.  There are 5 rows in all the arrays because we provided a default of 5 for window_length.<br></li>
<li><code>assets</code> will be an integer array of length N, representing column labels for <code>closes</code>, <code>highs</code>, and <code>lows</code>.<br></li>
<li><code>out</code> will be an empty array of length N.  The job of <code>compute</code> is to write output values into <code>out</code>.  We write values directly into an output array rather than returning them to avoid making unnecessary copies.  This is an uncommon idiom in Python, but very common in languages like C and Fortran that care about high performance numerical code.  Many numpy functions take an <code>out</code> parameter for similar reasons (I use this with <code>nanmean</code> in my example above).</li>
</ul>

<p>The original question that prompted my example was asking how to do a computation comparing every asset to a particular known asset.  Since we have a column for every asset in our database, what we want to do is get the index of the column corresponding to the asset we care about.  For a sorted array (which <code>assets</code> always is), the fastest way to do this in numpy is <code>searchsorted</code>:</p>

<pre><code>In [7]: import numpy as np

In [8]: x = np.array([1, 3, 5, 6]); x  
Out[8]: array([1, 3, 5, 6])

In [9]: x.searchsorted(1)  
Out[9]: 0

In [10]: x.searchsorted(5)  
Out[10]: 2  
</code></pre>

<p>When we do <code>spy_column = close[:, assets.searchsorted(8554)]</code>, we&#39;re saying &quot;pull out the column of closes corresponding to the index of asset 8554 (which is SPY)&quot;.  The result of this operation will be a 1-D array containing the last <code>window_length</code> closes for SPY.  This doesn&#39;t mutate <code>close</code> in any way; it&#39;s still a 2D array containing a window of closes for all the assets we know about.  When we then do:</p>

<pre><code>subtracted = close - spy_column[:, np.newaxis]  
</code></pre>

<p>we&#39;re saying &quot;create a new 2D array containing the results of every column in <code>close</code> minus the closes of <code>spy</code>.  The fancy indexing on <code>spy_column</code> is telling numpy to treat spy_column as a 1 x N column array.  If we didn&#39;t do this, we&#39;d get an error from Numpy telling us that our arrays are the wrong shape:</p>

<pre><code>In [13]: data = arange(15).reshape(5, 3); data  
Out[13]:  
array([[ 0,  1,  2],  
       [ 3,  4,  5],  
       [ 6,  7,  8],  
       [ 9, 10, 11],  
       [12, 13, 14]])

In [14]: first_column = data[:, 0]; first_column  
Out[14]: array([ 0,  3,  6,  9, 12])

In [15]: data - first_column  
---------------------------------------------------------------------------  
ValueError                                Traceback (most recent call last)  
&lt;ipython-input-15-574b6935bc49&gt; in &lt;module&gt;()  
----> 1 data - first_column

ValueError: operands could not be broadcast together with shapes (5,3) (5,)

In [16]: data - first_column[:, np.newaxis]  
Out[16]:  
array([[0, 1, 2],  
       [0, 1, 2],  
       [0, 1, 2],  
       [0, 1, 2],  
       [0, 1, 2]])  
</code></pre>

<blockquote>
<p>nanmean seems simple enough, but why isn&#39;t it np.nanmean (while above we have np.newaxis)?</p>
</blockquote>

<p>This is just how I happened to write the example.  If you had only done <code>import numpy as np</code>, then you&#39;d have to do <code>np.nanmean</code>.</p>

<p>I&#39;m going to adapt some of this response and add it to the main prose docs for the Pipeline API.<br>
Hope this helps,<br>
-Scott  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='5616a3dd2849c99bab0000e6' id='5616a3dd2849c99bab0000e6'>
<a href='#5616a3dd2849c99bab0000e6'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4e322fa200fffd0001000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f59406ed486edc76c94544468c11344d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4e322fa200fffd0001000001'>Scott Sanderson</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1444324323000' class='quanto-date posted-at response-posted-at' href='#5616a3dd2849c99bab0000e6'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I also <strong>highly</strong> recommend reading the <a href="http://docs.scipy.org/doc/numpy/reference/arrays.indexing.html">Numpy docs on indexing</a> as a starting point for getting familiar with numpy.  </p>

<p>Over time I&#39;ve found myself using pandas less and less and using numpy more and more, especially when I&#39;m doing purely numerical work.<br>
Pandas is <strong>really</strong> convenient for IO (e.g. reading data from CSVs or SQL databases), and it&#39;s good at &quot;data science&quot;-ey tasks like resampling and group-by operations, but it incurs a lot of overhead trying to figure out what you mean and it&#39;s got some strange behavior in a lot of corner cases.  (See, for example, <a href="https://github.com/pydata/pandas/pull/11245">this bug</a> fixed by one of our engineers this week.)  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='5616a572bd482761de0000e7' id='5616a572bd482761de0000e7'>
<a href='#5616a572bd482761de0000e7'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4e322fa200fffd0001000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f59406ed486edc76c94544468c11344d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4e322fa200fffd0001000001'>Scott Sanderson</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1444324726000' class='quanto-date posted-at response-posted-at' href='#5616a572bd482761de0000e7'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Serge</p>

<blockquote>
<p>&quot;The pipeline API is not currently available in research, Quantopian or IB paper trading or live trading.&quot;<br>
Any idea when the timetable is scheduled to make this available? What is the rationale for making an api available only in Zipline?</p>
</blockquote>

<p>This sentence was a bit poorly worded.  The Pipeline API is available in the Quantopian backtester right now.  It&#39;s not available in Quantopian paper trading yet.  We want to get feedback on the API from folks using it in the backtester so we can make any needed tweaks before allowing it in live trading.  That said, we plan on making it available in both research and paper trading <strong>Soon (TM)</strong>.  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='5616aadd880d75ef44000110' id='5616aadd880d75ef44000110'>
<a href='#5616aadd880d75ef44000110'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5558ffea86d2d08cb20005ec'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/97358675e9a853b95c91e2ce8859d284?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5558ffea86d2d08cb20005ec'>Serge d&#39;Adesky</a>
</div>
<a UTCms='1444326114000' class='quanto-date posted-at response-posted-at' href='#5616aadd880d75ef44000110'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Ah, ok. That makes more sense.</p>

<p>Thanks  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='561791ce0566e8c561000082' id='561791ce0566e8c561000082'>
<a href='#561791ce0566e8c561000082'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1444385234000' class='quanto-date posted-at response-posted-at' href='#561791ce0566e8c561000082'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thanks Scott,</p>

<p>Your response moved me up the learning curve.  I&#39;m o.k. with numpy, since it is basically Python&#39;s version of MATLAB.</p>

<p>The idea is to output an array of length N, with labels given by assets (i.e. a scalar for each asset is output).  However, it seems that a hack could be devised to re-purpose the labels and then one could output any ol&#39; data, so long as the total number of elements is not more than N.  For example, if N &gt;= 18, I could output 3 vectors, each of length 5 using the first 15 elements.  Then, for next 3 elements, I could record labels for my 3 vectors (e.g. the sid IDs for the vectors).  Would something like this work?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56179eb1429cdaacfe0004cb' id='56179eb1429cdaacfe0004cb'>
<a href='#56179eb1429cdaacfe0004cb'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1444388534000' class='quanto-date posted-at response-posted-at' href='#56179eb1429cdaacfe0004cb'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@ Karen,</p>

<p>Why did you decide to limit this to daily bars?  If I understand correctly, computations would not need to be done over the entire 8000+ security database.  Say I wanted to look at 100 stocks over a window of 3 days, using minute bars.  So, I&#39;d have 3x390x100 = 117,000 data points.  This is compared to 30*8000 = 240,000 data points for a 30 day window over all stocks.  Is the idea that history() could be used in before_trading_starts() to do computations over minute bars?</p>

<p>Also, within before_trading_start(), is there a way to catch a time-out error?  Or will the algo just crash?</p>

<p>I don&#39;t understand &quot;In backtesting, they are calculated in bulk, once per year.&quot;  Is this done before the backtest even starts?  Or will the backtest pause every year as it runs, to do the computation?  And is the computation limited to 5 minutes?  Or could it take longer?  In backtesting, is there a way to turn off the pre-computation, to verify that the algo will run live?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5617c2a145f0f58231000584' id='5617c2a145f0f58231000584'>
<a href='#5617c2a145f0f58231000584'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/535a81c51f0913316a000242'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/25e01741319f428a0e81b61b4b37b406?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/535a81c51f0913316a000242'>Lucas Silva</a>
</div>
<a UTCms='1444397732000' class='quanto-date posted-at response-posted-at' href='#5617c2a145f0f58231000584'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Nice addition, at some point it would be nice to have it working asynchronous like sockets do so we are not limited by this 50secs time-out. Should have a queue and check if there is data if not just move one. So the factor could &quot;Miss&quot; some bars while computing. </p>

<p>This time-out is kinda dangerous  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5618e87bffa551eff10003c9' id='5618e87bffa551eff10003c9'>
<a href='#5618e87bffa551eff10003c9'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/527612eb2de84d52740000d5'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/873c5860f8b916285b474f56cbd6f135?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/527612eb2de84d52740000d5'>Deleted User</a>
</div>
<a UTCms='1444472958000' class='quanto-date posted-at response-posted-at' href='#5618e87bffa551eff10003c9'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi,</p>

<p>I want to screen stocks for pair trading based on 15 minute interval data. Does pipeline only support daily prices or can it handle minute data as well?</p>

<p>Best regards,<br>
Pravin  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5618fdf08432f83e0e0004d9' id='5618fdf08432f83e0e0004d9'>
<a href='#5618fdf08432f83e0e0004d9'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4e2887701c8cf8364f000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f0da8e39938dae306beaf315b3cb0156?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4e2887701c8cf8364f000001'>John Fawcett</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1444478452000' class='quanto-date posted-at response-posted-at' href='#5618fdf08432f83e0e0004d9'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Pravin - pipeline is daily only.  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='561912d18432f8560c000473' id='561912d18432f8560c000473'>
<a href='#561912d18432f8560c000473'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1444483798000' class='quanto-date posted-at response-posted-at' href='#561912d18432f8560c000473'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Fawce,</p>

<p>Why is it daily only?  And do you have plans to expand it to minute bars?  As I commented above, it would seem to be a matter of setting a limit on the number of data points, rather than daily versus minutely.</p>

<p>Grant  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5619227e4c0655f733000594' id='5619227e4c0655f733000594'>
<a href='#5619227e4c0655f733000594'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51a34adbf3ad93736e000077'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f66031f680bdfb31ef031512b96ee419?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51a34adbf3ad93736e000077'>tom appleton</a>
</div>
<a UTCms='1444487811000' class='quanto-date posted-at response-posted-at' href='#5619227e4c0655f733000594'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi, great work guys ! </p>

<p>Is it possible to combine normalized factors (by normalized I mean take the value and normalize across all securities in my universe to between 0 and 1)? </p>

<p>For example say I have a weighting system that says weight= (0.3*volatiltyFactor) + (0.7*fundamentalFactor). Or does the rank function already normalize ?</p>

<p>Thanks  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='561924318432f83e0e000600' id='561924318432f83e0e000600'>
<a href='#561924318432f83e0e000600'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51a34adbf3ad93736e000077'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f66031f680bdfb31ef031512b96ee419?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51a34adbf3ad93736e000077'>tom appleton</a>
</div>
<a UTCms='1444488245000' class='quanto-date posted-at response-posted-at' href='#561924318432f83e0e000600'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>heh, so I cloned it to see how it works, and rank is literally the rank in the universe. So essentially it is the normalized value. Cool.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='561bc7b2e2fd0e7b2f0004d3' id='561bc7b2e2fd0e7b2f0004d3'>
<a href='#561bc7b2e2fd0e7b2f0004d3'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5118dbf1a4d447e2a6000050'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/ce323165e919dbc2ce95c864939caf12?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5118dbf1a4d447e2a6000050'>Costantino</a>
</div>
<a UTCms='1444661175000' class='quanto-date posted-at response-posted-at' href='#561bc7b2e2fd0e7b2f0004d3'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>How could one get different time horizons for the fundamentals data?</p>

<p>As far I know, the fundamentals data always attain to the most recent quarter.</p>

<p>For example, how can I write a factor that takes care of the Total Revenue of the last 12 months?</p>

<p>My first thought was the following approach (assuming a quarter is composed by 63 days) but I&#39;m not sure, it&#39;s very reliable.</p>

<pre><code>class RevenueTTM(CustomFactor):  
    inputs = [morningstar.income_statement.total_revenue] 

    # 252 trading day in a year  
    window_length =252  
    def compute(self, today, assets, out, revenue):  
        # Assuming a quarter is 63 days  
        out[:] = revenue[0] + revenue[62] + revenue[182] + revenue[251]  
</code></pre>

<p>The main risk is to sum the same quarter two times.<br>
There must be better way! Any suggestions?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='561bc9e24e5605f95d000528' id='561bc9e24e5605f95d000528'>
<a href='#561bc9e24e5605f95d000528'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/55eefc2af269c592d80008a9'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/8985b490c95e135c2bbcd7d1a0dce16b?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/55eefc2af269c592d80008a9'>Jamie McCorriston</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1444661734000' class='quanto-date posted-at response-posted-at' href='#561bc9e24e5605f95d000528'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Costantino,</p>

<p>You&#39;re definitely on the right track!</p>

<p>Take a look at the algo I posted here: <a href="https://www.quantopian.com/posts/fundamental-history-based-algo#5616e27ea8e03d7580000155">https://www.quantopian.com/posts/fundamental-history-based-algo#5616e27ea8e03d7580000155</a>.</p>

<p>This algo compares the EPS from the last quarter to the current one. You could apply a very similar logic to your algo to get the 4 most recent unique prices. This should take care of the edge cases you are worried about!  </p>
</div>
<div class='disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='561bd1cb4e5605829700054a' id='561bd1cb4e5605829700054a'>
<a href='#561bd1cb4e5605829700054a'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5118dbf1a4d447e2a6000050'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/ce323165e919dbc2ce95c864939caf12?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5118dbf1a4d447e2a6000050'>Costantino</a>
</div>
<a UTCms='1444663762000' class='quanto-date posted-at response-posted-at' href='#561bd1cb4e5605829700054a'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thanks Jamie!</p>

<p>It&#39;s quite an hack, but for sure a more robust solution to the problem... I hope, the API will soon manage to handle such cases easier :-)</p>

<p>I&#39;ll post my algorithm for the TTM, when finished.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='561bd543d7c60be42d000595' id='561bd543d7c60be42d000595'>
<a href='#561bd543d7c60be42d000595'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4e322fa200fffd0001000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f59406ed486edc76c94544468c11344d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4e322fa200fffd0001000001'>Scott Sanderson</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1444664647000' class='quanto-date posted-at response-posted-at' href='#561bd543d7c60be42d000595'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Grant </p>

<p>The main reason that Pipelines don&#39;t support minutely data is that we depend on pre-fetching data for reasonable performance during backtesting, and the memory overhead of doing that pre-fetching is considerably worse when working with minutely data.</p>

<p>When you run a Pipeline that uses a 90-day trailing window, we don&#39;t just query the last 90 days every day, since that would be glacially slow because you&#39;d spend almost all of your backtest time doing disk/network IO.  Instead, what we do is load all the data we think we&#39;ll need to run your pipeline for the next ~252 days (the number of trading days in a year).  We use that cache to pre-compute your entire pipeline for a year and then feed the results to your backtest on the dates when it would become available.  This makes <code>rank()</code>computations in particular much faster, because we can pre-compute ranks for an entire year <a href="https://github.com/quantopian/zipline/blob/master/zipline/lib/rank.pyx">in Cython</a> on one big block of contiguous memory.</p>

<p>In the simplest possible case of window_length=1, we load data in ~yearly blocks, and an optimistic lower bound on the memory overhead of a Pipeline is about 16 MB per requested column:</p>

<pre><code>In [1]: from operator import mul

In [2]: reduce(mul, [  
252, # days  
8000, # assets per day  
8, # bytes per data point  
])
Out[2]: 16128000

In [3]: from humanize import naturalsize

In [4]: naturalsize(_2)  
Out[4]: &#39;16.1 MB&#39;  
</code></pre>

<p>This means that we incur at least 16 MB of memory overhead per column when operating on daily data.  In practice the actual number is probably closer to 20 or 30, but 16 is a reasonable lower bound.  These values are well within the tolerance of acceptable overhead on top of an algorithm writer&#39;s business logic.</p>

<p>Suppose now that Pipelines supported minutely data.  If we wanted to get the previous day&#39;s minutes in our pipelines each day, we&#39;d have a window_length of 390 (the number of market minutes each day).  Notice, however, that <strong>there&#39;s no overlap in the trailing windows we see each day</strong>: every day requires a totally independent set of 390 bars.  This means that our lower bound calculation becomes:</p>

<pre><code>In [7]: reduce(mul, [  
   ...: 252, # days of pre-cached data  
   ...: 390, # rows of data per day  
   ...: 8000, # assets per day  
   ...: 8, # bytes per data point  
   ...: ])  
Out[7]: 6289920000

In [8]: naturalsize(_7)  
Out[8]: &#39;6.3 GB&#39;  
</code></pre>

<p>6.3 GB per column is well above what we can support, and that&#39;s hit just querying a day&#39;s worth of minutely data (also note that this means we&#39;re doing 6.3 GB of network or disk IO per backtest-year, independently of any precomputation strategies.  That will be slow even if we&#39;re not paging 3/4 of our RAM to disk because we&#39;re almost out of memory.)</p>

<p>The obvious response here is to do less precomputation when working with minutely data.  It&#39;s possible that that could be made to work, but at that point you&#39;re just querying for a trailing minutely window every day, in which case you might as well just use <code>history()</code>.</p>

<p>Speaking more philosophically, there will always be tension between wanting to look at data for lots of assets and wanting to look at data with high resolution.  In the presence of CPU and memory constraints, you can either work with data for lots of assets at low resolution, or you can look at data for fewer assets at higher resolution.  Up until now on Quantopian, we&#39;ve essentially forced our users to choose &quot;look at data for (comparatively) few assets at high resolution&quot;.  The Pipeline API, in my mind, is essentially about providing an option to access the other end of the spectrum.  Note that you don&#39;t have to choose just one of these options for your entire algorithm: you can (and should!) use the Pipeline API to do a wide screen that identifies assets that you want to investigate more closely, and then use history to look at those particular assets more closely.  There&#39;s a bunch of exciting work happening now on the Zipline core to make this pattern more efficient.</p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='561be675be7b769e4300015a' id='561be675be7b769e4300015a'>
<a href='#561be675be7b769e4300015a'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56197be2d5e3844bf4000020'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/507121a933fc0a296282c0c481d3ff83?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56197be2d5e3844bf4000020'>Elisabeth Daley</a>
</div>
<a UTCms='1444669051000' class='quanto-date posted-at response-posted-at' href='#561be675be7b769e4300015a'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi, I&#39;m just getting started with Quantopian, and am trying to get a very minimal Pipeline algorithm to work, but it doesn&#39;t appear to ever order anything.  I&#39;m sure I&#39;m missing something basic, can someone help me out?  </p>

<p>Thanks, this is a great site, and I love the Pipeline structure.</p>

<pre><code># Trying to get the minimum Pipeline algorithm to run.  
# This example uses pipeline to set its universe daily.

# Import the libraries we will use here  
from quantopian.algorithm import attach_pipeline, pipeline_output  
from quantopian.pipeline import Pipeline  
from quantopian.pipeline.data.builtin import USEquityPricing  
from quantopian.pipeline.factors import SimpleMovingAverage  
import math

# The initialize function is the place to create your pipeline and set trading  
# conditions such as commission and slippage.  
def initialize(context):  
    # Set execution cost assumptions. For live trading with Interactive Brokers  
    # we will assume a $1.00 minimum per trade fee, with a per share cost of $0.0075.  
    set_commission(commission.PerShare(cost=0.0075, min_trade_cost=1.00))  
    # Set market impact assumptions. We limit the simulation to trade up to 2.5%  
    # of the traded volume for any one minute, and  our price impact constant is 0.1.  
    set_slippage(slippage.VolumeShareSlippage(volume_limit=0.025, price_impact=0.10))  
    # Rebalance every Monday (or the first trading day if it&#39;s a holiday).  
    # At 11AM ET, which is 1 hour and 30 minutes after market open.  
    schedule_function(rebalance,  
                      date_rules.week_start(days_offset=0),  
                      time_rules.market_open(hours = 1, minutes = 30))  
    # Create, register and name a pipeline.  
    pipe = Pipeline()  
    attach_pipeline(pipe, &#39;min_pipeline_example&#39;)  
    # Construct Factors.  
    sma_10 = SimpleMovingAverage(inputs=[USEquityPricing.close], window_length=10)  
    sma_30 = SimpleMovingAverage(inputs=[USEquityPricing.close], window_length=30)

    # Construct a Filter.  
    prices_under_5 = (sma_10 &lt; 5)

    # Register outputs.  
    pipe.add(sma_10, &#39;sma_10&#39;)  
    pipe.add(sma_30, &#39;sma_30&#39;)

    # Remove rows for which the Filter returns False.  
    pipe.set_screen(prices_under_5)

# Called every day before market open. This is where we access the securities  
# that made it through the pipeline.  
def before_trading_start(context, data):  
    # Pipeline_output returns the constructed dataframe.  
    context.output = pipeline_output(&#39;min_pipeline_example&#39;)  
    context.long_list = context.output.sort([&#39;sma_30&#39;], ascending=False).iloc[:100]  
    # Update our universe to contain the securities that we would like to long.  
    update_universe(context.long_list.index)  
# This rebalancing is called according to our schedule_function settings.  
def rebalance(context,data):  
    # Set the allocations to even weights in each portfolio.  
    weight = 1 / len(context.long_list)  
    # For each security in our universe, order positions according  
    # to our context.long_list, and sell all previously  
    # held positions not in the list.  
    for stock in context.long_list.index:  
        if stock in data:  
            order_target_percent(stock, weight)  
    for stock in context.portfolio.positions.iterkeys():  
        if stock not in context.long_list.index:  
            order_target(stock, 0)  
    # Log the orders each week.  
    log.info(&quot;This week&#39;s orders: &quot;+&quot;, &quot;.join([long_.symbol for long_ in context.long_list.index]))  
# The handle_data function is run every bar.  
def handle_data(context,data):  
    # Record and plot the leverage of our portfolio over time.  
    record(leverage = context.account.leverage)  
    print &quot;Long List&quot;  
    log.info(&quot;\n&quot; + str(context.long_list.sort([&#39;sma_30&#39;], ascending=True).head(10)))  
</code></pre>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='561bee50e2fd0e7b2f000603' id='561bee50e2fd0e7b2f000603'>
<a href='#561bee50e2fd0e7b2f000603'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56197be2d5e3844bf4000020'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/507121a933fc0a296282c0c481d3ff83?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56197be2d5e3844bf4000020'>Elisabeth Daley</a>
</div>
<a UTCms='1444671059000' class='quanto-date posted-at response-posted-at' href='#561bee50e2fd0e7b2f000603'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Nevermind - looks like coercing the weight variable used in order_target_percent to a float type does the trick.  thanks anyway!  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='561beec7a2073586cb000668' id='561beec7a2073586cb000668'>
<a href='#561beec7a2073586cb000668'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4e322fa200fffd0001000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f59406ed486edc76c94544468c11344d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4e322fa200fffd0001000001'>Scott Sanderson</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1444671184000' class='quanto-date posted-at response-posted-at' href='#561beec7a2073586cb000668'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Elizabeth </p>

<p>Looks like the issue is here:</p>

<pre><code>weight = 1 / len(context.long_list)  
</code></pre>

<p><a href="https://docs.python.org/2/library/stdtypes.html#numeric-types-int-float-long-complex">Integer division in Python 2</a> (which is what Quantopian runs on) truncates toward negative infinity by default:</p>

<pre><code>In [3]: 5 / 2  
Out[3]: 2  
</code></pre>

<p>This means that <code>1 / N == 0</code> for any integer N &gt; 1, so you&#39;re always ordering with a weight of 0.</p>

<p>In Python 3, this behavior was changed to produce <code>float</code> values instead:</p>

<pre><code>Python 3.4.3 (default, Jul 28 2015, 18:20:59)  
[GCC 4.8.4] on linux
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.  
&gt;&gt;&gt; 5 / 2  
2.5  
</code></pre>

<p>You can get this behavior in Python 2 by putting <code>from __future__ import division</code> at the top of a file:</p>

<pre><code>Python 2.7.10 (default, Jun 30 2015, 15:30:23)  
[GCC 4.8.4] on linux2
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.  
&gt;&gt;&gt; from __future__ import division  
&gt;&gt;&gt; 5 / 2  
2.5  
</code></pre>

<p>If you don&#39;t want to disable this behavior globally for whatever reason, you can also divide by a <code>float</code> instead of an <code>int</code>, which will behave as you expect:</p>

<pre><code>Python 2.7.10 (default, Jun 30 2015, 15:30:23)  
[GCC 4.8.4] on linux2
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.  
&gt;&gt;&gt; 5.0 / 2  
2.5  
</code></pre>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='561bef2d4e5605f95d00062e' id='561bef2d4e5605f95d00062e'>
<a href='#561bef2d4e5605f95d00062e'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4e322fa200fffd0001000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f59406ed486edc76c94544468c11344d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4e322fa200fffd0001000001'>Scott Sanderson</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1444671280000' class='quanto-date posted-at response-posted-at' href='#561bef2d4e5605f95d00062e'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Ha...you fixed the issue before I finished typing a reply.  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='561c1b094a3ea441cd000473' id='561c1b094a3ea441cd000473'>
<a href='#561c1b094a3ea441cd000473'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56197be2d5e3844bf4000020'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/507121a933fc0a296282c0c481d3ff83?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56197be2d5e3844bf4000020'>Elisabeth Daley</a>
</div>
<a UTCms='1444682508000' class='quanto-date posted-at response-posted-at' href='#561c1b094a3ea441cd000473'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thanks anyway :)  Good to know about it running on Python 2.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='561c5b7b52cc78aeb2000195' id='561c5b7b52cc78aeb2000195'>
<a href='#561c5b7b52cc78aeb2000195'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1444699007000' class='quanto-date posted-at response-posted-at' href='#561c5b7b52cc78aeb2000195'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@ Scott,</p>

<p>Thanks for the explanation.  So are you planning to make history() available in before_trading_start()?  Also, am I mistaken, or does before_trading_start() not run on the first day of a backtest?</p>

<p>Grant  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='561d976217008d9ca50000f9' id='561d976217008d9ca50000f9'>
<a href='#561d976217008d9ca50000f9'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1444779877000' class='quanto-date posted-at response-posted-at' href='#561d976217008d9ca50000f9'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Is it explained somewhere how the factor computations deal with security start and end dates?  I understand that &quot;Assets will be masked out the day after their end date.&quot; as Fawce explained on <a href="https://www.quantopian.com/posts/dollar-volume-pipeline">https://www.quantopian.com/posts/dollar-volume-pipeline</a>.  But what about stocks that have their start dates within the window?  How are they managed, as the backtest runs?  It sounds like they make it though to update_universe, but is it then up to the author of the CustomFactor to sort out how to deal with securities that don&#39;t fill the entire window?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='561da9eed55825ea720000fa' id='561da9eed55825ea720000fa'>
<a href='#561da9eed55825ea720000fa'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/55076e2b2b3ec9a688000094'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/8a9a403cd957819bd2d1b0ee29c2a4d5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/55076e2b2b3ec9a688000094'>PaulB</a>
</div>
<a UTCms='1444784625000' class='quanto-date posted-at response-posted-at' href='#561da9eed55825ea720000fa'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi, been working with quantopian for a long time now, and slowly improving my coding.</p>

<p>This pipeline is fantastic.<br>
A basic question, if we want to use the screen to select the top 2000 stocks (an initial universe) the create a factor (6 month  share price growth) for example, take say the best 20% of these, then rank this subset against another factor say (price to book). </p>

<p>What&#39;s the most efficient way to code these?</p>

<p>I can see from the examples how to achieve the first two steps easily, but not sure how to use the output of the this with the third.<br>
Paul  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='561db9d0a7cf8ece5b0000b2' id='561db9d0a7cf8ece5b0000b2'>
<a href='#561db9d0a7cf8ece5b0000b2'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/53dfa27b197bbb2516000159'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/51e4ba51c431ce2b4373006a33ade2aa?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/53dfa27b197bbb2516000159'>Karen Rubin</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1444788691000' class='quanto-date posted-at response-posted-at' href='#561db9d0a7cf8ece5b0000b2'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi PaulB,<br>
Here is an example that I think shows what you are trying to do.  There are two key things to making this happen. The first is the percentile between function which allows you to easily find the top 20% of any factor. The second is the mask option, to mask out the stocks you don&#39;t care about. </p>

<p>I ranked the results by the pb_rank and then invested in the top 200 (reinvesting monthly) but you could do a lot with the information provided in the results. </p>

<p>Let me know if you have any questions.  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='561dce3fd55825ea720001c0' id='561dce3fd55825ea720001c0'>
<a href='#561dce3fd55825ea720001c0'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/55076e2b2b3ec9a688000094'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/8a9a403cd957819bd2d1b0ee29c2a4d5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/55076e2b2b3ec9a688000094'>PaulB</a>
</div>
<a UTCms='1444793924000' class='quanto-date posted-at response-posted-at' href='#561dce3fd55825ea720001c0'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thanks very much Karen. Very helpful!!  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='561e353514a15434ab0006ff' id='561e353514a15434ab0006ff'>
<a href='#561e353514a15434ab0006ff'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/55d89906bab9141467000555'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/7cc367b3fe0307870165831ed33679c5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/55d89906bab9141467000555'>Adham Al-Harazi</a>
</div>
<a UTCms='1444820281000' class='quanto-date posted-at response-posted-at' href='#561e353514a15434ab0006ff'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>First, Thank you for this Pipeline API, which opens door for stocks screenings.</p>

<p>What else can we import from quantopian.pipeline.data.builtin ?<br>
I want to access the SPY closes but couldn&#39;t using USEquityPricing[index].close where index is the SPY sid</p>

<p>I want to calculate the beta coefficient for each stock for the last X days, but I have to access the SPY closes first,<br>
so I can compute the the beta with covariance of returns of both stock and SPY / variance of SPY index  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='561e40b2e8374192eb00001a' id='561e40b2e8374192eb00001a'>
<a href='#561e40b2e8374192eb00001a'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/54460194d718f327fd000380'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e511e4eeb9334ef82f1caa7bd66c36dc?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/54460194d718f327fd000380'>Luca</a>
</div>
<a UTCms='1444823222000' class='quanto-date posted-at response-posted-at' href='#561e40b2e8374192eb00001a'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>To access the close price:</p>

<ul>
<li>Add this to your the pipeline in initialize (and make sure to not exclude SPY from pipeline results when screening):</li>
</ul>

<pre><code>price  = Latest(inputs=[USEquityPricing.close])  
pipe.add(price, &#39;close_price&#39;)  
</code></pre>

<ul>
<li>In before_trading_start do the following:</li>
</ul>

<pre><code>output = pipeline_output(&#39;pipeline&#39;)  
context.pipeline_price =  output[&#39;close_price&#39;]  
</code></pre>

<ul>
<li>In handle_data or before_trading_start you can access the price like this:</li>
</ul>

<pre><code>context.pipeline_price[index]  
</code></pre>

<p>Please note that the close prices returned from Pipeline will be &quot;as-traded&quot; for that day (see <a href="http://www.quantopian.com/posts/the-pipeline-api-dividends-and-splits-what-you-need-to-know">this</a>).</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='561e5fc14fabadc5b10000f2' id='561e5fc14fabadc5b10000f2'>
<a href='#561e5fc14fabadc5b10000f2'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/55d89906bab9141467000555'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/7cc367b3fe0307870165831ed33679c5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/55d89906bab9141467000555'>Adham Al-Harazi</a>
</div>
<a UTCms='1444831174000' class='quanto-date posted-at response-posted-at' href='#561e5fc14fabadc5b10000f2'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Luca,</p>

<p>As mentioned above, I want to access the SPY closes whithin the initialize function to calculate beta for stocks , not in handle_data</p>

<p>Thank you  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='561e625ce83741d164000105' id='561e625ce83741d164000105'>
<a href='#561e625ce83741d164000105'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/53dfa27b197bbb2516000159'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/51e4ba51c431ce2b4373006a33ade2aa?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/53dfa27b197bbb2516000159'>Karen Rubin</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1444831843000' class='quanto-date posted-at response-posted-at' href='#561e625ce83741d164000105'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Adham,<br>
Take a look at Scott Sanderson&#39;s first comment in this thread above ^^ he shows how to do this. </p>

<p>KR  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='561e69b84fabadc5b100017e' id='561e69b84fabadc5b100017e'>
<a href='#561e69b84fabadc5b100017e'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/55d89906bab9141467000555'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/7cc367b3fe0307870165831ed33679c5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/55d89906bab9141467000555'>Adham Al-Harazi</a>
</div>
<a UTCms='1444833729000' class='quanto-date posted-at response-posted-at' href='#561e69b84fabadc5b100017e'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I did, although I couldn&#39;t understand the syntax he used I tried it and I got this message:<br>
SecurityViolation: 0002 Security Violations(s): Accessing np.newaxis  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='561e6bf2e83741d1640001b5' id='561e6bf2e83741d1640001b5'>
<a href='#561e6bf2e83741d1640001b5'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4e322fa200fffd0001000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f59406ed486edc76c94544468c11344d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4e322fa200fffd0001000001'>Scott Sanderson</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1444834298000' class='quanto-date posted-at response-posted-at' href='#561e6bf2e83741d1640001b5'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Adham</p>

<p>It looks like <code>numpy.newaxis</code> wasn&#39;t whitelisted in our security sandbox.  I&#39;ve updated the security definitions to allow <code>newaxis</code>, but it takes a few days for that change to propagate to the main site.</p>

<p>In the meantime, <code>numpy.newaxis</code> is actually just an alias of <code>None</code>, so you can use <code>None</code> anywhere that you&#39;d use <code>newaxis</code>.</p>

<pre><code>In [11]: from numpy import arange, newaxis

In [12]: x = arange(5)

In [13]: x  
Out[13]: array([0, 1, 2, 3, 4])

In [14]: x[:, newaxis]  
Out[14]:  
array([[0],  
       [1],  
       [2],  
       [3],  
       [4]])

In [15]: x[:, None]  
Out[15]:  
array([[0],  
       [1],  
       [2],  
       [3],  
       [4]])  
</code></pre>

<p>(See the <a href="http://docs.scipy.org/doc/numpy/reference/arrays.indexing.html#numpy.newaxis">numpy docs</a>) for details.  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='561e9ad0e47c5470b5000001' id='561e9ad0e47c5470b5000001'>
<a href='#561e9ad0e47c5470b5000001'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/52b0e0e0271a27fc88000049'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e5451406e743420c700eb2b054b2fc57?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/52b0e0e0271a27fc88000049'>Blue Seahawk</a>
</div>
<a UTCms='1444846291000' class='quanto-date posted-at response-posted-at' href='#561e9ad0e47c5470b5000001'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Adham, if you have beta calc code, I&#39;d love to see it. <a href="https://www.quantopian.com/posts/annualizing-a-sharpe-vs-sortino-ratio#561e98f981aa8fcd980003f0">This</a> was mine so far.  For anyone interested, here&#39;s <a href="http://finviz.com/screener.ashx?v=171&amp;f=ta_beta_u1.5&amp;ft=4&amp;o=beta">finviz beta</a> (on the Tickers tab you could copy those in order to quickly see in current code what effect a mask for low beta stocks might have).</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='561f5231e47c5470b5000581' id='561f5231e47c5470b5000581'>
<a href='#561f5231e47c5470b5000581'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/55d89906bab9141467000555'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/7cc367b3fe0307870165831ed33679c5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/55d89906bab9141467000555'>Adham Al-Harazi</a>
</div>
<a UTCms='1444893236000' class='quanto-date posted-at response-posted-at' href='#561f5231e47c5470b5000581'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Sure, I will post it when I finish coding it  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='561fbdf4e47c5428960007e4' id='561fbdf4e47c5428960007e4'>
<a href='#561fbdf4e47c5428960007e4'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/55d89906bab9141467000555'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/7cc367b3fe0307870165831ed33679c5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/55d89906bab9141467000555'>Adham Al-Harazi</a>
</div>
<a UTCms='1444920823000' class='quanto-date posted-at response-posted-at' href='#561fbdf4e47c5428960007e4'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>below code returns the column of closes for the passed sid =SPY, how can I get the current sid the pipeline is calculating so I can get that sid closes column.?</p>

<pre><code>spy_column = close[:, assets.searchsorted(8554)]  
</code></pre>

<pre><code>current_stock_column = close[:,assets.?] # what is the method ?  
</code></pre>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='562031daa41369586a0000f5' id='562031daa41369586a0000f5'>
<a href='#562031daa41369586a0000f5'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1444950496000' class='quanto-date posted-at response-posted-at' href='#562031daa41369586a0000f5'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>As I recall, there is a general Quantopian rule that a backtest has to be repeatable (run 1 must return the same results and run 2, for the same capital &amp; start/end dates).  Would this rule out random sampling of securities using pipeline?  Or is there a work-around by using a fixed random number generator seed?  Just thought I&#39;d ask in case there is a &quot;gotcha&quot; before I try it.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='562117bd96bf1291d40002f2' id='562117bd96bf1291d40002f2'>
<a href='#562117bd96bf1291d40002f2'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5600b0d4daa5828e5d000243'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/664b454456e4119f2b7cab3b655b8ec5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5600b0d4daa5828e5d000243'>Christopher Hallquist</a>
</div>
<a UTCms='1445009347000' class='quanto-date posted-at response-posted-at' href='#562117bd96bf1291d40002f2'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>One thing I would like to see: a good way to use the pipeline on data taken at intervals greater than a day, e.g. every month for several years. I&#39;m trying to build an algorithm using pipeline plus the long-term performance of certain assets, and I keep getting time-out errors.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56214c2ff6707bd41a000028' id='56214c2ff6707bd41a000028'>
<a href='#56214c2ff6707bd41a000028'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5118dbf1a4d447e2a6000050'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/ce323165e919dbc2ce95c864939caf12?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5118dbf1a4d447e2a6000050'>Costantino</a>
</div>
<a UTCms='1445022776000' class='quanto-date posted-at response-posted-at' href='#56214c2ff6707bd41a000028'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Yes, I&#39;ve the same timeouts problems when I try to extract quarterly fundamental data.<br>
More details in this post:<br>
<a href="https://www.quantopian.com/posts/fundamental-history-based-algo#561fb3b1bf797603590006ac">https://www.quantopian.com/posts/fundamental-history-based-algo#561fb3b1bf797603590006ac</a>  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='562196462b9a17dddb000179' id='562196462b9a17dddb000179'>
<a href='#562196462b9a17dddb000179'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/54460194d718f327fd000380'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e511e4eeb9334ef82f1caa7bd66c36dc?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/54460194d718f327fd000380'>Luca</a>
</div>
<a UTCms='1445041737000' class='quanto-date posted-at response-posted-at' href='#562196462b9a17dddb000179'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>+1 for Grant&#39;s question: contest rules regarding random sampling stocks.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56230296795e09c5b00001e4' id='56230296795e09c5b00001e4'>
<a href='#56230296795e09c5b00001e4'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/55ed0ebaf7eced2820000138'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/192fde5a5de866362a9e34c096cb8a9b?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/55ed0ebaf7eced2820000138'>Minh</a>
</div>
<a UTCms='1445135005000' class='quanto-date posted-at response-posted-at' href='#56230296795e09c5b00001e4'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Do I need to call set_universe before using pipeline to construct my own universe of securities?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5623e78c7747b1cef2000476' id='5623e78c7747b1cef2000476'>
<a href='#5623e78c7747b1cef2000476'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5600b0d4daa5828e5d000243'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/664b454456e4119f2b7cab3b655b8ec5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5600b0d4daa5828e5d000243'>Christopher Hallquist</a>
</div>
<a UTCms='1445193619000' class='quanto-date posted-at response-posted-at' href='#5623e78c7747b1cef2000476'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>One thing I&#39;d really like to be able to do: calculate pipeline-style factors on manually chosen securities, for example, using the dividend-adjusted price history of bond ETFs to estimate the risk-free rate of return. In general, having dividend-adjusted prices seems like a big deal and our access to that data should be as flexible as possible  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='562403a20d86e94f2d00031f' id='562403a20d86e94f2d00031f'>
<a href='#562403a20d86e94f2d00031f'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5033e9d73fb2eb0002000231'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/4a9a839742731aad6e110e1d3586e020?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5033e9d73fb2eb0002000231'>Simon Thornington</a>
</div>
<a UTCms='1445200806000' class='quanto-date posted-at response-posted-at' href='#562403a20d86e94f2d00031f'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>+100 to this.  Dividend-adjusted prices are really important, but it&#39;s tough to use them only in Pipeline.  I would really like to fit models on dividend-adjusted one-minute data.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5624faaf2f18303c9a00047a' id='5624faaf2f18303c9a00047a'>
<a href='#5624faaf2f18303c9a00047a'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5600b0d4daa5828e5d000243'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/664b454456e4119f2b7cab3b655b8ec5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5600b0d4daa5828e5d000243'>Christopher Hallquist</a>
</div>
<a UTCms='1445264055000' class='quanto-date posted-at response-posted-at' href='#5624faaf2f18303c9a00047a'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Do we have an ETA for when it will be possible to use Pipeline in the contest? I&#39;ve spent much of my free time in the past week working on a Pipeline-based algo that I&#39;m quite excited about, and I&#39;m itching to enter it in the contest.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5625237ccdbaaf80a6000004' id='5625237ccdbaaf80a6000004'>
<a href='#5625237ccdbaaf80a6000004'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/53dfa27b197bbb2516000159'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/51e4ba51c431ce2b4373006a33ade2aa?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/53dfa27b197bbb2516000159'>Karen Rubin</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1445274495000' class='quanto-date posted-at response-posted-at' href='#5625237ccdbaaf80a6000004'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Christopher,<br>
Glad to hear you have something you are excited about. We have people actively working on getting the pipeline into paper trading. I expect it&#39;s on the order of a few weeks away. Around that point you will be able to submit contest entries using it. </p>

<p>We are also working on dividend adjusted pricing throughout the backtester. That one is a little further out, but we are also actively working on it. (Research will come after that.) </p>

<p>I&#39;d love more information about wanting to use the pipeline on manually chosen securities. I&#39;ve heard this a few times, and was surprised. Is the key reason that you want to do ETFs vs companies? Or is there another reason why the pipeline filtering process doesn&#39;t work for you? </p>

<p>Thanks,<br>
KR  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='562523bd134b3eaeb3000002' id='562523bd134b3eaeb3000002'>
<a href='#562523bd134b3eaeb3000002'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/53dfa27b197bbb2516000159'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/51e4ba51c431ce2b4373006a33ade2aa?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/53dfa27b197bbb2516000159'>Karen Rubin</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1445274561000' class='quanto-date posted-at response-posted-at' href='#562523bd134b3eaeb3000002'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Regarding timeout issues that a number of you have mentioned, we released some performance improvements this morning that should help. Please let me know if you continue to see issues.  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='56252564cdbaafe09a000015' id='56252564cdbaafe09a000015'>
<a href='#56252564cdbaafe09a000015'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5309211a7d02b22150000030'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3786c5e64868dc7e6b197f950d4a77c6?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5309211a7d02b22150000030'>Nicola Cannata </a>
</div>
<a UTCms='1445274984000' class='quanto-date posted-at response-posted-at' href='#56252564cdbaafe09a000015'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Karen,<br>
so you confirm that for next contest deadline on November 2, algorithms using Pipeline will not be accepted?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56252b3a9d94011bcd000043' id='56252b3a9d94011bcd000043'>
<a href='#56252b3a9d94011bcd000043'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5600b0d4daa5828e5d000243'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/664b454456e4119f2b7cab3b655b8ec5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5600b0d4daa5828e5d000243'>Christopher Hallquist</a>
</div>
<a UTCms='1445276480000' class='quanto-date posted-at response-posted-at' href='#56252b3a9d94011bcd000043'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Okay, so I figured out that when creating custom factors, because &quot;assets&quot; is an array of IDs, it&#39;s easy to compare those IDs against a list of hand-picked IDs to create a factor that is equal to 1 if the ID is in the list, and 0 otherwise. Currently, my algo uses this to build a list of securities that&#39;s <em>mostly</em> selected by dollar-volume, but will always include SPY, SHY, and TLT (and will have certain other custom factors computed for those three ETFs, as well as the stocks selected by dollar-volume).  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='562540f9c04bd89a8a00001f' id='562540f9c04bd89a8a00001f'>
<a href='#562540f9c04bd89a8a00001f'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/53dfa27b197bbb2516000159'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/51e4ba51c431ce2b4373006a33ade2aa?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/53dfa27b197bbb2516000159'>Karen Rubin</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1445282050000' class='quanto-date posted-at response-posted-at' href='#562540f9c04bd89a8a00001f'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Nicola,<br>
Pipeline algos will be accepted in the contest as soon as they work in paper trading. We are working on that as fast as possible. (We want it too!)  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='562a2e0b7bf63d981500027a' id='562a2e0b7bf63d981500027a'>
<a href='#562a2e0b7bf63d981500027a'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5118dbf1a4d447e2a6000050'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/ce323165e919dbc2ce95c864939caf12?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5118dbf1a4d447e2a6000050'>Costantino</a>
</div>
<a UTCms='1445604882000' class='quanto-date posted-at response-posted-at' href='#562a2e0b7bf63d981500027a'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Unfortunatly I still get a Timeout Error, when I try to extract single quarter fundamental data.<br>
Here I&#39;m attaching the notebook for the algorithm and in the next post the backtest...  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='562a3bb31652a885dc00001a' id='562a3bb31652a885dc00001a'>
<a href='#562a3bb31652a885dc00001a'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5118dbf1a4d447e2a6000050'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/ce323165e919dbc2ce95c864939caf12?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5118dbf1a4d447e2a6000050'>Costantino</a>
</div>
<a UTCms='1445608377000' class='quanto-date posted-at response-posted-at' href='#562a3bb31652a885dc00001a'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>and here is the algo+backtest (please set as CustomFactor RevenueTTM3 at line 122).</p>

<p>My goal is to extract the single quarterly entries for a fundamental dataset set with window_length = 252.<br>
This is necessary for example, if you need annual fundamental data oder quarterly changes in the last 12 months.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='562e37863d4bb9f5e4000a46' id='562e37863d4bb9f5e4000a46'>
<a href='#562e37863d4bb9f5e4000a46'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/53dfa27b197bbb2516000159'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/51e4ba51c431ce2b4373006a33ade2aa?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/53dfa27b197bbb2516000159'>Karen Rubin</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1445869451000' class='quanto-date posted-at response-posted-at' href='#562e37863d4bb9f5e4000a46'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thanks for posting this algo Constantino. We&#39;ll look into the timeout issue.  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='562e3bc48d7aef6e630006a6' id='562e3bc48d7aef6e630006a6'>
<a href='#562e3bc48d7aef6e630006a6'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5118dbf1a4d447e2a6000050'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/ce323165e919dbc2ce95c864939caf12?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5118dbf1a4d447e2a6000050'>Costantino</a>
</div>
<a UTCms='1445870537000' class='quanto-date posted-at response-posted-at' href='#562e3bc48d7aef6e630006a6'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Karen,</p>

<p>to reproduce the Timeout, do not forget to set RevenueTTM3 at line 122 as CustomFactor.</p>

<p>My goal is to get Trailing Twelve Months (TTM) fundamental data to create a Custom Factor for computing the Piotroski and Beneish Score.</p>

<p>If there is a more convenient way to get TTM data in a Pipeline factor, let me know... I participated also to this discussion<br>
  <a href="https://www.quantopian.com/posts/fundamental-history-based-algo#561fb3b1bf797603590006ac">https://www.quantopian.com/posts/fundamental-history-based-algo#561fb3b1bf797603590006ac</a><br>
and it seems, there is at the moment no other simpler way to do this.</p>

<p>Thanks!<br>
Costantino  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='563057034a87882b650001b0' id='563057034a87882b650001b0'>
<a href='#563057034a87882b650001b0'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/54c9f95a1e5cc4ba4d0002a9'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3f82e324b72499238a6476b1a58c60aa?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/54c9f95a1e5cc4ba4d0002a9'>lets make america great again</a>
</div>
<a UTCms='1446008583000' class='quanto-date posted-at response-posted-at' href='#563057034a87882b650001b0'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>How does one filter out chinese stocks using the pipeline?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='563193131bbf73d42f0000f2' id='563193131bbf73d42f0000f2'>
<a href='#563193131bbf73d42f0000f2'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/514a23ed46a2329dd8000027'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f292ab7887c2e8698d013b40e1718e8b?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/514a23ed46a2329dd8000027'>Suminda Dharmasena</a>
</div>
<a UTCms='1446089498000' class='quanto-date posted-at response-posted-at' href='#563193131bbf73d42f0000f2'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I am looking to get something like:</p>

<ul>
<li>Top 20% or top 20 from the pipeline<br></li>
<li>Bottom 20% or bottom 20<br></li>
<li>Between 40% to 75% between 100 and 150 in rank<br></li>
<li>10% +/- or 20 items around from value x<br></li>
<li>etc.</li>
</ul>

<p>In short top or bottom n% or m items, items between n%, m% or rank, % or number of items around a given pivotal value.</p>

<p>Is it possible to add an example on how this can be done.</p>

<p>Also how to successively apply a filter.  E.g. apply filter 1 and on this universe apply filter 2 followed by filter 3. </p>

<p>With the new APIs is it possible to add better auto completion and the ability to discover the white listed APIs from within the IDE.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5682f3e450d401992e0003b2' id='5682f3e450d401992e0003b2'>
<a href='#5682f3e450d401992e0003b2'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5657a09af95a18caf600085a'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/cb7ba84227ef79495f4a09f8bf9aea38?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5657a09af95a18caf600085a'>Adam Smith</a>
</div>
<a UTCms='1451422697000' class='quanto-date posted-at response-posted-at' href='#5682f3e450d401992e0003b2'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>The pipeline looks perfect to me.</p>

<p>My question is whether pipeline API is eligible to implement in IB paper trading or even real money trading. If not, when is the time frame we can expect it comes?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5682fe5f0ef5955f010002c2' id='5682fe5f0ef5955f010002c2'>
<a href='#5682fe5f0ef5955f010002c2'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/55eefc2af269c592d80008a9'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/8985b490c95e135c2bbcd7d1a0dce16b?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/55eefc2af269c592d80008a9'>Jamie McCorriston</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1451425383000' class='quanto-date posted-at response-posted-at' href='#5682fe5f0ef5955f010002c2'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Adam,</p>

<p>Currently, pipeline is supported in backtesting and Quantopian (zipline) paper trading. We are currently working on bringing it to IB paper and real money trading. There&#39;s no specific timeline but it&#39;s at the top of our list!  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='56c6ead53bde6384ff0008fc' id='56c6ead53bde6384ff0008fc'>
<a href='#56c6ead53bde6384ff0008fc'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/55e602a002dd2432b00001d2'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/706508819421d25d2dfb273421dc6887?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/55e602a002dd2432b00001d2'>Burrito Dan</a>
</div>
<a UTCms='1455876826000' class='quanto-date posted-at response-posted-at' href='#56c6ead53bde6384ff0008fc'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Karen, I initially thought pipeline overcomplex, but the more I use it, the more I appreciate it!</p>

<p>Anyway, I note that several of the built-in factors use EMA. I assume this is it to reduce the computational burden in backtests: these can be calculated based on 1 days history and 1 multiplication, whereas SMA require the entire window_length history and multiplications. Is there a special implementation trick you&#39;ve used for this, or do I just use a window_length of 1.</p>

<p>EDIT: specifically I am trying to implement ATR using the conventional Wilder&#39;s EMA. At any point in the time, you need all the historic high low close prices to calculate the next ATR, but the shortcut is to use the previous day&#39;s ATR and todays high low close. Is it possible to get yesterday&#39;s ATR in a CustomFactor?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56ce23a0c3ae9e43e400014e' id='56ce23a0c3ae9e43e400014e'>
<a href='#56ce23a0c3ae9e43e400014e'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56990262be2416509000011c'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/0cccbbae7e2a982659980bd3c4d0a6eb?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56990262be2416509000011c'>Richard Jamieson</a>
</div>
<a UTCms='1456350120000' class='quanto-date posted-at response-posted-at' href='#56ce23a0c3ae9e43e400014e'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Karen,</p>

<p>I think that my query may be similar or at least related to Dan&#39;s above. I am trying to build a custom factor using the Williams Percent R method from talib. Here is my code:  </p>

<pre><code>from talib import WILLR   

# Create custom factor to calculate Williams %R  
class Williams(CustomFactor):  
    # Pre-declare inputs and window_length  
    inputs = [USEquityPricing.close, USEquityPricing.high, USEquityPricing.low]  
    window_length = 10  
    # Compute value

    def compute(self, today, assets, out, close, highs, lows):  
        #calculate Williams percent R for the stock  
        out[:] = WILLR(highs,lows,close, timeperiod=10)  
</code></pre>

<p>However, when I try to run this I get the following error: AssertionError: high has wrong dimensions<br>
There was a runtime error on line 101.</p>

<p>Any idea where I&#39;m going wrong?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56ceb10f834943cff8000532' id='56ceb10f834943cff8000532'>
<a href='#56ceb10f834943cff8000532'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/55e602a002dd2432b00001d2'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/706508819421d25d2dfb273421dc6887?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/55e602a002dd2432b00001d2'>Burrito Dan</a>
</div>
<a UTCms='1456386324000' class='quanto-date posted-at response-posted-at' href='#56ceb10f834943cff8000532'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I think WILLR probably wants a float, rather than a vector. You have to do some looping or a map operation. If you search the community for ATR you will see something similar.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56ceb220c3ae05df720004cc' id='56ceb220c3ae05df720004cc'>
<a href='#56ceb220c3ae05df720004cc'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/55e602a002dd2432b00001d2'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/706508819421d25d2dfb273421dc6887?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/55e602a002dd2432b00001d2'>Burrito Dan</a>
</div>
<a UTCms='1456386597000' class='quanto-date posted-at response-posted-at' href='#56ceb220c3ae05df720004cc'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Or it may be it wants a time series for one ticker, but you are passing a time series for multiple tickers.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56cf17a9f33ff5a8f600007b' id='56cf17a9f33ff5a8f600007b'>
<a href='#56cf17a9f33ff5a8f600007b'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56990262be2416509000011c'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/0cccbbae7e2a982659980bd3c4d0a6eb?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56990262be2416509000011c'>Richard Jamieson</a>
</div>
<a UTCms='1456412593000' class='quanto-date posted-at response-posted-at' href='#56cf17a9f33ff5a8f600007b'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thanks Dan - I think it&#39;s the second thing you mention - am working on a solution now, will post if I nail it...  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56cf4b9a1123a9d837000132' id='56cf4b9a1123a9d837000132'>
<a href='#56cf4b9a1123a9d837000132'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4e322fa200fffd0001000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f59406ed486edc76c94544468c11344d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4e322fa200fffd0001000001'>Scott Sanderson</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1456425890000' class='quanto-date posted-at response-posted-at' href='#56cf4b9a1123a9d837000132'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p><code>talib</code>&#39;s function signatures are a bit awkward to use in Pipeline right now.  There are three major issues with them that I&#39;m aware of:</p>

<ol>
<li>TALib&#39;s functions assume that they&#39;re receiving all the data at once, and they perform rolling computations in their inputs.<br></li>
<li>TALib&#39;s functions only work on one asset&#39;s worth of data at a time.<br></li>
<li>Many TALib functions don&#39;t robustly handle NaNs.  Since Pipeline often provides columns with leading NaNs (e.g. for a company that&#39;s only existed for 5 days when you&#39;ve requested a 10 day window.), you have to manually ignore columns containing NaNs.</li>
</ol>

<p>As a concrete example, the <code>WILLR</code> function mentioned here has essentially the following signature/semantics:</p>

<pre><code># The actual docstring for WILLR is much less informative than this :(.  
def WILLR(high, low, close, timeperiod=14):  
    &quot;&quot;&quot;  
    Parameters  
    ----------  
    high : ndarray[float]  
        1D array of historical highs for a single asset.  
    lows : ndarray[float]  
        1D array of historical lows for a single asset.  
        Must be the same length as highs.  
    close : ndarray[float]  
        1D array of historical closes for a single asset.  
        Must be the same length as highs.  
    timeperiod : int, optional  
        Lookback window over which to compute the transformation.  
        Default value is 14 periods.

    Returns  
    -------  
    out : ndarray[float]  
        A 1D array of the same length as the input arrays.

        The first `timeperiod` entries will be NaN.  The remaining entries  
        contain the result of computing William&#39;s %R on a trailing window of  
        `timeperiod` entries.  
    &quot;&quot;&quot;  
</code></pre>

<p>If we want to use this in Pipeline, we have to jump through a few hoops:</p>

<ol>
<li>We have to call it roughly 8000 times, once for each asset column.<br></li>
<li>We have to call it on a window of length <code>timeperiod</code> and then extract the last entry.  (I haven&#39;t looked much into the underlying TA-Lib implementations to see whether this is a significant performance hit.)<br></li>
<li>We have to manually screen out columns containing NaNs if the TALib function we want to use doesn&#39;t support them effectively.</li>
</ol>

<p>I&#39;ve attached a notebook with a discussion of the issues and a full example showing how I&#39;d do this in Pipeline.  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='56cf4cf440d106094600010f' id='56cf4cf440d106094600010f'>
<a href='#56cf4cf440d106094600010f'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/55e602a002dd2432b00001d2'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/706508819421d25d2dfb273421dc6887?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/55e602a002dd2432b00001d2'>Burrito Dan</a>
</div>
<a UTCms='1456426241000' class='quanto-date posted-at response-posted-at' href='#56cf4cf440d106094600010f'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Generally the calculations for indicators are pretty simple, and can probably be implemented in Python using NumPy using vector and matrix operations. This would probably be 100x faster than looping through thousands of TALib calls.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56cf51551123a9d837000185' id='56cf51551123a9d837000185'>
<a href='#56cf51551123a9d837000185'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4e322fa200fffd0001000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f59406ed486edc76c94544468c11344d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4e322fa200fffd0001000001'>Scott Sanderson</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1456427359000' class='quanto-date posted-at response-posted-at' href='#56cf51551123a9d837000185'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><blockquote>
<p>Generally the calculations for indicators are pretty simple, and can probably be implemented in Python using NumPy using vector and matrix operations. This would probably be 100x faster than looping through thousands of TALib calls.</p>
</blockquote>

<p>This is definitely true, though the flipside of this is that most Pipelines using anything but USEquityPricing data are currently bottlenecked on IO.  In general, it&#39;s a bad performance practice to be iterating over lots of numpy arrays in pure python, but there&#39;s some value in being able to quickly pull in a TA-Lib function to see if it&#39;s even worth rewriting for performance.  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='56cf563467a947d4870000bd' id='56cf563467a947d4870000bd'>
<a href='#56cf563467a947d4870000bd'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56990262be2416509000011c'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/0cccbbae7e2a982659980bd3c4d0a6eb?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56990262be2416509000011c'>Richard Jamieson</a>
</div>
<a UTCms='1456428603000' class='quanto-date posted-at response-posted-at' href='#56cf563467a947d4870000bd'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Scott - I was hitting up against the exact problems you mentioned, so thank you for providing some clarity as to why<br>
@Dan - I went with your suggestion and started from scratch using vector and matrix operations and came up with this:  </p>

<pre><code>class Williams(CustomFactor):  
    # Pre-declare inputs and window_length  
    inputs = [USEquityPricing.close, USEquityPricing.high, USEquityPricing.low]  
    window_length = 10  
    # Compute value  
    def compute(self, today, assets, out, close, high, low):  
        #calculate Williams percent R for the stock  
        highs = np.amax(high, axis=0)  
        lows = np.amin(low, axis=0)  
        out[:] = (highs-close[-1])/(highs-lows)*-100  
</code></pre>

<p>I haven&#39;t actually checked the numbers it&#39;s producing against a second data source, but just eyeballing them they at least look like Williams %R numbers.<br>
Finally @Dan - any thoughts on the speed of this approach? Should be pretty quick unless np.amax and np.amin slowing things down?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56d033c344bf808ecc00057a' id='56d033c344bf808ecc00057a'>
<a href='#56d033c344bf808ecc00057a'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/55e602a002dd2432b00001d2'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/706508819421d25d2dfb273421dc6887?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/55e602a002dd2432b00001d2'>Burrito Dan</a>
</div>
<a UTCms='1456485321000' class='quanto-date posted-at response-posted-at' href='#56d033c344bf808ecc00057a'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Looks pretty pythonic to me :)  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56d0c7920a8230a44b00005c' id='56d0c7920a8230a44b00005c'>
<a href='#56d0c7920a8230a44b00005c'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1456523159000' class='quanto-date posted-at response-posted-at' href='#56d0c7920a8230a44b00005c'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Is it possible to generate OHLCV daily bars from the minutely data, and then feed them to pipeline?  For example, say I wanted to smooth the minutely price data and then assign OHLC daily values based on the smoothing results, then feed them to pipeline?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5796eb37c37d14b68b000003' id='5796eb37c37d14b68b000003'>
<a href='#5796eb37c37d14b68b000003'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/52c1e96486c5d299ba000053'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/ca83949ea9fbb50da7868f5dae3e98ef?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/52c1e96486c5d299ba000053'>David</a>
</div>
<a UTCms='1469508413000' class='quanto-date posted-at response-posted-at' href='#5796eb37c37d14b68b000003'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Is it possible to select Dow Jones Industrial Stock with this? For instance if I wanted to pick 5 stocks out of the 30 stocks based on some factors.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58a019000b9016000a64a8b0' id='58a019000b9016000a64a8b0'>
<a href='#58a019000b9016000a64a8b0'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57dbff04f4b94e6baa00027b'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/17c9237ed7fbf394526f0b94dd6ad150?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57dbff04f4b94e6baa00027b'>Deepak Gopal V</a>
</div>
<a UTCms='1486887168000' class='quanto-date posted-at response-posted-at' href='#58a019000b9016000a64a8b0'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Is one pipeline only allowed per algorithm still?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58b0e8a1381534210eeaf89c' id='58b0e8a1381534210eeaf89c'>
<a href='#58b0e8a1381534210eeaf89c'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/568c1dc8478133b69100004f'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e7b82dde1e26aefc1711073be1ddd508?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/568c1dc8478133b69100004f'>Ben Harms</a>
</div>
<a UTCms='1487988897000' class='quanto-date posted-at response-posted-at' href='#58b0e8a1381534210eeaf89c'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Is functionality to support multiple Pipelines in a single algorithm still in the roadmap?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58fa7b0500bfa300105b65b2' id='58fa7b0500bfa300105b65b2'>
<a href='#58fa7b0500bfa300105b65b2'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/52b0e0e0271a27fc88000049'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e5451406e743420c700eb2b054b2fc57?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/52b0e0e0271a27fc88000049'>Blue Seahawk</a>
</div>
<a UTCms='1492810501000' class='quanto-date posted-at response-posted-at' href='#58fa7b0500bfa300105b65b2'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Multiple pipelines possibility in the future being discussed here: <a href="https://www.quantopian.com/posts/multiple-pipelines">https://www.quantopian.com/posts/multiple-pipelines</a>  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58fa7fb43e5bbf753e2c6089' id='58fa7fb43e5bbf753e2c6089'>
<a href='#58fa7fb43e5bbf753e2c6089'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/52b0e0e0271a27fc88000049'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e5451406e743420c700eb2b054b2fc57?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/52b0e0e0271a27fc88000049'>Blue Seahawk</a>
</div>
<a UTCms='1492811700000' class='quanto-date posted-at response-posted-at' href='#58fa7fb43e5bbf753e2c6089'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>When learning, it can be useful to know where the edges are. This is about the smallest viable working pipeline algo for scheduled ordering I think. <em>The screen and import of Q500US are not required however it would take a long time to process all 8000+ stocks.</em></p>

<pre><code>from quantopian.algorithm import attach_pipeline, pipeline_output  
from quantopian.pipeline  import Pipeline  
from quantopian.pipeline.filters import Q500US

def initialize(context):  
    schedule_function(trade, date_rules.every_day(), time_rules.market_open())  
    attach_pipeline(Pipeline(screen=Q500US()), &#39;z&#39;)

def before_trading_start(context, data):  
    context.stocks = pipeline_output(&#39;z&#39;)

def trade(context, data):  
    for s in context.stocks.index:  
        order(s, 1)  
</code></pre>
</div>
</div>
</div>

</div>
<div class='sign-in-please'>
Please <a href='/signin?return_to=/posts/introducing-the-pipeline-api'>sign in</a> or
<a href='/users/sign_up?redirect_to=/posts/introducing-the-pipeline-api'>join Quantopian</a> to
post a reply.
</div>
</div>
<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
  window.fbAsyncInit = function() {
    FB.init({
      appId: "550580758292093",
      status: false,
      cookie: true,
      xfbml: true
    });
  };
  
  (function(d, debug){
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) {return;}
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
    ref.parentNode.insertBefore(js, ref);
  }(document, /*debug*/ false));
  
  window.twttr = (function (d,s,id) {
    var t, js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return; js=d.createElement(s); js.id=id;
    js.src="//platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs);
    return window.twttr || (t = { _e: [], ready: function(f){ t._e.push(f) } });
  }(document, "script", "twitter-wjs"));
</script>
<script>
  $(document).ready(function () {
    quanto.instances.pm = new quanto.PostManager(false)
  });
</script>

<div class='login-footer'>
<div class='container'>
<div class='login-footer-text'>
Become an expert in quant finance through Quantopian's hands-on education.
</div>
<div class='login-footer-button'>
<button class='btn btn-v2 stroke join-modal-link mixpanel-button' data-event='anon join footer click posts' data-mixpanel='click'>
Join Now
</button>
</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='error-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'>Error</span>
</div>
<div class='modal-body body-content'>
<p>Sorry, something went wrong.  Try again or contact us by <a class='feedback-link'>sending feedback</a>.</p>
</div>
<div class='modal-footer'>
<button class='btn btn-v2 blue action-button' data-dismiss='modal' href='#'>Close</button>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='confirmation-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'></span>
</div>
<div class='modal-body body-content'></div>
<div class='modal-footer'>
<div class='pull-right'>
<button class='btn btn-v2 border' data-dismiss='modal'>Cancel</button>
<button class='btn btn-v2 blue action-button' data-dismiss='modal'></button>
</div>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='message-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'></span>
</div>
<div class='modal-body body-content'></div>
<div class='modal-footer'>
<button class='btn btn-v2 blue action-button' data-dismiss='modal' id='message-modal-close'>Close</button>
</div>

</div>
</div>
</div>

<div class='always-bootstrap3-modals'>
<div class='fade modal quanto-modal-v2' id='join-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header visible-small'>
<span class='title'>
Join Quantopian.  It's Free!
</span>
<div class='modal-x-out visible-xs'></div>
</div>
<div class='modal-body'>
<div class='flex-wrap'>
<div class='join-left-pane hidden-small'>
<div class='margin_30l'>
<div class='join-hero-text'>
Join Quantopian.  It's Free!
</div>
<div class='join-benefits'>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image code'></div>
</div>
<div class='join-text'>
Use our research platform, backtester, and dozens of clean data sets.
</div>
</div>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image learn'></div>
</div>
<div class='join-text'>
Learn with our hands-on education and community forums.
</div>
</div>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image win'></div>
</div>
<div class='join-text'>
Enter to win cash prizes in our contest.
</div>
</div>
</div>
<div class='hidden saved-reminder'>
Don't worry, all your work is already saved.
</div>
</div>
</div>
<div class='join-right-pane'>
<div class='hidden-small'>
<div class='button-pane'>
<a class="button btn-v2 user-form-btn" href="/signin">Already a Quantopian member?</a>
</div>
</div>
<div class='visible-small'>
<div class='already-member'>
<a href='/signin'>Already a Quantopian member?</a>
</div>
</div>
<form class="quanto-form-v2" id="new-user-modal-form" action="/users" accept-charset="UTF-8" data-remote="true" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><div class='error-message hidden'>
<div class='message'></div>
</div>
<div class='name-group'>
<div class='form-group inline-block'>
<label for="user_firstname">First Name</label>
<input class="form-control firstname" pattern=".*" required="required" autocomplete="off" autofocus="autofocus" type="text" name="user[firstname]" id="user_firstname" />
</div>
<div class='form-group inline-block'>
<label for="user_lastname">Last Name</label>
<input class="form-control" value="" pattern=".*" required="required" autocomplete="off" type="text" name="user[lastname]" id="user_lastname" />
</div>
</div>
<div class='form-group'>
<label for="user_email">Email</label>
<input class="form-control" value="" pattern=".*" required="required" autocomplete="off" type="email" name="user[email]" id="user_email" />
</div>
<div class='form-group'>
<label for="user_password">Password</label>
<input autocomplete="off" class="form-control" pattern=".*" required="required" type="password" name="user[password]" id="user_password" />
</div>
<div class='checkbox eula'>
<input id='eula-checkbox' type='checkbox'>
<div class='quanto-checkbox'></div>
<label for='eula-checkbox' id='checkbox-label'>I accept the <a href='/policies/terms' target='_blank'>Terms Of Use</a> and <a href='/policies/privacy' target='_blank'>Privacy Policy</a>.</label>
</div>
<div class='checkbox mailchimp-box'>
<input name="user[allow_marketing_emails]" type="hidden" value="0" /><input type="checkbox" value="1" name="user[allow_marketing_emails]" id="user_allow_marketing_emails" />
<div class='quanto-checkbox'></div>
<label for='user_allow_marketing_emails'>
Send me email updates with the latest news from the Quantopian community. We send these emails about once a month.
</label>
</div>
<div class='button-row'>
<button class='btn-v2 blue full' data-redirect-to='/tutorials/getting-started' id='sign-up-button' type='Submit'>Join Quantopian</button>
</div>
</form></div>
</div>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='feedback-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title'>Contact Support</span>
</div>
<div class='modal-body'>
<form class='anon-user controls quanto-form-v2' id='feedback-form'>
<div class='feedback-inputs'>
<div class='form-group'>
<input autofocus class='form-control' id='feedback-email-box' name='email' placeholder='Email Address' type='email'>
</div>
<div class='form-group'>
<input class='form-control' id='feedback-name-box' placeholder='Name' type='name'>
</div>
<div class='form-group'>
<textarea class='form-control' id='feedback-box' name='feedback' placeholder='What may we help you with?' rows='10'></textarea>
</div>
</div>
</form>
<form class='hidden quanto-form-v2 select-resource-area'>
<div class='select-step select-type-step'>
<div class='form-group'>
<select class='form-control select-resource-dropdown' title='Select the item you need help with'>
<option value='algorithm'>Algorithm</option>
<option value='backtest'>Backtest</option>
<option value='notebook'>Notebook</option>
</select>
</div>
</div>
<div class='select-step loading-area hidden'>
<div class='loading-text'>
Loading...
</div>
</div>
<div class='select-step empty-list-area hidden'>
<div class='back-button'>Go Back</div>
<div class='empty-text'>
No <span class='empty-list-resource-text'>algorithms</span> found
</div>
</div>
<div class='select-algo-area select-step hidden'>
<div class='back-button'>Go Back</div>
<table class='select-algo-table select-item-table'>
<thead>
<tr>
<th>
Algorithm
<span class='sort-icon'></span>
</th>
<th>
Last Modified
<span class='sort-icon'></span>
</th>
</tr>
</thead>
</table>
</div>
<div class='select-backtest-area select-step hidden'>
<div class='back-button'>Go Back</div>
<table class='select-backtest-table select-item-table'>
<thead>
<tr>
<th>
Backtest
<span class='sort-icon'></span>
</th>
<th>
Started At
<span class='sort-icon'></span>
</th>
<th>
Overall Return
<span class='sort-icon'></span>
</th>
<th>
Status
<span class='sort-icon'></span>
</th>
</tr>
</thead>
</table>
</div>
<div class='select-notebook-area select-step hidden'>
<div class='back-button'>Go Back</div>
<div class='subtitle select-cell-step'>
Choose a cell to use as the preview for this notebook:
</div>
<div class='iframe-wrapper'>
<iframe class='notebook-list-iframe slow-fade' src=''></iframe>
</div>
<div class='progress-area slow-fade in'>
<div class='progress-container'>
<div class='progress-title'>
<div class='quanto-loader gray'></div>
</div>
</div>
</div>
<div class='maintenance-area'>
<div class='error-container'>
<div class='row'>
<div class='col-md-14 msg-title h1'>
Sorry, research is currently undergoing maintenance.
</div>
</div>
<div class='row'>
<div class='col-md-14 msg-subtitle'>
Please check back shortly. If the maintenance period lasts longer than expected,
you can find updates on <a href='https://status.quantopian.com/'>status.quantopian.com</a>.
</div>
</div>

</div>
</div>
<div class='error-area'>
<div class='error-container'>
<div class='row'>
<div class='col-md-14 msg-title h1'>
Sorry, something went wrong on our end.
</div>
</div>
<div class='row'>
<div class='col-md-14 msg-subtitle'>
Please try again or contact <a class='open-feedback-link'>Quantopian support</a>.
</div>
</div>

</div>
</div>

</div>
<div class='selected-item-area select-step hidden'>
<div class='selected-item-group form-group'>
<div class='selected-item-control'>
<input class='disabled form-control selected-item-box' type='text'>
<span class='secure-icon icon'></span>
<button class='btn change change-primary-item-button change-selection-button new-btn transparent' type='button'>
<span class='refresh-icon icon'></span>
</button>
</div>
<div class='selected-backtest-control'>
<input class='disabled form-control selected-backtest-box' type='text'>
<span class='secure-icon icon'></span>
<button class='btn change-backtest-button change-selection-button new-btn transparent' type='button'>
<span class='refresh-icon icon'></span>
</button>
</div>
</div>
<div class='checkbox-group form-group'>
<div class='checkbox give-permission'>
<input class='give-permission-checkbox' id='feedback-give-permission-checkbox' type='checkbox'>
<div class='quanto-checkbox'></div>
<label for='feedback-give-permission-checkbox'>
I permit Quantopian to view <span class='item-type-text'>this algorithm,
backtest or notebook and their imported datasets</span> for the purpose of providing support.
</label>
</div>
</div>
</div>
</form>

<div class='loading-step hidden'>
<div class='loading-text'>
Submitting your support ticket...
</div>
</div>
<div class='success-step invisible'>
<h2 class='title center'>
You've successfully submitted a support ticket.
</h2>
<p>
Our support team will be in touch soon.
</p>
<div class='confirmation-image'></div>
</div>
</div>
<div class='modal-footer'>
<button class='btn-v2 blue' id='send-feedback-button'>Send</button>
<div class='error-message hidden'>
Error submitting support request.
</div>
</div>

</div>
</div>
</div>

</div>
</div>
<div class='footer' id='quanto-footer-container'>
<div class='container'>
<div class='row header-row'>
<div class='col-sm-fourth span3'>
<img class='async-image logotype-image' data-src='https://qf.quantopian.com/assets/logos/logo-q-full-b23bda5ac757691b9259d396d0dfef91567165868b8c955a836649686e6d2248.svg'>
</div>
<div class='col-sm-fourth span3'></div>
<div class='col-sm-fourth span3'></div>
<div class='col-sm-fourth span3'>
<div class='feedback-email'>
Need help?
<a href="/cdn-cgi/l/email-protection#c1a7a4a4a5a3a0a2aa81b0b4a0afb5aeb1a8a0afefa2aeac">Contact support.</a>
</div>
</div>
</div>
<div class='row'>
<div class='col-sm-fourth span3'>
<div class='header'>Company</div>
<div class='footer-row'>
<a href='/about'>About</a>
</div>
<div class='footer-row'>
<a href='/academia'>Academia</a>
</div>
<div class='footer-row'>
<a href='/jobs'>Careers</a>
</div>
<div class='footer-row'>
<a href='/posts'>Community</a>
</div>
<div class='footer-row'>
<a href='/events'>Events</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Learn &amp; Support</div>
<div class='footer-row'>
<a href='/faq'>FAQ</a>
</div>
<div class='footer-row'>
<a href='/tutorials/getting-started'>Getting Started</a>
</div>
<div class='footer-row'>
<a href='/docs'>Documentation</a>
</div>
<div class='footer-row'>
<a href='/tutorials'>Tutorials</a>
</div>
<div class='footer-row'>
<a href='/lectures'>Lectures</a>
</div>
<div class='footer-row'>
<a href='/opensource'>Open Source</a>
</div>
<div class='footer-row'>
<a href='https://status.quantopian.com/'>Site Status</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Notices</div>
<div class='footer-row'>
<a href='/policies/terms'>Terms of Use</a>
</div>
<div class='footer-row'>
<a href='/policies/privacy'>Privacy Policy</a>
</div>
<div class='footer-row'>
<a href='/security'>Security</a>
</div>
<div class='footer-row'>
<a href='/policies/code-of-conduct'>Code of Conduct</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Follow Us</div>
<div class='footer-row'>
<a href='https://www.twitter.com/quantopian'>Twitter</a>
</div>
<div class='footer-row'>
<a href='https://www.facebook.com/quantopian'>Facebook</a>
</div>
<div class='footer-row'>
<a href='https://www.linkedin.com/company/quantopian'>LinkedIn</a>
</div>
<div class='footer-row'>
<a href='https://www.youtube.com/channel/UC606MUq45P3zFLa4VGKbxsg'>YouTube</a>
</div>
</div>
</div>
<div class='row'>
<div class='col-xs-14 span12'>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian.
</p>
<p>
In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>

</div>
</div>
</div>
</div>
</div>
<div class='mobile-footer'>
<div class='mobile-nav-category main-links'>
<div class='mobile-nav-row-footer'>
<a href='/about'>About Quantopian</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/jobs'>Careers</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/posts'>Community</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/events'>Events</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/docs'>Documentation</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/academia'>Academia</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/lectures'>Lectures</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://status.quantopian.com/'>Status</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.facebook.com/quantopian'>Facebook</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.twitter.com/quantopian'>Twitter</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.linkedin.com/company/quantopian'>LinkedIn</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.youtube.com/channel/UC606MUq45P3zFLa4VGKbxsg'>YouTube</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/policies/terms'>Terms of Use</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/policies/privacy'>Privacy Policy</a>
</div>
</div>
<div class='mobile-nav-category'>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian.
</p>
<p>
In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>

</div>
</div>
</div>

</div>
<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script></body>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', "UA-8519877-1", {
    cookieDomain: "quantopian.com"
  });
  ga('set', 'dimension1', 'session_5f9dc7425d387f00077e48e4');
  
  ga('send', 'pageview');
</script>

<input type="hidden" name="is_mac" id="is_mac" value="false" />
<input type="hidden" name="mp" id="mp" value="75873953cd404bcc1da88a55ff51e3b4" />
<script>
  (function(e,a){if(!a.__SV){var b=window;try{var c,l,i,j=b.location,g=j.hash;c=function(a,b){return(l=a.match(RegExp(b+"=([^&]*)")))?l[1]:null};g&&c(g,"state")&&(i=JSON.parse(decodeURIComponent(c(g,"state"))),"mpeditor"===i.action&&(b.sessionStorage.setItem("_mpcehash",g),history.replaceState(i.desiredHash||"",e.title,j.pathname+j.search)))}catch(m){}var k,h;window.mixpanel=a;a._i=[];a.init=function(b,c,f){function e(b,a){var c=a.split(".");2==c.length&&(b=b[c[0]],a=c[1]);b[a]=function(){b.push([a].concat(Array.prototype.slice.call(arguments,
  0)))}}var d=a;"undefined"!==typeof f?d=a[f]=[]:f="mixpanel";d.people=d.people||[];d.toString=function(b){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);b||(a+=" (stub)");return a};d.people.toString=function(){return d.toString(1)+".people (stub)"};k="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
  for(h=0;h<k.length;h++)e(d,k[h]);a._i.push([b,c,f])};a.__SV=1.2;b=e.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";c=e.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}})(document,window.mixpanel||[]);
  mixpanel.init("75873953cd404bcc1da88a55ff51e3b4");
</script>
<script>
  mixpanel.track("view page", {"page": window.location.pathname});
</script>
</html>
