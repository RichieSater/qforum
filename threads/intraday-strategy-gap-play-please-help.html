<!DOCTYPE html>
<html>
<head>
<link href='i1.wp.com' rel='dns-prefetch'>
<link href='i2.wp.com' rel='dns-prefetch'>
<link href='i3.wp.com' rel='dns-prefetch'>
<meta content='2HgX9mcLHaPOX6sfaaAkhWtblhEB9yUNw4l6l46e1k4' name='google-site-verification'>
<link rel="shortcut icon" type="image/x-icon" href="external/favicon-q-ac1a76f2c200e9026b5b1147519bb4fab6256910588b831e2411bc6c7c1218c3.png" />
<title>
Intraday strategy - Gap play, please help!
</title>
<meta content='Hi all,  I&#39;ve learned a lot from all of you. I want to create a sort of ranking model but I need your help. This strategy starts a simple  gap  strategy (I will add more on this model later but I need a base). 0). Let&#39;s set our universe with Nasdaq 100 (I saw someone posted the list of it. Thanks). Our universe is totally depending on our preference. (I like SP500  or Russell 3000 though...) 1). This strategy is basically  long  only model. 2). Buy at market session open at 09:32 (EST) and...' name='description'>
<link rel="stylesheet" media="all" href="external/quanto-base-bundle-e8eb6050172aa0d24124d5c24bac90b2cccd88b5b9c7742026c0e9efab038c6e.css" />
<link rel="stylesheet" media="all" href="external/quanto-posts-bundle-aab01368d3f82d8dafc94ee9eabb82e77dc8c9fbbffa952fdcdc744dfa523cf3.css" />
<script src="external/quanto_global-057218867db29d5768131af5d6fb3476cef098e7d9e655108befb903c7ee985e.js"></script>
<script src="external/posts_bundle-3dfd82fa469c393d752e461d837aec9e4e364ae39f49198e34a6626f2180fdf7.js"></script>
<link href='external/logo-q-180x180-0f5a6a439c99203ed4aea6f656e7604c543d287be43d8b17c7591c1131f09a59.png' rel='apple-touch-icon'>
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="ARHYDhLj2foAJR1XmbyaTF8N/oDpftLne8us/p2h2GJ9d65DsBULGbk4RGbWUzI4Z4Pd6ZOyx/z5xHeUN+S62Q==" />
<meta content='width=device-width, initial-scale=1.0' name='viewport'>
<script>
//<![CDATA[
window.quanto_data={};quanto_data.bounce_back_params={"show_modal":null,"feedback_text":null};quanto_data.namespace="public";quanto_data.talib_info={"ADOSC":["Chaikin A/D Oscillator (Volume Indicators)",["fastperiod","3"],["slowperiod","10"]],"ADX":["Average Directional Movement Index (Momentum Indicators)",["timeperiod","14"]],"ADXR":["Average Directional Movement Index Rating (Momentum Indicators)",["timeperiod","14"]],"APO":["Absolute Price Oscillator (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["matype","0"]],"AROON":["Aroon (Momentum Indicators)",["timeperiod","14"]],"AROONOSC":["Aroon Oscillator (Momentum Indicators)",["timeperiod","14"]],"ATR":["Average True Range (Volatility Indicators)",["timeperiod","14"]],"BBANDS":["Bollinger Bands (Overlap Studies)",["timeperiod","5"],["nbdevup","2"],["nbdevdn","2"],["matype","0"]],"BETA":["Beta (Statistic Functions)",["timeperiod","5"]],"CCI":["Commodity Channel Index (Momentum Indicators)",["timeperiod","14"]],"CMO":["Chande Momentum Oscillator (Momentum Indicators)",["timeperiod","14"]],"CORREL":["Pearson's Correlation Coefficient (r) (Statistic Functions)",["timeperiod","30"]],"DEMA":["Double Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"DX":["Average Directional Movement Index (Momentum Indicators)",["timeperiod","14"]],"EMA":["Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"KAMA":["Kaufman Adaptive Moving Average (Overlap Studies)",["timeperiod","30"]],"LINEARREG":["Linear Regression (Statistic Functions)",["timeperiod","14"]],"LINEARREG_ANGLE":["Linear Regression Angle (Statistic Functions)",["timeperiod","14"]],"LINEARREG_INTERCEPT":["Linear Regression Intercept (Statistic Functions)",["timeperiod","14"]],"LINEARREG_SLOPE":["Linear Regression Slope (Statistic Functions)",["timeperiod","14"]],"MA":["Moving average (Overlap Studies)",["timeperiod","30"],["matype","0"]],"MACD":["Moving Average Convergence/Divergence (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["signalperiod","9"]],"MACDEXT":["MACD with controllable MA type (Momentum Indicators)",["fastperiod","12"],["fastmatype","0"],["slowperiod","26"],["slowmatype","0"],["signalperiod","9"],["signalmatype","0"]],"MACDFIX":["Moving Average Convergence/Divergence Fix 12/26 (Momentum Indicators)",["signalperiod","9"]],"MAX":["Highest values over a specified period (Math Operators)",["timeperiod","30"]],"MAXINDEX":["Index of highest value over a specified period (Math Operators)",["timeperiod","30"]],"MFI":["Money Flow Index (Momentum Indicators)",["timeperiod","14"]],"MIDPOINT":["Midpoint over period (Overlap Studies)",["timeperiod","14"]],"MIDPRICE":["Midpoint Price over period (Overlap Studies)",["timeperiod","14"]],"MIN":["Lowest value over a specified period (Math Operators)",["timeperiod","30"]],"MININDEX":["Index of lowest value over a specified period (Math Operators)",["timeperiod","30"]],"MINMAX":["Lowest and highest values over a specified period (Math Operators)",["timeperiod","30"]],"MINMAXINDEX":["Indexes of lowest and highest values over a specified period (Math Operators)",["timeperiod","30"]],"MINUS_DI":["Minus Directional Indicator (Momentum Indicators)",["timeperiod","14"]],"MINUS_DM":["Minus Directional Movement (Momentum Indicators)",["timeperiod","14"]],"MOM":["Momentum (Momentum Indicators)",["timeperiod","10"]],"NATR":["Normalized Average True Range (Volatility Indicators)",["timeperiod","14"]],"PLUS_DI":["Plus Directional Indicator (Momentum Indicators)",["timeperiod","14"]],"PLUS_DM":["Plus Directional Movement (Momentum Indicators)",["timeperiod","14"]],"PPO":["Percentage Price Oscillator (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["matype","0"]],"ROC":["Rate of change: ((price/prevPrice)-1)*100 (Momentum Indicators)",["timeperiod","10"]],"ROCP":["Rate of change Percentage: (price-prevPrice)/prevPrice (Momentum Indicators)",["timeperiod","10"]],"ROCR":["Rate of change ratio: (price/prevPrice) (Momentum Indicators)",["timeperiod","10"]],"ROCR100":["Rate of change ratio 100 scale: (price/prevPrice)*100 (Momentum Indicators)",["timeperiod","10"]],"RSI":["Relative Strength Index (Momentum Indicators)",["timeperiod","14"]],"SMA":["Simple Moving Average (Overlap Studies)",["timeperiod","30"]],"STDDEV":["Standard Deviation (Statistic Functions)",["timeperiod","5"],["nbdev","1"]],"STOCH":["Stochastic (Momentum Indicators)",["fastk_period","5"],["slowk_period","3"],["slowk_matype","0"],["slowd_period","3"],["slowd_matype","0"]],"STOCHF":["Stochastic Fast (Momentum Indicators)",["fastk_period","5"],["fastd_period","3"],["fastd_matype","0"]],"STOCHRSI":["Stochastic Relative Strength Index (Momentum Indicators)",["timeperiod","14"],["fastk_period","5"],["fastd_period","3"],["fastd_matype","0"]],"T3":["Triple Exponential Moving Average (T3) (Overlap Studies)",["timeperiod","5"],["vfactor","0.7"]],"TEMA":["Triple Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"TRIMA":["Triangular Moving Average (Overlap Studies)",["timeperiod","30"]],"TRIX":["1-day Rate-Of-Change (ROC) of a Triple Smooth EMA (Momentum Indicators)",["timeperiod","30"]],"TSF":["Time Series Forecast (Statistic Functions)",["timeperiod","14"]],"ULTOSC":["Ultimate Oscillator (Momentum Indicators)",["timeperiod1","7"],["timeperiod2","14"],["timeperiod3","28"]],"VAR":["Variance (Statistic Functions)",["timeperiod","5"],["nbdev","1"]],"WILLR":["Williams' %R (Momentum Indicators)",["timeperiod","14"]],"WMA":["Weighted Moving Average (Overlap Studies)",["timeperiod","30"]]};quanto_data.nb_preview_url="https://notebooks-preview.prd.pub.quantopian.com";quanto_data.delay_nb_preview_load=false;
//]]>
</script>
<meta content='https://www.quantopian.com/posts/intraday-strategy-gap-play-please-help' property='og:url'>
<meta content='Intraday strategy - Gap play, please help!' property='og:title'>

<input type="hidden" name="env" id="quanto-env" value="production" />
<meta content='550580758292093' property='fb:app_id'>
<meta content='https://www.quantopian.com/posts/intraday-strategy-gap-play-please-help' property='og:url'>
<meta content='https://media.quantopian.com/public/og-image-default.png' property='og:image'>
<meta content='Intraday strategy - Gap play, please help!' property='og:title'>
<meta content='Hi all,  I&#39;ve learned a lot from all of you. I want to create a sort of ranking model but I need your help. This strategy starts a simple  gap  strategy (I will add more on this model later but I need a base). 0). Let&#39;s set our universe with Nasdaq 100 (I saw someone posted the list of it. Thanks). Our universe is totally depending on our preference. (I like SP500  or Russell 3000 though...) 1). This strategy is basically  long  only model. 2). Buy at market session open at 09:32 (EST) and...' property='og:description'>
</head>
<script type='application/ld+json'>
  {
    "@context": "http://schema.org",
    "@type": "Organization",
    "url": "https://www.quantopian.com",
    "logo": "https://media.quantopian.com/logos/logo-q-press-red.png"
  }
</script>
<body class='' ontouchstart=''>
<div id='fb-root'></div>
<div class='wrapper'>
<div class='alert-v2 error'>
<div class='message'>
Quantopian's community platform is shutting down. Please read <a href="/posts/quantopians-community-services-are-closing">this post</a> for more information and <a href='/account#account'>download your code</a>.
</div>
</div>
<div class='navbar navbar-default navbar-static-top' id='app-navbar'>
<div class='container-fluid'>
<div class='navbar-header'>
<button class='navbar-toggle collapsed' data-target='#app-navbar-collapse' data-toggle='collapse'>
<span class='icon hamburger-menu'></span>
</button>
<a class='navbar-brand' href='/home'>
<img class='logo-image async-image' data-src='external/logo-q-white-b141ea6018546e5a4ecc3d10d8440ec076fc4385764e948b322828cc70950a76.svg'>
</a>
</div>
<div class='collapse navbar-collapse' id='app-navbar-collapse'>
<ul class='nav navbar-nav navbar-right'>
<li class='dropdown quanto-dropdown-new'>
<li>
<a class='header' href='/docs'>
Documentation
</a>
</li>
<li class='dropdown quanto-dropdown-new'>
<a class='header' data-toggle='dropdown' href='#'>
Learn
</a>
<ul class='dropdown-menu'>
<li>
<a class='mixpanel-button' data-event='main nav getting started clicked' href='/tutorials/getting-started'>Getting Started</a>
</li>
<li>
<a class='mixpanel-button' data-event='main nav tutorials clicked' href='/tutorials'>Tutorials</a>
</li>
<li>
<a class='mixpanel-button' data-event='main nav lectures clicked' href='/lectures'>Lectures</a>
</li>
</ul>
</li>
<li>
<a class='header' href='/posts' id='forum-link'>
Forum
</a>
</li>
<li>
<a class="header" href="/signin?return_to=/posts/intraday-strategy-gap-play-please-help">Log In</a>
</li>
</li>

</ul>
</div>
</div>
</div>
<script>
  $(document).ready(function () {
    quanto.instances.fm = new quanto.FeedbackManager();
    quanto.instances.hm = new quanto.headerManager();
  })
</script>


<div class='content content-area new-style'>
<input type="hidden" name="page-id" id="page-id" value="postatomic" />
<script src="external/MathJax.js?config=TeX-AMS_HTML-full.js,Safe" async="async"></script>
<div class='container page-container post-atomic'>
<input id='parent-post-id-val' type='hidden' value='52fc1dfab8d12084b70000d8'>
<div class='post-container' data-post-id='52fc1dfab8d12084b70000d8' id='52fc1dfab8d12084b70000d8'>
<div class='back-button back-to-community'>Back to Community</div>
<div class='post-title'>Intraday strategy - Gap play, please help!</div>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/524c5c27f12db56c5e00004e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/ad9fd24211bfdde17bbb79907e6dcbb2?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/524c5c27f12db56c5e00004e'>Kyu P</a>
</div>
<span class='posted-at'>edited </span>
<span UTCms='1392255352000' class='quanto-date posted-at'></span>
<div class='pull-right other-actions'>
<div class='dropup inline-block'>
<div class='dropdown share-control other-action-link'>
<div data-toggle='dropdown'>
<div class='share-image'></div>
Share
</div>
<ul class='dropdown-menu share-options-menu'>
<li>
<a class='share-row' href='https://twitter.com/intent/tweet?text=Intraday strategy - Gap play, please help!&amp;url=https%3A%2F%2Fwww.quantopian.com%2Fposts%2Fintraday-strategy-gap-play-please-help%3Futm_source%3Dwebsite_share%26utm_campaign%3Dintraday-strategy-gap-play-please-help%26utm_medium%3Dtwitter&amp;via=quantopian'>
<i class='icon icon-twitter'></i>
Share on Twitter
</a>
</li>
<li>
<div class='share-row facebook-button'>
<i class='icon icon-facebook'></i>
Share on Facebook
</div>
</li>
<li>
<div class='share-row linkedin-button' data-share-url='https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Fwww.quantopian.com%2Fposts%2Fintraday-strategy-gap-play-please-help%3Futm_source%3Dwebsite_share%26utm_campaign%3Dintraday-strategy-gap-play-please-help%26utm_medium%3Dlinkedin&amp;title=Intraday+strategy+-+Gap+play%2C+please+help%21+%28Kyu+P%29&amp;source=Quantopian'>
<i class='icon icon-linkedin'></i>
Share on LinkedIn
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>

<div class='tags tag-row'>
<a class='tag mixpanel-button' data-event='tag click' data-mixpanel='Seeking Help' data-tag-id='55c50e7d8d4710ec6e000003' href='/posts/tag/Seeking-Help/newest'>Seeking Help</a>
<a class='tag mixpanel-button' data-event='tag click' data-mixpanel='Mean Reversion' data-tag-id='55c50e7d8d4710ec6e00000d' href='/posts/tag/Mean-Reversion/newest'>Mean Reversion</a>
</div>
<input type="hidden" name="social_fb_post_link" id="social_fb_post_link" value="https://www.quantopian.com/posts/intraday-strategy-gap-play-please-help?utm_source=website_share&amp;utm_campaign=intraday-strategy-gap-play-please-help&amp;utm_medium=facebook" />
<input type="hidden" name="social_post_image" id="social_post_image" value="external/logo-q-red-outline.png" />
<input type="hidden" name="social_post_author" id="social_post_author" value="Kyu P" />
<div class='body-text'>
<div class='body-text-container post-body'><p>Hi all, </p>

<p>I&#39;ve learned a lot from all of you.<br>
I want to create a sort of ranking model but I need your help.</p>

<p>This strategy starts a simple <em>gap</em> strategy (I will add more on this model later but I need a base).<br>
0). Let&#39;s set our universe with Nasdaq 100 (I saw someone posted the list of it. Thanks).<br>
Our universe is totally depending on our preference. (I like SP500  or Russell 3000 though...)<br>
1). This strategy is basically <strong>long</strong> only model.<br>
2). Buy at market session open at 09:32 (EST) and close its all positions at the end of the day at 15:58 (EST).<br>
So this algo starts its run at 09:31 (EST) <strong>once</strong> and close its run until 15:57(EST). Then it reruns at 15:57 to close all the open orders.<br>
3). Trade once per each selected stock per day.</p>

<p>4). First Find the stocks with gap low at open.<br>
If opening gap (<strong>open price - close of yesterday</strong>) is lower than <strong>one standard deviation</strong> with period of 90 <strong>days</strong>.<br>
This stddev should be computed using <strong>daily close -to-close returns of the last 90 days</strong>.<br>
5). Then we buy list within top 10 <strong>ranking list</strong> per day. (top  means the biggest <strong>gap</strong> lower than <strong>1*stddev</strong>).</p>

<p>Please help me.</p>

<p>Thank you.  </p>
</div>
</div>
</div>

</div>

<div class='container page-container post-atomic'>
<div class='section-header reply-header'>
<div class='reply-title'>14 responses</div>
</div>
<div class='replies'>
<div class='post-container response-container' data-post-id='52fc43cdb8d120cab3000113' id='52fc43cdb8d120cab3000113'>
<a href='#52fc43cdb8d120cab3000113'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/50f97faeaa4b3d78fd0000ee'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f18d32ae5bfc439c5b75bfa9f29e953a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/50f97faeaa4b3d78fd0000ee'>Jessica Stauth</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1392264142000' class='quanto-date posted-at response-posted-at' href='#52fc43cdb8d120cab3000113'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Kyu,</p>

<p>I got at least a start going for you. I started with the previously shared hard coded list of 100 sids (if you&#39;d prefer, you can swap in the <a href="https://www.quantopian.com/help#ide-setuniverse">set_universe()</a> function to grab an unbiased dynamic universe of stocks), though I ended up just running it with the first 10 because it was a bit slow and I was just looking for a PoC to share (you&#39;ll see the larger list commented out and you can run the full test if this is what you&#39;re looking for).</p>

<p>Each day at the open (or as close as we can get at 9:31am) the algo will invest $10,000 per name in each stock where the &quot;gap&quot; is &lt; (-1) * stddev for the prior 90 days of close to close percent changes. I didn&#39;t get the ranking in here yet - but is definitely something we can add.</p>

<p>Each day at the &#39;close&#39; (3:59pm) the algo closes out all existing positions.</p>

<p>Also of note, this looked pretty bad when I ran it with the defaults for <a href="https://www.quantopian.com/help#ide-slippage">slippage</a> and <a href="https://www.quantopian.com/help#ide-commission">commissions</a> costs in place, in order to see whether the underlying strategy works, I zeroed those out. But obviously doing 10 round-trips per day will certainly have the potential to racking up a lot of t-costs depending on your cost structure.</p>

<p>Hope this is a helpful start and I&#39;m happy to iterate it further with you. Best wishes,<br>
Jess</p>
</div>
<div class='disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='52fc5c43bc06f7b108000124' id='52fc5c43bc06f7b108000124'>
<a href='#52fc5c43bc06f7b108000124'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/524c5c27f12db56c5e00004e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/ad9fd24211bfdde17bbb79907e6dcbb2?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/524c5c27f12db56c5e00004e'>Kyu P</a>
</div>
<a UTCms='1392270405000' class='quanto-date posted-at response-posted-at' href='#52fc5c43bc06f7b108000124'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Jessica,</p>

<p>Your code looks amazingly compact and good. Thanks.</p>

<p>Please add how to code for ranking top 10 (or 5) list.  </p>

<p>Question:<br>
As this algo takes a little long to compute <strong><em>relatively simple math</em></strong> for 100 stocks (even with 10 stocks), I&#39;m wondering if this algo can get the right number of stokcs in the list at 09:32 as the becktest results show. What if it takes longer than 1 minute (because this algo starts running <strong><em>at 09:31 ONLY</em></strong>) and thus it cannot buy any stocks then?<br>
Basically my question is that why does it take so long?? It is not complicated computation though..</p>

<p>BTW, I will add more conditions and logics later on this. We will see.<br>
Please help.</p>

<p>Thank you.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='52ff53bce74d51402d000153' id='52ff53bce74d51402d000153'>
<a href='#52ff53bce74d51402d000153'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/50b24ec26d284c0200000088'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e238d8d7d6bb1f460ed27e0507045632?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/50b24ec26d284c0200000088'>Peter Cawthron</a>
</div>
<a UTCms='1392464830000' class='quanto-date posted-at response-posted-at' href='#52ff53bce74d51402d000153'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Anyone cloning the algo above should use sid(1406) for Celgene in place of sid(40207). My attempt at a list of NASDAQ 100 SIDs is here: <a href="https://www.quantopian.com/posts/list-of-nasdaq-100-sids-to-use-in-your-algo">https://www.quantopian.com/posts/list-of-nasdaq-100-sids-to-use-in-your-algo</a></p>

<p>P.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='52ff70d1e74d51dd8800017e' id='52ff70d1e74d51dd8800017e'>
<a href='#52ff70d1e74d51dd8800017e'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/52ff655edc2b3d9e0e00014e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/b42caeb4acc5a1801514a4e70b7023a2?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/52ff655edc2b3d9e0e00014e'>bharath rao</a>
</div>
<a UTCms='1392472274000' class='quanto-date posted-at response-posted-at' href='#52ff70d1e74d51dd8800017e'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Kyu,</p>

<p>Are you trying to bet on mean reversion within a day? My observation is, individual stocks can have trends that don&#39;t get reversed. They are even more unlikely to reverse if the gap is news driven. May be you could consider running it after the effect of sentiment has been removed.  And sentiment is not just keywords. Sentiment in high beta stocks can get affected by macro news / price action as well.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='52ff9727c415eac67e000023' id='52ff9727c415eac67e000023'>
<a href='#52ff9727c415eac67e000023'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/524c5c27f12db56c5e00004e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/ad9fd24211bfdde17bbb79907e6dcbb2?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/524c5c27f12db56c5e00004e'>Kyu P</a>
</div>
<a UTCms='1392482088000' class='quanto-date posted-at response-posted-at' href='#52ff9727c415eac67e000023'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@bharath,<br>
Thanks for your comment. </p>

<p>What I am tryng here is that just to create one of the popular models we quant use. Especially, this algo (well, it&#39;s not completed yet, far far yet.) is based on the rationale that on days when the stock index futures are down before the open, certain stocks suffer disproportionately due to panic selling at the open. But this panic selling is over, the stock will gradually appreciate over the course of the day. (of course, this is not for all the stocks.). </p>

<p>Yes, this is a mean reversion strategy intraday. And of course, we need to play with this adding more features like you mentioned. My co-workers use event-driven algo as well. Or even in the opposite way, we can apply this strategy concept for trend following strategy, which I saw worked well too.  </p>

<p>We can do anything we want. </p>

<p>But ladies &amp; gentlemen, trust me, there is no single strategy winning all. </p>

<p>From my experience at hedge fund and all my co-workers&#39; experience, there is no such a thing. Some strategies work well for three-four years. And suddenly they don&#39;t work for next three - four years. Why? Because market changes all the time. And traders&#39; &amp; investors&#39; behavior change and finally technologies develop and change entire market action. In my career, I&#39;ve seen a lot of times QPM fail as they just stick to one or two strategies.</p>

<p>I respect all the members here and all the quants trying to develop winning strategies. But please do not waste your time on digging just one single strategy that you think or believe will win all. In this complex and rapidly changing market, we all need to deploy all reasonable (not a fantastic) strategies with statistically solid rationale, and also very importantly combine them with well-planned money management. And then keep doing research and develop new one, and adjust your strategies until you quit this job. That&#39;s all we quant do.</p>

<p>Again, thanks. </p>

<p>@Peter<br>
Thanks for your Nasdaq 100 listing.  </p>

<p>@Jessica, how to do ranking?<br>
And as I asked above, why does it take so long to compute this relatively simple computation?<br>
With this, can this system buy stocks in the list at open (09:32)?</p>

<p>Thanks.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='52ff9f4fc415eaa26600002d' id='52ff9f4fc415eaa26600002d'>
<a href='#52ff9f4fc415eaa26600002d'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/50b24ec26d284c0200000088'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e238d8d7d6bb1f460ed27e0507045632?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/50b24ec26d284c0200000088'>Peter Cawthron</a>
</div>
<a UTCms='1392484177000' class='quanto-date posted-at response-posted-at' href='#52ff9f4fc415eaa26600002d'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hello Kyu,</p>

<p>Have a look at <a href="https://www.quantopian.com/posts/how-do-i-shift-the-moving-average-of-an-imported-csv-chart">https://www.quantopian.com/posts/how-do-i-shift-the-moving-average-of-an-imported-csv-chart</a> where AM ranks securities by standard deviation of gap size. You get a mention.</p>

<p>I don&#39;t know much about timing python code. Have you tried?</p>

<pre><code>import time

def handle_data(context, data):  
    start = time.clock()

    &#39;&#39;&#39; Do some stuff here with 100 SIDs &#39;&#39;&#39;

    elapsed = (time.clock() - start)  
    print elapsed  
</code></pre>

<p>P.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5300a122e1b65d8d440001b8' id='5300a122e1b65d8d440001b8'>
<a href='#5300a122e1b65d8d440001b8'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/52ff655edc2b3d9e0e00014e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/b42caeb4acc5a1801514a4e70b7023a2?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/52ff655edc2b3d9e0e00014e'>bharath rao</a>
</div>
<a UTCms='1392550179000' class='quanto-date posted-at response-posted-at' href='#5300a122e1b65d8d440001b8'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Kyu,</p>

<p>I believe there is potential in this mean reversion strategy. The problem lends itself well to be modeled as a Markov Chain. Like you said there is no one size fit all. We can do 1 of the following things.</p>

<p>1) Build a model and try to find the asset classes for which the model works.<br>
2) Select an asset class and try to build  model for it.<br>
3) Build a model and keep learning the changes in the market microstructure. This is easier said than done !  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5300db4218466bb3a2000008' id='5300db4218466bb3a2000008'>
<a href='#5300db4218466bb3a2000008'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/50f97faeaa4b3d78fd0000ee'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f18d32ae5bfc439c5b75bfa9f29e953a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/50f97faeaa4b3d78fd0000ee'>Jessica Stauth</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1392565060000' class='quanto-date posted-at response-posted-at' href='#5300db4218466bb3a2000008'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Kyu</p>

<p>There are two issues w.r.t. performance and execution times actually. </p>

<p>First, the fact that you are seeing your first execution times at 9:31am is actually the earliest execution time that you will see, please refer to my detailed answer to Erik on execution times here: <a href="https://www.quantopian.com/posts/at-jessica-stauth-question-about-trade-at-specified-time">https://www.quantopian.com/posts/at-jessica-stauth-question-about-trade-at-specified-time</a></p>

<p>Second, we are always working to make our backtester faster - what tends to slow things down is a combination of universe size and time range/resolution as you might expect, so an algorithm that uses the upper bound of our allowed universe size for 3 years of minute level data will certainly take longer to run than a pairs trade tested with daily data over the same time period. That&#39;s even before you worry about whether you&#39;re running anything computationally intense on a per stock basis.</p>

<p>The best way to deal with performance woes IMO is to start off getting your algo working with a small test range of dates and stocks. Then scale up to your desired real test once you know the logic is solid, since we run this for you in the cloud, you can always kick off a backtest and come back later to get your results. </p>

<p>One other note: I did take a look at getting the ranking step you asked for working, but haven&#39;t had a chance to finish it. If you or anyone else is looking to work on that in the meantime I think what needs to be done is to use Python&#39;s in-place sorting method .sort() to do an in-place sort on the &quot;gap&quot; array that my code assigns in line 43 above. see: <a href="https://wiki.python.org/moin/HowTo/Sorting">https://wiki.python.org/moin/HowTo/Sorting</a> I got stuck because that method expects a series and for some reason the .diff() method handed back an array with an extra row of NaNs in there. Argh.  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='53028c8fde9ecaa29400000a' id='53028c8fde9ecaa29400000a'>
<a href='#53028c8fde9ecaa29400000a'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/50f97faeaa4b3d78fd0000ee'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f18d32ae5bfc439c5b75bfa9f29e953a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/50f97faeaa4b3d78fd0000ee'>Jessica Stauth</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1392675986000' class='quanto-date posted-at response-posted-at' href='#53028c8fde9ecaa29400000a'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Kyu,</p>

<p>I had a chance to revisit this algo today and to add the ranking and screening steps you outlined in your original post. You can see the new logic in the code with the attached backtest.</p>

<p>One thing I did change from last time, if I follow correctly what you are going for with step 4 (below), then I think the gap needs to be computed as the percent change in price between yesterday&#39;s close and the current (open) price, if we want it on the same basis to do z-score like comparison with the trailing close to close returns standard deviation. Might be missing something, but you can take a look at how I&#39;ve implemented it here and let me know.</p>

<p>&quot;4). First Find the stocks with gap low at open.
If opening gap (open price - close of yesterday) is lower than one standard deviation with period of 90 days.<br>
This stddev should be computed using daily close -to-close returns of the last 90 days.&quot;</p>

<p>Also note, I added a custom variable to record how many stocks pass the gap screen on each day, using a 1% dollar volume universe that number is often below 10 stocks in the last year or so - I interpreted your logic such that the algo only buys stocks that pass the screen of being more negative than -1 * std dev, so in those cases there are fewer than 10 stocks bought, and on many days no stocks passed the screen.</p>

<p>Hope this is helpful at least as an example to work from, doesn&#39;t look like it does well with this particular universe of stocks, but perhaps with a different stock universe it will work better - I&#39;ll leave that part of the magic up to you :)</p>

<p>Best regards, Jess  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='53036bfcebc8a9e884000266' id='53036bfcebc8a9e884000266'>
<a href='#53036bfcebc8a9e884000266'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/524c5c27f12db56c5e00004e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/ad9fd24211bfdde17bbb79907e6dcbb2?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/524c5c27f12db56c5e00004e'>Kyu P</a>
</div>
<a UTCms='1392733182000' class='quanto-date posted-at response-posted-at' href='#53036bfcebc8a9e884000266'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thanks Jessica,<br>
Your code looks great. Although the strategy is a bit different. I will modify it later on the top of the one you did. Thanks a lot.</p>

<p>@Peter, Thank you again.</p>

<p>@Anony, I don&#39;t know what the source of your <em>plot</em> is. But there are a lot of serious researchers who have been doing great jobs working on the opening gaps (Julie Dahlquist, Richard Bauer, Stephane Reverre, etc..). And also there are many successful QPM who have been using the opening gap strategies and making profits consistantly . I respect them and their work. There are many different strategies regarding gap strategies as you might know. So I am not going to make any comment on your comment, but thank you.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='53039122de9ecaa29400022d' id='53039122de9ecaa29400022d'>
<a href='#53039122de9ecaa29400022d'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/524c5c27f12db56c5e00004e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/ad9fd24211bfdde17bbb79907e6dcbb2?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/524c5c27f12db56c5e00004e'>Kyu P</a>
</div>
<a UTCms='1392742692000' class='quanto-date posted-at response-posted-at' href='#53039122de9ecaa29400022d'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thank you for the explanation, Anony.<br>
Your plot says something valuable too although it&#39;s just for a 5-day return analysis. </p>

<p>I wanted to say that there are so many researchers out there and they have been doing great jobs with enormous data and putting endless effort in the analysis of opening gap strategies. From their work, I just wanted to introduce you guys several successful algos that work in real market. (This one is originally based on SP500 stocks.).</p>

<p>Here in Quantopian, we have some limitations including order generating system. This opening gap strategy (it&#39;s actually not completely introduced yet.) should be computing, sorting, picking, and sending buy orders at market open, usually at 09:30 (EST). But Quantopian system cannot do so. The earliest time to send orders is 09:31 and orders get filled at 09:32. Yes, in real market, it could be also hard to get orders filled at 09:30 too. But we (algo) do all the work before 09:29 and send orders at 09:30:10. So we may have different result from the work done originally in real market. </p>

<p>Also, when you guys work on with daily data, here your orders get filled at next day close. I personally think that it is non-sense. You better implement your work with the daily data to minute data. </p>

<p>Anyway, keep up the good work and keep challenging.<br>
I will come back later after adjusting this strategy.</p>

<p>Thank you all.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='55d8bbc302220f68f70005f5' id='55d8bbc302220f68f70005f5'>
<a href='#55d8bbc302220f68f70005f5'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/53b47506bfc9ea25920000bc'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/01455089a81367898bc87a27393be402?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/53b47506bfc9ea25920000bc'>john tolvich</a>
</div>
<a UTCms='1440267208000' class='quanto-date posted-at response-posted-at' href='#55d8bbc302220f68f70005f5'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>just my 2 cents on the algo why not going long and short at the same time to be market neutral =&gt; if gap up short the stock &amp; long SPY. if gap down go long and short spy ? decoupling from market condition the algo  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a439f0a8a4b862ae67dcad6' id='5a439f0a8a4b862ae67dcad6'>
<a href='#5a439f0a8a4b862ae67dcad6'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5a107a2987162a000d1107f6'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/0cb7822c706a37c8713ec19febe79221?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5a107a2987162a000d1107f6'>andre williams</a>
</div>
<a UTCms='1514381066000' class='quanto-date posted-at response-posted-at' href='#5a439f0a8a4b862ae67dcad6'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I apologize for re-hashing this post as it&#39;s a few years old.  I&#39;m trying to reverse engineer this and I have a few questions.  As I&#39;ve been devoting a lot of time to learning algo coding.</p>

<p>In Jessica&#39;s first code.  I&#39;m not understanding why in the for loop at the end of the day she used data in &quot;for stocks in data&quot;?  I don&#39;t understand the &quot;data&quot; part of this.  Why didn&#39;t she go in the direction of something like &quot;for stocks in openpositions&quot;...or just loop through the open positions in the portfolio.  I&#39;m just not seeing where &quot;data&quot; comes into play.  Came someone expound on this?</p>

<p>Another question.  In Jessica&#39;s second code...I see she created a dictionary of sid&#39;s in universe....context.sid was defined; however, I don&#39;t see where &quot;context.sid&quot; was used in her code?  Am I missing something?  I&#39;m assuming that anytime she used &quot;context&quot; in a argument of her functions...it automatically used context.sid in the function?  I don&#39;t know, I&#39;m lost on that.</p>

<p>Lastly, I see Kyu mention his co-workers use event-driven algos.  Question, is it possible to have an algo determine if a stock is gapping with news or if it&#39;s gapping on fluff?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5a4400fa6463cf2522f3b477' id='5a4400fa6463cf2522f3b477'>
<a href='#5a4400fa6463cf2522f3b477'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4fe8beb792a029000200000d'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/fe3ffe502559d05f16eb9fe41ab7e9a1?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4fe8beb792a029000200000d'>Dan Dunn</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1514406138000' class='quanto-date posted-at response-posted-at' href='#5a4400fa6463cf2522f3b477'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Unfortunately, you&#39;re working from a pretty old algorithm.  Our API has gotten a <strong>lot</strong> more powerful since 2014, and had a major revision almost two years ago now.  Some of the questions you&#39;re asking about how to think about lists of stocks is covered in <a href="https://www.quantopian.com/quantopian2">Quantopian 2</a>.</p>

<p>In general, I&#39;d suggest that you take the idea you&#39;re looking for and start it again, or find a more recent example.  Trying to learn a strategy <strong>and</strong> trying to understand partially-obsolete code at the same time is a painful task.</p>

<p>As for gapping on news - Quantopian doesn&#39;t have a direct news feed.  But we do have some social media sentiment <a href="https://www.quantopian.com/data">data</a> that you might be able to apply for that purpose.</p>
</div>
<div class='disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

</div>
<div class='sign-in-please'>
Please <a href='/signin?return_to=/posts/intraday-strategy-gap-play-please-help'>sign in</a> or
<a href='/users/sign_up?redirect_to=/posts/intraday-strategy-gap-play-please-help'>join Quantopian</a> to
post a reply.
</div>
</div>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId: "550580758292093",
      status: false,
      cookie: true,
      xfbml: true
    });
  };
  
  (function(d, debug){
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) {return;}
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
    ref.parentNode.insertBefore(js, ref);
  }(document, /*debug*/ false));
  
  window.twttr = (function (d,s,id) {
    var t, js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return; js=d.createElement(s); js.id=id;
    js.src="//platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs);
    return window.twttr || (t = { _e: [], ready: function(f){ t._e.push(f) } });
  }(document, "script", "twitter-wjs"));
</script>
<script>
  $(document).ready(function () {
    quanto.instances.pm = new quanto.PostManager(false)
  });
</script>

<div class='login-footer'>
<div class='container'>
<div class='login-footer-text'>
Become an expert in quant finance through Quantopian's hands-on education.
</div>
<div class='login-footer-button'>
<button class='btn btn-v2 stroke join-modal-link mixpanel-button' data-event='anon join footer click posts' data-mixpanel='click'>
Join Now
</button>
</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='error-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'>Error</span>
</div>
<div class='modal-body body-content'>
<p>Sorry, something went wrong.  Try again or contact us by <a class='feedback-link'>sending feedback</a>.</p>
</div>
<div class='modal-footer'>
<button class='btn btn-v2 blue action-button' data-dismiss='modal' href='#'>Close</button>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='confirmation-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'></span>
</div>
<div class='modal-body body-content'></div>
<div class='modal-footer'>
<div class='pull-right'>
<button class='btn btn-v2 border' data-dismiss='modal'>Cancel</button>
<button class='btn btn-v2 blue action-button' data-dismiss='modal'></button>
</div>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='message-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'></span>
</div>
<div class='modal-body body-content'></div>
<div class='modal-footer'>
<button class='btn btn-v2 blue action-button' data-dismiss='modal' id='message-modal-close'>Close</button>
</div>

</div>
</div>
</div>

<div class='always-bootstrap3-modals'>
<div class='fade modal quanto-modal-v2' id='join-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header visible-small'>
<span class='title'>
Join Quantopian.  It's Free!
</span>
<div class='modal-x-out visible-xs'></div>
</div>
<div class='modal-body'>
<div class='flex-wrap'>
<div class='join-left-pane hidden-small'>
<div class='margin_30l'>
<div class='join-hero-text'>
Join Quantopian.  It's Free!
</div>
<div class='join-benefits'>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image code'></div>
</div>
<div class='join-text'>
Use our research platform, backtester, and dozens of clean data sets.
</div>
</div>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image learn'></div>
</div>
<div class='join-text'>
Learn with our hands-on education and community forums.
</div>
</div>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image win'></div>
</div>
<div class='join-text'>
Enter to win cash prizes in our contest.
</div>
</div>
</div>
<div class='hidden saved-reminder'>
Don't worry, all your work is already saved.
</div>
</div>
</div>
<div class='join-right-pane'>
<div class='hidden-small'>
<div class='button-pane'>
<a class="button btn-v2 user-form-btn" href="/signin">Already a Quantopian member?</a>
</div>
</div>
<div class='visible-small'>
<div class='already-member'>
<a href='/signin'>Already a Quantopian member?</a>
</div>
</div>
<form class="quanto-form-v2" id="new-user-modal-form" action="/users" accept-charset="UTF-8" data-remote="true" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><div class='error-message hidden'>
<div class='message'></div>
</div>
<div class='name-group'>
<div class='form-group inline-block'>
<label for="user_firstname">First Name</label>
<input class="form-control firstname" pattern=".*" required="required" autocomplete="off" autofocus="autofocus" type="text" name="user[firstname]" id="user_firstname" />
</div>
<div class='form-group inline-block'>
<label for="user_lastname">Last Name</label>
<input class="form-control" value="" pattern=".*" required="required" autocomplete="off" type="text" name="user[lastname]" id="user_lastname" />
</div>
</div>
<div class='form-group'>
<label for="user_email">Email</label>
<input class="form-control" value="" pattern=".*" required="required" autocomplete="off" type="email" name="user[email]" id="user_email" />
</div>
<div class='form-group'>
<label for="user_password">Password</label>
<input autocomplete="off" class="form-control" pattern=".*" required="required" type="password" name="user[password]" id="user_password" />
</div>
<div class='checkbox eula'>
<input id='eula-checkbox' type='checkbox'>
<div class='quanto-checkbox'></div>
<label for='eula-checkbox' id='checkbox-label'>I accept the <a href='/policies/terms' target='_blank'>Terms Of Use</a> and <a href='/policies/privacy' target='_blank'>Privacy Policy</a>.</label>
</div>
<div class='checkbox mailchimp-box'>
<input name="user[allow_marketing_emails]" type="hidden" value="0" /><input type="checkbox" value="1" name="user[allow_marketing_emails]" id="user_allow_marketing_emails" />
<div class='quanto-checkbox'></div>
<label for='user_allow_marketing_emails'>
Send me email updates with the latest news from the Quantopian community. We send these emails about once a month.
</label>
</div>
<div class='button-row'>
<button class='btn-v2 blue full' data-redirect-to='/tutorials/getting-started' id='sign-up-button' type='Submit'>Join Quantopian</button>
</div>
</form></div>
</div>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='feedback-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title'>Contact Support</span>
</div>
<div class='modal-body'>
<form class='anon-user controls quanto-form-v2' id='feedback-form'>
<div class='feedback-inputs'>
<div class='form-group'>
<input autofocus class='form-control' id='feedback-email-box' name='email' placeholder='Email Address' type='email'>
</div>
<div class='form-group'>
<input class='form-control' id='feedback-name-box' placeholder='Name' type='name'>
</div>
<div class='form-group'>
<textarea class='form-control' id='feedback-box' name='feedback' placeholder='What may we help you with?' rows='10'></textarea>
</div>
</div>
</form>
<form class='hidden quanto-form-v2 select-resource-area'>
<div class='select-step select-type-step'>
<div class='form-group'>
<select class='form-control select-resource-dropdown' title='Select the item you need help with'>
<option value='algorithm'>Algorithm</option>
<option value='backtest'>Backtest</option>
<option value='notebook'>Notebook</option>
</select>
</div>
</div>
<div class='select-step loading-area hidden'>
<div class='loading-text'>
Loading...
</div>
</div>
<div class='select-step empty-list-area hidden'>
<div class='back-button'>Go Back</div>
<div class='empty-text'>
No <span class='empty-list-resource-text'>algorithms</span> found
</div>
</div>
<div class='select-algo-area select-step hidden'>
<div class='back-button'>Go Back</div>
<table class='select-algo-table select-item-table'>
<thead>
<tr>
<th>
Algorithm
<span class='sort-icon'></span>
</th>
<th>
Last Modified
<span class='sort-icon'></span>
</th>
</tr>
</thead>
</table>
</div>
<div class='select-backtest-area select-step hidden'>
<div class='back-button'>Go Back</div>
<table class='select-backtest-table select-item-table'>
<thead>
<tr>
<th>
Backtest
<span class='sort-icon'></span>
</th>
<th>
Started At
<span class='sort-icon'></span>
</th>
<th>
Overall Return
<span class='sort-icon'></span>
</th>
<th>
Status
<span class='sort-icon'></span>
</th>
</tr>
</thead>
</table>
</div>
<div class='select-notebook-area select-step hidden'>
<div class='back-button'>Go Back</div>
<div class='subtitle select-cell-step'>
Choose a cell to use as the preview for this notebook:
</div>
<div class='iframe-wrapper'>
<iframe class='notebook-list-iframe slow-fade' src=''></iframe>
</div>
<div class='progress-area slow-fade in'>
<div class='progress-container'>
<div class='progress-title'>
<div class='quanto-loader gray'></div>
</div>
</div>
</div>
<div class='maintenance-area'>
<div class='error-container'>
<div class='row'>
<div class='col-md-14 msg-title h1'>
Sorry, research is currently undergoing maintenance.
</div>
</div>
<div class='row'>
<div class='col-md-14 msg-subtitle'>
Please check back shortly. If the maintenance period lasts longer than expected,
you can find updates on <a href='https://status.quantopian.com/'>status.quantopian.com</a>.
</div>
</div>

</div>
</div>
<div class='error-area'>
<div class='error-container'>
<div class='row'>
<div class='col-md-14 msg-title h1'>
Sorry, something went wrong on our end.
</div>
</div>
<div class='row'>
<div class='col-md-14 msg-subtitle'>
Please try again or contact <a class='open-feedback-link'>Quantopian support</a>.
</div>
</div>

</div>
</div>

</div>
<div class='selected-item-area select-step hidden'>
<div class='selected-item-group form-group'>
<div class='selected-item-control'>
<input class='disabled form-control selected-item-box' type='text'>
<span class='secure-icon icon'></span>
<button class='btn change change-primary-item-button change-selection-button new-btn transparent' type='button'>
<span class='refresh-icon icon'></span>
</button>
</div>
<div class='selected-backtest-control'>
<input class='disabled form-control selected-backtest-box' type='text'>
<span class='secure-icon icon'></span>
<button class='btn change-backtest-button change-selection-button new-btn transparent' type='button'>
<span class='refresh-icon icon'></span>
</button>
</div>
</div>
<div class='checkbox-group form-group'>
<div class='checkbox give-permission'>
<input class='give-permission-checkbox' id='feedback-give-permission-checkbox' type='checkbox'>
<div class='quanto-checkbox'></div>
<label for='feedback-give-permission-checkbox'>
I permit Quantopian to view <span class='item-type-text'>this algorithm,
backtest or notebook and their imported datasets</span> for the purpose of providing support.
</label>
</div>
</div>
</div>
</form>

<div class='loading-step hidden'>
<div class='loading-text'>
Submitting your support ticket...
</div>
</div>
<div class='success-step invisible'>
<h2 class='title center'>
You've successfully submitted a support ticket.
</h2>
<p>
Our support team will be in touch soon.
</p>
<div class='confirmation-image'></div>
</div>
</div>
<div class='modal-footer'>
<button class='btn-v2 blue' id='send-feedback-button'>Send</button>
<div class='error-message hidden'>
Error submitting support request.
</div>
</div>

</div>
</div>
</div>

</div>
</div>
<div class='footer' id='quanto-footer-container'>
<div class='container'>
<div class='row header-row'>
<div class='col-sm-fourth span3'>
<img class='async-image logotype-image' data-src='https://qf.quantopian.com/assets/logos/logo-q-full-b23bda5ac757691b9259d396d0dfef91567165868b8c955a836649686e6d2248.svg'>
</div>
<div class='col-sm-fourth span3'></div>
<div class='col-sm-fourth span3'></div>
<div class='col-sm-fourth span3'>
<div class='feedback-email'>
Need help?
<a href="/cdn-cgi/l/email-protection#4f292a2a2b2d2e2c240f3e3a2e213b203f262e21612c2022">Contact support.</a>
</div>
</div>
</div>
<div class='row'>
<div class='col-sm-fourth span3'>
<div class='header'>Company</div>
<div class='footer-row'>
<a href='/about'>About</a>
</div>
<div class='footer-row'>
<a href='/academia'>Academia</a>
</div>
<div class='footer-row'>
<a href='/jobs'>Careers</a>
</div>
<div class='footer-row'>
<a href='/posts'>Community</a>
</div>
<div class='footer-row'>
<a href='/events'>Events</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Learn &amp; Support</div>
<div class='footer-row'>
<a href='/faq'>FAQ</a>
</div>
<div class='footer-row'>
<a href='/tutorials/getting-started'>Getting Started</a>
</div>
<div class='footer-row'>
<a href='/docs'>Documentation</a>
</div>
<div class='footer-row'>
<a href='/tutorials'>Tutorials</a>
</div>
<div class='footer-row'>
<a href='/lectures'>Lectures</a>
</div>
<div class='footer-row'>
<a href='/opensource'>Open Source</a>
</div>
<div class='footer-row'>
<a href='https://status.quantopian.com/'>Site Status</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Notices</div>
<div class='footer-row'>
<a href='/policies/terms'>Terms of Use</a>
</div>
<div class='footer-row'>
<a href='/policies/privacy'>Privacy Policy</a>
</div>
<div class='footer-row'>
<a href='/security'>Security</a>
</div>
<div class='footer-row'>
<a href='/policies/code-of-conduct'>Code of Conduct</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Follow Us</div>
<div class='footer-row'>
<a href='https://www.twitter.com/quantopian'>Twitter</a>
</div>
<div class='footer-row'>
<a href='https://www.facebook.com/quantopian'>Facebook</a>
</div>
<div class='footer-row'>
<a href='https://www.linkedin.com/company/quantopian'>LinkedIn</a>
</div>
<div class='footer-row'>
<a href='https://www.youtube.com/channel/UC606MUq45P3zFLa4VGKbxsg'>YouTube</a>
</div>
</div>
</div>
<div class='row'>
<div class='col-xs-14 span12'>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian.
</p>
<p>
In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>

</div>
</div>
</div>
</div>
</div>
<div class='mobile-footer'>
<div class='mobile-nav-category main-links'>
<div class='mobile-nav-row-footer'>
<a href='/about'>About Quantopian</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/jobs'>Careers</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/posts'>Community</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/events'>Events</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/docs'>Documentation</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/academia'>Academia</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/lectures'>Lectures</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://status.quantopian.com/'>Status</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.facebook.com/quantopian'>Facebook</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.twitter.com/quantopian'>Twitter</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.linkedin.com/company/quantopian'>LinkedIn</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.youtube.com/channel/UC606MUq45P3zFLa4VGKbxsg'>YouTube</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/policies/terms'>Terms of Use</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/policies/privacy'>Privacy Policy</a>
</div>
</div>
<div class='mobile-nav-category'>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian.
</p>
<p>
In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>

</div>
</div>
</div>

</div>
<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script></body>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', "UA-8519877-1", {
    cookieDomain: "quantopian.com"
  });
  ga('set', 'dimension1', 'session_5f9dc7425d387f00077e48e4');
  
  ga('send', 'pageview');
</script>

<input type="hidden" name="is_mac" id="is_mac" value="false" />
<input type="hidden" name="mp" id="mp" value="75873953cd404bcc1da88a55ff51e3b4" />
<script>
  (function(e,a){if(!a.__SV){var b=window;try{var c,l,i,j=b.location,g=j.hash;c=function(a,b){return(l=a.match(RegExp(b+"=([^&]*)")))?l[1]:null};g&&c(g,"state")&&(i=JSON.parse(decodeURIComponent(c(g,"state"))),"mpeditor"===i.action&&(b.sessionStorage.setItem("_mpcehash",g),history.replaceState(i.desiredHash||"",e.title,j.pathname+j.search)))}catch(m){}var k,h;window.mixpanel=a;a._i=[];a.init=function(b,c,f){function e(b,a){var c=a.split(".");2==c.length&&(b=b[c[0]],a=c[1]);b[a]=function(){b.push([a].concat(Array.prototype.slice.call(arguments,
  0)))}}var d=a;"undefined"!==typeof f?d=a[f]=[]:f="mixpanel";d.people=d.people||[];d.toString=function(b){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);b||(a+=" (stub)");return a};d.people.toString=function(){return d.toString(1)+".people (stub)"};k="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
  for(h=0;h<k.length;h++)e(d,k[h]);a._i.push([b,c,f])};a.__SV=1.2;b=e.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";c=e.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}})(document,window.mixpanel||[]);
  mixpanel.init("75873953cd404bcc1da88a55ff51e3b4");
</script>
<script>
  mixpanel.track("view page", {"page": window.location.pathname});
</script>
</html>
