<!DOCTYPE html>
<html>
<head>
<link href='i1.wp.com' rel='dns-prefetch'>
<link href='i2.wp.com' rel='dns-prefetch'>
<link href='i3.wp.com' rel='dns-prefetch'>
<meta content='2HgX9mcLHaPOX6sfaaAkhWtblhEB9yUNw4l6l46e1k4' name='google-site-verification'>
<link rel="shortcut icon" type="image/x-icon" href="external/favicon-q-ac1a76f2c200e9026b5b1147519bb4fab6256910588b831e2411bc6c7c1218c3.png" />
<title>
ETF Rotation Strategy
</title>
<meta content='Sources: The Lazy Trader ETF Rotation Strategy http://www.the-lazy-trader.com/2015/01/etf-rotation-systems-to-beat-market-American-Equities.html Developing A Rotation Strategy Using Highly Diversified ETFs - Part III https://seekingalpha.com/article/2107713-developing-a-rotation-strategy-using-highly-diversified-etfs-part-iii I buy 3 etfs based on a ranking of how it has performed in the past and the volatility. Let me know what you think! Still work for lots of improvement!' name='description'>
<link rel="stylesheet" media="all" href="external/quanto-base-bundle-e8eb6050172aa0d24124d5c24bac90b2cccd88b5b9c7742026c0e9efab038c6e.css" />
<link rel="stylesheet" media="all" href="external/quanto-posts-bundle-aab01368d3f82d8dafc94ee9eabb82e77dc8c9fbbffa952fdcdc744dfa523cf3.css" />
<script src="external/quanto_global-057218867db29d5768131af5d6fb3476cef098e7d9e655108befb903c7ee985e.js"></script>
<script src="external/posts_bundle-3dfd82fa469c393d752e461d837aec9e4e364ae39f49198e34a6626f2180fdf7.js"></script>
<link href='external/logo-q-180x180-0f5a6a439c99203ed4aea6f656e7604c543d287be43d8b17c7591c1131f09a59.png' rel='apple-touch-icon'>
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="4x6eir8/ky53lP/A2vtUIy/ra6M5aGA7mLXhcNDKrpefeOjHHclBzc6JpvGVFPxXF2VIykOkdSAaujoaeo/MLA==" />
<meta content='width=device-width, initial-scale=1.0' name='viewport'>
<script>
//<![CDATA[
window.quanto_data={};quanto_data.bounce_back_params={"show_modal":null,"feedback_text":null};quanto_data.namespace="public";quanto_data.talib_info={"ADOSC":["Chaikin A/D Oscillator (Volume Indicators)",["fastperiod","3"],["slowperiod","10"]],"ADX":["Average Directional Movement Index (Momentum Indicators)",["timeperiod","14"]],"ADXR":["Average Directional Movement Index Rating (Momentum Indicators)",["timeperiod","14"]],"APO":["Absolute Price Oscillator (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["matype","0"]],"AROON":["Aroon (Momentum Indicators)",["timeperiod","14"]],"AROONOSC":["Aroon Oscillator (Momentum Indicators)",["timeperiod","14"]],"ATR":["Average True Range (Volatility Indicators)",["timeperiod","14"]],"BBANDS":["Bollinger Bands (Overlap Studies)",["timeperiod","5"],["nbdevup","2"],["nbdevdn","2"],["matype","0"]],"BETA":["Beta (Statistic Functions)",["timeperiod","5"]],"CCI":["Commodity Channel Index (Momentum Indicators)",["timeperiod","14"]],"CMO":["Chande Momentum Oscillator (Momentum Indicators)",["timeperiod","14"]],"CORREL":["Pearson's Correlation Coefficient (r) (Statistic Functions)",["timeperiod","30"]],"DEMA":["Double Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"DX":["Average Directional Movement Index (Momentum Indicators)",["timeperiod","14"]],"EMA":["Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"KAMA":["Kaufman Adaptive Moving Average (Overlap Studies)",["timeperiod","30"]],"LINEARREG":["Linear Regression (Statistic Functions)",["timeperiod","14"]],"LINEARREG_ANGLE":["Linear Regression Angle (Statistic Functions)",["timeperiod","14"]],"LINEARREG_INTERCEPT":["Linear Regression Intercept (Statistic Functions)",["timeperiod","14"]],"LINEARREG_SLOPE":["Linear Regression Slope (Statistic Functions)",["timeperiod","14"]],"MA":["Moving average (Overlap Studies)",["timeperiod","30"],["matype","0"]],"MACD":["Moving Average Convergence/Divergence (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["signalperiod","9"]],"MACDEXT":["MACD with controllable MA type (Momentum Indicators)",["fastperiod","12"],["fastmatype","0"],["slowperiod","26"],["slowmatype","0"],["signalperiod","9"],["signalmatype","0"]],"MACDFIX":["Moving Average Convergence/Divergence Fix 12/26 (Momentum Indicators)",["signalperiod","9"]],"MAX":["Highest values over a specified period (Math Operators)",["timeperiod","30"]],"MAXINDEX":["Index of highest value over a specified period (Math Operators)",["timeperiod","30"]],"MFI":["Money Flow Index (Momentum Indicators)",["timeperiod","14"]],"MIDPOINT":["Midpoint over period (Overlap Studies)",["timeperiod","14"]],"MIDPRICE":["Midpoint Price over period (Overlap Studies)",["timeperiod","14"]],"MIN":["Lowest value over a specified period (Math Operators)",["timeperiod","30"]],"MININDEX":["Index of lowest value over a specified period (Math Operators)",["timeperiod","30"]],"MINMAX":["Lowest and highest values over a specified period (Math Operators)",["timeperiod","30"]],"MINMAXINDEX":["Indexes of lowest and highest values over a specified period (Math Operators)",["timeperiod","30"]],"MINUS_DI":["Minus Directional Indicator (Momentum Indicators)",["timeperiod","14"]],"MINUS_DM":["Minus Directional Movement (Momentum Indicators)",["timeperiod","14"]],"MOM":["Momentum (Momentum Indicators)",["timeperiod","10"]],"NATR":["Normalized Average True Range (Volatility Indicators)",["timeperiod","14"]],"PLUS_DI":["Plus Directional Indicator (Momentum Indicators)",["timeperiod","14"]],"PLUS_DM":["Plus Directional Movement (Momentum Indicators)",["timeperiod","14"]],"PPO":["Percentage Price Oscillator (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["matype","0"]],"ROC":["Rate of change: ((price/prevPrice)-1)*100 (Momentum Indicators)",["timeperiod","10"]],"ROCP":["Rate of change Percentage: (price-prevPrice)/prevPrice (Momentum Indicators)",["timeperiod","10"]],"ROCR":["Rate of change ratio: (price/prevPrice) (Momentum Indicators)",["timeperiod","10"]],"ROCR100":["Rate of change ratio 100 scale: (price/prevPrice)*100 (Momentum Indicators)",["timeperiod","10"]],"RSI":["Relative Strength Index (Momentum Indicators)",["timeperiod","14"]],"SMA":["Simple Moving Average (Overlap Studies)",["timeperiod","30"]],"STDDEV":["Standard Deviation (Statistic Functions)",["timeperiod","5"],["nbdev","1"]],"STOCH":["Stochastic (Momentum Indicators)",["fastk_period","5"],["slowk_period","3"],["slowk_matype","0"],["slowd_period","3"],["slowd_matype","0"]],"STOCHF":["Stochastic Fast (Momentum Indicators)",["fastk_period","5"],["fastd_period","3"],["fastd_matype","0"]],"STOCHRSI":["Stochastic Relative Strength Index (Momentum Indicators)",["timeperiod","14"],["fastk_period","5"],["fastd_period","3"],["fastd_matype","0"]],"T3":["Triple Exponential Moving Average (T3) (Overlap Studies)",["timeperiod","5"],["vfactor","0.7"]],"TEMA":["Triple Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"TRIMA":["Triangular Moving Average (Overlap Studies)",["timeperiod","30"]],"TRIX":["1-day Rate-Of-Change (ROC) of a Triple Smooth EMA (Momentum Indicators)",["timeperiod","30"]],"TSF":["Time Series Forecast (Statistic Functions)",["timeperiod","14"]],"ULTOSC":["Ultimate Oscillator (Momentum Indicators)",["timeperiod1","7"],["timeperiod2","14"],["timeperiod3","28"]],"VAR":["Variance (Statistic Functions)",["timeperiod","5"],["nbdev","1"]],"WILLR":["Williams' %R (Momentum Indicators)",["timeperiod","14"]],"WMA":["Weighted Moving Average (Overlap Studies)",["timeperiod","30"]]};quanto_data.nb_preview_url="https://notebooks-preview.prd.pub.quantopian.com";quanto_data.delay_nb_preview_load=false;
//]]>
</script>
<meta content='https://www.quantopian.com/posts/etf-rotation-strategy' property='og:url'>
<meta content='ETF Rotation Strategy' property='og:title'>

<input type="hidden" name="env" id="quanto-env" value="production" />
<meta content='550580758292093' property='fb:app_id'>
<meta content='https://www.quantopian.com/posts/etf-rotation-strategy' property='og:url'>
<meta content='https://media.quantopian.com/public/og-image-default.png' property='og:image'>
<meta content='ETF Rotation Strategy' property='og:title'>
<meta content='Sources: The Lazy Trader ETF Rotation Strategy http://www.the-lazy-trader.com/2015/01/etf-rotation-systems-to-beat-market-American-Equities.html Developing A Rotation Strategy Using Highly Diversified ETFs - Part III https://seekingalpha.com/article/2107713-developing-a-rotation-strategy-using-highly-diversified-etfs-part-iii I buy 3 etfs based on a ranking of how it has performed in the past and the volatility. Let me know what you think! Still work for lots of improvement!' property='og:description'>
</head>
<script type='application/ld+json'>
  {
    "@context": "http://schema.org",
    "@type": "Organization",
    "url": "https://www.quantopian.com",
    "logo": "https://media.quantopian.com/logos/logo-q-press-red.png"
  }
</script>
<body class='' ontouchstart=''>
<div id='fb-root'></div>
<div class='wrapper'>
<div class='alert-v2 error'>
<div class='message'>
Quantopian's community platform is shutting down. Please read <a href="/posts/quantopians-community-services-are-closing">this post</a> for more information and <a href='/account#account'>download your code</a>.
</div>
</div>
<div class='navbar navbar-default navbar-static-top' id='app-navbar'>
<div class='container-fluid'>
<div class='navbar-header'>
<button class='navbar-toggle collapsed' data-target='#app-navbar-collapse' data-toggle='collapse'>
<span class='icon hamburger-menu'></span>
</button>
<a class='navbar-brand' href='/home'>
<img class='logo-image async-image' data-src='external/logo-q-white-b141ea6018546e5a4ecc3d10d8440ec076fc4385764e948b322828cc70950a76.svg'>
</a>
</div>
<div class='collapse navbar-collapse' id='app-navbar-collapse'>
<ul class='nav navbar-nav navbar-right'>
<li class='dropdown quanto-dropdown-new'>
<li>
<a class='header' href='/docs'>
Documentation
</a>
</li>
<li class='dropdown quanto-dropdown-new'>
<a class='header' data-toggle='dropdown' href='#'>
Learn
</a>
<ul class='dropdown-menu'>
<li>
<a class='mixpanel-button' data-event='main nav getting started clicked' href='/tutorials/getting-started'>Getting Started</a>
</li>
<li>
<a class='mixpanel-button' data-event='main nav tutorials clicked' href='/tutorials'>Tutorials</a>
</li>
<li>
<a class='mixpanel-button' data-event='main nav lectures clicked' href='/lectures'>Lectures</a>
</li>
</ul>
</li>
<li>
<a class='header' href='/posts' id='forum-link'>
Forum
</a>
</li>
<li>
<a class="header" href="/signin?return_to=/posts/etf-rotation-strategy">Log In</a>
</li>
</li>

</ul>
</div>
</div>
</div>
<script>
  $(document).ready(function () {
    quanto.instances.fm = new quanto.FeedbackManager();
    quanto.instances.hm = new quanto.headerManager();
  })
</script>


<div class='content content-area new-style'>
<input type="hidden" name="page-id" id="page-id" value="postatomic" />
<script src="external/MathJax.js?config=TeX-AMS_HTML-full.js,Safe" async="async"></script>
<div class='container page-container post-atomic'>
<input id='parent-post-id-val' type='hidden' value='58dbe1e5a83b4338d771bb47'>
<div class='post-container' data-post-id='58dbe1e5a83b4338d771bb47' id='58dbe1e5a83b4338d771bb47'>
<div class='back-button back-to-community'>Back to Community</div>
<div class='post-title'>ETF Rotation Strategy</div>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/556675f3f33e8953ae0003c7'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/beb0dadad0d564c32346b21296d91b2f?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/556675f3f33e8953ae0003c7'>Eric Bell </a>
</div>
<span class='posted-at'>posted </span>
<span UTCms='1490805221000' class='quanto-date posted-at'></span>
<div class='pull-right other-actions'>
<div class='dropup inline-block'>
<div class='dropdown share-control other-action-link'>
<div data-toggle='dropdown'>
<div class='share-image'></div>
Share
</div>
<ul class='dropdown-menu share-options-menu'>
<li>
<a class='share-row' href='https://twitter.com/intent/tweet?text=ETF Rotation Strategy&amp;url=https%3A%2F%2Fwww.quantopian.com%2Fposts%2Fetf-rotation-strategy%3Futm_source%3Dwebsite_share%26utm_campaign%3Detf-rotation-strategy%26utm_medium%3Dtwitter&amp;via=quantopian'>
<i class='icon icon-twitter'></i>
Share on Twitter
</a>
</li>
<li>
<div class='share-row facebook-button'>
<i class='icon icon-facebook'></i>
Share on Facebook
</div>
</li>
<li>
<div class='share-row linkedin-button' data-share-url='https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Fwww.quantopian.com%2Fposts%2Fetf-rotation-strategy%3Futm_source%3Dwebsite_share%26utm_campaign%3Detf-rotation-strategy%26utm_medium%3Dlinkedin&amp;title=ETF+Rotation+Strategy+%28Eric+Bell+%29&amp;source=Quantopian'>
<i class='icon icon-linkedin'></i>
Share on LinkedIn
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>

<div class='tags tag-row'>
<a class='tag mixpanel-button' data-event='tag click' data-mixpanel='Seeking Help' data-tag-id='55c50e7d8d4710ec6e000003' href='/posts/tag/Seeking-Help/newest'>Seeking Help</a>
<a class='tag mixpanel-button' data-event='tag click' data-mixpanel='Value' data-tag-id='55d33f023f6ba10065000000' href='/posts/tag/Value/newest'>Value</a>
<a class='tag mixpanel-button' data-event='tag click' data-mixpanel='ETFs' data-tag-id='55d33f633f6ba10065000001' href='/posts/tag/ETFs/newest'>ETFs</a>
<a class='tag mixpanel-button' data-event='tag click' data-mixpanel='Risk Management' data-tag-id='55d33f7b3f6ba10065000002' href='/posts/tag/Risk-Management/newest'>Risk Management</a>
</div>
<input type="hidden" name="social_fb_post_link" id="social_fb_post_link" value="https://www.quantopian.com/posts/etf-rotation-strategy?utm_source=website_share&amp;utm_campaign=etf-rotation-strategy&amp;utm_medium=facebook" />
<input type="hidden" name="social_post_image" id="social_post_image" value="external/logo-q-red-outline.png" />
<input type="hidden" name="social_post_author" id="social_post_author" value="Eric Bell " />
<div class='body-text'>
<div class='body-text-container post-body'><p>Sources:</p>

<p>The Lazy Trader ETF Rotation Strategy<br>
<a href="http://www.the-lazy-trader.com/2015/01/etf-rotation-systems-to-beat-market-American-Equities.html" rel="nofollow">http://www.the-lazy-trader.com/2015/01/etf-rotation-systems-to-beat-market-American-Equities.html</a></p>

<p>Developing A Rotation Strategy Using Highly Diversified ETFs - Part III<br>
<a href="https://seekingalpha.com/article/2107713-developing-a-rotation-strategy-using-highly-diversified-etfs-part-iii" rel="nofollow">https://seekingalpha.com/article/2107713-developing-a-rotation-strategy-using-highly-diversified-etfs-part-iii</a></p>

<p>I buy 3 etfs based on a ranking of how it has performed in the past and the volatility.<br>
Let me know what you think! Still work for lots of improvement!  </p>
</div>
</div>
</div>

</div>

<div class='container page-container post-atomic'>
<div class='section-header reply-header'>
<div class='reply-title'>17 responses</div>
</div>
<div class='replies'>
<div class='post-container response-container' data-post-id='59708de147fb46057bc75d75' id='59708de147fb46057bc75d75'>
<a href='#59708de147fb46057bc75d75'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/594c14af07fd16001009c5f3'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/eb85b55d36c73eff281fb6656bdb8769?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/594c14af07fd16001009c5f3'>Ro FG</a>
</div>
<a UTCms='1500548577000' class='quanto-date posted-at response-posted-at' href='#59708de147fb46057bc75d75'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Why do you rank them before? I mean, you do the returns for each ETF (20d, 3m, 6m, 1yr), but you don&#39;t need to rank them yet. First, do the score, and then rank them.<br>
I would delete this:<br>
    day20_rank=day20_ret.rank(ascending=False)<br>
    day3mo_rank=day3mo_ret.rank(ascending=False)<br>
    day6mo_rank=day6mo_ret.rank(ascending=False)<br>
    day1yr_rank=day1yr_ret.rank(ascending=False)<br>
    vol_rank=volatility.rank(ascending=True)  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5971123732485a493cd3fc3f' id='5971123732485a493cd3fc3f'>
<a href='#5971123732485a493cd3fc3f'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/556675f3f33e8953ae0003c7'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/beb0dadad0d564c32346b21296d91b2f?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/556675f3f33e8953ae0003c7'>Eric Bell </a>
</div>
<a UTCms='1500582455000' class='quanto-date posted-at response-posted-at' href='#5971123732485a493cd3fc3f'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thank you,</p>

<p>So just to clarify. I want to rank by the average of their returns, not the average of their ranks.<br>
i.e. I was doing<br>
average_ranks=(1+3+7+4+3)/5<br>
but you say<br>
average_returns = (0.01 +0.09 +0.15 +0.10+0.19)/5<br>
then:<br>
rank = average_returns rank</p>

<p>That makes sense, here is the backtest.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5975b36955cdf1000d377c4e' id='5975b36955cdf1000d377c4e'>
<a href='#5975b36955cdf1000d377c4e'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/594c14af07fd16001009c5f3'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/eb85b55d36c73eff281fb6656bdb8769?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/594c14af07fd16001009c5f3'>Ro FG</a>
</div>
<a UTCms='1500885865000' class='quanto-date posted-at response-posted-at' href='#5975b36955cdf1000d377c4e'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I still don&#39;t know why the alpha is so low compared with other similar strategies like this. Any one? <a href="https://www.quantopian.com/posts/global-market-rotation-strategy-buggy-implementation">https://www.quantopian.com/posts/global-market-rotation-strategy-buggy-implementation</a>  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='59779f46ccfa6719d4d7cc17' id='59779f46ccfa6719d4d7cc17'>
<a href='#59779f46ccfa6719d4d7cc17'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/556675f3f33e8953ae0003c7'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/beb0dadad0d564c32346b21296d91b2f?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/556675f3f33e8953ae0003c7'>Eric Bell </a>
</div>
<a UTCms='1501011782000' class='quanto-date posted-at response-posted-at' href='#59779f46ccfa6719d4d7cc17'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I think it has to do with the performance of emerging ETFs, I used sector ETFs. I took out everything but the 3 month returns and the volatility. It performed a lot better. There&#39;s a leverage problem though, so it&#39;s not perfectly accurate right now.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='59779fd7ccfa674ad5d7d06a' id='59779fd7ccfa674ad5d7d06a'>
<a href='#59779fd7ccfa674ad5d7d06a'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/556675f3f33e8953ae0003c7'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/beb0dadad0d564c32346b21296d91b2f?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/556675f3f33e8953ae0003c7'>Eric Bell </a>
</div>
<a UTCms='1501011927000' class='quanto-date posted-at response-posted-at' href='#59779fd7ccfa674ad5d7d06a'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Here is the performance with the sector etfs instead of emerging market. Interesting!  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5977aff3ccfa675305d7cb1f' id='5977aff3ccfa675305d7cb1f'>
<a href='#5977aff3ccfa675305d7cb1f'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/556675f3f33e8953ae0003c7'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/beb0dadad0d564c32346b21296d91b2f?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/556675f3f33e8953ae0003c7'>Eric Bell </a>
</div>
<a UTCms='1501016051000' class='quanto-date posted-at response-posted-at' href='#5977aff3ccfa675305d7cb1f'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I had to replace EDV with TLT. The partial fills from the stocks ordering were messing up the leverage. I&#39;m sure there is a better way, to fix the problem and still trade EDV.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='59787320733bfa39065a7e9d' id='59787320733bfa39065a7e9d'>
<a href='#59787320733bfa39065a7e9d'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/594c14af07fd16001009c5f3'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/eb85b55d36c73eff281fb6656bdb8769?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/594c14af07fd16001009c5f3'>Ro FG</a>
</div>
<a UTCms='1501066016000' class='quanto-date posted-at response-posted-at' href='#59787320733bfa39065a7e9d'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>When you introduce the volatility of the ETF, I think (might be wrong) that you are rewarding those with more vol. because you are adding it. </p>

<p>-ETF A has a 4% return, and 2% volatility = 0.7*4%+0.3*2%=2.8+0.6=3.4 Score<br>
-ETF B has a 4% return , and 3% volatility = 0.7*4%+0.3*3%=2.8+0.9=3.7 Score  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5978737fbcc1d7000d67a163' id='5978737fbcc1d7000d67a163'>
<a href='#5978737fbcc1d7000d67a163'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/594c14af07fd16001009c5f3'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/eb85b55d36c73eff281fb6656bdb8769?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/594c14af07fd16001009c5f3'>Ro FG</a>
</div>
<a UTCms='1501066111000' class='quanto-date posted-at response-posted-at' href='#5978737fbcc1d7000d67a163'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I did this based on your approach, but still not as profitable as yours  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='59789c214f82d5000df7af77' id='59789c214f82d5000df7af77'>
<a href='#59789c214f82d5000df7af77'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/594c14af07fd16001009c5f3'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/eb85b55d36c73eff281fb6656bdb8769?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/594c14af07fd16001009c5f3'>Ro FG</a>
</div>
<a UTCms='1501076513000' class='quanto-date posted-at response-posted-at' href='#59789c214f82d5000df7af77'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Also picking SHY instead of TLT may be a more accurate option  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='597ae172dcd385000dc02baf' id='597ae172dcd385000dc02baf'>
<a href='#597ae172dcd385000dc02baf'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/52b0e0e0271a27fc88000049'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e5451406e743420c700eb2b054b2fc57?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/52b0e0e0271a27fc88000049'>Blue Seahawk</a>
</div>
<a UTCms='1501225330000' class='quanto-date posted-at response-posted-at' href='#597ae172dcd385000dc02baf'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Start date of the EB code showing 800% is being changed to 2009. Tried this, same:</p>

<pre><code>def initialize(context):  
    set_symbol_lookup_date(&#39;2004-01-31&#39;)  
</code></pre>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='597b96e4381306000de10fd4' id='597b96e4381306000de10fd4'>
<a href='#597b96e4381306000de10fd4'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/556675f3f33e8953ae0003c7'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/beb0dadad0d564c32346b21296d91b2f?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/556675f3f33e8953ae0003c7'>Eric Bell </a>
</div>
<a UTCms='1501271780000' class='quanto-date posted-at response-posted-at' href='#597b96e4381306000de10fd4'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Blue So are you saying it is not trading until 2009?<br>
@Ro FG You are exiting every time it is below the 200 day SPY, and putting it in EDV. It doesn&#39;t work as well as a safety because  after the recession you get those signals, and it still goes up also. </p>

<p>I normalized the returns by dividing them by their volatility . I am not sure if this is correct. I also combined all the etfs from both strategies. I am trying to lower the drawdown, because the returns seem way to high. I wouldn&#39;t want to just invest in emerging etfs.  What comes up must come down!  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='597b97cfd63db40010f7f7fb' id='597b97cfd63db40010f7f7fb'>
<a href='#597b97cfd63db40010f7f7fb'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/556675f3f33e8953ae0003c7'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/beb0dadad0d564c32346b21296d91b2f?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/556675f3f33e8953ae0003c7'>Eric Bell </a>
</div>
<a UTCms='1501272015000' class='quanto-date posted-at response-posted-at' href='#597b97cfd63db40010f7f7fb'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Relatively a flat strategy the last 3 years or so. Did really well up until 2010.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='597bc4b2fdb49f000db12f68' id='597bc4b2fdb49f000db12f68'>
<a href='#597bc4b2fdb49f000db12f68'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/52b0e0e0271a27fc88000049'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e5451406e743420c700eb2b054b2fc57?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/52b0e0e0271a27fc88000049'>Blue Seahawk</a>
</div>
<a UTCms='1501283506000' class='quanto-date posted-at response-posted-at' href='#597bc4b2fdb49f000db12f68'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@EB I was saying the start date field changed to 2009 automatically. Clicking on that calendar after the test, there was a message to the effect of first available date for securities being traded, surely you&#39;ve seen that a few times eh. If there&#39;s a log message about it as well, I missed it.</p>

<p>Switching to the second-most recent backtest above with apparent returns of 197, its profit per dollar was just 60 due to margin. A common problem. This version has apparent returns of 233 and profit per dollar is 232, so almost no margin. So not only is 233 higher than 197 but also 232 is higher than 60. <em>Using profit per dollar activated|invested is the only way I know for comparing two algorithms apples-to-apples and seeing more clearly what they are really doing by neutralizing, or adjusting for, their use of capital, i.e. amount of risk. Maybe people don&#39;t go that route because of the reduced speed.</em></p>

<p>There were evidently so many partial fills (the cause of all that margin along with the inherent unpredictability that goes with it hand-in-hand, unintended margin with order_target_percent when there are partial fills) that I took an unusually extreme approach in reactivating close() by running an entire day before balance and again the morning of that monthly balance, as this, the first try. @Ro FG, you might want to use similar and see what happens in your version.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5980554d66e9151a6fcd3965' id='5980554d66e9151a6fcd3965'>
<a href='#5980554d66e9151a6fcd3965'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/594c14af07fd16001009c5f3'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/eb85b55d36c73eff281fb6656bdb8769?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/594c14af07fd16001009c5f3'>Ro FG</a>
</div>
<a UTCms='1501582669000' class='quanto-date posted-at response-posted-at' href='#5980554d66e9151a6fcd3965'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>interesting point. Dividing by the volatility lowers the drawdown, but the ratio returns/drawdown is worse.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='59805592bfbbfb4beb008fd5' id='59805592bfbbfb4beb008fd5'>
<a href='#59805592bfbbfb4beb008fd5'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/594c14af07fd16001009c5f3'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/eb85b55d36c73eff281fb6656bdb8769?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/594c14af07fd16001009c5f3'>Ro FG</a>
</div>
<a UTCms='1501582738000' class='quanto-date posted-at response-posted-at' href='#59805592bfbbfb4beb008fd5'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>This version is the one that gives best results  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c07e3c7e7860d003f3af13f' id='5c07e3c7e7860d003f3af13f'>
<a href='#5c07e3c7e7860d003f3af13f'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5aea285a162eac003b6920e6'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/5d799611be0883669d36c4db4cbd6e13?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5aea285a162eac003b6920e6'>Abhi Duggal</a>
</div>
<a UTCms='1544020935000' class='quanto-date posted-at response-posted-at' href='#5c07e3c7e7860d003f3af13f'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi there @Ro FG!<br>
This is great work ! However, i am still not clear about  &quot; Choosing the best ETF from the ranking and take long positions.<br>
    best=(score_rank&lt;=1) . Since its rebalancing every month on the first, it only takes into account the last ranking on the last day of the month( ETF is the first rank on 30th or 31th and buys that) from context.stock. Is there is a way to add how many number of times a particular ETF has rank 1 over the past month and the alto buys the ETF which appeared on Rank 1 max. number of times. </p>

<p>Cheers<br>
Abhi  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5c085fc374356b004de50f21' id='5c085fc374356b004de50f21'>
<a href='#5c085fc374356b004de50f21'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/52b0e0e0271a27fc88000049'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e5451406e743420c700eb2b054b2fc57?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/52b0e0e0271a27fc88000049'>Blue Seahawk</a>
</div>
<a UTCms='1544052675000' class='quanto-date posted-at response-posted-at' href='#5c085fc374356b004de50f21'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>This makes pipeline values, orders and intraday leverage visible.<br>
Addresses the previous max intraday leverage of 2 (from buying when sell was unfilled).<br>
<em>More output at the bottom in Source Code tab</em></p>

<p>You&#39;ll want to address the EEM Flyr NaN.</p>

<pre><code>2004-01-02 05:45 before_trading_start:96 INFO .  
                         F1yr      F20d       F3m       F6m  Rank     Score  
Equity(12915 [MDY])  0.312246  0.001519  0.098958  0.183990   4.0  0.149178  
Equity(21769 [IEV])  0.324552  0.045654  0.159640  0.214569   2.0  0.186104  
Equity(23118 [EPP])  0.405521  0.034187  0.078139  0.206206   3.0  0.181013  
Equity(23134 [ILF])  0.573648  0.056455  0.156921  0.295129   1.0  0.270538  
Equity(24705 [EEM])       NaN  0.059416  0.159293  0.318650   NaN       NaN  
2004-01-02 05:45 log_pipe:231 INFO len 5  
                        min                mean                 max  
  F1yr       0.312245808241      0.403991685886      0.573647562935     NaNs 1/5  
  F20d     0.00151889120942     0.0394460654015     0.0594161715319  
   F3m      0.0781389800179      0.130590178576       0.15963963964  
   F6m       0.183989809724      0.243708652001      0.318649517685  
  Rank                  1.0                 2.5                 4.0     NaNs 1/5  
 Score       0.149178210627        0.1967082655        0.2705379173     NaNs 1/5  
2004-01-02 05:45 log_pipe:245 INFO _ _ _   F1yr   _ _ _  
    ... F1yr highs  
                         F1yr      F20d       F3m       F6m  Rank     Score  
Equity(23134 [ILF])  0.573648  0.056455  0.156921  0.295129   1.0  0.270538  
Equity(23118 [EPP])  0.405521  0.034187  0.078139  0.206206   3.0  0.181013  
Equity(21769 [IEV])  0.324552  0.045654  0.159640  0.214569   2.0  0.186104  
    ... F1yr lows  
</code></pre>

<p>[snip]</p>

<p>There are some issues filling orders to be aware of.</p>

<pre><code>2004-01-05 06:31 picks:131 INFO ETF  
2004-01-06 06:31 buys:158 INFO  
     Buy: ILF  
2004-01-06 06:31 _trac:280 INFO    1   Buy 159 ILF _ at 62.86                           d2b9  
2004-01-06 06:32 _trac:280 INFO    2         ILF 159 unfilled  d2b9  
2004-01-06 06:33 _trac:280 INFO    3         ILF 159 unfilled  d2b9  
2004-01-06 06:34 _trac:280 INFO    4         ILF 159 unfilled  d2b9  
2004-01-06 06:35 _trac:280 INFO    5         ILF 159 unfilled  d2b9  
2004-01-06 06:36 _trac:280 INFO    6         ILF 159 unfilled  d2b9  
2004-01-06 06:37 _trac:280 INFO    7         ILF 159 unfilled  d2b9  
2004-01-06 06:38 _trac:280 INFO    8         ILF 159 unfilled  d2b9  
2004-01-06 06:39 _trac:280 INFO    9         ILF 159 unfilled  d2b9  
2004-01-06 06:40 _trac:280 INFO   10         ILF 159 unfilled  d2b9  
2004-01-06 06:41 _trac:280 INFO   11      Bot 159 ILF (159) at 62.86                    d2b9  
2004-02-03 06:31 picks:131 INFO ETF  
2004-02-04 06:31 buys:158 INFO  
     Buy: ILF  
2004-03-02 06:31 picks:131 INFO ETF  
2004-03-03 06:31 buys:158 INFO  
     Buy: ILF  
2004-04-02 06:31 picks:131 INFO Safety  
2004-04-02 06:31 sells:145 INFO  
    Sell: ILF  
2004-04-02 06:31 _trac:280 INFO    1   Sell -159 ILF (159) at 63.50                     c63a  
2004-04-02 06:32 _trac:280 INFO    2         ILF -159 unfilled  c63a  
2004-04-02 06:33 _trac:280 INFO    3         ILF -159 unfilled  c63a  
2004-04-02 06:34 _trac:280 INFO    4         ILF -159 unfilled  c63a  
2004-04-02 06:35 _trac:280 INFO    5         ILF -159 unfilled  c63a  
2004-04-02 06:36 _trac:280 INFO    6         ILF -159 unfilled  c63a  
2004-04-02 06:37 _trac:280 INFO    7         ILF -159 unfilled  c63a  
2004-04-02 06:38 _trac:280 INFO    8         ILF -159 unfilled  c63a  
2004-04-02 06:39 _trac:280 INFO    9         ILF -159 unfilled  c63a  
2004-04-02 06:40 _trac:280 INFO   10         ILF -159 unfilled  c63a  
2004-04-02 06:41 _trac:280 INFO   11         ILF -159 unfilled  c63a  
2004-04-02 06:42 _trac:280 INFO   12         ILF -159 unfilled  c63a  
2004-04-02 06:43 _trac:280 INFO   13         ILF -159 unfilled  c63a  
2004-04-02 06:44 _trac:280 INFO   14         ILF -159 unfilled  c63a  
2004-04-02 06:45 _trac:280 INFO   15         ILF -159 unfilled  c63a  
2004-04-02 06:46 _trac:280 INFO   16         ILF -159 unfilled  c63a  
2004-04-02 06:47 _trac:280 INFO   17      Sold -159 ILF _ at 64.20                      c63a  
2004-04-05 06:31 buys:158 INFO  
     Buy: SHY  
2004-04-05 06:31 _trac:280 INFO    1   Buy 123 SHY _ at 82.42                           9f91  
2004-04-05 06:32 _trac:280 INFO    2      Bot 123 SHY (123) at 82.42                    9f91  
2004-05-04 06:31 picks:131 INFO Safety  
2004-05-05 06:31 buys:158 INFO  
     Buy: SHY  
2004-06-02 06:31 picks:131 INFO Safety  
2004-06-03 06:31 buys:158 INFO  
     Buy: SHY  
2004-07-02 06:31 picks:131 INFO ETF  
2004-07-02 06:31 sells:145 INFO  
    Sell: SHY  
2004-07-02 06:31 _trac:280 INFO    1   Sell -123 SHY (123) at 81.78                     46d6  
2004-07-02 06:32 _trac:280 INFO    2         SHY -123 unfilled  46d6  
2004-07-02 06:33 _trac:280 INFO    3         SHY -123 unfilled  46d6  
2004-07-02 06:34 _trac:280 INFO    4         SHY -123 unfilled  46d6  
2004-07-02 06:35 _trac:280 INFO    5         SHY -123 unfilled  46d6  
2004-07-02 06:36 _trac:280 INFO    6         SHY -123 unfilled  46d6  
2004-07-02 06:37 _trac:280 INFO    7         SHY -123 unfilled  46d6  
2004-07-02 06:38 _trac:280 INFO    8         SHY -123 unfilled  46d6  
2004-07-02 06:39 _trac:280 INFO    9         SHY -123 unfilled  46d6  
2004-07-02 06:40 _trac:280 INFO   10         SHY -123 unfilled  46d6  
2004-07-02 06:41 _trac:280 INFO   11      Sold -30/-123 SHY (93) at 81.79  (-20)        46d6  
2004-07-02 06:44 _trac:280 INFO   14      Sold -90/-123 SHY (3) at 81.83  (-60)         46d6  
2004-07-02 06:47 _trac:280 INFO   17      Sold -123 SHY _ at 81.83                      46d6  
2004-07-06 6:31 buys:159 INFO  
     Buy: MDY  
2004-07-06 6:31 _trac:281 INFO    1   Buy 92 MDY _ at 109.32                           d7d0  
2004-07-06 6:32 _trac:281 INFO    2      Bot 92 MDY (92) at 109.27                     d7d0  
</code></pre>

<p>[snip]  </p>

<p>Orders become more interesting if you want to turn on try_all_longs.<br>
Then you could try replacing .Rank with .F3m or something (and each one) to see how those compare.<br>
Or adding two or more while leaving one or more out or use a threshold or whatever else you can think of to try.<br>
All a bit easier with this visibility and style of code.</p>

<pre><code>2007-12-04 06:31 _trac:281 INFO    1   Sell -14 EEM (14) at 152.75                      5f8a  
2007-12-04 06:31 _trac:281 INFO    1   Sell -35 MDY (35) at 154.81                      975e  
2007-12-04 06:31 _trac:281 INFO    1   Sell -4 ILF (4) at 247.59                        2973  
2007-12-04 06:31 _trac:281 INFO    1   Sell -19 EPP (19) at 166.00                      134a  
2007-12-04 06:31 _trac:281 INFO    1   Sell -37 IEV (37) at 120.27                      fb58  
2007-12-04 06:32 _trac:281 INFO    2      Sold -19 EPP _ at 165.72                      134a  
2007-12-04 06:32 _trac:281 INFO    2         IEV -37 unfilled  fb58  
2007-12-04 06:32 _trac:281 INFO    2         ILF -4 unfilled  2973  
2007-12-04 06:32 _trac:281 INFO    2      Sold -14 EEM _ at 152.84                      5f8a  
2007-12-04 06:32 _trac:281 INFO    2      Sold -35 MDY _ at 154.78                      975e  
2007-12-04 06:33 _trac:281 INFO    3         IEV -37 unfilled  fb58  
2007-12-04 06:33 _trac:281 INFO    3         ILF -4 unfilled  2973  
2007-12-04 06:34 _trac:281 INFO    4      Sold -37 IEV _ at 119.24                      fb58  
2007-12-04 06:34 _trac:281 INFO    4         ILF -4 unfilled  2973  
2007-12-04 06:35 _trac:281 INFO    5      Sold -4 ILF _ at 248.52                       2973  
</code></pre>

<p><em>(Just thought I&#39;d try to help because someone kindly contacted me about this but otherwise my interest is only in dynamically selected 50+ stocks).</em>  </p>
</div>
</div>
</div>

</div>
<div class='sign-in-please'>
Please <a href='/signin?return_to=/posts/etf-rotation-strategy'>sign in</a> or
<a href='/users/sign_up?redirect_to=/posts/etf-rotation-strategy'>join Quantopian</a> to
post a reply.
</div>
</div>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId: "550580758292093",
      status: false,
      cookie: true,
      xfbml: true
    });
  };
  
  (function(d, debug){
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) {return;}
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
    ref.parentNode.insertBefore(js, ref);
  }(document, /*debug*/ false));
  
  window.twttr = (function (d,s,id) {
    var t, js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return; js=d.createElement(s); js.id=id;
    js.src="//platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs);
    return window.twttr || (t = { _e: [], ready: function(f){ t._e.push(f) } });
  }(document, "script", "twitter-wjs"));
</script>
<script>
  $(document).ready(function () {
    quanto.instances.pm = new quanto.PostManager(false)
  });
</script>

<div class='login-footer'>
<div class='container'>
<div class='login-footer-text'>
Become an expert in quant finance through Quantopian's hands-on education.
</div>
<div class='login-footer-button'>
<button class='btn btn-v2 stroke join-modal-link mixpanel-button' data-event='anon join footer click posts' data-mixpanel='click'>
Join Now
</button>
</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='error-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'>Error</span>
</div>
<div class='modal-body body-content'>
<p>Sorry, something went wrong.  Try again or contact us by <a class='feedback-link'>sending feedback</a>.</p>
</div>
<div class='modal-footer'>
<button class='btn btn-v2 blue action-button' data-dismiss='modal' href='#'>Close</button>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='confirmation-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'></span>
</div>
<div class='modal-body body-content'></div>
<div class='modal-footer'>
<div class='pull-right'>
<button class='btn btn-v2 border' data-dismiss='modal'>Cancel</button>
<button class='btn btn-v2 blue action-button' data-dismiss='modal'></button>
</div>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='message-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'></span>
</div>
<div class='modal-body body-content'></div>
<div class='modal-footer'>
<button class='btn btn-v2 blue action-button' data-dismiss='modal' id='message-modal-close'>Close</button>
</div>

</div>
</div>
</div>

<div class='always-bootstrap3-modals'>
<div class='fade modal quanto-modal-v2' id='join-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header visible-small'>
<span class='title'>
Join Quantopian.  It's Free!
</span>
<div class='modal-x-out visible-xs'></div>
</div>
<div class='modal-body'>
<div class='flex-wrap'>
<div class='join-left-pane hidden-small'>
<div class='margin_30l'>
<div class='join-hero-text'>
Join Quantopian.  It's Free!
</div>
<div class='join-benefits'>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image code'></div>
</div>
<div class='join-text'>
Use our research platform, backtester, and dozens of clean data sets.
</div>
</div>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image learn'></div>
</div>
<div class='join-text'>
Learn with our hands-on education and community forums.
</div>
</div>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image win'></div>
</div>
<div class='join-text'>
Enter to win cash prizes in our contest.
</div>
</div>
</div>
<div class='hidden saved-reminder'>
Don't worry, all your work is already saved.
</div>
</div>
</div>
<div class='join-right-pane'>
<div class='hidden-small'>
<div class='button-pane'>
<a class="button btn-v2 user-form-btn" href="/signin">Already a Quantopian member?</a>
</div>
</div>
<div class='visible-small'>
<div class='already-member'>
<a href='/signin'>Already a Quantopian member?</a>
</div>
</div>
<form class="quanto-form-v2" id="new-user-modal-form" action="/users" accept-charset="UTF-8" data-remote="true" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><div class='error-message hidden'>
<div class='message'></div>
</div>
<div class='name-group'>
<div class='form-group inline-block'>
<label for="user_firstname">First Name</label>
<input class="form-control firstname" pattern=".*" required="required" autocomplete="off" autofocus="autofocus" type="text" name="user[firstname]" id="user_firstname" />
</div>
<div class='form-group inline-block'>
<label for="user_lastname">Last Name</label>
<input class="form-control" value="" pattern=".*" required="required" autocomplete="off" type="text" name="user[lastname]" id="user_lastname" />
</div>
</div>
<div class='form-group'>
<label for="user_email">Email</label>
<input class="form-control" value="" pattern=".*" required="required" autocomplete="off" type="email" name="user[email]" id="user_email" />
</div>
<div class='form-group'>
<label for="user_password">Password</label>
<input autocomplete="off" class="form-control" pattern=".*" required="required" type="password" name="user[password]" id="user_password" />
</div>
<div class='checkbox eula'>
<input id='eula-checkbox' type='checkbox'>
<div class='quanto-checkbox'></div>
<label for='eula-checkbox' id='checkbox-label'>I accept the <a href='/policies/terms' target='_blank'>Terms Of Use</a> and <a href='/policies/privacy' target='_blank'>Privacy Policy</a>.</label>
</div>
<div class='checkbox mailchimp-box'>
<input name="user[allow_marketing_emails]" type="hidden" value="0" /><input type="checkbox" value="1" name="user[allow_marketing_emails]" id="user_allow_marketing_emails" />
<div class='quanto-checkbox'></div>
<label for='user_allow_marketing_emails'>
Send me email updates with the latest news from the Quantopian community. We send these emails about once a month.
</label>
</div>
<div class='button-row'>
<button class='btn-v2 blue full' data-redirect-to='/tutorials/getting-started' id='sign-up-button' type='Submit'>Join Quantopian</button>
</div>
</form></div>
</div>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='feedback-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title'>Contact Support</span>
</div>
<div class='modal-body'>
<form class='anon-user controls quanto-form-v2' id='feedback-form'>
<div class='feedback-inputs'>
<div class='form-group'>
<input autofocus class='form-control' id='feedback-email-box' name='email' placeholder='Email Address' type='email'>
</div>
<div class='form-group'>
<input class='form-control' id='feedback-name-box' placeholder='Name' type='name'>
</div>
<div class='form-group'>
<textarea class='form-control' id='feedback-box' name='feedback' placeholder='What may we help you with?' rows='10'></textarea>
</div>
</div>
</form>
<form class='hidden quanto-form-v2 select-resource-area'>
<div class='select-step select-type-step'>
<div class='form-group'>
<select class='form-control select-resource-dropdown' title='Select the item you need help with'>
<option value='algorithm'>Algorithm</option>
<option value='backtest'>Backtest</option>
<option value='notebook'>Notebook</option>
</select>
</div>
</div>
<div class='select-step loading-area hidden'>
<div class='loading-text'>
Loading...
</div>
</div>
<div class='select-step empty-list-area hidden'>
<div class='back-button'>Go Back</div>
<div class='empty-text'>
No <span class='empty-list-resource-text'>algorithms</span> found
</div>
</div>
<div class='select-algo-area select-step hidden'>
<div class='back-button'>Go Back</div>
<table class='select-algo-table select-item-table'>
<thead>
<tr>
<th>
Algorithm
<span class='sort-icon'></span>
</th>
<th>
Last Modified
<span class='sort-icon'></span>
</th>
</tr>
</thead>
</table>
</div>
<div class='select-backtest-area select-step hidden'>
<div class='back-button'>Go Back</div>
<table class='select-backtest-table select-item-table'>
<thead>
<tr>
<th>
Backtest
<span class='sort-icon'></span>
</th>
<th>
Started At
<span class='sort-icon'></span>
</th>
<th>
Overall Return
<span class='sort-icon'></span>
</th>
<th>
Status
<span class='sort-icon'></span>
</th>
</tr>
</thead>
</table>
</div>
<div class='select-notebook-area select-step hidden'>
<div class='back-button'>Go Back</div>
<div class='subtitle select-cell-step'>
Choose a cell to use as the preview for this notebook:
</div>
<div class='iframe-wrapper'>
<iframe class='notebook-list-iframe slow-fade' src=''></iframe>
</div>
<div class='progress-area slow-fade in'>
<div class='progress-container'>
<div class='progress-title'>
<div class='quanto-loader gray'></div>
</div>
</div>
</div>
<div class='maintenance-area'>
<div class='error-container'>
<div class='row'>
<div class='col-md-14 msg-title h1'>
Sorry, research is currently undergoing maintenance.
</div>
</div>
<div class='row'>
<div class='col-md-14 msg-subtitle'>
Please check back shortly. If the maintenance period lasts longer than expected,
you can find updates on <a href='https://status.quantopian.com/'>status.quantopian.com</a>.
</div>
</div>

</div>
</div>
<div class='error-area'>
<div class='error-container'>
<div class='row'>
<div class='col-md-14 msg-title h1'>
Sorry, something went wrong on our end.
</div>
</div>
<div class='row'>
<div class='col-md-14 msg-subtitle'>
Please try again or contact <a class='open-feedback-link'>Quantopian support</a>.
</div>
</div>

</div>
</div>

</div>
<div class='selected-item-area select-step hidden'>
<div class='selected-item-group form-group'>
<div class='selected-item-control'>
<input class='disabled form-control selected-item-box' type='text'>
<span class='secure-icon icon'></span>
<button class='btn change change-primary-item-button change-selection-button new-btn transparent' type='button'>
<span class='refresh-icon icon'></span>
</button>
</div>
<div class='selected-backtest-control'>
<input class='disabled form-control selected-backtest-box' type='text'>
<span class='secure-icon icon'></span>
<button class='btn change-backtest-button change-selection-button new-btn transparent' type='button'>
<span class='refresh-icon icon'></span>
</button>
</div>
</div>
<div class='checkbox-group form-group'>
<div class='checkbox give-permission'>
<input class='give-permission-checkbox' id='feedback-give-permission-checkbox' type='checkbox'>
<div class='quanto-checkbox'></div>
<label for='feedback-give-permission-checkbox'>
I permit Quantopian to view <span class='item-type-text'>this algorithm,
backtest or notebook and their imported datasets</span> for the purpose of providing support.
</label>
</div>
</div>
</div>
</form>

<div class='loading-step hidden'>
<div class='loading-text'>
Submitting your support ticket...
</div>
</div>
<div class='success-step invisible'>
<h2 class='title center'>
You've successfully submitted a support ticket.
</h2>
<p>
Our support team will be in touch soon.
</p>
<div class='confirmation-image'></div>
</div>
</div>
<div class='modal-footer'>
<button class='btn-v2 blue' id='send-feedback-button'>Send</button>
<div class='error-message hidden'>
Error submitting support request.
</div>
</div>

</div>
</div>
</div>

</div>
</div>
<div class='footer' id='quanto-footer-container'>
<div class='container'>
<div class='row header-row'>
<div class='col-sm-fourth span3'>
<img class='async-image logotype-image' data-src='https://qf.quantopian.com/assets/logos/logo-q-full-b23bda5ac757691b9259d396d0dfef91567165868b8c955a836649686e6d2248.svg'>
</div>
<div class='col-sm-fourth span3'></div>
<div class='col-sm-fourth span3'></div>
<div class='col-sm-fourth span3'>
<div class='feedback-email'>
Need help?
<a href="/cdn-cgi/l/email-protection#7b1d1e1e1f191a18103b0a0e1a150f140b121a1555181416">Contact support.</a>
</div>
</div>
</div>
<div class='row'>
<div class='col-sm-fourth span3'>
<div class='header'>Company</div>
<div class='footer-row'>
<a href='/about'>About</a>
</div>
<div class='footer-row'>
<a href='/academia'>Academia</a>
</div>
<div class='footer-row'>
<a href='/jobs'>Careers</a>
</div>
<div class='footer-row'>
<a href='/posts'>Community</a>
</div>
<div class='footer-row'>
<a href='/events'>Events</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Learn &amp; Support</div>
<div class='footer-row'>
<a href='/faq'>FAQ</a>
</div>
<div class='footer-row'>
<a href='/tutorials/getting-started'>Getting Started</a>
</div>
<div class='footer-row'>
<a href='/docs'>Documentation</a>
</div>
<div class='footer-row'>
<a href='/tutorials'>Tutorials</a>
</div>
<div class='footer-row'>
<a href='/lectures'>Lectures</a>
</div>
<div class='footer-row'>
<a href='/opensource'>Open Source</a>
</div>
<div class='footer-row'>
<a href='https://status.quantopian.com/'>Site Status</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Notices</div>
<div class='footer-row'>
<a href='/policies/terms'>Terms of Use</a>
</div>
<div class='footer-row'>
<a href='/policies/privacy'>Privacy Policy</a>
</div>
<div class='footer-row'>
<a href='/security'>Security</a>
</div>
<div class='footer-row'>
<a href='/policies/code-of-conduct'>Code of Conduct</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Follow Us</div>
<div class='footer-row'>
<a href='https://www.twitter.com/quantopian'>Twitter</a>
</div>
<div class='footer-row'>
<a href='https://www.facebook.com/quantopian'>Facebook</a>
</div>
<div class='footer-row'>
<a href='https://www.linkedin.com/company/quantopian'>LinkedIn</a>
</div>
<div class='footer-row'>
<a href='https://www.youtube.com/channel/UC606MUq45P3zFLa4VGKbxsg'>YouTube</a>
</div>
</div>
</div>
<div class='row'>
<div class='col-xs-14 span12'>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian.
</p>
<p>
In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>

</div>
</div>
</div>
</div>
</div>
<div class='mobile-footer'>
<div class='mobile-nav-category main-links'>
<div class='mobile-nav-row-footer'>
<a href='/about'>About Quantopian</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/jobs'>Careers</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/posts'>Community</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/events'>Events</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/docs'>Documentation</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/academia'>Academia</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/lectures'>Lectures</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://status.quantopian.com/'>Status</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.facebook.com/quantopian'>Facebook</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.twitter.com/quantopian'>Twitter</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.linkedin.com/company/quantopian'>LinkedIn</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.youtube.com/channel/UC606MUq45P3zFLa4VGKbxsg'>YouTube</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/policies/terms'>Terms of Use</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/policies/privacy'>Privacy Policy</a>
</div>
</div>
<div class='mobile-nav-category'>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian.
</p>
<p>
In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>

</div>
</div>
</div>

</div>
<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script></body>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', "UA-8519877-1", {
    cookieDomain: "quantopian.com"
  });
  ga('set', 'dimension1', 'session_5f9dc7425d387f00077e48e4');
  
  ga('send', 'pageview');
</script>

<input type="hidden" name="is_mac" id="is_mac" value="false" />
<input type="hidden" name="mp" id="mp" value="75873953cd404bcc1da88a55ff51e3b4" />
<script>
  (function(e,a){if(!a.__SV){var b=window;try{var c,l,i,j=b.location,g=j.hash;c=function(a,b){return(l=a.match(RegExp(b+"=([^&]*)")))?l[1]:null};g&&c(g,"state")&&(i=JSON.parse(decodeURIComponent(c(g,"state"))),"mpeditor"===i.action&&(b.sessionStorage.setItem("_mpcehash",g),history.replaceState(i.desiredHash||"",e.title,j.pathname+j.search)))}catch(m){}var k,h;window.mixpanel=a;a._i=[];a.init=function(b,c,f){function e(b,a){var c=a.split(".");2==c.length&&(b=b[c[0]],a=c[1]);b[a]=function(){b.push([a].concat(Array.prototype.slice.call(arguments,
  0)))}}var d=a;"undefined"!==typeof f?d=a[f]=[]:f="mixpanel";d.people=d.people||[];d.toString=function(b){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);b||(a+=" (stub)");return a};d.people.toString=function(){return d.toString(1)+".people (stub)"};k="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
  for(h=0;h<k.length;h++)e(d,k[h]);a._i.push([b,c,f])};a.__SV=1.2;b=e.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";c=e.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}})(document,window.mixpanel||[]);
  mixpanel.init("75873953cd404bcc1da88a55ff51e3b4");
</script>
<script>
  mixpanel.track("view page", {"page": window.location.pathname});
</script>
</html>
