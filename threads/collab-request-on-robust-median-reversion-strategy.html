<!DOCTYPE html>
<html>
<head>
<link href='i1.wp.com' rel='dns-prefetch'>
<link href='i2.wp.com' rel='dns-prefetch'>
<link href='i3.wp.com' rel='dns-prefetch'>
<meta content='2HgX9mcLHaPOX6sfaaAkhWtblhEB9yUNw4l6l46e1k4' name='google-site-verification'>
<link rel="shortcut icon" type="image/x-icon" href="external/favicon-q-ac1a76f2c200e9026b5b1147519bb4fab6256910588b831e2411bc6c7c1218c3.png" />
<title>
Collab request on Robust Median Reversion Strategy 
</title>
<meta content='I came across this algorithm write-up:Robust Median Reversion Strategy for On-Line Portfolio Selectionhttp://ijcai.org/papers13/Papers/IJCAI13-296.pdfAbstractOn-line portfolio selection has been attracting in-creasing interests from artificial intelligence com-munity in recent decades. Mean reversion, as onemost frequent pattern in financial markets, playsan important role in some state-of-the-art strate-gies. Though successful in certain datasets, ex-isting mean reversion strategies do not...' name='description'>
<link rel="stylesheet" media="all" href="external/quanto-base-bundle-e8eb6050172aa0d24124d5c24bac90b2cccd88b5b9c7742026c0e9efab038c6e.css" />
<link rel="stylesheet" media="all" href="external/quanto-posts-bundle-aab01368d3f82d8dafc94ee9eabb82e77dc8c9fbbffa952fdcdc744dfa523cf3.css" />
<script src="external/quanto_global-057218867db29d5768131af5d6fb3476cef098e7d9e655108befb903c7ee985e.js"></script>
<script src="external/posts_bundle-3dfd82fa469c393d752e461d837aec9e4e364ae39f49198e34a6626f2180fdf7.js"></script>
<link href='external/logo-q-180x180-0f5a6a439c99203ed4aea6f656e7604c543d287be43d8b17c7591c1131f09a59.png' rel='apple-touch-icon'>
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="t4fP9FS+Z8Qw4D1DmY6D29klRurehZDhdWYS+Xfq+sPL4bm59ki1J4n9ZHLWYSuv4atlg6RJhfr3acmT3a+YeA==" />
<meta content='width=device-width, initial-scale=1.0' name='viewport'>
<script>
//<![CDATA[
window.quanto_data={};quanto_data.bounce_back_params={"show_modal":null,"feedback_text":null};quanto_data.namespace="public";quanto_data.talib_info={"ADOSC":["Chaikin A/D Oscillator (Volume Indicators)",["fastperiod","3"],["slowperiod","10"]],"ADX":["Average Directional Movement Index (Momentum Indicators)",["timeperiod","14"]],"ADXR":["Average Directional Movement Index Rating (Momentum Indicators)",["timeperiod","14"]],"APO":["Absolute Price Oscillator (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["matype","0"]],"AROON":["Aroon (Momentum Indicators)",["timeperiod","14"]],"AROONOSC":["Aroon Oscillator (Momentum Indicators)",["timeperiod","14"]],"ATR":["Average True Range (Volatility Indicators)",["timeperiod","14"]],"BBANDS":["Bollinger Bands (Overlap Studies)",["timeperiod","5"],["nbdevup","2"],["nbdevdn","2"],["matype","0"]],"BETA":["Beta (Statistic Functions)",["timeperiod","5"]],"CCI":["Commodity Channel Index (Momentum Indicators)",["timeperiod","14"]],"CMO":["Chande Momentum Oscillator (Momentum Indicators)",["timeperiod","14"]],"CORREL":["Pearson's Correlation Coefficient (r) (Statistic Functions)",["timeperiod","30"]],"DEMA":["Double Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"DX":["Average Directional Movement Index (Momentum Indicators)",["timeperiod","14"]],"EMA":["Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"KAMA":["Kaufman Adaptive Moving Average (Overlap Studies)",["timeperiod","30"]],"LINEARREG":["Linear Regression (Statistic Functions)",["timeperiod","14"]],"LINEARREG_ANGLE":["Linear Regression Angle (Statistic Functions)",["timeperiod","14"]],"LINEARREG_INTERCEPT":["Linear Regression Intercept (Statistic Functions)",["timeperiod","14"]],"LINEARREG_SLOPE":["Linear Regression Slope (Statistic Functions)",["timeperiod","14"]],"MA":["Moving average (Overlap Studies)",["timeperiod","30"],["matype","0"]],"MACD":["Moving Average Convergence/Divergence (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["signalperiod","9"]],"MACDEXT":["MACD with controllable MA type (Momentum Indicators)",["fastperiod","12"],["fastmatype","0"],["slowperiod","26"],["slowmatype","0"],["signalperiod","9"],["signalmatype","0"]],"MACDFIX":["Moving Average Convergence/Divergence Fix 12/26 (Momentum Indicators)",["signalperiod","9"]],"MAX":["Highest values over a specified period (Math Operators)",["timeperiod","30"]],"MAXINDEX":["Index of highest value over a specified period (Math Operators)",["timeperiod","30"]],"MFI":["Money Flow Index (Momentum Indicators)",["timeperiod","14"]],"MIDPOINT":["Midpoint over period (Overlap Studies)",["timeperiod","14"]],"MIDPRICE":["Midpoint Price over period (Overlap Studies)",["timeperiod","14"]],"MIN":["Lowest value over a specified period (Math Operators)",["timeperiod","30"]],"MININDEX":["Index of lowest value over a specified period (Math Operators)",["timeperiod","30"]],"MINMAX":["Lowest and highest values over a specified period (Math Operators)",["timeperiod","30"]],"MINMAXINDEX":["Indexes of lowest and highest values over a specified period (Math Operators)",["timeperiod","30"]],"MINUS_DI":["Minus Directional Indicator (Momentum Indicators)",["timeperiod","14"]],"MINUS_DM":["Minus Directional Movement (Momentum Indicators)",["timeperiod","14"]],"MOM":["Momentum (Momentum Indicators)",["timeperiod","10"]],"NATR":["Normalized Average True Range (Volatility Indicators)",["timeperiod","14"]],"PLUS_DI":["Plus Directional Indicator (Momentum Indicators)",["timeperiod","14"]],"PLUS_DM":["Plus Directional Movement (Momentum Indicators)",["timeperiod","14"]],"PPO":["Percentage Price Oscillator (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["matype","0"]],"ROC":["Rate of change: ((price/prevPrice)-1)*100 (Momentum Indicators)",["timeperiod","10"]],"ROCP":["Rate of change Percentage: (price-prevPrice)/prevPrice (Momentum Indicators)",["timeperiod","10"]],"ROCR":["Rate of change ratio: (price/prevPrice) (Momentum Indicators)",["timeperiod","10"]],"ROCR100":["Rate of change ratio 100 scale: (price/prevPrice)*100 (Momentum Indicators)",["timeperiod","10"]],"RSI":["Relative Strength Index (Momentum Indicators)",["timeperiod","14"]],"SMA":["Simple Moving Average (Overlap Studies)",["timeperiod","30"]],"STDDEV":["Standard Deviation (Statistic Functions)",["timeperiod","5"],["nbdev","1"]],"STOCH":["Stochastic (Momentum Indicators)",["fastk_period","5"],["slowk_period","3"],["slowk_matype","0"],["slowd_period","3"],["slowd_matype","0"]],"STOCHF":["Stochastic Fast (Momentum Indicators)",["fastk_period","5"],["fastd_period","3"],["fastd_matype","0"]],"STOCHRSI":["Stochastic Relative Strength Index (Momentum Indicators)",["timeperiod","14"],["fastk_period","5"],["fastd_period","3"],["fastd_matype","0"]],"T3":["Triple Exponential Moving Average (T3) (Overlap Studies)",["timeperiod","5"],["vfactor","0.7"]],"TEMA":["Triple Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"TRIMA":["Triangular Moving Average (Overlap Studies)",["timeperiod","30"]],"TRIX":["1-day Rate-Of-Change (ROC) of a Triple Smooth EMA (Momentum Indicators)",["timeperiod","30"]],"TSF":["Time Series Forecast (Statistic Functions)",["timeperiod","14"]],"ULTOSC":["Ultimate Oscillator (Momentum Indicators)",["timeperiod1","7"],["timeperiod2","14"],["timeperiod3","28"]],"VAR":["Variance (Statistic Functions)",["timeperiod","5"],["nbdev","1"]],"WILLR":["Williams' %R (Momentum Indicators)",["timeperiod","14"]],"WMA":["Weighted Moving Average (Overlap Studies)",["timeperiod","30"]]};quanto_data.nb_preview_url="https://notebooks-preview.prd.pub.quantopian.com";quanto_data.delay_nb_preview_load=false;
//]]>
</script>
<meta content='https://www.quantopian.com/posts/collab-request-on-robust-median-reversion-strategy' property='og:url'>
<meta content='Collab request on Robust Median Reversion Strategy ' property='og:title'>

<input type="hidden" name="env" id="quanto-env" value="production" />
<meta content='550580758292093' property='fb:app_id'>
<meta content='https://www.quantopian.com/posts/collab-request-on-robust-median-reversion-strategy' property='og:url'>
<meta content='https://media.quantopian.com/public/og-image-default.png' property='og:image'>
<meta content='Collab request on Robust Median Reversion Strategy ' property='og:title'>
<meta content='I came across this algorithm write-up:Robust Median Reversion Strategy for On-Line Portfolio Selectionhttp://ijcai.org/papers13/Papers/IJCAI13-296.pdfAbstractOn-line portfolio selection has been attracting in-creasing interests from artificial intelligence com-munity in recent decades. Mean reversion, as onemost frequent pattern in financial markets, playsan important role in some state-of-the-art strate-gies. Though successful in certain datasets, ex-isting mean reversion strategies do not...' property='og:description'>
</head>
<script type='application/ld+json'>
  {
    "@context": "http://schema.org",
    "@type": "Organization",
    "url": "https://www.quantopian.com",
    "logo": "https://media.quantopian.com/logos/logo-q-press-red.png"
  }
</script>
<body class='' ontouchstart=''>
<div id='fb-root'></div>
<div class='wrapper'>
<div class='alert-v2 error'>
<div class='message'>
Quantopian's community platform is shutting down. Please read <a href="/posts/quantopians-community-services-are-closing">this post</a> for more information and <a href='/account#account'>download your code</a>.
</div>
</div>
<div class='navbar navbar-default navbar-static-top' id='app-navbar'>
<div class='container-fluid'>
<div class='navbar-header'>
<button class='navbar-toggle collapsed' data-target='#app-navbar-collapse' data-toggle='collapse'>
<span class='icon hamburger-menu'></span>
</button>
<a class='navbar-brand' href='/home'>
<img class='logo-image async-image' data-src='external/logo-q-white-b141ea6018546e5a4ecc3d10d8440ec076fc4385764e948b322828cc70950a76.svg'>
</a>
</div>
<div class='collapse navbar-collapse' id='app-navbar-collapse'>
<ul class='nav navbar-nav navbar-right'>
<li class='dropdown quanto-dropdown-new'>
<li>
<a class='header' href='/docs'>
Documentation
</a>
</li>
<li class='dropdown quanto-dropdown-new'>
<a class='header' data-toggle='dropdown' href='#'>
Learn
</a>
<ul class='dropdown-menu'>
<li>
<a class='mixpanel-button' data-event='main nav getting started clicked' href='/tutorials/getting-started'>Getting Started</a>
</li>
<li>
<a class='mixpanel-button' data-event='main nav tutorials clicked' href='/tutorials'>Tutorials</a>
</li>
<li>
<a class='mixpanel-button' data-event='main nav lectures clicked' href='/lectures'>Lectures</a>
</li>
</ul>
</li>
<li>
<a class='header' href='/posts' id='forum-link'>
Forum
</a>
</li>
<li>
<a class="header" href="/signin?return_to=/posts/collab-request-on-robust-median-reversion-strategy">Log In</a>
</li>
</li>

</ul>
</div>
</div>
</div>
<script>
  $(document).ready(function () {
    quanto.instances.fm = new quanto.FeedbackManager();
    quanto.instances.hm = new quanto.headerManager();
  })
</script>


<div class='content content-area new-style'>
<input type="hidden" name="page-id" id="page-id" value="postatomic" />
<script src="external/MathJax.js?config=TeX-AMS_HTML-full.js,Safe" async="async"></script>
<div class='container page-container post-atomic'>
<input id='parent-post-id-val' type='hidden' value='5358e0c92715c337bf000223'>
<div class='post-container' data-post-id='5358e0c92715c337bf000223' id='5358e0c92715c337bf000223'>
<div class='back-button back-to-community'>Back to Community</div>
<div class='post-title'>Collab request on Robust Median Reversion Strategy </div>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<span class='posted-at'>edited </span>
<span UTCms='1398355186000' class='quanto-date posted-at'></span>
<div class='pull-right other-actions'>
<div class='dropup inline-block'>
<div class='dropdown share-control other-action-link'>
<div data-toggle='dropdown'>
<div class='share-image'></div>
Share
</div>
<ul class='dropdown-menu share-options-menu'>
<li>
<a class='share-row' href='https://twitter.com/intent/tweet?text=Collab request on Robust Median Reversion Strategy &amp;url=https%3A%2F%2Fwww.quantopian.com%2Fposts%2Fcollab-request-on-robust-median-reversion-strategy%3Futm_source%3Dwebsite_share%26utm_campaign%3Dalgo-reference%26utm_medium%3Dtwitter&amp;via=quantopian'>
<i class='icon icon-twitter'></i>
Share on Twitter
</a>
</li>
<li>
<div class='share-row facebook-button'>
<i class='icon icon-facebook'></i>
Share on Facebook
</div>
</li>
<li>
<div class='share-row linkedin-button' data-share-url='https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Fwww.quantopian.com%2Fposts%2Fcollab-request-on-robust-median-reversion-strategy%3Futm_source%3Dwebsite_share%26utm_campaign%3Dalgo-reference%26utm_medium%3Dlinkedin&amp;title=Collab+request+on+Robust+Median+Reversion+Strategy++%28Grant+Kiehne%29&amp;source=Quantopian'>
<i class='icon icon-linkedin'></i>
Share on LinkedIn
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>

<input type="hidden" name="social_fb_post_link" id="social_fb_post_link" value="https://www.quantopian.com/posts/collab-request-on-robust-median-reversion-strategy?utm_source=website_share&amp;utm_campaign=algo-reference&amp;utm_medium=facebook" />
<input type="hidden" name="social_post_image" id="social_post_image" value="external/logo-q-red-outline.png" />
<input type="hidden" name="social_post_author" id="social_post_author" value="Grant Kiehne" />
<div class='body-text'>
<div class='body-text-container post-body'><p>I came across this algorithm write-up:</p>

<p>Robust Median Reversion Strategy for On-Line Portfolio Selection</p>

<p><a href="http://ijcai.org/papers13/Papers/IJCAI13-296.pdf">http://ijcai.org/papers13/Papers/IJCAI13-296.pdf</a></p>

<p>Abstract<br>
On-line portfolio selection has been attracting in-<br>
creasing interests from artificial intelligence com-<br>
munity in recent decades. Mean reversion, as one<br>
most frequent pattern in financial markets, plays<br>
an important role in some state-of-the-art strate-<br>
gies. Though successful in certain datasets, ex-<br>
isting mean reversion strategies do not fully con-<br>
sider noises and outliers in the data, leading to<br>
estimation error and thus non-optimal portfolios,<br>
which results in poor performance in practice. To<br>
overcome the limitation, we propose to exploit the<br>
reversion phenomenon by robust L1-median esti-<br>
mator, and design a novel on-line portfolio selec-<br>
tion strategy named “Robust Median Reversion”<br>
(RMR), which makes optimal portfolios based on
the improved reversion estimation. Empirical re-<br>
sults on various real markets show that RMR can<br>
overcome the drawbacks of existing mean reversion<br>
algorithms and achieve significantly better results.<br>
Finally, RMR runs in linear time, and thus is suit-<br>
able for large-scale trading applications.</p>

<p>Any interest in collaborating to code it?  I think I&#39;d prefer to work on github, versus the new Quantopian tool (although we could try it), since we&#39;d have version control, bug reporting, etc.</p>

<p>--Grant  </p>
</div>
</div>
</div>

</div>

<div class='container page-container post-atomic'>
<div class='section-header reply-header'>
<div class='reply-title'>53 responses</div>
</div>
<div class='replies'>
<div class='post-container response-container' data-post-id='5359375da56bfcbdca0002c2' id='5359375da56bfcbdca0002c2'>
<a href='#5359375da56bfcbdca0002c2'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/52b9b56c02cabe5dae000143'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e9388ae5102f3b152fa6225f955a29d4?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/52b9b56c02cabe5dae000143'>Alisa Deychman</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1398355807000' class='quanto-date posted-at response-posted-at' href='#5359375da56bfcbdca0002c2'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Grant,</p>

<p>Great article - thanks for sharing and it would be interesting seeing the strategy coded up.</p>

<p>While we don&#39;t (yet!) have version control, in collaboration you can see the changes being made in real time. The changes are auto-saved for all users. There is also a chat window to develop the strategy, note possible issues, and discuss iteration ideas. </p>

<p>Best of luck!  </p>
</div>
<div class='disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='5359776eefc93ed053000024' id='5359776eefc93ed053000024'>
<a href='#5359776eefc93ed053000024'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5228e97fb909fd3de20001c3'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/da9e43e44ad5f2ad52a2b0b2414bb23b?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5228e97fb909fd3de20001c3'>Joshua  Vayle</a>
</div>
<a UTCms='1398372208000' class='quanto-date posted-at response-posted-at' href='#5359776eefc93ed053000024'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I am down. Send it to me. <a href="/cdn-cgi/l/email-protection#177d78647f202224242057707a767e7b3974787a"><span class="__cf_email__" data-cfemail="402a2f3328777573737700272d21292c6e232f2d">[email&#160;protected]</span></a>  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='53599e44753214873e000082' id='53599e44753214873e000082'>
<a href='#53599e44753214873e000082'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1398382150000' class='quanto-date posted-at response-posted-at' href='#53599e44753214873e000082'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hello Joshua,</p>

<p>I&#39;d like to read through the paper carefully (and possibly some of the references), before jumping into coding.  One piece of necessary code has already been written:</p>

<pre><code>def simplex_projection(v, b=1):  
    &quot;&quot;&quot;Projection vectors to the simplex domain

Implemented according to the paper: Efficient projections onto the  
l1-ball for learning in high dimensions, John Duchi, et al. ICML 2008.  
Implementation Time: 2011 June 17 by <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="195b70775975707b7077">[email&#160;protected]</a> AT pmail.ntu.edu.sg  
Optimization Problem: min_{w}\| w - v \|_{2}^{2}  
s.t. sum_{i=1}^{m}=z, w_{i}\geq 0

Input: A vector v \in R^{m}, and a scalar z &gt; 0 (default=1)  
Output: Projection vector w

:Example:
&gt;&gt;&gt; proj = simplex_projection([.4 ,.3, -.4, .5])  
&gt;&gt;&gt; print proj  
array([ 0.33333333, 0.23333333, 0. , 0.43333333])  
&gt;&gt;&gt; print proj.sum()  
1.0

Original matlab implementation: John Duchi (<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="43292736202b2a0320306d21263128262f263a6d262736">[email&#160;protected]</a>)  
Python-port: Copyright 2012 by Thomas Wiecki (<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="e7938f888a8694c9908e82848c8ea7808a868e8bc984888a">[email&#160;protected]</a>).  
&quot;&quot;&quot;

    v = np.asarray(v)  
    p = len(v)

    # Sort v into u in descending order  
    v = (v &gt; 0) * v  
    u = np.sort(v)[::-1]  
    sv = np.cumsum(u)

    rho = np.where(u &gt; (sv - b) / np.arange(1, p+1))[0][-1]  
    theta = np.max([0, (sv[rho] - b) / (rho+1)])  
    w = (v - theta)  
    w[w  
</code></pre>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='53599ed4efc93ea6ac00009b' id='53599ed4efc93ea6ac00009b'>
<a href='#53599ed4efc93ea6ac00009b'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1398382294000' class='quanto-date posted-at response-posted-at' href='#53599ed4efc93ea6ac00009b'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Note that the code above got truncated.  Perhaps I&#39;ll put it on github.  --Grant  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5359a3faefc93e3d19000087' id='5359a3faefc93e3d19000087'>
<a href='#5359a3faefc93e3d19000087'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5219b0539b37748c5d000043'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/2b4798993116f88dd2a5bdef72f0f46f?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5219b0539b37748c5d000043'>Ed Bartosh</a>
</div>
<a UTCms='1398383612000' class='quanto-date posted-at response-posted-at' href='#5359a3faefc93e3d19000087'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I&#39;m interested.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5359a7071f0913681c00008f' id='5359a7071f0913681c00008f'>
<a href='#5359a7071f0913681c00008f'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1398384393000' class='quanto-date posted-at response-posted-at' href='#5359a7071f0913681c00008f'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>See <a href="https://github.com/gkiehne/quantopian/blob/master/simplex_projection.py">https://github.com/gkiehne/quantopian/blob/master/simplex_projection.py</a>.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='535a2db51f0913316a000168' id='535a2db51f0913316a000168'>
<a href='#535a2db51f0913316a000168'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1398418871000' class='quanto-date posted-at response-posted-at' href='#535a2db51f0913316a000168'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Some papers describing the &quot;Modified Weiszfeld Algorithm&quot; required to implement the Robust Median Reversion Strategy:</p>

<p><a href="http://www.pnas.org/content/97/4/1423.full.pdf?origin=publication_detail">http://www.pnas.org/content/97/4/1423.full.pdf?origin=publication_detail</a><br>
<a href="http://www.stat.rutgers.edu/home/cunhui/papers/43.pdf">http://www.stat.rutgers.edu/home/cunhui/papers/43.pdf</a></p>

<p>[EDIT] Another relevant reference: <a href="http://www.statistik.tuwien.ac.at/public/filz/papers/2011COST2.pdf">http://www.statistik.tuwien.ac.at/public/filz/papers/2011COST2.pdf</a></p>

<p>I set up a github file; feel free to contribute (I&#39;m a github newbie, so just let me know if I need to set permissions, etc.):</p>

<p><a href="https://github.com/gkiehne/quantopian/blob/master/l1_median.py">https://github.com/gkiehne/quantopian/blob/master/l1_median.py</a></p>

<p>Grant</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='535ac4b6dfc109e4d50004ed' id='535ac4b6dfc109e4d50004ed'>
<a href='#535ac4b6dfc109e4d50004ed'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1398457528000' class='quanto-date posted-at response-posted-at' href='#535ac4b6dfc109e4d50004ed'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Josh, Ed,</p>

<p>I expect to read through some of the literature over the weekend.  I don&#39;t have a software background, so you might consider how the program should be structured.  It is basically the OLMAR algorithm shared several times on Quantopian.  Although it slows down the backtesting, I think that the trailing window of data should be obtained with history at the minute level, but perhaps with trading limited to once per day.</p>

<p>Ed, I recall you provided a nice example of a finite state machine in Python.  Might this be appropriate?</p>

<p>Grant  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='535af1d7e2ff0f65810000dc' id='535af1d7e2ff0f65810000dc'>
<a href='#535af1d7e2ff0f65810000dc'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5219b0539b37748c5d000043'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/2b4798993116f88dd2a5bdef72f0f46f?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5219b0539b37748c5d000043'>Ed Bartosh</a>
</div>
<a UTCms='1398469081000' class='quanto-date posted-at response-posted-at' href='#535af1d7e2ff0f65810000dc'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Grant,</p>

<p>Let&#39;s implement the algo first, then make it nicer by using fsm or whatever is feasible to use. BTW, it would be good to use some chat/irc/IM for discussions. That would speed up development from my point of view. Do you have any preferences on that? gtalk/skype/irc?</p>

<p>Regarding working with git I&#39;d suggest you to have a look at <a href="http://git-scm.com/book">http://git-scm.com/book</a> and <a href="https://github.com/erlang/otp/wiki/Writing-good-commit-messages">https://github.com/erlang/otp/wiki/Writing-good-commit-messages</a></p>

<p>Regards,<br>
Ed  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='535b981a094e9a1be40002b6' id='535b981a094e9a1be40002b6'>
<a href='#535b981a094e9a1be40002b6'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1398511644000' class='quanto-date posted-at response-posted-at' href='#535b981a094e9a1be40002b6'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thanks Ed,</p>

<p>Sounds good.  The first question to answer, I figure, is &quot;Can the results reported in the paper be replicated on Quantopian?&quot;  This leads to the question of what data were used, and can we reconstruct them for backtesting?</p>

<p>Regarding chat, I came across <a href="https://gitter.im/">https://gitter.im/</a> (still in beta), which claims to have github integration.  Let me know your thoughts.  Personally, I tend to be available early mornings/nights/weekends (Northeastern United States), and even then, sometimes have other competing demands on my time.  So, &quot;asynchronous mode&quot; tends to work best for me.</p>

<p>Thanks for the github references.</p>

<p>Grant  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='535bae4b094e9ad48f00028d' id='535bae4b094e9ad48f00028d'>
<a href='#535bae4b094e9ad48f00028d'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/530db036ff0da19ab9000253'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/4b4da70bef68f9e309c46e2661d4eeb8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/530db036ff0da19ab9000253'>Jason Swearingen</a>
</div>
<a UTCms='1398517325000' class='quanto-date posted-at response-posted-at' href='#535bae4b094e9ad48f00028d'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>may I suggest you try out the R&amp;D framework I made:  <a href="https://github.com/Novaleaf/QuantShim">https://github.com/Novaleaf/QuantShim</a> as it makes development/debugging of intraday algos a bit easier.   if you do use it, let me know and i&#39;ll help out further if needed.</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='535bd0e1d0ee70d8c7000243' id='535bd0e1d0ee70d8c7000243'>
<a href='#535bd0e1d0ee70d8c7000243'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1398526180000' class='quanto-date posted-at response-posted-at' href='#535bd0e1d0ee70d8c7000243'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thanks Jason,</p>

<p>I am tweaking a version of the OLMAR algorithm, and for now, using numpy.median instead of the L1 median (spatial median) called for in the paper.  I&#39;ll post the backtest result here for folks to chew on.</p>

<p>Grant  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='535bdcf7b8ae9d0942000096' id='535bdcf7b8ae9d0942000096'>
<a href='#535bdcf7b8ae9d0942000096'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1398529273000' class='quanto-date posted-at response-posted-at' href='#535bdcf7b8ae9d0942000096'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Here&#39;s my first cut at the algorithm, using numpy.median instead of the L1 median.</p>

<p>I also added the algo to github:</p>

<p><a href="https://github.com/gkiehne/quantopian/blob/master/rmr.py">https://github.com/gkiehne/quantopian/blob/master/rmr.py</a></p>

<p>Note these settings were used, so the return in optimistic:</p>

<pre><code>set_slippage(slippage.FixedSlippage(spread=0.00))  
set_commission(commission.PerTrade(cost=0))  
</code></pre>

<p>Grant</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='535c605d147e97c4e50000bd' id='535c605d147e97c4e50000bd'>
<a href='#535c605d147e97c4e50000bd'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1398562911000' class='quanto-date posted-at response-posted-at' href='#535c605d147e97c4e50000bd'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Here&#39;s an update using a brute force method for the L1 median:</p>

<pre><code>def l1_median(x):  
    x_min = np.amin(x)  
    x_max = np.amax(x)  
    mu = np.linspace(x_min, x_max, num=50)  
    sum_dist = np.zeros_like(mu)  
    for k in range(len(mu)):  
        mu_k = mu[k]*np.ones_like(x)  
        sum_dist[k] = np.sum(np.absolute(x-mu_k))  
    l_min = np.argmin(sum_dist)  
    return mu[l_min]  
</code></pre>

<p>Again, please note these settings:</p>

<pre><code>set_slippage(slippage.FixedSlippage(spread=0.00))  
set_commission(commission.PerTrade(cost=0))  
</code></pre>

<p>Grant  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='535c8b65e5bf38d41c003fff' id='535c8b65e5bf38d41c003fff'>
<a href='#535c8b65e5bf38d41c003fff'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/509be10d196e0e0200000003'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/6c37b418826347ea4216b068fa97649e?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/509be10d196e0e0200000003'>Brent Groya</a>
</div>
<a UTCms='1398573926000' class='quanto-date posted-at response-posted-at' href='#535c8b65e5bf38d41c003fff'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>What is the superscript plus notation in the Modified Weiszfeld algorithm? It&#39;s on page 4 under Proposition 1. The part with (1 - η(μ) / γ(μ)) superscript +.</p>

<p>The part of the equations that use  Pt-i != μ don&#39;t make sense to me. When I tried this on some data sets there is never a case where this condition is met where  an n assets x 1 price vector is equal to μ. So I&#39;m also getting η == 0. The second the term in the equation is always zero.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='535cf724c64b188eb1006063' id='535cf724c64b188eb1006063'>
<a href='#535cf724c64b188eb1006063'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1398601510000' class='quanto-date posted-at response-posted-at' href='#535cf724c64b188eb1006063'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hello Brent,</p>

<p>Not sure about the superscript plus sign.  In notation used for sets, it indicates that only positive elements are included (see <a href="http://www.cs.virginia.edu/%7Erobins/cs3102/basics.pdf">http://www.cs.virginia.edu/~robins/cs3102/basics.pdf</a>).  I don&#39;t know how this applies here, however.</p>

<p>Regarding the Pt-i != μ condition, when I skimmed over the &quot;Modified Weiszfeld Algorithm&quot; paper I gathered that the modification was developed to address the special case of μ landing on one of the p&#39;s and getting stuck during the iterative solution (see <a href="http://www.stat.rutgers.edu/home/cunhui/papers/43.pdf">http://www.stat.rutgers.edu/home/cunhui/papers/43.pdf</a>, pg. 2).</p>

<p>There appears to be a better discussion of the Modified Weiszfeld Algorithm in <a href="http://www.statistik.tuwien.ac.at/public/filz/papers/2011COST2.pdf">http://www.statistik.tuwien.ac.at/public/filz/papers/2011COST2.pdf</a>.  Take note of the improvement mentioned on pg. 5.</p>

<p>Also, note that we only need code for the 1D L1 median, as I illustrate above with the brute force method.</p>

<p>Grant  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='535cf74ec64b188eb1006064' id='535cf74ec64b188eb1006064'>
<a href='#535cf74ec64b188eb1006064'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/530006e439185472f8000032'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/d244c2261df57fa9c6229c306eb91fb7?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/530006e439185472f8000032'>Novice TAI</a>
</div>
<a UTCms='1398601553000' class='quanto-date posted-at response-posted-at' href='#535cf74ec64b188eb1006064'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I do the backtest with default slippage and commission($0.03 per share) .fyi  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='535cfb5db8ae9d02030060c3' id='535cfb5db8ae9d02030060c3'>
<a href='#535cfb5db8ae9d02030060c3'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5219b0539b37748c5d000043'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/2b4798993116f88dd2a5bdef72f0f46f?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5219b0539b37748c5d000043'>Ed Bartosh</a>
</div>
<a UTCms='1398602591000' class='quanto-date posted-at response-posted-at' href='#535cfb5db8ae9d02030060c3'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Grant,</p>

<p>I started to work on improving code style and readability of the algo. Here is my first pull request: <a href="https://github.com/gkiehne/quantopian/pull/1">https://github.com/gkiehne/quantopian/pull/1</a><br>
Please, review my changes. We can discuss them either here or on github.</p>

<p>Regards,<br>
Ed  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='535d05f5e5bf38e7be006035' id='535d05f5e5bf38e7be006035'>
<a href='#535d05f5e5bf38e7be006035'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/530526b263a9ab6bba000060'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/548238fb1b96e953f25c00205ac434de?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/530526b263a9ab6bba000060'>Leo Vaghi</a>
</div>
<a UTCms='1398605304000' class='quanto-date posted-at response-posted-at' href='#535d05f5e5bf38e7be006035'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Grant,<br>
i see that you are very familiar with a lot of research papers....<br>
Why don&#39;t you put a few lines in your profile so that we know better what is your background and your area of interest?<br>
I think the discussions on the community are the best part of Quantopian, and a better reciprocal knowledge<br>
will certainly improve the quality of the communication.<br>
In any case, thanks for all the work that you are sharing.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='535d7f14bf16e23c4700001d' id='535d7f14bf16e23c4700001d'>
<a href='#535d7f14bf16e23c4700001d'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5219b0539b37748c5d000043'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/2b4798993116f88dd2a5bdef72f0f46f?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5219b0539b37748c5d000043'>Ed Bartosh</a>
</div>
<a UTCms='1398636310000' class='quanto-date posted-at response-posted-at' href='#535d7f14bf16e23c4700001d'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Grant,</p>

<p>What do you think about using @batch_transform and switching algo to daily time frame? It would speed up development a lot.</p>

<p>Regards,<br>
Ed  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='535d8415bf16e257c4000017' id='535d8415bf16e257c4000017'>
<a href='#535d8415bf16e257c4000017'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1398637591000' class='quanto-date posted-at response-posted-at' href='#535d8415bf16e257c4000017'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>My understanding is that the batch transform will be deprecated, so I&#39;ve been avoiding it.  Also, daily bars are not supported in paper/live trading.  I guess I&#39;d like to hear from Quantopian regarding the fundamental problem of not being able to accelerate backtests in minute mode, by restricting trading to a specific time.  It seems that there is a lot of overhead...  --Grant  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='535d84d4bf16e23c47000027' id='535d84d4bf16e23c47000027'>
<a href='#535d84d4bf16e23c47000027'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1398637782000' class='quanto-date posted-at response-posted-at' href='#535d84d4bf16e23c47000027'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Here&#39;s a re-factored version, thanks to Ed Bartosh.  It is available here for collaboration:</p>

<p><a href="https://github.com/gkiehne/quantopian/blob/master/rmr.py">https://github.com/gkiehne/quantopian/blob/master/rmr.py</a></p>

<p>--Grant  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='535db01ecfbb0e2d0c000013' id='535db01ecfbb0e2d0c000013'>
<a href='#535db01ecfbb0e2d0c000013'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/530db036ff0da19ab9000253'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/4b4da70bef68f9e309c46e2661d4eeb8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/530db036ff0da19ab9000253'>Jason Swearingen</a>
</div>
<a UTCms='1398648868000' class='quanto-date posted-at response-posted-at' href='#535db01ecfbb0e2d0c000013'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>do you guys know any easy math primers to help understand the symbols in the paper?  It&#39;s been so long since I&#39;ve used real math I can&#39;t figure any of it out :(  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='535db843cfbb0e01a2000044' id='535db843cfbb0e01a2000044'>
<a href='#535db843cfbb0e01a2000044'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1398650949000' class='quanto-date posted-at response-posted-at' href='#535db843cfbb0e01a2000044'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Which part are you trying to figure out, specifically?  When I get the chance, perhaps I&#39;ll provide an outline of the parts I understand (things get kinda hairy under the hood with the optimization stuff).  --Grant  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='535dbc0ebe9907423f00009b' id='535dbc0ebe9907423f00009b'>
<a href='#535dbc0ebe9907423f00009b'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/530db036ff0da19ab9000253'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/4b4da70bef68f9e309c46e2661d4eeb8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/530db036ff0da19ab9000253'>Jason Swearingen</a>
</div>
<a UTCms='1398651921000' class='quanto-date posted-at response-posted-at' href='#535dbc0ebe9907423f00009b'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Grant, well ...   really all of it.    but I found a wikipedia page that seems to be what I need:   <a href="http://en.wikipedia.org/wiki/List_of_mathematical_symbols">http://en.wikipedia.org/wiki/List_of_mathematical_symbols</a>  so now I just need to slog through the paper</p>

<p>props for getting this strategy working!  I&quot;m always very skeptical of public papers like this but indeed it seems to be valid.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='535de67ebe990737bf00010a' id='535de67ebe990737bf00010a'>
<a href='#535de67ebe990737bf00010a'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/530db036ff0da19ab9000253'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/4b4da70bef68f9e309c46e2661d4eeb8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/530db036ff0da19ab9000253'>Jason Swearingen</a>
</div>
<a UTCms='1398662785000' class='quanto-date posted-at response-posted-at' href='#535de67ebe990737bf00010a'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I&#39;m starting to go through the paper now, though I see that grant&#39;s implementation of the l1 median only very slightly outperforms standard median......</p>

<p>@grant and @ed, are you guys using a chat software at all?  please pm me or shoot me an email: <a href="/cdn-cgi/l/email-protection#f79d9684989984b7999881969b929691d994989a"><span class="__cf_email__" data-cfemail="9cf6fdeff3f2efdcf2f3eafdf0f9fdfab2fff3f1">[email&#160;protected]</span></a>  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='535df706be9907423f000106' id='535df706be9907423f000106'>
<a href='#535df706be9907423f000106'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5219b0539b37748c5d000043'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/2b4798993116f88dd2a5bdef72f0f46f?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5219b0539b37748c5d000043'>Ed Bartosh</a>
</div>
<a UTCms='1398667016000' class='quanto-date posted-at response-posted-at' href='#535df706be9907423f000106'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Jason,</p>

<p>No, we didn&#39;t use chat. I created pull request on github and Grant accepted it.<br>
We can try to use gitter as Grant suggested. I&#39;ve created chatroom there: <a href="https://gitter.im/bartosh/quantopian">https://gitter.im/bartosh/quantopian</a><br>
Please, try to join.</p>

<p>PS: I share you pain in understanding the paper and matching the code to it. I think the best way to get explanations is to invite Grant to the chat and ask him for detailed explanations.</p>

<p>Regards,<br>
Ed  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='535df8373a05d50a72000208' id='535df8373a05d50a72000208'>
<a href='#535df8373a05d50a72000208'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5219b0539b37748c5d000043'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/2b4798993116f88dd2a5bdef72f0f46f?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5219b0539b37748c5d000043'>Ed Bartosh</a>
</div>
<a UTCms='1398667321000' class='quanto-date posted-at response-posted-at' href='#535df8373a05d50a72000208'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Grant,</p>

<p>Regarding batch_transform vs history. I propose to modify algo to use both of them. While we&#39;re in developing mode we can still use batch_transform, which is much faster.</p>

<p>Regards,<br>
ed  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='535e3b54be990737bf0001b7' id='535e3b54be990737bf0001b7'>
<a href='#535e3b54be990737bf0001b7'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1398684503000' class='quanto-date posted-at response-posted-at' href='#535e3b54be990737bf0001b7'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hello Ed,</p>

<p>I understand your point regarding improving the backtest efficiency by using daily bars.  I&#39;d prefer to steer clear of the batch transform; it will be deprecated so let&#39;s not propagate it.  Instead I suggest we construct our own accumulator.  A couple approaches:</p>

<ol>
<li>Deque (<a href="https://docs.python.org/2/library/collections.html">https://docs.python.org/2/library/collections.html</a>).  [EDIT] <a href="https://www.quantopian.com/posts/rookie-q-how-do-i-store-data-for-consecutive-ticks">https://www.quantopian.com/posts/rookie-q-how-do-i-store-data-for-consecutive-ticks</a><br></li>
<li>Adopt the RollingPanel in zipline (<a href="https://github.com/quantopian/zipline/blob/master/zipline/utils/data.py">https://github.com/quantopian/zipline/blob/master/zipline/utils/data.py</a>).</li>
</ol>

<p>Another, more fundamental issue, is that a backtest running on daily bars executes orders using the close of the next trading day.  Anony Mole developed a custom slippage model to address the problem, which he introduced here:</p>

<p><a href="https://www.quantopian.com/posts/trade-at-the-open-slippage-model">https://www.quantopian.com/posts/trade-at-the-open-slippage-model</a></p>

<p>Jason Swearingen presents a variant, as well.</p>

<p>Basically, if we are going to use daily bars, we should make some approximations so that the results map onto live trading using minute bars.</p>

<p>Of course, all of this raises the question of using the online version of Quantopian for development in the first place, if we are going to test on daily bars.  We could consider using zipline, instead, with the idea of eventually moving to minute bars on Quantopian if everything pans out.</p>

<p>Grant  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='535e3d29bf16e210940001ba' id='535e3d29bf16e210940001ba'>
<a href='#535e3d29bf16e210940001ba'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/530db036ff0da19ab9000253'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/4b4da70bef68f9e309c46e2661d4eeb8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/530db036ff0da19ab9000253'>Jason Swearingen</a>
</div>
<a UTCms='1398684972000' class='quanto-date posted-at response-posted-at' href='#535e3d29bf16e210940001ba'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>hi grant, maybe you can get on the chat site ed setup.   </p>

<p>i re-implemented the algo from your guys references and see some...   questionable algorithms in play.   unfortunatly as my mathy sage skills are weak I haven&#39;t started reading the paper to try to decypher if it&#39;s your guys implementation or issues with the algo itself.</p>

<p>for starters, you can change your rmr_strategy to 
<code>return simplex_projection((x_tilde - x_bar)*4000)</code> and you&#39;ll effectively get the same results as the more complex thing you guys have right now.</p>

<p>anyway, i&#39;m still looking at your algo, i&#39;ll try to get into the paper tomorrow.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='535e4032be9907423f0001bf' id='535e4032be9907423f0001bf'>
<a href='#535e4032be9907423f0001bf'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1398685750000' class='quanto-date posted-at response-posted-at' href='#535e4032be9907423f0001bf'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Here&#39;s a variant that limits trading with:</p>

<pre><code>if context.day_count % 5 != 0.0:  
        return  
</code></pre>

<p>I use the default slippage model, with commissions:</p>

<pre><code>set_commission(commission.PerShare(cost=0.013, min_trade_cost=1.3))  
</code></pre>

<p>Not super sexy, but it does suggest the potential to beat the market without taking on additional risk.</p>

<p>Grant  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='535e4113cfbb0e2d0c000142' id='535e4113cfbb0e2d0c000142'>
<a href='#535e4113cfbb0e2d0c000142'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1398685974000' class='quanto-date posted-at response-posted-at' href='#535e4113cfbb0e2d0c000142'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hello Jason,</p>

<p>I&#39;ll set up the chat thingy on github, but as I mentioned to Ed, I&#39;m not much of a chatter, for a variety of reasons.  Asynchronous mode tends to work best for me.</p>

<p>Grant  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='535e42c7bf16e210940001c5' id='535e42c7bf16e210940001c5'>
<a href='#535e42c7bf16e210940001c5'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/530db036ff0da19ab9000253'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/4b4da70bef68f9e309c46e2661d4eeb8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/530db036ff0da19ab9000253'>Jason Swearingen</a>
</div>
<a UTCms='1398686409000' class='quanto-date posted-at response-posted-at' href='#535e42c7bf16e210940001c5'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Grant, I&#39;m not a chatter either, i just figured you guys don&#39;t want to spam this thread with random questions/issues.</p>

<p>but if so, here goes:</p>

<p>is the algorithm a complete implementation of the paper?   or do you guys still have more to do?  As it stands, I don&#39;t see anything special...   it&#39;s a long-only strategy so we are suffering from look-ahead bias right now (bull market).   also,  it&#39;s mean-revision signal is to simply look at the 6day median and to weigh positional bets on that.   I don&#39;t see how that&#39;s going to work :(  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='535e55e1bf16e210940001e8' id='535e55e1bf16e210940001e8'>
<a href='#535e55e1bf16e210940001e8'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1398691301000' class='quanto-date posted-at response-posted-at' href='#535e55e1bf16e210940001e8'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hey Jason,</p>

<p>In response to your questions/comments:</p>

<blockquote>
<p>Is the algorithm a complete implementation of the paper?</p>
</blockquote>

<p>Yes, I believe so.  With the addition of the brute force L1 median computation, it should be complete.  A more efficient L1 median algorithm would be nice, but at this point, it is probably sufficient.</p>

<p>Regarding the viability of the approach, it all depends on the objective.  I decided to pick the same plain-vanilla securities as the ones used by Quantopian in their example re-balancing algorithm:</p>

<pre><code>    context.stocks = [ sid(19662), # XLY Consumer Discrectionary SPDR Fund  
                       sid(19656), # XLF Financial SPDR Fund  
                       sid(19658), # XLK Technology SPDR Fund  
                       sid(19655), # XLE Energy SPDR Fund  
                       sid(19661), # XLV Health Care SPRD Fund  
                       sid(19657), # XLI Industrial SPDR Fund  
                       sid(19659), # XLP Consumer Staples SPDR Fund  
                       sid(19654), # XLB Materials SPDR Fund  
                       sid(19660) ] # XLU Utilities SPRD Fund  
</code></pre>

<p>Basically the entire market, as I see it.  So one question is, &quot;Is there an active trading approach that can beat the market using these securities?&quot;  In other words, why buy and hold SPY when I can construct an active portfolio that performs better than SPY?</p>

<p>Generally, it seems like a good framework for mean reversion, since the mean/median/L1 median can be replaced:</p>

<pre><code>x_tilde[i] = price_predictor(prices[:,i])/prices[-1,i]  
</code></pre>

<p>A potentially fundamental problem is that the optimization problem was formulated without trading cost and slippage taken into account.  One can fiddle with the parameters to get a decent return, but the algorithm should really &quot;learn&quot; every trading minute, and make decisions that are optimal in the context of cost and slippage.</p>

<p>Grant  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='535e5f73cfbb0ed72500018f' id='535e5f73cfbb0ed72500018f'>
<a href='#535e5f73cfbb0ed72500018f'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/530db036ff0da19ab9000253'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/4b4da70bef68f9e309c46e2661d4eeb8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/530db036ff0da19ab9000253'>Jason Swearingen</a>
</div>
<a UTCms='1398693754000' class='quanto-date posted-at response-posted-at' href='#535e5f73cfbb0ed72500018f'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Grant,  </p>

<p>if complete, then there&#39;s another issue i touched on with a msg a little earlier: 
<code>return simplex_projection((x_tilde - x_bar)*4000)</code></p>

<p>the original basically does something like <strong>return simplex_projection(bt + (4.xxx / 0.0xx) * (x_tilde - x_bar))</strong>  which seems rather wacky.  the bt component is completely dwarfed by the other, so much that it&#39;s meaningless.   also the multiplier is so large that it renderes the other parameters that go into it meaningless too..   (whats really different from 4000* than 5000* ?)  not much as it all gets divided away in the simplex projection.</p>

<p>other than that, I still don&#39;t really understand how this is going to be highly useful for mean revision.  if anything i see the current sector etf selection (and this algo&#39;s returns) to be equivelent to the quantopian live strategy, not only in portfolio but this is effectively just &quot;long holding&quot; them, just reshuffling a little bit each day.  so I really don&#39;t see any mean revision at work here....  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='535ea69abf16e257c400028a' id='535ea69abf16e257c400028a'>
<a href='#535ea69abf16e257c400028a'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5219b0539b37748c5d000043'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/2b4798993116f88dd2a5bdef72f0f46f?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5219b0539b37748c5d000043'>Ed Bartosh</a>
</div>
<a UTCms='1398711965000' class='quanto-date posted-at response-posted-at' href='#535ea69abf16e257c400028a'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Grant,</p>

<p>Can you explain the meaning of this prices[-1,i] and this prices[:,i]  operations? I&#39;m not a python newbie, but I don&#39;t understand that. pylint(code style checker) is also confused by that.</p>

<p>Regards,<br>
Ed  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='535ea8accfbb0e01a2000274' id='535ea8accfbb0e01a2000274'>
<a href='#535ea8accfbb0e01a2000274'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5219b0539b37748c5d000043'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/2b4798993116f88dd2a5bdef72f0f46f?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5219b0539b37748c5d000043'>Ed Bartosh</a>
</div>
<a UTCms='1398712494000' class='quanto-date posted-at response-posted-at' href='#535ea8accfbb0e01a2000274'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><blockquote>
<p>Not super sexy, but it does suggest the potential to beat the market without taking on additional risk.</p>
</blockquote>

<p>looking at the risk metrics(Sharp ratio is almost 3, max drawdown 0.07) I&#39;m curious what would you call super sexy :)  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='535ee24773bf9dceca000029' id='535ee24773bf9dceca000029'>
<a href='#535ee24773bf9dceca000029'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1398727243000' class='quanto-date posted-at response-posted-at' href='#535ee24773bf9dceca000029'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Ed,</p>

<p>Your question was:</p>

<blockquote>
<p>Can you explain the meaning of this prices[-1,i] and this prices[:,i] operations?</p>
</blockquote>

<p>This is indexing of the numpy ndarray prices:</p>

<p>prices[-1,i] - the last element of the column indexed by i<br>
prices[:,i] - all of the rows of the column indexed by i (i.e. the entire column)</p>

<p>Each column corresponds to a set of security prices, with time increasing downward.</p>

<p>Grant  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='535ee4b9cfbb0ed7250002e1' id='535ee4b9cfbb0ed7250002e1'>
<a href='#535ee4b9cfbb0ed7250002e1'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1398727866000' class='quanto-date posted-at response-posted-at' href='#535ee4b9cfbb0ed7250002e1'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Jason,</p>

<p>Yes, there is some mathematical voodoo going on with the simplex projection.  When Thomas Wiecki and I worked on the OLMAR algorithm, I sorta convinced myself that everything was done correctly, but the underlying math was too hairy (at least for the effort I was willing to apply).</p>

<p>Grant  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='535f3436d17031e96f00025d' id='535f3436d17031e96f00025d'>
<a href='#535f3436d17031e96f00025d'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/530db036ff0da19ab9000253'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/4b4da70bef68f9e309c46e2661d4eeb8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/530db036ff0da19ab9000253'>Jason Swearingen</a>
</div>
<a UTCms='1398748216000' class='quanto-date posted-at response-posted-at' href='#535f3436d17031e96f00025d'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>hi Grant, I thought I understood the simplexprojection from the example, but after logging it&#39;s output, I see I&#39;m wrong.     I&#39;ll research that more. </p>

<p>Though empirically the simplexProjection selects the top mean revision candidate (for upward growth) and discards the others.  this results in a lot more &quot;mean revision&quot; than I originally thought it was doing, and thus this is most likely the reason for the additional gains beyond the standard buy-and-hold.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='535f352773bf9d55130000d1' id='535f352773bf9d55130000d1'>
<a href='#535f352773bf9d55130000d1'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/530db036ff0da19ab9000253'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/4b4da70bef68f9e309c46e2661d4eeb8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/530db036ff0da19ab9000253'>Jason Swearingen</a>
</div>
<a UTCms='1398748458000' class='quanto-date posted-at response-posted-at' href='#535f352773bf9d55130000d1'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>the simplex projection implementation you are using discards negative numbers.  is this what it&#39;s supposed to do?   the line:</p>

<p><code>v = (v &gt; 0) * v</code></p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='535f84ffd17031cacf0002bc' id='535f84ffd17031cacf0002bc'>
<a href='#535f84ffd17031cacf0002bc'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1398768897000' class='quanto-date posted-at response-posted-at' href='#535f84ffd17031cacf0002bc'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Yes, I believe so.  Otherwise, the portfolio vector would have negative elements and shorting would result.  --Grant  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='535f95c5d1703121a60002c7' id='535f95c5d1703121a60002c7'>
<a href='#535f95c5d1703121a60002c7'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1398773191000' class='quanto-date posted-at response-posted-at' href='#535f95c5d1703121a60002c7'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Here&#39;s an incremental update.  I managed to get scipy.optimize.minimize_scalar to work for finding the L1 median:</p>

<pre><code>def l1_median(x):  
    &quot;&quot;&quot;  
Computes L1 median (spatial median) using scipy.optimize.minimize_scalar

:param x: a numpy 1D ndarray (vector) of values
:returns: scalar estimate of L1 median of values
&quot;&quot;&quot;
    a = float(np.amin(x))  
    b = float(np.amax(x))  
    res = minimize_scalar(dist_sum, bounds = (a,b), args = tuple(x), method=&#39;bounded&#39;)  
    return res.x

def dist_sum(m,*args):  
    &quot;&quot;&quot;  
1D sum of Euclidian distances

:param m: scalar position
:param *args: tuple of positions 
:returns: 1D sum of Euclidian distances
&quot;&quot;&quot;
    s = 0  
    for x in args:  
        s += abs(x-m)  
    return s  
</code></pre>

<p>I updated <a href="https://github.com/gkiehne/quantopian/blob/master/l1_median.py">https://github.com/gkiehne/quantopian/blob/master/l1_median.py</a> with the new code.</p>

<p>Grant  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='535fa5ba73bf9dceca0001bf' id='535fa5ba73bf9dceca0001bf'>
<a href='#535fa5ba73bf9dceca0001bf'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/530db036ff0da19ab9000253'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/4b4da70bef68f9e309c46e2661d4eeb8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/530db036ff0da19ab9000253'>Jason Swearingen</a>
</div>
<a UTCms='1398777276000' class='quanto-date posted-at response-posted-at' href='#535fa5ba73bf9dceca0001bf'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I&#39;m wondering if L1 vs standard median is overfitting...   Though tomorrow I&#39;ll try to work through the paper and the descriptions of the L1Median to try understanding the theory behind it...  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='535febdb73bf9d551300028d' id='535febdb73bf9d551300028d'>
<a href='#535febdb73bf9d551300028d'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/509be10d196e0e0200000003'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/6c37b418826347ea4216b068fa97649e?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/509be10d196e0e0200000003'>Brent Groya</a>
</div>
<a UTCms='1398795229000' class='quanto-date posted-at response-posted-at' href='#535febdb73bf9d551300028d'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I noticed the same thing about alpha in the equations. It is always a very large value. It also renders the epsilon parameter insignificant. In the paper they run the test over epsilon from 1 to 100 and it shows a large increase in total wealth achieved but this not the results I am getting. The epsilon parameter has almost no effect on my results. Something is not right some where. </p>

<p>I implemented it in R which has implementations of the L1 Median. They are mentioned in the third PDF about the topic that Grant posted.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='535ff00c6a19662c22000295' id='535ff00c6a19662c22000295'>
<a href='#535ff00c6a19662c22000295'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/535ae118650628c4d000043c'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/7174e9a5a338bff8d93f049c58ed3200?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/535ae118650628c4d000043c'>chris o</a>
</div>
<a UTCms='1398796303000' class='quanto-date posted-at response-posted-at' href='#535ff00c6a19662c22000295'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi guys, I had a brief look at the papers, and while I have never come across the L1 median, from his example, a phase threshold despiking algorithm or something similar to identify outliers in your data might be something to investigate, as if you write off your data as too noisy and just take a modified median as a proxy to the mean arent you restricting your ability to use it for other statistical purposes? Basicly uses a proxy for first and second derivative and applies an elpsoid based on various stats to identify possible outliers. Afterall, the only way to identify an outlier is to compare it to the surrounding data. I can provide papers on it if people are interested, and its only like 6 lines of matlab code. We used it all the time in fluids to post process our data to overcome exactly this problem of biased estimates.</p>

<p>editted to add :<a href="http://www.google.co.uk/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=2&amp;ved=0CDQQFjAB&amp;url=http%3A%2F%2Fimos-toolbox.googlecode.com%2Fsvn%2Fwiki%2Fdocuments%2FQC%2FCTD%2Fgoring_nikora02.pdf&amp;ei=nfFfU9TsEuX07Abzj4G4Dg&amp;usg=AFQjCNGKO-WBson8JmO25Vt1pIQ5CWjtMg&amp;bvm=bv.65397613,d.ZGU&amp;cad=rja">http://www.google.co.uk/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=2&amp;ved=0CDQQFjAB&amp;url=http%3A%2F%2Fimos-toolbox.googlecode.com%2Fsvn%2Fwiki%2Fdocuments%2FQC%2FCTD%2Fgoring_nikora02.pdf&amp;ei=nfFfU9TsEuX07Abzj4G4Dg&amp;usg=AFQjCNGKO-WBson8JmO25Vt1pIQ5CWjtMg&amp;bvm=bv.65397613,d.ZGU&amp;cad=rja</a>  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='53602875496e07b5da0002f6' id='53602875496e07b5da0002f6'>
<a href='#53602875496e07b5da0002f6'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1398810743000' class='quanto-date posted-at response-posted-at' href='#53602875496e07b5da0002f6'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi folks,</p>

<p>As the paper highlights, trading cost kills the performance for high epsilon (aggressive updating).  Here&#39;s  a version that uses Anony Mole&#39;s <a href="https://www.quantopian.com/posts/trade-at-the-open-slippage-model">https://www.quantopian.com/posts/trade-at-the-open-slippage-model</a> on daily bars.  It trades every day (can be adjusted using global trading_frequency = 1 # trading frequency in bars).</p>

<p>You can play around with the trailing window size, epsilon, trading frequency, and cost parameters to understand the trade-offs.</p>

<p>One issue I see is that there needs to be some way of putting a lower limit on the number of shares to be purchased when re-balancing (e.g. no point in paying $1.30 for a single share).</p>

<p>Grant  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='53604ad27d78ccbe3a00003e' id='53604ad27d78ccbe3a00003e'>
<a href='#53604ad27d78ccbe3a00003e'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/530db036ff0da19ab9000253'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/4b4da70bef68f9e309c46e2661d4eeb8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/530db036ff0da19ab9000253'>Jason Swearingen</a>
</div>
<a UTCms='1398819540000' class='quanto-date posted-at response-posted-at' href='#53604ad27d78ccbe3a00003e'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>lol i spent a couple hours trying to find out why my implementation differs from yours grant...  turns out you changed epsilon.  I guess doing that makes the original b_t+ more relevant to the output though.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='536203342009fb226d000133' id='536203342009fb226d000133'>
<a href='#536203342009fb226d000133'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/530db036ff0da19ab9000253'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/4b4da70bef68f9e309c46e2661d4eeb8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/530db036ff0da19ab9000253'>Jason Swearingen</a>
</div>
<a UTCms='1398932278000' class='quanto-date posted-at response-posted-at' href='#536203342009fb226d000133'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Grant,  </p>

<p>I spent a bunch of time yesterday looking at this strategy, here&#39;s what I got thus far:</p>

<p>if you want some code for reducing trivial rebalancing, you can use the order processing logic from my framework:</p>

<pre><code>    def processOrder(this, data, rebalanceThreshholdPercent=0.05, stopLimitPercent=0.0):  
        &#39;&#39;&#39; set rebalanceThreshholdPercent to zero (0.0) to cause the position to readjust even if the targetPercentage doesn&#39;t change.   this is useful for reinvesting divideds / etc  
        but is set to 0.02 (2 percent) so we don&#39;t spam orders &#39;&#39;&#39;  
        this.currentCapitalSharePercent = this.targetCapitalSharePercent  
        estimatedSharePrice = data[this.security.qsec].close_price  
        #determine value of percent  
        targetSharesValue = this.security.framework.context.portfolio.portfolio_value * this.currentCapitalSharePercent  
        targetSharesTotal = int(math.copysign(math.floor(abs(targetSharesValue / estimatedSharePrice)),targetSharesValue))  
        targetSharesDelta = targetSharesTotal - this.currentShares

        if targetSharesTotal != 0:  
            if abs(targetSharesDelta / (targetSharesTotal * 1.0)) &lt; rebalanceThreshholdPercent:  
                logger.debug(&quot;{0} ORDER SKIPPED! {1} (change to small) : {2} + {3} =&gt; {4} shares&quot;.format(this.strategyName,this.security.symbol, this.currentShares, targetSharesDelta, targetSharesTotal))  
                #our position change was too small so we skip rebalancing  
                return

        #calc stoplimit, if any  
        if stopLimitPercent == 0.0:  
            stopLimitPrice = None  
        else:  
            stopLimitPrice = estimatedSharePrice + (estimatedSharePrice * -stopLimitPercent if targetSharesTotal &gt; 0 else estimatedSharePrice * stopLimitPercent)

        #do actual order  
        if(abs(targetSharesDelta) &gt;= 1): #can not perform an order on less than 1 share  
            this.security.framework.logger.info(&quot;{0} order {1} : {2} + {3} =&gt; {4} shares&quot;.format(this.strategyName,this.security.symbol, this.currentShares, targetSharesDelta, targetSharesTotal))  
            this.lastOrderId = this.security.framework.tradingAlgorithm.order(this.security.sid,targetSharesDelta,None,stopLimitPrice)  
            this.currentShares = targetSharesTotal  
</code></pre>

<p>You&#39;ll have to replug it into whatever code you are using, but feel free to use this as a reference.</p>

<p>FYI to check the &#39;pure&#39; revision potential of this, I added some code to do shorts in addition to longs, though the results are not promising (i run my tests from 2012 to present)</p>

<pre><code>long_pos = this.simplex_projection(b);  
short_pos = -this.simplex_projection(-b);  
return (long_pos + short_pos)/2.0;  
</code></pre>

<p>Another FYI:  I have been trying to use median of intraday closes over the last 6 days and that gives pretty similar results to the L1Median.   Though the more I try to &quot;optimize&quot; this the worse my results get :(  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5362249ec8070aad4d000186' id='5362249ec8070aad4d000186'>
<a href='#5362249ec8070aad4d000186'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/530006e439185472f8000032'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/d244c2261df57fa9c6229c306eb91fb7?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/530006e439185472f8000032'>Novice TAI</a>
</div>
<a UTCms='1398940832000' class='quanto-date posted-at response-posted-at' href='#5362249ec8070aad4d000186'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>FYI, here attached backtest for Vanguard ETF portfolio and putting a lower limit on the number of shares to be purchased when re-balancing.</p>

<p>commission and slippage mode as following:<br>
    set_commission(commission.PerShare(cost=0.013, min_trade_cost=1.3))<br>
    set_slippage(TradeAtTheOpenSlippageModel(0.1))  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5362f3d4e618b6955900005c' id='5362f3d4e618b6955900005c'>
<a href='#5362f3d4e618b6955900005c'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/530db036ff0da19ab9000253'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/4b4da70bef68f9e309c46e2661d4eeb8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/530db036ff0da19ab9000253'>Jason Swearingen</a>
</div>
<a UTCms='1398993879000' class='quanto-date posted-at response-posted-at' href='#5362f3d4e618b6955900005c'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>To determine the raw predictive power of these mean revisions, I&#39;m trying to do 50% long, 50% short, using the code I described earlier.</p>

<pre><code>long_pos = this.simplex_projection(b);  
short_pos = -this.simplex_projection(-b);  
return (long_pos + short_pos)/2.0;  
</code></pre>

<p>So far, not much luck, it&#39;s always just a random walk around 0%.  Any thoughts on how I might improve this?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5363884ce46dd9854f0000dc' id='5363884ce46dd9854f0000dc'>
<a href='#5363884ce46dd9854f0000dc'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1399031886000' class='quanto-date posted-at response-posted-at' href='#5363884ce46dd9854f0000dc'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Jason,</p>

<p>Not sure.  It seems like the problem could be formulated in a symmetric fashion, as you suggest, so that both long and short positions could be considered.  I&#39;ll have to think about that one.</p>

<p>Grant  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='56045bb99aa9c6a39800081b' id='56045bb99aa9c6a39800081b'>
<a href='#56045bb99aa9c6a39800081b'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/55fb3041a444351cb90001e6'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/cb644f184e5abdcdeaefc10a1b0b7a84?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/55fb3041a444351cb90001e6'>John Wang</a>
</div>
<a UTCms='1443126205000' class='quanto-date posted-at response-posted-at' href='#56045bb99aa9c6a39800081b'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I cloned the code for this strategy, and back tested it with recent data. It showed that the performance of the strategy lags the benchmark a lot since August, 2014, -21% vs. 2.5% during 8/1/2014 - 9/23/2015, and Sharpe Ratio -0.99. This is horrible performance. Does this strategy really work at all? </p>

<p>Also, for most dates, the strategy only holds one or two ETF&#39;s. And we know holding XLE (energy) really hurt performance since the last year. The strategy holds XLE as only position for many dates.</p>

<p>Thank you all for coding it up.  </p>
</div>
</div>
</div>

</div>
<div class='sign-in-please'>
Please <a href='/signin?return_to=/posts/collab-request-on-robust-median-reversion-strategy'>sign in</a> or
<a href='/users/sign_up?redirect_to=/posts/collab-request-on-robust-median-reversion-strategy'>join Quantopian</a> to
post a reply.
</div>
</div>
<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
  window.fbAsyncInit = function() {
    FB.init({
      appId: "550580758292093",
      status: false,
      cookie: true,
      xfbml: true
    });
  };
  
  (function(d, debug){
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) {return;}
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
    ref.parentNode.insertBefore(js, ref);
  }(document, /*debug*/ false));
  
  window.twttr = (function (d,s,id) {
    var t, js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return; js=d.createElement(s); js.id=id;
    js.src="//platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs);
    return window.twttr || (t = { _e: [], ready: function(f){ t._e.push(f) } });
  }(document, "script", "twitter-wjs"));
</script>
<script>
  $(document).ready(function () {
    quanto.instances.pm = new quanto.PostManager(false)
  });
</script>

<div class='login-footer'>
<div class='container'>
<div class='login-footer-text'>
Become an expert in quant finance through Quantopian's hands-on education.
</div>
<div class='login-footer-button'>
<button class='btn btn-v2 stroke join-modal-link mixpanel-button' data-event='anon join footer click posts' data-mixpanel='click'>
Join Now
</button>
</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='error-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'>Error</span>
</div>
<div class='modal-body body-content'>
<p>Sorry, something went wrong.  Try again or contact us by <a class='feedback-link'>sending feedback</a>.</p>
</div>
<div class='modal-footer'>
<button class='btn btn-v2 blue action-button' data-dismiss='modal' href='#'>Close</button>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='confirmation-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'></span>
</div>
<div class='modal-body body-content'></div>
<div class='modal-footer'>
<div class='pull-right'>
<button class='btn btn-v2 border' data-dismiss='modal'>Cancel</button>
<button class='btn btn-v2 blue action-button' data-dismiss='modal'></button>
</div>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='message-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'></span>
</div>
<div class='modal-body body-content'></div>
<div class='modal-footer'>
<button class='btn btn-v2 blue action-button' data-dismiss='modal' id='message-modal-close'>Close</button>
</div>

</div>
</div>
</div>

<div class='always-bootstrap3-modals'>
<div class='fade modal quanto-modal-v2' id='join-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header visible-small'>
<span class='title'>
Join Quantopian.  It's Free!
</span>
<div class='modal-x-out visible-xs'></div>
</div>
<div class='modal-body'>
<div class='flex-wrap'>
<div class='join-left-pane hidden-small'>
<div class='margin_30l'>
<div class='join-hero-text'>
Join Quantopian.  It's Free!
</div>
<div class='join-benefits'>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image code'></div>
</div>
<div class='join-text'>
Use our research platform, backtester, and dozens of clean data sets.
</div>
</div>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image learn'></div>
</div>
<div class='join-text'>
Learn with our hands-on education and community forums.
</div>
</div>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image win'></div>
</div>
<div class='join-text'>
Enter to win cash prizes in our contest.
</div>
</div>
</div>
<div class='hidden saved-reminder'>
Don't worry, all your work is already saved.
</div>
</div>
</div>
<div class='join-right-pane'>
<div class='hidden-small'>
<div class='button-pane'>
<a class="button btn-v2 user-form-btn" href="/signin">Already a Quantopian member?</a>
</div>
</div>
<div class='visible-small'>
<div class='already-member'>
<a href='/signin'>Already a Quantopian member?</a>
</div>
</div>
<form class="quanto-form-v2" id="new-user-modal-form" action="/users" accept-charset="UTF-8" data-remote="true" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><div class='error-message hidden'>
<div class='message'></div>
</div>
<div class='name-group'>
<div class='form-group inline-block'>
<label for="user_firstname">First Name</label>
<input class="form-control firstname" pattern=".*" required="required" autocomplete="off" autofocus="autofocus" type="text" name="user[firstname]" id="user_firstname" />
</div>
<div class='form-group inline-block'>
<label for="user_lastname">Last Name</label>
<input class="form-control" value="" pattern=".*" required="required" autocomplete="off" type="text" name="user[lastname]" id="user_lastname" />
</div>
</div>
<div class='form-group'>
<label for="user_email">Email</label>
<input class="form-control" value="" pattern=".*" required="required" autocomplete="off" type="email" name="user[email]" id="user_email" />
</div>
<div class='form-group'>
<label for="user_password">Password</label>
<input autocomplete="off" class="form-control" pattern=".*" required="required" type="password" name="user[password]" id="user_password" />
</div>
<div class='checkbox eula'>
<input id='eula-checkbox' type='checkbox'>
<div class='quanto-checkbox'></div>
<label for='eula-checkbox' id='checkbox-label'>I accept the <a href='/policies/terms' target='_blank'>Terms Of Use</a> and <a href='/policies/privacy' target='_blank'>Privacy Policy</a>.</label>
</div>
<div class='checkbox mailchimp-box'>
<input name="user[allow_marketing_emails]" type="hidden" value="0" /><input type="checkbox" value="1" name="user[allow_marketing_emails]" id="user_allow_marketing_emails" />
<div class='quanto-checkbox'></div>
<label for='user_allow_marketing_emails'>
Send me email updates with the latest news from the Quantopian community. We send these emails about once a month.
</label>
</div>
<div class='button-row'>
<button class='btn-v2 blue full' data-redirect-to='/tutorials/getting-started' id='sign-up-button' type='Submit'>Join Quantopian</button>
</div>
</form></div>
</div>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='feedback-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title'>Contact Support</span>
</div>
<div class='modal-body'>
<form class='anon-user controls quanto-form-v2' id='feedback-form'>
<div class='feedback-inputs'>
<div class='form-group'>
<input autofocus class='form-control' id='feedback-email-box' name='email' placeholder='Email Address' type='email'>
</div>
<div class='form-group'>
<input class='form-control' id='feedback-name-box' placeholder='Name' type='name'>
</div>
<div class='form-group'>
<textarea class='form-control' id='feedback-box' name='feedback' placeholder='What may we help you with?' rows='10'></textarea>
</div>
</div>
</form>
<form class='hidden quanto-form-v2 select-resource-area'>
<div class='select-step select-type-step'>
<div class='form-group'>
<select class='form-control select-resource-dropdown' title='Select the item you need help with'>
<option value='algorithm'>Algorithm</option>
<option value='backtest'>Backtest</option>
<option value='notebook'>Notebook</option>
</select>
</div>
</div>
<div class='select-step loading-area hidden'>
<div class='loading-text'>
Loading...
</div>
</div>
<div class='select-step empty-list-area hidden'>
<div class='back-button'>Go Back</div>
<div class='empty-text'>
No <span class='empty-list-resource-text'>algorithms</span> found
</div>
</div>
<div class='select-algo-area select-step hidden'>
<div class='back-button'>Go Back</div>
<table class='select-algo-table select-item-table'>
<thead>
<tr>
<th>
Algorithm
<span class='sort-icon'></span>
</th>
<th>
Last Modified
<span class='sort-icon'></span>
</th>
</tr>
</thead>
</table>
</div>
<div class='select-backtest-area select-step hidden'>
<div class='back-button'>Go Back</div>
<table class='select-backtest-table select-item-table'>
<thead>
<tr>
<th>
Backtest
<span class='sort-icon'></span>
</th>
<th>
Started At
<span class='sort-icon'></span>
</th>
<th>
Overall Return
<span class='sort-icon'></span>
</th>
<th>
Status
<span class='sort-icon'></span>
</th>
</tr>
</thead>
</table>
</div>
<div class='select-notebook-area select-step hidden'>
<div class='back-button'>Go Back</div>
<div class='subtitle select-cell-step'>
Choose a cell to use as the preview for this notebook:
</div>
<div class='iframe-wrapper'>
<iframe class='notebook-list-iframe slow-fade' src=''></iframe>
</div>
<div class='progress-area slow-fade in'>
<div class='progress-container'>
<div class='progress-title'>
<div class='quanto-loader gray'></div>
</div>
</div>
</div>
<div class='maintenance-area'>
<div class='error-container'>
<div class='row'>
<div class='col-md-14 msg-title h1'>
Sorry, research is currently undergoing maintenance.
</div>
</div>
<div class='row'>
<div class='col-md-14 msg-subtitle'>
Please check back shortly. If the maintenance period lasts longer than expected,
you can find updates on <a href='https://status.quantopian.com/'>status.quantopian.com</a>.
</div>
</div>

</div>
</div>
<div class='error-area'>
<div class='error-container'>
<div class='row'>
<div class='col-md-14 msg-title h1'>
Sorry, something went wrong on our end.
</div>
</div>
<div class='row'>
<div class='col-md-14 msg-subtitle'>
Please try again or contact <a class='open-feedback-link'>Quantopian support</a>.
</div>
</div>

</div>
</div>

</div>
<div class='selected-item-area select-step hidden'>
<div class='selected-item-group form-group'>
<div class='selected-item-control'>
<input class='disabled form-control selected-item-box' type='text'>
<span class='secure-icon icon'></span>
<button class='btn change change-primary-item-button change-selection-button new-btn transparent' type='button'>
<span class='refresh-icon icon'></span>
</button>
</div>
<div class='selected-backtest-control'>
<input class='disabled form-control selected-backtest-box' type='text'>
<span class='secure-icon icon'></span>
<button class='btn change-backtest-button change-selection-button new-btn transparent' type='button'>
<span class='refresh-icon icon'></span>
</button>
</div>
</div>
<div class='checkbox-group form-group'>
<div class='checkbox give-permission'>
<input class='give-permission-checkbox' id='feedback-give-permission-checkbox' type='checkbox'>
<div class='quanto-checkbox'></div>
<label for='feedback-give-permission-checkbox'>
I permit Quantopian to view <span class='item-type-text'>this algorithm,
backtest or notebook and their imported datasets</span> for the purpose of providing support.
</label>
</div>
</div>
</div>
</form>

<div class='loading-step hidden'>
<div class='loading-text'>
Submitting your support ticket...
</div>
</div>
<div class='success-step invisible'>
<h2 class='title center'>
You've successfully submitted a support ticket.
</h2>
<p>
Our support team will be in touch soon.
</p>
<div class='confirmation-image'></div>
</div>
</div>
<div class='modal-footer'>
<button class='btn-v2 blue' id='send-feedback-button'>Send</button>
<div class='error-message hidden'>
Error submitting support request.
</div>
</div>

</div>
</div>
</div>

</div>
</div>
<div class='footer' id='quanto-footer-container'>
<div class='container'>
<div class='row header-row'>
<div class='col-sm-fourth span3'>
<img class='async-image logotype-image' data-src='https://qf.quantopian.com/assets/logos/logo-q-full-b23bda5ac757691b9259d396d0dfef91567165868b8c955a836649686e6d2248.svg'>
</div>
<div class='col-sm-fourth span3'></div>
<div class='col-sm-fourth span3'></div>
<div class='col-sm-fourth span3'>
<div class='feedback-email'>
Need help?
<a href="/cdn-cgi/l/email-protection#721417171610131119320307131c061d021b131c5c111d1f">Contact support.</a>
</div>
</div>
</div>
<div class='row'>
<div class='col-sm-fourth span3'>
<div class='header'>Company</div>
<div class='footer-row'>
<a href='/about'>About</a>
</div>
<div class='footer-row'>
<a href='/academia'>Academia</a>
</div>
<div class='footer-row'>
<a href='/jobs'>Careers</a>
</div>
<div class='footer-row'>
<a href='/posts'>Community</a>
</div>
<div class='footer-row'>
<a href='/events'>Events</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Learn &amp; Support</div>
<div class='footer-row'>
<a href='/faq'>FAQ</a>
</div>
<div class='footer-row'>
<a href='/tutorials/getting-started'>Getting Started</a>
</div>
<div class='footer-row'>
<a href='/docs'>Documentation</a>
</div>
<div class='footer-row'>
<a href='/tutorials'>Tutorials</a>
</div>
<div class='footer-row'>
<a href='/lectures'>Lectures</a>
</div>
<div class='footer-row'>
<a href='/opensource'>Open Source</a>
</div>
<div class='footer-row'>
<a href='https://status.quantopian.com/'>Site Status</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Notices</div>
<div class='footer-row'>
<a href='/policies/terms'>Terms of Use</a>
</div>
<div class='footer-row'>
<a href='/policies/privacy'>Privacy Policy</a>
</div>
<div class='footer-row'>
<a href='/security'>Security</a>
</div>
<div class='footer-row'>
<a href='/policies/code-of-conduct'>Code of Conduct</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Follow Us</div>
<div class='footer-row'>
<a href='https://www.twitter.com/quantopian'>Twitter</a>
</div>
<div class='footer-row'>
<a href='https://www.facebook.com/quantopian'>Facebook</a>
</div>
<div class='footer-row'>
<a href='https://www.linkedin.com/company/quantopian'>LinkedIn</a>
</div>
<div class='footer-row'>
<a href='https://www.youtube.com/channel/UC606MUq45P3zFLa4VGKbxsg'>YouTube</a>
</div>
</div>
</div>
<div class='row'>
<div class='col-xs-14 span12'>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian.
</p>
<p>
In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>

</div>
</div>
</div>
</div>
</div>
<div class='mobile-footer'>
<div class='mobile-nav-category main-links'>
<div class='mobile-nav-row-footer'>
<a href='/about'>About Quantopian</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/jobs'>Careers</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/posts'>Community</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/events'>Events</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/docs'>Documentation</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/academia'>Academia</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/lectures'>Lectures</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://status.quantopian.com/'>Status</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.facebook.com/quantopian'>Facebook</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.twitter.com/quantopian'>Twitter</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.linkedin.com/company/quantopian'>LinkedIn</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.youtube.com/channel/UC606MUq45P3zFLa4VGKbxsg'>YouTube</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/policies/terms'>Terms of Use</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/policies/privacy'>Privacy Policy</a>
</div>
</div>
<div class='mobile-nav-category'>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian.
</p>
<p>
In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>

</div>
</div>
</div>

</div>
<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script></body>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', "UA-8519877-1", {
    cookieDomain: "quantopian.com"
  });
  ga('set', 'dimension1', 'session_5f9dc7425d387f00077e48e4');
  
  ga('send', 'pageview');
</script>

<input type="hidden" name="is_mac" id="is_mac" value="false" />
<input type="hidden" name="mp" id="mp" value="75873953cd404bcc1da88a55ff51e3b4" />
<script>
  (function(e,a){if(!a.__SV){var b=window;try{var c,l,i,j=b.location,g=j.hash;c=function(a,b){return(l=a.match(RegExp(b+"=([^&]*)")))?l[1]:null};g&&c(g,"state")&&(i=JSON.parse(decodeURIComponent(c(g,"state"))),"mpeditor"===i.action&&(b.sessionStorage.setItem("_mpcehash",g),history.replaceState(i.desiredHash||"",e.title,j.pathname+j.search)))}catch(m){}var k,h;window.mixpanel=a;a._i=[];a.init=function(b,c,f){function e(b,a){var c=a.split(".");2==c.length&&(b=b[c[0]],a=c[1]);b[a]=function(){b.push([a].concat(Array.prototype.slice.call(arguments,
  0)))}}var d=a;"undefined"!==typeof f?d=a[f]=[]:f="mixpanel";d.people=d.people||[];d.toString=function(b){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);b||(a+=" (stub)");return a};d.people.toString=function(){return d.toString(1)+".people (stub)"};k="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
  for(h=0;h<k.length;h++)e(d,k[h]);a._i.push([b,c,f])};a.__SV=1.2;b=e.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";c=e.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}})(document,window.mixpanel||[]);
  mixpanel.init("75873953cd404bcc1da88a55ff51e3b4");
</script>
<script>
  mixpanel.track("view page", {"page": window.location.pathname});
</script>
</html>
