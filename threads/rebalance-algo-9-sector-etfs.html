<!DOCTYPE html>
<html>
<head>
<link href='i1.wp.com' rel='dns-prefetch'>
<link href='i2.wp.com' rel='dns-prefetch'>
<link href='i3.wp.com' rel='dns-prefetch'>
<meta content='2HgX9mcLHaPOX6sfaaAkhWtblhEB9yUNw4l6l46e1k4' name='google-site-verification'>
<link rel="shortcut icon" type="image/x-icon" href="external/favicon-q-ac1a76f2c200e9026b5b1147519bb4fab6256910588b831e2411bc6c7c1218c3.png" />
<title>
Rebalance Algo: 9 Sector ETFs
</title>
<meta content='This is a refined version of the algorithm that Quantopian has been using with real money since January.The algorithm invests in each of the nine Select Sector SPDR exchange-traded funds (ETFs).  The target is equal weight of each sector.  The resulting portfolio delivers exposure to every sector of the US stock market and can be characterized as a long-only, large-cap, equity market diversified portfolio. This version of the algorithm automatically rebalances your holdings every 7 calendar...' name='description'>
<link rel="stylesheet" media="all" href="external/quanto-base-bundle-e8eb6050172aa0d24124d5c24bac90b2cccd88b5b9c7742026c0e9efab038c6e.css" />
<link rel="stylesheet" media="all" href="external/quanto-posts-bundle-aab01368d3f82d8dafc94ee9eabb82e77dc8c9fbbffa952fdcdc744dfa523cf3.css" />
<script src="external/quanto_global-057218867db29d5768131af5d6fb3476cef098e7d9e655108befb903c7ee985e.js"></script>
<script src="external/posts_bundle-3dfd82fa469c393d752e461d837aec9e4e364ae39f49198e34a6626f2180fdf7.js"></script>
<link href='external/logo-q-180x180-0f5a6a439c99203ed4aea6f656e7604c543d287be43d8b17c7591c1131f09a59.png' rel='apple-touch-icon'>
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="Z1vkpmsEShHd1Se0idYaQEUCS1TqQOA5Ivvgv0DFghQbPZLryfKY8mTIfoXGObI0fYxoPZCM9SKg9DvV6oDgrw==" />
<meta content='width=device-width, initial-scale=1.0' name='viewport'>
<script>
//<![CDATA[
window.quanto_data={};quanto_data.bounce_back_params={"show_modal":null,"feedback_text":null};quanto_data.namespace="public";quanto_data.talib_info={"ADOSC":["Chaikin A/D Oscillator (Volume Indicators)",["fastperiod","3"],["slowperiod","10"]],"ADX":["Average Directional Movement Index (Momentum Indicators)",["timeperiod","14"]],"ADXR":["Average Directional Movement Index Rating (Momentum Indicators)",["timeperiod","14"]],"APO":["Absolute Price Oscillator (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["matype","0"]],"AROON":["Aroon (Momentum Indicators)",["timeperiod","14"]],"AROONOSC":["Aroon Oscillator (Momentum Indicators)",["timeperiod","14"]],"ATR":["Average True Range (Volatility Indicators)",["timeperiod","14"]],"BBANDS":["Bollinger Bands (Overlap Studies)",["timeperiod","5"],["nbdevup","2"],["nbdevdn","2"],["matype","0"]],"BETA":["Beta (Statistic Functions)",["timeperiod","5"]],"CCI":["Commodity Channel Index (Momentum Indicators)",["timeperiod","14"]],"CMO":["Chande Momentum Oscillator (Momentum Indicators)",["timeperiod","14"]],"CORREL":["Pearson's Correlation Coefficient (r) (Statistic Functions)",["timeperiod","30"]],"DEMA":["Double Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"DX":["Average Directional Movement Index (Momentum Indicators)",["timeperiod","14"]],"EMA":["Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"KAMA":["Kaufman Adaptive Moving Average (Overlap Studies)",["timeperiod","30"]],"LINEARREG":["Linear Regression (Statistic Functions)",["timeperiod","14"]],"LINEARREG_ANGLE":["Linear Regression Angle (Statistic Functions)",["timeperiod","14"]],"LINEARREG_INTERCEPT":["Linear Regression Intercept (Statistic Functions)",["timeperiod","14"]],"LINEARREG_SLOPE":["Linear Regression Slope (Statistic Functions)",["timeperiod","14"]],"MA":["Moving average (Overlap Studies)",["timeperiod","30"],["matype","0"]],"MACD":["Moving Average Convergence/Divergence (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["signalperiod","9"]],"MACDEXT":["MACD with controllable MA type (Momentum Indicators)",["fastperiod","12"],["fastmatype","0"],["slowperiod","26"],["slowmatype","0"],["signalperiod","9"],["signalmatype","0"]],"MACDFIX":["Moving Average Convergence/Divergence Fix 12/26 (Momentum Indicators)",["signalperiod","9"]],"MAX":["Highest values over a specified period (Math Operators)",["timeperiod","30"]],"MAXINDEX":["Index of highest value over a specified period (Math Operators)",["timeperiod","30"]],"MFI":["Money Flow Index (Momentum Indicators)",["timeperiod","14"]],"MIDPOINT":["Midpoint over period (Overlap Studies)",["timeperiod","14"]],"MIDPRICE":["Midpoint Price over period (Overlap Studies)",["timeperiod","14"]],"MIN":["Lowest value over a specified period (Math Operators)",["timeperiod","30"]],"MININDEX":["Index of lowest value over a specified period (Math Operators)",["timeperiod","30"]],"MINMAX":["Lowest and highest values over a specified period (Math Operators)",["timeperiod","30"]],"MINMAXINDEX":["Indexes of lowest and highest values over a specified period (Math Operators)",["timeperiod","30"]],"MINUS_DI":["Minus Directional Indicator (Momentum Indicators)",["timeperiod","14"]],"MINUS_DM":["Minus Directional Movement (Momentum Indicators)",["timeperiod","14"]],"MOM":["Momentum (Momentum Indicators)",["timeperiod","10"]],"NATR":["Normalized Average True Range (Volatility Indicators)",["timeperiod","14"]],"PLUS_DI":["Plus Directional Indicator (Momentum Indicators)",["timeperiod","14"]],"PLUS_DM":["Plus Directional Movement (Momentum Indicators)",["timeperiod","14"]],"PPO":["Percentage Price Oscillator (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["matype","0"]],"ROC":["Rate of change: ((price/prevPrice)-1)*100 (Momentum Indicators)",["timeperiod","10"]],"ROCP":["Rate of change Percentage: (price-prevPrice)/prevPrice (Momentum Indicators)",["timeperiod","10"]],"ROCR":["Rate of change ratio: (price/prevPrice) (Momentum Indicators)",["timeperiod","10"]],"ROCR100":["Rate of change ratio 100 scale: (price/prevPrice)*100 (Momentum Indicators)",["timeperiod","10"]],"RSI":["Relative Strength Index (Momentum Indicators)",["timeperiod","14"]],"SMA":["Simple Moving Average (Overlap Studies)",["timeperiod","30"]],"STDDEV":["Standard Deviation (Statistic Functions)",["timeperiod","5"],["nbdev","1"]],"STOCH":["Stochastic (Momentum Indicators)",["fastk_period","5"],["slowk_period","3"],["slowk_matype","0"],["slowd_period","3"],["slowd_matype","0"]],"STOCHF":["Stochastic Fast (Momentum Indicators)",["fastk_period","5"],["fastd_period","3"],["fastd_matype","0"]],"STOCHRSI":["Stochastic Relative Strength Index (Momentum Indicators)",["timeperiod","14"],["fastk_period","5"],["fastd_period","3"],["fastd_matype","0"]],"T3":["Triple Exponential Moving Average (T3) (Overlap Studies)",["timeperiod","5"],["vfactor","0.7"]],"TEMA":["Triple Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"TRIMA":["Triangular Moving Average (Overlap Studies)",["timeperiod","30"]],"TRIX":["1-day Rate-Of-Change (ROC) of a Triple Smooth EMA (Momentum Indicators)",["timeperiod","30"]],"TSF":["Time Series Forecast (Statistic Functions)",["timeperiod","14"]],"ULTOSC":["Ultimate Oscillator (Momentum Indicators)",["timeperiod1","7"],["timeperiod2","14"],["timeperiod3","28"]],"VAR":["Variance (Statistic Functions)",["timeperiod","5"],["nbdev","1"]],"WILLR":["Williams' %R (Momentum Indicators)",["timeperiod","14"]],"WMA":["Weighted Moving Average (Overlap Studies)",["timeperiod","30"]]};quanto_data.nb_preview_url="https://notebooks-preview.prd.pub.quantopian.com";quanto_data.delay_nb_preview_load=false;
//]]>
</script>
<meta content='https://www.quantopian.com/posts/rebalance-algo-9-sector-etfs' property='og:url'>
<meta content='Rebalance Algo: 9 Sector ETFs' property='og:title'>

<input type="hidden" name="env" id="quanto-env" value="production" />
<meta content='550580758292093' property='fb:app_id'>
<meta content='https://www.quantopian.com/posts/rebalance-algo-9-sector-etfs' property='og:url'>
<meta content='https://media.quantopian.com/public/og-image-default.png' property='og:image'>
<meta content='Rebalance Algo: 9 Sector ETFs' property='og:title'>
<meta content='This is a refined version of the algorithm that Quantopian has been using with real money since January.The algorithm invests in each of the nine Select Sector SPDR exchange-traded funds (ETFs).  The target is equal weight of each sector.  The resulting portfolio delivers exposure to every sector of the US stock market and can be characterized as a long-only, large-cap, equity market diversified portfolio. This version of the algorithm automatically rebalances your holdings every 7 calendar...' property='og:description'>
</head>
<script type='application/ld+json'>
  {
    "@context": "http://schema.org",
    "@type": "Organization",
    "url": "https://www.quantopian.com",
    "logo": "https://media.quantopian.com/logos/logo-q-press-red.png"
  }
</script>
<body class='' ontouchstart=''>
<div id='fb-root'></div>
<div class='wrapper'>
<div class='alert-v2 error'>
<div class='message'>
Quantopian's community platform is shutting down. Please read <a href="/posts/quantopians-community-services-are-closing">this post</a> for more information and <a href='/account#account'>download your code</a>.
</div>
</div>
<div class='navbar navbar-default navbar-static-top' id='app-navbar'>
<div class='container-fluid'>
<div class='navbar-header'>
<button class='navbar-toggle collapsed' data-target='#app-navbar-collapse' data-toggle='collapse'>
<span class='icon hamburger-menu'></span>
</button>
<a class='navbar-brand' href='/home'>
<img class='logo-image async-image' data-src='external/logo-q-white-b141ea6018546e5a4ecc3d10d8440ec076fc4385764e948b322828cc70950a76.svg'>
</a>
</div>
<div class='collapse navbar-collapse' id='app-navbar-collapse'>
<ul class='nav navbar-nav navbar-right'>
<li class='dropdown quanto-dropdown-new'>
<li>
<a class='header' href='/docs'>
Documentation
</a>
</li>
<li class='dropdown quanto-dropdown-new'>
<a class='header' data-toggle='dropdown' href='#'>
Learn
</a>
<ul class='dropdown-menu'>
<li>
<a class='mixpanel-button' data-event='main nav getting started clicked' href='/tutorials/getting-started'>Getting Started</a>
</li>
<li>
<a class='mixpanel-button' data-event='main nav tutorials clicked' href='/tutorials'>Tutorials</a>
</li>
<li>
<a class='mixpanel-button' data-event='main nav lectures clicked' href='/lectures'>Lectures</a>
</li>
</ul>
</li>
<li>
<a class='header' href='/posts' id='forum-link'>
Forum
</a>
</li>
<li>
<a class="header" href="/signin?return_to=/posts/rebalance-algo-9-sector-etfs">Log In</a>
</li>
</li>

</ul>
</div>
</div>
</div>
<script>
  $(document).ready(function () {
    quanto.instances.fm = new quanto.FeedbackManager();
    quanto.instances.hm = new quanto.headerManager();
  })
</script>


<div class='content content-area new-style'>
<input type="hidden" name="page-id" id="page-id" value="postatomic" />
<script src="external/MathJax.js?config=TeX-AMS_HTML-full.js,Safe" async="async"></script>
<div class='container page-container post-atomic'>
<input id='parent-post-id-val' type='hidden' value='5344bd7bb9fe2ac6470000ad'>
<div class='post-container' data-post-id='5344bd7bb9fe2ac6470000ad' id='5344bd7bb9fe2ac6470000ad'>
<div class='back-button back-to-community'>Back to Community</div>
<div class='post-title'>Rebalance Algo: 9 Sector ETFs</div>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4fe8beb792a029000200000d'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/fe3ffe502559d05f16eb9fe41ab7e9a1?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4fe8beb792a029000200000d'>Dan Dunn</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<span class='posted-at'>posted </span>
<span UTCms='1397013883000' class='quanto-date posted-at'></span>
<div class='pull-right other-actions'>
<div class='dropup inline-block'>
<div class='dropdown share-control other-action-link'>
<div data-toggle='dropdown'>
<div class='share-image'></div>
Share
</div>
<ul class='dropdown-menu share-options-menu'>
<li>
<a class='share-row' href='https://twitter.com/intent/tweet?text=Rebalance Algo: 9 Sector ETFs&amp;url=https%3A%2F%2Fwww.quantopian.com%2Fposts%2Frebalance-algo-9-sector-etfs%3Futm_source%3Dwebsite_share%26utm_campaign%3Drebalance-algo-9-sector-etfs%26utm_medium%3Dtwitter&amp;via=quantopian'>
<i class='icon icon-twitter'></i>
Share on Twitter
</a>
</li>
<li>
<div class='share-row facebook-button'>
<i class='icon icon-facebook'></i>
Share on Facebook
</div>
</li>
<li>
<div class='share-row linkedin-button' data-share-url='https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Fwww.quantopian.com%2Fposts%2Frebalance-algo-9-sector-etfs%3Futm_source%3Dwebsite_share%26utm_campaign%3Drebalance-algo-9-sector-etfs%26utm_medium%3Dlinkedin&amp;title=Rebalance+Algo%3A+9+Sector+ETFs+%28Dan+Dunn%29&amp;source=Quantopian'>
<i class='icon icon-linkedin'></i>
Share on LinkedIn
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>

<input type="hidden" name="social_fb_post_link" id="social_fb_post_link" value="https://www.quantopian.com/posts/rebalance-algo-9-sector-etfs?utm_source=website_share&amp;utm_campaign=rebalance-algo-9-sector-etfs&amp;utm_medium=facebook" />
<input type="hidden" name="social_post_image" id="social_post_image" value="external/logo-q-red-outline.png" />
<input type="hidden" name="social_post_author" id="social_post_author" value="Dan Dunn" />
<div class='body-text'>
<div class='body-text-container post-body'><p>This is a refined version of the algorithm that Quantopian has been using with <a href="http://blog.quantopian.com/real-money/">real money</a> since January.</p>

<p>The algorithm invests in each of the nine Select Sector SPDR exchange-traded funds (ETFs).  The target is equal weight of each sector.  The resulting portfolio delivers exposure to every sector of the US stock market and can be characterized as a long-only, large-cap, equity market diversified portfolio. This version of the algorithm automatically rebalances your holdings every 7 calendar days to maintain equal exposure across all sectors.</p>

<p>To connect it to your own brokerage account:</p>

<ol>
<li>Click the &quot;Clone&quot; button below to make your own copy of the algorithm.<br></li>
<li>Click the &quot;Run a Full Backtest&quot; button to get it ready.<br></li>
<li>Click the &quot;Live Trade Algorithm&quot; to kick off and deploy it to your broker</li>
</ol>

<p>Those are the steps that get you investing using this algorithm.  </p>

<p>(Note that you will need to <a href="https://www.quantopian.com/account?page=trading">add your broker user name</a> if you haven&#39;t already, and you will need to <a href="https://www.quantopian.com/livetrading">apply to the pilot program</a> if you haven&#39;t already)</p>
</div>
</div>
<div class='disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>

</div>

<div class='container page-container post-atomic'>
<div class='section-header reply-header'>
<div class='reply-title'>23 responses</div>
</div>
<div class='replies'>
<div class='post-container response-container' data-post-id='5344dee86378fca0eb000102' id='5344dee86378fca0eb000102'>
<a href='#5344dee86378fca0eb000102'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/530db036ff0da19ab9000253'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/4b4da70bef68f9e309c46e2661d4eeb8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/530db036ff0da19ab9000253'>Jason Swearingen</a>
</div>
<a UTCms='1397022442000' class='quanto-date posted-at response-posted-at' href='#5344dee86378fca0eb000102'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>a simplified version of dans algo, using 2x leverage and rebalancing every 5 days  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5345565471af69a664000170' id='5345565471af69a664000170'>
<a href='#5345565471af69a664000170'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/530006e439185472f8000032'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/d244c2261df57fa9c6229c306eb91fb7?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/530006e439185472f8000032'>Novice TAI</a>
</div>
<a UTCms='1397053014000' class='quanto-date posted-at response-posted-at' href='#5345565471af69a664000170'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Dear sir,</p>

<p>Could give us  a  fixed period and money  investment example that strategy  could let user specify a fixed invest money by each month  period.<br>
example like following: Initial total invest amount $10000 dollar , and then continue invest $5000 dollar for each month  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='53469b0fb3f0036e91000258' id='53469b0fb3f0036e91000258'>
<a href='#53469b0fb3f0036e91000258'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/530006e439185472f8000032'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/d244c2261df57fa9c6229c306eb91fb7?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/530006e439185472f8000032'>Novice TAI</a>
</div>
<a UTCms='1397136145000' class='quanto-date posted-at response-posted-at' href='#53469b0fb3f0036e91000258'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I try to modify the algorithm to do systematic(periodic) investment plan for every 30 days , I using following redeposit code , but this seems not work, could help ?</p>

<pre><code>context.portfolio.cash = context.portfolio.cash + context.reinvest_cash  
</code></pre>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5346fdf5e46b73e0ee000007' id='5346fdf5e46b73e0ee000007'>
<a href='#5346fdf5e46b73e0ee000007'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/50f97faeaa4b3d78fd0000ee'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f18d32ae5bfc439c5b75bfa9f29e953a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/50f97faeaa4b3d78fd0000ee'>Jessica Stauth</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1397161463000' class='quanto-date posted-at response-posted-at' href='#5346fdf5e46b73e0ee000007'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Devon,</p>

<p>Our backtester doesn&#39;t have a great way of simulating in-flows and out-flows currently. Our performance metrics will treat inflows like profits and outflows like losses. </p>

<p>The best example I&#39;ve seen that sort of does what you&#39;re looking for is this algorithm Dan Dunn shared on <a href="https://www.quantopian.com/posts/dollar-value-averaging">Dollar Volume Averaging</a>. Note that it does not address the performance and risk measure issues, but it does let you simulate trading with a growing capital base.</p>

<p>I think supporting a more realistic simulation of an account with in/outflows is a great product suggestion and I&#39;ve added it to our issue queue.</p>

<p>Best, Jess</p>
</div>
<div class='disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='53471e4b96c4b9ba4c00005d' id='53471e4b96c4b9ba4c00005d'>
<a href='#53471e4b96c4b9ba4c00005d'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/52992083db09dabfd70001a5'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3f37a8ac01b8fc3978f0ed6315d57d8c?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/52992083db09dabfd70001a5'>Gili Rosenberg</a>
</div>
<a UTCms='1397169741000' class='quanto-date posted-at response-posted-at' href='#53471e4b96c4b9ba4c00005d'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>This is interesting. I&#39;d like to figure out why this algorithm gives (or appears to give) better returns than S&amp;P 500. Here are a few ideas, which might be misguided or based on wrong information etc, so feel free to correct me if you know better (I&#39;m here to learn, not to beat about the bushes):</p>

<ol>
<li><p>If the transaction costs in the backtest are set too low (underestimated), then one would expect to be able to beat the S&amp;P500, even by tracking the same portfolio, just by rebalancing more often. </p></li>
<li><p>Slippage might be underestimated, and this could be the cause of the additional returns, in other words: if you were to trade this algorithm live, the returns would be diminished from what you see in the backtest. </p></li>
<li><p>(I think this is most likely): The weight when rebalancing this portfolio has been chosen to be equal for each sector. However, the S&amp;P500 is market value weighted. This means that each stock in the list of 500 stocks is weighted based on its value at the time of re-balancing. Presumably this does not give equal weights for each sector? If this is true, then consider that it is possible that one (or more) sectors happened to have higher returns over the past 10 years compared with the others (this is guaranteed to happen). If the weight of this sector was lower in the S&amp;P500 (due to a smaller total market capitalization), then the difference in returns between this algo and the S&amp;P500 could be explained by the additional weight (i.e. holdings) for the sector that happened to do better. If this is true, I think it means that the fact that the algo beats the S&amp;P500 in the backtest does not mean that it would necessarily beat it in all future scenarios. It depends if equal weights of sectors beats market cap weighting, and that could change over the years. Perhaps this could be viewed as an additional risk factor that cannot be seen in this backtest.  </p></li>
</ol>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='534d4348fe97d27e5d00000c' id='534d4348fe97d27e5d00000c'>
<a href='#534d4348fe97d27e5d00000c'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/50f97faeaa4b3d78fd0000ee'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f18d32ae5bfc439c5b75bfa9f29e953a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/50f97faeaa4b3d78fd0000ee'>Jessica Stauth</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1397572426000' class='quanto-date posted-at response-posted-at' href='#534d4348fe97d27e5d00000c'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Gili,</p>

<p>I posted a more in-depth answer just now in a <a href="https://www.quantopian.com/posts/equal-weight-all-sector-strategy-vs-spy">new thread</a>. Short answer is that your #3 is the main driver of outperformance. I&#39;d certainly agree with you that this strategy would not beat the benchmark in &quot;all future scenarios&quot;, but actually I think the equal-weighted strategy has a smaller exposure to a size-based risk factor than the SPY does. That&#39;s a bit of a semantic point perhaps though :)</p>

<p>Best wishes and thanks for the thoughtful question! Jess</p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='534d4de05e3a084363000033' id='534d4de05e3a084363000033'>
<a href='#534d4de05e3a084363000033'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/52992083db09dabfd70001a5'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3f37a8ac01b8fc3978f0ed6315d57d8c?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/52992083db09dabfd70001a5'>Gili Rosenberg</a>
</div>
<a UTCms='1397575137000' class='quanto-date posted-at response-posted-at' href='#534d4de05e3a084363000033'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thanks, Jessica! I read your reply in the other thread. It might be instructive to plot the average return of the overweight sectors vs. the average return of the underweight sectors (as a function of time - daily or minutely). My guess is that you will indeed find that the overweight sectors have a higher return. If so, this is perhaps surprising, since Financials and Technology are in the underweight group, which most people might label is &quot;high return&quot;. However, on the other hand, it could be that over this period the returns for Utilities, Materials and Staples were more stable (as one would expect) than Financials and Technology which most likely also suffered more in the crash. Since the holdings for each sector within S&amp;P500 changes over time, it could also be that different sectors are overweight and underweight at different times. </p>

<p>I also wonder if there are significant periods in the backtest where S&amp;P500 actually had higher returns, and in that case it could be that this is difficult to see due to an initial period with higher returns for the equal weighted strategy.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='534d65b55e3a08f03300005e' id='534d65b55e3a08f03300005e'>
<a href='#534d65b55e3a08f03300005e'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/52992083db09dabfd70001a5'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3f37a8ac01b8fc3978f0ed6315d57d8c?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/52992083db09dabfd70001a5'>Gili Rosenberg</a>
</div>
<a UTCms='1397581239000' class='quanto-date posted-at response-posted-at' href='#534d65b55e3a08f03300005e'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Just to clarify, at each time step, I think one would have to find the market cap percentage for each sector, figure out which are the overweight and underweight sectors (defined as more than 0.5% different from 11%, for example). Then find a separate weighted average for the over and underweighted groups, which are weighted by the difference from 11%. This is complicated by the S&amp;P500&#39;s composition changing over time.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5351b5411c7194b20f000200' id='5351b5411c7194b20f000200'>
<a href='#5351b5411c7194b20f000200'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/513a0a3fe37bcb1dcc0000af'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/ea365f26450471aa7f330798754fd7ca?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/513a0a3fe37bcb1dcc0000af'>Ken Hersey</a>
</div>
<a UTCms='1397863748000' class='quanto-date posted-at response-posted-at' href='#5351b5411c7194b20f000200'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Typo guys - and note to those who have cloned this popular algo:</p>

<pre><code>set_commission(commission.PerTrade(cost=0.03))  
</code></pre>

<p>should be</p>

<pre><code>set_commission(commission.PerShare(cost=0.03))
</code></pre>

<p>If only we could have 3 cents per trade commissions! :) As noted, this does not affect real-time trading, but in backtesting if you rebalance a lot, it is worthy of note.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5352566256183c6f1b00000a' id='5352566256183c6f1b00000a'>
<a href='#5352566256183c6f1b00000a'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/50f97faeaa4b3d78fd0000ee'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f18d32ae5bfc439c5b75bfa9f29e953a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/50f97faeaa4b3d78fd0000ee'>Jessica Stauth</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1397904997000' class='quanto-date posted-at response-posted-at' href='#5352566256183c6f1b00000a'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Ken - thanks for pointing that out. </p>

<p>I think this snuck in because we had the autocomplete set to fill in $0.03 for commissions regardless of whether you chose the PerTrade or PerShare basis - we have since corrected that problem and now autocomplete on PerTrade basis defaults to $1.00.</p>

<p>Since <a href="https://www.interactivebrokers.com/en/index.php?f=commission&amp;p=stocks2">IB&#39;s &#39;flat rate&#39; costs</a> are $1.00 minimum per trade, $0.005 per share thereafter (to a max of 0.5% of the trade value) I think that the $1.00 per trade default is the most realistic option to use unless your strategy will be placing trades of 200 shares or more on a routine basis.  </p>

<p>Best wishes, Jess</p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='53528c8856183c6f1b000071' id='53528c8856183c6f1b000071'>
<a href='#53528c8856183c6f1b000071'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/513a0a3fe37bcb1dcc0000af'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/ea365f26450471aa7f330798754fd7ca?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/513a0a3fe37bcb1dcc0000af'>Ken Hersey</a>
</div>
<a UTCms='1397918858000' class='quanto-date posted-at response-posted-at' href='#53528c8856183c6f1b000071'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I agree, in fact allowing you to specifying both parameters and the function pick the max (what IB does) might not be a bad idea :).  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='53555a04c6aae831820000c1' id='53555a04c6aae831820000c1'>
<a href='#53555a04c6aae831820000c1'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/52992083db09dabfd70001a5'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3f37a8ac01b8fc3978f0ed6315d57d8c?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/52992083db09dabfd70001a5'>Gili Rosenberg</a>
</div>
<a UTCms='1398102534000' class='quanto-date posted-at response-posted-at' href='#53555a04c6aae831820000c1'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Turns out that an equal weighted S&amp;P500 index exists: SPW. It might be worth comparing this algo&#39;s performance to it, as well as ETF&#39;s that track it, such as Guggenheim Equal Weighted S&amp;P500 ETF. Specifically, you&#39;d have to have higher returns than the ETF for it to be worthwhile to algo trade this. The ETF might have an advantage in lower transaction costs, but perhaps with a smaller portfolio one could snatch some deals that the much bigger ETF cannot (but this might be hard).  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='535566e9c6aae831820000de' id='535566e9c6aae831820000de'>
<a href='#535566e9c6aae831820000de'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/511e0644f345f2bfdb000059'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/94e100f64e2d16d34baa8bc91ab7723c?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/511e0644f345f2bfdb000059'>Jay Kumar</a>
</div>
<a UTCms='1398105835000' class='quanto-date posted-at response-posted-at' href='#535566e9c6aae831820000de'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><pre><code>    # If it&#39;s a rebalance day (defined in intialize()) then rebalance:  
    if  context.rebalance_date == None or exchange_time &gt; context.rebalance_date + datetime.timedelta(days=context.Rebalance_Days):  
</code></pre>

<p>Not a big deal but the above line makes the algo weekly reblance to move 1min out every time it rebalances. changing the &quot;&gt;&quot; to &quot;&gt;=&quot; makes sure the rebalance happens on at the same time every week.</p>

<pre><code>    # If it&#39;s a rebalance day (defined in intialize()) then rebalance:  
    if  context.rebalance_date == None or exchange_time &gt;= context.rebalance_date + datetime.timedelta(days=context.Rebalance_Days):  
</code></pre>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5355759423ff57eecd00010e' id='5355759423ff57eecd00010e'>
<a href='#5355759423ff57eecd00010e'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/50f97faeaa4b3d78fd0000ee'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f18d32ae5bfc439c5b75bfa9f29e953a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/50f97faeaa4b3d78fd0000ee'>Jessica Stauth</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1398109590000' class='quanto-date posted-at response-posted-at' href='#5355759423ff57eecd00010e'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Gili,</p>

<p>Now that we have the ability to swap out the default benchmark (SPY) for any security in the universe you can actually run a backtest of this 9 sector equal ETF strategy and look at returns and risk metrics against something like the Guggenheim Equal Weighted S&amp;P500 ETF you mentioned (ticker: RSP). Note: The cumulative performance of the RSP benchmark doesn&#39;t include the 0.4% expense ratio that you&#39;d pay to own that ETF, whereas the algo performance includes $1.00 per trade transaction costs for a fairly aggressive weekly rebalance.</p>

<p>Also, the RSP (or the equal-weighted SP500 index) can have pretty strong sector exposures based on what securities are selected to be included in the SP500 at any given time. So for example if you look at the RSP&#39;s sector exposure right now (see table below) you can see that it is overweight financials and consumer discretionary and underweight utilities, materials, and telecom.</p>

<p><img src="https://dl.dropboxusercontent.com/u/169032081/RSP_exposure.png" alt="RSP sector exposure">  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='5357e4005472ad55dc000076' id='5357e4005472ad55dc000076'>
<a href='#5357e4005472ad55dc000076'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/52992083db09dabfd70001a5'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3f37a8ac01b8fc3978f0ed6315d57d8c?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/52992083db09dabfd70001a5'>Gili Rosenberg</a>
</div>
<a UTCms='1398268940000' class='quanto-date posted-at response-posted-at' href='#5357e4005472ad55dc000076'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Interesting, I didn&#39;t realize that RSP is not actually equal weight in sectors. Presumably it is equal weight within the sectors, otherwise nothing about it would be equal weighted...</p>

<p>It&#39;s nice that we can now benchmark against other indices, stocks, etc, but could this information somehow appear in the plot? (or maybe it does, but I don&#39;t see it?). For example, instead of the word benchmark, it could say SPY or RSP or whatever the benchmark was, or maybe better &quot;Benchmark (SPY)&quot;. Otherwise I don&#39;t see an easy way to see against what asset the algo was benchmarked against. Even in the code it is not that transparent, since if I understand correctly, the only change (for changing the benchmark), is changing the sid in &quot;set_benchmark = sid(24744)&quot;.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5357f22ac17dc723af000016' id='5357f22ac17dc723af000016'>
<a href='#5357f22ac17dc723af000016'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51c391f34e36fe1ef60000e6'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/de7be83429bd3ce068e32a9f8541a6af?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51c391f34e36fe1ef60000e6'>Colin Alexander</a>
</div>
<a UTCms='1398272557000' class='quanto-date posted-at response-posted-at' href='#5357f22ac17dc723af000016'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Ken,</p>

<p>Per your post:<br>
&quot;I agree, in fact allowing you to specifying both parameters and the function pick the max (what IB does) might not be a bad idea :).&quot;</p>

<p>Note that this functionality already exists.  Try the following:<br>
set_commission(commission.PerShare(cost=0.013, min_trade_cost=1.3))</p>

<p>As an aside, note that  <a href="https://www.interactivebrokers.com/en/index.php?f=commission&amp;p=stocks2">IB&#39;s &#39;flat rate&#39; costs</a> are actually $1.30 minimum for US API directed orders (always read the fine print (-;).  Be sure to click on the arrow for Exceptions (API, Global X ETFs, ...) to view the fees for US API Directed Orders.</p>

<p>In addition, the per share cost is $0.013 for transactions with 500 or fewer shares and $0.008 for more than 500 shares.</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='54775aa4cf9853a50c0001dd' id='54775aa4cf9853a50c0001dd'>
<a href='#54775aa4cf9853a50c0001dd'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/545274f0d69c451a230003b2'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/51f11e347b0f030fe9cdef356a928f12?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/545274f0d69c451a230003b2'>Former Member</a>
</div>
<a UTCms='1417108134000' class='quanto-date posted-at response-posted-at' href='#54775aa4cf9853a50c0001dd'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>All.</p>

<p>I&#39;m really taken by the powerful simplicity of this algo. I&#39;ve been modifying and live testing it for some time now. I decided it was time to give back to the community and more importantly get the benefit of your review. The most significant change is probably  the added ability to weight each sector differently. This allows you to take advantage of  short term imbalances among sectors. Doing so also diminishes the mean reversion characteristics of equal sector weighting as noted by Jessica S. in her 4/21/14 post above.</p>

<p>I look forward to your feedback.</p>

<p>Best,<br>
Tom  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='54a8518646e6a51466000350' id='54a8518646e6a51466000350'>
<a href='#54a8518646e6a51466000350'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/53d46cdb75f57a2832005a6b'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/62b39881ee19f936224017339779d9d4?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/53d46cdb75f57a2832005a6b'>Market Tech</a>
</div>
<a UTCms='1420317065000' class='quanto-date posted-at response-posted-at' href='#54a8518646e6a51466000350'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Jessica, Alisa,</p>

<p>Is there an explanation of virtual machine boot resets/restarts/schedules? This is in relation to production preparation of a strategy that may set various state variables during initialization. I read about the system reset on outages in the Help, and the fact that there won&#39;t be a system restart until the next day on an outage event, but what about scheduled down times and restarts?</p>

<p>This applies to the strategy above that the Q is running in production mode as an example. Within this strategy a global state variable &quot;context.rebalance_date = None&quot; is cleared on initialize. As each minute is processed, and the scheduled exchange time finally comes into view a rebalance will occur. If a strategy is restarted then this state variable will be cleared again forcing another rebalance on the next exchange trading window. Restarting this strategy daily would result in a rebalance, daily. (This is obviously not an issue for back test where only one initialize is called.) A rebalance after a reset may not be avoidable, but still, what awareness was considered for this eventuality?</p>

<p>In brief, in production (live trading), when are strategies VM&#39;s reset, or the strategies themselves restarted? And what other conditions or issues should a production system be aware of with regards to trading platform constraints, contingencies and such?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='54b3c153e9c5369ea6000424' id='54b3c153e9c5369ea6000424'>
<a href='#54b3c153e9c5369ea6000424'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5312f7e2efc731bbf20000fe'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/905bb5da397380a6c3fecf3f60c71544?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5312f7e2efc731bbf20000fe'>Paul Perry</a>
</div>
<a UTCms='1421066583000' class='quanto-date posted-at response-posted-at' href='#54b3c153e9c5369ea6000424'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Jessica: you say &quot;The cumulative performance of the RSP benchmark doesn&#39;t include the 0.4% expense ratio that you&#39;d pay to own that ETF&quot; (4-21-14). My understanding is that the expense ratio is not a direct charge to the investor but taken out of net assets and reflected in the lower share price or dividend rate.  So the RSP ETF DOES include the 0.4% expense ratio, and we don&#39;t have to model this expense.  If I am wrong let me know so we can model what would be a substantial additional drag to the portfolio !  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='54b4556728f8e3e74f0000ad' id='54b4556728f8e3e74f0000ad'>
<a href='#54b4556728f8e3e74f0000ad'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/52b9b56c02cabe5dae000143'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e9388ae5102f3b152fa6225f955a29d4?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/52b9b56c02cabe5dae000143'>Alisa Deychman</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1421104490000' class='quanto-date posted-at response-posted-at' href='#54b4556728f8e3e74f0000ad'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Market Tech,</p>

<p>Live trading algorithms are kept logged in every day, and automatically get ready in the morning for the trading day. We run the algorithms on servers through Amazon Web Services, and if one of their servers is scheduled for decommission, we will notify you. We&#39;ll schedule a day after market close to move your algorithm to a new server - which we handle in our back end. </p>

<p>All you need to do is choose which day you want to relogin to your IB algorithm, and login after receiving an automated email from us. It&#39;s easy! </p>

<p>When this happens, your algorithm is not &quot;restarted&quot;, it will pick up from the place it left off. There are a couple rough edges here to be aware of. I would recommend to use <strong>&quot;context&quot;</strong> on your variables to save state. And also avoid hard-coding a specific day or time. What happens if the algorithm got disconnected (server, login, infrastructure issues to name a few options) during the moment it was supposed to execute a trade? Instead, you should use &quot;smart&quot; logic to trade at <strong>or at the next available</strong>  specific date or time. In the example we posted, you can see this on line 59 </p>

<pre><code>exchange_time.hour &lt; context.rebalance_hour_start or exchange_time.hour &gt; context.rebalance_hour_end:  
</code></pre>

<p>And now there&#39;s the new <a href="https://www.quantopian.com/help#ide-schedulefunction">schedule_function</a> which makes it even easier. </p>
</div>
<div class='disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='54b45dba065926c3e90000a6' id='54b45dba065926c3e90000a6'>
<a href='#54b45dba065926c3e90000a6'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/53d46cdb75f57a2832005a6b'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/62b39881ee19f936224017339779d9d4?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/53d46cdb75f57a2832005a6b'>Market Tech</a>
</div>
<a UTCms='1421106621000' class='quanto-date posted-at response-posted-at' href='#54b45dba065926c3e90000a6'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Alisa, thanks for reply.</p>

<p>Is is safe to say then that the Q&#39;s &quot;context&quot; is effectively a state object that is persisted for the life of an algo, after initialization, until at what time a quant is notified that the algo may be moved and restarted?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='54b54d3a065926c3e9000452' id='54b54d3a065926c3e9000452'>
<a href='#54b54d3a065926c3e9000452'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/546bb8c0f3659f707e0005cf'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/73604052d4c7647d323c84e719614536?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/546bb8c0f3659f707e0005cf'>Deleted User</a>
</div>
<a UTCms='1421167933000' class='quanto-date posted-at response-posted-at' href='#54b54d3a065926c3e9000452'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Paul Yes, I believe you are correct.  If you are using the actual ETF, such as RSP, as the benchmark you specify in your backtest then the expense fee is already rolled into the price of the ETF (If I recall how ETF fees work is that a little bit is taken each day of which sums up to the total annual fee over the course of a year).  </p>
</div>
<div class='disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='54b55f03d76665141e00046a' id='54b55f03d76665141e00046a'>
<a href='#54b55f03d76665141e00046a'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/52b9b56c02cabe5dae000143'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e9388ae5102f3b152fa6225f955a29d4?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/52b9b56c02cabe5dae000143'>Alisa Deychman</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1421172488000' class='quanto-date posted-at response-posted-at' href='#54b55f03d76665141e00046a'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Market Tech,  yes that&#39;s exactly right.  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

</div>
<div class='sign-in-please'>
Please <a href='/signin?return_to=/posts/rebalance-algo-9-sector-etfs'>sign in</a> or
<a href='/users/sign_up?redirect_to=/posts/rebalance-algo-9-sector-etfs'>join Quantopian</a> to
post a reply.
</div>
</div>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId: "550580758292093",
      status: false,
      cookie: true,
      xfbml: true
    });
  };
  
  (function(d, debug){
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) {return;}
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
    ref.parentNode.insertBefore(js, ref);
  }(document, /*debug*/ false));
  
  window.twttr = (function (d,s,id) {
    var t, js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return; js=d.createElement(s); js.id=id;
    js.src="//platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs);
    return window.twttr || (t = { _e: [], ready: function(f){ t._e.push(f) } });
  }(document, "script", "twitter-wjs"));
</script>
<script>
  $(document).ready(function () {
    quanto.instances.pm = new quanto.PostManager(false)
  });
</script>

<div class='login-footer'>
<div class='container'>
<div class='login-footer-text'>
Become an expert in quant finance through Quantopian's hands-on education.
</div>
<div class='login-footer-button'>
<button class='btn btn-v2 stroke join-modal-link mixpanel-button' data-event='anon join footer click posts' data-mixpanel='click'>
Join Now
</button>
</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='error-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'>Error</span>
</div>
<div class='modal-body body-content'>
<p>Sorry, something went wrong.  Try again or contact us by <a class='feedback-link'>sending feedback</a>.</p>
</div>
<div class='modal-footer'>
<button class='btn btn-v2 blue action-button' data-dismiss='modal' href='#'>Close</button>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='confirmation-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'></span>
</div>
<div class='modal-body body-content'></div>
<div class='modal-footer'>
<div class='pull-right'>
<button class='btn btn-v2 border' data-dismiss='modal'>Cancel</button>
<button class='btn btn-v2 blue action-button' data-dismiss='modal'></button>
</div>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='message-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'></span>
</div>
<div class='modal-body body-content'></div>
<div class='modal-footer'>
<button class='btn btn-v2 blue action-button' data-dismiss='modal' id='message-modal-close'>Close</button>
</div>

</div>
</div>
</div>

<div class='always-bootstrap3-modals'>
<div class='fade modal quanto-modal-v2' id='join-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header visible-small'>
<span class='title'>
Join Quantopian.  It's Free!
</span>
<div class='modal-x-out visible-xs'></div>
</div>
<div class='modal-body'>
<div class='flex-wrap'>
<div class='join-left-pane hidden-small'>
<div class='margin_30l'>
<div class='join-hero-text'>
Join Quantopian.  It's Free!
</div>
<div class='join-benefits'>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image code'></div>
</div>
<div class='join-text'>
Use our research platform, backtester, and dozens of clean data sets.
</div>
</div>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image learn'></div>
</div>
<div class='join-text'>
Learn with our hands-on education and community forums.
</div>
</div>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image win'></div>
</div>
<div class='join-text'>
Enter to win cash prizes in our contest.
</div>
</div>
</div>
<div class='hidden saved-reminder'>
Don't worry, all your work is already saved.
</div>
</div>
</div>
<div class='join-right-pane'>
<div class='hidden-small'>
<div class='button-pane'>
<a class="button btn-v2 user-form-btn" href="/signin">Already a Quantopian member?</a>
</div>
</div>
<div class='visible-small'>
<div class='already-member'>
<a href='/signin'>Already a Quantopian member?</a>
</div>
</div>
<form class="quanto-form-v2" id="new-user-modal-form" action="/users" accept-charset="UTF-8" data-remote="true" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><div class='error-message hidden'>
<div class='message'></div>
</div>
<div class='name-group'>
<div class='form-group inline-block'>
<label for="user_firstname">First Name</label>
<input class="form-control firstname" pattern=".*" required="required" autocomplete="off" autofocus="autofocus" type="text" name="user[firstname]" id="user_firstname" />
</div>
<div class='form-group inline-block'>
<label for="user_lastname">Last Name</label>
<input class="form-control" value="" pattern=".*" required="required" autocomplete="off" type="text" name="user[lastname]" id="user_lastname" />
</div>
</div>
<div class='form-group'>
<label for="user_email">Email</label>
<input class="form-control" value="" pattern=".*" required="required" autocomplete="off" type="email" name="user[email]" id="user_email" />
</div>
<div class='form-group'>
<label for="user_password">Password</label>
<input autocomplete="off" class="form-control" pattern=".*" required="required" type="password" name="user[password]" id="user_password" />
</div>
<div class='checkbox eula'>
<input id='eula-checkbox' type='checkbox'>
<div class='quanto-checkbox'></div>
<label for='eula-checkbox' id='checkbox-label'>I accept the <a href='/policies/terms' target='_blank'>Terms Of Use</a> and <a href='/policies/privacy' target='_blank'>Privacy Policy</a>.</label>
</div>
<div class='checkbox mailchimp-box'>
<input name="user[allow_marketing_emails]" type="hidden" value="0" /><input type="checkbox" value="1" name="user[allow_marketing_emails]" id="user_allow_marketing_emails" />
<div class='quanto-checkbox'></div>
<label for='user_allow_marketing_emails'>
Send me email updates with the latest news from the Quantopian community. We send these emails about once a month.
</label>
</div>
<div class='button-row'>
<button class='btn-v2 blue full' data-redirect-to='/tutorials/getting-started' id='sign-up-button' type='Submit'>Join Quantopian</button>
</div>
</form></div>
</div>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='feedback-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title'>Contact Support</span>
</div>
<div class='modal-body'>
<form class='anon-user controls quanto-form-v2' id='feedback-form'>
<div class='feedback-inputs'>
<div class='form-group'>
<input autofocus class='form-control' id='feedback-email-box' name='email' placeholder='Email Address' type='email'>
</div>
<div class='form-group'>
<input class='form-control' id='feedback-name-box' placeholder='Name' type='name'>
</div>
<div class='form-group'>
<textarea class='form-control' id='feedback-box' name='feedback' placeholder='What may we help you with?' rows='10'></textarea>
</div>
</div>
</form>
<form class='hidden quanto-form-v2 select-resource-area'>
<div class='select-step select-type-step'>
<div class='form-group'>
<select class='form-control select-resource-dropdown' title='Select the item you need help with'>
<option value='algorithm'>Algorithm</option>
<option value='backtest'>Backtest</option>
<option value='notebook'>Notebook</option>
</select>
</div>
</div>
<div class='select-step loading-area hidden'>
<div class='loading-text'>
Loading...
</div>
</div>
<div class='select-step empty-list-area hidden'>
<div class='back-button'>Go Back</div>
<div class='empty-text'>
No <span class='empty-list-resource-text'>algorithms</span> found
</div>
</div>
<div class='select-algo-area select-step hidden'>
<div class='back-button'>Go Back</div>
<table class='select-algo-table select-item-table'>
<thead>
<tr>
<th>
Algorithm
<span class='sort-icon'></span>
</th>
<th>
Last Modified
<span class='sort-icon'></span>
</th>
</tr>
</thead>
</table>
</div>
<div class='select-backtest-area select-step hidden'>
<div class='back-button'>Go Back</div>
<table class='select-backtest-table select-item-table'>
<thead>
<tr>
<th>
Backtest
<span class='sort-icon'></span>
</th>
<th>
Started At
<span class='sort-icon'></span>
</th>
<th>
Overall Return
<span class='sort-icon'></span>
</th>
<th>
Status
<span class='sort-icon'></span>
</th>
</tr>
</thead>
</table>
</div>
<div class='select-notebook-area select-step hidden'>
<div class='back-button'>Go Back</div>
<div class='subtitle select-cell-step'>
Choose a cell to use as the preview for this notebook:
</div>
<div class='iframe-wrapper'>
<iframe class='notebook-list-iframe slow-fade' src=''></iframe>
</div>
<div class='progress-area slow-fade in'>
<div class='progress-container'>
<div class='progress-title'>
<div class='quanto-loader gray'></div>
</div>
</div>
</div>
<div class='maintenance-area'>
<div class='error-container'>
<div class='row'>
<div class='col-md-14 msg-title h1'>
Sorry, research is currently undergoing maintenance.
</div>
</div>
<div class='row'>
<div class='col-md-14 msg-subtitle'>
Please check back shortly. If the maintenance period lasts longer than expected,
you can find updates on <a href='https://status.quantopian.com/'>status.quantopian.com</a>.
</div>
</div>

</div>
</div>
<div class='error-area'>
<div class='error-container'>
<div class='row'>
<div class='col-md-14 msg-title h1'>
Sorry, something went wrong on our end.
</div>
</div>
<div class='row'>
<div class='col-md-14 msg-subtitle'>
Please try again or contact <a class='open-feedback-link'>Quantopian support</a>.
</div>
</div>

</div>
</div>

</div>
<div class='selected-item-area select-step hidden'>
<div class='selected-item-group form-group'>
<div class='selected-item-control'>
<input class='disabled form-control selected-item-box' type='text'>
<span class='secure-icon icon'></span>
<button class='btn change change-primary-item-button change-selection-button new-btn transparent' type='button'>
<span class='refresh-icon icon'></span>
</button>
</div>
<div class='selected-backtest-control'>
<input class='disabled form-control selected-backtest-box' type='text'>
<span class='secure-icon icon'></span>
<button class='btn change-backtest-button change-selection-button new-btn transparent' type='button'>
<span class='refresh-icon icon'></span>
</button>
</div>
</div>
<div class='checkbox-group form-group'>
<div class='checkbox give-permission'>
<input class='give-permission-checkbox' id='feedback-give-permission-checkbox' type='checkbox'>
<div class='quanto-checkbox'></div>
<label for='feedback-give-permission-checkbox'>
I permit Quantopian to view <span class='item-type-text'>this algorithm,
backtest or notebook and their imported datasets</span> for the purpose of providing support.
</label>
</div>
</div>
</div>
</form>

<div class='loading-step hidden'>
<div class='loading-text'>
Submitting your support ticket...
</div>
</div>
<div class='success-step invisible'>
<h2 class='title center'>
You've successfully submitted a support ticket.
</h2>
<p>
Our support team will be in touch soon.
</p>
<div class='confirmation-image'></div>
</div>
</div>
<div class='modal-footer'>
<button class='btn-v2 blue' id='send-feedback-button'>Send</button>
<div class='error-message hidden'>
Error submitting support request.
</div>
</div>

</div>
</div>
</div>

</div>
</div>
<div class='footer' id='quanto-footer-container'>
<div class='container'>
<div class='row header-row'>
<div class='col-sm-fourth span3'>
<img class='async-image logotype-image' data-src='https://qf.quantopian.com/assets/logos/logo-q-full-b23bda5ac757691b9259d396d0dfef91567165868b8c955a836649686e6d2248.svg'>
</div>
<div class='col-sm-fourth span3'></div>
<div class='col-sm-fourth span3'></div>
<div class='col-sm-fourth span3'>
<div class='feedback-email'>
Need help?
<a href="/cdn-cgi/l/email-protection#086e6d6d6c6a696b6348797d69667c6778616966266b6765">Contact support.</a>
</div>
</div>
</div>
<div class='row'>
<div class='col-sm-fourth span3'>
<div class='header'>Company</div>
<div class='footer-row'>
<a href='/about'>About</a>
</div>
<div class='footer-row'>
<a href='/academia'>Academia</a>
</div>
<div class='footer-row'>
<a href='/jobs'>Careers</a>
</div>
<div class='footer-row'>
<a href='/posts'>Community</a>
</div>
<div class='footer-row'>
<a href='/events'>Events</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Learn &amp; Support</div>
<div class='footer-row'>
<a href='/faq'>FAQ</a>
</div>
<div class='footer-row'>
<a href='/tutorials/getting-started'>Getting Started</a>
</div>
<div class='footer-row'>
<a href='/docs'>Documentation</a>
</div>
<div class='footer-row'>
<a href='/tutorials'>Tutorials</a>
</div>
<div class='footer-row'>
<a href='/lectures'>Lectures</a>
</div>
<div class='footer-row'>
<a href='/opensource'>Open Source</a>
</div>
<div class='footer-row'>
<a href='https://status.quantopian.com/'>Site Status</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Notices</div>
<div class='footer-row'>
<a href='/policies/terms'>Terms of Use</a>
</div>
<div class='footer-row'>
<a href='/policies/privacy'>Privacy Policy</a>
</div>
<div class='footer-row'>
<a href='/security'>Security</a>
</div>
<div class='footer-row'>
<a href='/policies/code-of-conduct'>Code of Conduct</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Follow Us</div>
<div class='footer-row'>
<a href='https://www.twitter.com/quantopian'>Twitter</a>
</div>
<div class='footer-row'>
<a href='https://www.facebook.com/quantopian'>Facebook</a>
</div>
<div class='footer-row'>
<a href='https://www.linkedin.com/company/quantopian'>LinkedIn</a>
</div>
<div class='footer-row'>
<a href='https://www.youtube.com/channel/UC606MUq45P3zFLa4VGKbxsg'>YouTube</a>
</div>
</div>
</div>
<div class='row'>
<div class='col-xs-14 span12'>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian.
</p>
<p>
In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>

</div>
</div>
</div>
</div>
</div>
<div class='mobile-footer'>
<div class='mobile-nav-category main-links'>
<div class='mobile-nav-row-footer'>
<a href='/about'>About Quantopian</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/jobs'>Careers</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/posts'>Community</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/events'>Events</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/docs'>Documentation</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/academia'>Academia</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/lectures'>Lectures</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://status.quantopian.com/'>Status</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.facebook.com/quantopian'>Facebook</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.twitter.com/quantopian'>Twitter</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.linkedin.com/company/quantopian'>LinkedIn</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.youtube.com/channel/UC606MUq45P3zFLa4VGKbxsg'>YouTube</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/policies/terms'>Terms of Use</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/policies/privacy'>Privacy Policy</a>
</div>
</div>
<div class='mobile-nav-category'>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian.
</p>
<p>
In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>

</div>
</div>
</div>

</div>
<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script></body>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', "UA-8519877-1", {
    cookieDomain: "quantopian.com"
  });
  ga('set', 'dimension1', 'session_5f9dc7425d387f00077e48e4');
  
  ga('send', 'pageview');
</script>

<input type="hidden" name="is_mac" id="is_mac" value="false" />
<input type="hidden" name="mp" id="mp" value="75873953cd404bcc1da88a55ff51e3b4" />
<script>
  (function(e,a){if(!a.__SV){var b=window;try{var c,l,i,j=b.location,g=j.hash;c=function(a,b){return(l=a.match(RegExp(b+"=([^&]*)")))?l[1]:null};g&&c(g,"state")&&(i=JSON.parse(decodeURIComponent(c(g,"state"))),"mpeditor"===i.action&&(b.sessionStorage.setItem("_mpcehash",g),history.replaceState(i.desiredHash||"",e.title,j.pathname+j.search)))}catch(m){}var k,h;window.mixpanel=a;a._i=[];a.init=function(b,c,f){function e(b,a){var c=a.split(".");2==c.length&&(b=b[c[0]],a=c[1]);b[a]=function(){b.push([a].concat(Array.prototype.slice.call(arguments,
  0)))}}var d=a;"undefined"!==typeof f?d=a[f]=[]:f="mixpanel";d.people=d.people||[];d.toString=function(b){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);b||(a+=" (stub)");return a};d.people.toString=function(){return d.toString(1)+".people (stub)"};k="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
  for(h=0;h<k.length;h++)e(d,k[h]);a._i.push([b,c,f])};a.__SV=1.2;b=e.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";c=e.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}})(document,window.mixpanel||[]);
  mixpanel.init("75873953cd404bcc1da88a55ff51e3b4");
</script>
<script>
  mixpanel.track("view page", {"page": window.location.pathname});
</script>
</html>
