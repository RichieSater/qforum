<!DOCTYPE html>
<html>
<head>
<link href='i1.wp.com' rel='dns-prefetch'>
<link href='i2.wp.com' rel='dns-prefetch'>
<link href='i3.wp.com' rel='dns-prefetch'>
<meta content='2HgX9mcLHaPOX6sfaaAkhWtblhEB9yUNw4l6l46e1k4' name='google-site-verification'>
<link rel="shortcut icon" type="image/x-icon" href="external/favicon-q-ac1a76f2c200e9026b5b1147519bb4fab6256910588b831e2411bc6c7c1218c3.png" />
<title>
Mean Reversion Strategies: Creating a Stationary Time Series and Hedge Ratio Problems
</title>
<meta content='Strap in boys and gals, it&#39;s gonna be a long one. If you want to skip some intro on some basic mean reversion strategy concepts like adf, johansen test and such you can skip right down to the star delimited area below. Mean reversion is the concept that a time series will tend to revert to its mean (average) over-time. This means that if you notice the price of an asset is 2 standard deviations above its 50 day moving average, it would be a relatively smart idea to short sell. This is the...' name='description'>
<link rel="stylesheet" media="all" href="external/quanto-base-bundle-e8eb6050172aa0d24124d5c24bac90b2cccd88b5b9c7742026c0e9efab038c6e.css" />
<link rel="stylesheet" media="all" href="external/quanto-posts-bundle-aab01368d3f82d8dafc94ee9eabb82e77dc8c9fbbffa952fdcdc744dfa523cf3.css" />
<script src="external/quanto_global-057218867db29d5768131af5d6fb3476cef098e7d9e655108befb903c7ee985e.js"></script>
<script src="external/posts_bundle-3dfd82fa469c393d752e461d837aec9e4e364ae39f49198e34a6626f2180fdf7.js"></script>
<link href='external/logo-q-180x180-0f5a6a439c99203ed4aea6f656e7604c543d287be43d8b17c7591c1131f09a59.png' rel='apple-touch-icon'>
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="rbUI2JDOqxwt93SABx3rjVBcVpw5tWs0KXUk+kxuk8HR036VMjh5/5TqLbFI8kP5aNJ19UN5fi+rev+Q5ivxeg==" />
<meta content='width=device-width, initial-scale=1.0' name='viewport'>
<script>
//<![CDATA[
window.quanto_data={};quanto_data.bounce_back_params={"show_modal":null,"feedback_text":null};quanto_data.namespace="public";quanto_data.talib_info={"ADOSC":["Chaikin A/D Oscillator (Volume Indicators)",["fastperiod","3"],["slowperiod","10"]],"ADX":["Average Directional Movement Index (Momentum Indicators)",["timeperiod","14"]],"ADXR":["Average Directional Movement Index Rating (Momentum Indicators)",["timeperiod","14"]],"APO":["Absolute Price Oscillator (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["matype","0"]],"AROON":["Aroon (Momentum Indicators)",["timeperiod","14"]],"AROONOSC":["Aroon Oscillator (Momentum Indicators)",["timeperiod","14"]],"ATR":["Average True Range (Volatility Indicators)",["timeperiod","14"]],"BBANDS":["Bollinger Bands (Overlap Studies)",["timeperiod","5"],["nbdevup","2"],["nbdevdn","2"],["matype","0"]],"BETA":["Beta (Statistic Functions)",["timeperiod","5"]],"CCI":["Commodity Channel Index (Momentum Indicators)",["timeperiod","14"]],"CMO":["Chande Momentum Oscillator (Momentum Indicators)",["timeperiod","14"]],"CORREL":["Pearson's Correlation Coefficient (r) (Statistic Functions)",["timeperiod","30"]],"DEMA":["Double Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"DX":["Average Directional Movement Index (Momentum Indicators)",["timeperiod","14"]],"EMA":["Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"KAMA":["Kaufman Adaptive Moving Average (Overlap Studies)",["timeperiod","30"]],"LINEARREG":["Linear Regression (Statistic Functions)",["timeperiod","14"]],"LINEARREG_ANGLE":["Linear Regression Angle (Statistic Functions)",["timeperiod","14"]],"LINEARREG_INTERCEPT":["Linear Regression Intercept (Statistic Functions)",["timeperiod","14"]],"LINEARREG_SLOPE":["Linear Regression Slope (Statistic Functions)",["timeperiod","14"]],"MA":["Moving average (Overlap Studies)",["timeperiod","30"],["matype","0"]],"MACD":["Moving Average Convergence/Divergence (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["signalperiod","9"]],"MACDEXT":["MACD with controllable MA type (Momentum Indicators)",["fastperiod","12"],["fastmatype","0"],["slowperiod","26"],["slowmatype","0"],["signalperiod","9"],["signalmatype","0"]],"MACDFIX":["Moving Average Convergence/Divergence Fix 12/26 (Momentum Indicators)",["signalperiod","9"]],"MAX":["Highest values over a specified period (Math Operators)",["timeperiod","30"]],"MAXINDEX":["Index of highest value over a specified period (Math Operators)",["timeperiod","30"]],"MFI":["Money Flow Index (Momentum Indicators)",["timeperiod","14"]],"MIDPOINT":["Midpoint over period (Overlap Studies)",["timeperiod","14"]],"MIDPRICE":["Midpoint Price over period (Overlap Studies)",["timeperiod","14"]],"MIN":["Lowest value over a specified period (Math Operators)",["timeperiod","30"]],"MININDEX":["Index of lowest value over a specified period (Math Operators)",["timeperiod","30"]],"MINMAX":["Lowest and highest values over a specified period (Math Operators)",["timeperiod","30"]],"MINMAXINDEX":["Indexes of lowest and highest values over a specified period (Math Operators)",["timeperiod","30"]],"MINUS_DI":["Minus Directional Indicator (Momentum Indicators)",["timeperiod","14"]],"MINUS_DM":["Minus Directional Movement (Momentum Indicators)",["timeperiod","14"]],"MOM":["Momentum (Momentum Indicators)",["timeperiod","10"]],"NATR":["Normalized Average True Range (Volatility Indicators)",["timeperiod","14"]],"PLUS_DI":["Plus Directional Indicator (Momentum Indicators)",["timeperiod","14"]],"PLUS_DM":["Plus Directional Movement (Momentum Indicators)",["timeperiod","14"]],"PPO":["Percentage Price Oscillator (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["matype","0"]],"ROC":["Rate of change: ((price/prevPrice)-1)*100 (Momentum Indicators)",["timeperiod","10"]],"ROCP":["Rate of change Percentage: (price-prevPrice)/prevPrice (Momentum Indicators)",["timeperiod","10"]],"ROCR":["Rate of change ratio: (price/prevPrice) (Momentum Indicators)",["timeperiod","10"]],"ROCR100":["Rate of change ratio 100 scale: (price/prevPrice)*100 (Momentum Indicators)",["timeperiod","10"]],"RSI":["Relative Strength Index (Momentum Indicators)",["timeperiod","14"]],"SMA":["Simple Moving Average (Overlap Studies)",["timeperiod","30"]],"STDDEV":["Standard Deviation (Statistic Functions)",["timeperiod","5"],["nbdev","1"]],"STOCH":["Stochastic (Momentum Indicators)",["fastk_period","5"],["slowk_period","3"],["slowk_matype","0"],["slowd_period","3"],["slowd_matype","0"]],"STOCHF":["Stochastic Fast (Momentum Indicators)",["fastk_period","5"],["fastd_period","3"],["fastd_matype","0"]],"STOCHRSI":["Stochastic Relative Strength Index (Momentum Indicators)",["timeperiod","14"],["fastk_period","5"],["fastd_period","3"],["fastd_matype","0"]],"T3":["Triple Exponential Moving Average (T3) (Overlap Studies)",["timeperiod","5"],["vfactor","0.7"]],"TEMA":["Triple Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"TRIMA":["Triangular Moving Average (Overlap Studies)",["timeperiod","30"]],"TRIX":["1-day Rate-Of-Change (ROC) of a Triple Smooth EMA (Momentum Indicators)",["timeperiod","30"]],"TSF":["Time Series Forecast (Statistic Functions)",["timeperiod","14"]],"ULTOSC":["Ultimate Oscillator (Momentum Indicators)",["timeperiod1","7"],["timeperiod2","14"],["timeperiod3","28"]],"VAR":["Variance (Statistic Functions)",["timeperiod","5"],["nbdev","1"]],"WILLR":["Williams' %R (Momentum Indicators)",["timeperiod","14"]],"WMA":["Weighted Moving Average (Overlap Studies)",["timeperiod","30"]]};quanto_data.nb_preview_url="https://notebooks-preview.prd.pub.quantopian.com";quanto_data.delay_nb_preview_load=false;
//]]>
</script>
<meta content='https://www.quantopian.com/posts/mean-reversion-strategies-creating-a-stationary-time-series-and-hedge-ratio-problems' property='og:url'>
<meta content='Mean Reversion Strategies: Creating a Stationary Time Series and Hedge Ratio Problems' property='og:title'>

<input type="hidden" name="env" id="quanto-env" value="production" />
<meta content='550580758292093' property='fb:app_id'>
<meta content='https://www.quantopian.com/posts/mean-reversion-strategies-creating-a-stationary-time-series-and-hedge-ratio-problems' property='og:url'>
<meta content='https://media.quantopian.com/public/og-image-default.png' property='og:image'>
<meta content='Mean Reversion Strategies: Creating a Stationary Time Series and Hedge Ratio Problems' property='og:title'>
<meta content='Strap in boys and gals, it&#39;s gonna be a long one. If you want to skip some intro on some basic mean reversion strategy concepts like adf, johansen test and such you can skip right down to the star delimited area below. Mean reversion is the concept that a time series will tend to revert to its mean (average) over-time. This means that if you notice the price of an asset is 2 standard deviations above its 50 day moving average, it would be a relatively smart idea to short sell. This is the...' property='og:description'>
</head>
<script type='application/ld+json'>
  {
    "@context": "http://schema.org",
    "@type": "Organization",
    "url": "https://www.quantopian.com",
    "logo": "https://media.quantopian.com/logos/logo-q-press-red.png"
  }
</script>
<body class='' ontouchstart=''>
<div id='fb-root'></div>
<div class='wrapper'>
<div class='alert-v2 error'>
<div class='message'>
Quantopian's community platform is shutting down. Please read <a href="/posts/quantopians-community-services-are-closing">this post</a> for more information and <a href='/account#account'>download your code</a>.
</div>
</div>
<div class='navbar navbar-default navbar-static-top' id='app-navbar'>
<div class='container-fluid'>
<div class='navbar-header'>
<button class='navbar-toggle collapsed' data-target='#app-navbar-collapse' data-toggle='collapse'>
<span class='icon hamburger-menu'></span>
</button>
<a class='navbar-brand' href='/home'>
<img class='logo-image async-image' data-src='external/logo-q-white-b141ea6018546e5a4ecc3d10d8440ec076fc4385764e948b322828cc70950a76.svg'>
</a>
</div>
<div class='collapse navbar-collapse' id='app-navbar-collapse'>
<ul class='nav navbar-nav navbar-right'>
<li class='dropdown quanto-dropdown-new'>
<li>
<a class='header' href='/docs'>
Documentation
</a>
</li>
<li class='dropdown quanto-dropdown-new'>
<a class='header' data-toggle='dropdown' href='#'>
Learn
</a>
<ul class='dropdown-menu'>
<li>
<a class='mixpanel-button' data-event='main nav getting started clicked' href='/tutorials/getting-started'>Getting Started</a>
</li>
<li>
<a class='mixpanel-button' data-event='main nav tutorials clicked' href='/tutorials'>Tutorials</a>
</li>
<li>
<a class='mixpanel-button' data-event='main nav lectures clicked' href='/lectures'>Lectures</a>
</li>
</ul>
</li>
<li>
<a class='header' href='/posts' id='forum-link'>
Forum
</a>
</li>
<li>
<a class="header" href="/signin?return_to=/posts/mean-reversion-strategies-creating-a-stationary-time-series-and-hedge-ratio-problems">Log In</a>
</li>
</li>

</ul>
</div>
</div>
</div>
<script>
  $(document).ready(function () {
    quanto.instances.fm = new quanto.FeedbackManager();
    quanto.instances.hm = new quanto.headerManager();
  })
</script>


<div class='content content-area new-style'>
<input type="hidden" name="page-id" id="page-id" value="postatomic" />
<script src="external/MathJax.js?config=TeX-AMS_HTML-full.js,Safe" async="async"></script>
<div class='container page-container post-atomic'>
<input id='parent-post-id-val' type='hidden' value='5999384de998820010a0a22e'>
<div class='post-container' data-post-id='5999384de998820010a0a22e' id='5999384de998820010a0a22e'>
<div class='back-button back-to-community'>Back to Community</div>
<div class='post-title'>Mean Reversion Strategies: Creating a Stationary Time Series and Hedge Ratio Problems</div>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/55956408e277c7cd4b0000cb'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/4550cea03e2940bdf2aa4aafc312eb7d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/55956408e277c7cd4b0000cb'>Stephen Owen</a>
</div>
<span class='posted-at'>edited </span>
<span UTCms='1503527606000' class='quanto-date posted-at'></span>
<div class='pull-right other-actions'>
<div class='dropup inline-block'>
<div class='dropdown share-control other-action-link'>
<div data-toggle='dropdown'>
<div class='share-image'></div>
Share
</div>
<ul class='dropdown-menu share-options-menu'>
<li>
<a class='share-row' href='https://twitter.com/intent/tweet?text=Mean Reversion Strategies: Creating a Stationary Time Series and Hedge Ratio Problems&amp;url=https%3A%2F%2Fwww.quantopian.com%2Fposts%2Fmean-reversion-strategies-creating-a-stationary-time-series-and-hedge-ratio-problems%3Futm_source%3Dwebsite_share%26utm_campaign%3Dmean-reversion-strategies-creating-a-stationary-time-series-and-hedge-ratio-problems%26utm_medium%3Dtwitter&amp;via=quantopian'>
<i class='icon icon-twitter'></i>
Share on Twitter
</a>
</li>
<li>
<div class='share-row facebook-button'>
<i class='icon icon-facebook'></i>
Share on Facebook
</div>
</li>
<li>
<div class='share-row linkedin-button' data-share-url='https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Fwww.quantopian.com%2Fposts%2Fmean-reversion-strategies-creating-a-stationary-time-series-and-hedge-ratio-problems%3Futm_source%3Dwebsite_share%26utm_campaign%3Dmean-reversion-strategies-creating-a-stationary-time-series-and-hedge-ratio-problems%26utm_medium%3Dlinkedin&amp;title=Mean+Reversion+Strategies%3A+Creating+a+Stationary+Time+Series+and+Hedge+Ratio+Problems+%28Stephen+Owen%29&amp;source=Quantopian'>
<i class='icon icon-linkedin'></i>
Share on LinkedIn
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>

<div class='tags tag-row'>
<a class='tag mixpanel-button' data-event='tag click' data-mixpanel='Seeking Help' data-tag-id='55c50e7d8d4710ec6e000003' href='/posts/tag/Seeking-Help/newest'>Seeking Help</a>
<a class='tag mixpanel-button' data-event='tag click' data-mixpanel='Pairs Trading' data-tag-id='55c50e7d8d4710ec6e000009' href='/posts/tag/Pairs-Trading/newest'>Pairs Trading</a>
<a class='tag mixpanel-button' data-event='tag click' data-mixpanel='Mean Reversion' data-tag-id='55c50e7d8d4710ec6e00000d' href='/posts/tag/Mean-Reversion/newest'>Mean Reversion</a>
<a class='tag mixpanel-button' data-event='tag click' data-mixpanel='Collaboration Request' data-tag-id='55c50e7d8d4710ec6e000016' href='/posts/tag/Collaboration-Request/newest'>Collaboration Request</a>
<a class='tag mixpanel-button' data-event='tag click' data-mixpanel='Portfolio Optimization' data-tag-id='55d33f293f6ba10061000000' href='/posts/tag/Portfolio-Optimization/newest'>Portfolio Optimization</a>
</div>
<input type="hidden" name="social_fb_post_link" id="social_fb_post_link" value="https://www.quantopian.com/posts/mean-reversion-strategies-creating-a-stationary-time-series-and-hedge-ratio-problems?utm_source=website_share&amp;utm_campaign=mean-reversion-strategies-creating-a-stationary-time-series-and-hedge-ratio-problems&amp;utm_medium=facebook" />
<input type="hidden" name="social_post_image" id="social_post_image" value="external/logo-q-red-outline.png" />
<input type="hidden" name="social_post_author" id="social_post_author" value="Stephen Owen" />
<div class='body-text'>
<div class='body-text-container post-body'><p>Strap in boys and gals, it&#39;s gonna be a long one.</p>

<p>If you want to skip some intro on some basic mean reversion strategy concepts like adf, johansen test and such you can skip right down to the star delimited area below.</p>

<p>Mean reversion is the concept that a time series will tend to revert to its mean (average) over-time. This means that if you notice the price of an asset is 2 standard deviations above its 50 day moving average, it would be a relatively smart idea to short sell. This is the basic idea behind a strategy like Bollinger Bands. </p>

<p>However, this is not always a good idea. In practice, asset prices tend to trend upwards (or downwards), and there is typically some sort of random walk involved.  Therefore, we have a dilemma. Clearly, mean reversion strategies can be very powerful, granted we can be relatively confident that the asset price is not trending. We could long and short the asset indefinitely, cashing in on the ups and downs automatically using a simple algorithm. How can we tell if an asset is trending or mean reverting (also known as stationary)?</p>

<p>The augmented dickey fuller test is a statistical test that test exactly this question. I implemented it using the statsmodels tsa (time series analysis) library. Typically the ADF test is introduced as a means for testing pairs trading strategies. A pair trade strategy is created by running an ordinary least squares regression on the time series of two separate assets. The beta (or slope) is used as the hedge ratio, one of the main topics of this post. In pairs trading, the hedge ratio has a simple real life interpretation. A ratio of 0.5 means that for every $1 increase in the price of asset A, asset B will increase by 0.5$ (and vice versa). </p>

<p>Using this hedge ratio (beta) we can create a residual graph of the two asset&#39;s time series. In this example, this means that we subtract 0.5 times the price of asset B from asset A. Theoretically, this should form a stationary time series. You want to test that mathematically? Good, thinkin bud! Too bad I&#39;m too dumb to pedantically explain the ADF test. Thankfully, it doesn&#39;t really matter. </p>

<p>Running the ADF test gives significance values at the 10%, 5%, and 1% levels. If your test statistic is above the 1% level, you&#39;re pretty damn confident you got a mean reverting time series. </p>

<p>Enter: Me. I wanted to do a naive test of the pair trades of all the combinations of stocks listed in the S&amp;P 500. This is pretty easy to implement, just use beautiful soup to scrape the wikipedia page for all the names of S&amp;P 500 stocks, and use the quandl&#39;s free WIKI dataset API to download your time series data on the fly. From there, simply run the ADF test on all the different combinations of pair trades and find the most significantly stationary time series. There&#39;s also something called the Hurst Exponent that you can optimize, but I found it&#39;s not super important. </p>

<p>I ran backtests using a simple bollinger bands strategy, and I was not happy with the results. Large drawdowns, low sharpe ratio, mediocre returns. This is also because I personally try to run strategies with the most amount of data possible, to assure that the stationarity of the portfolio isn&#39;t simply a one or two year phenomenon. This larger time frame leads to more difficulty in finding working strategies, but when I do find it, I&#39;ll be pretty confident in its predictive power. </p>

<p>To put it frank, I was devastated. And quite frankly confused. I could see with my own two eyes that the time series were stationary. WHY wouldn&#39;t a strategy like bollinger bands work? Especially if I took the mean and standard deviations of the entirety of the historical data in the backtest time frame (yes I was cheating) as opposed to the N-day moving average mean and standard deviations, one would expect a pretty good increase in performance. Wrong.</p>

<p>What was going on here?</p>

<p>I thought maybe it wasn&#39;t actually stationary enough.</p>

<p>Enter: the Johansen test.</p>

<p>JoJo, my BOY. A true baller. Exactly what I was looking for. If two assets moving in tandem wasn&#39;t adequate to create a stationary portfolio, I thought maybe I could create a stationary portfolio. Now to my knowledge, this is something that finance firms do all the time. The more price movements you add into a portfolio, the less volatile, and more predictable the price movements. However, it is more useful to have a rigorous statistical test that will tell you for sure if your portfolio is truly stationary. </p>

<p>The Johansen test is a statistical test that will not only tell you if a certain basket of assets that is larger than 2 can form a stationary portfolio, it will also tell you exactly what the hedge ratios are in order to form this stationary portfolio. I had to scour the web to find a good implementation in python of the johansen test, and I can give it to anyone who asks in the comments. I found it in a random branch on the statsmodels tsa github page.</p>

<p>Anyway, I went through the same process as with the ADF test, except I decided to run create a 11 asset large portfolio. I picked 11  because I wanted to choose 1 asset from each of the 11 sectors listed in the S&amp;P 500. Even with the simplification, it is still obviously a very algorithmically complex script.</p>

<p>1 man</p>

<p>11 nested for loops</p>

<p>1 destiny</p>

<p>Actually not too bad though because you can use parallel processing to cut down a bit on time. Also I found after running for like 30 minutes that almost all of the portfolio&#39;s had ADF test statistics more than twice the amount that I was getting for the simple 2 asset pair trading time series. </p>

<p>I picked a portfolio I liked and rolled with it. </p>

<p>Now I took my Bollinger Pair strategy I backtested, and added in the 11 asset portfolio. I named this file bpj.py, aka bollinger pair johansen.<br>
You can find it in my github.</p>

<p>The results? Again slightly disappointing. Maybe I had too high expectation with this, but something just didn&#39;t seem right with these results. </p>

<p><a href="http://imgur.com/a/3qSSC">http://imgur.com/a/3qSSC</a> Results</p>

<p>Enter: obnoxious debugging with no guarantee of progress.</p>

<hr>

<p>I refuse to accept these results. The theory is quite simple. I can see that this portfolio is, historically, guaranteed to return to the mean after straying a couple standard deviations from the mean. Therefore, why is the backtest giving subpar (under s&amp;p) level performance? It shouldn&#39;t be commission, as there are not that many trades happening. I debugged using get_open_orders and context.portfolio.positions to see if my order were going through. Some of them were taking months to complete? What? I ended up having to write an adjustHedgeRatio function that would scale down the percent of each stock to order so that all the orders could complete in 1 day, to be consistent with the 0.025 volume slippage model. However, that was largely unnecessary as I realized the real issue was that I had been using a custom bundle that was for some reason dividing the volume by 1000 and therefore creating unnaturally low daily volume data for the backtester. The custom bundle was also giving me trouble as the data was not split and dividend adjusted. It created a random spike of like 200% on a random day by not accounting for the split in the number of shares I owned. Anyway, moving back to the default quantopian-quandl bundle fixed this. Even after all this, the results were still bad.  </p>

<p>Back to the drawing board.</p>

<p>I honed in on what I now believe to be the true source of error in this strategy, that seems so trivial to me but I have managed to overthink it to the point of insanity. </p>

<p>Enter: the Hedge Ratio</p>

<p>It might actually be a fundamental misunderstanding on my part. The Hedge Ratio for the Johansen test of this particular portfolio is an eigenvector composed of 11 values:</p>

<p>[ 0.02598021 -0.1192674  -0.01062298 -0.79423715  0.44579013  0.1413708
 -0.27075362  0.08992664  0.07375943  0.29200028 -0.51136716]</p>

<p>Now, the most astute of you will right off the bat recognize that the absolute value of the sum of these do no add to 1. Is it necessary that it is normalized? Idk, so I tried normalizing it and of course it made no difference, in fact made the results worse.</p>

<p>The thing is, I know that these numbers are correct, because if you use them as coefficients in the 11 portfolio time series, it creates the stationary time series we are looking for. The problem is how they are implemented in the backtest, I believe. </p>

<p><a href="http://imgur.com/a/Hjdr0">http://imgur.com/a/Hjdr0</a> Expected Time Series</p>

<p>I use order_target_percent, and use each of the numbers as a raw percentage of the portfolio value. Again, the fact that these percentages add up to more than 1 is a little unsettling. However, I don&#39;t mind hypothetically going into debt in the backtesting world because hypothetically I&#39;m a baller.</p>

<p>In order to really test what the problem is, I decided to just make simple algorithm that just buys the portfolio on day 1 of the backtest and holds it for the entirety. Then, I can compare the graphs of portfolio returns and portfolio values to the graph of the expected time series. The results? Not even close. </p>

<p><a href="http://imgur.com/a/kjIWD">http://imgur.com/a/kjIWD</a></p>

<p>Queue twilight zone music. </p>

<p>This whole order_target_percent thing isn&#39;t working. Some theories of mine are this:</p>

<p>Maybe, instead of ordering a target percentage of the whole portfolio value, the assets values have to be percentages with respect to <em>each other</em>. i.e., some sort of order_target_percent with respect to the context.portfolio.position_values. Maybe the one asset you buy the most of will be the price that you normalize all the other hedge ratios with respect to.</p>

<p>That honestly doesn&#39;t even make sense to me either ^</p>

<p>My other theory that I tried out was this. If I compared the hedge ratio&#39;s every day to the ACTUAL percentage ownership of each asset with respect to the portfolio value, I found that at the beginning they were approximately close, but over time the percentages changes. Obviously, because the portfolio will either go up or down in value as more money is made or lost. However, the ratios of all the stocks with respect to each other should remain unchanged. Regardless, I decided to do a strategy where I rebalance the portfolio every day to make sure that I continue to keep my portfolio weights consistent with the hedge ratios, as seen here.</p>

<p><a href="http://imgur.com/a/zAyl3">http://imgur.com/a/zAyl3</a>
<a href="http://imgur.com/a/Qbozm">http://imgur.com/a/Qbozm</a></p>

<p>The left colum is the actual weights, and the right column is the target hedge ratios, and each block is one day. Compared to earlier where the portfolio is only bought once on the first day.</p>

<p><a href="http://imgur.com/a/N3CRh">http://imgur.com/a/N3CRh</a></p>

<p>In a last ditch effort, I decided I would implement gradient descent to minimize the squared difference between the expected hedge ratios and the actual hedge ratios, altering the number of shares purchased of each stock. Honestly, I was just psyched to actually be using the calculus I&#39;ve learned in college for something seemingly useful. That code can be found in bpj.py as order_target_portfolio_percentages. I played around with the learning rate and initial conditions a bit, but was never able to get the cost function to really get below 0.1, without starting to get to ordering billions of shares of stock. </p>

<p>It ended up being a failure, and I even if it were to have worked, I was still altering the number of shares bought of each stock by a non integer number.</p>

<p>Clearly, you can&#39;t own a fractional share of a stock. You can only own discrete integer values of stock. Therefore, there is a certain limit to the precision of percentages you can own of stocks, unless you start buying billions of shares of each stock. </p>

<p>Now if you&#39;ve read this far, I honestly thank you and applaud your endurance. My hope in posting here was to get some feedback on how to improve the backtesting performance and figure out this whole hedge ratio thing, because again, the fact that buying the portfolio at the beginning with order_target_percent and holding doesn&#39;t replicate the time series means that SOMETHING is wrong. My question is, does anyone have experience with a successful stationary portfolio strategy, and if so, what did you do? What can I do to improve this, and why does it not work as expected? ANY and ALL suggestions are welcome and again, thank you for reading this monstrosity. Until next time.</p>
</div>
</div>
</div>

</div>

<div class='container page-container post-atomic'>
<div class='section-header reply-header'>
<div class='reply-title'>4 responses</div>
</div>
<div class='replies'>
<div class='post-container response-container' data-post-id='59995a2f160026000d1cc031' id='59995a2f160026000d1cc031'>
<a href='#59995a2f160026000d1cc031'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/52b0e0e0271a27fc88000049'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e5451406e743420c700eb2b054b2fc57?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/52b0e0e0271a27fc88000049'>Blue Seahawk</a>
</div>
<a UTCms='1503222319000' class='quanto-date posted-at response-posted-at' href='#59995a2f160026000d1cc031'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Try a test without partial fills: set_slippage(slippage.VolumeShareSlippage(volume_limit=888e999, price_impact=0.0))<br>
Sometimes seeing different results just repeating a run without touching the code so maybe eliminate <a href="https://www.quantopian.com/posts/nondeterministic-backtesting">this</a> and <a href="https://www.quantopian.com/posts/data-change">this</a> as possibilities.</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5999d1dea16e3b00103e0c53' id='5999d1dea16e3b00103e0c53'>
<a href='#5999d1dea16e3b00103e0c53'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/55956408e277c7cd4b0000cb'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/4550cea03e2940bdf2aa4aafc312eb7d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/55956408e277c7cd4b0000cb'>Stephen Owen</a>
</div>
<a UTCms='1503252958000' class='quanto-date posted-at response-posted-at' href='#5999d1dea16e3b00103e0c53'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Blue Seahawk</p>

<p>Good call. I tried this and the results were the same, however. The orders are being filled properly. </p>

<p>The problem is the results are just so vastly different than what is expected, even when slippage and commission are eliminated as backtesting factors.</p>

<p>It has to be a fundamental error in my ordering/ hedge ratios  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='599b538f6ac49d000dfb5454' id='599b538f6ac49d000dfb5454'>
<a href='#599b538f6ac49d000dfb5454'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5033e9d73fb2eb0002000231'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/4a9a839742731aad6e110e1d3586e020?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5033e9d73fb2eb0002000231'>Simon Thornington</a>
</div>
<a UTCms='1503351695000' class='quanto-date posted-at response-posted-at' href='#599b538f6ac49d000dfb5454'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>My experience has been:</p>

<ol>
<li>when doing brute force cointegration tests, usual significance levels are not significant.<br></li>
<li>often mean-reverting residuals are not actually tradeable, since it&#39;s the mean that&#39;s reverting, not the residual.  (that is to say, if the z-score hits -3, then gets back to 0, it&#39;s not because the <em>basket</em> reverted back to the mean, but because the mean caught up to the basket, <em>or</em> because the online adaptation of the hedge ratio [ie kalman whatever] has since adapted to the new values).  This is not tradeable.<br></li>
</ol>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='599ba22645acc8000d9c194c' id='599ba22645acc8000d9c194c'>
<a href='#599ba22645acc8000d9c194c'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/55956408e277c7cd4b0000cb'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/4550cea03e2940bdf2aa4aafc312eb7d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/55956408e277c7cd4b0000cb'>Stephen Owen</a>
</div>
<a UTCms='1503371814000' class='quanto-date posted-at response-posted-at' href='#599ba22645acc8000d9c194c'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Simon Thornington</p>

<p>Thanks for the reply.</p>

<p>I actually agree. I think that mean reverting strategies can be pretty untradeable due to the fact that you have to use moving averages and moving standard deviations, and like you said the mean will change greatly as time goes on. Therefore I think it&#39;s not a good idea (at least with the bollinger band implementation)</p>

<p>However, I was curious about finding a way to make this work artificially, and so I decided to not use moving means and standard deviations. In my backtest, I calculated the mean and std for the entire time window, and used those values to determine the z scores as the backtest progressed. Even when using this clearly impossible meta-information about the time series, it still showed poor results.</p>

<p>While I am willing to give up on the real life efficacy of these strategies, the results being inconsistent with expected returns still makes me curious. Is it something with the backtester that a calculation is going wrong somewhere? This could potentially be a problem with the zipline backtester in general. Why can&#39;t I replicate the time series by just buying and holding, using the given hedge ratios, for the whole backtest?  </p>
</div>
</div>
</div>

</div>
<div class='sign-in-please'>
Please <a href='/signin?return_to=/posts/mean-reversion-strategies-creating-a-stationary-time-series-and-hedge-ratio-problems'>sign in</a> or
<a href='/users/sign_up?redirect_to=/posts/mean-reversion-strategies-creating-a-stationary-time-series-and-hedge-ratio-problems'>join Quantopian</a> to
post a reply.
</div>
</div>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId: "550580758292093",
      status: false,
      cookie: true,
      xfbml: true
    });
  };
  
  (function(d, debug){
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) {return;}
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
    ref.parentNode.insertBefore(js, ref);
  }(document, /*debug*/ false));
  
  window.twttr = (function (d,s,id) {
    var t, js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return; js=d.createElement(s); js.id=id;
    js.src="//platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs);
    return window.twttr || (t = { _e: [], ready: function(f){ t._e.push(f) } });
  }(document, "script", "twitter-wjs"));
</script>
<script>
  $(document).ready(function () {
    quanto.instances.pm = new quanto.PostManager(false)
  });
</script>

<div class='login-footer'>
<div class='container'>
<div class='login-footer-text'>
Become an expert in quant finance through Quantopian's hands-on education.
</div>
<div class='login-footer-button'>
<button class='btn btn-v2 stroke join-modal-link mixpanel-button' data-event='anon join footer click posts' data-mixpanel='click'>
Join Now
</button>
</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='error-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'>Error</span>
</div>
<div class='modal-body body-content'>
<p>Sorry, something went wrong.  Try again or contact us by <a class='feedback-link'>sending feedback</a>.</p>
</div>
<div class='modal-footer'>
<button class='btn btn-v2 blue action-button' data-dismiss='modal' href='#'>Close</button>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='confirmation-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'></span>
</div>
<div class='modal-body body-content'></div>
<div class='modal-footer'>
<div class='pull-right'>
<button class='btn btn-v2 border' data-dismiss='modal'>Cancel</button>
<button class='btn btn-v2 blue action-button' data-dismiss='modal'></button>
</div>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='message-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'></span>
</div>
<div class='modal-body body-content'></div>
<div class='modal-footer'>
<button class='btn btn-v2 blue action-button' data-dismiss='modal' id='message-modal-close'>Close</button>
</div>

</div>
</div>
</div>

<div class='always-bootstrap3-modals'>
<div class='fade modal quanto-modal-v2' id='join-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header visible-small'>
<span class='title'>
Join Quantopian.  It's Free!
</span>
<div class='modal-x-out visible-xs'></div>
</div>
<div class='modal-body'>
<div class='flex-wrap'>
<div class='join-left-pane hidden-small'>
<div class='margin_30l'>
<div class='join-hero-text'>
Join Quantopian.  It's Free!
</div>
<div class='join-benefits'>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image code'></div>
</div>
<div class='join-text'>
Use our research platform, backtester, and dozens of clean data sets.
</div>
</div>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image learn'></div>
</div>
<div class='join-text'>
Learn with our hands-on education and community forums.
</div>
</div>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image win'></div>
</div>
<div class='join-text'>
Enter to win cash prizes in our contest.
</div>
</div>
</div>
<div class='hidden saved-reminder'>
Don't worry, all your work is already saved.
</div>
</div>
</div>
<div class='join-right-pane'>
<div class='hidden-small'>
<div class='button-pane'>
<a class="button btn-v2 user-form-btn" href="/signin">Already a Quantopian member?</a>
</div>
</div>
<div class='visible-small'>
<div class='already-member'>
<a href='/signin'>Already a Quantopian member?</a>
</div>
</div>
<form class="quanto-form-v2" id="new-user-modal-form" action="/users" accept-charset="UTF-8" data-remote="true" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><div class='error-message hidden'>
<div class='message'></div>
</div>
<div class='name-group'>
<div class='form-group inline-block'>
<label for="user_firstname">First Name</label>
<input class="form-control firstname" pattern=".*" required="required" autocomplete="off" autofocus="autofocus" type="text" name="user[firstname]" id="user_firstname" />
</div>
<div class='form-group inline-block'>
<label for="user_lastname">Last Name</label>
<input class="form-control" value="" pattern=".*" required="required" autocomplete="off" type="text" name="user[lastname]" id="user_lastname" />
</div>
</div>
<div class='form-group'>
<label for="user_email">Email</label>
<input class="form-control" value="" pattern=".*" required="required" autocomplete="off" type="email" name="user[email]" id="user_email" />
</div>
<div class='form-group'>
<label for="user_password">Password</label>
<input autocomplete="off" class="form-control" pattern=".*" required="required" type="password" name="user[password]" id="user_password" />
</div>
<div class='checkbox eula'>
<input id='eula-checkbox' type='checkbox'>
<div class='quanto-checkbox'></div>
<label for='eula-checkbox' id='checkbox-label'>I accept the <a href='/policies/terms' target='_blank'>Terms Of Use</a> and <a href='/policies/privacy' target='_blank'>Privacy Policy</a>.</label>
</div>
<div class='checkbox mailchimp-box'>
<input name="user[allow_marketing_emails]" type="hidden" value="0" /><input type="checkbox" value="1" name="user[allow_marketing_emails]" id="user_allow_marketing_emails" />
<div class='quanto-checkbox'></div>
<label for='user_allow_marketing_emails'>
Send me email updates with the latest news from the Quantopian community. We send these emails about once a month.
</label>
</div>
<div class='button-row'>
<button class='btn-v2 blue full' data-redirect-to='/tutorials/getting-started' id='sign-up-button' type='Submit'>Join Quantopian</button>
</div>
</form></div>
</div>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='feedback-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title'>Contact Support</span>
</div>
<div class='modal-body'>
<form class='anon-user controls quanto-form-v2' id='feedback-form'>
<div class='feedback-inputs'>
<div class='form-group'>
<input autofocus class='form-control' id='feedback-email-box' name='email' placeholder='Email Address' type='email'>
</div>
<div class='form-group'>
<input class='form-control' id='feedback-name-box' placeholder='Name' type='name'>
</div>
<div class='form-group'>
<textarea class='form-control' id='feedback-box' name='feedback' placeholder='What may we help you with?' rows='10'></textarea>
</div>
</div>
</form>
<form class='hidden quanto-form-v2 select-resource-area'>
<div class='select-step select-type-step'>
<div class='form-group'>
<select class='form-control select-resource-dropdown' title='Select the item you need help with'>
<option value='algorithm'>Algorithm</option>
<option value='backtest'>Backtest</option>
<option value='notebook'>Notebook</option>
</select>
</div>
</div>
<div class='select-step loading-area hidden'>
<div class='loading-text'>
Loading...
</div>
</div>
<div class='select-step empty-list-area hidden'>
<div class='back-button'>Go Back</div>
<div class='empty-text'>
No <span class='empty-list-resource-text'>algorithms</span> found
</div>
</div>
<div class='select-algo-area select-step hidden'>
<div class='back-button'>Go Back</div>
<table class='select-algo-table select-item-table'>
<thead>
<tr>
<th>
Algorithm
<span class='sort-icon'></span>
</th>
<th>
Last Modified
<span class='sort-icon'></span>
</th>
</tr>
</thead>
</table>
</div>
<div class='select-backtest-area select-step hidden'>
<div class='back-button'>Go Back</div>
<table class='select-backtest-table select-item-table'>
<thead>
<tr>
<th>
Backtest
<span class='sort-icon'></span>
</th>
<th>
Started At
<span class='sort-icon'></span>
</th>
<th>
Overall Return
<span class='sort-icon'></span>
</th>
<th>
Status
<span class='sort-icon'></span>
</th>
</tr>
</thead>
</table>
</div>
<div class='select-notebook-area select-step hidden'>
<div class='back-button'>Go Back</div>
<div class='subtitle select-cell-step'>
Choose a cell to use as the preview for this notebook:
</div>
<div class='iframe-wrapper'>
<iframe class='notebook-list-iframe slow-fade' src=''></iframe>
</div>
<div class='progress-area slow-fade in'>
<div class='progress-container'>
<div class='progress-title'>
<div class='quanto-loader gray'></div>
</div>
</div>
</div>
<div class='maintenance-area'>
<div class='error-container'>
<div class='row'>
<div class='col-md-14 msg-title h1'>
Sorry, research is currently undergoing maintenance.
</div>
</div>
<div class='row'>
<div class='col-md-14 msg-subtitle'>
Please check back shortly. If the maintenance period lasts longer than expected,
you can find updates on <a href='https://status.quantopian.com/'>status.quantopian.com</a>.
</div>
</div>

</div>
</div>
<div class='error-area'>
<div class='error-container'>
<div class='row'>
<div class='col-md-14 msg-title h1'>
Sorry, something went wrong on our end.
</div>
</div>
<div class='row'>
<div class='col-md-14 msg-subtitle'>
Please try again or contact <a class='open-feedback-link'>Quantopian support</a>.
</div>
</div>

</div>
</div>

</div>
<div class='selected-item-area select-step hidden'>
<div class='selected-item-group form-group'>
<div class='selected-item-control'>
<input class='disabled form-control selected-item-box' type='text'>
<span class='secure-icon icon'></span>
<button class='btn change change-primary-item-button change-selection-button new-btn transparent' type='button'>
<span class='refresh-icon icon'></span>
</button>
</div>
<div class='selected-backtest-control'>
<input class='disabled form-control selected-backtest-box' type='text'>
<span class='secure-icon icon'></span>
<button class='btn change-backtest-button change-selection-button new-btn transparent' type='button'>
<span class='refresh-icon icon'></span>
</button>
</div>
</div>
<div class='checkbox-group form-group'>
<div class='checkbox give-permission'>
<input class='give-permission-checkbox' id='feedback-give-permission-checkbox' type='checkbox'>
<div class='quanto-checkbox'></div>
<label for='feedback-give-permission-checkbox'>
I permit Quantopian to view <span class='item-type-text'>this algorithm,
backtest or notebook and their imported datasets</span> for the purpose of providing support.
</label>
</div>
</div>
</div>
</form>

<div class='loading-step hidden'>
<div class='loading-text'>
Submitting your support ticket...
</div>
</div>
<div class='success-step invisible'>
<h2 class='title center'>
You've successfully submitted a support ticket.
</h2>
<p>
Our support team will be in touch soon.
</p>
<div class='confirmation-image'></div>
</div>
</div>
<div class='modal-footer'>
<button class='btn-v2 blue' id='send-feedback-button'>Send</button>
<div class='error-message hidden'>
Error submitting support request.
</div>
</div>

</div>
</div>
</div>

</div>
</div>
<div class='footer' id='quanto-footer-container'>
<div class='container'>
<div class='row header-row'>
<div class='col-sm-fourth span3'>
<img class='async-image logotype-image' data-src='https://qf.quantopian.com/assets/logos/logo-q-full-b23bda5ac757691b9259d396d0dfef91567165868b8c955a836649686e6d2248.svg'>
</div>
<div class='col-sm-fourth span3'></div>
<div class='col-sm-fourth span3'></div>
<div class='col-sm-fourth span3'>
<div class='feedback-email'>
Need help?
<a href="/cdn-cgi/l/email-protection#d1b7b4b4b5b3b0b2ba91a0a4b0bfa5bea1b8b0bfffb2bebc">Contact support.</a>
</div>
</div>
</div>
<div class='row'>
<div class='col-sm-fourth span3'>
<div class='header'>Company</div>
<div class='footer-row'>
<a href='/about'>About</a>
</div>
<div class='footer-row'>
<a href='/academia'>Academia</a>
</div>
<div class='footer-row'>
<a href='/jobs'>Careers</a>
</div>
<div class='footer-row'>
<a href='/posts'>Community</a>
</div>
<div class='footer-row'>
<a href='/events'>Events</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Learn &amp; Support</div>
<div class='footer-row'>
<a href='/faq'>FAQ</a>
</div>
<div class='footer-row'>
<a href='/tutorials/getting-started'>Getting Started</a>
</div>
<div class='footer-row'>
<a href='/docs'>Documentation</a>
</div>
<div class='footer-row'>
<a href='/tutorials'>Tutorials</a>
</div>
<div class='footer-row'>
<a href='/lectures'>Lectures</a>
</div>
<div class='footer-row'>
<a href='/opensource'>Open Source</a>
</div>
<div class='footer-row'>
<a href='https://status.quantopian.com/'>Site Status</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Notices</div>
<div class='footer-row'>
<a href='/policies/terms'>Terms of Use</a>
</div>
<div class='footer-row'>
<a href='/policies/privacy'>Privacy Policy</a>
</div>
<div class='footer-row'>
<a href='/security'>Security</a>
</div>
<div class='footer-row'>
<a href='/policies/code-of-conduct'>Code of Conduct</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Follow Us</div>
<div class='footer-row'>
<a href='https://www.twitter.com/quantopian'>Twitter</a>
</div>
<div class='footer-row'>
<a href='https://www.facebook.com/quantopian'>Facebook</a>
</div>
<div class='footer-row'>
<a href='https://www.linkedin.com/company/quantopian'>LinkedIn</a>
</div>
<div class='footer-row'>
<a href='https://www.youtube.com/channel/UC606MUq45P3zFLa4VGKbxsg'>YouTube</a>
</div>
</div>
</div>
<div class='row'>
<div class='col-xs-14 span12'>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian.
</p>
<p>
In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>

</div>
</div>
</div>
</div>
</div>
<div class='mobile-footer'>
<div class='mobile-nav-category main-links'>
<div class='mobile-nav-row-footer'>
<a href='/about'>About Quantopian</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/jobs'>Careers</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/posts'>Community</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/events'>Events</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/docs'>Documentation</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/academia'>Academia</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/lectures'>Lectures</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://status.quantopian.com/'>Status</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.facebook.com/quantopian'>Facebook</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.twitter.com/quantopian'>Twitter</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.linkedin.com/company/quantopian'>LinkedIn</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.youtube.com/channel/UC606MUq45P3zFLa4VGKbxsg'>YouTube</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/policies/terms'>Terms of Use</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/policies/privacy'>Privacy Policy</a>
</div>
</div>
<div class='mobile-nav-category'>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian.
</p>
<p>
In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>

</div>
</div>
</div>

</div>
<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script></body>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', "UA-8519877-1", {
    cookieDomain: "quantopian.com"
  });
  ga('set', 'dimension1', 'session_5f9dc7425d387f00077e48e4');
  
  ga('send', 'pageview');
</script>

<input type="hidden" name="is_mac" id="is_mac" value="false" />
<input type="hidden" name="mp" id="mp" value="75873953cd404bcc1da88a55ff51e3b4" />
<script>
  (function(e,a){if(!a.__SV){var b=window;try{var c,l,i,j=b.location,g=j.hash;c=function(a,b){return(l=a.match(RegExp(b+"=([^&]*)")))?l[1]:null};g&&c(g,"state")&&(i=JSON.parse(decodeURIComponent(c(g,"state"))),"mpeditor"===i.action&&(b.sessionStorage.setItem("_mpcehash",g),history.replaceState(i.desiredHash||"",e.title,j.pathname+j.search)))}catch(m){}var k,h;window.mixpanel=a;a._i=[];a.init=function(b,c,f){function e(b,a){var c=a.split(".");2==c.length&&(b=b[c[0]],a=c[1]);b[a]=function(){b.push([a].concat(Array.prototype.slice.call(arguments,
  0)))}}var d=a;"undefined"!==typeof f?d=a[f]=[]:f="mixpanel";d.people=d.people||[];d.toString=function(b){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);b||(a+=" (stub)");return a};d.people.toString=function(){return d.toString(1)+".people (stub)"};k="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
  for(h=0;h<k.length;h++)e(d,k[h]);a._i.push([b,c,f])};a.__SV=1.2;b=e.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";c=e.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}})(document,window.mixpanel||[]);
  mixpanel.init("75873953cd404bcc1da88a55ff51e3b4");
</script>
<script>
  mixpanel.track("view page", {"page": window.location.pathname});
</script>
</html>
