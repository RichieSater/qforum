<!DOCTYPE html>
<html>
<head>
<link href='i1.wp.com' rel='dns-prefetch'>
<link href='i2.wp.com' rel='dns-prefetch'>
<link href='i3.wp.com' rel='dns-prefetch'>
<meta content='2HgX9mcLHaPOX6sfaaAkhWtblhEB9yUNw4l6l46e1k4' name='google-site-verification'>
<link rel="shortcut icon" type="image/x-icon" href="external/favicon-q-ac1a76f2c200e9026b5b1147519bb4fab6256910588b831e2411bc6c7c1218c3.png" />
<title>
The Q500US and Q1500US
</title>
<meta content='Say hello to the Q500US and Q1500US: our two brand new universes. These universes are implemented as regular pipeline Filters, so they can be added to any algorithm in a single line of code. To import the Q1500US to your algo or notebook, all you need is: from quantopian.pipeline.filters import Q1500US There are two main benefits of the Q500US and Q1500US. Firstly, they greatly reduce the risk of an order not being filled. Secondly, they allow for more meaningful comparisons between...' name='description'>
<link rel="stylesheet" media="all" href="external/quanto-base-bundle-e8eb6050172aa0d24124d5c24bac90b2cccd88b5b9c7742026c0e9efab038c6e.css" />
<link rel="stylesheet" media="all" href="external/quanto-posts-bundle-aab01368d3f82d8dafc94ee9eabb82e77dc8c9fbbffa952fdcdc744dfa523cf3.css" />
<script src="external/quanto_global-057218867db29d5768131af5d6fb3476cef098e7d9e655108befb903c7ee985e.js"></script>
<script src="external/posts_bundle-3dfd82fa469c393d752e461d837aec9e4e364ae39f49198e34a6626f2180fdf7.js"></script>
<link href='external/logo-q-180x180-0f5a6a439c99203ed4aea6f656e7604c543d287be43d8b17c7591c1131f09a59.png' rel='apple-touch-icon'>
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="KbseryGyNjhQKtLfjakFESiOUkPdsb9p0te0JMCAd+xV3Wjig0Tk2+k3i+7CRq1lEABxKqd9qnJQ2G9OasUVVw==" />
<meta content='width=device-width, initial-scale=1.0' name='viewport'>
<script>
//<![CDATA[
window.quanto_data={};quanto_data.bounce_back_params={"show_modal":null,"feedback_text":null};quanto_data.namespace="public";quanto_data.talib_info={"ADOSC":["Chaikin A/D Oscillator (Volume Indicators)",["fastperiod","3"],["slowperiod","10"]],"ADX":["Average Directional Movement Index (Momentum Indicators)",["timeperiod","14"]],"ADXR":["Average Directional Movement Index Rating (Momentum Indicators)",["timeperiod","14"]],"APO":["Absolute Price Oscillator (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["matype","0"]],"AROON":["Aroon (Momentum Indicators)",["timeperiod","14"]],"AROONOSC":["Aroon Oscillator (Momentum Indicators)",["timeperiod","14"]],"ATR":["Average True Range (Volatility Indicators)",["timeperiod","14"]],"BBANDS":["Bollinger Bands (Overlap Studies)",["timeperiod","5"],["nbdevup","2"],["nbdevdn","2"],["matype","0"]],"BETA":["Beta (Statistic Functions)",["timeperiod","5"]],"CCI":["Commodity Channel Index (Momentum Indicators)",["timeperiod","14"]],"CMO":["Chande Momentum Oscillator (Momentum Indicators)",["timeperiod","14"]],"CORREL":["Pearson's Correlation Coefficient (r) (Statistic Functions)",["timeperiod","30"]],"DEMA":["Double Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"DX":["Average Directional Movement Index (Momentum Indicators)",["timeperiod","14"]],"EMA":["Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"KAMA":["Kaufman Adaptive Moving Average (Overlap Studies)",["timeperiod","30"]],"LINEARREG":["Linear Regression (Statistic Functions)",["timeperiod","14"]],"LINEARREG_ANGLE":["Linear Regression Angle (Statistic Functions)",["timeperiod","14"]],"LINEARREG_INTERCEPT":["Linear Regression Intercept (Statistic Functions)",["timeperiod","14"]],"LINEARREG_SLOPE":["Linear Regression Slope (Statistic Functions)",["timeperiod","14"]],"MA":["Moving average (Overlap Studies)",["timeperiod","30"],["matype","0"]],"MACD":["Moving Average Convergence/Divergence (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["signalperiod","9"]],"MACDEXT":["MACD with controllable MA type (Momentum Indicators)",["fastperiod","12"],["fastmatype","0"],["slowperiod","26"],["slowmatype","0"],["signalperiod","9"],["signalmatype","0"]],"MACDFIX":["Moving Average Convergence/Divergence Fix 12/26 (Momentum Indicators)",["signalperiod","9"]],"MAX":["Highest values over a specified period (Math Operators)",["timeperiod","30"]],"MAXINDEX":["Index of highest value over a specified period (Math Operators)",["timeperiod","30"]],"MFI":["Money Flow Index (Momentum Indicators)",["timeperiod","14"]],"MIDPOINT":["Midpoint over period (Overlap Studies)",["timeperiod","14"]],"MIDPRICE":["Midpoint Price over period (Overlap Studies)",["timeperiod","14"]],"MIN":["Lowest value over a specified period (Math Operators)",["timeperiod","30"]],"MININDEX":["Index of lowest value over a specified period (Math Operators)",["timeperiod","30"]],"MINMAX":["Lowest and highest values over a specified period (Math Operators)",["timeperiod","30"]],"MINMAXINDEX":["Indexes of lowest and highest values over a specified period (Math Operators)",["timeperiod","30"]],"MINUS_DI":["Minus Directional Indicator (Momentum Indicators)",["timeperiod","14"]],"MINUS_DM":["Minus Directional Movement (Momentum Indicators)",["timeperiod","14"]],"MOM":["Momentum (Momentum Indicators)",["timeperiod","10"]],"NATR":["Normalized Average True Range (Volatility Indicators)",["timeperiod","14"]],"PLUS_DI":["Plus Directional Indicator (Momentum Indicators)",["timeperiod","14"]],"PLUS_DM":["Plus Directional Movement (Momentum Indicators)",["timeperiod","14"]],"PPO":["Percentage Price Oscillator (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["matype","0"]],"ROC":["Rate of change: ((price/prevPrice)-1)*100 (Momentum Indicators)",["timeperiod","10"]],"ROCP":["Rate of change Percentage: (price-prevPrice)/prevPrice (Momentum Indicators)",["timeperiod","10"]],"ROCR":["Rate of change ratio: (price/prevPrice) (Momentum Indicators)",["timeperiod","10"]],"ROCR100":["Rate of change ratio 100 scale: (price/prevPrice)*100 (Momentum Indicators)",["timeperiod","10"]],"RSI":["Relative Strength Index (Momentum Indicators)",["timeperiod","14"]],"SMA":["Simple Moving Average (Overlap Studies)",["timeperiod","30"]],"STDDEV":["Standard Deviation (Statistic Functions)",["timeperiod","5"],["nbdev","1"]],"STOCH":["Stochastic (Momentum Indicators)",["fastk_period","5"],["slowk_period","3"],["slowk_matype","0"],["slowd_period","3"],["slowd_matype","0"]],"STOCHF":["Stochastic Fast (Momentum Indicators)",["fastk_period","5"],["fastd_period","3"],["fastd_matype","0"]],"STOCHRSI":["Stochastic Relative Strength Index (Momentum Indicators)",["timeperiod","14"],["fastk_period","5"],["fastd_period","3"],["fastd_matype","0"]],"T3":["Triple Exponential Moving Average (T3) (Overlap Studies)",["timeperiod","5"],["vfactor","0.7"]],"TEMA":["Triple Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"TRIMA":["Triangular Moving Average (Overlap Studies)",["timeperiod","30"]],"TRIX":["1-day Rate-Of-Change (ROC) of a Triple Smooth EMA (Momentum Indicators)",["timeperiod","30"]],"TSF":["Time Series Forecast (Statistic Functions)",["timeperiod","14"]],"ULTOSC":["Ultimate Oscillator (Momentum Indicators)",["timeperiod1","7"],["timeperiod2","14"],["timeperiod3","28"]],"VAR":["Variance (Statistic Functions)",["timeperiod","5"],["nbdev","1"]],"WILLR":["Williams' %R (Momentum Indicators)",["timeperiod","14"]],"WMA":["Weighted Moving Average (Overlap Studies)",["timeperiod","30"]]};quanto_data.nb_preview_url="https://notebooks-preview.prd.pub.quantopian.com";quanto_data.delay_nb_preview_load=false;
//]]>
</script>
<meta content='https://www.quantopian.com/posts/the-q500us-and-q1500us' property='og:url'>
<meta content='The Q500US and Q1500US' property='og:title'>

<input type="hidden" name="env" id="quanto-env" value="production" />
<meta content='550580758292093' property='fb:app_id'>
<meta content='https://www.quantopian.com/posts/the-q500us-and-q1500us' property='og:url'>
<meta content='https://media.quantopian.com/public/og-image-default.png' property='og:image'>
<meta content='The Q500US and Q1500US' property='og:title'>
<meta content='Say hello to the Q500US and Q1500US: our two brand new universes. These universes are implemented as regular pipeline Filters, so they can be added to any algorithm in a single line of code. To import the Q1500US to your algo or notebook, all you need is: from quantopian.pipeline.filters import Q1500US There are two main benefits of the Q500US and Q1500US. Firstly, they greatly reduce the risk of an order not being filled. Secondly, they allow for more meaningful comparisons between...' property='og:description'>
</head>
<script type='application/ld+json'>
  {
    "@context": "http://schema.org",
    "@type": "Organization",
    "url": "https://www.quantopian.com",
    "logo": "https://media.quantopian.com/logos/logo-q-press-red.png"
  }
</script>
<body class='' ontouchstart=''>
<div id='fb-root'></div>
<div class='wrapper'>
<div class='alert-v2 error'>
<div class='message'>
Quantopian's community platform is shutting down. Please read <a href="/posts/quantopians-community-services-are-closing">this post</a> for more information and <a href='/account#account'>download your code</a>.
</div>
</div>
<div class='navbar navbar-default navbar-static-top' id='app-navbar'>
<div class='container-fluid'>
<div class='navbar-header'>
<button class='navbar-toggle collapsed' data-target='#app-navbar-collapse' data-toggle='collapse'>
<span class='icon hamburger-menu'></span>
</button>
<a class='navbar-brand' href='/home'>
<img class='logo-image async-image' data-src='external/logo-q-white-b141ea6018546e5a4ecc3d10d8440ec076fc4385764e948b322828cc70950a76.svg'>
</a>
</div>
<div class='collapse navbar-collapse' id='app-navbar-collapse'>
<ul class='nav navbar-nav navbar-right'>
<li class='dropdown quanto-dropdown-new'>
<li>
<a class='header' href='/docs'>
Documentation
</a>
</li>
<li class='dropdown quanto-dropdown-new'>
<a class='header' data-toggle='dropdown' href='#'>
Learn
</a>
<ul class='dropdown-menu'>
<li>
<a class='mixpanel-button' data-event='main nav getting started clicked' href='/tutorials/getting-started'>Getting Started</a>
</li>
<li>
<a class='mixpanel-button' data-event='main nav tutorials clicked' href='/tutorials'>Tutorials</a>
</li>
<li>
<a class='mixpanel-button' data-event='main nav lectures clicked' href='/lectures'>Lectures</a>
</li>
</ul>
</li>
<li>
<a class='header' href='/posts' id='forum-link'>
Forum
</a>
</li>
<li>
<a class="header" href="/signin?return_to=/posts/the-q500us-and-q1500us">Log In</a>
</li>
</li>

</ul>
</div>
</div>
</div>
<script>
  $(document).ready(function () {
    quanto.instances.fm = new quanto.FeedbackManager();
    quanto.instances.hm = new quanto.headerManager();
  })
</script>


<div class='content content-area new-style'>
<input type="hidden" name="page-id" id="page-id" value="postatomic" />
<script src="external/MathJax.js?config=TeX-AMS_HTML-full.js,Safe" async="async"></script>
<div class='container page-container post-atomic'>
<input id='parent-post-id-val' type='hidden' value='57c72090b76edb27660000eb'>
<div class='post-container' data-post-id='57c72090b76edb27660000eb' id='57c72090b76edb27660000eb'>
<div class='back-button back-to-community'>Back to Community</div>
<div class='post-title'>The Q500US and Q1500US</div>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/573b54451cbccdf0120000fd'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/9c98af4d5851abbf158e1b78e4850ddf?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/573b54451cbccdf0120000fd'>Gil Wassermann</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<span class='posted-at'>posted </span>
<span UTCms='1472667792000' class='quanto-date posted-at'></span>
<div class='pull-right other-actions'>
<div class='dropup inline-block'>
<div class='dropdown share-control other-action-link'>
<div data-toggle='dropdown'>
<div class='share-image'></div>
Share
</div>
<ul class='dropdown-menu share-options-menu'>
<li>
<a class='share-row' href='https://twitter.com/intent/tweet?text=The Q500US and Q1500US&amp;url=https%3A%2F%2Fwww.quantopian.com%2Fposts%2Fthe-q500us-and-q1500us%3Futm_source%3Dwebsite_share%26utm_campaign%3Dthe-q500us-and-q1500us%26utm_medium%3Dtwitter&amp;via=quantopian'>
<i class='icon icon-twitter'></i>
Share on Twitter
</a>
</li>
<li>
<div class='share-row facebook-button'>
<i class='icon icon-facebook'></i>
Share on Facebook
</div>
</li>
<li>
<div class='share-row linkedin-button' data-share-url='https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Fwww.quantopian.com%2Fposts%2Fthe-q500us-and-q1500us%3Futm_source%3Dwebsite_share%26utm_campaign%3Dthe-q500us-and-q1500us%26utm_medium%3Dlinkedin&amp;title=The+Q500US+and+Q1500US+%28Gil+Wassermann%29&amp;source=Quantopian'>
<i class='icon icon-linkedin'></i>
Share on LinkedIn
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>

<div class='tags tag-row'>
<a class='tag mixpanel-button' data-event='tag click' data-mixpanel='API' data-tag-id='55c50e7d8d4710ec6e000001' href='/posts/tag/API/newest'>API</a>
<a class='tag mixpanel-button' data-event='tag click' data-mixpanel='Getting Started' data-tag-id='55c50e7d8d4710ec6e000004' href='/posts/tag/Getting-Started/newest'>Getting Started</a>
<a class='tag mixpanel-button' data-event='tag click' data-mixpanel='Using Data' data-tag-id='55c50e7d8d4710ec6e000008' href='/posts/tag/Using-Data/newest'>Using Data</a>
<a class='tag mixpanel-button' data-event='tag click' data-mixpanel='Tools and Tips' data-tag-id='55c50e7d8d4710ec6e000011' href='/posts/tag/Tools-and-Tips/newest'>Tools and Tips</a>
</div>
<input type="hidden" name="social_fb_post_link" id="social_fb_post_link" value="https://www.quantopian.com/posts/the-q500us-and-q1500us?utm_source=website_share&amp;utm_campaign=the-q500us-and-q1500us&amp;utm_medium=facebook" />
<input type="hidden" name="social_post_image" id="social_post_image" value="external/logo-q-red-outline.png" />
<input type="hidden" name="social_post_author" id="social_post_author" value="Gil Wassermann" />
<div class='body-text'>
<div class='body-text-container post-body'><p>Say hello to the Q500US and Q1500US: our two brand new universes. These universes are implemented as regular pipeline Filters, so they can be added to any algorithm in a single line of code. To import the Q1500US to your algo or notebook, all you need is:</p>

<p><code>from quantopian.pipeline.filters import Q1500US</code></p>

<p>There are two main benefits of the Q500US and Q1500US. Firstly, they greatly reduce the risk of an order not being filled. Secondly, they allow for more meaningful comparisons between strategies as now they will be used as the standard universes for algorithms.</p>

<p>It was clear that the community would also like a parameterized function that can be used to generate any universe. We heard this and have also added <code>make_us_equity_universe</code> to the Quantopian product.</p>

<p>In the workflow of producing a strong alpha factor, selecting a base universe is a quant&#39;s first job. Different strategies will perform better or worse based on the pool of stocks from which it can choose. We hope that the Q500US and Q1500US provide good bases for any strategy. We also hope <code>make_us_equity_universe</code> gives you the flexibility and power to create custom universes that can express subtle and incisive opinions on the market.</p>

<p>Check out the notebook below for an in-depth look at the Q500US, Q1500US and <code>make_us_equity_universe</code>. For a look at the original post outlining the methodology, have a look at <a href="https://www.quantopian.com/posts/the-tradeable500us-is-almost-here">this previous thread</a>.  Also, see the filtering criteria in the <a href="https://www.quantopian.com/help#quantopian_pipeline_filters_Q500US">help docs</a>.</p>

<p>Hope you enjoy!</p>
</div>
</div>
<div class='disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>

</div>

<div class='container page-container post-atomic'>
<div class='section-header reply-header'>
<div class='reply-title'>56 responses</div>
</div>
<div class='replies'>
<div class='post-container response-container' data-post-id='57c722136b5663a00d000109' id='57c722136b5663a00d000109'>
<a href='#57c722136b5663a00d000109'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/53078de492b7e36d1600024d'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/c6f1e1fc48f95e36a0be61af8aa11617?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/53078de492b7e36d1600024d'>Frederik Strikert</a>
</div>
<a UTCms='1472668193000' class='quanto-date posted-at response-posted-at' href='#57c722136b5663a00d000109'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Wow, awesome work. Looking forward to digging into it.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='57c7267bb51684fd9600013f' id='57c7267bb51684fd9600013f'>
<a href='#57c7267bb51684fd9600013f'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5590c016248f1472ae000286'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/1a2b21eaf54a819d57cb3044dba06888?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5590c016248f1472ae000286'>Tim Vidmar</a>
</div>
<a UTCms='1472669313000' class='quanto-date posted-at response-posted-at' href='#57c7267bb51684fd9600013f'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Would you be willing to provide a Q500US predefined universe also for non-pipeline use?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='57c75f0d2a158090d30001e8' id='57c75f0d2a158090d30001e8'>
<a href='#57c75f0d2a158090d30001e8'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1472683798000' class='quanto-date posted-at response-posted-at' href='#57c75f0d2a158090d30001e8'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thanks Gil!  Looks like y&#39;all put a lot of work into it.  Looking forward to taking it for a spin.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='57c77b281be9cba34c000373' id='57c77b281be9cba34c000373'>
<a href='#57c77b281be9cba34c000373'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/527612eb2de84d52740000d5'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/873c5860f8b916285b474f56cbd6f135?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/527612eb2de84d52740000d5'>Deleted User</a>
</div>
<a UTCms='1472690991000' class='quanto-date posted-at response-posted-at' href='#57c77b281be9cba34c000373'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Awesome Gil. Thanks for this.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='57c796f8b40b1b56f700037c' id='57c796f8b40b1b56f700037c'>
<a href='#57c796f8b40b1b56f700037c'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/527612eb2de84d52740000d5'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/873c5860f8b916285b474f56cbd6f135?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/527612eb2de84d52740000d5'>Deleted User</a>
</div>
<a UTCms='1472698113000' class='quanto-date posted-at response-posted-at' href='#57c796f8b40b1b56f700037c'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I want to pick only profitable stocks from Q1500. Is this the right way to do it? Please advise.</p>

<pre><code>def make_pipeline():  
    profitable = mstar.valuation_ratios.ev_to_ebitda &gt; 0  
    pipe = Pipeline(screen=Q1500US() &amp; profitable)  
    sectors = Sector()  
    pipe.add(sectors, &#39;sector&#39;)  
    return pipe  
</code></pre>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='57c7dafb536c2545da00076c' id='57c7dafb536c2545da00076c'>
<a href='#57c7dafb536c2545da00076c'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/55e602a002dd2432b00001d2'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/706508819421d25d2dfb273421dc6887?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/55e602a002dd2432b00001d2'>Burrito Dan</a>
</div>
<a UTCms='1472715522000' class='quanto-date posted-at response-posted-at' href='#57c7dafb536c2545da00076c'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Nice! I like the way you answered the communities calls for tinkering with the universe. Back of the net!  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='57c80342536c2545da00090d' id='57c80342536c2545da00090d'>
<a href='#57c80342536c2545da00090d'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1472725833000' class='quanto-date posted-at response-posted-at' href='#57c80342536c2545da00090d'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Gil -</p>

<p>I haven&#39;t dug into it yet, but how did you end up handling issues with bad data (e.g. missed stock splits)?  Or did it not get rolled in, as I had suggested.  I just saw another one reported on the forum that mucked up and confused a backtest, until the author caught the problem.</p>

<p>Grant  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='57c813789266ab01eb000977' id='57c813789266ab01eb000977'>
<a href='#57c813789266ab01eb000977'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/573b54451cbccdf0120000fd'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/9c98af4d5851abbf158e1b78e4850ddf?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/573b54451cbccdf0120000fd'>Gil Wassermann</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1472729985000' class='quanto-date posted-at response-posted-at' href='#57c813789266ab01eb000977'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Pravin, that should do the trick. If you need any help getting to grips with Pipeline please feel free to reach out.</p>

<p>@Grant, we did not add this functionality. Any automatic screening of stocks with known bad data will lead to lookahead bias in the backtester. While this may make the backtest more accurate, it does this at the expense of not being able to port code to live trading (it is impossible to screen out bad data that has yet to come in).  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='57c82d69536c2545da000acb' id='57c82d69536c2545da000acb'>
<a href='#57c82d69536c2545da000acb'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57c25bfb0ced5d55d30003b0'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/73126a94a66e46af9fb81ab64f476b1e?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57c25bfb0ced5d55d30003b0'>Nicholas Barton</a>
</div>
<a UTCms='1472736626000' class='quanto-date posted-at response-posted-at' href='#57c82d69536c2545da000acb'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thanks for this Gil. Any word on Futures compatibility? I know you guys have been working on that for a while, just curious what kind of outlook you have on ETA.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='57c83f9e536c25be90000b88' id='57c83f9e536c25be90000b88'>
<a href='#57c83f9e536c25be90000b88'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/54460194d718f327fd000380'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e511e4eeb9334ef82f1caa7bd66c36dc?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/54460194d718f327fd000380'>Luca</a>
</div>
<a UTCms='1472741285000' class='quanto-date posted-at response-posted-at' href='#57c83f9e536c25be90000b88'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thanks for your work Gil and for the interesting NB. I&#39;d like to ask some more details regarding the &quot;Limiting Turnover: Smoothing&quot; part. Lots of efforts have been invested in that detail and I am disappointed I don&#39;t clearly see the bad consequences a high turnover can have on an algorithm. Could you elaborate on that please?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='57c84cdf1be9cb04a6000cc9' id='57c84cdf1be9cb04a6000cc9'>
<a href='#57c84cdf1be9cb04a6000cc9'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/573b54451cbccdf0120000fd'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/9c98af4d5851abbf158e1b78e4850ddf?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/573b54451cbccdf0120000fd'>Gil Wassermann</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1472744676000' class='quanto-date posted-at response-posted-at' href='#57c84cdf1be9cb04a6000cc9'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Nicholas, No updates on that I&#39;m afraid, sorry about that.</p>

<p>@Luca Here&#39;s a scenario that might elucidate the situation. Let us say I have a portfolio of 50 stocks in a universe of 100 stocks. Every day this universe changes (so at t there are 100 stocks and at t + 1 there are 100 completely different stocks). This will force my algorithm to sell my portfolio at t and buy 50 new stocks at t + 1. These transactions cost money, and these subtract from the returns that the algorithm itself will generate. Ensuring a low turnover reduces these transaction costs.  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='57c85778c5809ca246000a74' id='57c85778c5809ca246000a74'>
<a href='#57c85778c5809ca246000a74'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/55e602a002dd2432b00001d2'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/706508819421d25d2dfb273421dc6887?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/55e602a002dd2432b00001d2'>Burrito Dan</a>
</div>
<a UTCms='1472747392000' class='quanto-date posted-at response-posted-at' href='#57c85778c5809ca246000a74'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>A better example might be my universe has 500 stocks. Of these, the top 480 stocks that are pretty steady, hardly moving in and out of the screen, just reranking a bit. The bottom 20 are constantly changing, falling just in and just out of the top 500. My strategy might be short mid-cap growth stocks, in which case it would be short many of these constantly changing bottom 20, increasing transactions costs. The hard cut off at 500 is pretty arbitrary, so this would be unnecessarily punishing.</p>

<p>Another way of smoothing would be to keep the top 500 black and white, and instead smooth entries and exits. So, if something falls out of the top 500, I might take a few days to exit, meaning it&#39;s less of an issue if it pops back in the next day. This would be fine for a system that holds for weeks.</p>

<p>Another way would be to remove the size cut off altogether, and just trade all stocks, being careful to keep orders small for low volume small cap stocks.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='57c87312846cb178c200011f' id='57c87312846cb178c200011f'>
<a href='#57c87312846cb178c200011f'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/573b54451cbccdf0120000fd'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/9c98af4d5851abbf158e1b78e4850ddf?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/573b54451cbccdf0120000fd'>Gil Wassermann</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1472754461000' class='quanto-date posted-at response-posted-at' href='#57c87312846cb178c200011f'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Dan, all the examples you mentioned are definitely things we considered and your first example describes a behaviour known as &quot;boundary thrashing&quot; that  proved to be quite tricky to reduce. Our downsampling smoothing method accomplishes the reduction of this type of turnover well. I think you will find that the Q1500US behaves like your second example.  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='57c8bb2f11495ff6af000546' id='57c8bb2f11495ff6af000546'>
<a href='#57c8bb2f11495ff6af000546'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57b10c48dfbc7c49230003b4'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/6f959698982ff50fb555e0bf7212b3f7?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57b10c48dfbc7c49230003b4'>Cory Haberkern</a>
</div>
<a UTCms='1472772919000' class='quanto-date posted-at response-posted-at' href='#57c8bb2f11495ff6af000546'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Gil,</p>

<p>This is awesome, thank you.  As for the bad data/stock split issue that Grant brought up, this was brought to light in James Christopher&#39;s Long-Short Multifactor algo.</p>

<p>Essentially KGC went through two splits in 2005 and the pipeline doesn&#39;t import the split correctly.  Splits should be neutral wrt price and the backtest registered it as a multi-million dollar loss.  Correcting that issue isn&#39;t look ahead bias.</p>

<p>Also, what is the distribution of stocks in the tradeable 1500 among capitalization?</p>

<p>All in all, I plan on using this to do some backtests.  Thank you for the hard work! :-)  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='57c8c527fc34c171080005d3' id='57c8c527fc34c171080005d3'>
<a href='#57c8c527fc34c171080005d3'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/573b54451cbccdf0120000fd'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/9c98af4d5851abbf158e1b78e4850ddf?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/573b54451cbccdf0120000fd'>Gil Wassermann</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1472775470000' class='quanto-date posted-at response-posted-at' href='#57c8c527fc34c171080005d3'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Cory I take your point completely and that&#39;s definitely something we will seek to fix, my point more is that those splits should be dealt with in the data itself as opposed to these universes. TL;DR we strive to clean up all incorrect data, but that should not be addressed in the universe selection process. </p>

<p>With regard to your second question, I do not have exact figures at the moment but if you come across anything interesting while looking into the universes, please share it on the thread!  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='57c8e3f311495f0cfc00000f' id='57c8e3f311495f0cfc00000f'>
<a href='#57c8e3f311495f0cfc00000f'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1472783353000' class='quanto-date posted-at response-posted-at' href='#57c8e3f311495f0cfc00000f'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Gil,</p>

<p>I&#39;m trying to digest the rationale not to include some tools for filtering out bad data.  I guess the argument is that the data errors would have been there historically, and would have affected trading real money.  But then why does Quantopian fix them?  By fixing them, they are creating look-ahead bias, per your thinking, right?  I guess I don&#39;t follow.  It seems that for split errors, in particular, a broker would eventually fix the problem, right?  The money just doesn&#39;t appear or disappear from one&#39;s account; the accounting error would be fixed.  So, there is no look-ahead bias to fix historical data (at least for missed splits).</p>

<p>Yes, you could not do the clean up within the universe selection process, but rather you should not admit erroneous data into the universe selection process in the first place.</p>

<p>Or am I missing something?</p>

<p>Grant  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='57c8eac23b5ec894390003fe' id='57c8eac23b5ec894390003fe'>
<a href='#57c8eac23b5ec894390003fe'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/573b54451cbccdf0120000fd'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/9c98af4d5851abbf158e1b78e4850ddf?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/573b54451cbccdf0120000fd'>Gil Wassermann</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1472785096000' class='quanto-date posted-at response-posted-at' href='#57c8eac23b5ec894390003fe'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Grant. The bad data should be cleaned up in the data source itself not this methodology. Adding checks for this would lead to arbitrary code and longer run-times for the universe selection process.</p>

<p>As for look-ahead bias, this would only occur if there was a &quot;no trade list&quot; based on present evaluation of past information.</p>

<p>You&#39;re definitely right that bad data is an issue, but the solution would be to write more defensive code rather than encapsulate that process in universe selection.  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='57c91c23846cb178f200011e' id='57c91c23846cb178f200011e'>
<a href='#57c91c23846cb178f200011e'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5590c016248f1472ae000286'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/1a2b21eaf54a819d57cb3044dba06888?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5590c016248f1472ae000286'>Tim Vidmar</a>
</div>
<a UTCms='1472797741000' class='quanto-date posted-at response-posted-at' href='#57c91c23846cb178f200011e'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Allow me to repeat my question, please.</p>

<p>For those of us who do not use pipeline, will there be a way of using the Q500US  universe as well? </p>

<p>That would be greatly appreciated.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='57c94aba11495ff353000036' id='57c94aba11495ff353000036'>
<a href='#57c94aba11495ff353000036'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1472809666000' class='quanto-date posted-at response-posted-at' href='#57c94aba11495ff353000036'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Gil -</p>

<p>I don&#39;t want to detract from the primary effort here on the Q500US and Q1500US, and I can see that you would not want to filter out specific stocks that have data problems from within the tool itself; the solution to the garbage-in-garbage-out problem should be to eliminate the garbage in the first place, theoretically.  However, I gather that you&#39;d have to point your universe selection tool to entirely different databases?  You&#39;d have the garbage databases, that contain errors, and the clean databases, that have been purged.  You&#39;d have to give users the option of picking which databases to use.  Am I understanding correctly?  But then it starts to get complicated and expensive, since you actually need separate databases?  Is this the problem?</p>

<p>There are two problems as I see it:</p>

<ol>
<li>Users don&#39;t have access to the list of data problems presumably maintained by Quantopian.  At one point recently, your support listed all the stocks with (split?) problems in a forum posting, but I can&#39;t seem to find it.  I can&#39;t understand why there isn&#39;t a public database, ideally that could be queried from within an algo and the research platform.  I guess the idea is that data errors are not pervasive, and you will eventually converge to a state of instantaneous cleanliness; as problems are found, they will be fixed immediately.<br></li>
<li>Assuming that a user can pull together a list of stocks to be avoided, due to erroneous data, then it seems that they would need to be removed <em>after</em> running your Q500US or Q1500US universe selection process.  This is not ideal, either, although since we are talking about hundreds of stocks in a long-short portfolio, as long as the &quot;no trade list&quot; is short, it&#39;ll work (although if critical benchmarks, e.g. SPY, have errors, it could be a problem).</li>
</ol>

<p>You point toward some solutions:</p>

<blockquote>
<p>The bad data should be cleaned up in the data source itself not this methodology.<br>
the solution would be to write more defensive code rather than encapsulate that process in universe selection.</p>
</blockquote>

<p>Do they have any traction at Quantopian?  In the limit of lots of data errors, your Q500US or Q1500US universe selection process would be kinda pointless, so I&#39;d think it would be something you&#39;d care about.</p>

<p>I guess I continue to see a basic philosophical difference in my thinking and the Q.  What am I missing?</p>

<p>Cheers,</p>

<p>Grant  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='57c957cb02e0c2a5ef00080b' id='57c957cb02e0c2a5ef00080b'>
<a href='#57c957cb02e0c2a5ef00080b'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57b10c48dfbc7c49230003b4'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/6f959698982ff50fb555e0bf7212b3f7?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57b10c48dfbc7c49230003b4'>Cory Haberkern</a>
</div>
<a UTCms='1472813008000' class='quanto-date posted-at response-posted-at' href='#57c957cb02e0c2a5ef00080b'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Gil</p>

<p>Thanks for the explanation. I&#39;ll see what I can do go figure out market caps for Q500/Q1500. I suspect they&#39;ll be large cap companies, mostly.</p>

<p>Thanks again,<br>
Cory  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='57c976b937d1ae0449000129' id='57c976b937d1ae0449000129'>
<a href='#57c976b937d1ae0449000129'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/573b54451cbccdf0120000fd'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/9c98af4d5851abbf158e1b78e4850ddf?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/573b54451cbccdf0120000fd'>Gil Wassermann</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1472820926000' class='quanto-date posted-at response-posted-at' href='#57c976b937d1ae0449000129'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Tim Unfortunately, we are not going to be implementing these universes for non-Pipeline algorithms. If you need any help getting started with Pipeline, feel free to reach out, or have a look at <a href="https://www.quantopian.com/tutorials/pipeline">this</a> tutorial. The learning curve is a little steep but I can promise that Pipeline really is an incredible tool for developing  algorithms.</p>

<p>@Grant I&#39;m not sure I follow your separate databases point. I think the core of your point is that bad data is bad for algorithms. We agree with this. I think we disagree in the way that the issue should be solved. We believe the database itself should have its bad values corrected. If you want to talk more about data issues I suggest creating a thread on the forum. I think that would definitely encourage some good discussion and be a good place for people to flag up possible data errors.</p>

<p>@Cory Here&#39;s a small notebook I wrote up to show the capitalization breakdown of the universes. Your intuition that they are large cap companies is definitely right</p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='57c9fb19c7355160f7000340' id='57c9fb19c7355160f7000340'>
<a href='#57c9fb19c7355160f7000340'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1472854817000' class='quanto-date posted-at response-posted-at' href='#57c9fb19c7355160f7000340'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hello Gil,</p>

<p>The separate database idea was in response to your:</p>

<blockquote>
<p>Adding checks for this would lead to arbitrary code and longer run-times for the universe selection process</p>
</blockquote>

<p>I figured, just create another set of databases that have stocks with erroneous data removed (not fixed).  Then, you could avoid the longer run-times associated with filtering the culprits out within your universe selection process code.  Users could select which databases to use--with or without errors.</p>

<p>I&#39;ll stop discussing the topic here, and consider starting another thread (which would likely go nowhere, since there seems to be little interest in making it straightforward to avoiding errors prior to their being fixed in the databases, which seems to take a long time, typically).  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='57caa0cb71b74efdf20002d7' id='57caa0cb71b74efdf20002d7'>
<a href='#57caa0cb71b74efdf20002d7'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1472897233000' class='quanto-date posted-at response-posted-at' href='#57caa0cb71b74efdf20002d7'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Gil,</p>

<p>I started trying to get the Q500 running, and see that there appears to be a limitation on the algo start date.  Below is a simple modification to the template that is provided for writing an algo (automatically populates the editor).  For a start date of 01/03/2002, I get the error:</p>

<blockquote>
<p>KeyError: Timestamp(&#39;2001-03-13 00:00:00+0000&#39;, tz=&#39;UTC&#39;) There was a<br>
runtime error on line 48.</p>
</blockquote>

<p>If I move the start date to 11/01/2002, the error is resolved; the backtest runs; it will not run for earlier dates.  Presumably, this is because you are using a trailing window of data in the universe selection process, and there are no data prior to 01/03/2002 (or it is an incomplete data set).</p>

<p>Normally, the API generates an error message that tells the user the earliest possible date on which the backtest can start.  Could you do that for the Q500 &amp; Q1500 universes?</p>

<p>Grant</p>

<pre><code>&quot;&quot;&quot;
This is a template algorithm on Quantopian for you to adapt and fill in.  
&quot;&quot;&quot;
from quantopian.algorithm import attach_pipeline, pipeline_output  
from quantopian.pipeline import Pipeline  
from quantopian.pipeline.data.builtin import USEquityPricing  
from quantopian.pipeline.factors import AverageDollarVolume  
from quantopian.pipeline.filters import Q500US  
def initialize(context):  
    &quot;&quot;&quot;  
    Called once at the start of the algorithm.  
    &quot;&quot;&quot;  
    # Rebalance every day, 1 hour after market open.  
    schedule_function(my_rebalance, date_rules.every_day(), time_rules.market_open(hours=1))  
    # Record tracking variables at the end of each day.  
    schedule_function(my_record_vars, date_rules.every_day(), time_rules.market_close())  
    # Create our dynamic stock selector.  
    attach_pipeline(make_pipeline(), &#39;my_pipeline&#39;)  
def make_pipeline():  
    &quot;&quot;&quot;  
    A function to create our dynamic stock selector (pipeline). Documentation on  
    pipeline can be found here: https://www.quantopian.com/help#pipeline-title  
    &quot;&quot;&quot;  

    # Create a dollar volume factor.  
    dollar_volume = AverageDollarVolume(window_length=1)  
    # Pick the top 1% of stocks ranked by dollar volume.  
    high_dollar_volume = dollar_volume.percentile_between(99, 100)  
    pipe = Pipeline(  
        screen = (high_dollar_volume &amp; Q500US()),  
        columns = {  
            &#39;dollar_volume&#39;: dollar_volume  
        }  
    )  
    return pipe  
def before_trading_start(context, data):  
    &quot;&quot;&quot;  
    Called every day before market open.  
    &quot;&quot;&quot;  
    context.output = pipeline_output(&#39;my_pipeline&#39;)  
    # These are the securities that we are interested in trading each day.  
    context.security_list = context.output.index  
def my_assign_weights(context, data):  
    &quot;&quot;&quot;  
    Assign weights to securities that we want to order.  
    &quot;&quot;&quot;  
    pass  
def my_rebalance(context,data):  
    &quot;&quot;&quot;  
    Execute orders according to our schedule_function() timing.  
    &quot;&quot;&quot;  
    pass  
def my_record_vars(context, data):  
    &quot;&quot;&quot;  
    Plot variables at the end of each day.  
    &quot;&quot;&quot;  
    pass  
def handle_data(context,data):  
    &quot;&quot;&quot;  
    Called every minute.  
    &quot;&quot;&quot;  
    pass

</code></pre>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='57caa76e71b74efdf2000304' id='57caa76e71b74efdf2000304'>
<a href='#57caa76e71b74efdf2000304'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1472898931000' class='quanto-date posted-at response-posted-at' href='#57caa76e71b74efdf2000304'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Gil,</p>

<p>I&#39;m getting:</p>

<p><strong>There was a runtime error.<br>
ZeroDivisionError: float division by zero<br>
USER ALGORITHM:69, in my_rebalanceGo to IDE<br>
weight = 1.0/len(context.security_list)</strong></p>

<p>The error occurs after about 80% of the backtest has run.  Why would the number of securities drop to zero out-of-the-blue?</p>

<p>Grant  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='57cab48871b74e9cb60003aa' id='57cab48871b74e9cb60003aa'>
<a href='#57cab48871b74e9cb60003aa'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/573b54451cbccdf0120000fd'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/9c98af4d5851abbf158e1b78e4850ddf?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/573b54451cbccdf0120000fd'>Gil Wassermann</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1472902287000' class='quanto-date posted-at response-posted-at' href='#57cab48871b74e9cb60003aa'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Grant, you will see from the notebook that the key metric for the Q500US is <code>AverageDollarVolume(window_length=200)</code>. As our database stretches back to 2002 it will only work 200-days after the start of our data. This still gives 13+ years of backtesting potential.</p>

<p>As for the second point, you are using two screens, <code>high_dollar_volume &amp; Q500US()</code>. It is possible that there is no overlap between these two screens, giving you <code>len(context.security_list)</code> equal to 0, causing your error  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='57caba2c71b74e9cb60003c1' id='57caba2c71b74e9cb60003c1'>
<a href='#57caba2c71b74e9cb60003c1'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1472903738000' class='quanto-date posted-at response-posted-at' href='#57caba2c71b74e9cb60003c1'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Gil,</p>

<p>Thanks for the quick feedback.  I wasn&#39;t so concerned about whether it is 13 or 14 years of backtesting, but that the error is not obvious.  I suggest that you make it consistent with what I&#39;ve seen: the error report includes the earliest possible date that the backtest can be started when the 
<code>history</code> look-back window requires data prior to 1/3/2002.  Is this possible to include?  I can provide an example if you are not familiar with this behavior.</p>

<p>I&#39;ll re-run without the <code>high_dollar_volume</code> criterion to see if that clears things up.</p>

<p>By the way, I suggest adding the <code>Q500US()</code> (or <code>Q1500US()</code>) to the auto-template that is provided when one initiates an algo from scratch.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='57cad43071b74e9cb6000485' id='57cad43071b74e9cb6000485'>
<a href='#57cad43071b74e9cb6000485'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1472910392000' class='quanto-date posted-at response-posted-at' href='#57cad43071b74e9cb6000485'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Now I&#39;m getting:</p>

<p><strong>There was a runtime error.<br>
MemoryError<br>
Algorithm used too much memory. Need to optimize your code for better performance. Learn More</strong></p>

<p>Also, mid 2015 there is a huge spike in turn-over.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='57caee3471b74efdf2000544' id='57caee3471b74efdf2000544'>
<a href='#57caee3471b74efdf2000544'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/573b54451cbccdf0120000fd'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/9c98af4d5851abbf158e1b78e4850ddf?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/573b54451cbccdf0120000fd'>Gil Wassermann</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1472917049000' class='quanto-date posted-at response-posted-at' href='#57caee3471b74efdf2000544'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Grant The memory error is something we are aware of and is a result of two factors (1) The long backtest length that you selected and (2) The amount of data used to store transaction details for 500 orders placed every day. We are looking into ways to solve this, but the bottom line is that the number of transactions that your algorithm is using is very high. If you want to run this &quot;Equal Weighted Q500US&quot; algorithm, I suggest running it from 2006 onwards. TL;DR the Q500US is not the issue, the number of transactions that your algorithm places is.</p>

<p>It is great that you bring this up as this is something we are actively trying to fix. However, this algorithm presents and upper bound for Q500US usage and we have ensured that it is good to go for alpha factor algorithms, where fewer transactions need to be stored. </p>

<p>As for turnover, I do not see where you are observing these metrics, but if you want a sense of the turnover in 2015, this is shown in the notebook above,  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='57cb0188c8c415b713000367' id='57cb0188c8c415b713000367'>
<a href='#57cb0188c8c415b713000367'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1472921997000' class='quanto-date posted-at response-posted-at' href='#57cb0188c8c415b713000367'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Gil,</p>

<p>If you run the backtest, you&#39;ll see:</p>

<p><img src="https://i.imgur.com/UObiirP.png" alt=""></p>

<p>There is a big spike in the transactions in mid-2015.  I&#39;ll also send a screen shot to Q support.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='57cb286c742883414b000133' id='57cb286c742883414b000133'>
<a href='#57cb286c742883414b000133'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1472931955000' class='quanto-date posted-at response-posted-at' href='#57cb286c742883414b000133'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Gil,</p>

<p>Here&#39;s an example that trades weekly, and it also shows the spike in turnover in mid-2015, relative to the transaction activity at other times.</p>

<p>Grant  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='57cbad18f403d0739200065d' id='57cbad18f403d0739200065d'>
<a href='#57cbad18f403d0739200065d'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/514a23ed46a2329dd8000027'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f292ab7887c2e8698d013b40e1718e8b?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/514a23ed46a2329dd8000027'>Suminda Dharmasena</a>
</div>
<a UTCms='1472965920000' class='quanto-date posted-at response-posted-at' href='#57cbad18f403d0739200065d'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><blockquote>
<p>TL;DR the Q500US is not the issue, the number of transactions that your algorithm places is.</p>
</blockquote>

<p>I would agree Q500US is not the issue but still the issue is in your side which you have to try to address to make Q more viable and easy to use for wider set of scenarios.</p>

<p>For a simple algo like this is running into memory issues you cannot say it is the fault of the algo.  I would expect a user should be able to run more complicated algos without memory issues. Have a system which off loads past calculation into a DB or serialise it on disk or use memory mapped files to store the data where only needed data is in memory.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='57cc0030742883414b0008e9' id='57cc0030742883414b0008e9'>
<a href='#57cc0030742883414b0008e9'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1472987191000' class='quanto-date posted-at response-posted-at' href='#57cc0030742883414b0008e9'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>A similar memory limit issue exists for the research platform.  Loading a large backtest data set via 
<code>get_backtest</code> will consume RAM, and eventually crash at the 4 GB limit.  I&#39;m finding that anything that trades hundreds of stocks daily starts to bump up against the limit, for backtests back to 2002.</p>

<p>A topic for a different thread, but it is perplexing, since Q must have infinite disk space.  Maybe the read/write is not as efficient as one would have in a desktop computing environment?  Maybe the disk storage is distributed/cloud-based and relatively slow, so everything needs to be in RAM local to the processor?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='57cc0a2ead60fa742e0008e6' id='57cc0a2ead60fa742e0008e6'>
<a href='#57cc0a2ead60fa742e0008e6'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1472989747000' class='quanto-date posted-at response-posted-at' href='#57cc0a2ead60fa742e0008e6'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Gil,</p>

<p>Here&#39;s a run on the Q1500US.  If I&#39;m reading things correctly, mid-2015, it lands on a single stock (PFG).  Is this due to the pipeline universe selection or something in my implementation of it?  Is it coming from the Q1500US only picking PFG?</p>

<p>Grant</p>

<pre><code>&quot;&quot;&quot;
This is a template algorithm on Quantopian for you to adapt and fill in.  
&quot;&quot;&quot;
from quantopian.algorithm import attach_pipeline, pipeline_output  
from quantopian.pipeline import Pipeline  
from quantopian.pipeline.data.builtin import USEquityPricing  
from quantopian.pipeline.factors import AverageDollarVolume  
from quantopian.pipeline.filters import Q1500US  
def initialize(context):  
    set_commission(commission.PerTrade(cost=0))  
    set_slippage(slippage.FixedSlippage(spread=0.00))  
    &quot;&quot;&quot;  
    Called once at the start of the algorithm.  
    &quot;&quot;&quot;  
    # Rebalance every day, 1 hour after market open.  
    schedule_function(my_rebalance, date_rules.week_start(days_offset=1), time_rules.market_open(hours=1))  
    # Record tracking variables at the end of each day.  
    # schedule_function(my_record_vars, date_rules.every_day(), time_rules.market_close())  
    # Create our dynamic stock selector.  
    attach_pipeline(make_pipeline(), &#39;my_pipeline&#39;)  
def make_pipeline():  
    &quot;&quot;&quot;  
    A function to create our dynamic stock selector (pipeline). Documentation on  
    pipeline can be found here: https://www.quantopian.com/help#pipeline-title  
    &quot;&quot;&quot;  

    # Create a dollar volume factor.  
    dollar_volume = AverageDollarVolume(window_length=1)  
    # Pick the top 1% of stocks ranked by dollar volume.  
    high_dollar_volume = dollar_volume.percentile_between(99, 100)  
    pipe = Pipeline(  
        # screen = (high_dollar_volume &amp; Q500US()),  
        screen = Q1500US(),  
        columns = {  
            &#39;dollar_volume&#39;: dollar_volume  
        }  
    )  
    return pipe  
def before_trading_start(context, data):  
    &quot;&quot;&quot;  
    Called every day before market open.  
    &quot;&quot;&quot;  
    context.output = pipeline_output(&#39;my_pipeline&#39;)  
    # These are the securities that we are interested in trading each day.  
    context.security_list = context.output.index  
def my_assign_weights(context, data):  
    &quot;&quot;&quot;  
    Assign weights to securities that we want to order.  
    &quot;&quot;&quot;  
    pass  
def my_rebalance(context,data):  
    &quot;&quot;&quot;  
    Execute orders according to our schedule_function() timing.  
    &quot;&quot;&quot;  
    # pass  
    weight = 1.0/len(context.security_list)  
    for stock in context.security_list:  
        if data.can_trade(stock):  
            order_target_percent(stock,weight)  
    for stock in context.portfolio.positions.keys():  
        if stock not in context.security_list:  
            if data.can_trade(stock):  
                order_target_percent(stock,0)  
def my_record_vars(context, data):  
    &quot;&quot;&quot;  
    Plot variables at the end of each day.  
    &quot;&quot;&quot;  
    pass  
</code></pre>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='57cc1d5292e4adf61c000076' id='57cc1d5292e4adf61c000076'>
<a href='#57cc1d5292e4adf61c000076'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/573b54451cbccdf0120000fd'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/9c98af4d5851abbf158e1b78e4850ddf?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/573b54451cbccdf0120000fd'>Gil Wassermann</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1472994651000' class='quanto-date posted-at response-posted-at' href='#57cc1d5292e4adf61c000076'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Suminda To address your point &quot;I would expect a user should be able to run more complicated algos without memory issues&quot;, that is the case. Many members of the community are coming up with interesting, statistically creative algorithms. The one here just trades an equal-weighted basket of Q500US stocks. The issue here is not complexity, but memory space (taken up by transactions). Also, with regards to your point on memory management, the team here at Q has made it so that the way algorithms use memory is highly optimized, using advanced techniques to make your memory allocation on our servers go as far as possible.</p>

<p>@Grant Q definitely does not have &quot;infinite disk space&quot;. We have a large amount of computing power, but we need to ensure that that is available to use for our entire community. Again, the issue you are talking about here is due to the vast number of transactions in these algorithms that you are writing. 500 transactions per day, 252 business days per year over 13 years gives 1638000 transactions, all of which can be inspected and queried in <code>get_backtest</code>. I encourage you to turn on commission and slippage models and you will see how much if the algorithm&#39;s return is eroded by transaction costs. This is the same issue that the Q500US tries to solve by reducing turnover.</p>

<p>As for your Q1500US spot, this is something we will look into. We subjected this product to extensive testing and this never came up. We will get back to you when we have an idea of what caused this, but there is certainly something odd going on here.  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='57cc29d4f403d0bb0e000a4b' id='57cc29d4f403d0bb0e000a4b'>
<a href='#57cc29d4f403d0bb0e000a4b'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/514a23ed46a2329dd8000027'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f292ab7887c2e8698d013b40e1718e8b?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/514a23ed46a2329dd8000027'>Suminda Dharmasena</a>
</div>
<a UTCms='1472997849000' class='quanto-date posted-at response-posted-at' href='#57cc29d4f403d0bb0e000a4b'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Just testing for one factor with 500 stocks in Alphan seems to hit the memory limit in anything more than 2 to 3 years so  there is infact a memory issue which ideally should be overcome. It is frustrating to have a tool like Alphan but not being really able to use it due to memory issues.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='57cc4048742883414b000aef' id='57cc4048742883414b000aef'>
<a href='#57cc4048742883414b000aef'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1473003597000' class='quanto-date posted-at response-posted-at' href='#57cc4048742883414b000aef'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thanks Gil -</p>

<p>I would back up Suminda&#39;s comment.  I am working on an algo that trades a portfolio of 200 stocks daily (1 set of trades per day), with the commission &amp; slippage models set as standard--it is profitable, and realistic at $10M.  If I run a backtest back to 2002, I can&#39;t load all of the backtest data into the research platform w/ 
<code>get_backtest</code>.  I have a support request in, but there&#39;s been no response.</p>

<p>It is my contention that you are over-constrained on computing resources, relative to those available to developers at hedge funds.  I think you need to find a way to break through this limitation, while still providing a base level of support to all 80,000+ users.  It&#39;ll eventually come, I expect.  It is a different paradigm.  For me, if I were running out of resources, I&#39;d just get a used workstation-class pc, load it up with memory and drive space, maybe a GPU, and the problem would be solved.  I understand you have to work the solution from a different angle.</p>

<p>Regarding the apparent glitch/bug, glad to help.  Note that I might not have found it without running an extensive backtest, so sometimes it helps to go to extremes to really &quot;kick the tires.&quot;  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='57dd3935b29ec1996c00035e' id='57dd3935b29ec1996c00035e'>
<a href='#57dd3935b29ec1996c00035e'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1474115901000' class='quanto-date posted-at response-posted-at' href='#57dd3935b29ec1996c00035e'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Gil,</p>

<p>Does the Q500US and Q1500US automatically remove anything in 
<code>security_lists.leveraged_etf_list</code> or would I need to purge the universe, post-pipeline?</p>

<p>Grant</p>

<p>EDIT - As I understand, the Q500US and Q1500US will be, by default, completely devoid of ETFs.  Correct?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='57dea554f4b69fa9b1000aa8' id='57dea554f4b69fa9b1000aa8'>
<a href='#57dea554f4b69fa9b1000aa8'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1474209117000' class='quanto-date posted-at response-posted-at' href='#57dea554f4b69fa9b1000aa8'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Gil,</p>

<p>Another quick question -</p>

<p>I don&#39;t understand why the attached backtest takes so long to run, in light of my understanding of your implementation of the Q1500US.  I had the impression that you would be pre-computing the universe, point-in-time.  There would be no computations associated with determining the Q1500US universe, for backtesting.  However, the backtest is painfully slow.  Is this expected?  Note that there are no transactions, so I have to think that all of the overhead is somehow associated with pipeline.</p>

<p>Grant  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='57dff6c0f1be6f2b7c000512' id='57dff6c0f1be6f2b7c000512'>
<a href='#57dff6c0f1be6f2b7c000512'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/573b54451cbccdf0120000fd'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/9c98af4d5851abbf158e1b78e4850ddf?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/573b54451cbccdf0120000fd'>Gil Wassermann</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1474295501000' class='quanto-date posted-at response-posted-at' href='#57dff6c0f1be6f2b7c000512'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Grant,</p>

<p>The universes do remove ETFs, so no need to do this.</p>

<p>The Q1500US is not precomputed, it is a series of Pipeline function calls that can be used out of the box. Your algorithm is doing most of the heavy lifting that one would associate with an algo, with the exception of ordering logic.  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='57e0aae5c063a9b4c10001f1' id='57e0aae5c063a9b4c10001f1'>
<a href='#57e0aae5c063a9b4c10001f1'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/514a23ed46a2329dd8000027'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f292ab7887c2e8698d013b40e1718e8b?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/514a23ed46a2329dd8000027'>Suminda Dharmasena</a>
</div>
<a UTCms='1474341611000' class='quanto-date posted-at response-posted-at' href='#57e0aae5c063a9b4c10001f1'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I thinks it makes sense to pre calculate this so more resources are available for the users. Q500 and Q1500 will be the same across all users.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='57e0f8b6d73bba90db000b58' id='57e0f8b6d73bba90db000b58'>
<a href='#57e0f8b6d73bba90db000b58'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1474361535000' class='quanto-date posted-at response-posted-at' href='#57e0f8b6d73bba90db000b58'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Gil,</p>

<p>I thought I&#39;d re-run the code above (<a href="https://www.quantopian.com/posts/the-q500us-and-q1500us#57cc0a2ead60fa742e0008e6">https://www.quantopian.com/posts/the-q500us-and-q1500us#57cc0a2ead60fa742e0008e6</a>) to confirm that you&#39;d fixed the reported problem, and I got this error message:</p>

<pre><code>Something went wrong. Sorry for the inconvenience. Try using the built-in debugger to analyze your code. If you would like help, send us an email.  
</code></pre>

<p>Perhaps unrelated to application of the Q1500US, but I thought I&#39;d bring it to your attention, just in case.  Was the problem fixed (apparently associated with the stock PFG), by the way, since I was unable to verify?</p>

<p>Any thoughts on the execution speed for my code posted above (<a href="https://www.quantopian.com/posts/the-q500us-and-q1500us#57dea554f4b69fa9b1000aa8">https://www.quantopian.com/posts/the-q500us-and-q1500us#57dea554f4b69fa9b1000aa8</a>)?  There&#39;s an awful lot of overhead just to spit out a list of stocks (that could be determined ahead of time).  What&#39;s going on?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='57e2ce0b57e9c947ce00119f' id='57e2ce0b57e9c947ce00119f'>
<a href='#57e2ce0b57e9c947ce00119f'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/573b54451cbccdf0120000fd'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/9c98af4d5851abbf158e1b78e4850ddf?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/573b54451cbccdf0120000fd'>Gil Wassermann</a>
<img class='quantopian-badge async-image' data-src='https://qf.quantopian.com/assets/logos/staff-q-red-stroke-095008cf53acafb1da63369cad14e3083d49d13eea83f592dd3dd0d5f0474fcc.svg'>
</div>
<a UTCms='1474481689000' class='quanto-date posted-at response-posted-at' href='#57e2ce0b57e9c947ce00119f'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Suminda and Grant,</p>

<p>Your idea of precalculating the universe is definitely something we considered in developing the Q500US. Although this would be incredibly useful in backtesting, live trading using the Q500US would be far harder.</p>

<p>I believe that he problem has been fixed. It was based on a way we were dealing with fundamental data as opposed to an issue with the universe itself.</p>

<p>Although I have not delved into your algorithm in great detail, I would say that the slow speed is due to the fact that you are rebalancing your algorithm once every week. The main time cost here will be the ordering logic used in this rebalance. I would recommend using the Q1500US on an alpha factor to see how it performs for its intended purpose.  </p>
</div>
<div class='collapsed disclaimer-minimized-wrapper'>
<div class='title'>Disclaimer</div>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian. In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>
</div>
</div>

</div>
</div>

<div class='post-container response-container' data-post-id='57e4f5eb07f55b477d000136' id='57e4f5eb07f55b477d000136'>
<a href='#57e4f5eb07f55b477d000136'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1474622963000' class='quanto-date posted-at response-posted-at' href='#57e4f5eb07f55b477d000136'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Gil -</p>

<p>I just ran the attached backtest, and it took ~ 30 minutes to run.  Yet it does nothing other than keep the universe up-to-date (no transactions, no recording of variables, no logging, etc.).  So, to run a full backtest, over the maximum lookback period incurs an overhead compute time of ~ 30 minutes.  It seems too long, no?</p>

<p>I don&#39;t understand your point regarding precalculating the universe for live trading.  Why would this be problematic?  If it takes me 30 minutes to run the attached algo, wouldn&#39;t it take about the same time on your end to write out the new point-in-time universe?  I don&#39;t follow.  It doesn&#39;t sound difficult.  Or maybe it just doesn&#39;t make sense, because if users are doing other things in pipeline, their backtests will be slow, anyway?  Or maybe some of your databases don&#39;t get updated until just before market open (you wouldn&#39;t have 30 minutes to run the script, do QC, etc.).?  How did you decide not to do the precalculating, given that it would seem to be a natural approach?  </p>

<p>Would it be feasible for individual users to do the precalculating in the research platform, store the point-in-time universe in memory, and then run backtests using the list?  Would this speed things up dramatically?  I&#39;m just wondering, if all I want is the point-in-time universe, could I just spit it out, and then use it in a backtest within the research platform, versus chug-chug-chugging along in the backtester, waiting for it to do whatever it is doing?</p>

<p>Grant  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='57e55d3007f55b3f490001d0' id='57e55d3007f55b3f490001d0'>
<a href='#57e55d3007f55b3f490001d0'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/514a23ed46a2329dd8000027'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f292ab7887c2e8698d013b40e1718e8b?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/514a23ed46a2329dd8000027'>Suminda Dharmasena</a>
</div>
<a UTCms='1474649403000' class='quanto-date posted-at response-posted-at' href='#57e55d3007f55b3f490001d0'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I think what grant is trying to get at is that  Q500US and Q1500US (an perhaps may be Q1000 and Q100 - my thinking) should be should be a dataset. This will solve the time issue for the users.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='57e573710ae5b522a5000070' id='57e573710ae5b522a5000070'>
<a href='#57e573710ae5b522a5000070'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/55ca383fd44012836000030e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/c8d15f8611a345e63fc937114405b2e3?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/55ca383fd44012836000030e'>Evan Pease</a>
</div>
<a UTCms='1474655095000' class='quanto-date posted-at response-posted-at' href='#57e573710ae5b522a5000070'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I&#39;m also seeing that backtest performance is very negatively affected once I started integrating QUS500 and QUS1500 into my algos. In fact the ones I really care about are timing out now.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='57e59ab75b38e377070000f6' id='57e59ab75b38e377070000f6'>
<a href='#57e59ab75b38e377070000f6'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1474665149000' class='quanto-date posted-at response-posted-at' href='#57e59ab75b38e377070000f6'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>It is not clear that the slowness is related to the Q500US &amp; Q1500US.  It may just be under the hood in pipeline.  Somewhere I&#39;d heard that the fundamentals are slow.  Maybe I should try a price-only query?  See if it is a lot faster?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='57e59c73dbcf58a92c0000fc' id='57e59c73dbcf58a92c0000fc'>
<a href='#57e59c73dbcf58a92c0000fc'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/55ca383fd44012836000030e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/c8d15f8611a345e63fc937114405b2e3?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/55ca383fd44012836000030e'>Evan Pease</a>
</div>
<a UTCms='1474665601000' class='quanto-date posted-at response-posted-at' href='#57e59c73dbcf58a92c0000fc'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Grant - I had given up running this particular algo a couple of days ago because of time outs. I just tried running it again and they are no longer timing out and are running a little faster. Just catching up on the thread, Gil mentioned they fixed an issue a couple of days ago so that probably was the culprit. Sorry for raising an alarm before catching up on the whole thread.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='57e59f711ce352bc3a000105' id='57e59f711ce352bc3a000105'>
<a href='#57e59f711ce352bc3a000105'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1474666361000' class='quanto-date posted-at response-posted-at' href='#57e59f711ce352bc3a000105'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Same here.  It self-corrected or was fixed by a human.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='57f419317ec267e81a00004d' id='57f419317ec267e81a00004d'>
<a href='#57f419317ec267e81a00004d'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/54e909c1f6a2b3c56c0001d7'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f8ba778b75af9578cb4dfe73d9d05673?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/54e909c1f6a2b3c56c0001d7'>Anh Nguyen</a>
</div>
<a UTCms='1475615035000' class='quanto-date posted-at response-posted-at' href='#57f419317ec267e81a00004d'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi,</p>

<p>Can you add these universe filters to zipline?</p>

<p>Best,  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5805eb7693c1cf97e10003be' id='5805eb7693c1cf97e10003be'>
<a href='#5805eb7693c1cf97e10003be'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56406b03491ea6ba6400026e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/feb4cbf34749af2eb518ca1110c1a4e3?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56406b03491ea6ba6400026e'>Thomas Chang</a>
</div>
<a UTCms='1476782974000' class='quanto-date posted-at response-posted-at' href='#5805eb7693c1cf97e10003be'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Gil,</p>

<p>I use the Q1500US in my algo but find out, many of the stocks in Q1500US are penny stocks. </p>

<p>Cheers</p>

<p>Thomas  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='591bfd3c42bd8c00109714b6' id='591bfd3c42bd8c00109714b6'>
<a href='#591bfd3c42bd8c00109714b6'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/55e602a002dd2432b00001d2'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/706508819421d25d2dfb273421dc6887?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/55e602a002dd2432b00001d2'>Burrito Dan</a>
</div>
<a UTCms='1495006524000' class='quanto-date posted-at response-posted-at' href='#591bfd3c42bd8c00109714b6'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hey, I think the name Q500US can be a bit misleading. It&#39;s the top 500 by liquidity, not by market cap. Therefore, you may want to do this, to ensure you have liquid large caps:</p>

<pre><code>universe        = Q500US() &amp; MarketCap().top(500)  
</code></pre>

<p>Or even:</p>

<pre><code>universe        = Q1500US() &amp; MarketCap().top(500)  
</code></pre>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='591c5c24adb3b8654fd0f0e3' id='591c5c24adb3b8654fd0f0e3'>
<a href='#591c5c24adb3b8654fd0f0e3'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/55a4923a237f22df5200047f'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/c76735487aaab786e7e8af3f372760f0?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/55a4923a237f22df5200047f'>Madona Syombua</a>
</div>
<a UTCms='1495030820000' class='quanto-date posted-at response-posted-at' href='#591c5c24adb3b8654fd0f0e3'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Brilliant.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='59c017a9fe5bac000d079fe0' id='59c017a9fe5bac000d079fe0'>
<a href='#59c017a9fe5bac000d079fe0'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/58b0771d53051e3b9941a21b'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/9d830ddc746c91420cca4157fd19f6da?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/58b0771d53051e3b9941a21b'>Jack FM</a>
</div>
<a UTCms='1505761193000' class='quanto-date posted-at response-posted-at' href='#59c017a9fe5bac000d079fe0'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hello,<br>
if many of Q1500US are penny stocks with a small market cap, is that still ok to trade  these in my Algo? Is there a problem in trading penny stocks ?<br>
Wouldn&#39;t be better that these stocks are excluded directly from Q1500US?<br>
Thanks  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='59c01c024b91b9000dba7d12' id='59c01c024b91b9000dba7d12'>
<a href='#59c01c024b91b9000dba7d12'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/55e602a002dd2432b00001d2'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/706508819421d25d2dfb273421dc6887?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/55e602a002dd2432b00001d2'>Burrito Dan</a>
</div>
<a UTCms='1505762306000' class='quanto-date posted-at response-posted-at' href='#59c01c024b91b9000dba7d12'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>The definition I believe is a share-price below $5. Not that this means a huge amount, but it can be evidence the company has tanked in value, or that the trading costs will be high as a percentage. It&#39;s generally applied to illiquid stocks that have little published information. Given that Q1500US is top 1500 by volume, I suspect iliiquidity isn&#39;t an issue. </p>

<p>Do you have some examples?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='59f1be5f32ccd505ec975fa1' id='59f1be5f32ccd505ec975fa1'>
<a href='#59f1be5f32ccd505ec975fa1'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/58eb064c74644c0010a47498'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/cc4afd4211ee4e940666524a96c1d807?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/58eb064c74644c0010a47498'>Michael</a>
</div>
<a UTCms='1509015135000' class='quanto-date posted-at response-posted-at' href='#59f1be5f32ccd505ec975fa1'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Gil, does the universe also include REIT? Because I found (WRI US Equity) which is REIT in the Q1500US  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5d71a2f38e86d550a6c0818b' id='5d71a2f38e86d550a6c0818b'>
<a href='#5d71a2f38e86d550a6c0818b'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5d6da047d82c657eb7d35abe'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/c6d447236a3a6f9fa9a9578ea118ab74?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5d6da047d82c657eb7d35abe'>Jon Swanton</a>
</div>
<a UTCms='1567728371000' class='quanto-date posted-at response-posted-at' href='#5d71a2f38e86d550a6c0818b'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thanks Gil!  </p>
</div>
</div>
</div>

</div>
<div class='sign-in-please'>
Please <a href='/signin?return_to=/posts/the-q500us-and-q1500us'>sign in</a> or
<a href='/users/sign_up?redirect_to=/posts/the-q500us-and-q1500us'>join Quantopian</a> to
post a reply.
</div>
</div>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId: "550580758292093",
      status: false,
      cookie: true,
      xfbml: true
    });
  };
  
  (function(d, debug){
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) {return;}
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
    ref.parentNode.insertBefore(js, ref);
  }(document, /*debug*/ false));
  
  window.twttr = (function (d,s,id) {
    var t, js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return; js=d.createElement(s); js.id=id;
    js.src="//platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs);
    return window.twttr || (t = { _e: [], ready: function(f){ t._e.push(f) } });
  }(document, "script", "twitter-wjs"));
</script>
<script>
  $(document).ready(function () {
    quanto.instances.pm = new quanto.PostManager(false)
  });
</script>

<div class='login-footer'>
<div class='container'>
<div class='login-footer-text'>
Become an expert in quant finance through Quantopian's hands-on education.
</div>
<div class='login-footer-button'>
<button class='btn btn-v2 stroke join-modal-link mixpanel-button' data-event='anon join footer click posts' data-mixpanel='click'>
Join Now
</button>
</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='error-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'>Error</span>
</div>
<div class='modal-body body-content'>
<p>Sorry, something went wrong.  Try again or contact us by <a class='feedback-link'>sending feedback</a>.</p>
</div>
<div class='modal-footer'>
<button class='btn btn-v2 blue action-button' data-dismiss='modal' href='#'>Close</button>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='confirmation-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'></span>
</div>
<div class='modal-body body-content'></div>
<div class='modal-footer'>
<div class='pull-right'>
<button class='btn btn-v2 border' data-dismiss='modal'>Cancel</button>
<button class='btn btn-v2 blue action-button' data-dismiss='modal'></button>
</div>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='message-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'></span>
</div>
<div class='modal-body body-content'></div>
<div class='modal-footer'>
<button class='btn btn-v2 blue action-button' data-dismiss='modal' id='message-modal-close'>Close</button>
</div>

</div>
</div>
</div>

<div class='always-bootstrap3-modals'>
<div class='fade modal quanto-modal-v2' id='join-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header visible-small'>
<span class='title'>
Join Quantopian.  It's Free!
</span>
<div class='modal-x-out visible-xs'></div>
</div>
<div class='modal-body'>
<div class='flex-wrap'>
<div class='join-left-pane hidden-small'>
<div class='margin_30l'>
<div class='join-hero-text'>
Join Quantopian.  It's Free!
</div>
<div class='join-benefits'>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image code'></div>
</div>
<div class='join-text'>
Use our research platform, backtester, and dozens of clean data sets.
</div>
</div>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image learn'></div>
</div>
<div class='join-text'>
Learn with our hands-on education and community forums.
</div>
</div>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image win'></div>
</div>
<div class='join-text'>
Enter to win cash prizes in our contest.
</div>
</div>
</div>
<div class='hidden saved-reminder'>
Don't worry, all your work is already saved.
</div>
</div>
</div>
<div class='join-right-pane'>
<div class='hidden-small'>
<div class='button-pane'>
<a class="button btn-v2 user-form-btn" href="/signin">Already a Quantopian member?</a>
</div>
</div>
<div class='visible-small'>
<div class='already-member'>
<a href='/signin'>Already a Quantopian member?</a>
</div>
</div>
<form class="quanto-form-v2" id="new-user-modal-form" action="/users" accept-charset="UTF-8" data-remote="true" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><div class='error-message hidden'>
<div class='message'></div>
</div>
<div class='name-group'>
<div class='form-group inline-block'>
<label for="user_firstname">First Name</label>
<input class="form-control firstname" pattern=".*" required="required" autocomplete="off" autofocus="autofocus" type="text" name="user[firstname]" id="user_firstname" />
</div>
<div class='form-group inline-block'>
<label for="user_lastname">Last Name</label>
<input class="form-control" value="" pattern=".*" required="required" autocomplete="off" type="text" name="user[lastname]" id="user_lastname" />
</div>
</div>
<div class='form-group'>
<label for="user_email">Email</label>
<input class="form-control" value="" pattern=".*" required="required" autocomplete="off" type="email" name="user[email]" id="user_email" />
</div>
<div class='form-group'>
<label for="user_password">Password</label>
<input autocomplete="off" class="form-control" pattern=".*" required="required" type="password" name="user[password]" id="user_password" />
</div>
<div class='checkbox eula'>
<input id='eula-checkbox' type='checkbox'>
<div class='quanto-checkbox'></div>
<label for='eula-checkbox' id='checkbox-label'>I accept the <a href='/policies/terms' target='_blank'>Terms Of Use</a> and <a href='/policies/privacy' target='_blank'>Privacy Policy</a>.</label>
</div>
<div class='checkbox mailchimp-box'>
<input name="user[allow_marketing_emails]" type="hidden" value="0" /><input type="checkbox" value="1" name="user[allow_marketing_emails]" id="user_allow_marketing_emails" />
<div class='quanto-checkbox'></div>
<label for='user_allow_marketing_emails'>
Send me email updates with the latest news from the Quantopian community. We send these emails about once a month.
</label>
</div>
<div class='button-row'>
<button class='btn-v2 blue full' data-redirect-to='/tutorials/getting-started' id='sign-up-button' type='Submit'>Join Quantopian</button>
</div>
</form></div>
</div>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='feedback-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title'>Contact Support</span>
</div>
<div class='modal-body'>
<form class='anon-user controls quanto-form-v2' id='feedback-form'>
<div class='feedback-inputs'>
<div class='form-group'>
<input autofocus class='form-control' id='feedback-email-box' name='email' placeholder='Email Address' type='email'>
</div>
<div class='form-group'>
<input class='form-control' id='feedback-name-box' placeholder='Name' type='name'>
</div>
<div class='form-group'>
<textarea class='form-control' id='feedback-box' name='feedback' placeholder='What may we help you with?' rows='10'></textarea>
</div>
</div>
</form>
<form class='hidden quanto-form-v2 select-resource-area'>
<div class='select-step select-type-step'>
<div class='form-group'>
<select class='form-control select-resource-dropdown' title='Select the item you need help with'>
<option value='algorithm'>Algorithm</option>
<option value='backtest'>Backtest</option>
<option value='notebook'>Notebook</option>
</select>
</div>
</div>
<div class='select-step loading-area hidden'>
<div class='loading-text'>
Loading...
</div>
</div>
<div class='select-step empty-list-area hidden'>
<div class='back-button'>Go Back</div>
<div class='empty-text'>
No <span class='empty-list-resource-text'>algorithms</span> found
</div>
</div>
<div class='select-algo-area select-step hidden'>
<div class='back-button'>Go Back</div>
<table class='select-algo-table select-item-table'>
<thead>
<tr>
<th>
Algorithm
<span class='sort-icon'></span>
</th>
<th>
Last Modified
<span class='sort-icon'></span>
</th>
</tr>
</thead>
</table>
</div>
<div class='select-backtest-area select-step hidden'>
<div class='back-button'>Go Back</div>
<table class='select-backtest-table select-item-table'>
<thead>
<tr>
<th>
Backtest
<span class='sort-icon'></span>
</th>
<th>
Started At
<span class='sort-icon'></span>
</th>
<th>
Overall Return
<span class='sort-icon'></span>
</th>
<th>
Status
<span class='sort-icon'></span>
</th>
</tr>
</thead>
</table>
</div>
<div class='select-notebook-area select-step hidden'>
<div class='back-button'>Go Back</div>
<div class='subtitle select-cell-step'>
Choose a cell to use as the preview for this notebook:
</div>
<div class='iframe-wrapper'>
<iframe class='notebook-list-iframe slow-fade' src=''></iframe>
</div>
<div class='progress-area slow-fade in'>
<div class='progress-container'>
<div class='progress-title'>
<div class='quanto-loader gray'></div>
</div>
</div>
</div>
<div class='maintenance-area'>
<div class='error-container'>
<div class='row'>
<div class='col-md-14 msg-title h1'>
Sorry, research is currently undergoing maintenance.
</div>
</div>
<div class='row'>
<div class='col-md-14 msg-subtitle'>
Please check back shortly. If the maintenance period lasts longer than expected,
you can find updates on <a href='https://status.quantopian.com/'>status.quantopian.com</a>.
</div>
</div>

</div>
</div>
<div class='error-area'>
<div class='error-container'>
<div class='row'>
<div class='col-md-14 msg-title h1'>
Sorry, something went wrong on our end.
</div>
</div>
<div class='row'>
<div class='col-md-14 msg-subtitle'>
Please try again or contact <a class='open-feedback-link'>Quantopian support</a>.
</div>
</div>

</div>
</div>

</div>
<div class='selected-item-area select-step hidden'>
<div class='selected-item-group form-group'>
<div class='selected-item-control'>
<input class='disabled form-control selected-item-box' type='text'>
<span class='secure-icon icon'></span>
<button class='btn change change-primary-item-button change-selection-button new-btn transparent' type='button'>
<span class='refresh-icon icon'></span>
</button>
</div>
<div class='selected-backtest-control'>
<input class='disabled form-control selected-backtest-box' type='text'>
<span class='secure-icon icon'></span>
<button class='btn change-backtest-button change-selection-button new-btn transparent' type='button'>
<span class='refresh-icon icon'></span>
</button>
</div>
</div>
<div class='checkbox-group form-group'>
<div class='checkbox give-permission'>
<input class='give-permission-checkbox' id='feedback-give-permission-checkbox' type='checkbox'>
<div class='quanto-checkbox'></div>
<label for='feedback-give-permission-checkbox'>
I permit Quantopian to view <span class='item-type-text'>this algorithm,
backtest or notebook and their imported datasets</span> for the purpose of providing support.
</label>
</div>
</div>
</div>
</form>

<div class='loading-step hidden'>
<div class='loading-text'>
Submitting your support ticket...
</div>
</div>
<div class='success-step invisible'>
<h2 class='title center'>
You've successfully submitted a support ticket.
</h2>
<p>
Our support team will be in touch soon.
</p>
<div class='confirmation-image'></div>
</div>
</div>
<div class='modal-footer'>
<button class='btn-v2 blue' id='send-feedback-button'>Send</button>
<div class='error-message hidden'>
Error submitting support request.
</div>
</div>

</div>
</div>
</div>

</div>
</div>
<div class='footer' id='quanto-footer-container'>
<div class='container'>
<div class='row header-row'>
<div class='col-sm-fourth span3'>
<img class='async-image logotype-image' data-src='https://qf.quantopian.com/assets/logos/logo-q-full-b23bda5ac757691b9259d396d0dfef91567165868b8c955a836649686e6d2248.svg'>
</div>
<div class='col-sm-fourth span3'></div>
<div class='col-sm-fourth span3'></div>
<div class='col-sm-fourth span3'>
<div class='feedback-email'>
Need help?
<a href="/cdn-cgi/l/email-protection#83e5e6e6e7e1e2e0e8c3f2f6e2edf7ecf3eae2edade0ecee">Contact support.</a>
</div>
</div>
</div>
<div class='row'>
<div class='col-sm-fourth span3'>
<div class='header'>Company</div>
<div class='footer-row'>
<a href='/about'>About</a>
</div>
<div class='footer-row'>
<a href='/academia'>Academia</a>
</div>
<div class='footer-row'>
<a href='/jobs'>Careers</a>
</div>
<div class='footer-row'>
<a href='/posts'>Community</a>
</div>
<div class='footer-row'>
<a href='/events'>Events</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Learn &amp; Support</div>
<div class='footer-row'>
<a href='/faq'>FAQ</a>
</div>
<div class='footer-row'>
<a href='/tutorials/getting-started'>Getting Started</a>
</div>
<div class='footer-row'>
<a href='/docs'>Documentation</a>
</div>
<div class='footer-row'>
<a href='/tutorials'>Tutorials</a>
</div>
<div class='footer-row'>
<a href='/lectures'>Lectures</a>
</div>
<div class='footer-row'>
<a href='/opensource'>Open Source</a>
</div>
<div class='footer-row'>
<a href='https://status.quantopian.com/'>Site Status</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Notices</div>
<div class='footer-row'>
<a href='/policies/terms'>Terms of Use</a>
</div>
<div class='footer-row'>
<a href='/policies/privacy'>Privacy Policy</a>
</div>
<div class='footer-row'>
<a href='/security'>Security</a>
</div>
<div class='footer-row'>
<a href='/policies/code-of-conduct'>Code of Conduct</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Follow Us</div>
<div class='footer-row'>
<a href='https://www.twitter.com/quantopian'>Twitter</a>
</div>
<div class='footer-row'>
<a href='https://www.facebook.com/quantopian'>Facebook</a>
</div>
<div class='footer-row'>
<a href='https://www.linkedin.com/company/quantopian'>LinkedIn</a>
</div>
<div class='footer-row'>
<a href='https://www.youtube.com/channel/UC606MUq45P3zFLa4VGKbxsg'>YouTube</a>
</div>
</div>
</div>
<div class='row'>
<div class='col-xs-14 span12'>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian.
</p>
<p>
In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>

</div>
</div>
</div>
</div>
</div>
<div class='mobile-footer'>
<div class='mobile-nav-category main-links'>
<div class='mobile-nav-row-footer'>
<a href='/about'>About Quantopian</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/jobs'>Careers</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/posts'>Community</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/events'>Events</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/docs'>Documentation</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/academia'>Academia</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/lectures'>Lectures</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://status.quantopian.com/'>Status</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.facebook.com/quantopian'>Facebook</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.twitter.com/quantopian'>Twitter</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.linkedin.com/company/quantopian'>LinkedIn</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.youtube.com/channel/UC606MUq45P3zFLa4VGKbxsg'>YouTube</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/policies/terms'>Terms of Use</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/policies/privacy'>Privacy Policy</a>
</div>
</div>
<div class='mobile-nav-category'>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian.
</p>
<p>
In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>

</div>
</div>
</div>

</div>
<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script></body>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', "UA-8519877-1", {
    cookieDomain: "quantopian.com"
  });
  ga('set', 'dimension1', 'session_5f9dc7425d387f00077e48e4');
  
  ga('send', 'pageview');
</script>

<input type="hidden" name="is_mac" id="is_mac" value="false" />
<input type="hidden" name="mp" id="mp" value="75873953cd404bcc1da88a55ff51e3b4" />
<script>
  (function(e,a){if(!a.__SV){var b=window;try{var c,l,i,j=b.location,g=j.hash;c=function(a,b){return(l=a.match(RegExp(b+"=([^&]*)")))?l[1]:null};g&&c(g,"state")&&(i=JSON.parse(decodeURIComponent(c(g,"state"))),"mpeditor"===i.action&&(b.sessionStorage.setItem("_mpcehash",g),history.replaceState(i.desiredHash||"",e.title,j.pathname+j.search)))}catch(m){}var k,h;window.mixpanel=a;a._i=[];a.init=function(b,c,f){function e(b,a){var c=a.split(".");2==c.length&&(b=b[c[0]],a=c[1]);b[a]=function(){b.push([a].concat(Array.prototype.slice.call(arguments,
  0)))}}var d=a;"undefined"!==typeof f?d=a[f]=[]:f="mixpanel";d.people=d.people||[];d.toString=function(b){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);b||(a+=" (stub)");return a};d.people.toString=function(){return d.toString(1)+".people (stub)"};k="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
  for(h=0;h<k.length;h++)e(d,k[h]);a._i.push([b,c,f])};a.__SV=1.2;b=e.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";c=e.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}})(document,window.mixpanel||[]);
  mixpanel.init("75873953cd404bcc1da88a55ff51e3b4");
</script>
<script>
  mixpanel.track("view page", {"page": window.location.pathname});
</script>
</html>
